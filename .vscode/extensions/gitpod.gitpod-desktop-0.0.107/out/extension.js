/*! For license information please see extension.js.LICENSE.txt */
(()=>{var __webpack_modules__={13421:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createGitpodService=t.GitpodServiceImpl=t.WorkspaceInstanceUpdateListener=t.GitpodCompositeClient=t.GitpodServerProxy=t.GitpodServerPath=t.createServerMock=t.createServiceMock=t.WorkspaceTimeoutValues=t.WORKSPACE_TIMEOUT_EXTENDED_ALT=t.WORKSPACE_TIMEOUT_EXTENDED=t.WORKSPACE_TIMEOUT_DEFAULT_LONG=t.WORKSPACE_TIMEOUT_DEFAULT_SHORT=t.GitpodServer=void 0;const o=r(8231),s=r(2891),i=r(40100),a=r(85406);t.GitpodServer=Symbol("GitpodServer"),t.WORKSPACE_TIMEOUT_DEFAULT_SHORT="short",t.WORKSPACE_TIMEOUT_DEFAULT_LONG="long",t.WORKSPACE_TIMEOUT_EXTENDED="extended",t.WORKSPACE_TIMEOUT_EXTENDED_ALT="180m",t.WorkspaceTimeoutValues=[t.WORKSPACE_TIMEOUT_DEFAULT_SHORT,t.WORKSPACE_TIMEOUT_DEFAULT_LONG,t.WORKSPACE_TIMEOUT_EXTENDED,t.WORKSPACE_TIMEOUT_EXTENDED_ALT],t.createServiceMock=function(e){return new h((0,t.createServerMock)(e))},t.createServerMock=function(e){return e.setClient=e.setClient||(()=>{}),e.dispose=e.dispose||(()=>{}),new Proxy(e,{get:(e,t)=>{const r=e[t];if(!r)throw new Error(`Method ${String(t)} not implemented`);return r}})},t.GitpodServerPath="/gitpod",t.GitpodServerProxy=Symbol("GitpodServerProxy");class c{constructor(){this.clients=[]}registerClient(e){return this.clients.push(e),{dispose:()=>{const t=this.clients.indexOf(e);t>-1&&this.clients.splice(t,1)}}}onInstanceUpdate(e){for(const t of this.clients)if(t.onInstanceUpdate)try{t.onInstanceUpdate(e)}catch(e){console.error(e)}}onPrebuildUpdate(e){for(const t of this.clients)if(t.onPrebuildUpdate)try{t.onPrebuildUpdate(e)}catch(e){console.error(e)}}onWorkspaceImageBuildLogs(e,t){for(const r of this.clients)if(r.onWorkspaceImageBuildLogs)try{r.onWorkspaceImageBuildLogs(e,t)}catch(e){console.error(e)}}notifyDidOpenConnection(){for(const e of this.clients)if(e.notifyDidOpenConnection)try{e.notifyDidOpenConnection()}catch(e){console.error(e)}}notifyDidCloseConnection(){for(const e of this.clients)if(e.notifyDidCloseConnection)try{e.notifyDidCloseConnection()}catch(e){console.error(e)}}onCreditAlert(e){for(const t of this.clients)if(t.onCreditAlert)try{t.onCreditAlert(e)}catch(e){console.error(e)}}}t.GitpodCompositeClient=c;const l="undefined"!=typeof window,u={unknown:0,preparing:1,building:2,pending:3,creating:4,initializing:5,running:6,interrupted:7,stopping:8,stopped:9};class d{constructor(e,t){this.service=e,this._info=t,this.onDidChangeEmitter=new a.Emitter,this.onDidChange=this.onDidChangeEmitter.event,this.source="sync",this.syncQueue=Promise.resolve(),e.registerClient({onInstanceUpdate:e=>{this.isOutOfOrder(e)||(this.cancelSync(),this._info.latestInstance=e,this.source="update",this.onDidChangeEmitter.fire(void 0))},notifyDidOpenConnection:()=>{this.sync()}}),l&&(window.document.addEventListener("visibilitychange",(()=>n(this,void 0,void 0,(function*(){"visible"===window.document.visibilityState&&this.sync()})))),window.addEventListener("pageshow",(e=>{e.persisted&&this.sync()})))}get info(){return this._info}sync(){this.cancelSync(),this.syncTokenSource=new o.CancellationTokenSource;const e=this.syncTokenSource.token;this.syncQueue=this.syncQueue.then((()=>n(this,void 0,void 0,(function*(){if(!e.isCancellationRequested)try{const t=yield this.service.server.getWorkspace(this._info.workspace.id);if(e.isCancellationRequested)return;this._info=t,this.source="sync",this.onDidChangeEmitter.fire(void 0)}catch(e){console.error("failed to sync workspace instance:",e)}}))))}cancelSync(){this.syncTokenSource&&(this.syncTokenSource.cancel(),this.syncTokenSource=void 0)}isOutOfOrder(e){var t;return e.workspaceId!==this._info.workspace.id||"update"!==this.source&&e.id===(null===(t=this.info.latestInstance)||void 0===t?void 0:t.id)&&u[e.status.phase]<u[this.info.latestInstance.status.phase]}}t.WorkspaceInstanceUpdateListener=d;class h{constructor(e,t){this.server=e,this.options=t,this.compositeClient=new c,this.instanceListeners=new Map,e.setClient(this.compositeClient),e.onDidOpenConnection((()=>this.compositeClient.notifyDidOpenConnection())),e.onDidCloseConnection((()=>this.compositeClient.notifyDidCloseConnection()))}registerClient(e){return this.compositeClient.registerClient(e)}listenToInstance(e){const t=this.instanceListeners.get(e)||(()=>n(this,void 0,void 0,(function*(){const t=yield this.server.getWorkspace(e);return new d(this,t)})))();return this.instanceListeners.set(e,t),t}reconnect(){var e;return n(this,void 0,void 0,(function*(){(null===(e=this.options)||void 0===e?void 0:e.onReconnect)&&(yield this.options.onReconnect())}))}}t.GitpodServiceImpl=h,t.createGitpodService=function(e){const r=e=>new s.GitpodHostUrl(e).asWebsocket().withApi({pathname:t.GitpodServerPath}).toString();let n;n="string"==typeof e?r(e):e.then((e=>r(e)));const o=new i.WebSocketConnectionProvider;let a=()=>{};const c=o.createProxy(n,void 0,{onListening:e=>{a=()=>e.reconnect()}});return new h(c,{onReconnect:a})}},40100:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketConnectionProvider=void 0;const n=r(19614),o=r(8231),s=r(59725),i=r(26386),a=r(19689),c=r(22003);t.WebSocketConnectionProvider=class{createProxy(e,t,r){const n=new a.JsonRpcProxyFactory(t),o=e=>{const t=this.listen({path:e,onConnection:e=>n.listen(e)},{onTransportDidClose:()=>n.fireConnectionClosed(),onTransportDidOpen:()=>n.fireConnectionOpened()},r);(null==r?void 0:r.onListening)&&r.onListening(t)};return"string"==typeof e?o(e):e.then((e=>o(e))),n.createProxy()}listen(e,t,r){const s=e.path,i=this.createWebSocket(s),a=this.createLogger();if(r&&r.onerror){const e=r.onerror;i.addEventListener("error",(t=>{e(t)}))}else i.addEventListener("error",(e=>{a.error(JSON.stringify(e))}));return function(e,t,r,s){e.addEventListener("close",(()=>r.onTransportDidClose()));let i=!1;e.onopen=()=>{if(r.onTransportDidOpen(),i)return;i=!0;const a=function(e,t){const r=(0,n.toSocket)(e),s=new u(r),i=new l(e,t),a=(0,o.createMessageConnection)(s,i,t);return a.onClose((()=>a.dispose())),a}(e,s);t.onConnection(a)}}(i,e,t,a),i}createLogger(){return new n.ConsoleLogger}createWebSocket(e){return new c.default(e,void 0,{maxReconnectionDelay:1e4,minReconnectionDelay:1e3,reconnectionDelayGrowFactor:1.3,maxRetries:1/0,debug:!1,WebSocket})}};class l extends s.AbstractMessageWriter{constructor(e,t){super(),this.errorCount=0,this.buffer=[],this.socket=e,this.logger=t,e.addEventListener("open",(e=>this.flushBuffer()))}write(e){if(this.socket.readyState===c.default.OPEN)try{const t=JSON.stringify(e);this.socket.send(t)}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount),this.bufferMsg(e)}else this.bufferMsg(e)}flushBuffer(){if(0===this.buffer.length)return;const e=[...this.buffer];this.buffer=[];for(const t of e)this.write(t)}bufferMsg(e){this.buffer.push(e)}}class u extends i.AbstractMessageReader{constructor(e){super(),this.events=[],this.state="initial",this.callback=()=>{},this.socket=e,this.socket.onMessage((e=>this.readMessage(e))),this.socket.onError((e=>this.fireError(e))),this.socket.onClose(((e,t)=>{if(1e3!==e){const r={name:""+e,message:`Error during socket reconnect: code = ${e}, reason = ${t}`};this.fireError(r)}}))}listen(e){if("initial"===this.state)for(this.state="listening",this.callback=e;0!==this.events.length;){const e=this.events.pop();e.message?this.readMessage(e.message):e.error?this.fireError(e.error):this.fireClose()}}readMessage(e){if("initial"===this.state)this.events.splice(0,0,{message:e});else if("listening"===this.state){const t=JSON.parse(e);this.callback(t)}}fireError(e){"initial"===this.state?this.events.splice(0,0,{error:e}):"listening"===this.state&&super.fireError(e)}fireClose(){"initial"===this.state?this.events.splice(0,0,{}):"listening"===this.state&&super.fireClose(),this.state="closed"}}},19689:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcProxyFactory=t.JsonRpcConnectionHandler=void 0;const o=r(8231),s=r(85406),i=r(90864);t.JsonRpcConnectionHandler=class{constructor(e,t){this.path=e,this.targetFactory=t}onConnection(e,t){const r=new a,n=r.createProxy();r.target=this.targetFactory(n,t),r.listen(e)}};class a{constructor(e){this.target=e,this.onDidOpenConnectionEmitter=new s.Emitter,this.onDidCloseConnectionEmitter=new s.Emitter,this.waitForConnection()}waitForConnection(){this.connectionPromise=new Promise((e=>this.connectionPromiseResolve=e)),this.connectionPromise.then((e=>{e.onClose((()=>this.fireConnectionClosed())),this.fireConnectionOpened()}))}fireConnectionClosed(){this.onDidCloseConnectionEmitter.fire(void 0)}fireConnectionOpened(){this.onDidOpenConnectionEmitter.fire(void 0)}listen(e){e.onRequest(((e,...t)=>this.onRequest(e,...t))),e.onNotification(((e,...t)=>this.onNotification(e,...t))),e.onDispose((()=>this.waitForConnection())),e.listen(),this.connectionPromiseResolve(e)}onRequest(e,...t){return n(this,void 0,void 0,(function*(){try{return yield this.target[e](...t)}catch(r){throw r instanceof o.ResponseError?i.log.info(`Request ${e} unsuccessful: ${r.code}/"${r.message}"`,{method:e,args:t}):i.log.error(`Request ${e} failed with internal server error`,r,{method:e,args:t}),r}}))}onNotification(e,...t){this.target[e]&&this.target[e](...t)}createProxy(){return new Proxy(this,this)}get(e,t,r){if("setClient"===t)return e=>{this.target=e};if("onDidOpenConnection"===t)return this.onDidOpenConnectionEmitter.event;if("onDidCloseConnection"===t)return this.onDidCloseConnectionEmitter.event;const n=this.isNotification(t);return(...e)=>this.connectionPromise.then((r=>new Promise(((o,s)=>{try{n?(r.sendNotification(t.toString(),...e),o(void 0)):r.sendRequest(t.toString(),...e).catch((e=>s(e))).then((e=>o(e)))}catch(e){s(e)}}))))}isNotification(e){return e.toString().startsWith("notify")||e.toString().startsWith("on")}}t.JsonRpcProxyFactory=a},85406:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;const n=r(90864);!function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class o{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let r=!1;for(let n=0,o=this._callbacks.length;n<o;n++)if(this._callbacks[n]===e){if(this._contexts[n]===t)return this._callbacks.splice(n,1),void this._contexts.splice(n,1);r=!0}if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const t=[],r=this._callbacks.slice(0),o=this._contexts.slice(0);for(let s=0,i=r.length;s<i;s++)try{t.push(r[s].apply(o[s],e))}catch(e){n.log.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class s{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{let n;return this._callbacks||(this._callbacks=new o),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t),n={dispose:()=>{this._callbacks.remove(e,t),n.dispose=s._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(r)&&r.push(n),n}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=s,s._noop=function(){}},2891:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GitpodHostUrl=void 0;const n=r(57310).URL||window.URL,o=r(90864),s="(([a-f][0-9a-f]{7}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})|([0-9a-z]{2,16}-[0-9a-z]{2,16}-[0-9a-z]{8,11}))",i=RegExp(`^${s}$`),a=RegExp(`^([0-9]{4,6}-)?${s}\\.`);class c{constructor(e){void 0===e||"string"==typeof e?(this.url=new n(e||"https://gitpod.io"),this.url.search="",this.url.hash="",this.url.pathname=""):e instanceof n?this.url=e:o.log.error("Unexpected urlParam",{urlParam:e})}static fromWorkspaceUrl(e){return new c(new n(e))}withWorkspacePrefix(e,t){return this.withDomainPrefix(`${e}.ws-${t}.`)}withDomainPrefix(e){return this.with((t=>({host:e+t.host})))}withoutWorkspacePrefix(){return this.url.host.match(a)?this.withoutDomainPrefix(2):this}withoutDomainPrefix(e){return this.with((t=>({host:t.host.split(".").splice(e).join(".")})))}with(e){const t="function"==typeof e?e(this.url):e;t.pathname&&t.pathname.length>0&&!t.pathname.startsWith("/")&&(t.pathname="/"+t.pathname);const r=Object.assign(new n(this.toString()),t);return new c(r)}withApi(e){return(e?this.with(e):this).with((e=>({pathname:`/api${e.pathname}`})))}withContext(e){return this.with((t=>({hash:e})))}asWebsocket(){return this.with((e=>({protocol:"https:"===e.protocol?"wss:":"ws:"})))}asWorkspacePage(){return this.with((e=>({pathname:"/workspaces"})))}asDashboard(){return this.with((e=>({pathname:"/"})))}asLogin(){return this.with((e=>({pathname:"/login"})))}asUpgradeSubscription(){return this.with((e=>({pathname:"/plans"})))}asAccessControl(){return this.with((e=>({pathname:"/integrations"})))}asSettings(){return this.with((e=>({pathname:"/settings"})))}asPreferences(){return this.with((e=>({pathname:"/preferences"})))}asStart(e=this.workspaceId){return this.withoutWorkspacePrefix().with({pathname:"/start/",hash:"#"+e})}asWorkspaceAuth(e,t){return this.with((r=>({pathname:`/api/auth/workspace-cookie/${e}`,search:t?"redirect":""})))}toString(){return this.url.toString()}toStringWoRootSlash(){let e=this.toString();return e.endsWith("/")&&(e=e.slice(0,e.length-1)),e}get workspaceId(){const e=this.url.host.split(".");if(e.length>1){const t=e[0].match(i);if(t)return t[0]}const t=this.url.pathname.split("/");if(t.length>3&&"workspace"===t[1])return t[2]}get blobServe(){return"blobserve"===this.url.host.split(".")[0]||"blobserve"===this.url.pathname.split("/")[0]}asSorry(e){return this.with({pathname:"/sorry",hash:e})}asApiLogout(){return this.withApi((e=>({pathname:"/logout/"})))}asIDEProxy(){return"ide"===this.url.host.split(".")[0]?this:this.with((e=>({host:"ide."+e.host})))}asIDEMetrics(){let e=this;return"ide"!==this.url.host.split(".")[0]&&(e=e.asIDEProxy()),e.with((e=>({pathname:"/metrics-api"})))}}t.GitpodHostUrl=c},90864:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogrusLogLevel=t.LogrusLogLevels=t.log=t.LogContext=void 0;const n=r(73837).inspect;let o,s,i=!1;var a;(t.LogContext||(t.LogContext={})).from=function(e){var t,r;return{sessionId:null===(t=e.request)||void 0===t?void 0:t.requestID,userId:e.userId||(null===(r=e.user)||void 0===r?void 0:r.id)}},function(e){function t(e){i=!0,console.error=function(...e){c(!0,e)},console.warn=function(...e){u(!0,e)},console.info=function(...e){h(!0,e)},console.debug=function(...e){f(!0,e)},console.log=console.info;const t=()=>{},r=(r,n)=>m.isGreatherOrEqual(n,e)?r:t;c=r(l,"error"),u=r(d,"warning"),h=r(p,"info"),f=r(g,"debug")}e.error=function(...e){c(!1,e)},e.warn=function(...e){u(!1,e)},e.info=function(...e){h(!1,e)},e.debug=function(...e){f(!1,e)},e.enableJSONLogging=function(e,r,n){o=e,s=r,t(n)},e.setLogLevel=t,e.resetToDefaultLogging=function(){i=!1,console.log=E,console.error=w,console.warn=A,console.info=T,console.debug=C},e.setVersion=function(e){s=e}}(a=t.log||(t.log={}));let c=l;function l(e,t){v(e,w,"ERROR",t)}let u=d;function d(e,t){v(e,A,"WARNING",t)}let h=p;function p(e,t){v(e,T,"INFO",t)}let f=g;function g(e,t){v(e,C,"DEBUG",t)}var m,y;function v(e,t,r,n){if(!i)return void t(...n);if(0==n.length)return;let c,l,u,d;n[0]instanceof Error?(u=n[0],d=n.slice(1)):"string"==typeof n[0]?(l=n[0],n.length<2||!(n[1]instanceof Error)?d=n.slice(1):(u=n[1],d=n.slice(2))):e||n.length<2?d=n:(c=n[0],n[1]instanceof Error?(u=n[1],d=n.slice(2)):"string"==typeof n[1]?(l=n[1],n.length<3||!(n[2]instanceof Error)?d=n.slice(2):(u=n[2],d=n.slice(3))):(c=void 0,d=n));const h=function(e,t,r,n,i,c){void 0!==t&&0==Object.keys(t).length&&(t=void 0);let l={};y.isGreaterOrEqualThanWarning(e)&&(l=function(e){const t={"@type":"type.googleapis.com/google.devtools.clouderrorreporting.v1beta1.ReportedErrorEvent",serviceContext:{service:o||"<ts-not-set>",version:s||"<ts-not-set>"}};if(e){const r=e.stack;r&&(t.stack_trace=r)}return t}(n));const u=0==i.length?void 0:1==i.length?i[0]:i,d=Object.assign(Object.assign({},l),{component:o,severity:e,time:(new Date).toISOString(),context:t,message:r,error:n,payload:u,loggedViaConsole:!!c||void 0});let h=b(d);if(h.length>I&&void 0!==u&&(delete d.payload,d.payloadStub=`Payload stripped as log item was longer than ${I} characters`,h=b(d),h.length<=I&&a.warn("Log item too large, stripping payload",{logItemStub:_(d)})),!(h.length>I))return h;a.error("Log item too large w/o payload, discarding",{logItemStub:_(d)})}(r,c,l,u,d,e);void 0!==h&&t(h)}function _(e){const t={component:e.component,severity:e.severity,time:e.time,environment:e.environment,region:e.region};return"string"==typeof e.message&&(e.message.length<=R?t.message=e.message:t.messageStub=e.message.substring(0,R)+" ... (too long, truncated)"),e.error instanceof Error&&(e.error.stack.length<=O?t.error=e.error.stack:t.errorStub=e.error.stack.substring(0,O)+" ... (too long, truncated)"),t}function b(e){try{return S(e)}catch(t){if(t instanceof TypeError&&void 0!==e.payload)return e.payload=n(e.payload),S(e);throw t}}function S(e){return JSON.stringify(e,((e,t)=>t instanceof Error?t.stack:t))}t.LogrusLogLevels={trace:!0,debug:!0,info:!0,warning:!0,error:!0,fatal:!0,panic:!0},function(e){function r(e){return Object.keys(t.LogrusLogLevels).findIndex((t=>t===e))}e.isGreatherOrEqual=function(e,t){return void 0!==e&&(void 0===t||r(e)>=r(t))},e.getFromEnv=function(){const e=process.env.LOG_LEVEL;if(!e)return;const r=e;return t.LogrusLogLevels[r]?r:void 0}}(m=t.LogrusLogLevel||(t.LogrusLogLevel={})),function(e){e.isGreaterOrEqualThanWarning=e=>{switch(e){case"INFO":case"DEBUG":return!1;default:return!0}}}(y||(y={}));const E=console.log,w=console.error,A=console.warn,T=console.info,C=console.debug,I=32768,R=1024,O=4096},98994:(e,t,r)=>{var n=r(33019),o=n,s=function(){return this||window||s||self||Function("return this")()}.call(null),i=r(46060);o.object.extend(proto,i),o.exportSymbol("proto.localapp.AutoTunnelRequest",null,s),o.exportSymbol("proto.localapp.AutoTunnelResponse",null,s),o.exportSymbol("proto.localapp.ResolveSSHConnectionRequest",null,s),o.exportSymbol("proto.localapp.ResolveSSHConnectionResponse",null,s),o.exportSymbol("proto.localapp.TunnelStatus",null,s),o.exportSymbol("proto.localapp.TunnelStatusRequest",null,s),o.exportSymbol("proto.localapp.TunnelStatusResponse",null,s),proto.localapp.TunnelStatusRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.localapp.TunnelStatusRequest,n.Message),o.DEBUG&&!COMPILED&&(proto.localapp.TunnelStatusRequest.displayName="proto.localapp.TunnelStatusRequest"),proto.localapp.TunnelStatusResponse=function(e){n.Message.initialize(this,e,0,-1,proto.localapp.TunnelStatusResponse.repeatedFields_,null)},o.inherits(proto.localapp.TunnelStatusResponse,n.Message),o.DEBUG&&!COMPILED&&(proto.localapp.TunnelStatusResponse.displayName="proto.localapp.TunnelStatusResponse"),proto.localapp.TunnelStatus=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.localapp.TunnelStatus,n.Message),o.DEBUG&&!COMPILED&&(proto.localapp.TunnelStatus.displayName="proto.localapp.TunnelStatus"),proto.localapp.AutoTunnelRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.localapp.AutoTunnelRequest,n.Message),o.DEBUG&&!COMPILED&&(proto.localapp.AutoTunnelRequest.displayName="proto.localapp.AutoTunnelRequest"),proto.localapp.AutoTunnelResponse=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.localapp.AutoTunnelResponse,n.Message),o.DEBUG&&!COMPILED&&(proto.localapp.AutoTunnelResponse.displayName="proto.localapp.AutoTunnelResponse"),proto.localapp.ResolveSSHConnectionRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.localapp.ResolveSSHConnectionRequest,n.Message),o.DEBUG&&!COMPILED&&(proto.localapp.ResolveSSHConnectionRequest.displayName="proto.localapp.ResolveSSHConnectionRequest"),proto.localapp.ResolveSSHConnectionResponse=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.localapp.ResolveSSHConnectionResponse,n.Message),o.DEBUG&&!COMPILED&&(proto.localapp.ResolveSSHConnectionResponse.displayName="proto.localapp.ResolveSSHConnectionResponse"),n.Message.GENERATE_TO_OBJECT&&(proto.localapp.TunnelStatusRequest.prototype.toObject=function(e){return proto.localapp.TunnelStatusRequest.toObject(e,this)},proto.localapp.TunnelStatusRequest.toObject=function(e,t){var r={instanceId:n.Message.getFieldWithDefault(t,1,""),observe:n.Message.getBooleanFieldWithDefault(t,2,!1)};return e&&(r.$jspbMessageInstance=t),r}),proto.localapp.TunnelStatusRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.localapp.TunnelStatusRequest;return proto.localapp.TunnelStatusRequest.deserializeBinaryFromReader(r,t)},proto.localapp.TunnelStatusRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setInstanceId(r);break;case 2:r=t.readBool(),e.setObserve(r);break;default:t.skipField()}return e},proto.localapp.TunnelStatusRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.localapp.TunnelStatusRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.localapp.TunnelStatusRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getInstanceId()).length>0&&t.writeString(1,r),(r=e.getObserve())&&t.writeBool(2,r)},proto.localapp.TunnelStatusRequest.prototype.getInstanceId=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.localapp.TunnelStatusRequest.prototype.setInstanceId=function(e){return n.Message.setProto3StringField(this,1,e)},proto.localapp.TunnelStatusRequest.prototype.getObserve=function(){return n.Message.getBooleanFieldWithDefault(this,2,!1)},proto.localapp.TunnelStatusRequest.prototype.setObserve=function(e){return n.Message.setProto3BooleanField(this,2,e)},proto.localapp.TunnelStatusResponse.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.localapp.TunnelStatusResponse.prototype.toObject=function(e){return proto.localapp.TunnelStatusResponse.toObject(e,this)},proto.localapp.TunnelStatusResponse.toObject=function(e,t){var r={tunnelsList:n.Message.toObjectList(t.getTunnelsList(),proto.localapp.TunnelStatus.toObject,e)};return e&&(r.$jspbMessageInstance=t),r}),proto.localapp.TunnelStatusResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.localapp.TunnelStatusResponse;return proto.localapp.TunnelStatusResponse.deserializeBinaryFromReader(r,t)},proto.localapp.TunnelStatusResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=new proto.localapp.TunnelStatus;t.readMessage(r,proto.localapp.TunnelStatus.deserializeBinaryFromReader),e.addTunnels(r)}else t.skipField();return e},proto.localapp.TunnelStatusResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.localapp.TunnelStatusResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.localapp.TunnelStatusResponse.serializeBinaryToWriter=function(e,t){var r;(r=e.getTunnelsList()).length>0&&t.writeRepeatedMessage(1,r,proto.localapp.TunnelStatus.serializeBinaryToWriter)},proto.localapp.TunnelStatusResponse.prototype.getTunnelsList=function(){return n.Message.getRepeatedWrapperField(this,proto.localapp.TunnelStatus,1)},proto.localapp.TunnelStatusResponse.prototype.setTunnelsList=function(e){return n.Message.setRepeatedWrapperField(this,1,e)},proto.localapp.TunnelStatusResponse.prototype.addTunnels=function(e,t){return n.Message.addToRepeatedWrapperField(this,1,e,proto.localapp.TunnelStatus,t)},proto.localapp.TunnelStatusResponse.prototype.clearTunnelsList=function(){return this.setTunnelsList([])},n.Message.GENERATE_TO_OBJECT&&(proto.localapp.TunnelStatus.prototype.toObject=function(e){return proto.localapp.TunnelStatus.toObject(e,this)},proto.localapp.TunnelStatus.toObject=function(e,t){var r={remotePort:n.Message.getFieldWithDefault(t,1,0),localPort:n.Message.getFieldWithDefault(t,2,0),visibility:n.Message.getFieldWithDefault(t,3,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.localapp.TunnelStatus.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.localapp.TunnelStatus;return proto.localapp.TunnelStatus.deserializeBinaryFromReader(r,t)},proto.localapp.TunnelStatus.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setRemotePort(r);break;case 2:r=t.readUint32(),e.setLocalPort(r);break;case 3:r=t.readEnum(),e.setVisibility(r);break;default:t.skipField()}return e},proto.localapp.TunnelStatus.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.localapp.TunnelStatus.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.localapp.TunnelStatus.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getRemotePort())&&t.writeUint32(1,r),0!==(r=e.getLocalPort())&&t.writeUint32(2,r),0!==(r=e.getVisibility())&&t.writeEnum(3,r)},proto.localapp.TunnelStatus.prototype.getRemotePort=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.localapp.TunnelStatus.prototype.setRemotePort=function(e){return n.Message.setProto3IntField(this,1,e)},proto.localapp.TunnelStatus.prototype.getLocalPort=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.localapp.TunnelStatus.prototype.setLocalPort=function(e){return n.Message.setProto3IntField(this,2,e)},proto.localapp.TunnelStatus.prototype.getVisibility=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.localapp.TunnelStatus.prototype.setVisibility=function(e){return n.Message.setProto3EnumField(this,3,e)},n.Message.GENERATE_TO_OBJECT&&(proto.localapp.AutoTunnelRequest.prototype.toObject=function(e){return proto.localapp.AutoTunnelRequest.toObject(e,this)},proto.localapp.AutoTunnelRequest.toObject=function(e,t){var r={instanceId:n.Message.getFieldWithDefault(t,1,""),enabled:n.Message.getBooleanFieldWithDefault(t,2,!1)};return e&&(r.$jspbMessageInstance=t),r}),proto.localapp.AutoTunnelRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.localapp.AutoTunnelRequest;return proto.localapp.AutoTunnelRequest.deserializeBinaryFromReader(r,t)},proto.localapp.AutoTunnelRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setInstanceId(r);break;case 2:r=t.readBool(),e.setEnabled(r);break;default:t.skipField()}return e},proto.localapp.AutoTunnelRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.localapp.AutoTunnelRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.localapp.AutoTunnelRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getInstanceId()).length>0&&t.writeString(1,r),(r=e.getEnabled())&&t.writeBool(2,r)},proto.localapp.AutoTunnelRequest.prototype.getInstanceId=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.localapp.AutoTunnelRequest.prototype.setInstanceId=function(e){return n.Message.setProto3StringField(this,1,e)},proto.localapp.AutoTunnelRequest.prototype.getEnabled=function(){return n.Message.getBooleanFieldWithDefault(this,2,!1)},proto.localapp.AutoTunnelRequest.prototype.setEnabled=function(e){return n.Message.setProto3BooleanField(this,2,e)},n.Message.GENERATE_TO_OBJECT&&(proto.localapp.AutoTunnelResponse.prototype.toObject=function(e){return proto.localapp.AutoTunnelResponse.toObject(e,this)},proto.localapp.AutoTunnelResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),proto.localapp.AutoTunnelResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.localapp.AutoTunnelResponse;return proto.localapp.AutoTunnelResponse.deserializeBinaryFromReader(r,t)},proto.localapp.AutoTunnelResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},proto.localapp.AutoTunnelResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.localapp.AutoTunnelResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.localapp.AutoTunnelResponse.serializeBinaryToWriter=function(e,t){},n.Message.GENERATE_TO_OBJECT&&(proto.localapp.ResolveSSHConnectionRequest.prototype.toObject=function(e){return proto.localapp.ResolveSSHConnectionRequest.toObject(e,this)},proto.localapp.ResolveSSHConnectionRequest.toObject=function(e,t){var r={instanceId:n.Message.getFieldWithDefault(t,1,""),workspaceId:n.Message.getFieldWithDefault(t,2,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.localapp.ResolveSSHConnectionRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.localapp.ResolveSSHConnectionRequest;return proto.localapp.ResolveSSHConnectionRequest.deserializeBinaryFromReader(r,t)},proto.localapp.ResolveSSHConnectionRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setInstanceId(r);break;case 2:r=t.readString(),e.setWorkspaceId(r);break;default:t.skipField()}return e},proto.localapp.ResolveSSHConnectionRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.localapp.ResolveSSHConnectionRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.localapp.ResolveSSHConnectionRequest.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getInstanceId()).length>0&&t.writeString(1,r),(r=e.getWorkspaceId()).length>0&&t.writeString(2,r)},proto.localapp.ResolveSSHConnectionRequest.prototype.getInstanceId=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.localapp.ResolveSSHConnectionRequest.prototype.setInstanceId=function(e){return n.Message.setProto3StringField(this,1,e)},proto.localapp.ResolveSSHConnectionRequest.prototype.getWorkspaceId=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.localapp.ResolveSSHConnectionRequest.prototype.setWorkspaceId=function(e){return n.Message.setProto3StringField(this,2,e)},n.Message.GENERATE_TO_OBJECT&&(proto.localapp.ResolveSSHConnectionResponse.prototype.toObject=function(e){return proto.localapp.ResolveSSHConnectionResponse.toObject(e,this)},proto.localapp.ResolveSSHConnectionResponse.toObject=function(e,t){var r={configFile:n.Message.getFieldWithDefault(t,1,""),host:n.Message.getFieldWithDefault(t,2,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.localapp.ResolveSSHConnectionResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.localapp.ResolveSSHConnectionResponse;return proto.localapp.ResolveSSHConnectionResponse.deserializeBinaryFromReader(r,t)},proto.localapp.ResolveSSHConnectionResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readString();e.setConfigFile(r);break;case 2:r=t.readString(),e.setHost(r);break;default:t.skipField()}return e},proto.localapp.ResolveSSHConnectionResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.localapp.ResolveSSHConnectionResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.localapp.ResolveSSHConnectionResponse.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getConfigFile()).length>0&&t.writeString(1,r),(r=e.getHost()).length>0&&t.writeString(2,r)},proto.localapp.ResolveSSHConnectionResponse.prototype.getConfigFile=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.localapp.ResolveSSHConnectionResponse.prototype.setConfigFile=function(e){return n.Message.setProto3StringField(this,1,e)},proto.localapp.ResolveSSHConnectionResponse.prototype.getHost=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.localapp.ResolveSSHConnectionResponse.prototype.setHost=function(e){return n.Message.setProto3StringField(this,2,e)},o.object.extend(t,proto.localapp)},65516:(e,t,r)=>{var n=r(98994),o=r(44109).grpc,s=function(){function e(){}return e.serviceName="localapp.LocalApp",e}();function i(e,t){this.serviceHost=e,this.options=t||{}}s.TunnelStatus={methodName:"TunnelStatus",service:s,requestStream:!1,responseStream:!0,requestType:n.TunnelStatusRequest,responseType:n.TunnelStatusResponse},s.AutoTunnel={methodName:"AutoTunnel",service:s,requestStream:!1,responseStream:!1,requestType:n.AutoTunnelRequest,responseType:n.AutoTunnelResponse},s.ResolveSSHConnection={methodName:"ResolveSSHConnection",service:s,requestStream:!1,responseStream:!1,requestType:n.ResolveSSHConnectionRequest,responseType:n.ResolveSSHConnectionResponse},t.LocalApp=s,i.prototype.tunnelStatus=function(e,t){var r={data:[],end:[],status:[]},n=o.invoke(s.TunnelStatus,{request:e,host:this.serviceHost,metadata:t,transport:this.options.transport,debug:this.options.debug,onMessage:function(e){r.data.forEach((function(t){t(e)}))},onEnd:function(e,t,n){r.status.forEach((function(r){r({code:e,details:t,metadata:n})})),r.end.forEach((function(r){r({code:e,details:t,metadata:n})})),r=null}});return{on:function(e,t){return r[e].push(t),this},cancel:function(){r=null,n.close()}}},i.prototype.autoTunnel=function(e,t,r){2===arguments.length&&(r=arguments[1]);var n=o.unary(s.AutoTunnel,{request:e,host:this.serviceHost,metadata:t,transport:this.options.transport,debug:this.options.debug,onEnd:function(e){if(r)if(e.status!==o.Code.OK){var t=new Error(e.statusMessage);t.code=e.status,t.metadata=e.trailers,r(t,null)}else r(null,e.message)}});return{cancel:function(){r=null,n.close()}}},i.prototype.resolveSSHConnection=function(e,t,r){2===arguments.length&&(r=arguments[1]);var n=o.unary(s.ResolveSSHConnection,{request:e,host:this.serviceHost,metadata:t,transport:this.options.transport,debug:this.options.debug,onEnd:function(e){if(r)if(e.status!==o.Code.OK){var t=new Error(e.statusMessage);t.code=e.status,t.metadata=e.trailers,r(t,null)}else r(null,e.message)}});return{cancel:function(){r=null,n.close()}}},t.LocalAppClient=i},86711:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDEClientService=void 0;const n=r(62891),o=r(49408);t.IDEClientService={typeName:"gitpod.experimental.v1.IDEClientService",methods:{sendHeartbeat:{name:"SendHeartbeat",I:n.SendHeartbeatRequest,O:n.SendHeartbeatResponse,kind:o.MethodKind.Unary},sendDidClose:{name:"SendDidClose",I:n.SendDidCloseRequest,O:n.SendDidCloseResponse,kind:o.MethodKind.Unary}}}},62891:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SendDidCloseResponse=t.SendDidCloseRequest=t.SendHeartbeatResponse=t.SendHeartbeatRequest=void 0;const n=r(49408);class o extends n.Message{constructor(e){super(),this.workspaceId="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new o).fromBinary(e,t)}static fromJson(e,t){return(new o).fromJson(e,t)}static fromJsonString(e,t){return(new o).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(o,e,t)}}t.SendHeartbeatRequest=o,o.runtime=n.proto3,o.typeName="gitpod.experimental.v1.SendHeartbeatRequest",o.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"workspace_id",kind:"scalar",T:9}]));class s extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new s).fromBinary(e,t)}static fromJson(e,t){return(new s).fromJson(e,t)}static fromJsonString(e,t){return(new s).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(s,e,t)}}t.SendHeartbeatResponse=s,s.runtime=n.proto3,s.typeName="gitpod.experimental.v1.SendHeartbeatResponse",s.fields=n.proto3.util.newFieldList((()=>[]));class i extends n.Message{constructor(e){super(),this.workspaceId="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new i).fromBinary(e,t)}static fromJson(e,t){return(new i).fromJson(e,t)}static fromJsonString(e,t){return(new i).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(i,e,t)}}t.SendDidCloseRequest=i,i.runtime=n.proto3,i.typeName="gitpod.experimental.v1.SendDidCloseRequest",i.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"workspace_id",kind:"scalar",T:9}]));class a extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new a).fromBinary(e,t)}static fromJson(e,t){return(new a).fromJson(e,t)}static fromJsonString(e,t){return(new a).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(a,e,t)}}t.SendDidCloseResponse=a,a.runtime=n.proto3,a.typeName="gitpod.experimental.v1.SendDidCloseResponse",a.fields=n.proto3.util.newFieldList((()=>[]))},69121:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(31741),t),o(r(32036),t),o(r(17823),t)},31741:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pagination=void 0;const n=r(49408);class o extends n.Message{constructor(e){super(),this.pageSize=0,this.page=0,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new o).fromBinary(e,t)}static fromJson(e,t){return(new o).fromJson(e,t)}static fromJsonString(e,t){return(new o).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(o,e,t)}}t.Pagination=o,o.runtime=n.proto3,o.typeName="gitpod.experimental.v1.Pagination",o.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"page_size",kind:"scalar",T:5},{no:2,name:"page",kind:"scalar",T:5}]))},19001:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserService=void 0;const n=r(79757),o=r(49408);t.UserService={typeName:"gitpod.experimental.v1.UserService",methods:{getAuthenticatedUser:{name:"GetAuthenticatedUser",I:n.GetAuthenticatedUserRequest,O:n.GetAuthenticatedUserResponse,kind:o.MethodKind.Unary},listSSHKeys:{name:"ListSSHKeys",I:n.ListSSHKeysRequest,O:n.ListSSHKeysResponse,kind:o.MethodKind.Unary},createSSHKey:{name:"CreateSSHKey",I:n.CreateSSHKeyRequest,O:n.CreateSSHKeyResponse,kind:o.MethodKind.Unary},getSSHKey:{name:"GetSSHKey",I:n.GetSSHKeyRequest,O:n.GetSSHKeyResponse,kind:o.MethodKind.Unary},deleteSSHKey:{name:"DeleteSSHKey",I:n.DeleteSSHKeyRequest,O:n.DeleteSSHKeyResponse,kind:o.MethodKind.Unary},getGitToken:{name:"GetGitToken",I:n.GetGitTokenRequest,O:n.GetGitTokenResponse,kind:o.MethodKind.Unary}}}},79757:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GitToken=t.GetGitTokenResponse=t.GetGitTokenRequest=t.DeleteSSHKeyResponse=t.DeleteSSHKeyRequest=t.GetSSHKeyResponse=t.GetSSHKeyRequest=t.CreateSSHKeyResponse=t.CreateSSHKeyRequest=t.ListSSHKeysResponse=t.ListSSHKeysRequest=t.GetAuthenticatedUserResponse=t.GetAuthenticatedUserRequest=t.SSHKey=t.User=void 0;const n=r(49408);class o extends n.Message{constructor(e){super(),this.id="",this.name="",this.avatarUrl="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new o).fromBinary(e,t)}static fromJson(e,t){return(new o).fromJson(e,t)}static fromJsonString(e,t){return(new o).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(o,e,t)}}t.User=o,o.runtime=n.proto3,o.typeName="gitpod.experimental.v1.User",o.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"avatar_url",kind:"scalar",T:9},{no:5,name:"created_at",kind:"message",T:n.Timestamp}]));class s extends n.Message{constructor(e){super(),this.id="",this.name="",this.key="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new s).fromBinary(e,t)}static fromJson(e,t){return(new s).fromJson(e,t)}static fromJsonString(e,t){return(new s).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(s,e,t)}}t.SSHKey=s,s.runtime=n.proto3,s.typeName="gitpod.experimental.v1.SSHKey",s.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"key",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:n.Timestamp}]));class i extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new i).fromBinary(e,t)}static fromJson(e,t){return(new i).fromJson(e,t)}static fromJsonString(e,t){return(new i).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(i,e,t)}}t.GetAuthenticatedUserRequest=i,i.runtime=n.proto3,i.typeName="gitpod.experimental.v1.GetAuthenticatedUserRequest",i.fields=n.proto3.util.newFieldList((()=>[]));class a extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new a).fromBinary(e,t)}static fromJson(e,t){return(new a).fromJson(e,t)}static fromJsonString(e,t){return(new a).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(a,e,t)}}t.GetAuthenticatedUserResponse=a,a.runtime=n.proto3,a.typeName="gitpod.experimental.v1.GetAuthenticatedUserResponse",a.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"user",kind:"message",T:o}]));class c extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new c).fromBinary(e,t)}static fromJson(e,t){return(new c).fromJson(e,t)}static fromJsonString(e,t){return(new c).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(c,e,t)}}t.ListSSHKeysRequest=c,c.runtime=n.proto3,c.typeName="gitpod.experimental.v1.ListSSHKeysRequest",c.fields=n.proto3.util.newFieldList((()=>[]));class l extends n.Message{constructor(e){super(),this.keys=[],n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new l).fromBinary(e,t)}static fromJson(e,t){return(new l).fromJson(e,t)}static fromJsonString(e,t){return(new l).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(l,e,t)}}t.ListSSHKeysResponse=l,l.runtime=n.proto3,l.typeName="gitpod.experimental.v1.ListSSHKeysResponse",l.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"keys",kind:"message",T:s,repeated:!0}]));class u extends n.Message{constructor(e){super(),this.name="",this.key="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new u).fromBinary(e,t)}static fromJson(e,t){return(new u).fromJson(e,t)}static fromJsonString(e,t){return(new u).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(u,e,t)}}t.CreateSSHKeyRequest=u,u.runtime=n.proto3,u.typeName="gitpod.experimental.v1.CreateSSHKeyRequest",u.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"key",kind:"scalar",T:9}]));class d extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new d).fromBinary(e,t)}static fromJson(e,t){return(new d).fromJson(e,t)}static fromJsonString(e,t){return(new d).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(d,e,t)}}t.CreateSSHKeyResponse=d,d.runtime=n.proto3,d.typeName="gitpod.experimental.v1.CreateSSHKeyResponse",d.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"key",kind:"message",T:s}]));class h extends n.Message{constructor(e){super(),this.keyId="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new h).fromBinary(e,t)}static fromJson(e,t){return(new h).fromJson(e,t)}static fromJsonString(e,t){return(new h).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(h,e,t)}}t.GetSSHKeyRequest=h,h.runtime=n.proto3,h.typeName="gitpod.experimental.v1.GetSSHKeyRequest",h.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"key_id",kind:"scalar",T:9}]));class p extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new p).fromBinary(e,t)}static fromJson(e,t){return(new p).fromJson(e,t)}static fromJsonString(e,t){return(new p).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(p,e,t)}}t.GetSSHKeyResponse=p,p.runtime=n.proto3,p.typeName="gitpod.experimental.v1.GetSSHKeyResponse",p.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"key",kind:"message",T:s}]));class f extends n.Message{constructor(e){super(),this.keyId="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new f).fromBinary(e,t)}static fromJson(e,t){return(new f).fromJson(e,t)}static fromJsonString(e,t){return(new f).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(f,e,t)}}t.DeleteSSHKeyRequest=f,f.runtime=n.proto3,f.typeName="gitpod.experimental.v1.DeleteSSHKeyRequest",f.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"key_id",kind:"scalar",T:9}]));class g extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new g).fromBinary(e,t)}static fromJson(e,t){return(new g).fromJson(e,t)}static fromJsonString(e,t){return(new g).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(g,e,t)}}t.DeleteSSHKeyResponse=g,g.runtime=n.proto3,g.typeName="gitpod.experimental.v1.DeleteSSHKeyResponse",g.fields=n.proto3.util.newFieldList((()=>[]));class m extends n.Message{constructor(e){super(),this.host="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new m).fromBinary(e,t)}static fromJson(e,t){return(new m).fromJson(e,t)}static fromJsonString(e,t){return(new m).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(m,e,t)}}t.GetGitTokenRequest=m,m.runtime=n.proto3,m.typeName="gitpod.experimental.v1.GetGitTokenRequest",m.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"host",kind:"scalar",T:9}]));class y extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new y).fromBinary(e,t)}static fromJson(e,t){return(new y).fromJson(e,t)}static fromJsonString(e,t){return(new y).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(y,e,t)}}t.GetGitTokenResponse=y,y.runtime=n.proto3,y.typeName="gitpod.experimental.v1.GetGitTokenResponse",y.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"token",kind:"message",T:v}]));class v extends n.Message{constructor(e){super(),this.expiryDate="",this.idToken="",this.refreshToken="",this.scopes=[],this.updateDate="",this.username="",this.value="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new v).fromBinary(e,t)}static fromJson(e,t){return(new v).fromJson(e,t)}static fromJsonString(e,t){return(new v).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(v,e,t)}}t.GitToken=v,v.runtime=n.proto3,v.typeName="gitpod.experimental.v1.GitToken",v.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"expiry_date",kind:"scalar",T:9},{no:2,name:"id_token",kind:"scalar",T:9},{no:3,name:"refresh_token",kind:"scalar",T:9},{no:4,name:"scopes",kind:"scalar",T:9,repeated:!0},{no:5,name:"update_date",kind:"scalar",T:9},{no:6,name:"username",kind:"scalar",T:9},{no:7,name:"value",kind:"scalar",T:9}]))},17823:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspacesService=void 0;const n=r(32036),o=r(49408);t.WorkspacesService={typeName:"gitpod.experimental.v1.WorkspacesService",methods:{listWorkspaces:{name:"ListWorkspaces",I:n.ListWorkspacesRequest,O:n.ListWorkspacesResponse,kind:o.MethodKind.Unary},getWorkspace:{name:"GetWorkspace",I:n.GetWorkspaceRequest,O:n.GetWorkspaceResponse,kind:o.MethodKind.Unary},streamWorkspaceStatus:{name:"StreamWorkspaceStatus",I:n.StreamWorkspaceStatusRequest,O:n.StreamWorkspaceStatusResponse,kind:o.MethodKind.ServerStreaming},getOwnerToken:{name:"GetOwnerToken",I:n.GetOwnerTokenRequest,O:n.GetOwnerTokenResponse,kind:o.MethodKind.Unary},createAndStartWorkspace:{name:"CreateAndStartWorkspace",I:n.CreateAndStartWorkspaceRequest,O:n.CreateAndStartWorkspaceResponse,kind:o.MethodKind.Unary},stopWorkspace:{name:"StopWorkspace",I:n.StopWorkspaceRequest,O:n.StopWorkspaceResponse,kind:o.MethodKind.Unary},deleteWorkspace:{name:"DeleteWorkspace",I:n.DeleteWorkspaceRequest,O:n.DeleteWorkspaceResponse,kind:o.MethodKind.Unary},updatePort:{name:"UpdatePort",I:n.UpdatePortRequest,O:n.UpdatePortResponse,kind:o.MethodKind.Unary}}}},32036:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdatePortResponse=t.UpdatePortRequest=t.PortSpec=t.StartWorkspaceSpec=t.Port=t.WorkspaceInstanceStatus_Conditions=t.WorkspaceInstanceStatus_Phase=t.WorkspaceInstanceStatus=t.WorkspaceInstance=t.WorkspaceContext_Snapshot=t.WorkspaceContext_Prebuild=t.WorkspaceContext_Git=t.WorkspaceContext=t.WorkspaceStatus=t.Workspace=t.DeleteWorkspaceResponse=t.DeleteWorkspaceRequest=t.StopWorkspaceResponse=t.StopWorkspaceRequest=t.StartWorkspaceResponse=t.StartWorkspaceRequest=t.CreateAndStartWorkspaceResponse=t.CreateAndStartWorkspaceRequest=t.GetOwnerTokenResponse=t.GetOwnerTokenRequest=t.StreamWorkspaceStatusResponse=t.StreamWorkspaceStatusRequest=t.GetWorkspaceResponse=t.GetWorkspaceRequest=t.ListWorkspacesResponse=t.ListWorkspacesRequest=t.AdmissionLevel=t.PortPolicy=void 0;const n=r(49408),o=r(31741);var s,i,a;!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.PRIVATE=1]="PRIVATE",e[e.PUBLIC=2]="PUBLIC"}(s=t.PortPolicy||(t.PortPolicy={})),n.proto3.util.setEnumType(s,"gitpod.experimental.v1.PortPolicy",[{no:0,name:"PORT_POLICY_UNSPECIFIED"},{no:1,name:"PORT_POLICY_PRIVATE"},{no:2,name:"PORT_POLICY_PUBLIC"}]),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.OWNER_ONLY=1]="OWNER_ONLY",e[e.EVERYONE=2]="EVERYONE"}(i=t.AdmissionLevel||(t.AdmissionLevel={})),n.proto3.util.setEnumType(i,"gitpod.experimental.v1.AdmissionLevel",[{no:0,name:"ADMISSION_LEVEL_UNSPECIFIED"},{no:1,name:"ADMISSION_LEVEL_OWNER_ONLY"},{no:2,name:"ADMISSION_LEVEL_EVERYONE"}]);class c extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new c).fromBinary(e,t)}static fromJson(e,t){return(new c).fromJson(e,t)}static fromJsonString(e,t){return(new c).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(c,e,t)}}t.ListWorkspacesRequest=c,c.runtime=n.proto3,c.typeName="gitpod.experimental.v1.ListWorkspacesRequest",c.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"pagination",kind:"message",T:o.Pagination},{no:2,name:"field_mask",kind:"message",T:n.FieldMask}]));class l extends n.Message{constructor(e){super(),this.nextPageToken="",this.result=[],n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new l).fromBinary(e,t)}static fromJson(e,t){return(new l).fromJson(e,t)}static fromJsonString(e,t){return(new l).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(l,e,t)}}t.ListWorkspacesResponse=l,l.runtime=n.proto3,l.typeName="gitpod.experimental.v1.ListWorkspacesResponse",l.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"next_page_token",kind:"scalar",T:9},{no:2,name:"result",kind:"message",T:A,repeated:!0}]));class u extends n.Message{constructor(e){super(),this.workspaceId="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new u).fromBinary(e,t)}static fromJson(e,t){return(new u).fromJson(e,t)}static fromJsonString(e,t){return(new u).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(u,e,t)}}t.GetWorkspaceRequest=u,u.runtime=n.proto3,u.typeName="gitpod.experimental.v1.GetWorkspaceRequest",u.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"workspace_id",kind:"scalar",T:9}]));class d extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new d).fromBinary(e,t)}static fromJson(e,t){return(new d).fromJson(e,t)}static fromJsonString(e,t){return(new d).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(d,e,t)}}t.GetWorkspaceResponse=d,d.runtime=n.proto3,d.typeName="gitpod.experimental.v1.GetWorkspaceResponse",d.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"result",kind:"message",T:A}]));class h extends n.Message{constructor(e){super(),this.workspaceId="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new h).fromBinary(e,t)}static fromJson(e,t){return(new h).fromJson(e,t)}static fromJsonString(e,t){return(new h).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(h,e,t)}}t.StreamWorkspaceStatusRequest=h,h.runtime=n.proto3,h.typeName="gitpod.experimental.v1.StreamWorkspaceStatusRequest",h.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"workspace_id",kind:"scalar",T:9}]));class p extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new p).fromBinary(e,t)}static fromJson(e,t){return(new p).fromJson(e,t)}static fromJsonString(e,t){return(new p).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(p,e,t)}}t.StreamWorkspaceStatusResponse=p,p.runtime=n.proto3,p.typeName="gitpod.experimental.v1.StreamWorkspaceStatusResponse",p.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"result",kind:"message",T}]));class f extends n.Message{constructor(e){super(),this.workspaceId="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new f).fromBinary(e,t)}static fromJson(e,t){return(new f).fromJson(e,t)}static fromJsonString(e,t){return(new f).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(f,e,t)}}t.GetOwnerTokenRequest=f,f.runtime=n.proto3,f.typeName="gitpod.experimental.v1.GetOwnerTokenRequest",f.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"workspace_id",kind:"scalar",T:9}]));class g extends n.Message{constructor(e){super(),this.token="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new g).fromBinary(e,t)}static fromJson(e,t){return(new g).fromJson(e,t)}static fromJsonString(e,t){return(new g).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(g,e,t)}}t.GetOwnerTokenResponse=g,g.runtime=n.proto3,g.typeName="gitpod.experimental.v1.GetOwnerTokenResponse",g.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"token",kind:"scalar",T:9}]));class m extends n.Message{constructor(e){super(),this.idempotencyToken="",this.source={case:void 0},n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new m).fromBinary(e,t)}static fromJson(e,t){return(new m).fromJson(e,t)}static fromJsonString(e,t){return(new m).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(m,e,t)}}t.CreateAndStartWorkspaceRequest=m,m.runtime=n.proto3,m.typeName="gitpod.experimental.v1.CreateAndStartWorkspaceRequest",m.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"idempotency_token",kind:"scalar",T:9},{no:2,name:"context_url",kind:"scalar",T:9,oneof:"source"},{no:3,name:"prebuild_id",kind:"scalar",T:9,oneof:"source"},{no:5,name:"start_spec",kind:"message",T:L}]));class y extends n.Message{constructor(e){super(),this.workspaceId="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new y).fromBinary(e,t)}static fromJson(e,t){return(new y).fromJson(e,t)}static fromJsonString(e,t){return(new y).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(y,e,t)}}t.CreateAndStartWorkspaceResponse=y,y.runtime=n.proto3,y.typeName="gitpod.experimental.v1.CreateAndStartWorkspaceResponse",y.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"workspace_id",kind:"scalar",T:9}]));class v extends n.Message{constructor(e){super(),this.idempotencyToken="",this.workspaceId="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new v).fromBinary(e,t)}static fromJson(e,t){return(new v).fromJson(e,t)}static fromJsonString(e,t){return(new v).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(v,e,t)}}t.StartWorkspaceRequest=v,v.runtime=n.proto3,v.typeName="gitpod.experimental.v1.StartWorkspaceRequest",v.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"idempotency_token",kind:"scalar",T:9},{no:2,name:"workspace_id",kind:"scalar",T:9},{no:3,name:"spec",kind:"message",T:L}]));class _ extends n.Message{constructor(e){super(),this.instanceId="",this.workspaceUrl="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new _).fromBinary(e,t)}static fromJson(e,t){return(new _).fromJson(e,t)}static fromJsonString(e,t){return(new _).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(_,e,t)}}t.StartWorkspaceResponse=_,_.runtime=n.proto3,_.typeName="gitpod.experimental.v1.StartWorkspaceResponse",_.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"instance_id",kind:"scalar",T:9},{no:2,name:"workspace_url",kind:"scalar",T:9}]));class b extends n.Message{constructor(e){super(),this.workspaceId="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new b).fromBinary(e,t)}static fromJson(e,t){return(new b).fromJson(e,t)}static fromJsonString(e,t){return(new b).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(b,e,t)}}t.StopWorkspaceRequest=b,b.runtime=n.proto3,b.typeName="gitpod.experimental.v1.StopWorkspaceRequest",b.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"workspace_id",kind:"scalar",T:9}]));class S extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new S).fromBinary(e,t)}static fromJson(e,t){return(new S).fromJson(e,t)}static fromJsonString(e,t){return(new S).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(S,e,t)}}t.StopWorkspaceResponse=S,S.runtime=n.proto3,S.typeName="gitpod.experimental.v1.StopWorkspaceResponse",S.fields=n.proto3.util.newFieldList((()=>[]));class E extends n.Message{constructor(e){super(),this.workspaceId="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new E).fromBinary(e,t)}static fromJson(e,t){return(new E).fromJson(e,t)}static fromJsonString(e,t){return(new E).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(E,e,t)}}t.DeleteWorkspaceRequest=E,E.runtime=n.proto3,E.typeName="gitpod.experimental.v1.DeleteWorkspaceRequest",E.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"workspace_id",kind:"scalar",T:9}]));class w extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new w).fromBinary(e,t)}static fromJson(e,t){return(new w).fromJson(e,t)}static fromJsonString(e,t){return(new w).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(w,e,t)}}t.DeleteWorkspaceResponse=w,w.runtime=n.proto3,w.typeName="gitpod.experimental.v1.DeleteWorkspaceResponse",w.fields=n.proto3.util.newFieldList((()=>[]));class A extends n.Message{constructor(e){super(),this.workspaceId="",this.ownerId="",this.projectId="",this.description="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new A).fromBinary(e,t)}static fromJson(e,t){return(new A).fromJson(e,t)}static fromJsonString(e,t){return(new A).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(A,e,t)}}t.Workspace=A,A.runtime=n.proto3,A.typeName="gitpod.experimental.v1.Workspace",A.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"workspace_id",kind:"scalar",T:9},{no:2,name:"owner_id",kind:"scalar",T:9},{no:3,name:"project_id",kind:"scalar",T:9},{no:4,name:"context",kind:"message",T:C},{no:5,name:"description",kind:"scalar",T:9},{no:6,name:"status",kind:"message",T}]));class T extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new T).fromBinary(e,t)}static fromJson(e,t){return(new T).fromJson(e,t)}static fromJsonString(e,t){return(new T).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(T,e,t)}}t.WorkspaceStatus=T,T.runtime=n.proto3,T.typeName="gitpod.experimental.v1.WorkspaceStatus",T.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"instance",kind:"message",T:k}]));class C extends n.Message{constructor(e){super(),this.contextUrl="",this.details={case:void 0},n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new C).fromBinary(e,t)}static fromJson(e,t){return(new C).fromJson(e,t)}static fromJsonString(e,t){return(new C).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(C,e,t)}}t.WorkspaceContext=C,C.runtime=n.proto3,C.typeName="gitpod.experimental.v1.WorkspaceContext",C.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"context_url",kind:"scalar",T:9},{no:2,name:"git",kind:"message",T:I,oneof:"details"},{no:3,name:"prebuild",kind:"message",T:R,oneof:"details"},{no:4,name:"snapshot",kind:"message",T:O,oneof:"details"}]));class I extends n.Message{constructor(e){super(),this.normalizedContextUrl="",this.commit="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new I).fromBinary(e,t)}static fromJson(e,t){return(new I).fromJson(e,t)}static fromJsonString(e,t){return(new I).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(I,e,t)}}t.WorkspaceContext_Git=I,I.runtime=n.proto3,I.typeName="gitpod.experimental.v1.WorkspaceContext.Git",I.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"normalized_context_url",kind:"scalar",T:9},{no:2,name:"commit",kind:"scalar",T:9}]));class R extends n.Message{constructor(e){super(),this.prebuildId="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new R).fromBinary(e,t)}static fromJson(e,t){return(new R).fromJson(e,t)}static fromJsonString(e,t){return(new R).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(R,e,t)}}t.WorkspaceContext_Prebuild=R,R.runtime=n.proto3,R.typeName="gitpod.experimental.v1.WorkspaceContext.Prebuild",R.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"original_context",kind:"message",T:I},{no:2,name:"prebuild_id",kind:"scalar",T:9}]));class O extends n.Message{constructor(e){super(),this.snapshotId="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new O).fromBinary(e,t)}static fromJson(e,t){return(new O).fromJson(e,t)}static fromJsonString(e,t){return(new O).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(O,e,t)}}t.WorkspaceContext_Snapshot=O,O.runtime=n.proto3,O.typeName="gitpod.experimental.v1.WorkspaceContext.Snapshot",O.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"snapshot_id",kind:"scalar",T:9}]));class k extends n.Message{constructor(e){super(),this.instanceId="",this.workspaceId="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new k).fromBinary(e,t)}static fromJson(e,t){return(new k).fromJson(e,t)}static fromJsonString(e,t){return(new k).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(k,e,t)}}t.WorkspaceInstance=k,k.runtime=n.proto3,k.typeName="gitpod.experimental.v1.WorkspaceInstance",k.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"instance_id",kind:"scalar",T:9},{no:2,name:"workspace_id",kind:"scalar",T:9},{no:3,name:"created_at",kind:"message",T:n.Timestamp},{no:4,name:"status",kind:"message",T:N}]));class N extends n.Message{constructor(e){super(),this.statusVersion=n.protoInt64.zero,this.phase=a.UNSPECIFIED,this.message="",this.url="",this.admission=i.UNSPECIFIED,this.ports=[],n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new N).fromBinary(e,t)}static fromJson(e,t){return(new N).fromJson(e,t)}static fromJsonString(e,t){return(new N).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(N,e,t)}}t.WorkspaceInstanceStatus=N,N.runtime=n.proto3,N.typeName="gitpod.experimental.v1.WorkspaceInstanceStatus",N.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"status_version",kind:"scalar",T:4},{no:2,name:"phase",kind:"enum",T:n.proto3.getEnumType(a)},{no:3,name:"conditions",kind:"message",T:P},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"url",kind:"scalar",T:9},{no:6,name:"admission",kind:"enum",T:n.proto3.getEnumType(i)},{no:7,name:"ports",kind:"message",T:M,repeated:!0}])),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.PREPARING=1]="PREPARING",e[e.IMAGEBUILD=2]="IMAGEBUILD",e[e.PENDING=3]="PENDING",e[e.CREATING=4]="CREATING",e[e.INITIALIZING=5]="INITIALIZING",e[e.RUNNING=6]="RUNNING",e[e.INTERRUPTED=7]="INTERRUPTED",e[e.STOPPING=8]="STOPPING",e[e.STOPPED=9]="STOPPED"}(a=t.WorkspaceInstanceStatus_Phase||(t.WorkspaceInstanceStatus_Phase={})),n.proto3.util.setEnumType(a,"gitpod.experimental.v1.WorkspaceInstanceStatus.Phase",[{no:0,name:"PHASE_UNSPECIFIED"},{no:1,name:"PHASE_PREPARING"},{no:2,name:"PHASE_IMAGEBUILD"},{no:3,name:"PHASE_PENDING"},{no:4,name:"PHASE_CREATING"},{no:5,name:"PHASE_INITIALIZING"},{no:6,name:"PHASE_RUNNING"},{no:7,name:"PHASE_INTERRUPTED"},{no:8,name:"PHASE_STOPPING"},{no:9,name:"PHASE_STOPPED"}]);class P extends n.Message{constructor(e){super(),this.failed="",this.timeout="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new P).fromBinary(e,t)}static fromJson(e,t){return(new P).fromJson(e,t)}static fromJsonString(e,t){return(new P).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(P,e,t)}}t.WorkspaceInstanceStatus_Conditions=P,P.runtime=n.proto3,P.typeName="gitpod.experimental.v1.WorkspaceInstanceStatus.Conditions",P.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"failed",kind:"scalar",T:9},{no:2,name:"timeout",kind:"scalar",T:9},{no:9,name:"first_user_activity",kind:"message",T:n.Timestamp},{no:11,name:"stopped_by_request",kind:"scalar",T:8,opt:!0}]));class M extends n.Message{constructor(e){super(),this.port=n.protoInt64.zero,this.policy=s.UNSPECIFIED,this.url="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new M).fromBinary(e,t)}static fromJson(e,t){return(new M).fromJson(e,t)}static fromJsonString(e,t){return(new M).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(M,e,t)}}t.Port=M,M.runtime=n.proto3,M.typeName="gitpod.experimental.v1.Port",M.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"port",kind:"scalar",T:4},{no:2,name:"policy",kind:"enum",T:n.proto3.getEnumType(s)},{no:3,name:"url",kind:"scalar",T:9}]));class L extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new L).fromBinary(e,t)}static fromJson(e,t){return(new L).fromJson(e,t)}static fromJsonString(e,t){return(new L).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(L,e,t)}}t.StartWorkspaceSpec=L,L.runtime=n.proto3,L.typeName="gitpod.experimental.v1.StartWorkspaceSpec",L.fields=n.proto3.util.newFieldList((()=>[]));class B extends n.Message{constructor(e){super(),this.port=n.protoInt64.zero,this.policy=s.UNSPECIFIED,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new B).fromBinary(e,t)}static fromJson(e,t){return(new B).fromJson(e,t)}static fromJsonString(e,t){return(new B).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(B,e,t)}}t.PortSpec=B,B.runtime=n.proto3,B.typeName="gitpod.experimental.v1.PortSpec",B.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"port",kind:"scalar",T:4},{no:2,name:"policy",kind:"enum",T:n.proto3.getEnumType(s)}]));class D extends n.Message{constructor(e){super(),this.workspaceId="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new D).fromBinary(e,t)}static fromJson(e,t){return(new D).fromJson(e,t)}static fromJsonString(e,t){return(new D).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(D,e,t)}}t.UpdatePortRequest=D,D.runtime=n.proto3,D.typeName="gitpod.experimental.v1.UpdatePortRequest",D.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"workspace_id",kind:"scalar",T:9},{no:2,name:"port",kind:"message",T:B}]));class x extends n.Message{constructor(e){super(),n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new x).fromBinary(e,t)}static fromJson(e,t){return(new x).fromJson(e,t)}static fromJsonString(e,t){return(new x).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(x,e,t)}}t.UpdatePortResponse=x,x.runtime=n.proto3,x.typeName="gitpod.experimental.v1.UpdatePortResponse",x.fields=n.proto3.util.newFieldList((()=>[]))},6543:(e,t,r)=>{var n=r(33019),o=n,s=function(){return this||window||s||self||Function("return this")()}.call(null);o.exportSymbol("proto.supervisor.CreateSSHKeyPairRequest",null,s),o.exportSymbol("proto.supervisor.CreateSSHKeyPairResponse",null,s),o.exportSymbol("proto.supervisor.ExposePortRequest",null,s),o.exportSymbol("proto.supervisor.ExposePortResponse",null,s),proto.supervisor.ExposePortRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.supervisor.ExposePortRequest,n.Message),o.DEBUG&&!COMPILED&&(proto.supervisor.ExposePortRequest.displayName="proto.supervisor.ExposePortRequest"),proto.supervisor.ExposePortResponse=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.supervisor.ExposePortResponse,n.Message),o.DEBUG&&!COMPILED&&(proto.supervisor.ExposePortResponse.displayName="proto.supervisor.ExposePortResponse"),proto.supervisor.CreateSSHKeyPairRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.supervisor.CreateSSHKeyPairRequest,n.Message),o.DEBUG&&!COMPILED&&(proto.supervisor.CreateSSHKeyPairRequest.displayName="proto.supervisor.CreateSSHKeyPairRequest"),proto.supervisor.CreateSSHKeyPairResponse=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.supervisor.CreateSSHKeyPairResponse,n.Message),o.DEBUG&&!COMPILED&&(proto.supervisor.CreateSSHKeyPairResponse.displayName="proto.supervisor.CreateSSHKeyPairResponse"),n.Message.GENERATE_TO_OBJECT&&(proto.supervisor.ExposePortRequest.prototype.toObject=function(e){return proto.supervisor.ExposePortRequest.toObject(e,this)},proto.supervisor.ExposePortRequest.toObject=function(e,t){var r={port:n.Message.getFieldWithDefault(t,1,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.supervisor.ExposePortRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.supervisor.ExposePortRequest;return proto.supervisor.ExposePortRequest.deserializeBinaryFromReader(r,t)},proto.supervisor.ExposePortRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=t.readUint32();e.setPort(r)}else t.skipField();return e},proto.supervisor.ExposePortRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.supervisor.ExposePortRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.supervisor.ExposePortRequest.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getPort())&&t.writeUint32(1,r)},proto.supervisor.ExposePortRequest.prototype.getPort=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.supervisor.ExposePortRequest.prototype.setPort=function(e){return n.Message.setProto3IntField(this,1,e)},n.Message.GENERATE_TO_OBJECT&&(proto.supervisor.ExposePortResponse.prototype.toObject=function(e){return proto.supervisor.ExposePortResponse.toObject(e,this)},proto.supervisor.ExposePortResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),proto.supervisor.ExposePortResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.supervisor.ExposePortResponse;return proto.supervisor.ExposePortResponse.deserializeBinaryFromReader(r,t)},proto.supervisor.ExposePortResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},proto.supervisor.ExposePortResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.supervisor.ExposePortResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.supervisor.ExposePortResponse.serializeBinaryToWriter=function(e,t){},n.Message.GENERATE_TO_OBJECT&&(proto.supervisor.CreateSSHKeyPairRequest.prototype.toObject=function(e){return proto.supervisor.CreateSSHKeyPairRequest.toObject(e,this)},proto.supervisor.CreateSSHKeyPairRequest.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),proto.supervisor.CreateSSHKeyPairRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.supervisor.CreateSSHKeyPairRequest;return proto.supervisor.CreateSSHKeyPairRequest.deserializeBinaryFromReader(r,t)},proto.supervisor.CreateSSHKeyPairRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},proto.supervisor.CreateSSHKeyPairRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.supervisor.CreateSSHKeyPairRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.supervisor.CreateSSHKeyPairRequest.serializeBinaryToWriter=function(e,t){},n.Message.GENERATE_TO_OBJECT&&(proto.supervisor.CreateSSHKeyPairResponse.prototype.toObject=function(e){return proto.supervisor.CreateSSHKeyPairResponse.toObject(e,this)},proto.supervisor.CreateSSHKeyPairResponse.toObject=function(e,t){var r={privateKey:n.Message.getFieldWithDefault(t,1,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.supervisor.CreateSSHKeyPairResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.supervisor.CreateSSHKeyPairResponse;return proto.supervisor.CreateSSHKeyPairResponse.deserializeBinaryFromReader(r,t)},proto.supervisor.CreateSSHKeyPairResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=t.readString();e.setPrivateKey(r)}else t.skipField();return e},proto.supervisor.CreateSSHKeyPairResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.supervisor.CreateSSHKeyPairResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.supervisor.CreateSSHKeyPairResponse.serializeBinaryToWriter=function(e,t){var r;(r=e.getPrivateKey()).length>0&&t.writeString(1,r)},proto.supervisor.CreateSSHKeyPairResponse.prototype.getPrivateKey=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.supervisor.CreateSSHKeyPairResponse.prototype.setPrivateKey=function(e){return n.Message.setProto3StringField(this,1,e)},o.object.extend(t,proto.supervisor)},90120:(e,t,r)=>{var n=r(6543),o=r(89976).grpc,s=function(){function e(){}return e.serviceName="supervisor.ControlService",e}();function i(e,t){this.serviceHost=e,this.options=t||{}}s.ExposePort={methodName:"ExposePort",service:s,requestStream:!1,responseStream:!1,requestType:n.ExposePortRequest,responseType:n.ExposePortResponse},s.CreateSSHKeyPair={methodName:"CreateSSHKeyPair",service:s,requestStream:!1,responseStream:!1,requestType:n.CreateSSHKeyPairRequest,responseType:n.CreateSSHKeyPairResponse},t.ControlService=s,i.prototype.exposePort=function(e,t,r){2===arguments.length&&(r=arguments[1]);var n=o.unary(s.ExposePort,{request:e,host:this.serviceHost,metadata:t,transport:this.options.transport,debug:this.options.debug,onEnd:function(e){if(r)if(e.status!==o.Code.OK){var t=new Error(e.statusMessage);t.code=e.status,t.metadata=e.trailers,r(t,null)}else r(null,e.message)}});return{cancel:function(){r=null,n.close()}}},i.prototype.createSSHKeyPair=function(e,t,r){2===arguments.length&&(r=arguments[1]);var n=o.unary(s.CreateSSHKeyPair,{request:e,host:this.serviceHost,metadata:t,transport:this.options.transport,debug:this.options.debug,onEnd:function(e){if(r)if(e.status!==o.Code.OK){var t=new Error(e.statusMessage);t.code=e.status,t.metadata=e.trailers,r(t,null)}else r(null,e.message)}});return{cancel:function(){r=null,n.close()}}},t.ControlServiceClient=i},46060:(e,t,r)=>{var n=r(33019),o=n,s=function(){return this||window||s||self||Function("return this")()}.call(null);o.exportSymbol("proto.supervisor.AutoTunnelRequest",null,s),o.exportSymbol("proto.supervisor.AutoTunnelResponse",null,s),o.exportSymbol("proto.supervisor.CloseTunnelRequest",null,s),o.exportSymbol("proto.supervisor.CloseTunnelResponse",null,s),o.exportSymbol("proto.supervisor.EstablishTunnelRequest",null,s),o.exportSymbol("proto.supervisor.EstablishTunnelRequest.OutputCase",null,s),o.exportSymbol("proto.supervisor.EstablishTunnelResponse",null,s),o.exportSymbol("proto.supervisor.RetryAutoExposeRequest",null,s),o.exportSymbol("proto.supervisor.RetryAutoExposeResponse",null,s),o.exportSymbol("proto.supervisor.TunnelPortRequest",null,s),o.exportSymbol("proto.supervisor.TunnelPortResponse",null,s),o.exportSymbol("proto.supervisor.TunnelVisiblity",null,s),proto.supervisor.TunnelPortRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.supervisor.TunnelPortRequest,n.Message),o.DEBUG&&!COMPILED&&(proto.supervisor.TunnelPortRequest.displayName="proto.supervisor.TunnelPortRequest"),proto.supervisor.TunnelPortResponse=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.supervisor.TunnelPortResponse,n.Message),o.DEBUG&&!COMPILED&&(proto.supervisor.TunnelPortResponse.displayName="proto.supervisor.TunnelPortResponse"),proto.supervisor.CloseTunnelRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.supervisor.CloseTunnelRequest,n.Message),o.DEBUG&&!COMPILED&&(proto.supervisor.CloseTunnelRequest.displayName="proto.supervisor.CloseTunnelRequest"),proto.supervisor.CloseTunnelResponse=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.supervisor.CloseTunnelResponse,n.Message),o.DEBUG&&!COMPILED&&(proto.supervisor.CloseTunnelResponse.displayName="proto.supervisor.CloseTunnelResponse"),proto.supervisor.EstablishTunnelRequest=function(e){n.Message.initialize(this,e,0,-1,null,proto.supervisor.EstablishTunnelRequest.oneofGroups_)},o.inherits(proto.supervisor.EstablishTunnelRequest,n.Message),o.DEBUG&&!COMPILED&&(proto.supervisor.EstablishTunnelRequest.displayName="proto.supervisor.EstablishTunnelRequest"),proto.supervisor.EstablishTunnelResponse=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.supervisor.EstablishTunnelResponse,n.Message),o.DEBUG&&!COMPILED&&(proto.supervisor.EstablishTunnelResponse.displayName="proto.supervisor.EstablishTunnelResponse"),proto.supervisor.AutoTunnelRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.supervisor.AutoTunnelRequest,n.Message),o.DEBUG&&!COMPILED&&(proto.supervisor.AutoTunnelRequest.displayName="proto.supervisor.AutoTunnelRequest"),proto.supervisor.AutoTunnelResponse=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.supervisor.AutoTunnelResponse,n.Message),o.DEBUG&&!COMPILED&&(proto.supervisor.AutoTunnelResponse.displayName="proto.supervisor.AutoTunnelResponse"),proto.supervisor.RetryAutoExposeRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.supervisor.RetryAutoExposeRequest,n.Message),o.DEBUG&&!COMPILED&&(proto.supervisor.RetryAutoExposeRequest.displayName="proto.supervisor.RetryAutoExposeRequest"),proto.supervisor.RetryAutoExposeResponse=function(e){n.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.supervisor.RetryAutoExposeResponse,n.Message),o.DEBUG&&!COMPILED&&(proto.supervisor.RetryAutoExposeResponse.displayName="proto.supervisor.RetryAutoExposeResponse"),n.Message.GENERATE_TO_OBJECT&&(proto.supervisor.TunnelPortRequest.prototype.toObject=function(e){return proto.supervisor.TunnelPortRequest.toObject(e,this)},proto.supervisor.TunnelPortRequest.toObject=function(e,t){var r={port:n.Message.getFieldWithDefault(t,1,0),targetPort:n.Message.getFieldWithDefault(t,2,0),visibility:n.Message.getFieldWithDefault(t,3,0),clientId:n.Message.getFieldWithDefault(t,4,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.supervisor.TunnelPortRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.supervisor.TunnelPortRequest;return proto.supervisor.TunnelPortRequest.deserializeBinaryFromReader(r,t)},proto.supervisor.TunnelPortRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setPort(r);break;case 2:r=t.readUint32(),e.setTargetPort(r);break;case 3:r=t.readEnum(),e.setVisibility(r);break;case 4:r=t.readString(),e.setClientId(r);break;default:t.skipField()}return e},proto.supervisor.TunnelPortRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.supervisor.TunnelPortRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.supervisor.TunnelPortRequest.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getPort())&&t.writeUint32(1,r),0!==(r=e.getTargetPort())&&t.writeUint32(2,r),0!==(r=e.getVisibility())&&t.writeEnum(3,r),(r=e.getClientId()).length>0&&t.writeString(4,r)},proto.supervisor.TunnelPortRequest.prototype.getPort=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.supervisor.TunnelPortRequest.prototype.setPort=function(e){return n.Message.setProto3IntField(this,1,e)},proto.supervisor.TunnelPortRequest.prototype.getTargetPort=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.supervisor.TunnelPortRequest.prototype.setTargetPort=function(e){return n.Message.setProto3IntField(this,2,e)},proto.supervisor.TunnelPortRequest.prototype.getVisibility=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.supervisor.TunnelPortRequest.prototype.setVisibility=function(e){return n.Message.setProto3EnumField(this,3,e)},proto.supervisor.TunnelPortRequest.prototype.getClientId=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.supervisor.TunnelPortRequest.prototype.setClientId=function(e){return n.Message.setProto3StringField(this,4,e)},n.Message.GENERATE_TO_OBJECT&&(proto.supervisor.TunnelPortResponse.prototype.toObject=function(e){return proto.supervisor.TunnelPortResponse.toObject(e,this)},proto.supervisor.TunnelPortResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),proto.supervisor.TunnelPortResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.supervisor.TunnelPortResponse;return proto.supervisor.TunnelPortResponse.deserializeBinaryFromReader(r,t)},proto.supervisor.TunnelPortResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},proto.supervisor.TunnelPortResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.supervisor.TunnelPortResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.supervisor.TunnelPortResponse.serializeBinaryToWriter=function(e,t){},n.Message.GENERATE_TO_OBJECT&&(proto.supervisor.CloseTunnelRequest.prototype.toObject=function(e){return proto.supervisor.CloseTunnelRequest.toObject(e,this)},proto.supervisor.CloseTunnelRequest.toObject=function(e,t){var r={port:n.Message.getFieldWithDefault(t,1,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.supervisor.CloseTunnelRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.supervisor.CloseTunnelRequest;return proto.supervisor.CloseTunnelRequest.deserializeBinaryFromReader(r,t)},proto.supervisor.CloseTunnelRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=t.readUint32();e.setPort(r)}else t.skipField();return e},proto.supervisor.CloseTunnelRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.supervisor.CloseTunnelRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.supervisor.CloseTunnelRequest.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getPort())&&t.writeUint32(1,r)},proto.supervisor.CloseTunnelRequest.prototype.getPort=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.supervisor.CloseTunnelRequest.prototype.setPort=function(e){return n.Message.setProto3IntField(this,1,e)},n.Message.GENERATE_TO_OBJECT&&(proto.supervisor.CloseTunnelResponse.prototype.toObject=function(e){return proto.supervisor.CloseTunnelResponse.toObject(e,this)},proto.supervisor.CloseTunnelResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),proto.supervisor.CloseTunnelResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.supervisor.CloseTunnelResponse;return proto.supervisor.CloseTunnelResponse.deserializeBinaryFromReader(r,t)},proto.supervisor.CloseTunnelResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},proto.supervisor.CloseTunnelResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.supervisor.CloseTunnelResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.supervisor.CloseTunnelResponse.serializeBinaryToWriter=function(e,t){},proto.supervisor.EstablishTunnelRequest.oneofGroups_=[[1,2]],proto.supervisor.EstablishTunnelRequest.OutputCase={OUTPUT_NOT_SET:0,DESC:1,DATA:2},proto.supervisor.EstablishTunnelRequest.prototype.getOutputCase=function(){return n.Message.computeOneofCase(this,proto.supervisor.EstablishTunnelRequest.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.supervisor.EstablishTunnelRequest.prototype.toObject=function(e){return proto.supervisor.EstablishTunnelRequest.toObject(e,this)},proto.supervisor.EstablishTunnelRequest.toObject=function(e,t){var r,n={desc:(r=t.getDesc())&&proto.supervisor.TunnelPortRequest.toObject(e,r),data:t.getData_asB64()};return e&&(n.$jspbMessageInstance=t),n}),proto.supervisor.EstablishTunnelRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.supervisor.EstablishTunnelRequest;return proto.supervisor.EstablishTunnelRequest.deserializeBinaryFromReader(r,t)},proto.supervisor.EstablishTunnelRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)switch(t.getFieldNumber()){case 1:var r=new proto.supervisor.TunnelPortRequest;t.readMessage(r,proto.supervisor.TunnelPortRequest.deserializeBinaryFromReader),e.setDesc(r);break;case 2:r=t.readBytes(),e.setData(r);break;default:t.skipField()}return e},proto.supervisor.EstablishTunnelRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.supervisor.EstablishTunnelRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.supervisor.EstablishTunnelRequest.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getDesc())&&t.writeMessage(1,r,proto.supervisor.TunnelPortRequest.serializeBinaryToWriter),null!=(r=n.Message.getField(e,2))&&t.writeBytes(2,r)},proto.supervisor.EstablishTunnelRequest.prototype.getDesc=function(){return n.Message.getWrapperField(this,proto.supervisor.TunnelPortRequest,1)},proto.supervisor.EstablishTunnelRequest.prototype.setDesc=function(e){return n.Message.setOneofWrapperField(this,1,proto.supervisor.EstablishTunnelRequest.oneofGroups_[0],e)},proto.supervisor.EstablishTunnelRequest.prototype.clearDesc=function(){return this.setDesc(void 0)},proto.supervisor.EstablishTunnelRequest.prototype.hasDesc=function(){return null!=n.Message.getField(this,1)},proto.supervisor.EstablishTunnelRequest.prototype.getData=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.supervisor.EstablishTunnelRequest.prototype.getData_asB64=function(){return n.Message.bytesAsB64(this.getData())},proto.supervisor.EstablishTunnelRequest.prototype.getData_asU8=function(){return n.Message.bytesAsU8(this.getData())},proto.supervisor.EstablishTunnelRequest.prototype.setData=function(e){return n.Message.setOneofField(this,2,proto.supervisor.EstablishTunnelRequest.oneofGroups_[0],e)},proto.supervisor.EstablishTunnelRequest.prototype.clearData=function(){return n.Message.setOneofField(this,2,proto.supervisor.EstablishTunnelRequest.oneofGroups_[0],void 0)},proto.supervisor.EstablishTunnelRequest.prototype.hasData=function(){return null!=n.Message.getField(this,2)},n.Message.GENERATE_TO_OBJECT&&(proto.supervisor.EstablishTunnelResponse.prototype.toObject=function(e){return proto.supervisor.EstablishTunnelResponse.toObject(e,this)},proto.supervisor.EstablishTunnelResponse.toObject=function(e,t){var r={data:t.getData_asB64()};return e&&(r.$jspbMessageInstance=t),r}),proto.supervisor.EstablishTunnelResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.supervisor.EstablishTunnelResponse;return proto.supervisor.EstablishTunnelResponse.deserializeBinaryFromReader(r,t)},proto.supervisor.EstablishTunnelResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=t.readBytes();e.setData(r)}else t.skipField();return e},proto.supervisor.EstablishTunnelResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.supervisor.EstablishTunnelResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.supervisor.EstablishTunnelResponse.serializeBinaryToWriter=function(e,t){var r;(r=e.getData_asU8()).length>0&&t.writeBytes(1,r)},proto.supervisor.EstablishTunnelResponse.prototype.getData=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.supervisor.EstablishTunnelResponse.prototype.getData_asB64=function(){return n.Message.bytesAsB64(this.getData())},proto.supervisor.EstablishTunnelResponse.prototype.getData_asU8=function(){return n.Message.bytesAsU8(this.getData())},proto.supervisor.EstablishTunnelResponse.prototype.setData=function(e){return n.Message.setProto3BytesField(this,1,e)},n.Message.GENERATE_TO_OBJECT&&(proto.supervisor.AutoTunnelRequest.prototype.toObject=function(e){return proto.supervisor.AutoTunnelRequest.toObject(e,this)},proto.supervisor.AutoTunnelRequest.toObject=function(e,t){var r={enabled:n.Message.getBooleanFieldWithDefault(t,1,!1)};return e&&(r.$jspbMessageInstance=t),r}),proto.supervisor.AutoTunnelRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.supervisor.AutoTunnelRequest;return proto.supervisor.AutoTunnelRequest.deserializeBinaryFromReader(r,t)},proto.supervisor.AutoTunnelRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=t.readBool();e.setEnabled(r)}else t.skipField();return e},proto.supervisor.AutoTunnelRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.supervisor.AutoTunnelRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.supervisor.AutoTunnelRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getEnabled())&&t.writeBool(1,r)},proto.supervisor.AutoTunnelRequest.prototype.getEnabled=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)},proto.supervisor.AutoTunnelRequest.prototype.setEnabled=function(e){return n.Message.setProto3BooleanField(this,1,e)},n.Message.GENERATE_TO_OBJECT&&(proto.supervisor.AutoTunnelResponse.prototype.toObject=function(e){return proto.supervisor.AutoTunnelResponse.toObject(e,this)},proto.supervisor.AutoTunnelResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),proto.supervisor.AutoTunnelResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.supervisor.AutoTunnelResponse;return proto.supervisor.AutoTunnelResponse.deserializeBinaryFromReader(r,t)},proto.supervisor.AutoTunnelResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},proto.supervisor.AutoTunnelResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.supervisor.AutoTunnelResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.supervisor.AutoTunnelResponse.serializeBinaryToWriter=function(e,t){},n.Message.GENERATE_TO_OBJECT&&(proto.supervisor.RetryAutoExposeRequest.prototype.toObject=function(e){return proto.supervisor.RetryAutoExposeRequest.toObject(e,this)},proto.supervisor.RetryAutoExposeRequest.toObject=function(e,t){var r={port:n.Message.getFieldWithDefault(t,1,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.supervisor.RetryAutoExposeRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.supervisor.RetryAutoExposeRequest;return proto.supervisor.RetryAutoExposeRequest.deserializeBinaryFromReader(r,t)},proto.supervisor.RetryAutoExposeRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)if(1===t.getFieldNumber()){var r=t.readUint32();e.setPort(r)}else t.skipField();return e},proto.supervisor.RetryAutoExposeRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.supervisor.RetryAutoExposeRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.supervisor.RetryAutoExposeRequest.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getPort())&&t.writeUint32(1,r)},proto.supervisor.RetryAutoExposeRequest.prototype.getPort=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.supervisor.RetryAutoExposeRequest.prototype.setPort=function(e){return n.Message.setProto3IntField(this,1,e)},n.Message.GENERATE_TO_OBJECT&&(proto.supervisor.RetryAutoExposeResponse.prototype.toObject=function(e){return proto.supervisor.RetryAutoExposeResponse.toObject(e,this)},proto.supervisor.RetryAutoExposeResponse.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),proto.supervisor.RetryAutoExposeResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.supervisor.RetryAutoExposeResponse;return proto.supervisor.RetryAutoExposeResponse.deserializeBinaryFromReader(r,t)},proto.supervisor.RetryAutoExposeResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();)t.getFieldNumber(),t.skipField();return e},proto.supervisor.RetryAutoExposeResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.supervisor.RetryAutoExposeResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.supervisor.RetryAutoExposeResponse.serializeBinaryToWriter=function(e,t){},proto.supervisor.TunnelVisiblity={NONE:0,HOST:1,NETWORK:2},o.object.extend(t,proto.supervisor)},89976:(e,t)=>{var r,n;!function(e,t){for(var r in t)e[r]=t[r];t.__esModule&&Object.defineProperty(e,"__esModule",{value:!0})}(t,(r={418:function(e,t){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),o=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={splitValues:!1});var r,o=this;this.headersMap={},e&&("undefined"!=typeof Headers&&e instanceof Headers?n.getHeaderKeys(e).forEach((function(r){n.getHeaderValues(e,r).forEach((function(e){t.splitValues?o.append(r,n.splitHeaderValue(e)):o.append(r,e)}))})):"object"==typeof(r=e)&&"object"==typeof r.headersMap&&"function"==typeof r.forEach?e.forEach((function(e,t){o.append(e,t)})):"undefined"!=typeof Map&&e instanceof Map?e.forEach((function(e,t){o.append(t,e)})):"string"==typeof e?this.appendFromString(e):"object"==typeof e&&Object.getOwnPropertyNames(e).forEach((function(t){var r=e[t];Array.isArray(r)?r.forEach((function(e){o.append(t,e)})):o.append(t,r)})))}return e.prototype.appendFromString=function(e){for(var t=e.split("\r\n"),r=0;r<t.length;r++){var n=t[r],o=n.indexOf(":");if(o>0){var s=n.substring(0,o).trim(),i=n.substring(o+1).trim();this.append(s,i)}}},e.prototype.delete=function(e,t){var r=n.normalizeName(e);if(void 0===t)delete this.headersMap[r];else{var o=this.headersMap[r];if(o){var s=o.indexOf(t);s>=0&&o.splice(s,1),0===o.length&&delete this.headersMap[r]}}},e.prototype.append=function(e,t){var r=this,o=n.normalizeName(e);Array.isArray(this.headersMap[o])||(this.headersMap[o]=[]),Array.isArray(t)?t.forEach((function(e){r.headersMap[o].push(n.normalizeValue(e))})):this.headersMap[o].push(n.normalizeValue(t))},e.prototype.set=function(e,t){var r=n.normalizeName(e);if(Array.isArray(t)){var o=[];t.forEach((function(e){o.push(n.normalizeValue(e))})),this.headersMap[r]=o}else this.headersMap[r]=[n.normalizeValue(t)]},e.prototype.has=function(e,t){var r=this.headersMap[n.normalizeName(e)];if(!Array.isArray(r))return!1;if(void 0!==t){var o=n.normalizeValue(t);return r.indexOf(o)>=0}return!0},e.prototype.get=function(e){var t=this.headersMap[n.normalizeName(e)];return void 0!==t?t.concat():[]},e.prototype.forEach=function(e){var t=this;Object.getOwnPropertyNames(this.headersMap).forEach((function(r){e(r,t.headersMap[r])}),this)},e.prototype.toHeaders=function(){if("undefined"!=typeof Headers){var e=new Headers;return this.forEach((function(t,r){r.forEach((function(r){e.append(t,r)}))})),e}throw new Error("Headers class is not defined")},e}();t.BrowserHeaders=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.BrowserHeaders=n.BrowserHeaders},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iterateHeaders=function(e,t){for(var r=e[Symbol.iterator](),n=r.next();!n.done;)t(n.value[0]),n=r.next()},t.iterateHeadersKeys=function(e,t){for(var r=e.keys(),n=r.next();!n.done;)t(n.value),n=r.next()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.normalizeName=function(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()},t.normalizeValue=function(e){return"string"!=typeof e&&(e=String(e)),e},t.getHeaderValues=function(e,t){var r=e;if(r instanceof Headers&&r.getAll)return r.getAll(t);var n=r.get(t);return n&&"string"==typeof n?[n]:n},t.getHeaderKeys=function(e){var t=e,r={},o=[];return t.keys?n.iterateHeadersKeys(t,(function(e){r[e]||(r[e]=!0,o.push(e))})):t.forEach?t.forEach((function(e,t){r[t]||(r[t]=!0,o.push(t))})):n.iterateHeaders(t,(function(e){var t=e[0];r[t]||(r[t]=!0,o.push(t))})),o},t.splitHeaderValue=function(e){var t=[];return e.split(", ").forEach((function(e){e.split(",").forEach((function(e){t.push(e)}))})),t}}]))},617:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChunkParser=t.ChunkType=t.encodeASCII=t.decodeASCII=void 0;var n,o=r(65);function s(e){return 9===(t=e)||10===t||13===t||e>=32&&e<=126;var t}function i(e){for(var t=0;t!==e.length;++t)if(!s(e[t]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(e))}function a(e){return 128==(128&e.getUint8(0))}function c(e){return e.getUint32(1,!1)}function l(e,t,r){return e.byteLength-t>=r}function u(e,t,r){if(e.slice)return e.slice(t,r);var n=e.length;void 0!==r&&(n=r);for(var o=new Uint8Array(n-t),s=0,i=t;i<n;i++)o[s++]=e[i];return o}t.decodeASCII=i,t.encodeASCII=function(e){for(var t=new Uint8Array(e.length),r=0;r!==e.length;++r){var n=e.charCodeAt(r);if(!s(n))throw new Error("Metadata contains invalid ASCII");t[r]=n}return t},function(e){e[e.MESSAGE=1]="MESSAGE",e[e.TRAILERS=2]="TRAILERS"}(n=t.ChunkType||(t.ChunkType={}));var d=function(){function e(){this.buffer=null,this.position=0}return e.prototype.parse=function(e,t){if(0===e.length&&t)return[];var r,s=[];if(null==this.buffer)this.buffer=e,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=e,this.position=0;else{var d=this.buffer.byteLength-this.position,h=new Uint8Array(d+e.byteLength),p=u(this.buffer,this.position);h.set(p,0);var f=new Uint8Array(e);h.set(f,d),this.buffer=h,this.position=0}for(;;){if(!l(this.buffer,this.position,5))return s;var g=u(this.buffer,this.position,this.position+5),m=new DataView(g.buffer,g.byteOffset,g.byteLength),y=c(m);if(!l(this.buffer,this.position,5+y))return s;var v=u(this.buffer,this.position+5,this.position+5+y);if(this.position+=5+y,a(m))return s.push({chunkType:n.TRAILERS,trailers:(r=v,new o.Metadata(i(r)))}),s;s.push({chunkType:n.MESSAGE,data:v})}},e}();t.ChunkParser=d},8:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.httpStatusToCode=t.Code=void 0,function(e){e[e.OK=0]="OK",e[e.Canceled=1]="Canceled",e[e.Unknown=2]="Unknown",e[e.InvalidArgument=3]="InvalidArgument",e[e.DeadlineExceeded=4]="DeadlineExceeded",e[e.NotFound=5]="NotFound",e[e.AlreadyExists=6]="AlreadyExists",e[e.PermissionDenied=7]="PermissionDenied",e[e.ResourceExhausted=8]="ResourceExhausted",e[e.FailedPrecondition=9]="FailedPrecondition",e[e.Aborted=10]="Aborted",e[e.OutOfRange=11]="OutOfRange",e[e.Unimplemented=12]="Unimplemented",e[e.Internal=13]="Internal",e[e.Unavailable=14]="Unavailable",e[e.DataLoss=15]="DataLoss",e[e.Unauthenticated=16]="Unauthenticated"}(r=t.Code||(t.Code={})),t.httpStatusToCode=function(e){switch(e){case 0:return r.Internal;case 200:return r.OK;case 400:return r.InvalidArgument;case 401:return r.Unauthenticated;case 403:return r.PermissionDenied;case 404:return r.NotFound;case 409:return r.Aborted;case 412:return r.FailedPrecondition;case 429:return r.ResourceExhausted;case 499:return r.Canceled;case 500:default:return r.Unknown;case 501:return r.Unimplemented;case 503:return r.Unavailable;case 504:return r.DeadlineExceeded}}},934:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.client=void 0;var n=r(65),o=r(617),s=r(8),i=r(346),a=r(57),c=r(882);t.client=function(e,t){return new l(e,t)};var l=function(){function e(e,t){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new o.ChunkParser,this.methodDefinition=e,this.props=t,this.createTransport()}return e.prototype.createTransport=function(){var e=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,t={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:e,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(t):this.transport=a.makeDefaultTransport(t)},e.prototype.onTransportHeaders=function(e,t){if(this.props.debug&&i.debug("onHeaders",e,t),this.closed)this.props.debug&&i.debug("grpc.onHeaders received after request was closed - ignoring");else if(0===t);else{this.responseHeaders=e,this.props.debug&&i.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var r=u(e);this.props.debug&&i.debug("onHeaders.gRPCStatus",r);var n=r&&r>=0?r:s.httpStatusToCode(t);this.props.debug&&i.debug("onHeaders.code",n);var o=e.get("grpc-message")||[];if(this.props.debug&&i.debug("onHeaders.gRPCMessage",o),this.rawOnHeaders(e),n!==s.Code.OK){var a=this.decodeGRPCStatus(o[0]);this.rawOnError(n,a,e)}}},e.prototype.onTransportChunk=function(e){var t=this;if(this.closed)this.props.debug&&i.debug("grpc.onChunk received after request was closed - ignoring");else{var r=[];try{r=this.parser.parse(e)}catch(e){return this.props.debug&&i.debug("onChunk.parsing error",e,e.message),void this.rawOnError(s.Code.Internal,"parsing error: "+e.message)}r.forEach((function(e){if(e.chunkType===o.ChunkType.MESSAGE){var r=t.methodDefinition.responseType.deserializeBinary(e.data);t.rawOnMessage(r)}else e.chunkType===o.ChunkType.TRAILERS&&(t.responseHeaders?(t.responseTrailers=new n.Metadata(e.trailers),t.props.debug&&i.debug("onChunk.trailers",t.responseTrailers)):(t.responseHeaders=new n.Metadata(e.trailers),t.rawOnHeaders(t.responseHeaders)))}))}},e.prototype.onTransportEnd=function(){if(this.props.debug&&i.debug("grpc.onEnd"),this.closed)this.props.debug&&i.debug("grpc.onEnd received after request was closed - ignoring");else if(void 0!==this.responseTrailers){var e=u(this.responseTrailers);if(null!==e){var t=this.responseTrailers.get("grpc-message"),r=this.decodeGRPCStatus(t[0]);this.rawOnEnd(e,r,this.responseTrailers)}else this.rawOnError(s.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(void 0===this.responseHeaders)return void this.rawOnError(s.Code.Unknown,"Response closed without headers");var n=u(this.responseHeaders),o=this.responseHeaders.get("grpc-message");if(this.props.debug&&i.debug("grpc.headers only response ",n,o),null===n)return void this.rawOnEnd(s.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var a=this.decodeGRPCStatus(o[0]);this.rawOnEnd(n,a,this.responseHeaders)}},e.prototype.decodeGRPCStatus=function(e){if(!e)return"";try{return decodeURIComponent(e)}catch(t){return e}},e.prototype.rawOnEnd=function(e,t,r){var n=this;this.props.debug&&i.debug("rawOnEnd",e,t,r),this.completed||(this.completed=!0,this.onEndCallbacks.forEach((function(o){if(!n.closed)try{o(e,t,r)}catch(e){setTimeout((function(){throw e}),0)}})))},e.prototype.rawOnHeaders=function(e){this.props.debug&&i.debug("rawOnHeaders",e),this.completed||this.onHeadersCallbacks.forEach((function(t){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))},e.prototype.rawOnError=function(e,t,r){var o=this;void 0===r&&(r=new n.Metadata),this.props.debug&&i.debug("rawOnError",e,t),this.completed||(this.completed=!0,this.onEndCallbacks.forEach((function(n){if(!o.closed)try{n(e,t,r)}catch(e){setTimeout((function(){throw e}),0)}})))},e.prototype.rawOnMessage=function(e){var t=this;this.props.debug&&i.debug("rawOnMessage",e.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach((function(r){if(!t.closed)try{r(e)}catch(e){setTimeout((function(){throw e}),0)}}))},e.prototype.onHeaders=function(e){this.onHeadersCallbacks.push(e)},e.prototype.onMessage=function(e){this.onMessageCallbacks.push(e)},e.prototype.onEnd=function(e){this.onEndCallbacks.push(e)},e.prototype.start=function(e){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var t=new n.Metadata(e||{});t.set("content-type","application/grpc-web+proto"),t.set("x-grpc-web","1"),this.transport.start(t)},e.prototype.send=function(e){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var t=c.frameRequest(e);this.transport.sendMessage(t)},e.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},e.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&i.debug("request.abort aborting request"),this.transport.cancel()},e}();function u(e){var t=e.get("grpc-status")||[];if(t.length>0)try{var r=t[0];return parseInt(r,10)}catch(e){return null}return null}},346:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debug=void 0,t.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug?console.debug.apply(null,e):console.log.apply(null,e)}},607:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.grpc=void 0;var n,o=r(418),s=r(57),i=r(229),a=r(540),c=r(210),l=r(859),u=r(8),d=r(938),h=r(35),p=r(934);(n=t.grpc||(t.grpc={})).setDefaultTransport=s.setDefaultTransportFactory,n.CrossBrowserHttpTransport=l.CrossBrowserHttpTransport,n.FetchReadableStreamTransport=i.FetchReadableStreamTransport,n.XhrTransport=c.XhrTransport,n.WebsocketTransport=a.WebsocketTransport,n.Code=u.Code,n.Metadata=o.BrowserHeaders,n.client=function(e,t){return p.client(e,t)},n.invoke=d.invoke,n.unary=h.unary},938:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invoke=void 0;var n=r(934);t.invoke=function(e,t){if(e.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var r=n.client(e,{host:t.host,transport:t.transport,debug:t.debug});return t.onHeaders&&r.onHeaders(t.onHeaders),t.onMessage&&r.onMessage(t.onMessage),t.onEnd&&r.onEnd(t.onEnd),r.start(t.metadata),r.send(t.request),r.finishSend(),{close:function(){r.close()}}}},65:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=r(418);Object.defineProperty(t,"Metadata",{enumerable:!0,get:function(){return n.BrowserHeaders}})},57:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDefaultTransport=t.setDefaultTransportFactory=void 0;var n=r(859),o=function(e){return n.CrossBrowserHttpTransport({withCredentials:!1})(e)};t.setDefaultTransportFactory=function(e){o=e},t.makeDefaultTransport=function(e){return o(e)}},229:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.detectFetchSupport=t.FetchReadableStreamTransport=void 0;var o=r(65),s=r(346);t.FetchReadableStreamTransport=function(e){return function(t){return function(e,t){return e.debug&&s.debug("fetchRequest",e),new i(e,t)}(t,e)}};var i=function(){function e(e,t){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=e,this.init=t}return e.prototype.pump=function(e,t){var r=this;if(this.reader=e,this.cancelled)return this.options.debug&&s.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch((function(e){r.options.debug&&s.debug("Fetch.pump.reader.cancel exception",e)}));this.reader.read().then((function(e){if(e.done)return r.options.onEnd(),t;r.options.onChunk(e.value),r.pump(r.reader,t)})).catch((function(e){r.cancelled?r.options.debug&&s.debug("Fetch.catch - request cancelled"):(r.cancelled=!0,r.options.debug&&s.debug("Fetch.catch",e.message),r.options.onEnd(e))}))},e.prototype.send=function(e){var t=this;fetch(this.options.url,n(n({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:e,signal:this.controller&&this.controller.signal})).then((function(e){if(t.options.debug&&s.debug("Fetch.response",e),t.options.onHeaders(new o.Metadata(e.headers),e.status),!e.body)return e;t.pump(e.body.getReader(),e)})).catch((function(e){t.cancelled?t.options.debug&&s.debug("Fetch.catch - request cancelled"):(t.cancelled=!0,t.options.debug&&s.debug("Fetch.catch",e.message),t.options.onEnd(e))}))},e.prototype.sendMessage=function(e){this.send(e)},e.prototype.finishSend=function(){},e.prototype.start=function(e){this.metadata=e},e.prototype.cancel=function(){var e=this;this.cancelled?this.options.debug&&s.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&s.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&s.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&s.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch((function(t){e.options.debug&&s.debug("Fetch.cancel.reader.cancel exception",t)}))):this.options.debug&&s.debug("Fetch.cancel before reader"))},e}();t.detectFetchSupport=function(){return"undefined"!=typeof Response&&Response.prototype.hasOwnProperty("body")&&"function"==typeof Headers}},859:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CrossBrowserHttpTransport=void 0;var n=r(229),o=r(210);t.CrossBrowserHttpTransport=function(e){if(n.detectFetchSupport()){var t={credentials:e.withCredentials?"include":"same-origin"};return n.FetchReadableStreamTransport(t)}return o.XhrTransport({withCredentials:e.withCredentials})}},210:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.stringToArrayBuffer=t.MozChunkedArrayBufferXHR=t.XHR=t.XhrTransport=void 0;var s=r(65),i=r(346),a=r(849);t.XhrTransport=function(e){return function(t){if(a.detectMozXHRSupport())return new l(t,e);if(a.detectXHROverrideMimeTypeSupport())return new c(t,e);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var c=function(){function e(e,t){this.options=e,this.init=t}return e.prototype.onProgressEvent=function(){this.options.debug&&i.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var e=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var t=d(e);this.options.onChunk(t)},e.prototype.onLoadEvent=function(){this.options.debug&&i.debug("XHR.onLoadEvent"),this.options.onEnd()},e.prototype.onStateChange=function(){this.options.debug&&i.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new s.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},e.prototype.sendMessage=function(e){this.xhr.send(e)},e.prototype.finishSend=function(){},e.prototype.start=function(e){var t=this;this.metadata=e;var r=new XMLHttpRequest;this.xhr=r,r.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach((function(e,t){r.setRequestHeader(e,t.join(", "))})),r.withCredentials=Boolean(this.init.withCredentials),r.addEventListener("readystatechange",this.onStateChange.bind(this)),r.addEventListener("progress",this.onProgressEvent.bind(this)),r.addEventListener("loadend",this.onLoadEvent.bind(this)),r.addEventListener("error",(function(e){t.options.debug&&i.debug("XHR.error",e),t.options.onEnd(e.error)}))},e.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},e.prototype.cancel=function(){this.options.debug&&i.debug("XHR.abort"),this.xhr.abort()},e}();t.XHR=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.configureXhr=function(){this.options.debug&&i.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},t.prototype.onProgressEvent=function(){var e=this.xhr.response;this.options.debug&&i.debug("MozXHR.onProgressEvent: ",new Uint8Array(e)),this.options.onChunk(new Uint8Array(e))},t}(c);function u(e,t){var r=e.charCodeAt(t);if(r>=55296&&r<=56319){var n=e.charCodeAt(t+1);n>=56320&&n<=57343&&(r=65536+(r-55296<<10)+(n-56320))}return r}function d(e){for(var t=new Uint8Array(e.length),r=0,n=0;n<e.length;n++){var o=String.prototype.codePointAt?e.codePointAt(n):u(e,n);t[r++]=255&o}return t}t.MozChunkedArrayBufferXHR=l,t.stringToArrayBuffer=d},849:function(e,t){"use strict";var r;function n(e){var t=function(){if(void 0!==r)return r;if(XMLHttpRequest){r=new XMLHttpRequest;try{r.open("GET","https://localhost")}catch(e){}}return r}();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.detectXHROverrideMimeTypeSupport=t.detectMozXHRSupport=t.xhrSupportsResponseType=void 0,t.xhrSupportsResponseType=n,t.detectMozXHRSupport=function(){return"undefined"!=typeof XMLHttpRequest&&n("moz-chunked-arraybuffer")},t.detectXHROverrideMimeTypeSupport=function(){return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketTransport=void 0;var n,o=r(346),s=r(617);!function(e){e[e.FINISH_SEND=1]="FINISH_SEND"}(n||(n={}));var i=new Uint8Array([1]);t.WebsocketTransport=function(){return function(e){return function(e){e.debug&&o.debug("websocketRequest",e);var t,r=function(e){if("https://"===e.substr(0,8))return"wss://"+e.substr(8);if("http://"===e.substr(0,7))return"ws://"+e.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(e.url),a=[];function c(e){if(e===n.FINISH_SEND)t.send(i);else{var r=e,o=new Int8Array(r.byteLength+1);o.set(new Uint8Array([0])),o.set(r,1),t.send(o)}}return{sendMessage:function(e){t&&t.readyState!==t.CONNECTING?c(e):a.push(e)},finishSend:function(){t&&t.readyState!==t.CONNECTING?c(n.FINISH_SEND):a.push(n.FINISH_SEND)},start:function(n){(t=new WebSocket(r,["grpc-websockets"])).binaryType="arraybuffer",t.onopen=function(){var r;e.debug&&o.debug("websocketRequest.onopen"),t.send((r="",n.forEach((function(e,t){r+=e+": "+t.join(", ")+"\r\n"})),s.encodeASCII(r))),a.forEach((function(e){c(e)}))},t.onclose=function(t){e.debug&&o.debug("websocketRequest.onclose",t),e.onEnd()},t.onerror=function(t){e.debug&&o.debug("websocketRequest.onerror",t)},t.onmessage=function(t){e.onChunk(new Uint8Array(t.data))}},cancel:function(){e.debug&&o.debug("websocket.abort"),t.close()}}}(e)}}},35:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unary=void 0;var n=r(65),o=r(934);t.unary=function(e,t){if(e.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(e.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var r=null,s=null,i=o.client(e,{host:t.host,transport:t.transport,debug:t.debug});return i.onHeaders((function(e){r=e})),i.onMessage((function(e){s=e})),i.onEnd((function(e,o,i){t.onEnd({status:e,statusMessage:o,headers:r||new n.Metadata,message:s,trailers:i})})),i.start(t.metadata),i.send(t.request),i.finishSend(),{close:function(){i.close()}}}},882:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.frameRequest=void 0,t.frameRequest=function(e){var t=e.serializeBinary(),r=new ArrayBuffer(t.byteLength+5);return new DataView(r,1,4).setUint32(0,t.length,!1),new Uint8Array(r,5).set(t),new Uint8Array(r)}}},n={},function e(t){if(n[t])return n[t].exports;var o=n[t]={exports:{}};return r[t].call(o.exports,o,o.exports,e),o.exports}(607)))},71265:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addAdminServicesToServer=t.registerAdminService=void 0;const r=[];t.registerAdminService=function(e,t){r.push({getServiceDefinition:e,getHandlers:t})},t.addAdminServicesToServer=function(e){for(const{getServiceDefinition:t,getHandlers:n}of r)e.addService(t(),n())}},43510:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackoffTimeout=void 0,t.BackoffTimeout=class{constructor(e,t){this.callback=e,this.initialDelay=1e3,this.multiplier=1.6,this.maxDelay=12e4,this.jitter=.2,this.running=!1,this.hasRef=!0,this.startTime=new Date,t&&(t.initialDelay&&(this.initialDelay=t.initialDelay),t.multiplier&&(this.multiplier=t.multiplier),t.jitter&&(this.jitter=t.jitter),t.maxDelay&&(this.maxDelay=t.maxDelay)),this.nextDelay=this.initialDelay,this.timerId=setTimeout((()=>{}),0),clearTimeout(this.timerId)}runTimer(e){var t,r;clearTimeout(this.timerId),this.timerId=setTimeout((()=>{this.callback(),this.running=!1}),e),this.hasRef||null===(r=(t=this.timerId).unref)||void 0===r||r.call(t)}runOnce(){this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);const e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),t=e*this.jitter;var r,n;this.nextDelay=e+(r=-t,n=t,Math.random()*(n-r)+r)}stop(){clearTimeout(this.timerId),this.running=!1}reset(){if(this.nextDelay=this.initialDelay,this.running){const e=new Date,t=this.startTime;t.setMilliseconds(t.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<t?this.runTimer(t.getTime()-e.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var e,t;this.hasRef=!0,null===(t=(e=this.timerId).ref)||void 0===t||t.call(e)}unref(){var e,t;this.hasRef=!1,null===(t=(e=this.timerId).unref)||void 0===t||t.call(e)}}},69587:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallCredentials=void 0;const n=r(14664);class o{static createFromMetadataGenerator(e){return new i(e)}static createFromGoogleCredential(e){return o.createFromMetadataGenerator(((t,r)=>{let o;var s;o="getRequestHeaders"in(s=e)&&"function"==typeof s.getRequestHeaders?e.getRequestHeaders(t.service_url):new Promise(((r,n)=>{e.getRequestMetadata(t.service_url,((e,t)=>{e?n(e):t?r(t):n(new Error("Headers not set by metadata plugin"))}))})),o.then((e=>{const t=new n.Metadata;for(const r of Object.keys(e))t.add(r,e[r]);r(null,t)}),(e=>{r(e)}))}))}static createEmpty(){return new a}}t.CallCredentials=o;class s extends o{constructor(e){super(),this.creds=e}async generateMetadata(e){const t=new n.Metadata,r=await Promise.all(this.creds.map((t=>t.generateMetadata(e))));for(const e of r)t.merge(e);return t}compose(e){return new s(this.creds.concat([e]))}_equals(e){return this===e||e instanceof s&&this.creds.every(((t,r)=>t._equals(e.creds[r])))}}class i extends o{constructor(e){super(),this.metadataGenerator=e}generateMetadata(e){return new Promise(((t,r)=>{this.metadataGenerator(e,((e,n)=>{void 0!==n?t(n):r(e)}))}))}compose(e){return new s([this,e])}_equals(e){return this===e||e instanceof i&&this.metadataGenerator===e.metadataGenerator}}class a extends o{generateMetadata(e){return Promise.resolve(new n.Metadata)}compose(e){return e}_equals(e){return e instanceof a}}},68183:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterceptingListenerImpl=t.isInterceptingListener=void 0,t.isInterceptingListener=function(e){return void 0!==e.onReceiveMetadata&&1===e.onReceiveMetadata.length},t.InterceptingListenerImpl=class{constructor(e,t){this.listener=e,this.nextListener=t,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(e){this.processingMetadata=!0,this.listener.onReceiveMetadata(e,(e=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(e),this.processPendingMessage(),this.processPendingStatus()}))}onReceiveMessage(e){this.processingMessage=!0,this.listener.onReceiveMessage(e,(e=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=e,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(e),this.processPendingStatus())}))}onReceiveStatus(e){this.listener.onReceiveStatus(e,(e=>{this.processingMetadata||this.processingMessage?this.pendingStatus=e:this.nextListener.onReceiveStatus(e)}))}}},40868:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNextCallNumber=void 0;let r=0;t.getNextCallNumber=function(){return r++}},13509:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientDuplexStreamImpl=t.ClientWritableStreamImpl=t.ClientReadableStreamImpl=t.ClientUnaryCallImpl=t.callErrorFromStatus=void 0;const n=r(82361),o=r(12781),s=r(53189);t.callErrorFromStatus=function(e,t){const r=`${e.code} ${s.Status[e.code]}: ${e.details}`,n=`${new Error(r).stack}\nfor call at\n${t}`;return Object.assign(new Error(r),e,{stack:n})};class i extends n.EventEmitter{constructor(){super()}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}}t.ClientUnaryCallImpl=i;class a extends o.Readable{constructor(e){super({objectMode:!0}),this.deserialize=e}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}_read(e){var t;null===(t=this.call)||void 0===t||t.startRead()}}t.ClientReadableStreamImpl=a;class c extends o.Writable{constructor(e){super({objectMode:!0}),this.serialize=e}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}_write(e,t,r){var n;const o={callback:r},s=Number(t);Number.isNaN(s)||(o.flags=s),null===(n=this.call)||void 0===n||n.sendMessageWithContext(o,e)}_final(e){var t;null===(t=this.call)||void 0===t||t.halfClose(),e()}}t.ClientWritableStreamImpl=c;class l extends o.Duplex{constructor(e,t){super({objectMode:!0}),this.serialize=e,this.deserialize=t}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}_read(e){var t;null===(t=this.call)||void 0===t||t.startRead()}_write(e,t,r){var n;const o={callback:r},s=Number(t);Number.isNaN(s)||(o.flags=s),null===(n=this.call)||void 0===n||n.sendMessageWithContext(o,e)}_final(e){var t;null===(t=this.call)||void 0===t||t.halfClose(),e()}}t.ClientDuplexStreamImpl=l},49357:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelCredentials=void 0;const n=r(24404),o=r(69587),s=r(98283);function i(e,t){if(e&&!(e instanceof Buffer))throw new TypeError(`${t}, if provided, must be a Buffer.`)}class a{constructor(e){this.callCredentials=e||o.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl(e,t,r,o){var a;if(i(e,"Root certificate"),i(t,"Private key"),i(r,"Certificate chain"),t&&!r)throw new Error("Private key must be given with accompanying certificate chain");if(!t&&r)throw new Error("Certificate chain must be given with accompanying private key");const c=(0,n.createSecureContext)({ca:null!==(a=null!=e?e:(0,s.getDefaultRootsData)())&&void 0!==a?a:void 0,key:null!=t?t:void 0,cert:null!=r?r:void 0,ciphers:s.CIPHER_SUITES});return new l(c,null!=o?o:{})}static createFromSecureContext(e,t){return new l(e,null!=t?t:{})}static createInsecure(){return new c}}t.ChannelCredentials=a;class c extends a{constructor(e){super(e)}compose(e){throw new Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return!1}_equals(e){return e instanceof c}}class l extends a{constructor(e,t){super(),this.secureContext=e,this.verifyOptions=t,this.connectionOptions={secureContext:e},(null==t?void 0:t.checkServerIdentity)&&(this.connectionOptions.checkServerIdentity=t.checkServerIdentity)}compose(e){const t=this.callCredentials.compose(e);return new u(this,t)}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return!0}_equals(e){return this===e||e instanceof l&&this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity}}class u extends a{constructor(e,t){super(t),this.channelCredentials=e}compose(e){const t=this.callCredentials.compose(e);return new u(this.channelCredentials,t)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return!0}_equals(e){return this===e||e instanceof u&&this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials)}}},38938:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.channelOptionsEqual=t.recognizedOptions=void 0,t.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0},t.channelOptionsEqual=function(e,t){const r=Object.keys(e).sort(),n=Object.keys(t).sort();if(r.length!==n.length)return!1;for(let o=0;o<r.length;o+=1){if(r[o]!==n[o])return!1;if(e[r[o]]!==t[n[o]])return!1}return!0}},72253:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelImplementation=void 0;const n=r(49357),o=r(92805);t.ChannelImplementation=class{constructor(e,t,r){if("string"!=typeof e)throw new TypeError("Channel target must be a string");if(!(t instanceof n.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(r&&"object"!=typeof r)throw new TypeError("Channel options must be an object");this.internalChannel=new o.InternalChannel(e,t,r)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,t,r){this.internalChannel.watchConnectivityState(e,t,r)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,t,r,n,o){if("string"!=typeof e)throw new TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(e,t,r,n,o)}}},8950:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.getChannelzServiceDefinition=t.getChannelzHandlers=t.unregisterChannelzRef=t.registerChannelzSocket=t.registerChannelzServer=t.registerChannelzSubchannel=t.registerChannelzChannel=t.ChannelzCallTracker=t.ChannelzChildrenTracker=t.ChannelzTrace=void 0;const n=r(41808),o=r(40207),s=r(53189),i=r(48741),a=r(71265),c=r(72011);function l(e){return{channel_id:e.id,name:e.name}}function u(e){return{subchannel_id:e.id,name:e.name}}function d(e){return{socket_id:e.id,name:e.name}}t.ChannelzTrace=class{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(e,t,r){const n=new Date;this.events.push({description:t,severity:e,timestamp:n,childChannel:"channel"===(null==r?void 0:r.kind)?r:void 0,childSubchannel:"subchannel"===(null==r?void 0:r.kind)?r:void 0}),this.events.length>=64&&(this.events=this.events.slice(32)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:S(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map((e=>({description:e.description,severity:e.severity,timestamp:S(e.timestamp),channel_ref:e.childChannel?l(e.childChannel):null,subchannel_ref:e.childSubchannel?u(e.childSubchannel):null})))}}},t.ChannelzChildrenTracker=class{constructor(){this.channelChildren=new Map,this.subchannelChildren=new Map,this.socketChildren=new Map}refChild(e){var t,r,n;switch(e.kind){case"channel":{let r=null!==(t=this.channelChildren.get(e.id))&&void 0!==t?t:{ref:e,count:0};r.count+=1,this.channelChildren.set(e.id,r);break}case"subchannel":{let t=null!==(r=this.subchannelChildren.get(e.id))&&void 0!==r?r:{ref:e,count:0};t.count+=1,this.subchannelChildren.set(e.id,t);break}case"socket":{let t=null!==(n=this.socketChildren.get(e.id))&&void 0!==n?n:{ref:e,count:0};t.count+=1,this.socketChildren.set(e.id,t);break}}}unrefChild(e){switch(e.kind){case"channel":{let t=this.channelChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.channelChildren.delete(e.id):this.channelChildren.set(e.id,t));break}case"subchannel":{let t=this.subchannelChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.subchannelChildren.delete(e.id):this.subchannelChildren.set(e.id,t));break}case"socket":{let t=this.socketChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.socketChildren.delete(e.id):this.socketChildren.set(e.id,t));break}}}getChildLists(){const e=[];for(const{ref:t}of this.channelChildren.values())e.push(t);const t=[];for(const{ref:e}of this.subchannelChildren.values())t.push(e);const r=[];for(const{ref:e}of this.socketChildren.values())r.push(e);return{channels:e,subchannels:t,sockets:r}}},t.ChannelzCallTracker=class{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}};let h=1;function p(){return h++}const f=[],g=[],m=[],y=[];function v(e){if(""===e)return[];const t=e.split(":").map((e=>function(e){const t=Number.parseInt(e,16);return[t/256|0,t%256]}(e)));return[].concat(...t)}function _(e){if((0,n.isIPv4)(e))return Buffer.from(Uint8Array.from(e.split(".").map((e=>Number.parseInt(e)))));if((0,n.isIPv6)(e)){let t,r;const n=e.indexOf("::");-1===n?(t=e,r=""):(t=e.substring(0,n),r=e.substring(n+2));const o=Buffer.from(v(t)),s=Buffer.from(v(r)),i=Buffer.alloc(16-o.length-s.length,0);return Buffer.concat([o,i,s])}return null}function b(e){switch(e){case o.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case o.ConnectivityState.IDLE:return{state:"IDLE"};case o.ConnectivityState.READY:return{state:"READY"};case o.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case o.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function S(e){if(!e)return null;const t=e.getTime();return{seconds:t/1e3|0,nanos:t%1e3*1e6}}function E(e){const t=e.getInfo();return{ref:l(e.ref),data:{target:t.target,state:b(t.state),calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:S(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},channel_ref:t.children.channels.map((e=>l(e))),subchannel_ref:t.children.subchannels.map((e=>u(e)))}}function w(e,t){const r=Number.parseInt(e.request.channel_id),n=f[r];void 0!==n?t(null,{channel:E(n)}):t({code:s.Status.NOT_FOUND,details:"No channel data found for id "+r})}function A(e,t){const r=Number.parseInt(e.request.max_results),n=[];let o=Number.parseInt(e.request.start_channel_id);for(;o<f.length;o++){const e=f[o];if(void 0!==e&&(n.push(E(e)),n.length>=r))break}t(null,{channel:n,end:o>=m.length})}function T(e){const t=e.getInfo();return{ref:(r=e.ref,{server_id:r.id}),data:{calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:S(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},listen_socket:t.listenerChildren.sockets.map((e=>d(e)))};var r}function C(e,t){const r=Number.parseInt(e.request.server_id),n=m[r];void 0!==n?t(null,{server:T(n)}):t({code:s.Status.NOT_FOUND,details:"No server data found for id "+r})}function I(e,t){const r=Number.parseInt(e.request.max_results),n=[];let o=Number.parseInt(e.request.start_server_id);for(;o<m.length;o++){const e=m[o];if(void 0!==e&&(n.push(T(e)),n.length>=r))break}t(null,{server:n,end:o>=m.length})}function R(e,t){const r=Number.parseInt(e.request.subchannel_id),n=g[r];if(void 0===n)return void t({code:s.Status.NOT_FOUND,details:"No subchannel data found for id "+r});const o=n.getInfo();t(null,{subchannel:{ref:u(n.ref),data:{target:o.target,state:b(o.state),calls_started:o.callTracker.callsStarted,calls_succeeded:o.callTracker.callsSucceeded,calls_failed:o.callTracker.callsFailed,last_call_started_timestamp:S(o.callTracker.lastCallStartedTimestamp),trace:o.trace.getTraceMessage()},socket_ref:o.children.sockets.map((e=>d(e)))}})}function O(e){var t;return(0,i.isTcpSubchannelAddress)(e)?{address:"tcpip_address",tcpip_address:{ip_address:null!==(t=_(e.host))&&void 0!==t?t:void 0,port:e.port}}:{address:"uds_address",uds_address:{filename:e.path}}}function k(e,t){var r,n,o,i,a;const c=Number.parseInt(e.request.socket_id),l=y[c];if(void 0===l)return void t({code:s.Status.NOT_FOUND,details:"No socket data found for id "+c});const u=l.getInfo(),h=u.security?{model:"tls",tls:{cipher_suite:u.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:null!==(r=u.security.cipherSuiteStandardName)&&void 0!==r?r:void 0,other_name:null!==(n=u.security.cipherSuiteOtherName)&&void 0!==n?n:void 0,local_certificate:null!==(o=u.security.localCertificate)&&void 0!==o?o:void 0,remote_certificate:null!==(i=u.security.remoteCertificate)&&void 0!==i?i:void 0}}:null;t(null,{socket:{ref:d(l.ref),local:u.localAddress?O(u.localAddress):null,remote:u.remoteAddress?O(u.remoteAddress):null,remote_name:null!==(a=u.remoteName)&&void 0!==a?a:void 0,security:h,data:{keep_alives_sent:u.keepAlivesSent,streams_started:u.streamsStarted,streams_succeeded:u.streamsSucceeded,streams_failed:u.streamsFailed,last_local_stream_created_timestamp:S(u.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:S(u.lastRemoteStreamCreatedTimestamp),messages_received:u.messagesReceived,messages_sent:u.messagesSent,last_message_received_timestamp:S(u.lastMessageReceivedTimestamp),last_message_sent_timestamp:S(u.lastMessageSentTimestamp),local_flow_control_window:u.localFlowControlWindow?{value:u.localFlowControlWindow}:null,remote_flow_control_window:u.remoteFlowControlWindow?{value:u.remoteFlowControlWindow}:null}}})}function N(e,t){const r=Number.parseInt(e.request.server_id),n=m[r];if(void 0===n)return void t({code:s.Status.NOT_FOUND,details:"No server data found for id "+r});const o=Number.parseInt(e.request.start_socket_id),i=Number.parseInt(e.request.max_results),a=n.getInfo().sessionChildren.sockets.sort(((e,t)=>e.id-t.id)),c=[];let l=0;for(;l<a.length&&!(a[l].id>=o&&(c.push(d(a[l])),c.length>=i));l++);t(null,{socket_ref:c,end:l>=a.length})}function P(){return{GetChannel:w,GetTopChannels:A,GetServer:C,GetServers:I,GetSubchannel:R,GetSocket:k,GetServerSockets:N}}t.registerChannelzChannel=function(e,t,r){const n=p(),o={id:n,name:e,kind:"channel"};return r&&(f[n]={ref:o,getInfo:t}),o},t.registerChannelzSubchannel=function(e,t,r){const n=p(),o={id:n,name:e,kind:"subchannel"};return r&&(g[n]={ref:o,getInfo:t}),o},t.registerChannelzServer=function(e,t){const r=p(),n={id:r,kind:"server"};return t&&(m[r]={ref:n,getInfo:e}),n},t.registerChannelzSocket=function(e,t,r){const n=p(),o={id:n,name:e,kind:"socket"};return r&&(y[n]={ref:o,getInfo:t}),o},t.unregisterChannelzRef=function(e){switch(e.kind){case"channel":return void delete f[e.id];case"subchannel":return void delete g[e.id];case"server":return void delete m[e.id];case"socket":return void delete y[e.id]}},t.getChannelzHandlers=P;let M=null;function L(){if(M)return M;const e=(0,r(59421).J_)("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]}),t=(0,c.loadPackageDefinition)(e);return M=t.grpc.channelz.v1.Channelz.service,M}t.getChannelzServiceDefinition=L,t.setup=function(){(0,a.registerAdminService)(L,P)}},3740:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInterceptingCall=t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.InterceptorConfigurationError=void 0;const n=r(14664),o=r(68183),s=r(53189),i=r(15503);class a extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,a)}}t.InterceptorConfigurationError=a,t.ListenerBuilder=class{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}},t.RequesterBuilder=class{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}};const c={onReceiveMetadata:(e,t)=>{t(e)},onReceiveMessage:(e,t)=>{t(e)},onReceiveStatus:(e,t)=>{t(e)}},l={start:(e,t,r)=>{r(e,t)},sendMessage:(e,t)=>{t(e)},halfClose:e=>{e()},cancel:e=>{e()}};t.InterceptingCall=class{constructor(e,t){var r,n,o,s;this.nextCall=e,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,this.requester=t?{start:null!==(r=t.start)&&void 0!==r?r:l.start,sendMessage:null!==(n=t.sendMessage)&&void 0!==n?n:l.sendMessage,halfClose:null!==(o=t.halfClose)&&void 0!==o?o:l.halfClose,cancel:null!==(s=t.cancel)&&void 0!==s?s:l.cancel}:l}cancelWithStatus(e,t){this.requester.cancel((()=>{this.nextCall.cancelWithStatus(e,t)}))}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(e,t){var r,n,s,i,a,l;const u={onReceiveMetadata:null!==(n=null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r?void 0:r.bind(t))&&void 0!==n?n:e=>{},onReceiveMessage:null!==(i=null===(s=null==t?void 0:t.onReceiveMessage)||void 0===s?void 0:s.bind(t))&&void 0!==i?i:e=>{},onReceiveStatus:null!==(l=null===(a=null==t?void 0:t.onReceiveStatus)||void 0===a?void 0:a.bind(t))&&void 0!==l?l:e=>{}};this.processingMetadata=!0,this.requester.start(e,u,((e,t)=>{var r,n,s;let i;if(this.processingMetadata=!1,(0,o.isInterceptingListener)(t))i=t;else{const e={onReceiveMetadata:null!==(r=t.onReceiveMetadata)&&void 0!==r?r:c.onReceiveMetadata,onReceiveMessage:null!==(n=t.onReceiveMessage)&&void 0!==n?n:c.onReceiveMessage,onReceiveStatus:null!==(s=t.onReceiveStatus)&&void 0!==s?s:c.onReceiveStatus};i=new o.InterceptingListenerImpl(e,u)}this.nextCall.start(e,i),this.processPendingMessage(),this.processPendingHalfClose()}))}sendMessageWithContext(e,t){this.processingMessage=!0,this.requester.sendMessage(t,(r=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=t):(this.nextCall.sendMessageWithContext(e,r),this.processPendingHalfClose())}))}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose((()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()}))}};class u{constructor(e,t){this.call=e,this.methodDefinition=t}cancelWithStatus(e,t){this.call.cancelWithStatus(e,t)}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,t){let r;try{r=this.methodDefinition.requestSerialize(t)}catch(e){return void this.call.cancelWithStatus(s.Status.INTERNAL,`Request message serialization failure: ${(0,i.getErrorMessage)(e)}`)}this.call.sendMessageWithContext(e,r)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,t){let r=null;this.call.start(e,{onReceiveMetadata:e=>{var r;null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r||r.call(t,e)},onReceiveMessage:e=>{var o;let a;try{a=this.methodDefinition.responseDeserialize(e)}catch(e){return r={code:s.Status.INTERNAL,details:`Response message parsing error: ${(0,i.getErrorMessage)(e)}`,metadata:new n.Metadata},void this.call.cancelWithStatus(r.code,r.details)}null===(o=null==t?void 0:t.onReceiveMessage)||void 0===o||o.call(t,a)},onReceiveStatus:e=>{var n,o;r?null===(n=null==t?void 0:t.onReceiveStatus)||void 0===n||n.call(t,r):null===(o=null==t?void 0:t.onReceiveStatus)||void 0===o||o.call(t,e)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}}class d extends u{constructor(e,t){super(e,t)}start(e,t){var r,n;let o=!1;const s={onReceiveMetadata:null!==(n=null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r?void 0:r.bind(t))&&void 0!==n?n:e=>{},onReceiveMessage:e=>{var r;o=!0,null===(r=null==t?void 0:t.onReceiveMessage)||void 0===r||r.call(t,e)},onReceiveStatus:e=>{var r,n;o||null===(r=null==t?void 0:t.onReceiveMessage)||void 0===r||r.call(t,null),null===(n=null==t?void 0:t.onReceiveStatus)||void 0===n||n.call(t,e)}};super.start(e,s),this.call.startRead()}}class h extends u{}t.getInterceptingCall=function(e,t,r,n){if(e.clientInterceptors.length>0&&e.clientInterceptorProviders.length>0)throw new a("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(e.callInterceptors.length>0&&e.callInterceptorProviders.length>0)throw new a("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let o=[];o=e.callInterceptors.length>0||e.callInterceptorProviders.length>0?[].concat(e.callInterceptors,e.callInterceptorProviders.map((e=>e(t)))).filter((e=>e)):[].concat(e.clientInterceptors,e.clientInterceptorProviders.map((e=>e(t)))).filter((e=>e));const s=Object.assign({},r,{method_definition:t});return o.reduceRight(((e,t)=>r=>t(r,e)),(e=>function(e,t,r){const n=function(e,t,r){var n,o;const s=null!==(n=r.deadline)&&void 0!==n?n:1/0,i=r.host,a=null!==(o=r.parent)&&void 0!==o?o:null,c=r.propagate_flags,l=r.credentials,u=e.createCall(t,s,i,a,c);return l&&u.setCredentials(l),u}(e,r.path,t);return r.responseStream?new h(n,r):new d(n,r)}(n,e,t)))(s)}},8279:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;const n=r(13509),o=r(72253),s=r(40207),i=r(53189),a=r(14664),c=r(3740),l=Symbol(),u=Symbol(),d=Symbol(),h=Symbol();function p(e){return"function"==typeof e}function f(e){return e.stack.split("\n").slice(1).join("\n")}t.Client=class{constructor(e,t,r={}){var n,s;if(r=Object.assign({},r),this[u]=null!==(n=r.interceptors)&&void 0!==n?n:[],delete r.interceptors,this[d]=null!==(s=r.interceptor_providers)&&void 0!==s?s:[],delete r.interceptor_providers,this[u].length>0&&this[d].length>0)throw new Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[h]=r.callInvocationTransformer,delete r.callInvocationTransformer,r.channelOverride)this[l]=r.channelOverride;else if(r.channelFactoryOverride){const n=r.channelFactoryOverride;delete r.channelFactoryOverride,this[l]=n(e,t,r)}else this[l]=new o.ChannelImplementation(e,t,r)}close(){this[l].close()}getChannel(){return this[l]}waitForReady(e,t){const r=n=>{if(n)return void t(new Error("Failed to connect before the deadline"));let o;try{o=this[l].getConnectivityState(!0)}catch(e){return void t(new Error("The channel has been closed"))}if(o===s.ConnectivityState.READY)t();else try{this[l].watchConnectivityState(o,e,r)}catch(e){t(new Error("The channel has been closed"))}};setImmediate(r)}checkOptionalUnaryResponseArguments(e,t,r){if(p(e))return{metadata:new a.Metadata,options:{},callback:e};if(p(t))return e instanceof a.Metadata?{metadata:e,options:{},callback:t}:{metadata:new a.Metadata,options:e,callback:t};if(!(e instanceof a.Metadata&&t instanceof Object&&p(r)))throw new Error("Incorrect arguments passed");return{metadata:e,options:t,callback:r}}makeUnaryRequest(e,t,r,o,s,a,p){var g,m;const y=this.checkOptionalUnaryResponseArguments(s,a,p),v={path:e,requestStream:!1,responseStream:!1,requestSerialize:t,responseDeserialize:r};let _={argument:o,metadata:y.metadata,call:new n.ClientUnaryCallImpl,channel:this[l],methodDefinition:v,callOptions:y.options,callback:y.callback};this[h]&&(_=this[h](_));const b=_.call,S={clientInterceptors:this[u],clientInterceptorProviders:this[d],callInterceptors:null!==(g=_.callOptions.interceptors)&&void 0!==g?g:[],callInterceptorProviders:null!==(m=_.callOptions.interceptor_providers)&&void 0!==m?m:[]},E=(0,c.getInterceptingCall)(S,_.methodDefinition,_.callOptions,_.channel);b.call=E;let w=null,A=!1;const T=new Error;return E.start(_.metadata,{onReceiveMetadata:e=>{b.emit("metadata",e)},onReceiveMessage(e){null!==w&&E.cancelWithStatus(i.Status.INTERNAL,"Too many responses received"),w=e},onReceiveStatus(e){if(!A){if(A=!0,e.code===i.Status.OK)if(null===w){const t=f(T);_.callback((0,n.callErrorFromStatus)({code:i.Status.INTERNAL,details:"No message received",metadata:e.metadata},t))}else _.callback(null,w);else{const t=f(T);_.callback((0,n.callErrorFromStatus)(e,t))}b.emit("status",e)}}}),E.sendMessage(o),E.halfClose(),b}makeClientStreamRequest(e,t,r,o,s,a){var p,g;const m=this.checkOptionalUnaryResponseArguments(o,s,a),y={path:e,requestStream:!0,responseStream:!1,requestSerialize:t,responseDeserialize:r};let v={metadata:m.metadata,call:new n.ClientWritableStreamImpl(t),channel:this[l],methodDefinition:y,callOptions:m.options,callback:m.callback};this[h]&&(v=this[h](v));const _=v.call,b={clientInterceptors:this[u],clientInterceptorProviders:this[d],callInterceptors:null!==(p=v.callOptions.interceptors)&&void 0!==p?p:[],callInterceptorProviders:null!==(g=v.callOptions.interceptor_providers)&&void 0!==g?g:[]},S=(0,c.getInterceptingCall)(b,v.methodDefinition,v.callOptions,v.channel);_.call=S;let E=null,w=!1;const A=new Error;return S.start(v.metadata,{onReceiveMetadata:e=>{_.emit("metadata",e)},onReceiveMessage(e){null!==E&&S.cancelWithStatus(i.Status.INTERNAL,"Too many responses received"),E=e},onReceiveStatus(e){if(!w){if(w=!0,e.code===i.Status.OK)if(null===E){const t=f(A);v.callback((0,n.callErrorFromStatus)({code:i.Status.INTERNAL,details:"No message received",metadata:e.metadata},t))}else v.callback(null,E);else{const t=f(A);v.callback((0,n.callErrorFromStatus)(e,t))}_.emit("status",e)}}}),_}checkMetadataAndOptions(e,t){let r,n;return e instanceof a.Metadata?(r=e,n=t||{}):(n=e||{},r=new a.Metadata),{metadata:r,options:n}}makeServerStreamRequest(e,t,r,o,s,a){var p,g;const m=this.checkMetadataAndOptions(s,a),y={path:e,requestStream:!1,responseStream:!0,requestSerialize:t,responseDeserialize:r};let v={argument:o,metadata:m.metadata,call:new n.ClientReadableStreamImpl(r),channel:this[l],methodDefinition:y,callOptions:m.options};this[h]&&(v=this[h](v));const _=v.call,b={clientInterceptors:this[u],clientInterceptorProviders:this[d],callInterceptors:null!==(p=v.callOptions.interceptors)&&void 0!==p?p:[],callInterceptorProviders:null!==(g=v.callOptions.interceptor_providers)&&void 0!==g?g:[]},S=(0,c.getInterceptingCall)(b,v.methodDefinition,v.callOptions,v.channel);_.call=S;let E=!1;const w=new Error;return S.start(v.metadata,{onReceiveMetadata(e){_.emit("metadata",e)},onReceiveMessage(e){_.push(e)},onReceiveStatus(e){if(!E){if(E=!0,_.push(null),e.code!==i.Status.OK){const t=f(w);_.emit("error",(0,n.callErrorFromStatus)(e,t))}_.emit("status",e)}}}),S.sendMessage(o),S.halfClose(),_}makeBidiStreamRequest(e,t,r,o,s){var a,p;const g=this.checkMetadataAndOptions(o,s),m={path:e,requestStream:!0,responseStream:!0,requestSerialize:t,responseDeserialize:r};let y={metadata:g.metadata,call:new n.ClientDuplexStreamImpl(t,r),channel:this[l],methodDefinition:m,callOptions:g.options};this[h]&&(y=this[h](y));const v=y.call,_={clientInterceptors:this[u],clientInterceptorProviders:this[d],callInterceptors:null!==(a=y.callOptions.interceptors)&&void 0!==a?a:[],callInterceptorProviders:null!==(p=y.callOptions.interceptor_providers)&&void 0!==p?p:[]},b=(0,c.getInterceptingCall)(_,y.methodDefinition,y.callOptions,y.channel);v.call=b;let S=!1;const E=new Error;return b.start(y.metadata,{onReceiveMetadata(e){v.emit("metadata",e)},onReceiveMessage(e){v.push(e)},onReceiveStatus(e){if(!S){if(S=!0,v.push(null),e.code!==i.Status.OK){const t=f(E);v.emit("error",(0,n.callErrorFromStatus)(e,t))}v.emit("status",e)}}}),v}}},69852:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionAlgorithms=void 0,(r=t.CompressionAlgorithms||(t.CompressionAlgorithms={}))[r.identity=0]="identity",r[r.deflate=1]="deflate",r[r.gzip=2]="gzip"},94930:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionFilterFactory=t.CompressionFilter=void 0;const n=r(59796),o=r(69852),s=r(53189),i=r(56994),a=r(48626);class c{async writeMessage(e,t){let r=e;t&&(r=await this.compressMessage(r));const n=Buffer.allocUnsafe(r.length+5);return n.writeUInt8(t?1:0,0),n.writeUInt32BE(r.length,1),r.copy(n,5),n}async readMessage(e){const t=1===e.readUInt8(0);let r=e.slice(5);return t&&(r=await this.decompressMessage(r)),r}}class l extends c{async compressMessage(e){return e}async writeMessage(e,t){const r=Buffer.allocUnsafe(e.length+5);return r.writeUInt8(0,0),r.writeUInt32BE(e.length,1),e.copy(r,5),r}decompressMessage(e){return Promise.reject(new Error('Received compressed message but "grpc-encoding" header was identity'))}}class u extends c{compressMessage(e){return new Promise(((t,r)=>{n.deflate(e,((e,n)=>{e?r(e):t(n)}))}))}decompressMessage(e){return new Promise(((t,r)=>{n.inflate(e,((e,n)=>{e?r(e):t(n)}))}))}}class d extends c{compressMessage(e){return new Promise(((t,r)=>{n.gzip(e,((e,n)=>{e?r(e):t(n)}))}))}decompressMessage(e){return new Promise(((t,r)=>{n.unzip(e,((e,n)=>{e?r(e):t(n)}))}))}}class h extends c{constructor(e){super(),this.compressionName=e}compressMessage(e){return Promise.reject(new Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(new Error(`Compression method not supported: ${this.compressionName}`))}}function p(e){switch(e){case"identity":return new l;case"deflate":return new u;case"gzip":return new d;default:return new h(e)}}class f extends i.BaseFilter{constructor(e,t){var r;super(),this.sharedFilterConfig=t,this.sendCompression=new l,this.receiveCompression=new l,this.currentCompressionAlgorithm="identity";const n=e["grpc.default_compression_algorithm"];if(void 0!==n)if("number"==typeof(i=n)&&"string"==typeof o.CompressionAlgorithms[i]){const e=o.CompressionAlgorithms[n],s=null===(r=t.serverSupportedEncodingHeader)||void 0===r?void 0:r.split(",");s&&!s.includes(e)||(this.currentCompressionAlgorithm=e,this.sendCompression=p(this.currentCompressionAlgorithm))}else a.log(s.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${n}`);var i}async sendMetadata(e){const t=await e;return t.set("grpc-accept-encoding","identity,deflate,gzip"),t.set("accept-encoding","identity"),"identity"===this.currentCompressionAlgorithm?t.remove("grpc-encoding"):t.set("grpc-encoding",this.currentCompressionAlgorithm),t}receiveMetadata(e){const t=e.get("grpc-encoding");if(t.length>0){const e=t[0];"string"==typeof e&&(this.receiveCompression=p(e))}e.remove("grpc-encoding");const r=e.get("grpc-accept-encoding")[0];return r&&(this.sharedFilterConfig.serverSupportedEncodingHeader=r,r.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new l,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}async sendMessage(e){var t;const r=await e;let n;return n=!(this.sendCompression instanceof l)&&0==(2&(null!==(t=r.flags)&&void 0!==t?t:0)),{message:await this.sendCompression.writeMessage(r.message,n),flags:r.flags}}async receiveMessage(e){return this.receiveCompression.readMessage(await e)}}t.CompressionFilter=f,t.CompressionFilterFactory=class{constructor(e,t){this.channel=e,this.options=t,this.sharedFilterConfig={}}createFilter(){return new f(this.options,this.sharedFilterConfig)}}},40207:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectivityState=void 0,(r=t.ConnectivityState||(t.ConnectivityState={}))[r.IDLE=0]="IDLE",r[r.CONNECTING=1]="CONNECTING",r[r.READY=2]="READY",r[r.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",r[r.SHUTDOWN=4]="SHUTDOWN"},53189:(e,t)=>{"use strict";var r,n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=t.Propagate=t.LogVerbosity=t.Status=void 0,(o=t.Status||(t.Status={}))[o.OK=0]="OK",o[o.CANCELLED=1]="CANCELLED",o[o.UNKNOWN=2]="UNKNOWN",o[o.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",o[o.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",o[o.NOT_FOUND=5]="NOT_FOUND",o[o.ALREADY_EXISTS=6]="ALREADY_EXISTS",o[o.PERMISSION_DENIED=7]="PERMISSION_DENIED",o[o.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",o[o.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",o[o.ABORTED=10]="ABORTED",o[o.OUT_OF_RANGE=11]="OUT_OF_RANGE",o[o.UNIMPLEMENTED=12]="UNIMPLEMENTED",o[o.INTERNAL=13]="INTERNAL",o[o.UNAVAILABLE=14]="UNAVAILABLE",o[o.DATA_LOSS=15]="DATA_LOSS",o[o.UNAUTHENTICATED=16]="UNAUTHENTICATED",(n=t.LogVerbosity||(t.LogVerbosity={}))[n.DEBUG=0]="DEBUG",n[n.INFO=1]="INFO",n[n.ERROR=2]="ERROR",n[n.NONE=3]="NONE",(r=t.Propagate||(t.Propagate={}))[r.DEADLINE=1]="DEADLINE",r[r.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",r[r.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",r[r.CANCELLATION=8]="CANCELLATION",r[r.DEFAULTS=65535]="DEFAULTS",t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1,t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4194304},64617:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restrictControlPlaneStatusCode=void 0;const n=r(53189),o=[n.Status.OK,n.Status.INVALID_ARGUMENT,n.Status.NOT_FOUND,n.Status.ALREADY_EXISTS,n.Status.FAILED_PRECONDITION,n.Status.ABORTED,n.Status.OUT_OF_RANGE,n.Status.DATA_LOSS];t.restrictControlPlaneStatusCode=function(e,t){return o.includes(e)?{code:n.Status.INTERNAL,details:`Invalid status from control plane: ${e} ${n.Status[e]} ${t}`}:{code:e,details:t}}},71128:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deadlineToString=t.getRelativeTimeout=t.getDeadlineTimeoutString=t.minDeadline=void 0,t.minDeadline=function(...e){let t=1/0;for(const r of e){const e=r instanceof Date?r.getTime():r;e<t&&(t=e)}return t};const r=[["m",1],["S",1e3],["M",6e4],["H",36e5]];t.getDeadlineTimeoutString=function(e){const t=(new Date).getTime();e instanceof Date&&(e=e.getTime());const n=Math.max(e-t,0);for(const[e,t]of r){const r=n/t;if(r<1e8)return String(Math.ceil(r))+e}throw new Error("Deadline is too far in the future")},t.getRelativeTimeout=function(e){const t=(e instanceof Date?e.getTime():e)-(new Date).getTime();return t<0?0:t>2147483647?1/0:t},t.deadlineToString=function(e){if(e instanceof Date)return e.toISOString();{const t=new Date(e);return Number.isNaN(t.getTime())?""+e:t.toISOString()}}},55484:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDuration=t.durationToMs=t.msToDuration=void 0,t.msToDuration=function(e){return{seconds:e/1e3|0,nanos:e%1e3*1e6|0}},t.durationToMs=function(e){return 1e3*e.seconds+e.nanos/1e6|0},t.isDuration=function(e){return"number"==typeof e.seconds&&"number"==typeof e.nanos}},15503:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorCode=t.getErrorMessage=void 0,t.getErrorMessage=function(e){return e instanceof Error?e.message:String(e)},t.getErrorCode=function(e){return"object"==typeof e&&null!==e&&"code"in e&&"number"==typeof e.code?e.code:null}},20495:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutlierDetectionLoadBalancingConfig=t.BaseSubchannelWrapper=t.registerAdminService=t.FilterStackFactory=t.BaseFilter=t.PickResultType=t.QueuePicker=t.UnavailablePicker=t.ChildLoadBalancerHandler=t.subchannelAddressToString=t.validateLoadBalancingConfig=t.getFirstUsableConfig=t.registerLoadBalancerType=t.createChildChannelControlHelper=t.BackoffTimeout=t.durationToMs=t.uriToString=t.registerResolver=t.log=t.trace=void 0;var n=r(48626);Object.defineProperty(t,"trace",{enumerable:!0,get:function(){return n.trace}}),Object.defineProperty(t,"log",{enumerable:!0,get:function(){return n.log}});var o=r(83513);Object.defineProperty(t,"registerResolver",{enumerable:!0,get:function(){return o.registerResolver}});var s=r(95165);Object.defineProperty(t,"uriToString",{enumerable:!0,get:function(){return s.uriToString}});var i=r(55484);Object.defineProperty(t,"durationToMs",{enumerable:!0,get:function(){return i.durationToMs}});var a=r(43510);Object.defineProperty(t,"BackoffTimeout",{enumerable:!0,get:function(){return a.BackoffTimeout}});var c=r(21192);Object.defineProperty(t,"createChildChannelControlHelper",{enumerable:!0,get:function(){return c.createChildChannelControlHelper}}),Object.defineProperty(t,"registerLoadBalancerType",{enumerable:!0,get:function(){return c.registerLoadBalancerType}}),Object.defineProperty(t,"getFirstUsableConfig",{enumerable:!0,get:function(){return c.getFirstUsableConfig}}),Object.defineProperty(t,"validateLoadBalancingConfig",{enumerable:!0,get:function(){return c.validateLoadBalancingConfig}});var l=r(48741);Object.defineProperty(t,"subchannelAddressToString",{enumerable:!0,get:function(){return l.subchannelAddressToString}});var u=r(44487);Object.defineProperty(t,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return u.ChildLoadBalancerHandler}});var d=r(24219);Object.defineProperty(t,"UnavailablePicker",{enumerable:!0,get:function(){return d.UnavailablePicker}}),Object.defineProperty(t,"QueuePicker",{enumerable:!0,get:function(){return d.QueuePicker}}),Object.defineProperty(t,"PickResultType",{enumerable:!0,get:function(){return d.PickResultType}});var h=r(56994);Object.defineProperty(t,"BaseFilter",{enumerable:!0,get:function(){return h.BaseFilter}});var p=r(71882);Object.defineProperty(t,"FilterStackFactory",{enumerable:!0,get:function(){return p.FilterStackFactory}});var f=r(71265);Object.defineProperty(t,"registerAdminService",{enumerable:!0,get:function(){return f.registerAdminService}});var g=r(18862);Object.defineProperty(t,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return g.BaseSubchannelWrapper}});var m=r(93002);Object.defineProperty(t,"OutlierDetectionLoadBalancingConfig",{enumerable:!0,get:function(){return m.OutlierDetectionLoadBalancingConfig}})},71882:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterStackFactory=t.FilterStack=void 0;class r{constructor(e){this.filters=e}sendMetadata(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMetadata(t);return t}receiveMetadata(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMetadata(t);return t}sendMessage(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMessage(t);return t}receiveMessage(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMessage(t);return t}receiveTrailers(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveTrailers(t);return t}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}}t.FilterStack=r;class n{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}clone(){return new n([...this.factories])}createFilter(){return new r(this.factories.map((e=>e.createFilter())))}}t.FilterStackFactory=n},56994:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFilter=void 0,t.BaseFilter=class{async sendMetadata(e){return e}receiveMetadata(e){return e}async sendMessage(e){return e}async receiveMessage(e){return e}receiveTrailers(e){return e}}},86042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProxiedConnection=t.mapProxyName=void 0;const n=r(48626),o=r(53189),s=r(83513),i=r(13685),a=r(24404),c=r(48626),l=r(48741),u=r(95165),d=r(57310);function h(e){c.trace(o.LogVerbosity.DEBUG,"proxy",e)}t.mapProxyName=function(e,t){var r;const s={target:e,extraOptions:{}};if(0===(null!==(r=t["grpc.enable_http_proxy"])&&void 0!==r?r:1))return s;if("unix"===e.scheme)return s;const i=function(){let e,t="",r="";if(process.env.grpc_proxy)r="grpc_proxy",t=process.env.grpc_proxy;else if(process.env.https_proxy)r="https_proxy",t=process.env.https_proxy;else{if(!process.env.http_proxy)return{};r="http_proxy",t=process.env.http_proxy}try{e=new d.URL(t)}catch(e){return(0,n.log)(o.LogVerbosity.ERROR,`cannot parse value of "${r}" env var`),{}}if("http:"!==e.protocol)return(0,n.log)(o.LogVerbosity.ERROR,`"${e.protocol}" scheme not supported in proxy URI`),{};let s=null;e.username&&(e.password?((0,n.log)(o.LogVerbosity.INFO,"userinfo found in proxy URI"),s=`${e.username}:${e.password}`):s=e.username);const i=e.hostname;let a=e.port;""===a&&(a="80");const c={address:`${i}:${a}`};return s&&(c.creds=s),h("Proxy server "+c.address+" set by environment variable "+r),c}();if(!i.address)return s;const a=(0,u.splitHostPort)(e.path);if(!a)return s;const c=a.host;for(const t of function(){let e=process.env.no_grpc_proxy,t="no_grpc_proxy";return e||(e=process.env.no_proxy,t="no_proxy"),e?(h("No proxy server list set by environment variable "+t),e.split(",")):[]}())if(t===c)return h("Not using proxy for target in no_proxy list: "+(0,u.uriToString)(e)),s;const l={"grpc.http_connect_target":(0,u.uriToString)(e)};return i.creds&&(l["grpc.http_connect_creds"]=i.creds),{target:{scheme:"dns",path:i.address},extraOptions:l}},t.getProxiedConnection=function(e,t,r){if(!("grpc.http_connect_target"in t))return Promise.resolve({});const c=t["grpc.http_connect_target"],d=(0,u.parseUri)(c);if(null===d)return Promise.resolve({});const p={method:"CONNECT",path:d.path},f={Host:d.path};(0,l.isTcpSubchannelAddress)(e)?(p.host=e.host,p.port=e.port):p.socketPath=e.path,"grpc.http_connect_creds"in t&&(f["Proxy-Authorization"]="Basic "+Buffer.from(t["grpc.http_connect_creds"]).toString("base64")),p.headers=f;const g=(0,l.subchannelAddressToString)(e);return h("Using proxy "+g+" to connect to "+p.path),new Promise(((e,t)=>{const c=i.request(p);c.once("connect",((i,l,f)=>{var m;if(c.removeAllListeners(),l.removeAllListeners(),200===i.statusCode)if(h("Successfully connected to "+p.path+" through proxy "+g),"secureContext"in r){const n=(0,s.getDefaultAuthority)(d),o=(0,u.splitHostPort)(n),i=null!==(m=null==o?void 0:o.host)&&void 0!==m?m:n,c=a.connect(Object.assign({host:i,servername:i,socket:l},r),(()=>{h("Successfully established a TLS connection to "+p.path+" through proxy "+g),e({socket:c,realTarget:d})}));c.on("error",(e=>{h("Failed to establish a TLS connection to "+p.path+" through proxy "+g+" with error "+e.message),t()}))}else h("Successfully established a plaintext connection to "+p.path+" through proxy "+g),e({socket:l,realTarget:d});else(0,n.log)(o.LogVerbosity.ERROR,"Failed to connect to "+p.path+" through proxy "+g+" with status "+i.statusCode),t()})),c.once("error",(e=>{c.removeAllListeners(),(0,n.log)(o.LogVerbosity.ERROR,"Failed to connect to proxy "+g+" with error "+e.message),t()})),c.end()}))}},66636:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.experimental=t.addAdminServicesToServer=t.getChannelzHandlers=t.getChannelzServiceDefinition=t.InterceptorConfigurationError=t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.StatusBuilder=t.getClientChannel=t.ServerCredentials=t.Server=t.setLogVerbosity=t.setLogger=t.load=t.loadObject=t.CallCredentials=t.ChannelCredentials=t.waitForClientReady=t.closeClient=t.Channel=t.makeGenericClientConstructor=t.makeClientConstructor=t.loadPackageDefinition=t.Client=t.compressionAlgorithms=t.propagate=t.connectivityState=t.status=t.logVerbosity=t.Metadata=t.credentials=void 0;const n=r(69587);Object.defineProperty(t,"CallCredentials",{enumerable:!0,get:function(){return n.CallCredentials}});const o=r(72253);Object.defineProperty(t,"Channel",{enumerable:!0,get:function(){return o.ChannelImplementation}});const s=r(69852);Object.defineProperty(t,"compressionAlgorithms",{enumerable:!0,get:function(){return s.CompressionAlgorithms}});const i=r(40207);Object.defineProperty(t,"connectivityState",{enumerable:!0,get:function(){return i.ConnectivityState}});const a=r(49357);Object.defineProperty(t,"ChannelCredentials",{enumerable:!0,get:function(){return a.ChannelCredentials}});const c=r(8279);Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return c.Client}});const l=r(53189);Object.defineProperty(t,"logVerbosity",{enumerable:!0,get:function(){return l.LogVerbosity}}),Object.defineProperty(t,"status",{enumerable:!0,get:function(){return l.Status}}),Object.defineProperty(t,"propagate",{enumerable:!0,get:function(){return l.Propagate}});const u=r(48626),d=r(72011);Object.defineProperty(t,"loadPackageDefinition",{enumerable:!0,get:function(){return d.loadPackageDefinition}}),Object.defineProperty(t,"makeClientConstructor",{enumerable:!0,get:function(){return d.makeClientConstructor}}),Object.defineProperty(t,"makeGenericClientConstructor",{enumerable:!0,get:function(){return d.makeClientConstructor}});const h=r(14664);Object.defineProperty(t,"Metadata",{enumerable:!0,get:function(){return h.Metadata}});const p=r(40903);Object.defineProperty(t,"Server",{enumerable:!0,get:function(){return p.Server}});const f=r(35919);Object.defineProperty(t,"ServerCredentials",{enumerable:!0,get:function(){return f.ServerCredentials}});const g=r(80930);Object.defineProperty(t,"StatusBuilder",{enumerable:!0,get:function(){return g.StatusBuilder}}),t.credentials={combineChannelCredentials:(e,...t)=>t.reduce(((e,t)=>e.compose(t)),e),combineCallCredentials:(e,...t)=>t.reduce(((e,t)=>e.compose(t)),e),createInsecure:a.ChannelCredentials.createInsecure,createSsl:a.ChannelCredentials.createSsl,createFromSecureContext:a.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:n.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:n.CallCredentials.createFromGoogleCredential,createEmpty:n.CallCredentials.createEmpty},t.closeClient=e=>e.close(),t.waitForClientReady=(e,t,r)=>e.waitForReady(t,r),t.loadObject=(e,t)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},t.load=(e,t,r)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},t.setLogger=e=>{u.setLogger(e)},t.setLogVerbosity=e=>{u.setLoggerVerbosity(e)},t.getClientChannel=e=>c.Client.prototype.getChannel.call(e);var m=r(3740);Object.defineProperty(t,"ListenerBuilder",{enumerable:!0,get:function(){return m.ListenerBuilder}}),Object.defineProperty(t,"RequesterBuilder",{enumerable:!0,get:function(){return m.RequesterBuilder}}),Object.defineProperty(t,"InterceptingCall",{enumerable:!0,get:function(){return m.InterceptingCall}}),Object.defineProperty(t,"InterceptorConfigurationError",{enumerable:!0,get:function(){return m.InterceptorConfigurationError}});var y=r(8950);Object.defineProperty(t,"getChannelzServiceDefinition",{enumerable:!0,get:function(){return y.getChannelzServiceDefinition}}),Object.defineProperty(t,"getChannelzHandlers",{enumerable:!0,get:function(){return y.getChannelzHandlers}});var v=r(71265);Object.defineProperty(t,"addAdminServicesToServer",{enumerable:!0,get:function(){return v.addAdminServicesToServer}});const _=r(20495);t.experimental=_;const b=r(56982),S=r(91350),E=r(38733),w=r(56659),A=r(55174),T=r(93002),C=r(8950),I=r(56569).i8;u.trace(l.LogVerbosity.DEBUG,"index","Loading @grpc/grpc-js version "+I),b.setup(),S.setup(),E.setup(),w.setup(),A.setup(),T.setup(),C.setup()},92805:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalChannel=void 0;const n=r(49357),o=r(83970),s=r(90651),i=r(24219),a=r(53189),c=r(71882),l=r(94930),u=r(83513),d=r(48626),h=r(2829),p=r(86042),f=r(95165),g=r(40207),m=r(8950),y=r(89600),v=r(71128),_=r(44692),b=r(40868),S=r(64617),E=r(30859),w=r(18862),A=new Map;class T extends w.BaseSubchannelWrapper{constructor(e,t){super(e),this.channel=t,this.stateListeners=[],this.refCount=0,e.addConnectivityStateListener(((e,r,n,o)=>{t.throttleKeepalive(o);for(const e of this.stateListeners)e(this,r,n,o)}))}ref(){this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&this.channel.removeWrappedSubchannel(this)}}t.InternalChannel=class{constructor(e,t,r){var y,v,_,b,w,C,I;if(this.credentials=t,this.options=r,this.connectivityState=g.ConnectivityState.IDLE,this.currentPicker=new i.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.channelzEnabled=!0,this.callTracker=new m.ChannelzCallTracker,this.childrenTracker=new m.ChannelzChildrenTracker,"string"!=typeof e)throw new TypeError("Channel target must be a string");if(!(t instanceof n.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(r&&"object"!=typeof r)throw new TypeError("Channel options must be an object");this.originalTarget=e;const R=(0,f.parseUri)(e);if(null===R)throw new Error(`Could not parse target name "${e}"`);const O=(0,u.mapUriDefaultScheme)(R);if(null===O)throw new Error(`Could not find a default scheme for target name "${e}"`);this.callRefTimer=setInterval((()=>{}),2147483647),null===(v=(y=this.callRefTimer).unref)||void 0===v||v.call(y),0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new m.ChannelzTrace,this.channelzRef=(0,m.registerChannelzChannel)(e,(()=>this.getChannelzInfo()),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,u.getDefaultAuthority)(O);const k=(0,p.mapProxyName)(O,r);this.target=k.target,this.options=Object.assign({},this.options,k.extraOptions),this.subchannelPool=(0,s.getSubchannelPool)(0===(null!==(_=r["grpc.use_local_subchannel_pool"])&&void 0!==_?_:0)),this.retryBufferTracker=new E.MessageBufferTracker(null!==(b=r["grpc.retry_buffer_size"])&&void 0!==b?b:16777216,null!==(w=r["grpc.per_rpc_retry_buffer_size"])&&void 0!==w?w:1048576),this.keepaliveTime=null!==(C=r["grpc.keepalive_time_ms"])&&void 0!==C?C:-1;const N={createSubchannel:(e,t)=>{const r=this.subchannelPool.getOrCreateSubchannel(this.target,e,Object.assign({},this.options,t),this.credentials);r.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",r.getChannelzRef());const n=new T(r,this);return this.wrappedSubchannels.add(n),n},updateState:(e,t)=>{this.currentPicker=t;const r=this.pickQueue.slice();this.pickQueue=[],this.callRefTimerUnref();for(const e of r)e.doPick();this.updateState(e)},requestReresolution:()=>{throw new Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:e=>{this.channelzEnabled&&this.childrenTracker.refChild(e)},removeChannelzChild:e=>{this.channelzEnabled&&this.childrenTracker.unrefChild(e)}};this.resolvingLoadBalancer=new o.ResolvingLoadBalancer(this.target,N,r,((e,t)=>{e.retryThrottling?A.set(this.getTarget(),new E.RetryThrottler(e.retryThrottling.maxTokens,e.retryThrottling.tokenRatio,A.get(this.getTarget()))):A.delete(this.getTarget()),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded"),this.configSelector=t,this.currentResolutionError=null,process.nextTick((()=>{const e=this.configSelectionQueue;this.configSelectionQueue=[],this.callRefTimerUnref();for(const t of e)t.getConfig();this.configSelectionQueue=[]}))}),(e=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+e.code+' and details "'+e.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),null===this.configSelector&&(this.currentResolutionError=Object.assign(Object.assign({},(0,S.restrictControlPlaneStatusCode)(e.code,e.details)),{metadata:e.metadata}));const t=this.configSelectionQueue;this.configSelectionQueue=[],this.callRefTimerUnref();for(const r of t)r.reportResolverError(e)})),this.filterStackFactory=new c.FilterStackFactory([new h.MaxMessageSizeFilterFactory(this.options),new l.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(r,void 0,2));const P=new Error;(0,d.trace)(a.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+") Channel constructed \n"+(null===(I=P.stack)||void 0===I?void 0:I.substring(P.stack.indexOf("\n")+1)))}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace(e,t){(0,d.trace)(null!=t?t:a.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,f.uriToString)(this.target)+" "+e)}callRefTimerRef(){var e,t,r,n;(null===(t=(e=this.callRefTimer).hasRef)||void 0===t?void 0:t.call(e))||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(n=(r=this.callRefTimer).ref)||void 0===n||n.call(r))}callRefTimerUnref(){var e,t;this.callRefTimer.hasRef&&!this.callRefTimer.hasRef()||(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(t=(e=this.callRefTimer).unref)||void 0===t||t.call(e))}removeConnectivityStateWatcher(e){const t=this.connectivityStateWatchers.findIndex((t=>t===e));t>=0&&this.connectivityStateWatchers.splice(t,1)}updateState(e){(0,d.trace)(a.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,f.uriToString)(this.target)+" "+g.ConnectivityState[this.connectivityState]+" -> "+g.ConnectivityState[e]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO",g.ConnectivityState[this.connectivityState]+" -> "+g.ConnectivityState[e]),this.connectivityState=e;const t=this.connectivityStateWatchers.slice();for(const r of t)e!==r.currentState&&(r.timer&&clearTimeout(r.timer),this.removeConnectivityStateWatcher(r),r.callback());e!==g.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive(e){if(e>this.keepaliveTime){this.keepaliveTime=e;for(const t of this.wrappedSubchannels)t.throttleKeepalive(e)}}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e)}doPick(e,t){return this.currentPicker.pick({metadata:e,extraPickInfo:t})}queueCallForPick(e){this.pickQueue.push(e),this.callRefTimerRef()}getConfig(e,t){return this.resolvingLoadBalancer.exitIdle(),this.configSelector?{type:"SUCCESS",config:this.configSelector(e,t)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(e){this.configSelectionQueue.push(e),this.callRefTimerRef()}createLoadBalancingCall(e,t,r,n,o){const s=(0,b.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+s+'] method="'+t+'"'),new y.LoadBalancingCall(this,e,t,r,n,o,s)}createRetryingCall(e,t,r,n,o){const s=(0,b.getNextCallNumber)();return this.trace("createRetryingCall ["+s+'] method="'+t+'"'),new E.RetryingCall(this,e,t,r,n,o,s,this.retryBufferTracker,A.get(this.getTarget()))}createInnerCall(e,t,r,n,o){return 0===this.options["grpc.enable_retries"]?this.createLoadBalancingCall(e,t,r,n,o):this.createRetryingCall(e,t,r,n,o)}createResolvingCall(e,t,r,n,o){const s=(0,b.getNextCallNumber)();this.trace("createResolvingCall ["+s+'] method="'+e+'", deadline='+(0,v.deadlineToString)(t));const i={deadline:t,flags:null!=o?o:a.Propagate.DEFAULTS,host:null!=r?r:this.defaultAuthority,parentCall:n},c=new _.ResolvingCall(this,e,i,this.filterStackFactory.clone(),this.credentials._getCallCredentials(),s);return this.channelzEnabled&&(this.callTracker.addCallStarted(),c.addStatusWatcher((e=>{e.code===a.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}))),c}close(){this.resolvingLoadBalancer.destroy(),this.updateState(g.ConnectivityState.SHUTDOWN),clearInterval(this.callRefTimer),this.channelzEnabled&&(0,m.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return(0,f.uriToString)(this.target)}getConnectivityState(e){const t=this.connectivityState;return e&&this.resolvingLoadBalancer.exitIdle(),t}watchConnectivityState(e,t,r){if(this.connectivityState===g.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");let n=null;if(t!==1/0){const e=t instanceof Date?t:new Date(t),s=new Date;if(t===-1/0||e<=s)return void process.nextTick(r,new Error("Deadline passed without connectivity state change"));n=setTimeout((()=>{this.removeConnectivityStateWatcher(o),r(new Error("Deadline passed without connectivity state change"))}),e.getTime()-s.getTime())}const o={currentState:e,callback:r,timer:n};this.connectivityStateWatchers.push(o)}getChannelzRef(){return this.channelzRef}createCall(e,t,r,n,o){if("string"!=typeof e)throw new TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===g.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");return this.createResolvingCall(e,t,r,n,o)}}},44487:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChildLoadBalancerHandler=void 0;const n=r(21192),o=r(40207);t.ChildLoadBalancerHandler=class{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.ChildPolicyHelper=class{constructor(e){this.parent=e,this.child=null}createSubchannel(e,t){return this.parent.channelControlHelper.createSubchannel(e,t)}updateState(e,t){var r;if(this.calledByPendingChild()){if(e===o.ConnectivityState.CONNECTING)return;null===(r=this.parent.currentChild)||void 0===r||r.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(e,t)}requestReresolution(){var e;const t=null!==(e=this.parent.pendingChild)&&void 0!==e?e:this.parent.currentChild;this.child===t&&this.parent.channelControlHelper.requestReresolution()}setChild(e){this.child=e}addChannelzChild(e){this.parent.channelControlHelper.addChannelzChild(e)}removeChannelzChild(e){this.parent.channelControlHelper.removeChannelzChild(e)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}updateAddressList(e,t,r){let o;if(null===this.currentChild||this.currentChild.getTypeName()!==t.getLoadBalancerName()){const e=new this.ChildPolicyHelper(this),r=(0,n.createLoadBalancer)(t,e);e.setChild(r),null===this.currentChild?(this.currentChild=r,o=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=r,o=this.pendingChild)}else o=null===this.pendingChild?this.currentChild:this.pendingChild;o.updateAddressList(e,t,r)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return"child_load_balancer_helper"}}},93002:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.OutlierDetectionLoadBalancer=t.OutlierDetectionLoadBalancingConfig=void 0;const o=r(40207),s=r(53189),i=r(55484),a=r(20495),c=r(21192),l=r(44487),u=r(24219),d=r(48741),h=r(18862),p=r(48626);function f(e){p.trace(s.LogVerbosity.DEBUG,"outlier_detection",e)}const g="outlier_detection",m="true"===(null!==(n=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)&&void 0!==n?n:"true"),y={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},v={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function _(e,t,r,n){if(t in e&&typeof e[t]!==r)throw new Error(`outlier detection config ${n?`${n}.${t}`:t} parse error: expected ${r}, got ${typeof e[t]}`)}function b(e,t,r){const n=r?`${r}.${t}`:t;if(t in e){if(!(0,i.isDuration)(e[t]))throw new Error(`outlier detection config ${n} parse error: expected Duration, got ${typeof e[t]}`);if(!(e[t].seconds>=0&&e[t].seconds<=315576e6&&e[t].nanos>=0&&e[t].nanos<=999999999))throw new Error(`outlier detection config ${n} parse error: values out of range for non-negative Duaration`)}}function S(e,t,r){const n=r?`${r}.${t}`:t;if(_(e,t,"number",r),t in e&&!(e[t]>=0&&e[t]<=100))throw new Error(`outlier detection config ${n} parse error: value out of range for percentage (0-100)`)}class E{constructor(e,t,r,n,o,s,i){this.childPolicy=i,this.intervalMs=null!=e?e:1e4,this.baseEjectionTimeMs=null!=t?t:3e4,this.maxEjectionTimeMs=null!=r?r:3e5,this.maxEjectionPercent=null!=n?n:10,this.successRateEjection=o?Object.assign(Object.assign({},y),o):null,this.failurePercentageEjection=s?Object.assign(Object.assign({},v),s):null}getLoadBalancerName(){return g}toJsonObject(){return{interval:(0,i.msToDuration)(this.intervalMs),base_ejection_time:(0,i.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,i.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map((e=>e.toJsonObject()))}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy(e){return new E(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,e)}static createFromJson(e){var t;if(b(e,"interval"),b(e,"base_ejection_time"),b(e,"max_ejection_time"),S(e,"max_ejection_percent"),"success_rate_ejection"in e){if("object"!=typeof e.success_rate_ejection)throw new Error("outlier detection config success_rate_ejection must be an object");_(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),S(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),_(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),_(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e){if("object"!=typeof e.failure_percentage_ejection)throw new Error("outlier detection config failure_percentage_ejection must be an object");S(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),S(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),_(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),_(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new E(e.interval?(0,i.durationToMs)(e.interval):null,e.base_ejection_time?(0,i.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0,i.durationToMs)(e.max_ejection_time):null,null!==(t=e.max_ejection_percent)&&void 0!==t?t:null,e.success_rate_ejection,e.failure_percentage_ejection,e.child_policy.map(c.validateLoadBalancingConfig))}}t.OutlierDetectionLoadBalancingConfig=E;class w extends h.BaseSubchannelWrapper{constructor(e,t){super(e),this.mapEntry=t,this.stateListeners=[],this.ejected=!1,this.refCount=0,this.childSubchannelState=e.getConnectivityState(),e.addConnectivityStateListener(((e,t,r,n)=>{if(this.childSubchannelState=r,!this.ejected)for(const e of this.stateListeners)e(this,t,r,n)}))}getConnectivityState(){return this.ejected?o.ConnectivityState.TRANSIENT_FAILURE:this.childSubchannelState}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){const t=this.stateListeners.indexOf(e);t>-1&&this.stateListeners.splice(t,1)}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){const e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1)}}eject(){this.ejected=!0;for(const e of this.stateListeners)e(this,this.childSubchannelState,o.ConnectivityState.TRANSIENT_FAILURE,-1)}uneject(){this.ejected=!1;for(const e of this.stateListeners)e(this,o.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState,-1)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}}class A{constructor(){this.activeBucket={success:0,failure:0},this.inactiveBucket={success:0,failure:0}}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket={success:0,failure:0}}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}}class T{constructor(e,t){this.wrappedPicker=e,this.countCalls=t}pick(e){const t=this.wrappedPicker.pick(e);if(t.pickResultType===u.PickResultType.COMPLETE){const e=t.subchannel,r=e.getMapEntry();if(r){let n=t.onCallEnded;return this.countCalls&&(n=e=>{var n;e===s.Status.OK?r.counter.addSuccess():r.counter.addFailure(),null===(n=t.onCallEnded)||void 0===n||n.call(t,e)}),Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel(),onCallEnded:n})}return Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel()})}return t}}class C{constructor(e){this.addressMap=new Map,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new l.ChildLoadBalancerHandler((0,a.createChildChannelControlHelper)(e,{createSubchannel:(t,r)=>{const n=e.createSubchannel(t,r),o=this.addressMap.get((0,d.subchannelAddressToString)(t)),s=new w(n,o);return null!==(null==o?void 0:o.currentEjectionTimestamp)&&s.eject(),null==o||o.subchannelWrappers.push(s),s},updateState:(t,r)=>{t===o.ConnectivityState.READY?e.updateState(t,new T(r,this.isCountingEnabled())):e.updateState(t,r)}})),this.ejectionTimer=setInterval((()=>{}),0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return null!==this.latestConfig&&(null!==this.latestConfig.getSuccessRateEjectionConfig()||null!==this.latestConfig.getFailurePercentageEjectionConfig())}getCurrentEjectionPercent(){let e=0;for(const t of this.addressMap.values())null!==t.currentEjectionTimestamp&&(e+=1);return 100*e/this.addressMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;const t=this.latestConfig.getSuccessRateEjectionConfig();if(!t)return;f("Running success rate check");const r=t.request_volume;let n=0;const o=[];for(const[e,t]of this.addressMap){const s=t.counter.getLastSuccesses(),i=t.counter.getLastFailures();f("Stats for "+e+": successes="+s+" failures="+i+" targetRequestVolume="+r),s+i>=r&&(n+=1,o.push(s/(s+i)))}if(f("Found "+n+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+o+"]"),n<t.minimum_hosts)return;const s=o.reduce(((e,t)=>e+t))/o.length;let i=0;for(const e of o){const t=e-s;i+=t*t}const a=i/o.length,c=Math.sqrt(a),l=s-c*(t.stdev_factor/1e3);f("stdev="+c+" ejectionThreshold="+l);for(const[n,o]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;const s=o.counter.getLastSuccesses(),i=o.counter.getLastFailures();if(s+i<r)continue;const a=s/(s+i);if(f("Checking candidate "+n+" successRate="+a),a<l){const r=100*Math.random();f("Candidate "+n+" randomNumber="+r+" enforcement_percentage="+t.enforcement_percentage),r<t.enforcement_percentage&&(f("Ejecting candidate "+n),this.eject(o,e))}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;const t=this.latestConfig.getFailurePercentageEjectionConfig();if(!t)return;f("Running failure percentage check. threshold="+t.threshold+" request volume threshold="+t.request_volume);let r=0;for(const e of this.addressMap.values())e.counter.getLastSuccesses()+e.counter.getLastFailures()>=t.request_volume&&(r+=1);if(!(r<t.minimum_hosts))for(const[r,n]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;const o=n.counter.getLastSuccesses(),s=n.counter.getLastFailures();if((f("Candidate successes="+o+" failures="+s),!(o+s<t.request_volume))&&100*s/(s+o)>t.threshold){const o=100*Math.random();f("Candidate "+r+" randomNumber="+o+" enforcement_percentage="+t.enforcement_percentage),o<t.enforcement_percentage&&(f("Ejecting candidate "+r),this.eject(n,e))}}}eject(e,t){e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1;for(const t of e.subchannelWrappers)t.eject()}uneject(e){e.currentEjectionTimestamp=null;for(const t of e.subchannelWrappers)t.uneject()}switchAllBuckets(){for(const e of this.addressMap.values())e.counter.switchBuckets()}startTimer(e){var t,r;this.ejectionTimer=setTimeout((()=>this.runChecks()),e),null===(r=(t=this.ejectionTimer).unref)||void 0===r||r.call(t)}runChecks(){const e=new Date;if(f("Ejection timer running"),this.switchAllBuckets(),this.latestConfig){this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e);for(const[e,t]of this.addressMap.entries())if(null===t.currentEjectionTimestamp)t.ejectionTimeMultiplier>0&&(t.ejectionTimeMultiplier-=1);else{const r=this.latestConfig.getBaseEjectionTimeMs(),n=this.latestConfig.getMaxEjectionTimeMs(),o=new Date(t.currentEjectionTimestamp.getTime());o.setMilliseconds(o.getMilliseconds()+Math.min(r*t.ejectionTimeMultiplier,Math.max(r,n))),o<new Date&&(f("Unejecting "+e),this.uneject(t))}}}updateAddressList(e,t,r){if(!(t instanceof E))return;const n=new Set;for(const t of e)n.add((0,d.subchannelAddressToString)(t));for(const e of n)this.addressMap.has(e)||(f("Adding map entry for "+e),this.addressMap.set(e,{counter:new A,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));for(const e of this.addressMap.keys())n.has(e)||(f("Removing map entry for "+e),this.addressMap.delete(e));const o=(0,c.getFirstUsableConfig)(t.getChildPolicy(),!0);if(this.childBalancer.updateAddressList(e,o,r),t.getSuccessRateEjectionConfig()||t.getFailurePercentageEjectionConfig())if(this.timerStartTime){f("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);const e=t.getIntervalMs()-((new Date).getTime()-this.timerStartTime.getTime());this.startTimer(e)}else f("Starting new timer"),this.timerStartTime=new Date,this.startTimer(t.getIntervalMs()),this.switchAllBuckets();else{f("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer);for(const e of this.addressMap.values())this.uneject(e),e.ejectionTimeMultiplier=0}this.latestConfig=t}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return g}}t.OutlierDetectionLoadBalancer=C,t.setup=function(){m&&(0,a.registerLoadBalancerType)(g,C,E)}},56659:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.PickFirstLoadBalancer=t.PickFirstLoadBalancingConfig=void 0;const n=r(21192),o=r(40207),s=r(24219),i=r(48741),a=r(48626),c=r(53189);function l(e){a.trace(c.LogVerbosity.DEBUG,"pick_first",e)}const u="pick_first";class d{getLoadBalancerName(){return u}constructor(){}toJsonObject(){return{[u]:{}}}static createFromJson(e){return new d}}t.PickFirstLoadBalancingConfig=d;class h{constructor(e){this.subchannel=e}pick(e){return{pickResultType:s.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}}class p{constructor(e){this.channelControlHelper=e,this.latestAddressList=[],this.subchannels=[],this.currentState=o.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.triedAllSubchannels=!1,this.subchannelStateCounts={[o.ConnectivityState.CONNECTING]:0,[o.ConnectivityState.IDLE]:0,[o.ConnectivityState.READY]:0,[o.ConnectivityState.SHUTDOWN]:0,[o.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannelStateListener=(e,t,r)=>{if(this.subchannelStateCounts[t]-=1,this.subchannelStateCounts[r]+=1,e===this.subchannels[this.currentSubchannelIndex]&&r===o.ConnectivityState.TRANSIENT_FAILURE&&this.startNextSubchannelConnecting(),r!==o.ConnectivityState.READY){if(this.triedAllSubchannels&&this.subchannelStateCounts[o.ConnectivityState.IDLE]===this.subchannels.length)return this.resetSubchannelList(!1),void this.updateState(o.ConnectivityState.IDLE,new s.QueuePicker(this));if(null===this.currentPick)if(this.triedAllSubchannels){let e;e=this.subchannelStateCounts[o.ConnectivityState.CONNECTING]>0?o.ConnectivityState.CONNECTING:this.subchannelStateCounts[o.ConnectivityState.TRANSIENT_FAILURE]>0?o.ConnectivityState.TRANSIENT_FAILURE:o.ConnectivityState.IDLE,e!==this.currentState&&(e===o.ConnectivityState.TRANSIENT_FAILURE?this.updateState(e,new s.UnavailablePicker):this.updateState(e,new s.QueuePicker(this)))}else this.updateState(o.ConnectivityState.CONNECTING,new s.QueuePicker(this))}else this.pickSubchannel(e)},this.pickedSubchannelStateListener=(e,t,r)=>{if(r!==o.ConnectivityState.READY)if(this.currentPick=null,e.unref(),e.removeConnectivityStateListener(this.pickedSubchannelStateListener),this.channelControlHelper.removeChannelzChild(e.getChannelzRef()),this.subchannels.length>0)if(this.triedAllSubchannels){let e;e=this.subchannelStateCounts[o.ConnectivityState.CONNECTING]>0?o.ConnectivityState.CONNECTING:this.subchannelStateCounts[o.ConnectivityState.TRANSIENT_FAILURE]>0?o.ConnectivityState.TRANSIENT_FAILURE:o.ConnectivityState.IDLE,e===o.ConnectivityState.TRANSIENT_FAILURE?this.updateState(e,new s.UnavailablePicker):this.updateState(e,new s.QueuePicker(this))}else this.updateState(o.ConnectivityState.CONNECTING,new s.QueuePicker(this));else this.updateState(o.ConnectivityState.IDLE,new s.QueuePicker(this))},this.connectionDelayTimeout=setTimeout((()=>{}),0),clearTimeout(this.connectionDelayTimeout)}startNextSubchannelConnecting(){if(!this.triedAllSubchannels){for(const[e,t]of this.subchannels.entries())if(e>this.currentSubchannelIndex){const r=t.getConnectivityState();if(r===o.ConnectivityState.IDLE||r===o.ConnectivityState.CONNECTING)return void this.startConnecting(e)}this.triedAllSubchannels=!0}}startConnecting(e){clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.subchannels[e].getConnectivityState()===o.ConnectivityState.IDLE&&(l("Start connecting to subchannel with address "+this.subchannels[e].getAddress()),process.nextTick((()=>{this.subchannels[e].startConnecting()}))),this.connectionDelayTimeout=setTimeout((()=>{this.startNextSubchannelConnecting()}),250)}pickSubchannel(e){l("Pick subchannel with address "+e.getAddress()),null!==this.currentPick&&(this.currentPick.unref(),this.currentPick.removeConnectivityStateListener(this.pickedSubchannelStateListener)),this.currentPick=e,this.updateState(o.ConnectivityState.READY,new h(e)),e.addConnectivityStateListener(this.pickedSubchannelStateListener),e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout)}updateState(e,t){l(o.ConnectivityState[this.currentState]+" -> "+o.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(e=!0){for(const e of this.subchannels)e.removeConnectivityStateListener(this.subchannelStateListener),e.unref(),this.channelControlHelper.removeChannelzChild(e.getChannelzRef());this.currentSubchannelIndex=0,this.subchannelStateCounts={[o.ConnectivityState.CONNECTING]:0,[o.ConnectivityState.IDLE]:0,[o.ConnectivityState.READY]:0,[o.ConnectivityState.SHUTDOWN]:0,[o.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannels=[],e&&(this.triedAllSubchannels=!1)}connectToAddressList(){this.resetSubchannelList(),l("Connect to address list "+this.latestAddressList.map((e=>(0,i.subchannelAddressToString)(e)))),this.subchannels=this.latestAddressList.map((e=>this.channelControlHelper.createSubchannel(e,{})));for(const e of this.subchannels)e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef());for(const e of this.subchannels)if(e.addConnectivityStateListener(this.subchannelStateListener),this.subchannelStateCounts[e.getConnectivityState()]+=1,e.getConnectivityState()===o.ConnectivityState.READY)return this.pickSubchannel(e),void this.resetSubchannelList();for(const[e,t]of this.subchannels.entries()){const r=t.getConnectivityState();if(r===o.ConnectivityState.IDLE||r===o.ConnectivityState.CONNECTING)return this.startConnecting(e),void(null===this.currentPick&&this.updateState(o.ConnectivityState.CONNECTING,new s.QueuePicker(this)))}null===this.currentPick&&this.updateState(o.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker)}updateAddressList(e,t){0!==this.subchannels.length&&this.latestAddressList.every(((t,r)=>e[r]===t))||(this.latestAddressList=e,this.connectToAddressList())}exitIdle(){(this.currentState===o.ConnectivityState.IDLE||this.triedAllSubchannels)&&this.channelControlHelper.requestReresolution();for(const e of this.subchannels)e.startConnecting();this.currentState===o.ConnectivityState.IDLE&&this.latestAddressList.length>0&&this.connectToAddressList()}resetBackoff(){}destroy(){if(this.resetSubchannelList(),null!==this.currentPick){const e=this.currentPick;e.unref(),e.removeConnectivityStateListener(this.pickedSubchannelStateListener),this.channelControlHelper.removeChannelzChild(e.getChannelzRef())}}getTypeName(){return u}}t.PickFirstLoadBalancer=p,t.setup=function(){(0,n.registerLoadBalancerType)(u,p,d),(0,n.registerDefaultLoadBalancerType)(u)}},55174:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.RoundRobinLoadBalancer=void 0;const n=r(21192),o=r(40207),s=r(24219),i=r(48741),a=r(48626),c=r(53189);function l(e){a.trace(c.LogVerbosity.DEBUG,"round_robin",e)}const u="round_robin";class d{getLoadBalancerName(){return u}constructor(){}toJsonObject(){return{[u]:{}}}static createFromJson(e){return new d}}class h{constructor(e,t=0){this.subchannelList=e,this.nextIndex=t}pick(e){const t=this.subchannelList[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.subchannelList.length,{pickResultType:s.PickResultType.COMPLETE,subchannel:t,status:null,onCallStarted:null,onCallEnded:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}}class p{constructor(e){this.channelControlHelper=e,this.subchannels=[],this.currentState=o.ConnectivityState.IDLE,this.currentReadyPicker=null,this.subchannelStateCounts={[o.ConnectivityState.CONNECTING]:0,[o.ConnectivityState.IDLE]:0,[o.ConnectivityState.READY]:0,[o.ConnectivityState.SHUTDOWN]:0,[o.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannelStateListener=(e,t,r)=>{this.subchannelStateCounts[t]-=1,this.subchannelStateCounts[r]+=1,this.calculateAndUpdateState(),r!==o.ConnectivityState.TRANSIENT_FAILURE&&r!==o.ConnectivityState.IDLE||(this.channelControlHelper.requestReresolution(),e.startConnecting())}}calculateAndUpdateState(){if(this.subchannelStateCounts[o.ConnectivityState.READY]>0){const e=this.subchannels.filter((e=>e.getConnectivityState()===o.ConnectivityState.READY));let t=0;null!==this.currentReadyPicker&&(t=e.indexOf(this.currentReadyPicker.peekNextSubchannel()),t<0&&(t=0)),this.updateState(o.ConnectivityState.READY,new h(e,t))}else this.subchannelStateCounts[o.ConnectivityState.CONNECTING]>0?this.updateState(o.ConnectivityState.CONNECTING,new s.QueuePicker(this)):this.subchannelStateCounts[o.ConnectivityState.TRANSIENT_FAILURE]>0?this.updateState(o.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker):this.updateState(o.ConnectivityState.IDLE,new s.QueuePicker(this))}updateState(e,t){l(o.ConnectivityState[this.currentState]+" -> "+o.ConnectivityState[e]),e===o.ConnectivityState.READY?this.currentReadyPicker=t:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(const e of this.subchannels)e.removeConnectivityStateListener(this.subchannelStateListener),e.unref(),this.channelControlHelper.removeChannelzChild(e.getChannelzRef());this.subchannelStateCounts={[o.ConnectivityState.CONNECTING]:0,[o.ConnectivityState.IDLE]:0,[o.ConnectivityState.READY]:0,[o.ConnectivityState.SHUTDOWN]:0,[o.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannels=[]}updateAddressList(e,t){this.resetSubchannelList(),l("Connect to address list "+e.map((e=>(0,i.subchannelAddressToString)(e)))),this.subchannels=e.map((e=>this.channelControlHelper.createSubchannel(e,{})));for(const e of this.subchannels){e.ref(),e.addConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.addChannelzChild(e.getChannelzRef());const t=e.getConnectivityState();this.subchannelStateCounts[t]+=1,t!==o.ConnectivityState.IDLE&&t!==o.ConnectivityState.TRANSIENT_FAILURE||e.startConnecting()}this.calculateAndUpdateState()}exitIdle(){for(const e of this.subchannels)e.startConnecting()}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return u}}t.RoundRobinLoadBalancer=p,t.setup=function(){(0,n.registerLoadBalancerType)(u,p,d)}},21192:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateLoadBalancingConfig=t.getFirstUsableConfig=t.isLoadBalancerNameRegistered=t.createLoadBalancer=t.registerDefaultLoadBalancerType=t.registerLoadBalancerType=t.createChildChannelControlHelper=void 0,t.createChildChannelControlHelper=function(e,t){var r,n,o,s,i,a,c,l,u,d;return{createSubchannel:null!==(n=null===(r=t.createSubchannel)||void 0===r?void 0:r.bind(t))&&void 0!==n?n:e.createSubchannel.bind(e),updateState:null!==(s=null===(o=t.updateState)||void 0===o?void 0:o.bind(t))&&void 0!==s?s:e.updateState.bind(e),requestReresolution:null!==(a=null===(i=t.requestReresolution)||void 0===i?void 0:i.bind(t))&&void 0!==a?a:e.requestReresolution.bind(e),addChannelzChild:null!==(l=null===(c=t.addChannelzChild)||void 0===c?void 0:c.bind(t))&&void 0!==l?l:e.addChannelzChild.bind(e),removeChannelzChild:null!==(d=null===(u=t.removeChannelzChild)||void 0===u?void 0:u.bind(t))&&void 0!==d?d:e.removeChannelzChild.bind(e)}};const r={};let n=null;t.registerLoadBalancerType=function(e,t,n){r[e]={LoadBalancer:t,LoadBalancingConfig:n}},t.registerDefaultLoadBalancerType=function(e){n=e},t.createLoadBalancer=function(e,t){const n=e.getLoadBalancerName();return n in r?new r[n].LoadBalancer(t):null},t.isLoadBalancerNameRegistered=function(e){return e in r},t.getFirstUsableConfig=function(e,t=!1){for(const t of e)if(t.getLoadBalancerName()in r)return t;return t&&n?new r[n].LoadBalancingConfig:null},t.validateLoadBalancingConfig=function(e){if(null===e||"object"!=typeof e)throw new Error("Load balancing config must be an object");const t=Object.keys(e);if(1!==t.length)throw new Error("Provided load balancing config has multiple conflicting entries");const n=t[0];if(n in r)return r[n].LoadBalancingConfig.createFromJson(e[n]);throw new Error(`Unrecognized load balancing config name ${n}`)}},89600:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadBalancingCall=void 0;const n=r(40207),o=r(53189),s=r(71128),i=r(14664),a=r(24219),c=r(95165),l=r(48626),u=r(64617),d=r(85158);t.LoadBalancingCall=class{constructor(e,t,r,n,o,s,i){var a,l;this.channel=e,this.callConfig=t,this.methodName=r,this.host=n,this.credentials=o,this.deadline=s,this.callNumber=i,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.pendingChildStatus=null,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null;const u=this.methodName.split("/");let d="";u.length>=2&&(d=u[1]);const h=null!==(l=null===(a=(0,c.splitHostPort)(this.host))||void 0===a?void 0:a.host)&&void 0!==l?l:"localhost";this.serviceUrl=`https://${h}/${d}`}trace(e){l.trace(o.LogVerbosity.DEBUG,"load_balancing_call","["+this.callNumber+"] "+e)}outputStatus(e,t){var r,n;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+e.code+' details="'+e.details+'"');const o=Object.assign(Object.assign({},e),{progress:t});null===(r=this.listener)||void 0===r||r.onReceiveStatus(o),null===(n=this.onCallEnded)||void 0===n||n.call(this,o.code)}}doPick(){var e,t;if(this.ended)return;if(!this.metadata)throw new Error("doPick called before start");const r=this.channel.doPick(this.metadata,this.callConfig.pickInformation),c=r.subchannel?"("+r.subchannel.getChannelzRef().id+") "+r.subchannel.getAddress():""+r.subchannel;switch(this.trace("Pick result: "+a.PickResultType[r.pickResultType]+" subchannel: "+c+" status: "+(null===(e=r.status)||void 0===e?void 0:e.code)+" "+(null===(t=r.status)||void 0===t?void 0:t.details)),r.pickResultType){case a.PickResultType.COMPLETE:this.credentials.generateMetadata({service_url:this.serviceUrl}).then((e=>{var t,a,l;const u=this.metadata.clone();if(u.merge(e),u.get("authorization").length>1&&this.outputStatus({code:o.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new i.Metadata},"PROCESSED"),r.subchannel.getConnectivityState()!==n.ConnectivityState.READY)return this.trace("Picked subchannel "+c+" has state "+n.ConnectivityState[r.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),void this.doPick();this.deadline!==1/0&&u.set("grpc-timeout",(0,s.getDeadlineTimeoutString)(this.deadline));try{this.child=r.subchannel.getRealSubchannel().createCall(u,this.host,this.methodName,{onReceiveMetadata:e=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(e)},onReceiveMessage:e=>{this.trace("Received message"),this.listener.onReceiveMessage(e)},onReceiveStatus:e=>{this.trace("Received status"),e.rstCode===d.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(e,"REFUSED"):this.outputStatus(e,"PROCESSED")}})}catch(e){return this.trace("Failed to start call on picked subchannel "+c+" with error "+e.message),void this.outputStatus({code:o.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+e.message,metadata:new i.Metadata},"NOT_STARTED")}null===(a=(t=this.callConfig).onCommitted)||void 0===a||a.call(t),null===(l=r.onCallStarted)||void 0===l||l.call(r),this.onCallEnded=r.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()}),(e=>{const{code:t,details:r}=(0,u.restrictControlPlaneStatusCode)("number"==typeof e.code?e.code:o.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${e.message}`);this.outputStatus({code:t,details:r,metadata:new i.Metadata},"PROCESSED")}));break;case a.PickResultType.DROP:const{code:e,details:t}=(0,u.restrictControlPlaneStatusCode)(r.status.code,r.status.details);this.outputStatus({code:e,details:t,metadata:r.status.metadata},"DROP");break;case a.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{const{code:e,details:t}=(0,u.restrictControlPlaneStatusCode)(r.status.code,r.status.details);this.outputStatus({code:e,details:t,metadata:r.status.metadata},"PROCESSED")}break;case a.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null===(r=this.child)||void 0===r||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new i.Metadata},"PROCESSED")}getPeer(){var e,t;return null!==(t=null===(e=this.child)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.listener=t,this.metadata=e,this.doPick()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.child.sendMessageWithContext(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){throw new Error("Method not implemented.")}getCallNumber(){return this.callNumber}}},48626:(e,t,r)=>{"use strict";var n,o,s,i;Object.defineProperty(t,"__esModule",{value:!0}),t.isTracerEnabled=t.trace=t.log=t.setLoggerVerbosity=t.setLogger=t.getLogger=void 0;const a=r(53189);let c={error:(e,...t)=>{console.error("E "+e,...t)},info:(e,...t)=>{console.error("I "+e,...t)},debug:(e,...t)=>{console.error("D "+e,...t)}},l=a.LogVerbosity.ERROR;switch((null!==(o=null!==(n=process.env.GRPC_NODE_VERBOSITY)&&void 0!==n?n:process.env.GRPC_VERBOSITY)&&void 0!==o?o:"").toUpperCase()){case"DEBUG":l=a.LogVerbosity.DEBUG;break;case"INFO":l=a.LogVerbosity.INFO;break;case"ERROR":l=a.LogVerbosity.ERROR;break;case"NONE":l=a.LogVerbosity.NONE}t.getLogger=()=>c,t.setLogger=e=>{c=e},t.setLoggerVerbosity=e=>{l=e},t.log=(e,...t)=>{let r;if(e>=l){switch(e){case a.LogVerbosity.DEBUG:r=c.debug;break;case a.LogVerbosity.INFO:r=c.info;break;case a.LogVerbosity.ERROR:r=c.error}r||(r=c.error),r&&r.bind(c)(...t)}};const u=null!==(i=null!==(s=process.env.GRPC_NODE_TRACE)&&void 0!==s?s:process.env.GRPC_TRACE)&&void 0!==i?i:"",d=new Set,h=new Set;for(const e of u.split(","))e.startsWith("-")?h.add(e.substring(1)):d.add(e);const p=d.has("all");function f(e){return!h.has(e)&&(p||d.has(e))}t.trace=function(e,r,n){f(r)&&(0,t.log)(e,(new Date).toISOString()+" | "+r+" | "+n)},t.isTracerEnabled=f},72011:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadPackageDefinition=t.makeClientConstructor=void 0;const n=r(8279),o={unary:n.Client.prototype.makeUnaryRequest,server_stream:n.Client.prototype.makeServerStreamRequest,client_stream:n.Client.prototype.makeClientStreamRequest,bidi:n.Client.prototype.makeBidiStreamRequest};function s(e){return["__proto__","prototype","constructor"].includes(e)}function i(e,t,r){r||(r={});class i extends n.Client{}return Object.keys(e).forEach((t=>{if(s(t))return;const r=e[t];let n;if("string"==typeof t&&"$"===t.charAt(0))throw new Error("Method names cannot start with $");n=r.requestStream?r.responseStream?"bidi":"client_stream":r.responseStream?"server_stream":"unary";const a=r.requestSerialize,c=r.responseDeserialize,l=function(e,t,r,n){return function(...o){return e.call(this,t,r,n,...o)}}(o[n],r.path,a,c);i.prototype[t]=l,Object.assign(i.prototype[t],r),r.originalName&&!s(r.originalName)&&(i.prototype[r.originalName]=i.prototype[t])})),i.service=e,i.serviceName=t,i}t.makeClientConstructor=i,t.loadPackageDefinition=function(e){const t={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n],a=n.split(".");if(a.some((e=>s(e))))continue;const c=a[a.length-1];let l=t;for(const e of a.slice(0,-1))l[e]||(l[e]={}),l=l[e];r=o,l[c]="format"in r?o:i(o,c,{})}var r;return t}},2829:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaxMessageSizeFilterFactory=t.MaxMessageSizeFilter=void 0;const n=r(56994),o=r(53189),s=r(14664);class i extends n.BaseFilter{constructor(e){super(),this.options=e,this.maxSendMessageSize=o.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=o.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,"grpc.max_send_message_length"in e&&(this.maxSendMessageSize=e["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in e&&(this.maxReceiveMessageSize=e["grpc.max_receive_message_length"])}async sendMessage(e){if(-1===this.maxSendMessageSize)return e;{const t=await e;if(t.message.length>this.maxSendMessageSize)throw{code:o.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${t.message.length} vs. ${this.maxSendMessageSize})`,metadata:new s.Metadata};return t}}async receiveMessage(e){if(-1===this.maxReceiveMessageSize)return e;{const t=await e;if(t.length>this.maxReceiveMessageSize)throw{code:o.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${t.length} vs. ${this.maxReceiveMessageSize})`,metadata:new s.Metadata};return t}}}t.MaxMessageSizeFilter=i,t.MaxMessageSizeFilterFactory=class{constructor(e){this.options=e}createFilter(){return new i(this.options)}}},14664:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;const n=r(48626),o=r(53189),s=r(15503),i=/^[0-9a-z_.-]+$/,a=/^[ -~]*$/;function c(e){return e.endsWith("-bin")}function l(e){return!e.startsWith("grpc-")}function u(e){return e.toLowerCase()}function d(e,t){if(!function(e){return i.test(e)}(e))throw new Error('Metadata key "'+e+'" contains illegal characters');if(null!=t)if(c(e)){if(!Buffer.isBuffer(t))throw new Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(t))throw new Error("keys that don't end with '-bin' must have String values");if(!function(e){return a.test(e)}(t))throw new Error('Metadata string value "'+t+'" contains illegal characters')}}class h{constructor(e={}){this.internalRepr=new Map,this.options=e}set(e,t){d(e=u(e),t),this.internalRepr.set(e,[t])}add(e,t){d(e=u(e),t);const r=this.internalRepr.get(e);void 0===r?this.internalRepr.set(e,[t]):r.push(t)}remove(e){e=u(e),this.internalRepr.delete(e)}get(e){return e=u(e),this.internalRepr.get(e)||[]}getMap(){const e={};for(const[t,r]of this.internalRepr)if(r.length>0){const n=r[0];e[t]=Buffer.isBuffer(n)?Buffer.from(n):n}return e}clone(){const e=new h(this.options),t=e.internalRepr;for(const[e,r]of this.internalRepr){const n=r.map((e=>Buffer.isBuffer(e)?Buffer.from(e):e));t.set(e,n)}return e}merge(e){for(const[t,r]of e.internalRepr){const e=(this.internalRepr.get(t)||[]).concat(r);this.internalRepr.set(t,e)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){const e={};for(const[t,r]of this.internalRepr)e[t]=r.map(p);return e}_getCoreRepresentation(){return this.internalRepr}toJSON(){const e={};for(const[t,r]of this.internalRepr)e[t]=r;return e}static fromHttp2Headers(e){const t=new h;for(const r of Object.keys(e)){if(":"===r.charAt(0))continue;const i=e[r];try{c(r)?Array.isArray(i)?i.forEach((e=>{t.add(r,Buffer.from(e,"base64"))})):void 0!==i&&(l(r)?i.split(",").forEach((e=>{t.add(r,Buffer.from(e.trim(),"base64"))})):t.add(r,Buffer.from(i,"base64"))):Array.isArray(i)?i.forEach((e=>{t.add(r,e)})):void 0!==i&&t.add(r,i)}catch(e){const t=`Failed to add metadata entry ${r}: ${i}. ${(0,s.getErrorMessage)(e)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,n.log)(o.LogVerbosity.ERROR,t)}}return t}}t.Metadata=h;const p=e=>Buffer.isBuffer(e)?e.toString("base64"):e},24219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueuePicker=t.UnavailablePicker=t.PickResultType=void 0;const n=r(14664),o=r(53189);var s;!function(e){e[e.COMPLETE=0]="COMPLETE",e[e.QUEUE=1]="QUEUE",e[e.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",e[e.DROP=3]="DROP"}(s=t.PickResultType||(t.PickResultType={})),t.UnavailablePicker=class{constructor(e){this.status=void 0!==e?e:{code:o.Status.UNAVAILABLE,details:"No connection established",metadata:new n.Metadata}}pick(e){return{pickResultType:s.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}},t.QueuePicker=class{constructor(e){this.loadBalancer=e,this.calledExitIdle=!1}pick(e){return this.calledExitIdle||(process.nextTick((()=>{this.loadBalancer.exitIdle()})),this.calledExitIdle=!0),{pickResultType:s.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}}},56982:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;const n=r(83513),o=r(9523),s=r(73837),i=r(80235),a=r(53189),c=r(14664),l=r(48626),u=r(53189),d=r(95165),h=r(41808),p=r(43510);function f(e){l.trace(u.LogVerbosity.DEBUG,"dns_resolver",e)}const g=s.promisify(o.resolveTxt),m=s.promisify(o.lookup);class y{constructor(e,t,r){var n,o,s;this.target=e,this.listener=t,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,f("Resolver constructed for target "+(0,d.uriToString)(e));const i=(0,d.splitHostPort)(e.path);null===i?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,h.isIPv4)(i.host)||(0,h.isIPv6)(i.host)?(this.ipResult=[{host:i.host,port:null!==(n=i.port)&&void 0!==n?n:443}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=i.host,this.port=null!==(o=i.port)&&void 0!==o?o:443),this.percentage=100*Math.random(),1===r["grpc.service_config_disable_resolution"]&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:a.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,d.uriToString)(this.target)}`,metadata:new c.Metadata};const l={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoff=new p.BackoffTimeout((()=>{this.continueResolving&&this.startResolutionWithBackoff()}),l),this.backoff.unref(),this.minTimeBetweenResolutionsMs=null!==(s=r["grpc.dns_min_time_between_resolutions_ms"])&&void 0!==s?s:3e4,this.nextResolutionTimer=setTimeout((()=>{}),0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(null!==this.ipResult)return f("Returning IP address for target "+(0,d.uriToString)(this.target)),setImmediate((()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})})),this.backoff.stop(),void this.backoff.reset();if(null===this.dnsHostname)f("Failed to parse DNS address "+(0,d.uriToString)(this.target)),setImmediate((()=>{this.listener.onError({code:a.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,d.uriToString)(this.target)}`,metadata:new c.Metadata})})),this.stopNextResolutionTimer();else{if(null!==this.pendingLookupPromise)return;f("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;const e=this.dnsHostname;this.pendingLookupPromise=m(e,{all:!0}),this.pendingLookupPromise.then((e=>{this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop();const t=e.filter((e=>4===e.family)),r=e.filter((e=>6===e.family));this.latestLookupResult=function(...e){const t=[];for(let r=0;r<Math.max.apply(null,e.map((e=>e.length)));r++)for(const n of e)r<n.length&&t.push(n[r]);return t}(r,t).map((e=>({host:e.address,port:+this.port})));const n="["+this.latestLookupResult.map((e=>e.host+":"+e.port)).join(",")+"]";f("Resolved addresses for target "+(0,d.uriToString)(this.target)+": "+n),0!==this.latestLookupResult.length?this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{}):this.listener.onError(this.defaultResolutionError)}),(e=>{f("Resolution error for target "+(0,d.uriToString)(this.target)+": "+e.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError)})),this.isServiceConfigEnabled&&null===this.pendingTxtPromise&&(this.pendingTxtPromise=g(e),this.pendingTxtPromise.then((e=>{this.pendingTxtPromise=null;try{this.latestServiceConfig=(0,i.extractAndSelectServiceConfig)(e,this.percentage)}catch(e){this.latestServiceConfigError={code:a.Status.UNAVAILABLE,details:"Parsing service config failed",metadata:new c.Metadata}}null!==this.latestLookupResult&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}),(e=>{})))}}startNextResolutionTimer(){var e,t;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=null===(t=(e=setTimeout((()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()}),this.minTimeBetweenResolutionsMs)).unref)||void 0===t?void 0:t.call(e),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){null===this.pendingLookupPromise&&(this.continueResolving=!1,this.startResolution(),this.backoff.runOnce(),this.startNextResolutionTimer())}updateResolution(){null===this.pendingLookupPromise&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?this.continueResolving=!0:this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.stop(),this.stopNextResolutionTimer()}static getDefaultAuthority(e){return e.path}}t.setup=function(){(0,n.registerResolver)("dns",y),(0,n.registerDefaultScheme)("dns")}},38733:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;const n=r(41808),o=r(53189),s=r(14664),i=r(83513),a=r(95165),c=r(48626);function l(e){c.trace(o.LogVerbosity.DEBUG,"ip_resolver",e)}const u="ipv4",d="ipv6";class h{constructor(e,t,r){var i;this.target=e,this.listener=t,this.addresses=[],this.error=null,l("Resolver constructed for target "+(0,a.uriToString)(e));const c=[];if(e.scheme!==u&&e.scheme!==d)return void(this.error={code:o.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new s.Metadata});const h=e.path.split(",");for(const t of h){const r=(0,a.splitHostPort)(t);if(null===r)return void(this.error={code:o.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new s.Metadata});if(e.scheme===u&&!(0,n.isIPv4)(r.host)||e.scheme===d&&!(0,n.isIPv6)(r.host))return void(this.error={code:o.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new s.Metadata});c.push({host:r.host,port:null!==(i=r.port)&&void 0!==i?i:443})}this.addresses=c,l("Parsed "+e.scheme+" address list "+this.addresses)}updateResolution(){process.nextTick((()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})}))}destroy(){}static getDefaultAuthority(e){return e.path.split(",")[0]}}t.setup=function(){(0,i.registerResolver)(u,h),(0,i.registerResolver)(d,h)}},91350:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;const n=r(83513);class o{constructor(e,t,r){let n;this.listener=t,this.addresses=[],n=""===e.authority?"/"+e.path:e.path,this.addresses=[{path:n}]}updateResolution(){process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{})}destroy(){}static getDefaultAuthority(e){return"localhost"}}t.setup=function(){(0,n.registerResolver)("unix",o)}},83513:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapUriDefaultScheme=t.getDefaultAuthority=t.createResolver=t.registerDefaultScheme=t.registerResolver=void 0;const n=r(95165),o={};let s=null;t.registerResolver=function(e,t){o[e]=t},t.registerDefaultScheme=function(e){s=e},t.createResolver=function(e,t,r){if(void 0!==e.scheme&&e.scheme in o)return new o[e.scheme](e,t,r);throw new Error(`No resolver could be created for target ${(0,n.uriToString)(e)}`)},t.getDefaultAuthority=function(e){if(void 0!==e.scheme&&e.scheme in o)return o[e.scheme].getDefaultAuthority(e);throw new Error(`Invalid target ${(0,n.uriToString)(e)}`)},t.mapUriDefaultScheme=function(e){return void 0!==e.scheme&&e.scheme in o?e:null!==s?{scheme:s,authority:void 0,path:(0,n.uriToString)(e)}:null}},44692:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingCall=void 0;const n=r(53189),o=r(71128),s=r(14664),i=r(48626),a=r(64617);t.ResolvingCall=class{constructor(e,t,r,s,i,a){this.channel=e,this.method=t,this.filterStackFactory=s,this.credentials=i,this.callNumber=a,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout((()=>{}),0),this.filterStack=null,this.deadline=r.deadline,this.host=r.host,r.parentCall&&(r.flags&n.Propagate.CANCELLATION&&r.parentCall.on("cancelled",(()=>{this.cancelWithStatus(n.Status.CANCELLED,"Cancelled by parent call")})),r.flags&n.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+r.parentCall.getDeadline()),this.deadline=(0,o.minDeadline)(this.deadline,r.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace(e){i.trace(n.LogVerbosity.DEBUG,"resolving_call","["+this.callNumber+"] "+e)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.trace("Deadline: "+(0,o.deadlineToString)(this.deadline));const e=(0,o.getRelativeTimeout)(this.deadline);if(e!==1/0){this.trace("Deadline will be reached in "+e+"ms");const t=()=>{this.cancelWithStatus(n.Status.DEADLINE_EXCEEDED,"Deadline exceeded")};e<=0?process.nextTick(t):this.deadlineTimer=setTimeout(t,e)}}outputStatus(e){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);const t=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+t.code+' details="'+t.details+'"'),this.statusWatchers.forEach((e=>e(t))),process.nextTick((()=>{var e;null===(e=this.listener)||void 0===e||e.onReceiveStatus(t)}))}}sendMessageOnChild(e,t){if(!this.child)throw new Error("sendMessageonChild called with child not populated");const r=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:t,flags:e.flags})).then((t=>{this.writeFilterPending=!1,r.sendMessageWithContext(e,t.message),this.pendingHalfClose&&r.halfClose()}),(e=>{this.cancelWithStatus(e.code,e.details)}))}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw new Error("getConfig called before start");const e=this.channel.getConfig(this.method,this.metadata);if("NONE"===e.type)return void this.channel.queueCallForConfig(this);if("ERROR"===e.type)return void(this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e.error));const t=e.config;if(t.status===n.Status.OK){if(t.methodConfig.timeout){const e=new Date;e.setSeconds(e.getSeconds()+t.methodConfig.timeout.seconds),e.setMilliseconds(e.getMilliseconds()+t.methodConfig.timeout.nanos/1e6),this.deadline=(0,o.minDeadline)(this.deadline,e),this.runDeadlineTimer()}this.filterStackFactory.push(t.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then((e=>{this.child=this.channel.createInnerCall(t,this.method,this.host,this.credentials,this.deadline),this.child.start(e,{onReceiveMetadata:e=>{this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(e))},onReceiveMessage:e=>{this.readFilterPending=!0,this.filterStack.receiveMessage(e).then((e=>{this.readFilterPending=!1,this.listener.onReceiveMessage(e),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)}),(e=>{this.cancelWithStatus(e.code,e.details)}))},onReceiveStatus:e=>{this.readFilterPending?this.pendingChildStatus=e:this.outputStatus(e)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()}),(e=>{this.outputStatus(e)}))}else{const{code:e,details:r}=(0,a.restrictControlPlaneStatusCode)(t.status,"Failed to route call to method "+this.method);this.outputStatus({code:e,details:r,metadata:new s.Metadata})}}reportResolverError(e){var t;(null===(t=this.metadata)||void 0===t?void 0:t.getOptions().waitForReady)?this.channel.queueCallForConfig(this):this.outputStatus(e)}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null===(r=this.child)||void 0===r||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new s.Metadata})}getPeer(){var e,t;return null!==(t=null===(e=this.child)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.metadata=e.clone(),this.listener=t,this.getConfig()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.sendMessageOnChild(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){this.credentials=this.credentials.compose(e)}addStatusWatcher(e){this.statusWatchers.push(e)}getCallNumber(){return this.callNumber}}},83970:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingLoadBalancer=void 0;const n=r(21192),o=r(80235),s=r(40207),i=r(83513),a=r(24219),c=r(43510),l=r(53189),u=r(14664),d=r(48626),h=r(53189),p=r(95165),f=r(44487);t.ResolvingLoadBalancer=class{constructor(e,t,r,d,h){this.target=e,this.channelControlHelper=t,this.channelOptions=r,this.onSuccessfulResolution=d,this.onFailedResolution=h,this.latestChildState=s.ConnectivityState.IDLE,this.latestChildPicker=new a.QueuePicker(this),this.currentState=s.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,r["grpc.service_config"]?this.defaultServiceConfig=(0,o.validateServiceConfig)(JSON.parse(r["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(s.ConnectivityState.IDLE,new a.QueuePicker(this)),this.childLoadBalancer=new f.ChildLoadBalancerHandler({createSubchannel:t.createSubchannel.bind(t),requestReresolution:()=>{this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()},updateState:(e,t)=>{this.latestChildState=e,this.latestChildPicker=t,this.updateState(e,t)},addChannelzChild:t.addChannelzChild.bind(t),removeChannelzChild:t.removeChannelzChild.bind(t)}),this.innerResolver=(0,i.createResolver)(e,{onSuccessfulResolution:(e,t,r,o,s)=>{var i;let a=null;null===t?null===r?(this.previousServiceConfig=null,a=this.defaultServiceConfig):null===this.previousServiceConfig?this.handleResolutionFailure(r):a=this.previousServiceConfig:(a=t,this.previousServiceConfig=t);const c=null!==(i=null==a?void 0:a.loadBalancingConfig)&&void 0!==i?i:[],d=(0,n.getFirstUsableConfig)(c,!0);if(null===d)return void this.handleResolutionFailure({code:l.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new u.Metadata});this.childLoadBalancer.updateAddressList(e,d,s);const h=null!=a?a:this.defaultServiceConfig;this.onSuccessfulResolution(h,null!=o?o:function(e){return function(t,r){var n,o;const s=t.split("/").filter((e=>e.length>0)),i=null!==(n=s[0])&&void 0!==n?n:"",a=null!==(o=s[1])&&void 0!==o?o:"";if(e&&e.methodConfig)for(const t of e.methodConfig)for(const e of t.name)if(e.service===i&&(void 0===e.method||e.method===a))return{methodConfig:t,pickInformation:{},status:l.Status.OK,dynamicFilterFactories:[]};return{methodConfig:{name:[]},pickInformation:{},status:l.Status.OK,dynamicFilterFactories:[]}}}(h))},onError:e=>{this.handleResolutionFailure(e)}},r);const p={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new c.BackoffTimeout((()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker)}),p),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===s.ConnectivityState.IDLE&&this.updateState(s.ConnectivityState.CONNECTING,new a.QueuePicker(this)),this.backoffTimeout.runOnce()}updateState(e,t){var r;r=(0,p.uriToString)(this.target)+" "+s.ConnectivityState[this.currentState]+" -> "+s.ConnectivityState[e],d.trace(h.LogVerbosity.DEBUG,"resolving_load_balancer",r),e===s.ConnectivityState.IDLE&&(t=new a.QueuePicker(this)),this.currentState=e,this.channelControlHelper.updateState(e,t)}handleResolutionFailure(e){this.latestChildState===s.ConnectivityState.IDLE&&(this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new a.UnavailablePicker(e)),this.onFailedResolution(e))}exitIdle(){this.currentState!==s.ConnectivityState.IDLE&&this.currentState!==s.ConnectivityState.TRANSIENT_FAILURE||(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(e,t){throw new Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.updateState(s.ConnectivityState.SHUTDOWN,new a.UnavailablePicker)}getTypeName(){return"resolving_load_balancer"}}},30859:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RetryingCall=t.MessageBufferTracker=t.RetryThrottler=void 0;const n=r(53189),o=r(14664),s=r(48626);t.RetryThrottler=class{constructor(e,t,r){this.maxTokens=e,this.tokenRatio=t,this.tokens=r?r.tokens*(e/r.maxTokens):e}addCallSucceeded(){this.tokens=Math.max(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.min(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}},t.MessageBufferTracker=class{constructor(e,t){this.totalLimit=e,this.limitPerCall=t,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(e,t){var r;const n=null!==(r=this.allocatedPerCall.get(t))&&void 0!==r?r:0;return!(this.limitPerCall-n<e||this.totalLimit-this.totalAllocated<e||(this.allocatedPerCall.set(t,n+e),this.totalAllocated+=e,0))}free(e,t){var r;if(this.totalAllocated<e)throw new Error(`Invalid buffer allocation state: call ${t} freed ${e} > total allocated ${this.totalAllocated}`);this.totalAllocated-=e;const n=null!==(r=this.allocatedPerCall.get(t))&&void 0!==r?r:0;if(n<e)throw new Error(`Invalid buffer allocation state: call ${t} freed ${e} > allocated for call ${n}`);this.allocatedPerCall.set(t,n-e)}freeAll(e){var t;const r=null!==(t=this.allocatedPerCall.get(e))&&void 0!==t?t:0;if(this.totalAllocated<r)throw new Error(`Invalid buffer allocation state: call ${e} allocated ${r} > total allocated ${this.totalAllocated}`);this.totalAllocated-=r,this.allocatedPerCall.delete(e)}};const i="grpc-previous-rpc-attempts";t.RetryingCall=class{constructor(e,t,r,n,o,s,i,a,c){if(this.channel=e,this.callConfig=t,this.methodName=r,this.host=n,this.credentials=o,this.deadline=s,this.callNumber=i,this.bufferTracker=a,this.retryThrottler=c,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0,t.methodConfig.retryPolicy){this.state="RETRY";const e=t.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(e.initialBackoff.substring(0,e.initialBackoff.length-1))}else t.methodConfig.hedgingPolicy?this.state="HEDGING":this.state="TRANSPARENT_ONLY"}getCallNumber(){return this.callNumber}trace(e){s.trace(n.LogVerbosity.DEBUG,"retrying_call","["+this.callNumber+"] "+e)}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'"'),this.bufferTracker.freeAll(this.callNumber);for(let e=0;e<this.writeBuffer.length;e++)"MESSAGE"===this.writeBuffer[e].entryType&&(this.writeBuffer[e]={entryType:"FREED",allocated:!1});process.nextTick((()=>{var t;null===(t=this.listener)||void 0===t||t.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata})}))}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.reportStatus({code:e,details:t,metadata:new o.Metadata});for(const{call:r}of this.underlyingCalls)r.cancelWithStatus(e,t)}getPeer(){return null!==this.committedCallIndex?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}maybefreeMessageBufferEntry(e){if("COMMITTED"!==this.state)return;const t=this.writeBuffer[e];"MESSAGE"===t.entryType&&(t.allocated&&this.bufferTracker.free(t.message.message.length,this.callNumber),this.writeBuffer[e]={entryType:"FREED",allocated:!1})}commitCall(e){if("COMMITTED"!==this.state&&"COMPLETED"!==this.underlyingCalls[e].state){this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e),this.state="COMMITTED",this.committedCallIndex=e;for(let t=0;t<this.underlyingCalls.length;t++)t!==e&&"COMPLETED"!==this.underlyingCalls[t].state&&(this.underlyingCalls[t].state="COMPLETED",this.underlyingCalls[t].call.cancelWithStatus(n.Status.CANCELLED,"Discarded in favor of other hedged attempt"));for(let t=0;t<this.underlyingCalls[e].nextMessageToSend-1;t+=1)this.maybefreeMessageBufferEntry(t)}}commitCallWithMostMessages(){if("COMMITTED"===this.state)return;let e=-1,t=-1;for(const[r,n]of this.underlyingCalls.entries())"ACTIVE"===n.state&&n.nextMessageToSend>e&&(e=n.nextMessageToSend,t=r);-1===t?this.state="TRANSPARENT_ONLY":this.commitCall(t)}isStatusCodeInList(e,t){return e.some((e=>e===t||e.toString().toLowerCase()===n.Status[t].toLowerCase()))}getNextRetryBackoffMs(){var e;const t=null===(e=this.callConfig)||void 0===e?void 0:e.methodConfig.retryPolicy;if(!t)return 0;const r=Math.random()*this.nextRetryBackoffSec*1e3,n=Number(t.maxBackoff.substring(0,t.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*t.backoffMultiplier,n),r}maybeRetryCall(e,t){if("RETRY"!==this.state)return void t(!1);const r=this.callConfig.methodConfig.retryPolicy;if(this.attempts>=Math.min(r.maxAttempts,5))return void t(!1);let n;if(null===e)n=this.getNextRetryBackoffMs();else{if(e<0)return this.state="TRANSPARENT_ONLY",void t(!1);n=e,this.nextRetryBackoffSec=this.initialRetryBackoffSec}setTimeout((()=>{var e,r;"RETRY"===this.state?(null===(r=null===(e=this.retryThrottler)||void 0===e?void 0:e.canRetryCall())||void 0===r||r)&&(t(!0),this.attempts+=1,this.startNewAttempt()):t(!1)}),n)}countActiveCalls(){let e=0;for(const t of this.underlyingCalls)"ACTIVE"===(null==t?void 0:t.state)&&(e+=1);return e}handleProcessedStatus(e,t,r){var n,o,s;switch(this.state){case"COMMITTED":case"TRANSPARENT_ONLY":this.commitCall(t),this.reportStatus(e);break;case"HEDGING":if(this.isStatusCodeInList(null!==(n=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)&&void 0!==n?n:[],e.code)){let n;if(null===(o=this.retryThrottler)||void 0===o||o.addCallFailed(),null===r)n=0;else{if(r<0)return this.state="TRANSPARENT_ONLY",this.commitCall(t),void this.reportStatus(e);n=r}setTimeout((()=>{this.maybeStartHedgingAttempt(),0===this.countActiveCalls()&&(this.commitCall(t),this.reportStatus(e))}),n)}else this.commitCall(t),this.reportStatus(e);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)?(null===(s=this.retryThrottler)||void 0===s||s.addCallFailed(),this.maybeRetryCall(r,(r=>{r||(this.commitCall(t),this.reportStatus(e))}))):(this.commitCall(t),this.reportStatus(e))}}getPushback(e){const t=e.get("grpc-retry-pushback-ms");if(0===t.length)return null;try{return parseInt(t[0])}catch(e){return-1}}handleChildStatus(e,t){var r;if("COMPLETED"===this.underlyingCalls[t].state)return;if(this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[t].call.getCallNumber()+"] in state "+this.underlyingCalls[t].state),this.underlyingCalls[t].state="COMPLETED",e.code===n.Status.OK)return null===(r=this.retryThrottler)||void 0===r||r.addCallSucceeded(),this.commitCall(t),void this.reportStatus(e);if("COMMITTED"===this.state)return void this.reportStatus(e);const o=this.getPushback(e.metadata);switch(e.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(e,t,o):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(t),this.reportStatus(e);break;case"PROCESSED":this.handleProcessedStatus(e,t,o)}}maybeStartHedgingAttempt(){if("HEDGING"!==this.state)return;if(!this.callConfig.methodConfig.hedgingPolicy)return;const e=this.callConfig.methodConfig.hedgingPolicy;this.attempts>=Math.min(e.maxAttempts,5)||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer())}maybeStartHedgingTimer(){var e,t,r;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),"HEDGING"!==this.state)return;if(!this.callConfig.methodConfig.hedgingPolicy)return;const n=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=Math.min(n.maxAttempts,5))return;const o=null!==(e=n.hedgingDelay)&&void 0!==e?e:"0s",s=Number(o.substring(0,o.length-1));this.hedgingTimer=setTimeout((()=>{this.maybeStartHedgingAttempt()}),1e3*s),null===(r=(t=this.hedgingTimer).unref)||void 0===r||r.call(t)}startNewAttempt(){const e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);const t=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0});const r=this.attempts-1,n=this.initialMetadata.clone();r>0&&n.set(i,`${r}`);let o=!1;e.start(n,{onReceiveMetadata:n=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]"),this.commitCall(t),o=!0,r>0&&n.set(i,`${r}`),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMetadata(n)},onReceiveMessage:r=>{this.trace("Received message from child ["+e.getCallNumber()+"]"),this.commitCall(t),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMessage(r)},onReceiveStatus:n=>{this.trace("Received status from child ["+e.getCallNumber()+"]"),!o&&r>0&&n.metadata.set(i,`${r}`),this.handleChildStatus(n,t)}}),this.sendNextChildMessage(t),this.readStarted&&e.startRead()}start(e,t){this.trace("start called"),this.listener=t,this.initialMetadata=e,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(e){var t,r;const n=this.underlyingCalls[e],o=n.nextMessageToSend;null===(r=(t=this.writeBuffer[o]).callback)||void 0===r||r.call(t),this.maybefreeMessageBufferEntry(o),n.nextMessageToSend+=1,this.sendNextChildMessage(e)}sendNextChildMessage(e){const t=this.underlyingCalls[e];if("COMPLETED"!==t.state&&this.writeBuffer[t.nextMessageToSend]){const r=this.writeBuffer[t.nextMessageToSend];switch(r.entryType){case"MESSAGE":t.call.sendMessageWithContext({callback:t=>{this.handleChildWriteCompleted(e)}},r.message.message);break;case"HALF_CLOSE":t.nextMessageToSend+=1,t.call.halfClose()}}}sendMessageWithContext(e,t){var r;this.trace("write() called with message of length "+t.length);const n={message:t,flags:e.flags},o=this.writeBuffer.length,s={entryType:"MESSAGE",message:n,allocated:this.bufferTracker.allocate(t.length,this.callNumber)};if(this.writeBuffer[o]=s,s.allocated){null===(r=e.callback)||void 0===r||r.call(e);for(const[e,r]of this.underlyingCalls.entries())"ACTIVE"===r.state&&r.nextMessageToSend===o&&r.call.sendMessageWithContext({callback:t=>{this.handleChildWriteCompleted(e)}},t)}else{if(this.commitCallWithMostMessages(),null===this.committedCallIndex)return;const r=this.underlyingCalls[this.committedCallIndex];s.callback=e.callback,"ACTIVE"===r.state&&r.nextMessageToSend===o&&r.call.sendMessageWithContext({callback:e=>{this.handleChildWriteCompleted(this.committedCallIndex)}},t)}}startRead(){this.trace("startRead called"),this.readStarted=!0;for(const e of this.underlyingCalls)"ACTIVE"===(null==e?void 0:e.state)&&e.call.startRead()}halfClose(){this.trace("halfClose called");const e=this.writeBuffer.length;this.writeBuffer[e]={entryType:"HALF_CLOSE",allocated:!1};for(const t of this.underlyingCalls)"ACTIVE"===(null==t?void 0:t.state)&&t.nextMessageToSend===e&&(t.nextMessageToSend+=1,t.call.halfClose())}setCredentials(e){throw new Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}}},40777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2ServerCallStream=t.ServerDuplexStreamImpl=t.ServerWritableStreamImpl=t.ServerReadableStreamImpl=t.ServerUnaryCallImpl=void 0;const n=r(82361),o=r(85158),s=r(12781),i=r(59796),a=r(73837),c=r(53189),l=r(14664),u=r(91524),d=r(48626),h=r(15503),p="server_call",f=(0,a.promisify)(i.unzip),g=(0,a.promisify)(i.inflate);function m(e){d.trace(c.LogVerbosity.DEBUG,p,e)}const y="grpc-message",v="grpc-status",_="grpc-timeout",b=/(\d{1,8})\s*([HMSmun])/,S={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},E={"grpc-accept-encoding":"identity,deflate,gzip","grpc-encoding":"identity"},w={[o.constants.HTTP2_HEADER_STATUS]:o.constants.HTTP_STATUS_OK,[o.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},A={waitForTrailers:!0};class T extends n.EventEmitter{constructor(e,t,r){super(),this.call=e,this.metadata=t,this.request=r,this.cancelled=!1,this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}t.ServerUnaryCallImpl=T;class C extends s.Readable{constructor(e,t,r,n){super({objectMode:!0}),this.call=e,this.metadata=t,this.deserialize=r,this.cancelled=!1,this.call.setupSurfaceCall(this),this.call.setupReadable(this,n)}_read(e){this.call.consumeUnpushedMessages(this)&&this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}t.ServerReadableStreamImpl=C;class I extends s.Writable{constructor(e,t,r,n){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.request=n,this.cancelled=!1,this.trailingMetadata=new l.Metadata,this.call.setupSurfaceCall(this),this.on("error",(e=>{this.call.sendError(e),this.end()}))}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write(e,t,r){try{const t=this.call.serializeMessage(e);if(!this.call.write(t))return void this.call.once("drain",r)}catch(e){this.emit("error",{details:(0,h.getErrorMessage)(e),code:c.Status.INTERNAL})}r()}_final(e){this.call.sendStatus({code:c.Status.OK,details:"OK",metadata:this.trailingMetadata}),e(null)}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerWritableStreamImpl=I;class R extends s.Duplex{constructor(e,t,r,n,o){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.deserialize=n,this.cancelled=!1,this.trailingMetadata=new l.Metadata,this.call.setupSurfaceCall(this),this.call.setupReadable(this,o),this.on("error",(e=>{this.call.sendError(e),this.end()}))}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerDuplexStreamImpl=R,R.prototype._read=C.prototype._read,R.prototype._write=I.prototype._write,R.prototype._final=I.prototype._final;class O extends n.EventEmitter{constructor(e,t,r){super(),this.stream=e,this.handler=t,this.options=r,this.cancelled=!1,this.deadlineTimer=null,this.statusSent=!1,this.deadline=1/0,this.wantTrailers=!1,this.metadataSent=!1,this.canPush=!1,this.isPushPending=!1,this.bufferedMessages=[],this.messagesToPush=[],this.maxSendMessageSize=c.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=c.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.stream.once("error",(e=>{})),this.stream.once("close",(()=>{var e;m("Request to method "+(null===(e=this.handler)||void 0===e?void 0:e.path)+" stream closed with rstCode "+this.stream.rstCode),this.statusSent||(this.cancelled=!0,this.emit("cancelled","cancelled"),this.emit("streamEnd",!1),this.sendStatus({code:c.Status.CANCELLED,details:"Cancelled by client",metadata:null}))})),this.stream.on("drain",(()=>{this.emit("drain")})),"grpc.max_send_message_length"in r&&(this.maxSendMessageSize=r["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in r&&(this.maxReceiveMessageSize=r["grpc.max_receive_message_length"])}checkCancelled(){return(this.stream.destroyed||this.stream.closed)&&(this.cancelled=!0),this.cancelled}getDecompressedMessage(e,t){return"deflate"===t?g(e.subarray(5)):"gzip"===t?f(e.subarray(5)):"identity"===t?e.subarray(5):Promise.reject({code:c.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${t}"`})}sendMetadata(e){if(this.checkCancelled())return;if(this.metadataSent)return;this.metadataSent=!0;const t=e?e.toHttp2Headers():null,r=Object.assign(Object.assign(Object.assign({},w),E),t);this.stream.respond(r,A)}receiveMetadata(e){const t=l.Metadata.fromHttp2Headers(e);d.isTracerEnabled(p)&&m("Request to "+this.handler.path+" received headers "+JSON.stringify(t.toJSON()));const r=t.get(_);if(r.length>0){const e=r[0].toString().match(b);if(null===e){const e=new Error("Invalid deadline");return e.code=c.Status.OUT_OF_RANGE,this.sendError(e),t}const n=+e[1]*S[e[2]]|0,o=new Date;this.deadline=o.setMilliseconds(o.getMilliseconds()+n),this.deadlineTimer=setTimeout(k,n,this),t.remove(_)}return t.remove(o.constants.HTTP2_HEADER_ACCEPT_ENCODING),t.remove(o.constants.HTTP2_HEADER_TE),t.remove(o.constants.HTTP2_HEADER_CONTENT_TYPE),t.remove("grpc-accept-encoding"),t}receiveUnaryMessage(e,t){const{stream:r}=this;let n=0;const o=this,s=[],i=this.maxReceiveMessageSize;function a(e){if(n+=e.byteLength,-1!==i&&n>i)return r.removeListener("data",a),r.removeListener("end",l),r.removeListener("error",l),void t({code:c.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${n} vs. ${i})`});s.push(e)}function l(i){if(r.removeListener("data",a),r.removeListener("end",l),r.removeListener("error",l),void 0!==i)return void t({code:c.Status.INTERNAL,details:i.message});if(0===n)return void t({code:c.Status.INTERNAL,details:"received empty unary message"});o.emit("receiveMessage");const u=Buffer.concat(s,n),d=1===u.readUInt8(0)?e:"identity",h=o.getDecompressedMessage(u,d);Buffer.isBuffer(h)?o.safeDeserializeMessage(h,t):h.then((e=>o.safeDeserializeMessage(e,t)),(r=>t(r.code?r:{code:c.Status.INTERNAL,details:`Received "grpc-encoding" header "${e}" but ${e} decompression failed`})))}r.on("data",a),r.on("end",l),r.on("error",l)}safeDeserializeMessage(e,t){try{t(null,this.deserializeMessage(e))}catch(e){t({details:(0,h.getErrorMessage)(e),code:c.Status.INTERNAL})}}serializeMessage(e){const t=this.handler.serialize(e),r=t.byteLength,n=Buffer.allocUnsafe(r+5);return n.writeUInt8(0,0),n.writeUInt32BE(r,1),t.copy(n,5),n}deserializeMessage(e){return this.handler.deserialize(e)}async sendUnaryMessage(e,t,r,n){if(!this.checkCancelled()){if(void 0===r&&(r=null),e)return!Object.prototype.hasOwnProperty.call(e,"metadata")&&r&&(e.metadata=r),void this.sendError(e);try{const e=this.serializeMessage(t);this.write(e),this.sendStatus({code:c.Status.OK,details:"OK",metadata:r})}catch(e){this.sendError({details:(0,h.getErrorMessage)(e),code:c.Status.INTERNAL})}}}sendStatus(e){var t,r;if(this.emit("callEnd",e.code),this.emit("streamEnd",e.code===c.Status.OK),!this.checkCancelled())if(m("Request to method "+(null===(t=this.handler)||void 0===t?void 0:t.path)+" ended with status code: "+c.Status[e.code]+" details: "+e.details),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.headersSent)this.wantTrailers||(this.wantTrailers=!0,this.stream.once("wantTrailers",(()=>{var t;const r=Object.assign({[v]:e.code,[y]:encodeURI(e.details)},null===(t=e.metadata)||void 0===t?void 0:t.toHttp2Headers());this.stream.sendTrailers(r),this.statusSent=!0})),this.stream.end());else{const t=Object.assign(Object.assign({[v]:e.code,[y]:encodeURI(e.details)},w),null===(r=e.metadata)||void 0===r?void 0:r.toHttp2Headers());this.stream.respond(t,{endStream:!0}),this.statusSent=!0}}sendError(e){const t={code:c.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:"metadata"in e&&void 0!==e.metadata?e.metadata:null};"code"in e&&"number"==typeof e.code&&Number.isInteger(e.code)&&(t.code=e.code,"details"in e&&"string"==typeof e.details&&(t.details=e.details)),this.sendStatus(t)}write(e){if(!this.checkCancelled()){if(!(-1!==this.maxSendMessageSize&&e.length>this.maxSendMessageSize))return this.sendMetadata(),this.emit("sendMessage"),this.stream.write(e);this.sendError({code:c.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${e.length} vs. ${this.maxSendMessageSize})`})}}resume(){this.stream.resume()}setupSurfaceCall(e){this.once("cancelled",(t=>{e.cancelled=!0,e.emit("cancelled",t)})),this.once("callEnd",(t=>e.emit("callEnd",t)))}setupReadable(e,t){const r=new u.StreamDecoder;let n=!1,o=!1,s=!1;const i=()=>{s||!n||o||(s=!0,this.pushOrBufferMessage(e,null))};this.stream.on("data",(async n=>{const s=r.write(n);o=!0,this.stream.pause();for(const r of s){if(-1!==this.maxReceiveMessageSize&&r.length>this.maxReceiveMessageSize)return void this.sendError({code:c.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${r.length} vs. ${this.maxReceiveMessageSize})`});this.emit("receiveMessage");const n=1===r.readUInt8(0)?t:"identity",o=await this.getDecompressedMessage(r,n);if(!o)return;this.pushOrBufferMessage(e,o)}o=!1,this.stream.resume(),i()})),this.stream.once("end",(()=>{n=!0,i()}))}consumeUnpushedMessages(e){for(this.canPush=!0;this.messagesToPush.length>0;){const t=this.messagesToPush.shift(),r=e.push(t);if(null===t||!1===r){this.canPush=!1;break}}return this.canPush}pushOrBufferMessage(e,t){this.isPushPending?this.bufferedMessages.push(t):this.pushMessage(e,t)}async pushMessage(e,t){if(null===t)return m("Received end of stream"),void(this.canPush?e.push(null):this.messagesToPush.push(null));m("Received message of length "+t.length),this.isPushPending=!0;try{const r=await this.deserializeMessage(t);this.canPush?e.push(r)||(this.canPush=!1,this.stream.pause()):this.messagesToPush.push(r)}catch(t){this.bufferedMessages.length=0;let r=(0,h.getErrorCode)(t);(null===r||r<c.Status.OK||r>c.Status.UNAUTHENTICATED)&&(r=c.Status.INTERNAL),e.emit("error",{details:(0,h.getErrorMessage)(t),code:r})}this.isPushPending=!1,this.bufferedMessages.length>0&&this.pushMessage(e,this.bufferedMessages.shift())}getPeer(){const e=this.stream.session.socket;return e.remoteAddress?e.remotePort?`${e.remoteAddress}:${e.remotePort}`:e.remoteAddress:"unknown"}getDeadline(){return this.deadline}getPath(){return this.handler.path}}function k(e){const t=new Error("Deadline exceeded");t.code=c.Status.DEADLINE_EXCEEDED,e.sendError(t),e.cancelled=!0,e.emit("cancelled","deadline")}t.Http2ServerCallStream=O},35919:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerCredentials=void 0;const n=r(98283);class o{static createInsecure(){return new s}static createSsl(e,t,r=!1){if(null!==e&&!Buffer.isBuffer(e))throw new TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(t))throw new TypeError("keyCertPairs must be an array");if("boolean"!=typeof r)throw new TypeError("checkClientCertificate must be a boolean");const o=[],s=[];for(let e=0;e<t.length;e++){const r=t[e];if(null===r||"object"!=typeof r)throw new TypeError(`keyCertPair[${e}] must be an object`);if(!Buffer.isBuffer(r.private_key))throw new TypeError(`keyCertPair[${e}].private_key must be a Buffer`);if(!Buffer.isBuffer(r.cert_chain))throw new TypeError(`keyCertPair[${e}].cert_chain must be a Buffer`);o.push(r.cert_chain),s.push(r.private_key)}return new i({ca:e||(0,n.getDefaultRootsData)()||void 0,cert:o,key:s,requestCert:r,ciphers:n.CIPHER_SUITES})}}t.ServerCredentials=o;class s extends o{_isSecure(){return!1}_getSettings(){return null}}class i extends o{constructor(e){super(),this.options=e}_isSecure(){return!0}_getSettings(){return this.options}}},40903:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;const n=r(85158),o=r(53189),s=r(40777),i=r(35919),a=r(83513),c=r(48626),l=r(48741),u=r(95165),d=r(8950),h=r(15503),p=~(1<<31),{HTTP2_HEADER_PATH:f}=n.constants;function g(){}function m(e){return{code:o.Status.UNIMPLEMENTED,details:`The server does not implement the method ${e}`}}t.Server=class{constructor(e){var t,r,n,o;this.http2ServerList=[],this.handlers=new Map,this.sessions=new Map,this.started=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.channelzTrace=new d.ChannelzTrace,this.callTracker=new d.ChannelzCallTracker,this.listenerChildrenTracker=new d.ChannelzChildrenTracker,this.sessionChildrenTracker=new d.ChannelzChildrenTracker,this.options=null!=e?e:{},0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,d.registerChannelzServer)((()=>this.getChannelzInfo()),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=null!==(t=this.options["grpc.max_connection_age_ms"])&&void 0!==t?t:p,this.maxConnectionAgeGraceMs=null!==(r=this.options["grpc.max_connection_age_grace_ms"])&&void 0!==r?r:p,this.keepaliveTimeMs=null!==(n=this.options["grpc.keepalive_time_ms"])&&void 0!==n?n:2147483647,this.keepaliveTimeoutMs=null!==(o=this.options["grpc.keepalive_timeout_ms"])&&void 0!==o?o:2e4,this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter(e){return()=>{var t,r,n;const o=this.sessions.get(e),s=e.socket,i=s.remoteAddress?(0,l.stringToSubchannelAddress)(s.remoteAddress,s.remotePort):null,a=s.localAddress?(0,l.stringToSubchannelAddress)(s.localAddress,s.localPort):null;let c;if(e.encrypted){const e=s,r=e.getCipher(),n=e.getCertificate(),o=e.getPeerCertificate();c={cipherSuiteStandardName:null!==(t=r.standardName)&&void 0!==t?t:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:n&&"raw"in n?n.raw:null,remoteCertificate:o&&"raw"in o?o.raw:null}}else c=null;return{remoteAddress:i,localAddress:a,security:c,remoteName:null,streamsStarted:o.streamTracker.callsStarted,streamsSucceeded:o.streamTracker.callsSucceeded,streamsFailed:o.streamTracker.callsFailed,messagesSent:o.messagesSent,messagesReceived:o.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:o.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:o.lastMessageSentTimestamp,lastMessageReceivedTimestamp:o.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(r=e.state.localWindowSize)&&void 0!==r?r:null,remoteFlowControlWindow:null!==(n=e.state.remoteWindowSize)&&void 0!==n?n:null}}}trace(e){c.trace(o.LogVerbosity.DEBUG,"server","("+this.channelzRef.id+") "+e)}addProtoService(){throw new Error("Not implemented. Use addService() instead")}addService(e,t){if(null===e||"object"!=typeof e||null===t||"object"!=typeof t)throw new Error("addService() requires two objects as arguments");const r=Object.keys(e);if(0===r.length)throw new Error("Cannot add an empty service to a server");r.forEach((r=>{const n=e[r];let o;o=n.requestStream?n.responseStream?"bidi":"clientStream":n.responseStream?"serverStream":"unary";let s,i=t[r];if(void 0===i&&"string"==typeof n.originalName&&(i=t[n.originalName]),s=void 0!==i?i.bind(t):function(e,t){const r=m(t);switch(e){case"unary":case"clientStream":return(e,t)=>{t(r,null)};case"serverStream":case"bidi":return e=>{e.emit("error",r)};default:throw new Error(`Invalid handlerType ${e}`)}}(o,r),!1===this.register(n.path,s,n.responseSerialize,n.requestDeserialize,o))throw new Error(`Method handler for ${n.path} already provided.`)}))}removeService(e){if(null===e||"object"!=typeof e)throw new Error("removeService() requires object as argument");Object.keys(e).forEach((t=>{const r=e[t];this.unregister(r.path)}))}bind(e,t){throw new Error("Not implemented. Use bindAsync() instead")}bindAsync(e,t,r){if(!0===this.started)throw new Error("server is already started");if("string"!=typeof e)throw new TypeError("port must be a string");if(null===t||!(t instanceof i.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");if("function"!=typeof r)throw new TypeError("callback must be a function");const s=(0,u.parseUri)(e);if(null===s)throw new Error(`Could not parse port "${e}"`);const h=(0,a.mapUriDefaultScheme)(s);if(null===h)throw new Error(`Could not get a default scheme for port "${e}"`);const p={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};"grpc-node.max_session_memory"in this.options?p.maxSessionMemory=this.options["grpc-node.max_session_memory"]:p.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(p.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]});const f=(e,t)=>{process.nextTick((()=>r(e,t)))},m=()=>{let e;if(t._isSecure()){const r=Object.assign(p,t._getSettings());e=n.createSecureServer(r),e.on("secureConnection",(e=>{e.on("error",(e=>{this.trace("An incoming TLS connection closed with error: "+e.message)}))}))}else e=n.createServer(p);return e.setTimeout(0,g),this._setupHandlers(e),e},y=(e,t,r)=>0===e.length?Promise.resolve({port:t,count:r}):Promise.all(e.map((e=>{let r;this.trace("Attempting to bind "+(0,l.subchannelAddressToString)(e)),r=(0,l.isTcpSubchannelAddress)(e)?{host:e.host,port:t}:e;const n=m();return new Promise(((o,s)=>{const i=t=>{this.trace("Failed to bind "+(0,l.subchannelAddressToString)(e)+" with error "+t.message),o(t)};n.once("error",i),n.listen(r,(()=>{const e=n.address();let r,s;r="string"==typeof e?{path:e}:{host:e.address,port:e.port},s=(0,d.registerChannelzSocket)((0,l.subchannelAddressToString)(r),(()=>({localAddress:r,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null})),this.channelzEnabled),this.channelzEnabled&&this.listenerChildrenTracker.refChild(s),this.http2ServerList.push({server:n,channelzRef:s}),this.trace("Successfully bound "+(0,l.subchannelAddressToString)(r)),o("port"in r?r.port:t),n.removeListener("error",i)}))}))}))).then((e=>{let n=0;for(const r of e)if("number"==typeof r&&(n+=1,r!==t))throw new Error("Invalid state: multiple port numbers added from single address");return{port:t,count:n+r}})),v=e=>{if(0===e.length)return Promise.resolve({port:0,count:0});const t=e[0],r=m();return new Promise(((n,o)=>{const s=r=>{this.trace("Failed to bind "+(0,l.subchannelAddressToString)(t)+" with error "+r.message),n(v(e.slice(1)))};r.once("error",s),r.listen(t,(()=>{const t=r.address(),o={host:t.address,port:t.port};let i;i=(0,d.registerChannelzSocket)((0,l.subchannelAddressToString)(o),(()=>({localAddress:o,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null})),this.channelzEnabled),this.channelzEnabled&&this.listenerChildrenTracker.refChild(i),this.http2ServerList.push({server:r,channelzRef:i}),this.trace("Successfully bound "+(0,l.subchannelAddressToString)(o)),n(y(e.slice(1),t.port,1)),r.removeListener("error",s)}))}))},_={onSuccessfulResolution:(t,r,n)=>{if(_.onSuccessfulResolution=()=>{},0===t.length)return void f(new Error(`No addresses resolved for port ${e}`),0);let s;s=(0,l.isTcpSubchannelAddress)(t[0])?0===t[0].port?v(t):y(t,t[0].port,0):y(t,1,0),s.then((e=>{if(0===e.count){const e=`No address added out of total ${t.length} resolved`;c.log(o.LogVerbosity.ERROR,e),f(new Error(e),0)}else e.count<t.length&&c.log(o.LogVerbosity.INFO,`WARNING Only ${e.count} addresses added out of total ${t.length} resolved`),f(null,e.port)}),(e=>{const r=`No address added out of total ${t.length} resolved`;c.log(o.LogVerbosity.ERROR,r),f(new Error(r),0)}))},onError:e=>{f(new Error(e.details),0)}};(0,a.createResolver)(h,_,this.options).updateResolution()}forceShutdown(){for(const{server:e,channelzRef:t}of this.http2ServerList)e.listening&&e.close((()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),(0,d.unregisterChannelzRef)(t))}));this.started=!1,this.sessions.forEach(((e,t)=>{t.destroy(n.constants.NGHTTP2_CANCEL)})),this.sessions.clear(),this.channelzEnabled&&(0,d.unregisterChannelzRef)(this.channelzRef)}register(e,t,r,n,o){return!this.handlers.has(e)&&(this.handlers.set(e,{func:t,serialize:r,deserialize:n,type:o,path:e}),!0)}unregister(e){return this.handlers.delete(e)}start(){if(0===this.http2ServerList.length||this.http2ServerList.every((({server:e})=>!0!==e.listening)))throw new Error("server must be bound in order to start");if(!0===this.started)throw new Error("server is already started");this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Starting"),this.started=!0}tryShutdown(e){const t=t=>{this.channelzEnabled&&(0,d.unregisterChannelzRef)(this.channelzRef),e(t)};let r=0;function n(){r--,0===r&&t()}this.started=!1;for(const{server:e,channelzRef:t}of this.http2ServerList)e.listening&&(r++,e.close((()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),(0,d.unregisterChannelzRef)(t)),n()})));this.sessions.forEach(((e,t)=>{t.closed||(r+=1,t.close(n))})),0===r&&t()}addHttp2Port(){throw new Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(e,t){const r=t[n.constants.HTTP2_HEADER_CONTENT_TYPE];return!("string"!=typeof r||!r.startsWith("application/grpc"))||(e.respond({[n.constants.HTTP2_HEADER_STATUS]:n.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1)}_retrieveHandler(e){const t=e[f];this.trace("Received call to method "+t+" at address "+this.serverAddressString);const r=this.handlers.get(t);if(void 0===r)throw this.trace("No handler registered for method "+t+". Sending UNIMPLEMENTED status."),m(t);return r}_respondWithError(e,t,r=null){const n=new s.Http2ServerCallStream(t,null,this.options);void 0===e.code&&(e.code=o.Status.INTERNAL),this.channelzEnabled&&(this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed()),n.sendError(e)}_channelzHandler(e,t){var r;const n=this.sessions.get(e.session);if(this.callTracker.addCallStarted(),null==n||n.streamTracker.addCallStarted(),!this._verifyContentType(e,t))return this.callTracker.addCallFailed(),void(null==n||n.streamTracker.addCallFailed());let i;try{i=this._retrieveHandler(t)}catch(t){return void this._respondWithError({details:(0,h.getErrorMessage)(t),code:null!==(r=(0,h.getErrorCode)(t))&&void 0!==r?r:void 0},e,n)}const a=new s.Http2ServerCallStream(e,i,this.options);a.once("callEnd",(e=>{e===o.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()})),n&&(a.once("streamEnd",(e=>{e?n.streamTracker.addCallSucceeded():n.streamTracker.addCallFailed()})),a.on("sendMessage",(()=>{n.messagesSent+=1,n.lastMessageSentTimestamp=new Date})),a.on("receiveMessage",(()=>{n.messagesReceived+=1,n.lastMessageReceivedTimestamp=new Date}))),this._runHandlerForCall(a,i,t)||(this.callTracker.addCallFailed(),null==n||n.streamTracker.addCallFailed(),a.sendError({code:o.Status.INTERNAL,details:`Unknown handler type: ${i.type}`}))}_streamHandler(e,t){var r;if(!0!==this._verifyContentType(e,t))return;let n;try{n=this._retrieveHandler(t)}catch(t){return void this._respondWithError({details:(0,h.getErrorMessage)(t),code:null!==(r=(0,h.getErrorCode)(t))&&void 0!==r?r:void 0},e,null)}const i=new s.Http2ServerCallStream(e,n,this.options);this._runHandlerForCall(i,n,t)||i.sendError({code:o.Status.INTERNAL,details:`Unknown handler type: ${n.type}`})}_runHandlerForCall(e,t,r){var n;const o=e.receiveMetadata(r),i=null!==(n=o.get("grpc-encoding")[0])&&void 0!==n?n:"identity";o.remove("grpc-encoding");const{type:a}=t;if("unary"===a)!function(e,t,r,n){e.receiveUnaryMessage(n,((n,o)=>{if(n)return void e.sendError(n);if(void 0===o||e.cancelled)return;const i=new s.ServerUnaryCallImpl(e,r,o);t.func(i,((t,r,n,o)=>{e.sendUnaryMessage(t,r,n,o)}))}))}(e,t,o,i);else if("clientStream"===a)!function(e,t,r,n){const o=new s.ServerReadableStreamImpl(e,r,t.deserialize,n);function i(t,r,n,s){o.destroy(),e.sendUnaryMessage(t,r,n,s)}e.cancelled||(o.on("error",i),t.func(o,i))}(e,t,o,i);else if("serverStream"===a)!function(e,t,r,n){e.receiveUnaryMessage(n,((n,o)=>{if(n)return void e.sendError(n);if(void 0===o||e.cancelled)return;const i=new s.ServerWritableStreamImpl(e,r,t.serialize,o);t.func(i)}))}(e,t,o,i);else{if("bidi"!==a)return!1;!function(e,t,r,n){const o=new s.ServerDuplexStreamImpl(e,r,t.serialize,t.deserialize,n);e.cancelled||t.func(o)}(e,t,o,i)}return!0}_setupHandlers(e){if(null===e)return;const t=e.address();let r="null";t&&(r="string"==typeof t?t:t.address+":"+t.port),this.serverAddressString=r;const o=this.channelzEnabled?this._channelzHandler:this._streamHandler;e.on("stream",o.bind(this)),e.on("session",(e=>{var t,r,o,s,i;if(!this.started)return void e.destroy();let a;a=(0,d.registerChannelzSocket)(null!==(t=e.socket.remoteAddress)&&void 0!==t?t:"unknown",this.getChannelzSessionInfoGetter(e),this.channelzEnabled);const c={ref:a,streamTracker:new d.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set(e,c);const l=e.socket.remoteAddress;this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection established by client "+l),this.sessionChildrenTracker.refChild(a));let u=null,h=null,f=!1;if(this.maxConnectionAgeMs!==p){const t=this.maxConnectionAgeMs/10,s=Math.random()*t*2-t;u=null===(o=(r=setTimeout((()=>{var t,r;f=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+l);try{e.goaway(n.constants.NGHTTP2_NO_ERROR,~(1<<31),Buffer.from("max_age"))}catch(t){return void e.destroy()}e.close(),this.maxConnectionAgeGraceMs!==p&&(h=null===(r=(t=setTimeout((()=>{e.destroy()}),this.maxConnectionAgeGraceMs)).unref)||void 0===r?void 0:r.call(t))}),this.maxConnectionAgeMs+s)).unref)||void 0===o?void 0:o.call(r)}const g=null===(i=(s=setInterval((()=>{var t,r;const n=null===(r=(t=setTimeout((()=>{f=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+l),e.close()}),this.keepaliveTimeoutMs)).unref)||void 0===r?void 0:r.call(t);try{e.ping(((e,t,r)=>{clearTimeout(n)}))}catch(t){e.destroy()}}),this.keepaliveTimeMs)).unref)||void 0===i?void 0:i.call(s);e.on("close",(()=>{this.channelzEnabled&&(f||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+l),this.sessionChildrenTracker.unrefChild(a),(0,d.unregisterChannelzRef)(a)),u&&clearTimeout(u),h&&clearTimeout(h),g&&clearTimeout(g),this.sessions.delete(e)}))}))}}},80235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractAndSelectServiceConfig=t.validateServiceConfig=t.validateRetryThrottling=void 0;const n=r(22037),o=r(53189),s=r(21192),i=/^\d+(\.\d{1,9})?s$/;function a(e){if(!("service"in e)||"string"!=typeof e.service)throw new Error("Invalid method config name: invalid service");const t={service:e.service};if("method"in e){if("string"!=typeof e.method)throw new Error("Invalid method config name: invalid method");t.method=e.method}return t}function c(e){var t;const r={name:[]};if(!("name"in e)||!Array.isArray(e.name))throw new Error("Invalid method config: invalid name array");for(const t of e.name)r.name.push(a(t));if("waitForReady"in e){if("boolean"!=typeof e.waitForReady)throw new Error("Invalid method config: invalid waitForReady");r.waitForReady=e.waitForReady}if("timeout"in e)if("object"==typeof e.timeout){if(!("seconds"in e.timeout)||"number"!=typeof e.timeout.seconds)throw new Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in e.timeout)||"number"!=typeof e.timeout.nanos)throw new Error("Invalid method config: invalid timeout.nanos");r.timeout=e.timeout}else{if("string"!=typeof e.timeout||!i.test(e.timeout))throw new Error("Invalid method config: invalid timeout");{const n=e.timeout.substring(0,e.timeout.length-1).split(".");r.timeout={seconds:0|n[0],nanos:0|(null!==(t=n[1])&&void 0!==t?t:0)}}}if("maxRequestBytes"in e){if("number"!=typeof e.maxRequestBytes)throw new Error("Invalid method config: invalid maxRequestBytes");r.maxRequestBytes=e.maxRequestBytes}if("maxResponseBytes"in e){if("number"!=typeof e.maxResponseBytes)throw new Error("Invalid method config: invalid maxRequestBytes");r.maxResponseBytes=e.maxResponseBytes}if("retryPolicy"in e){if("hedgingPolicy"in e)throw new Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");r.retryPolicy=function(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw new Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in e)||"string"!=typeof e.initialBackoff||!i.test(e.initialBackoff))throw new Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer followed by s");if(!("maxBackoff"in e)||"string"!=typeof e.maxBackoff||!i.test(e.maxBackoff))throw new Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer followed by s");if(!("backoffMultiplier"in e)||"number"!=typeof e.backoffMultiplier||e.backoffMultiplier<=0)throw new Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in e)||!Array.isArray(e.retryableStatusCodes))throw new Error("Invalid method config retry policy: retryableStatusCodes is required");if(0===e.retryableStatusCodes.length)throw new Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(const t of e.retryableStatusCodes)if("number"==typeof t){if(!Object.values(o.Status).includes(t))throw new Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else{if("string"!=typeof t)throw new Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");if(!Object.values(o.Status).includes(t.toUpperCase()))throw new Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}return{maxAttempts:e.maxAttempts,initialBackoff:e.initialBackoff,maxBackoff:e.maxBackoff,backoffMultiplier:e.backoffMultiplier,retryableStatusCodes:e.retryableStatusCodes}}(e.retryPolicy)}else"hedgingPolicy"in e&&(r.hedgingPolicy=function(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw new Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in e&&("string"!=typeof e.hedgingDelay||!i.test(e.hedgingDelay)))throw new Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in e&&Array.isArray(e.nonFatalStatusCodes))for(const t of e.nonFatalStatusCodes)if("number"==typeof t){if(!Object.values(o.Status).includes(t))throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value not in status code range")}else{if("string"!=typeof t)throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value must be a string or number");if(!Object.values(o.Status).includes(t.toUpperCase()))throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value not a status code name")}const t={maxAttempts:e.maxAttempts};return e.hedgingDelay&&(t.hedgingDelay=e.hedgingDelay),e.nonFatalStatusCodes&&(t.nonFatalStatusCodes=e.nonFatalStatusCodes),t}(e.hedgingPolicy));return r}function l(e){if(!("maxTokens"in e)||"number"!=typeof e.maxTokens||e.maxTokens<=0||e.maxTokens>1e3)throw new Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in e)||"number"!=typeof e.tokenRatio||e.tokenRatio<=0)throw new Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+e.maxTokens.toFixed(3),tokenRatio:+e.tokenRatio.toFixed(3)}}function u(e){const t={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in e){if("string"!=typeof e.loadBalancingPolicy)throw new Error("Invalid service config: invalid loadBalancingPolicy");t.loadBalancingPolicy=e.loadBalancingPolicy}if("loadBalancingConfig"in e){if(!Array.isArray(e.loadBalancingConfig))throw new Error("Invalid service config: invalid loadBalancingConfig");for(const r of e.loadBalancingConfig)t.loadBalancingConfig.push((0,s.validateLoadBalancingConfig)(r))}if("methodConfig"in e&&Array.isArray(e.methodConfig))for(const r of e.methodConfig)t.methodConfig.push(c(r));"retryThrottling"in e&&(t.retryThrottling=l(e.retryThrottling));const r=[];for(const e of t.methodConfig)for(const t of e.name){for(const e of r)if(t.service===e.service&&t.method===e.method)throw new Error(`Invalid service config: duplicate name ${t.service}/${t.method}`);r.push(t)}return t}function d(e){if(!("serviceConfig"in e))throw new Error("Invalid service config choice: missing service config");const t={serviceConfig:u(e.serviceConfig)};if("clientLanguage"in e){if(!Array.isArray(e.clientLanguage))throw new Error("Invalid service config choice: invalid clientLanguage");t.clientLanguage=[];for(const r of e.clientLanguage){if("string"!=typeof r)throw new Error("Invalid service config choice: invalid clientLanguage");t.clientLanguage.push(r)}}if("clientHostname"in e){if(!Array.isArray(e.clientHostname))throw new Error("Invalid service config choice: invalid clientHostname");t.clientHostname=[];for(const r of e.clientHostname){if("string"!=typeof r)throw new Error("Invalid service config choice: invalid clientHostname");t.clientHostname.push(r)}}if("percentage"in e){if(!("number"==typeof e.percentage&&0<=e.percentage&&e.percentage<=100))throw new Error("Invalid service config choice: invalid percentage");t.percentage=e.percentage}const r=["clientLanguage","percentage","clientHostname","serviceConfig"];for(const t in e)if(!r.includes(t))throw new Error(`Invalid service config choice: unexpected field ${t}`);return t}function h(e,t){if(!Array.isArray(e))throw new Error("Invalid service config list");for(const r of e){const e=d(r);if(!("number"==typeof e.percentage&&t>e.percentage)){if(Array.isArray(e.clientHostname)){let t=!1;for(const r of e.clientHostname)r===n.hostname()&&(t=!0);if(!t)continue}if(Array.isArray(e.clientLanguage)){let t=!1;for(const r of e.clientLanguage)"node"===r&&(t=!0);if(!t)continue}return e.serviceConfig}}throw new Error("No matching service config found")}t.validateRetryThrottling=l,t.validateServiceConfig=u,t.extractAndSelectServiceConfig=function(e,t){for(const r of e)if(r.length>0&&r[0].startsWith("grpc_config=")){const e=r.join("").substring("grpc_config=".length);return h(JSON.parse(e),t)}return null}},80930:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusBuilder=void 0,t.StatusBuilder=class{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){const e={};return null!==this.code&&(e.code=this.code),null!==this.details&&(e.details=this.details),null!==this.metadata&&(e.metadata=this.metadata),e}}},91524:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamDecoder=void 0,function(e){e[e.NO_DATA=0]="NO_DATA",e[e.READING_SIZE=1]="READING_SIZE",e[e.READING_MESSAGE=2]="READING_MESSAGE"}(r||(r={})),t.StreamDecoder=class{constructor(){this.readState=r.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(e){let t,n=0;const o=[];for(;n<e.length;)switch(this.readState){case r.NO_DATA:this.readCompressFlag=e.slice(n,n+1),n+=1,this.readState=r.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case r.READING_SIZE:if(t=Math.min(e.length-n,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,n,n+t),this.readSizeRemaining-=t,n+=t,0===this.readSizeRemaining)if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=r.READING_MESSAGE;else{const e=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=r.NO_DATA,o.push(e)}break;case r.READING_MESSAGE:if(t=Math.min(e.length-n,this.readMessageRemaining),this.readPartialMessage.push(e.slice(n,n+t)),this.readMessageRemaining-=t,n+=t,0===this.readMessageRemaining){const e=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),t=Buffer.concat(e,this.readMessageSize+5);this.readState=r.NO_DATA,o.push(t)}break;default:throw new Error("Unexpected read state")}return o}}},48741:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringToSubchannelAddress=t.subchannelAddressToString=t.subchannelAddressEqual=t.isTcpSubchannelAddress=void 0;const n=r(41808);function o(e){return"port"in e}t.isTcpSubchannelAddress=o,t.subchannelAddressEqual=function(e,t){return o(e)?o(t)&&e.host===t.host&&e.port===t.port:!o(t)&&e.path===t.path},t.subchannelAddressToString=function(e){return o(e)?e.host+":"+e.port:e.path},t.stringToSubchannelAddress=function(e,t){return(0,n.isIP)(e)?{host:e,port:null!=t?t:443}:{path:e}}},99697:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelCall=void 0;const n=r(85158),o=r(22037),s=r(53189),i=r(14664),a=r(91524),c=r(48626),l=r(53189),{HTTP2_HEADER_STATUS:u,HTTP2_HEADER_CONTENT_TYPE:d,NGHTTP2_CANCEL:h}=n.constants;t.Http2SubchannelCall=class{constructor(e,t,r,c,l){this.http2Stream=e,this.callEventTracker=t,this.listener=r,this.transport=c,this.callId=l,this.decoder=new a.StreamDecoder,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.mappedStatusCode=s.Status.UNKNOWN,this.finalStatus=null,this.internalError=null,e.on("response",((e,t)=>{let r="";for(const t of Object.keys(e))r+="\t\t"+t+": "+e[t]+"\n";switch(this.trace("Received server headers:\n"+r),e[":status"]){case 400:this.mappedStatusCode=s.Status.INTERNAL;break;case 401:this.mappedStatusCode=s.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=s.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=s.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=s.Status.UNAVAILABLE;break;default:this.mappedStatusCode=s.Status.UNKNOWN}if(t&n.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(e);else{let t;try{t=i.Metadata.fromHttp2Headers(e)}catch(e){return void this.endCall({code:s.Status.UNKNOWN,details:e.message,metadata:new i.Metadata})}this.listener.onReceiveMetadata(t)}})),e.on("trailers",(e=>{this.handleTrailers(e)})),e.on("data",(e=>{if(this.statusOutput)return;this.trace("receive HTTP/2 data frame of length "+e.length);const t=this.decoder.write(e);for(const e of t)this.trace("parsed message of length "+e.length),this.callEventTracker.addMessageReceived(),this.tryPush(e)})),e.on("end",(()=>{this.readsClosed=!0,this.maybeOutputStatus()})),e.on("close",(()=>{process.nextTick((()=>{var t;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),(null===(t=this.finalStatus)||void 0===t?void 0:t.code)===s.Status.OK)return;let r,o="";switch(e.rstCode){case n.constants.NGHTTP2_NO_ERROR:if(null!==this.finalStatus)return;r=s.Status.INTERNAL,o=`Received RST_STREAM with code ${e.rstCode}`;break;case n.constants.NGHTTP2_REFUSED_STREAM:r=s.Status.UNAVAILABLE,o="Stream refused by server";break;case n.constants.NGHTTP2_CANCEL:r=s.Status.CANCELLED,o="Call cancelled";break;case n.constants.NGHTTP2_ENHANCE_YOUR_CALM:r=s.Status.RESOURCE_EXHAUSTED,o="Bandwidth exhausted or memory limit exceeded";break;case n.constants.NGHTTP2_INADEQUATE_SECURITY:r=s.Status.PERMISSION_DENIED,o="Protocol not secure enough";break;case n.constants.NGHTTP2_INTERNAL_ERROR:r=s.Status.INTERNAL,null===this.internalError?o=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:"ECONNRESET"===this.internalError.code||"ETIMEDOUT"===this.internalError.code?(r=s.Status.UNAVAILABLE,o=this.internalError.message):o=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:r=s.Status.INTERNAL,o=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:r,details:o,metadata:new i.Metadata,rstCode:e.rstCode})}))})),e.on("error",(e=>{"ERR_HTTP2_STREAM_ERROR"!==e.code&&(this.trace("Node error event: message="+e.message+" code="+e.code+" errno="+function(e){for(const[t,r]of Object.entries(o.constants.errno))if(r===e)return t;return"Unknown system error "+e}(e.errno)+" syscall="+e.syscall),this.internalError=e),this.callEventTracker.onStreamEnd(!1)}))}onDisconnect(){this.endCall({code:s.Status.UNAVAILABLE,details:"Connection dropped",metadata:new i.Metadata})}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick((()=>{this.listener.onReceiveStatus(this.finalStatus)})),this.http2Stream.resume())}trace(e){c.trace(l.LogVerbosity.DEBUG,"subchannel_call","["+this.callId+"] "+e)}endCall(e){null!==this.finalStatus&&this.finalStatus.code!==s.Status.OK||(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){null!==this.finalStatus&&(this.finalStatus.code!==s.Status.OK||this.readsClosed&&0===this.unpushedReadMessages.length&&!this.isReadFilterPending&&!this.isPushPending)&&this.outputStatus()}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick((()=>{this.isPushPending=!1,this.statusOutput||(this.listener.onReceiveMessage(e),this.maybeOutputStatus())}))}tryPush(e){this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e))}handleTrailers(e){this.callEventTracker.onStreamEnd(!0);let t,r="";for(const t of Object.keys(e))r+="\t\t"+t+": "+e[t]+"\n";this.trace("Received server trailers:\n"+r);try{t=i.Metadata.fromHttp2Headers(e)}catch(e){t=new i.Metadata}const n=t.getMap();let o=this.mappedStatusCode;if(o===s.Status.UNKNOWN&&"string"==typeof n["grpc-status"]){const e=Number(n["grpc-status"]);e in s.Status&&(o=e,this.trace("received status code "+e+" from server")),t.remove("grpc-status")}let a="";if("string"==typeof n["grpc-message"]){try{a=decodeURI(n["grpc-message"])}catch(e){a=n["grpc-message"]}t.remove("grpc-message"),this.trace('received status details string "'+a+'" from server')}const c={code:o,details:a,metadata:t};this.endCall(c)}destroyHttp2Stream(){var e;if(!this.http2Stream.destroyed){let t;t=(null===(e=this.finalStatus)||void 0===e?void 0:e.code)===s.Status.OK?n.constants.NGHTTP2_NO_ERROR:n.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+t),this.http2Stream.close(t)}}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.endCall({code:e,details:t,metadata:new i.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}startRead(){if(null!==this.finalStatus&&this.finalStatus.code!==s.Status.OK)return this.readsClosed=!0,void this.maybeOutputStatus();if(this.canPush=!0,this.unpushedReadMessages.length>0){const e=this.unpushedReadMessages.shift();this.push(e)}else this.http2Stream.resume()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);const r=t=>{var r;let n=s.Status.UNAVAILABLE;"ERR_STREAM_WRITE_AFTER_END"===(null==t?void 0:t.code)&&(n=s.Status.INTERNAL),t&&this.cancelWithStatus(n,`Write error: ${t.message}`),null===(r=e.callback)||void 0===r||r.call(e)};this.trace("sending data chunk of length "+t.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(t,r)}catch(e){this.endCall({code:s.Status.UNAVAILABLE,details:`Write failed with error ${e.message}`,metadata:new i.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}}},18862:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSubchannelWrapper=void 0,t.BaseSubchannelWrapper=class{constructor(e){this.child=e}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e)}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}}},90651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSubchannelPool=t.SubchannelPool=void 0;const n=r(38938),o=r(18825),s=r(48741),i=r(95165),a=r(96481);class c{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let e=!0;for(const t in this.pool){const r=this.pool[t].filter((e=>!e.subchannel.unrefIfOneRef()));r.length>0&&(e=!1),this.pool[t]=r}e&&null!==this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var e,t;null===this.cleanupTimer&&(this.cleanupTimer=setInterval((()=>{this.unrefUnusedSubchannels()}),1e4),null===(t=(e=this.cleanupTimer).unref)||void 0===t||t.call(e))}getOrCreateSubchannel(e,t,r,c){this.ensureCleanupTask();const l=(0,i.uriToString)(e);if(l in this.pool){const e=this.pool[l];for(const o of e)if((0,s.subchannelAddressEqual)(t,o.subchannelAddress)&&(0,n.channelOptionsEqual)(r,o.channelArguments)&&c._equals(o.channelCredentials))return o.subchannel}const u=new o.Subchannel(e,t,r,c,new a.Http2SubchannelConnector(e));return l in this.pool||(this.pool[l]=[]),this.pool[l].push({subchannelAddress:t,channelArguments:r,channelCredentials:c,subchannel:u}),u.ref(),u}}t.SubchannelPool=c;const l=new c;t.getSubchannelPool=function(e){return e?l:new c}},18825:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subchannel=void 0;const n=r(40207),o=r(43510),s=r(48626),i=r(53189),a=r(95165),c=r(48741),l=r(8950);t.Subchannel=class{constructor(e,t,r,s,i){var a;this.channelTarget=e,this.subchannelAddress=t,this.options=r,this.credentials=s,this.connector=i,this.connectivityState=n.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=[],this.refcount=0,this.channelzEnabled=!0,this.callTracker=new l.ChannelzCallTracker,this.childrenTracker=new l.ChannelzChildrenTracker,this.streamTracker=new l.ChannelzCallTracker;const u={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new o.BackoffTimeout((()=>{this.handleBackoffTimer()}),u),this.subchannelAddressString=(0,c.subchannelAddressToString)(t),this.keepaliveTime=null!==(a=r["grpc.keepalive_time_ms"])&&void 0!==a?a:-1,0===r["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new l.ChannelzTrace,this.channelzRef=(0,l.registerChannelzSubchannel)(this.subchannelAddressString,(()=>this.getChannelzInfo()),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(r,void 0,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){s.trace(i.LogVerbosity.DEBUG,"subchannel","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){s.trace(i.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.CONNECTING):this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){const t=Math.min(this.keepaliveTime,2147483647);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":t})}this.connector.connect(this.subchannelAddress,this.credentials,e).then((e=>{this.transitionToState([n.ConnectivityState.CONNECTING],n.ConnectivityState.READY)&&(this.transport=e,this.channelzEnabled&&this.childrenTracker.refChild(e.getChannelzRef()),e.addDisconnectListener((e=>{this.transitionToState([n.ConnectivityState.READY],n.ConnectivityState.IDLE),e&&this.keepaliveTime>0&&(this.keepaliveTime*=2,s.log(i.LogVerbosity.ERROR,`Connection to ${(0,a.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))})))}),(e=>{this.transitionToState([n.ConnectivityState.CONNECTING],n.ConnectivityState.TRANSIENT_FAILURE)}))}transitionToState(e,t){var r,o;if(-1===e.indexOf(this.connectivityState))return!1;this.trace(n.ConnectivityState[this.connectivityState]+" -> "+n.ConnectivityState[t]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO",n.ConnectivityState[this.connectivityState]+" -> "+n.ConnectivityState[t]);const s=this.connectivityState;switch(this.connectivityState=t,t){case n.ConnectivityState.READY:this.stopBackoff();break;case n.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case n.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null===(r=this.transport)||void 0===r||r.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick((()=>{this.handleBackoffTimer()}));break;case n.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null===(o=this.transport)||void 0===o||o.shutdown(),this.transport=null;break;default:throw new Error(`Invalid state: unknown ConnectivityState ${t}`)}for(const e of[...this.stateListeners])e(this,s,t,this.keepaliveTime);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,0===this.refcount&&(this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Shutting down"),this.transitionToState([n.ConnectivityState.CONNECTING,n.ConnectivityState.READY],n.ConnectivityState.IDLE),this.channelzEnabled&&(0,l.unregisterChannelzRef)(this.channelzRef))}unrefIfOneRef(){return 1===this.refcount&&(this.unref(),!0)}createCall(e,t,r,n){if(!this.transport)throw new Error("Cannot create call, subchannel not READY");let o;return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),o={onCallEnd:e=>{e.code===i.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):o={},this.transport.createCall(e,t,r,n,o)}startConnecting(){this.transitionToState([n.ConnectivityState.IDLE],n.ConnectivityState.CONNECTING)||this.connectivityState===n.ConnectivityState.TRANSIENT_FAILURE&&(this.continueConnecting=!0)}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){const t=this.stateListeners.indexOf(e);t>-1&&this.stateListeners.splice(t,1)}resetBackoff(){this.backoffTimeout.reset(),this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.CONNECTING)}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}throttleKeepalive(e){e>this.keepaliveTime&&(this.keepaliveTime=e)}}},98283:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultRootsData=t.CIPHER_SUITES=void 0;const n=r(57147);t.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;const o=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH;let s=null;t.getDefaultRootsData=function(){return o?(null===s&&(s=n.readFileSync(o)),s):null}},96481:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelConnector=void 0;const n=r(85158),o=r(24404),s=r(8950),i=r(53189),a=r(86042),c=r(48626),l=r(83513),u=r(48741),d=r(95165),h=r(41808),p=r(99697),f=r(40868),g="transport",m=r(56569).i8,{HTTP2_HEADER_AUTHORITY:y,HTTP2_HEADER_CONTENT_TYPE:v,HTTP2_HEADER_METHOD:_,HTTP2_HEADER_PATH:b,HTTP2_HEADER_TE:S,HTTP2_HEADER_USER_AGENT:E}=n.constants,w=Buffer.from("too_many_pings","ascii");class A{constructor(e,t,r){this.session=e,this.keepaliveTimeMs=-1,this.keepaliveTimeoutMs=2e4,this.keepaliveTimeoutId=null,this.keepaliveWithoutCalls=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.remoteName=null,this.streamTracker=new s.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.userAgent=[r["grpc.primary_user_agent"],`grpc-node-js/${m}`,r["grpc.secondary_user_agent"]].filter((e=>e)).join(" "),"grpc.keepalive_time_ms"in r&&(this.keepaliveTimeMs=r["grpc.keepalive_time_ms"]),"grpc.keepalive_timeout_ms"in r&&(this.keepaliveTimeoutMs=r["grpc.keepalive_timeout_ms"]),this.keepaliveWithoutCalls="grpc.keepalive_permit_without_calls"in r&&1===r["grpc.keepalive_permit_without_calls"],this.keepaliveIntervalId=setTimeout((()=>{}),0),clearTimeout(this.keepaliveIntervalId),this.keepaliveWithoutCalls&&this.startKeepalivePings(),this.subchannelAddressString=(0,u.subchannelAddressToString)(t),0===r["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,s.registerChannelzSocket)(this.subchannelAddressString,(()=>this.getChannelzInfo()),this.channelzEnabled),e.once("close",(()=>{this.trace("session closed"),this.stopKeepalivePings(),this.handleDisconnect()})),e.once("goaway",((e,t,r)=>{let o=!1;e===n.constants.NGHTTP2_ENHANCE_YOUR_CALM&&r.equals(w)&&(o=!0),this.trace("connection closed by GOAWAY with code "+e),this.reportDisconnectToOwner(o)})),e.once("error",(e=>{this.trace("connection closed with error "+e.message)})),c.isTracerEnabled(g)&&(e.on("remoteSettings",(t=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))})),e.on("localSettings",(t=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))})))}getChannelzInfo(){var e,t,r;const n=this.session.socket,o=n.remoteAddress?(0,u.stringToSubchannelAddress)(n.remoteAddress,n.remotePort):null,s=n.localAddress?(0,u.stringToSubchannelAddress)(n.localAddress,n.localPort):null;let i;if(this.session.encrypted){const t=n,r=t.getCipher(),o=t.getCertificate(),s=t.getPeerCertificate();i={cipherSuiteStandardName:null!==(e=r.standardName)&&void 0!==e?e:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:o&&"raw"in o?o.raw:null,remoteCertificate:s&&"raw"in s?s.raw:null}}else i=null;return{remoteAddress:o,localAddress:s,security:i,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(t=this.session.state.localWindowSize)&&void 0!==t?t:null,remoteFlowControlWindow:null!==(r=this.session.state.remoteWindowSize)&&void 0!==r?r:null}}trace(e){c.trace(i.LogVerbosity.DEBUG,g,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){c.trace(i.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){c.trace(i.LogVerbosity.DEBUG,"transport_flowctrl","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){c.trace(i.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}reportDisconnectToOwner(e){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach((t=>t(e))))}handleDisconnect(){this.reportDisconnectToOwner(!1),setImmediate((()=>{for(const e of this.activeCalls)e.onDisconnect()}))}addDisconnectListener(e){this.disconnectListeners.push(e)}clearKeepaliveTimeout(){this.keepaliveTimeoutId&&(clearTimeout(this.keepaliveTimeoutId),this.keepaliveTimeoutId=null)}sendPing(){var e,t;this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimeoutId||(this.keepaliveTimeoutId=setTimeout((()=>{this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()}),this.keepaliveTimeoutMs),null===(t=(e=this.keepaliveTimeoutId).unref)||void 0===t||t.call(e));try{this.session.ping(((e,t,r)=>{this.keepaliveTrace("Received ping response"),this.clearKeepaliveTimeout()}))}catch(e){this.handleDisconnect()}}startKeepalivePings(){var e,t;this.keepaliveTimeMs<0||(this.keepaliveIntervalId=setInterval((()=>{this.sendPing()}),this.keepaliveTimeMs),null===(t=(e=this.keepaliveIntervalId).unref)||void 0===t||t.call(e))}stopKeepalivePings(){clearInterval(this.keepaliveIntervalId),this.clearKeepaliveTimeout()}removeActiveCall(e){this.activeCalls.delete(e),0===this.activeCalls.size&&(this.session.unref(),this.keepaliveWithoutCalls||this.stopKeepalivePings())}addActiveCall(e){0===this.activeCalls.size&&(this.session.ref(),this.keepaliveWithoutCalls||this.startKeepalivePings()),this.activeCalls.add(e)}createCall(e,t,r,n,o){const s=e.toHttp2Headers();let i,a,c;s[y]=t,s[E]=this.userAgent,s[v]="application/grpc",s[_]="POST",s[b]=r,s[S]="trailers";try{i=this.session.request(s)}catch(e){throw this.handleDisconnect(),e}return this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed),this.channelzEnabled?(this.streamTracker.addCallStarted(),a={addMessageSent:()=>{var e;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,null===(e=o.addMessageSent)||void 0===e||e.call(o)},addMessageReceived:()=>{var e;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,null===(e=o.addMessageReceived)||void 0===e||e.call(o)},onCallEnd:e=>{var t;null===(t=o.onCallEnd)||void 0===t||t.call(o,e),this.removeActiveCall(c)},onStreamEnd:e=>{var t;e?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),null===(t=o.onStreamEnd)||void 0===t||t.call(o,e)}}):a={addMessageSent:()=>{var e;null===(e=o.addMessageSent)||void 0===e||e.call(o)},addMessageReceived:()=>{var e;null===(e=o.addMessageReceived)||void 0===e||e.call(o)},onCallEnd:e=>{var t;null===(t=o.onCallEnd)||void 0===t||t.call(o,e),this.removeActiveCall(c)},onStreamEnd:e=>{var t;null===(t=o.onStreamEnd)||void 0===t||t.call(o,e)}},c=new p.Http2SubchannelCall(i,a,n,this,(0,f.getNextCallNumber)()),this.addActiveCall(c),c}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}shutdown(){this.session.close()}}t.Http2SubchannelConnector=class{constructor(e){this.channelTarget=e,this.session=null,this.isShutdown=!1}trace(e){}createSession(e,t,r,s){return this.isShutdown?Promise.reject():new Promise(((i,a)=>{var c,p,f;let g;s.realTarget?(g=(0,d.uriToString)(s.realTarget),this.trace("creating HTTP/2 session through proxy to "+(0,d.uriToString)(s.realTarget))):(g=null,this.trace("creating HTTP/2 session to "+(0,u.subchannelAddressToString)(e)));const m=(0,l.getDefaultAuthority)(null!==(c=s.realTarget)&&void 0!==c?c:this.channelTarget);let y=t._getConnectionOptions()||{};y.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER,y.maxSessionMemory="grpc-node.max_session_memory"in r?r["grpc-node.max_session_memory"]:Number.MAX_SAFE_INTEGER;let v="http://";if("secureContext"in y){if(v="https://",r["grpc.ssl_target_name_override"]){const e=r["grpc.ssl_target_name_override"];y.checkServerIdentity=(t,r)=>(0,o.checkServerIdentity)(e,r),y.servername=e}else{const e=null!==(f=null===(p=(0,d.splitHostPort)(m))||void 0===p?void 0:p.host)&&void 0!==f?f:"localhost";y.servername=e}s.socket&&(y.createConnection=(e,t)=>s.socket)}else y.createConnection=(t,r)=>s.socket?s.socket:h.connect(e);y=Object.assign(Object.assign({},y),e);const _=n.connect(v+m,y);this.session=_,_.unref(),_.once("connect",(()=>{_.removeAllListeners(),i(new A(_,e,r)),this.session=null})),_.once("close",(()=>{this.session=null,a()})),_.once("error",(e=>{this.trace("connection failed with error "+e.message)}))}))}connect(e,t,r){var n,s;if(this.isShutdown)return Promise.reject();const i=t._getConnectionOptions()||{};if("secureContext"in i)if(i.ALPNProtocols=["h2"],r["grpc.ssl_target_name_override"]){const e=r["grpc.ssl_target_name_override"];i.checkServerIdentity=(t,r)=>(0,o.checkServerIdentity)(e,r),i.servername=e}else if("grpc.http_connect_target"in r){const e=(0,l.getDefaultAuthority)(null!==(n=(0,d.parseUri)(r["grpc.http_connect_target"]))&&void 0!==n?n:{path:"localhost"}),t=(0,d.splitHostPort)(e);i.servername=null!==(s=null==t?void 0:t.host)&&void 0!==s?s:e}return(0,a.getProxiedConnection)(e,r,i).then((n=>this.createSession(e,t,r,n)))}shutdown(){var e;this.isShutdown=!0,null===(e=this.session)||void 0===e||e.close(),this.session=null}}},95165:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uriToString=t.splitHostPort=t.parseUri=void 0;const r=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;t.parseUri=function(e){const t=r.exec(e);return null===t?null:{scheme:t[1],authority:t[2],path:t[3]}};const n=/^\d+$/;t.splitHostPort=function(e){if(e.startsWith("[")){const t=e.indexOf("]");if(-1===t)return null;const r=e.substring(1,t);if(-1===r.indexOf(":"))return null;if(e.length>t+1){if(":"===e[t+1]){const o=e.substring(t+2);return n.test(o)?{host:r,port:+o}:null}return null}return{host:r}}{const t=e.split(":");return 2===t.length?n.test(t[1])?{host:t[0],port:+t[1]}:null:{host:e}}},t.uriToString=function(e){let t="";return void 0!==e.scheme&&(t+=e.scheme+":"),void 0!==e.authority&&(t+="//"+e.authority+"/"),t+=e.path,t}},59421:(e,t,r)=>{"use strict";t.J_=void 0;const n=r(76884),o=r(43281),s=r(93961),i=r(15969);r(9797);const a={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function c(e,t){const r=(n=t,s=e.name,""===n?s:n+"."+s);var n,s;return function(e){return e instanceof o.Service||e instanceof o.Type||e instanceof o.Enum}(e)?[[r,e]]:function(e){return e instanceof o.Namespace||e instanceof o.Root}(e)&&void 0!==e.nested?Object.keys(e.nested).map((t=>c(e.nested[t],r))).reduce(((e,t)=>e.concat(t)),[]):[]}function l(e,t){return function(r){return e.toObject(e.decode(r),t)}}function u(e){return function(t){if(Array.isArray(t))throw new Error(`Failed to serialize message: expected object with ${e.name} structure, got array instead`);const r=e.fromObject(t);return e.encode(r).finish()}}function d(e,t,r,o){const s=e.resolvedRequestType,i=e.resolvedResponseType;return{path:"/"+t+"/"+e.name,requestStream:!!e.requestStream,responseStream:!!e.responseStream,requestSerialize:u(s),requestDeserialize:l(s,r),responseSerialize:u(i),responseDeserialize:l(i,r),originalName:n(e.name),requestType:h(s,o),responseType:h(i,o)}}function h(e,t){const r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:r.$type.toObject(r,a),fileDescriptorProtos:t}}function p(e,t,r,n){if(e instanceof o.Service)return function(e,t,r,n){const o={};for(const s of e.methodsArray)o[s.name]=d(s,t,r,n);return o}(e,t,r,n);if(e instanceof o.Type)return h(e,n);if(e instanceof o.Enum)return function(e,t){const r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:r.$type.toObject(r,a),fileDescriptorProtos:t}}(e,n);throw new Error("Type mismatch in reflection object handling")}function f(e,t){const r={};e.resolveAll();const n=e.toDescriptor("proto3").file.map((e=>Buffer.from(s.FileDescriptorProto.encode(e).finish())));for(const[o,s]of c(e,""))r[o]=p(s,o,t,n);return r}t.J_=function(e,t){return f((0,i.loadProtosWithOptionsSync)(e,t),t)},(0,i.addCommonProtos)()},15969:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addCommonProtos=t.loadProtosWithOptionsSync=t.loadProtosWithOptions=void 0;const n=r(57147),o=r(71017),s=r(43281);function i(e,t){const r=e.resolvePath;e.resolvePath=(e,s)=>{if(o.isAbsolute(s))return s;for(const e of t){const t=o.join(e,s);try{return n.accessSync(t,n.constants.R_OK),t}catch(e){continue}}return process.emitWarning(`${s} not found in any of the include paths ${t}`),r(e,s)}}t.loadProtosWithOptions=async function(e,t){const r=new s.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))return Promise.reject(new Error("The includeDirs option must be an array"));i(r,t.includeDirs)}const n=await r.load(e,t);return n.resolveAll(),n},t.loadProtosWithOptionsSync=function(e,t){const r=new s.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))throw new Error("The includeDirs option must be an array");i(r,t.includeDirs)}const n=r.loadSync(e,t);return n.resolveAll(),n},t.addCommonProtos=function(){const e=r(44784),t=r(43571),n=r(73342),o=r(58783);s.common("api",e.nested.google.nested.protobuf.nested),s.common("descriptor",t.nested.google.nested.protobuf.nested),s.common("source_context",n.nested.google.nested.protobuf.nested),s.common("type",o.nested.google.nested.protobuf.nested)}},9797:e=>{e.exports=r;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var o={},s={};function i(e,t){var r,n,i;return t?(i=0<=(e>>>=0)&&e<256)&&(n=s[e])?n:(r=c(e,(0|e)<0?-1:0,!0),i&&(s[e]=r),r):(i=-128<=(e|=0)&&e<128)&&(n=o[e])?n:(r=c(e,e<0?-1:0,!1),i&&(o[e]=r),r)}function a(e,t){if(isNaN(e))return t?y:m;if(t){if(e<0)return y;if(e>=p)return E}else{if(e<=-f)return w;if(e+1>=f)return S}return e<0?a(-e,t).neg():c(e%h|0,e/h|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=i,r.fromNumber=a,r.fromBits=c;var l=Math.pow;function u(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return u(e.substring(1),t,r).neg();for(var o=a(l(r,8)),s=m,i=0;i<e.length;i+=8){var c=Math.min(8,e.length-i),d=parseInt(e.substring(i,i+c),r);if(c<8){var h=a(l(r,c));s=s.mul(h).add(a(d))}else s=(s=s.mul(o)).add(a(d))}return s.unsigned=t,s}function d(e,t){return"number"==typeof e?a(e,t):"string"==typeof e?u(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=u,r.fromValue=d;var h=4294967296,p=h*h,f=p/2,g=i(1<<24),m=i(0);r.ZERO=m;var y=i(0,!0);r.UZERO=y;var v=i(1);r.ONE=v;var _=i(1,!0);r.UONE=_;var b=i(-1);r.NEG_ONE=b;var S=c(-1,2147483647,!1);r.MAX_VALUE=S;var E=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=E;var w=c(0,-2147483648,!1);r.MIN_VALUE=w;var A=r.prototype;A.toInt=function(){return this.unsigned?this.low>>>0:this.low},A.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},A.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(w)){var t=a(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=a(l(e,6),this.unsigned),s=this,i="";;){var c=s.div(o),u=(s.sub(c.mul(o)).toInt()>>>0).toString(e);if((s=c).isZero())return u+i;for(;u.length<6;)u="0"+u;i=""+u+i}},A.getHighBits=function(){return this.high},A.getHighBitsUnsigned=function(){return this.high>>>0},A.getLowBits=function(){return this.low},A.getLowBitsUnsigned=function(){return this.low>>>0},A.getNumBitsAbs=function(){if(this.isNegative())return this.eq(w)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},A.isZero=function(){return 0===this.high&&0===this.low},A.eqz=A.isZero,A.isNegative=function(){return!this.unsigned&&this.high<0},A.isPositive=function(){return this.unsigned||this.high>=0},A.isOdd=function(){return 1==(1&this.low)},A.isEven=function(){return 0==(1&this.low)},A.equals=function(e){return n(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},A.eq=A.equals,A.notEquals=function(e){return!this.eq(e)},A.neq=A.notEquals,A.ne=A.notEquals,A.lessThan=function(e){return this.comp(e)<0},A.lt=A.lessThan,A.lessThanOrEqual=function(e){return this.comp(e)<=0},A.lte=A.lessThanOrEqual,A.le=A.lessThanOrEqual,A.greaterThan=function(e){return this.comp(e)>0},A.gt=A.greaterThan,A.greaterThanOrEqual=function(e){return this.comp(e)>=0},A.gte=A.greaterThanOrEqual,A.ge=A.greaterThanOrEqual,A.compare=function(e){if(n(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},A.comp=A.compare,A.negate=function(){return!this.unsigned&&this.eq(w)?w:this.not().add(v)},A.neg=A.negate,A.add=function(e){n(e)||(e=d(e));var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,s=65535&this.low,i=e.high>>>16,a=65535&e.high,l=e.low>>>16,u=0,h=0,p=0,f=0;return p+=(f+=s+(65535&e.low))>>>16,h+=(p+=o+l)>>>16,u+=(h+=r+a)>>>16,u+=t+i,c((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},A.subtract=function(e){return n(e)||(e=d(e)),this.add(e.neg())},A.sub=A.subtract,A.multiply=function(e){if(this.isZero())return m;if(n(e)||(e=d(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(w))return e.isOdd()?w:m;if(e.eq(w))return this.isOdd()?w:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return a(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=65535&this.high,s=this.low>>>16,i=65535&this.low,l=e.high>>>16,u=65535&e.high,h=e.low>>>16,p=65535&e.low,f=0,y=0,v=0,_=0;return v+=(_+=i*p)>>>16,y+=(v+=s*p)>>>16,v&=65535,y+=(v+=i*h)>>>16,f+=(y+=o*p)>>>16,y&=65535,f+=(y+=s*h)>>>16,y&=65535,f+=(y+=i*u)>>>16,f+=r*p+o*h+s*u+i*l,c((v&=65535)<<16|(_&=65535),(f&=65535)<<16|(y&=65535),this.unsigned)},A.mul=A.multiply,A.divide=function(e){if(n(e)||(e=d(e)),e.isZero())throw Error("division by zero");var r,o,s;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return _;s=y}else{if(this.eq(w))return e.eq(v)||e.eq(b)?w:e.eq(w)?v:(r=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?v:b:(o=this.sub(e.mul(r)),s=r.add(o.div(e)));if(e.eq(w))return this.unsigned?y:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=m}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(r)/Math.LN2),u=i<=48?1:l(2,i-48),h=a(r),p=h.mul(e);p.isNegative()||p.gt(o);)p=(h=a(r-=u,this.unsigned)).mul(e);h.isZero()&&(h=v),s=s.add(h),o=o.sub(p)}return s},A.div=A.divide,A.modulo=function(e){return n(e)||(e=d(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},A.mod=A.modulo,A.rem=A.modulo,A.not=function(){return c(~this.low,~this.high,this.unsigned)},A.and=function(e){return n(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},A.or=function(e){return n(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},A.xor=function(e){return n(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},A.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},A.shl=A.shiftLeft,A.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},A.shr=A.shiftRight,A.shiftRightUnsigned=function(e){if(n(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},A.shru=A.shiftRightUnsigned,A.shr_u=A.shiftRightUnsigned,A.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},A.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},A.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},A.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},A.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},81143:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHttpTransport=void 0;var n=r(13685),o=r(95687),s=r(57310),i=r(44109);t.NodeHttpTransport=function(){return function(e){return new a(e)}};var a=function(){function e(e){this.options=e}return e.prototype.sendMessage=function(e){this.options.methodDefinition.requestStream||this.options.methodDefinition.responseStream||this.request.setHeader("Content-Length",e.byteLength),this.request.write(function(e){for(var t=Buffer.alloc(e.byteLength),r=0;r<t.length;r++)t[r]=e[r];return t}(e)),this.request.end()},e.prototype.finishSend=function(){},e.prototype.responseCallback=function(e){var t=this;this.options.debug&&console.log("NodeHttp.response",e.statusCode);var r=function(e){var t={};for(var r in e){var n=e[r];e.hasOwnProperty(r)&&void 0!==n&&(t[r]=n)}return t}(e.headers);this.options.onHeaders(new i.grpc.Metadata(r),e.statusCode),e.on("data",(function(e){t.options.debug&&console.log("NodeHttp.data",e),t.options.onChunk(function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e[r];return t}(e))})),e.on("end",(function(){t.options.debug&&console.log("NodeHttp.end"),t.options.onEnd()}))},e.prototype.start=function(e){var t=this,r={};e.forEach((function(e,t){r[e]=t.join(", ")}));var i=s.parse(this.options.url),a={host:i.hostname,port:i.port?parseInt(i.port):void 0,path:i.path,headers:r,method:"POST"};"https:"===i.protocol?this.request=o.request(a,this.responseCallback.bind(this)):this.request=n.request(a,this.responseCallback.bind(this)),this.request.on("error",(function(e){t.options.debug&&console.log("NodeHttp.error",e),t.options.onEnd(e)}))},e.prototype.cancel=function(){this.options.debug&&console.log("NodeHttp.abort"),this.request.abort()},e}()},44109:(e,t)=>{var r,n;!function(e,t){for(var r in t)e[r]=t[r];t.__esModule&&Object.defineProperty(e,"__esModule",{value:!0})}(t,(r={84:function(e){var t;t=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),o=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={splitValues:!1});var r,o=this;this.headersMap={},e&&("undefined"!=typeof Headers&&e instanceof Headers?n.getHeaderKeys(e).forEach((function(r){n.getHeaderValues(e,r).forEach((function(e){t.splitValues?o.append(r,n.splitHeaderValue(e)):o.append(r,e)}))})):"object"==typeof(r=e)&&"object"==typeof r.headersMap&&"function"==typeof r.forEach?e.forEach((function(e,t){o.append(e,t)})):"undefined"!=typeof Map&&e instanceof Map?e.forEach((function(e,t){o.append(t,e)})):"string"==typeof e?this.appendFromString(e):"object"==typeof e&&Object.getOwnPropertyNames(e).forEach((function(t){var r=e[t];Array.isArray(r)?r.forEach((function(e){o.append(t,e)})):o.append(t,r)})))}return e.prototype.appendFromString=function(e){for(var t=e.split("\r\n"),r=0;r<t.length;r++){var n=t[r],o=n.indexOf(":");if(o>0){var s=n.substring(0,o).trim(),i=n.substring(o+1).trim();this.append(s,i)}}},e.prototype.delete=function(e,t){var r=n.normalizeName(e);if(void 0===t)delete this.headersMap[r];else{var o=this.headersMap[r];if(o){var s=o.indexOf(t);s>=0&&o.splice(s,1),0===o.length&&delete this.headersMap[r]}}},e.prototype.append=function(e,t){var r=this,o=n.normalizeName(e);Array.isArray(this.headersMap[o])||(this.headersMap[o]=[]),Array.isArray(t)?t.forEach((function(e){r.headersMap[o].push(n.normalizeValue(e))})):this.headersMap[o].push(n.normalizeValue(t))},e.prototype.set=function(e,t){var r=n.normalizeName(e);if(Array.isArray(t)){var o=[];t.forEach((function(e){o.push(n.normalizeValue(e))})),this.headersMap[r]=o}else this.headersMap[r]=[n.normalizeValue(t)]},e.prototype.has=function(e,t){var r=this.headersMap[n.normalizeName(e)];if(!Array.isArray(r))return!1;if(void 0!==t){var o=n.normalizeValue(t);return r.indexOf(o)>=0}return!0},e.prototype.get=function(e){var t=this.headersMap[n.normalizeName(e)];return void 0!==t?t.concat():[]},e.prototype.forEach=function(e){var t=this;Object.getOwnPropertyNames(this.headersMap).forEach((function(r){e(r,t.headersMap[r])}),this)},e.prototype.toHeaders=function(){if("undefined"!=typeof Headers){var e=new Headers;return this.forEach((function(t,r){r.forEach((function(r){e.append(t,r)}))})),e}throw new Error("Headers class is not defined")},e}();t.BrowserHeaders=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.BrowserHeaders=n.BrowserHeaders},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iterateHeaders=function(e,t){for(var r=e[Symbol.iterator](),n=r.next();!n.done;)t(n.value[0]),n=r.next()},t.iterateHeadersKeys=function(e,t){for(var r=e.keys(),n=r.next();!n.done;)t(n.value),n=r.next()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.normalizeName=function(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()},t.normalizeValue=function(e){return"string"!=typeof e&&(e=String(e)),e},t.getHeaderValues=function(e,t){var r=e;if(r instanceof Headers&&r.getAll)return r.getAll(t);var n=r.get(t);return n&&"string"==typeof n?[n]:n},t.getHeaderKeys=function(e){var t=e,r={},o=[];return t.keys?n.iterateHeadersKeys(t,(function(e){r[e]||(r[e]=!0,o.push(e))})):t.forEach?t.forEach((function(e,t){r[t]||(r[t]=!0,o.push(t))})):n.iterateHeaders(t,(function(e){var t=e[0];r[t]||(r[t]=!0,o.push(t))})),o},t.splitHeaderValue=function(e){var t=[];return e.split(", ").forEach((function(e){e.split(",").forEach((function(e){t.push(e)}))})),t}}])},e.exports=t()},617:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChunkParser=t.ChunkType=t.encodeASCII=t.decodeASCII=void 0;var n,o=r(65);function s(e){return 9===(t=e)||10===t||13===t||e>=32&&e<=126;var t}function i(e){for(var t=0;t!==e.length;++t)if(!s(e[t]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(e))}function a(e){return 128==(128&e.getUint8(0))}function c(e){return e.getUint32(1,!1)}function l(e,t,r){return e.byteLength-t>=r}function u(e,t,r){if(e.slice)return e.slice(t,r);var n=e.length;void 0!==r&&(n=r);for(var o=new Uint8Array(n-t),s=0,i=t;i<n;i++)o[s++]=e[i];return o}t.decodeASCII=i,t.encodeASCII=function(e){for(var t=new Uint8Array(e.length),r=0;r!==e.length;++r){var n=e.charCodeAt(r);if(!s(n))throw new Error("Metadata contains invalid ASCII");t[r]=n}return t},function(e){e[e.MESSAGE=1]="MESSAGE",e[e.TRAILERS=2]="TRAILERS"}(n=t.ChunkType||(t.ChunkType={}));var d=function(){function e(){this.buffer=null,this.position=0}return e.prototype.parse=function(e,t){if(0===e.length&&t)return[];var r,s=[];if(null==this.buffer)this.buffer=e,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=e,this.position=0;else{var d=this.buffer.byteLength-this.position,h=new Uint8Array(d+e.byteLength),p=u(this.buffer,this.position);h.set(p,0);var f=new Uint8Array(e);h.set(f,d),this.buffer=h,this.position=0}for(;;){if(!l(this.buffer,this.position,5))return s;var g=u(this.buffer,this.position,this.position+5),m=new DataView(g.buffer,g.byteOffset,g.byteLength),y=c(m);if(!l(this.buffer,this.position,5+y))return s;var v=u(this.buffer,this.position+5,this.position+5+y);if(this.position+=5+y,a(m))return s.push({chunkType:n.TRAILERS,trailers:(r=v,new o.Metadata(i(r)))}),s;s.push({chunkType:n.MESSAGE,data:v})}},e}();t.ChunkParser=d},8:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.httpStatusToCode=t.Code=void 0,function(e){e[e.OK=0]="OK",e[e.Canceled=1]="Canceled",e[e.Unknown=2]="Unknown",e[e.InvalidArgument=3]="InvalidArgument",e[e.DeadlineExceeded=4]="DeadlineExceeded",e[e.NotFound=5]="NotFound",e[e.AlreadyExists=6]="AlreadyExists",e[e.PermissionDenied=7]="PermissionDenied",e[e.ResourceExhausted=8]="ResourceExhausted",e[e.FailedPrecondition=9]="FailedPrecondition",e[e.Aborted=10]="Aborted",e[e.OutOfRange=11]="OutOfRange",e[e.Unimplemented=12]="Unimplemented",e[e.Internal=13]="Internal",e[e.Unavailable=14]="Unavailable",e[e.DataLoss=15]="DataLoss",e[e.Unauthenticated=16]="Unauthenticated"}(r=t.Code||(t.Code={})),t.httpStatusToCode=function(e){switch(e){case 0:return r.Internal;case 200:return r.OK;case 400:return r.InvalidArgument;case 401:return r.Unauthenticated;case 403:return r.PermissionDenied;case 404:return r.NotFound;case 409:return r.Aborted;case 412:return r.FailedPrecondition;case 429:return r.ResourceExhausted;case 499:return r.Canceled;case 500:default:return r.Unknown;case 501:return r.Unimplemented;case 503:return r.Unavailable;case 504:return r.DeadlineExceeded}}},934:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.client=void 0;var n=r(65),o=r(617),s=r(8),i=r(346),a=r(57),c=r(882);t.client=function(e,t){return new l(e,t)};var l=function(){function e(e,t){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new o.ChunkParser,this.methodDefinition=e,this.props=t,this.createTransport()}return e.prototype.createTransport=function(){var e=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,t={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:e,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(t):this.transport=a.makeDefaultTransport(t)},e.prototype.onTransportHeaders=function(e,t){if(this.props.debug&&i.debug("onHeaders",e,t),this.closed)this.props.debug&&i.debug("grpc.onHeaders received after request was closed - ignoring");else if(0===t);else{this.responseHeaders=e,this.props.debug&&i.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var r=u(e);this.props.debug&&i.debug("onHeaders.gRPCStatus",r);var n=r&&r>=0?r:s.httpStatusToCode(t);this.props.debug&&i.debug("onHeaders.code",n);var o=e.get("grpc-message")||[];if(this.props.debug&&i.debug("onHeaders.gRPCMessage",o),this.rawOnHeaders(e),n!==s.Code.OK){var a=this.decodeGRPCStatus(o[0]);this.rawOnError(n,a,e)}}},e.prototype.onTransportChunk=function(e){var t=this;if(this.closed)this.props.debug&&i.debug("grpc.onChunk received after request was closed - ignoring");else{var r=[];try{r=this.parser.parse(e)}catch(e){return this.props.debug&&i.debug("onChunk.parsing error",e,e.message),void this.rawOnError(s.Code.Internal,"parsing error: "+e.message)}r.forEach((function(e){if(e.chunkType===o.ChunkType.MESSAGE){var r=t.methodDefinition.responseType.deserializeBinary(e.data);t.rawOnMessage(r)}else e.chunkType===o.ChunkType.TRAILERS&&(t.responseHeaders?(t.responseTrailers=new n.Metadata(e.trailers),t.props.debug&&i.debug("onChunk.trailers",t.responseTrailers)):(t.responseHeaders=new n.Metadata(e.trailers),t.rawOnHeaders(t.responseHeaders)))}))}},e.prototype.onTransportEnd=function(){if(this.props.debug&&i.debug("grpc.onEnd"),this.closed)this.props.debug&&i.debug("grpc.onEnd received after request was closed - ignoring");else if(void 0!==this.responseTrailers){var e=u(this.responseTrailers);if(null!==e){var t=this.responseTrailers.get("grpc-message"),r=this.decodeGRPCStatus(t[0]);this.rawOnEnd(e,r,this.responseTrailers)}else this.rawOnError(s.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(void 0===this.responseHeaders)return void this.rawOnError(s.Code.Unknown,"Response closed without headers");var n=u(this.responseHeaders),o=this.responseHeaders.get("grpc-message");if(this.props.debug&&i.debug("grpc.headers only response ",n,o),null===n)return void this.rawOnEnd(s.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var a=this.decodeGRPCStatus(o[0]);this.rawOnEnd(n,a,this.responseHeaders)}},e.prototype.decodeGRPCStatus=function(e){if(!e)return"";try{return decodeURIComponent(e)}catch(t){return e}},e.prototype.rawOnEnd=function(e,t,r){var n=this;this.props.debug&&i.debug("rawOnEnd",e,t,r),this.completed||(this.completed=!0,this.onEndCallbacks.forEach((function(o){if(!n.closed)try{o(e,t,r)}catch(e){setTimeout((function(){throw e}))}})))},e.prototype.rawOnHeaders=function(e){this.props.debug&&i.debug("rawOnHeaders",e),this.completed||this.onHeadersCallbacks.forEach((function(t){try{t(e)}catch(e){setTimeout((function(){throw e}))}}))},e.prototype.rawOnError=function(e,t,r){var o=this;void 0===r&&(r=new n.Metadata),this.props.debug&&i.debug("rawOnError",e,t),this.completed||(this.completed=!0,this.onEndCallbacks.forEach((function(n){if(!o.closed)try{n(e,t,r)}catch(e){setTimeout((function(){throw e}))}})))},e.prototype.rawOnMessage=function(e){var t=this;this.props.debug&&i.debug("rawOnMessage",e.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach((function(r){if(!t.closed)try{r(e)}catch(e){setTimeout((function(){throw e}))}}))},e.prototype.onHeaders=function(e){this.onHeadersCallbacks.push(e)},e.prototype.onMessage=function(e){this.onMessageCallbacks.push(e)},e.prototype.onEnd=function(e){this.onEndCallbacks.push(e)},e.prototype.start=function(e){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var t=new n.Metadata(e||{});t.set("content-type","application/grpc-web+proto"),t.set("x-grpc-web","1"),this.transport.start(t)},e.prototype.send=function(e){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var t=c.frameRequest(e);this.transport.sendMessage(t)},e.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},e.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&i.debug("request.abort aborting request"),this.transport.cancel()},e}();function u(e){var t=e.get("grpc-status")||[];if(t.length>0)try{var r=t[0];return parseInt(r,10)}catch(e){return null}return null}},346:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debug=void 0,t.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug?console.debug.apply(null,e):console.log.apply(null,e)}},607:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.grpc=void 0;var n,o=r(84),s=r(57),i=r(229),a=r(540),c=r(210),l=r(859),u=r(8),d=r(938),h=r(35),p=r(934);(n=t.grpc||(t.grpc={})).setDefaultTransport=s.setDefaultTransportFactory,n.CrossBrowserHttpTransport=l.CrossBrowserHttpTransport,n.FetchReadableStreamTransport=i.FetchReadableStreamTransport,n.XhrTransport=c.XhrTransport,n.WebsocketTransport=a.WebsocketTransport,n.Code=u.Code,n.Metadata=o.BrowserHeaders,n.client=function(e,t){return p.client(e,t)},n.invoke=d.invoke,n.unary=h.unary},938:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invoke=void 0;var n=r(934);t.invoke=function(e,t){if(e.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var r=n.client(e,{host:t.host,transport:t.transport,debug:t.debug});return t.onHeaders&&r.onHeaders(t.onHeaders),t.onMessage&&r.onMessage(t.onMessage),t.onEnd&&r.onEnd(t.onEnd),r.start(t.metadata),r.send(t.request),r.finishSend(),{close:function(){r.close()}}}},65:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=r(84);Object.defineProperty(t,"Metadata",{enumerable:!0,get:function(){return n.BrowserHeaders}})},57:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDefaultTransport=t.setDefaultTransportFactory=void 0;var n=r(859),o=function(e){return n.CrossBrowserHttpTransport({withCredentials:!1})(e)};t.setDefaultTransportFactory=function(e){o=e},t.makeDefaultTransport=function(e){return o(e)}},229:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.detectFetchSupport=t.FetchReadableStreamTransport=void 0;var o=r(65),s=r(346);t.FetchReadableStreamTransport=function(e){return function(t){return function(e,t){return e.debug&&s.debug("fetchRequest",e),new i(e,t)}(t,e)}};var i=function(){function e(e,t){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=e,this.init=t}return e.prototype.pump=function(e,t){var r=this;if(this.reader=e,this.cancelled)return this.options.debug&&s.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch((function(e){r.options.debug&&s.debug("Fetch.pump.reader.cancel exception",e)}));this.reader.read().then((function(e){if(e.done)return r.options.onEnd(),t;r.options.onChunk(e.value),r.pump(r.reader,t)})).catch((function(e){r.cancelled?r.options.debug&&s.debug("Fetch.catch - request cancelled"):(r.cancelled=!0,r.options.debug&&s.debug("Fetch.catch",e.message),r.options.onEnd(e))}))},e.prototype.send=function(e){var t=this;fetch(this.options.url,n(n({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:e,signal:this.controller&&this.controller.signal})).then((function(e){if(t.options.debug&&s.debug("Fetch.response",e),t.options.onHeaders(new o.Metadata(e.headers),e.status),!e.body)return e;t.pump(e.body.getReader(),e)})).catch((function(e){t.cancelled?t.options.debug&&s.debug("Fetch.catch - request cancelled"):(t.cancelled=!0,t.options.debug&&s.debug("Fetch.catch",e.message),t.options.onEnd(e))}))},e.prototype.sendMessage=function(e){this.send(e)},e.prototype.finishSend=function(){},e.prototype.start=function(e){this.metadata=e},e.prototype.cancel=function(){var e=this;this.cancelled?this.options.debug&&s.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&s.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&s.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&s.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch((function(t){e.options.debug&&s.debug("Fetch.cancel.reader.cancel exception",t)}))):this.options.debug&&s.debug("Fetch.cancel before reader"))},e}();t.detectFetchSupport=function(){return"undefined"!=typeof Response&&Response.prototype.hasOwnProperty("body")&&"function"==typeof Headers}},859:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CrossBrowserHttpTransport=void 0;var n=r(229),o=r(210);t.CrossBrowserHttpTransport=function(e){if(n.detectFetchSupport()){var t={credentials:e.withCredentials?"include":"same-origin"};return n.FetchReadableStreamTransport(t)}return o.XhrTransport({withCredentials:e.withCredentials})}},210:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.stringToArrayBuffer=t.MozChunkedArrayBufferXHR=t.XHR=t.XhrTransport=void 0;var s=r(65),i=r(346),a=r(849);t.XhrTransport=function(e){return function(t){if(a.detectMozXHRSupport())return new l(t,e);if(a.detectXHROverrideMimeTypeSupport())return new c(t,e);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var c=function(){function e(e,t){this.options=e,this.init=t}return e.prototype.onProgressEvent=function(){this.options.debug&&i.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var e=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var t=d(e);this.options.onChunk(t)},e.prototype.onLoadEvent=function(){this.options.debug&&i.debug("XHR.onLoadEvent"),this.options.onEnd()},e.prototype.onStateChange=function(){this.options.debug&&i.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new s.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},e.prototype.sendMessage=function(e){this.xhr.send(e)},e.prototype.finishSend=function(){},e.prototype.start=function(e){var t=this;this.metadata=e;var r=new XMLHttpRequest;this.xhr=r,r.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach((function(e,t){r.setRequestHeader(e,t.join(", "))})),r.withCredentials=Boolean(this.init.withCredentials),r.addEventListener("readystatechange",this.onStateChange.bind(this)),r.addEventListener("progress",this.onProgressEvent.bind(this)),r.addEventListener("loadend",this.onLoadEvent.bind(this)),r.addEventListener("error",(function(e){t.options.debug&&i.debug("XHR.error",e),t.options.onEnd(e.error)}))},e.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},e.prototype.cancel=function(){this.options.debug&&i.debug("XHR.abort"),this.xhr.abort()},e}();t.XHR=c;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.configureXhr=function(){this.options.debug&&i.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},t.prototype.onProgressEvent=function(){var e=this.xhr.response;this.options.debug&&i.debug("MozXHR.onProgressEvent: ",new Uint8Array(e)),this.options.onChunk(new Uint8Array(e))},t}(c);function u(e,t){var r=e.charCodeAt(t);if(r>=55296&&r<=56319){var n=e.charCodeAt(t+1);n>=56320&&n<=57343&&(r=65536+(r-55296<<10)+(n-56320))}return r}function d(e){for(var t=new Uint8Array(e.length),r=0,n=0;n<e.length;n++){var o=String.prototype.codePointAt?e.codePointAt(n):u(e,n);t[r++]=255&o}return t}t.MozChunkedArrayBufferXHR=l,t.stringToArrayBuffer=d},849:(e,t)=>{"use strict";var r;function n(e){var t=function(){if(void 0!==r)return r;if(XMLHttpRequest){r=new XMLHttpRequest;try{r.open("GET","https://localhost")}catch(e){}}return r}();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.detectXHROverrideMimeTypeSupport=t.detectMozXHRSupport=t.xhrSupportsResponseType=void 0,t.xhrSupportsResponseType=n,t.detectMozXHRSupport=function(){return"undefined"!=typeof XMLHttpRequest&&n("moz-chunked-arraybuffer")},t.detectXHROverrideMimeTypeSupport=function(){return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketTransport=void 0;var n,o=r(346),s=r(617);!function(e){e[e.FINISH_SEND=1]="FINISH_SEND"}(n||(n={}));var i=new Uint8Array([1]);t.WebsocketTransport=function(){return function(e){return function(e){e.debug&&o.debug("websocketRequest",e);var t,r=function(e){if("https://"===e.substr(0,8))return"wss://"+e.substr(8);if("http://"===e.substr(0,7))return"ws://"+e.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(e.url),a=[];function c(e){if(e===n.FINISH_SEND)t.send(i);else{var r=e,o=new Int8Array(r.byteLength+1);o.set(new Uint8Array([0])),o.set(r,1),t.send(o)}}return{sendMessage:function(e){t&&t.readyState!==t.CONNECTING?c(e):a.push(e)},finishSend:function(){t&&t.readyState!==t.CONNECTING?c(n.FINISH_SEND):a.push(n.FINISH_SEND)},start:function(n){(t=new WebSocket(r,["grpc-websockets"])).binaryType="arraybuffer",t.onopen=function(){var r;e.debug&&o.debug("websocketRequest.onopen"),t.send((r="",n.forEach((function(e,t){r+=e+": "+t.join(", ")+"\r\n"})),s.encodeASCII(r))),a.forEach((function(e){c(e)}))},t.onclose=function(t){e.debug&&o.debug("websocketRequest.onclose",t),e.onEnd()},t.onerror=function(t){e.debug&&o.debug("websocketRequest.onerror",t)},t.onmessage=function(t){e.onChunk(new Uint8Array(t.data))}},cancel:function(){e.debug&&o.debug("websocket.abort"),t.close()}}}(e)}}},35:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unary=void 0;var n=r(65),o=r(934);t.unary=function(e,t){if(e.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(e.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var r=null,s=null,i=o.client(e,{host:t.host,transport:t.transport,debug:t.debug});return i.onHeaders((function(e){r=e})),i.onMessage((function(e){s=e})),i.onEnd((function(e,o,i){t.onEnd({status:e,statusMessage:o,headers:r||new n.Metadata,message:s,trailers:i})})),i.start(t.metadata),i.send(t.request),i.finishSend(),{close:function(){i.close()}}}},882:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.frameRequest=void 0,t.frameRequest=function(e){var t=e.serializeBinary(),r=new ArrayBuffer(t.byteLength+5);return new DataView(r,1,4).setUint32(0,t.length,!1),new Uint8Array(r,5).set(t),new Uint8Array(r)}}},n={},function e(t){if(n[t])return n[t].exports;var o=n[t]={exports:{}};return r[t].call(o.exports,o,o.exports,e),o.exports}(607)))},34537:e=>{"use strict";e.exports=function(e,t){for(var r=new Array(arguments.length-1),n=0,o=2,s=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise((function(o,i){r[n]=function(e){if(s)if(s=!1,e)i(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t)}};try{e.apply(t||null,r)}catch(e){s&&(s=!1,i(e))}}))}},97419:(e,t)=>{"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),o=new Array(123),s=0;s<64;)o[n[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,r){for(var o,s=null,i=[],a=0,c=0;t<r;){var l=e[t++];switch(c){case 0:i[a++]=n[l>>2],o=(3&l)<<4,c=1;break;case 1:i[a++]=n[o|l>>4],o=(15&l)<<2,c=2;break;case 2:i[a++]=n[o|l>>6],i[a++]=n[63&l],c=0}a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,i)),a=0)}return c&&(i[a++]=n[o],i[a++]=61,1===c&&(i[a++]=61)),s?(a&&s.push(String.fromCharCode.apply(String,i.slice(0,a))),s.join("")):String.fromCharCode.apply(String,i.slice(0,a))};var i="invalid encoding";r.decode=function(e,t,r){for(var n,s=r,a=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&a>1)break;if(void 0===(l=o[l]))throw Error(i);switch(a){case 0:n=l,a=1;break;case 1:t[r++]=n<<2|(48&l)>>4,n=l,a=2;break;case 2:t[r++]=(15&n)<<4|(60&l)>>2,n=l,a=3;break;case 3:t[r++]=(3&n)<<6|l,a=0}}if(1===a)throw Error(i);return r-s},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},75124:e=>{"use strict";function t(e,r){"string"==typeof e&&(r=e,e=void 0);var n=[];function o(e){if("string"!=typeof e){var r=s();if(t.verbose&&console.log("codegen: "+r),r="return "+r,e){for(var i=Object.keys(e),a=new Array(i.length+1),c=new Array(i.length),l=0;l<i.length;)a[l]=i[l],c[l]=e[i[l++]];return a[l]=r,Function.apply(null,a).apply(null,c)}return Function(r)()}for(var u=new Array(arguments.length-1),d=0;d<u.length;)u[d]=arguments[++d];if(d=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var r=u[d++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"})),d!==u.length)throw Error("parameter count mismatch");return n.push(e),o}function s(t){return"function "+(t||r||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return o.toString=s,o}e.exports=t,t.verbose=!1},19211:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},49054:(e,t,r)=>{"use strict";e.exports=s;var n=r(34537),o=r(67199)("fs");function s(e,t,r){return"function"==typeof t?(r=t,t={}):t||(t={}),r?!t.xhr&&o&&o.readFile?o.readFile(e,(function(n,o){return n&&"undefined"!=typeof XMLHttpRequest?s.xhr(e,t,r):n?r(n):r(null,t.binary?o:o.toString("utf8"))})):s.xhr(e,t,r):n(s,this,e,t)}s.xhr=function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(0!==n.status&&200!==n.status)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var o=0;o<n.responseText.length;++o)e.push(255&n.responseText.charCodeAt(o))}return r(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return r(null,n.responseText)}},t.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()}},10945:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function s(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function i(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function a(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?o:s,e.writeFloatBE=n?s:o,e.readFloatLE=n?i:a,e.readFloatBE=n?a:i}():function(){function t(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var s=Math.floor(Math.log(t)/Math.LN2);e((o<<31|s+127<<23|8388607&Math.round(t*Math.pow(2,-s)*8388608))>>>0,r,n)}}function i(e,t,r){var n=e(t,r),o=2*(n>>31)+1,s=n>>>23&255,i=8388607&n;return 255===s?i?NaN:o*(1/0):0===s?1401298464324817e-60*o*i:o*Math.pow(2,s-150)*(i+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=i.bind(null,o),e.readFloatBE=i.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function s(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function i(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function a(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?o:s,e.writeDoubleBE=n?s:o,e.readDoubleLE=n?i:a,e.readDoubleBE=n?a:i}():function(){function t(e,t,r,n,o,s){var i=n<0?1:0;if(i&&(n=-n),0===n)e(0,o,s+t),e(1/n>0?0:2147483648,o,s+r);else if(isNaN(n))e(0,o,s+t),e(2146959360,o,s+r);else if(n>17976931348623157e292)e(0,o,s+t),e((i<<31|2146435072)>>>0,o,s+r);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,o,s+t),e((i<<31|a/4294967296)>>>0,o,s+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=n*Math.pow(2,-c))>>>0,o,s+t),e((i<<31|c+1023<<20|1048576*a&1048575)>>>0,o,s+r)}}}function i(e,t,r,n,o){var s=e(n,o+t),i=e(n,o+r),a=2*(i>>31)+1,c=i>>>20&2047,l=4294967296*(1048575&i)+s;return 2047===c?l?NaN:a*(1/0):0===c?5e-324*a*l:a*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=i.bind(null,o,0,4),e.readDoubleBE=i.bind(null,s,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},67199:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},18626:(e,t)=>{"use strict";var r=t,n=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},o=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=n(e),o="";r&&(o=t.shift()+"/");for(var s=0;s<t.length;)".."===t[s]?s>0&&".."!==t[s-1]?t.splice(--s,2):r?t.splice(s,1):++s:"."===t[s]?t.splice(s,1):++s;return o+t.join("/")};r.resolve=function(e,t,r){return r||(t=o(t)),n(t)?t:(r||(e=o(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?o(e+"/"+t):t)}},76662:e=>{"use strict";e.exports=function(e,t,r){var n=r||8192,o=n>>>1,s=null,i=n;return function(r){if(r<1||r>o)return e(r);i+r>n&&(s=e(n),i=0);var a=t.call(s,i,i+=r);return 7&i&&(i=1+(7|i)),a}}},94997:(e,t)=>{"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,s=[],i=0;t<r;)(n=e[t++])<128?s[i++]=n:n>191&&n<224?s[i++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,s[i++]=55296+(n>>10),s[i++]=56320+(1023&n)):s[i++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],i>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),i=0);return o?(i&&o.push(String.fromCharCode.apply(String,s.slice(0,i))),o.join("")):String.fromCharCode.apply(String,s.slice(0,i))},r.write=function(e,t,r){for(var n,o,s=r,i=0;i<e.length;++i)(n=e.charCodeAt(i))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(i+1)))?(n=65536+((1023&n)<<10)+(1023&o),++i,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-s}},30060:(e,t,r)=>{"use strict";function n(e,t){return new Promise((function(r,n){var o=setTimeout((function(){n(Error("Promise timed out"))}),t);e.then((function(e){return clearTimeout(o),r(e)})).catch(n)}))}function o(e,t,r){var o;return(o=r,new Promise((function(e){return setTimeout(e,o)}))).then((function(){return n(function(){try{return Promise.resolve(t(e))}catch(e){return Promise.reject(e)}}(),1e3)})).catch((function(t){null==e||e.log("warn","Callback Error",{error:t}),null==e||e.stats.increment("callback_error")})).then((function(){return e}))}r.r(t),r.d(t,{Analytics:()=>X,Context:()=>H,default:()=>Z});var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},s(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var a=function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};function c(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))}function l(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function u(e,t,r){if(r||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function d(e){return"string"==typeof e}function h(e){return"object"===Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}Object.create,Object.create;var p=function(e){function t(t,r){var n=e.call(this,r)||this;return n.field=t,n}return i(t,e),t}(Error);const f="1.0.0-beta.24";function g(e){var t=Math.random()+1,r=e.minTimeout,n=void 0===r?500:r,o=e.factor,s=void 0===o?2:o,i=e.attempt,a=e.maxTimeout,c=void 0===a?1/0:a;return Math.min(t*n*Math.pow(s,i),c)}var m=function(){function e(){this.callbacks={}}return e.prototype.on=function(e,t){return this.callbacks[e]?this.callbacks[e].push(t):this.callbacks[e]=[t],this},e.prototype.once=function(e,t){var r=this,n=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];r.off(e,n),t.apply(r,o)};return this.on(e,n),this},e.prototype.off=function(e,t){var r,n=(null!==(r=this.callbacks[e])&&void 0!==r?r:[]).filter((function(e){return e!==t}));return this.callbacks[e]=n,this},e.prototype.emit=function(e){for(var t,r=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var s=null!==(t=this.callbacks[e])&&void 0!==t?t:[];return s.forEach((function(e){e.apply(r,n)})),this},e}();const y=()=>"object"==typeof process&&process&&"object"==typeof process.env&&process.env&&"string"==typeof process.version?"node":"object"==typeof window?"browser":"undefined"!=typeof WebSocketPair?"cloudflare-worker":"string"==typeof EdgeRuntime?"vercel-edge":"undefined"!=typeof WorkerGlobalScope&&"function"==typeof importScripts?"web-worker":"unknown";class v{constructor(){this.onabort=null,this.aborted=!1,this.eventEmitter=new m}toString(){return"[object AbortSignal]"}get[Symbol.toStringTag](){return"AbortSignal"}removeEventListener(...e){this.eventEmitter.off(...e)}addEventListener(...e){this.eventEmitter.on(...e)}dispatchEvent(e){const t={type:e,target:this},r=`on${e}`;"function"==typeof this[r]&&this[r](t),this.eventEmitter.emit(e,t)}}class _{constructor(){this.signal=new v}abort(){this.signal.aborted||(this.signal.aborted=!0,this.signal.dispatchEvent("abort"))}toString(){return"[object AbortController]"}get[Symbol.toStringTag](){return"AbortController"}}const b=e=>{if("cloudflare-worker"===y())return[];const t=new(globalThis.AbortController||_),r=setTimeout((()=>{t.abort()}),e);return r?.unref?.(),[t.signal,r]},S=async(...e)=>{if(globalThis.fetch)return globalThis.fetch(...e);if("string"!=typeof EdgeRuntime)return(await r.e(292).then(r.bind(r,36292))).default(...e);throw new Error("Invariant: an edge runtime that does not support fetch should not exist")};for(var E,w=256,A=[];w--;)A[w]=(w+256).toString(16).substring(1);function T(){var e,t=0,r="";if(!E||w+16>256){for(E=Array(t=256);t--;)E[t]=256*Math.random()|0;t=w=0}for(;t<16;t++)e=E[w+t],r+=6==t?A[15&e|64]:8==t?A[63&e|128]:A[e],1&t&&t>1&&t<11&&(r+="-");return w++,r}class C{constructor(e){this.id=T(),this.items=[],this.sizeInBytes=0,this.maxEventCount=Math.max(1,e)}tryAdd(e){if(this.length===this.maxEventCount)return{success:!1,message:`Event limit of ${this.maxEventCount} has been exceeded.`};const t=this.calculateSize(e.context);return t>32768?{success:!1,message:"Event exceeds maximum event size of 32 KB"}:this.sizeInBytes+t>491520?{success:!1,message:"Event has caused batch size to exceed 480 KB"}:(this.items.push(e),this.sizeInBytes+=t,{success:!0})}get length(){return this.items.length}calculateSize(e){return encodeURI(JSON.stringify(e.event)).split(/%..|i/).length}getEvents(){return this.items.map((({context:e})=>e.event))}getContexts(){return this.items.map((e=>e.context))}resolveEvents(){this.items.forEach((({resolver:e,context:t})=>e(t)))}}var I=r(14300);function R(e){return new Promise((t=>setTimeout(t,e)))}function O(){}class k{constructor({host:e,path:t,maxRetries:r,maxEventsInBatch:n,flushInterval:o,writeKey:s,httpRequestTimeout:i},a){var c;this._emitter=a,this._maxRetries=r,this._maxEventsInBatch=Math.max(n,1),this._flushInterval=o,this._auth=(c=`${s}:`,I.Buffer.from(c).toString("base64")),this._url=((e,t)=>new URL(t||"",e).href.replace(/\/$/,""))(e??"https://api.segment.io",t??"/v1/batch"),this._httpRequestTimeout=i??1e4}createBatch(){this.pendingFlushTimeout&&clearTimeout(this.pendingFlushTimeout);const e=new C(this._maxEventsInBatch);return this._batch=e,this.pendingFlushTimeout=setTimeout((()=>{e===this._batch&&(this._batch=void 0),this.pendingFlushTimeout=void 0,e.length&&this.send(e).catch(O)}),this._flushInterval),e}clearBatch(){this.pendingFlushTimeout&&clearTimeout(this.pendingFlushTimeout),this._batch=void 0}flushAfterClose(e){e&&(this._closeAndFlushPendingItemsCount=e,this._batch&&this._batch.length===e&&(this.send(this._batch).catch(O),this.clearBatch()))}enqueue(e){const t=this._batch??this.createBatch(),{promise:r,resolve:n}=function(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),resolve:e,reject:t}}(),o={context:e,resolver:n};if(t.tryAdd(o).success){const e=t.length===this._closeAndFlushPendingItemsCount;return(t.length===this._maxEventsInBatch||e)&&(this.send(t).catch(O),this.clearBatch()),r}t.length&&(this.send(t).catch(O),this.clearBatch());const s=this.createBatch(),i=s.tryAdd(o);return i.success?(s.length===this._closeAndFlushPendingItemsCount&&(this.send(s).catch(O),this.clearBatch()),r):(e.setFailedDelivery({reason:new Error(i.message)}),Promise.resolve(e))}async send(e){this._closeAndFlushPendingItemsCount&&(this._closeAndFlushPendingItemsCount-=e.length);const t=e.getEvents(),r=JSON.stringify({batch:t}),n=this._maxRetries+1;let o=0;for(;o<n;){let t;o++;const[s,i]=b(this._httpRequestTimeout);try{const n={signal:s,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Basic ${this._auth}`,"User-Agent":"analytics-node-next/latest"},body:r};this._emitter.emit("http_request",{url:this._url,method:n.method,headers:n.headers,body:n.body});const o=await S(this._url,n);if(clearTimeout(i),o.ok)return void e.resolveEvents();if(400===o.status)return void N(e,new Error(`[${o.status}] ${o.statusText}`));t=new Error(`[${o.status}] ${o.statusText}`)}catch(e){t=e}if(o===n)return void N(e,t);await R(g({attempt:o,minTimeout:25,maxTimeout:1e3}))}}}function N(e,t){e.getContexts().forEach((e=>e.setFailedDelivery({reason:t}))),e.resolveEvents()}function P(e){function t(t){return function(e){e.updateEvent("context.library.name","@segment/analytics-node"),e.updateEvent("context.library.version",f);const t=y();"node"===t&&e.updateEvent("_metadata.nodeVersion",process.version),e.updateEvent("_metadata.jsRuntime",t)}(t),e.enqueue(t)}return{name:"Segment.io",type:"after",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),alias:t,group:t,identify:t,page:t,screen:t,track:t}}function M(e,t,r){t.split&&(t=t.split("."));for(var n,o,s=0,i=t.length,a=e;s<i&&"__proto__"!==(o=t[s++])&&"constructor"!==o&&"prototype"!==o;)a=a[o]=s===i?r:typeof(n=a[o])==typeof t?n:0*t[s]!=0||~(""+t[s]).indexOf(".")?{}:[]}var L=function(){function e(e){this.user=e.user,this.createMessageId=e.createMessageId}return e.prototype.track=function(e,t,r,n){return this.normalize(a(a({},this.baseEvent()),{event:e,type:"track",properties:null!=t?t:{},options:a({},r),integrations:a({},n)}))},e.prototype.page=function(e,t,r,n,o){var s,i={type:"page",properties:a({},r),options:a({},n),integrations:a({},o)};return null!==e&&(i.category=e,i.properties=null!==(s=i.properties)&&void 0!==s?s:{},i.properties.category=e),null!==t&&(i.name=t),this.normalize(a(a({},this.baseEvent()),i))},e.prototype.screen=function(e,t,r,n,o){var s={type:"screen",properties:a({},r),options:a({},n),integrations:a({},o)};return null!==e&&(s.category=e),null!==t&&(s.name=t),this.normalize(a(a({},this.baseEvent()),s))},e.prototype.identify=function(e,t,r,n){return this.normalize(a(a({},this.baseEvent()),{type:"identify",userId:e,traits:null!=t?t:{},options:a({},r),integrations:n}))},e.prototype.group=function(e,t,r,n){return this.normalize(a(a({},this.baseEvent()),{type:"group",traits:null!=t?t:{},options:a({},r),integrations:a({},n),groupId:e}))},e.prototype.alias=function(e,t,r,n){var o={userId:e,type:"alias",options:a({},r),integrations:a({},n)};return null!==t&&(o.previousId=t),void 0===e?this.normalize(a(a({},o),this.baseEvent())):this.normalize(a(a({},this.baseEvent()),o))},e.prototype.baseEvent=function(){var e={integrations:{},options:{}};if(!this.user)return e;var t=this.user;return t.id()&&(e.userId=t.id()),t.anonymousId()&&(e.anonymousId=t.anonymousId()),e},e.prototype.context=function(e){var t,r=["userId","anonymousId","timestamp"];delete e.integrations;var n=Object.keys(e),o=null!==(t=e.context)&&void 0!==t?t:{},s={};return n.forEach((function(t){"context"!==t&&(r.includes(t)?M(s,t,e[t]):M(o,t,e[t]))})),[o,s]},e.prototype.normalize=function(e){var t,r,n,o,s=Object.keys(null!==(t=e.integrations)&&void 0!==t?t:{}).reduce((function(t,r){var n,o;return a(a({},t),((n={})[r]=Boolean(null===(o=e.integrations)||void 0===o?void 0:o[r]),n))}),{});e.options=(n=e.options||{},o=function(e,t){return void 0!==t},Object.keys(n).filter((function(e){return o(0,n[e])})).reduce((function(e,t){return e[t]=n[t],e}),{}));var i=a(a({},s),null===(r=e.options)||void 0===r?void 0:r.integrations),c=e.options?this.context(e.options):[],l=c[0],u=c[1],f=(e.options,function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["options"])),g=a(a(a({timestamp:new Date},f),{integrations:i,context:l}),u),m=a(a({},g),{messageId:this.createMessageId()});return function(e){if(!e||"object"!=typeof e)throw new p("event","Event is missing");if(!d(e.type))throw new p("type","type is not a string");if("track"===e.type){if(!d(e.event))throw new p("event","Event is not a string");if(!h(e.properties))throw new p("properties","properties is not an object")}if(["group","identify"].includes(e.type)&&!h(e.traits))throw new p("traits","traits is not an object");if(!function(e){var t,r,n;return d(null!==(n=null!==(r=null!==(t=e.userId)&&void 0!==t?t:e.anonymousId)&&void 0!==r?r:e.groupId)&&void 0!==n?n:e.previousId)}(e))throw new p("userId/anonymousId/previousId/groupId","Must have userId or anonymousId or previousId or groupId")}(m),m},e}();const B=()=>`node-next-${Date.now()}-${T()}`;class D extends L{constructor(){super({createMessageId:B})}}var x=function(){function e(){this._logs=[]}return e.prototype.log=function(e,t,r){var n=new Date;this._logs.push({level:e,message:t,time:n,extras:r})},Object.defineProperty(e.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),e.prototype.flush=function(){if(this.logs.length>1){var e=this._logs.reduce((function(e,t){var r,n,o,s=a(a({},t),{json:JSON.stringify(t.extras,null," "),extras:t.extras});delete s.time;var i=null!==(o=null===(n=t.time)||void 0===n?void 0:n.toISOString())&&void 0!==o?o:"";return e[i]&&(i="".concat(i,"-").concat(Math.random())),a(a({},e),((r={})[i]=s,r))}),{});console.table?console.table(e):console.log(e)}else this.logs.forEach((function(e){var t=e.level,r=e.message,n=e.extras;"info"===t||"debug"===t?console.log(r,null!=n?n:""):console[t](r,null!=n?n:"")}));this._logs=[]},e}(),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.gauge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.increment=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.flush=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.serialize=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return[]},t}(function(){function e(){this.metrics=[]}return e.prototype.increment=function(e,t,r){void 0===t&&(t=1),this.metrics.push({metric:e,value:t,tags:null!=r?r:[],type:"counter",timestamp:Date.now()})},e.prototype.gauge=function(e,t,r){this.metrics.push({metric:e,value:t,tags:null!=r?r:[],type:"gauge",timestamp:Date.now()})},e.prototype.flush=function(){var e=this.metrics.map((function(e){return a(a({},e),{tags:e.tags.join(",")})}));console.table?console.table(e):console.log(e),this.metrics=[]},e.prototype.serialize=function(){return this.metrics.map((function(e){return{m:e.metric,v:e.value,t:e.tags,k:(t=e.type,{gauge:"g",counter:"c"}[t]),e:e.timestamp};var t}))},e}()),j=function(e){var t,r,n;this.retry=null===(t=e.retry)||void 0===t||t,this.type=null!==(r=e.type)&&void 0!==r?r:"plugin Error",this.reason=null!==(n=e.reason)&&void 0!==n?n:""},F=function(){function e(e,t,r,n){void 0===t&&(t=T()),void 0===r&&(r=new U),void 0===n&&(n=new x),this.attempts=0,this.event=e,this._id=t,this.logger=n,this.stats=r}return e.system=function(){},e.prototype.isSame=function(e){return e.id===this.id},e.prototype.cancel=function(e){if(e)throw e;throw new j({reason:"Context Cancel"})},e.prototype.log=function(e,t,r){this.logger.log(e,t,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),e.prototype.updateEvent=function(e,t){var r;if("integrations"===e.split(".")[0]){var n=e.split(".")[1];if(!1===(null===(r=this.event.integrations)||void 0===r?void 0:r[n]))return this.event}return M(this.event,e,t),this.event},e.prototype.failedDelivery=function(){return this._failedDelivery},e.prototype.setFailedDelivery=function(e){this._failedDelivery=e},e.prototype.logs=function(){return this.logger.logs},e.prototype.flush=function(){this.logger.flush(),this.stats.flush()},e.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},e}();class H extends F{static system(){return new this({type:"track",event:"system"})}}const W=async(e,t,r,n)=>{try{const i=new H(e),a=await function(e,t,r,n){return c(this,void 0,void 0,(function(){var s,i;return l(this,(function(a){switch(a.label){case 0:return r.emit("dispatch_start",e),s=Date.now(),t.isEmpty()?[4,t.dispatchSingle(e)]:[3,2];case 1:return i=a.sent(),[3,4];case 2:return[4,t.dispatch(e)];case 3:i=a.sent(),a.label=4;case 4:return(null==n?void 0:n.callback)?[4,o(i,n.callback,(c=s,l=n.timeout,u=Date.now()-c,Math.max((null!=l?l:300)-u,0)))]:[3,6];case 5:i=a.sent(),a.label=6;case 6:return(null==n?void 0:n.debug)&&i.flush(),[2,i]}var c,l,u}))}))}(i,t,r,{...n?{callback:(s=n,e=>{const t=e.failedDelivery();return s(t?t.reason:void 0,e)})}:{}}),u=a.failedDelivery();u?r.emit("error",{code:"delivery_failure",reason:u.reason,ctx:a}):r.emit(e.type,a)}catch(e){r.emit("error",{code:"unknown",reason:e})}var s};class q extends m{}var z="onRemoveFromFuture",G=function(e){function t(t,r,n){var o=e.call(this)||this;return o.future=[],o.maxAttempts=t,o.queue=r,o.seen=null!=n?n:{},o}return i(t,e),t.prototype.push=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t.map((function(t){return!(e.updateAttempts(t)>e.maxAttempts||e.includes(t)||(e.queue.push(t),0))}));return this.queue=this.queue.sort((function(t,r){return e.getAttempts(t)-e.getAttempts(r)})),n},t.prototype.pushWithBackoff=function(e){var t=this;if(0===this.getAttempts(e))return this.push(e)[0];var r=this.updateAttempts(e);if(r>this.maxAttempts||this.includes(e))return!1;var n=g({attempt:r-1});return setTimeout((function(){t.queue.push(e),t.future=t.future.filter((function(t){return t.id!==e.id})),t.emit(z)}),n),this.future.push(e),!0},t.prototype.getAttempts=function(e){var t;return null!==(t=this.seen[e.id])&&void 0!==t?t:0},t.prototype.updateAttempts=function(e){return this.seen[e.id]=this.getAttempts(e)+1,this.getAttempts(e)},t.prototype.includes=function(e){return this.queue.includes(e)||this.future.includes(e)||Boolean(this.queue.find((function(t){return t.id===e.id})))||Boolean(this.future.find((function(t){return t.id===e.id})))},t.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(t.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),t}(m);function $(e,t){e.log("debug","plugin",{plugin:t.name});var r=(new Date).getTime(),n=t[e.event.type];return void 0===n?Promise.resolve(e):function(r){return c(this,void 0,void 0,(function(){var r;return l(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,n.apply(t,[e])];case 1:return[2,o.sent()];case 2:return r=o.sent(),[2,Promise.reject(r)];case 3:return[2]}}))}))}().then((function(e){var n=(new Date).getTime()-r;return e.stats.gauge("plugin_time",n,["plugin:".concat(t.name)]),e})).catch((function(r){if(r instanceof j&&"middleware_cancellation"===r.type)throw r;return r instanceof j?(e.log("warn",r.type,{plugin:t.name,error:r}),r):(e.log("error","plugin Error",{plugin:t.name,error:r}),e.stats.increment("plugin_error",1,["plugin:".concat(t.name)]),r)}))}function V(e,t){return $(e,t).then((function(t){if(t instanceof F)return t;e.log("debug","Context canceled"),e.stats.increment("context_canceled"),e.cancel(t)}))}function J(){return!("undefined"==typeof window||window.navigator.onLine)}var K=function(e){function t(t){var r,n,o,s=e.call(this)||this;return s.criticalTasks=(o=0,{done:function(){return r},run:function(e){var t,s=e();return"object"==typeof(t=s)&&null!==t&&"then"in t&&"function"==typeof t.then&&(1==++o&&(r=new Promise((function(e){return n=e}))),s.finally((function(){return 0==--o&&n()}))),s}}),s.plugins=[],s.failedInitializations=[],s.flushing=!1,s.queue=t,s.queue.on(z,(function(){s.scheduleFlush(0)})),s}return i(t,e),t.prototype.register=function(e,t,r){return c(this,void 0,void 0,(function(){var n=this;return l(this,(function(o){switch(o.label){case 0:return[4,Promise.resolve(t.load(e,r)).then((function(){n.plugins.push(t)})).catch((function(r){if("destination"===t.type)return n.failedInitializations.push(t.name),console.warn(t.name,r),void e.log("warn","Failed to load destination",{plugin:t.name,error:r});throw r}))];case 1:return o.sent(),[2]}}))}))},t.prototype.deregister=function(e,t,r){return c(this,void 0,void 0,(function(){var n;return l(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),t.unload?[4,Promise.resolve(t.unload(e,r))]:[3,2];case 1:o.sent(),o.label=2;case 2:return this.plugins=this.plugins.filter((function(e){return e.name!==t.name})),[3,4];case 3:return n=o.sent(),e.log("warn","Failed to unload destination",{plugin:t.name,error:n}),[3,4];case 4:return[2]}}))}))},t.prototype.dispatch=function(e){return c(this,void 0,void 0,(function(){var t;return l(this,(function(r){return e.log("debug","Dispatching"),e.stats.increment("message_dispatched"),this.queue.push(e),t=this.subscribeToDelivery(e),this.scheduleFlush(0),[2,t]}))}))},t.prototype.subscribeToDelivery=function(e){return c(this,void 0,void 0,(function(){var t=this;return l(this,(function(r){return[2,new Promise((function(r){var n=function(o,s){o.isSame(e)&&(t.off("flush",n),r(o))};t.on("flush",n)}))]}))}))},t.prototype.dispatchSingle=function(e){return c(this,void 0,void 0,(function(){var t=this;return l(this,(function(r){return e.log("debug","Dispatching"),e.stats.increment("message_dispatched"),this.queue.updateAttempts(e),e.attempts=1,[2,this.deliver(e).catch((function(r){return t.enqueuRetry(r,e)?t.subscribeToDelivery(e):(e.setFailedDelivery({reason:r}),e)}))]}))}))},t.prototype.isEmpty=function(){return 0===this.queue.length},t.prototype.scheduleFlush=function(e){var t=this;void 0===e&&(e=500),this.flushing||(this.flushing=!0,setTimeout((function(){t.flush().then((function(){setTimeout((function(){t.flushing=!1,t.queue.length&&t.scheduleFlush(0)}),0)}))}),e))},t.prototype.deliver=function(e){return c(this,void 0,void 0,(function(){var t,r,n,o;return l(this,(function(s){switch(s.label){case 0:return[4,this.criticalTasks.done()];case 1:s.sent(),t=Date.now(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.flushOne(e)];case 3:return e=s.sent(),r=Date.now()-t,this.emit("delivery_success",e),e.stats.gauge("delivered",r),e.log("debug","Delivered",e.event),[2,e];case 4:throw n=s.sent(),o=n,e.log("error","Failed to deliver",o),this.emit("delivery_failure",e,o),e.stats.increment("delivery_failed"),n;case 5:return[2]}}))}))},t.prototype.enqueuRetry=function(e,t){return!(e instanceof j&&!e.retry)&&this.queue.pushWithBackoff(t)},t.prototype.flush=function(){return c(this,void 0,void 0,(function(){var e,t;return l(this,(function(r){switch(r.label){case 0:if(0===this.queue.length||J())return[2,[]];if(!(e=this.queue.pop()))return[2,[]];e.attempts=this.queue.getAttempts(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.deliver(e)];case 2:return e=r.sent(),this.emit("flush",e,!0),[3,4];case 3:return t=r.sent(),this.enqueuRetry(t,e)||(e.setFailedDelivery({reason:t}),this.emit("flush",e,!1)),[2,[]];case 4:return[2,[e]]}}))}))},t.prototype.isReady=function(){return!0},t.prototype.availableExtensions=function(e){var t,r=this.plugins.filter((function(t){var r,n,o;if("destination"!==t.type&&"Segment.io"!==t.name)return!0;var s=void 0;return null===(r=t.alternativeNames)||void 0===r||r.forEach((function(t){void 0!==e[t]&&(s=e[t])})),null!==(o=null!==(n=e[t.name])&&void 0!==n?n:s)&&void 0!==o?o:!1!==("Segment.io"===t.name||e.All)})),n=("type",t={},r.forEach((function(e){var r,n=void 0,o=e.type;void 0!==(n="string"!=typeof o?JSON.stringify(o):o)&&(t[n]=u(u([],null!==(r=t[n])&&void 0!==r?r:[],!0),[e],!1))})),t),o=n.before,s=void 0===o?[]:o,i=n.enrichment,a=void 0===i?[]:i,c=n.destination,l=void 0===c?[]:c,d=n.after;return{before:s,enrichment:a,destinations:l,after:void 0===d?[]:d}},t.prototype.flushOne=function(e){var t,r;return c(this,void 0,void 0,(function(){var n,o,s,i,a,c,u,d,h,p,f,g,m,y;return l(this,(function(l){switch(l.label){case 0:if(!this.isReady())throw new Error("Not ready");e.attempts>1&&this.emit("delivery_retry",e),n=this.availableExtensions(null!==(t=e.event.integrations)&&void 0!==t?t:{}),o=n.before,s=n.enrichment,i=0,a=o,l.label=1;case 1:return i<a.length?(c=a[i],[4,V(e,c)]):[3,4];case 2:(p=l.sent())instanceof F&&(e=p),this.emit("message_enriched",e,c),l.label=3;case 3:return i++,[3,1];case 4:u=0,d=s,l.label=5;case 5:return u<d.length?(h=d[u],[4,$(e,h)]):[3,8];case 6:(p=l.sent())instanceof F&&(e=p),this.emit("message_enriched",e,h),l.label=7;case 7:return u++,[3,5];case 8:return f=this.availableExtensions(null!==(r=e.event.integrations)&&void 0!==r?r:{}),g=f.destinations,m=f.after,[4,new Promise((function(t,r){setTimeout((function(){var n=g.map((function(t){return $(e,t)}));Promise.all(n).then(t).catch(r)}),0)}))];case 9:return l.sent(),e.stats.increment("message_delivered"),this.emit("message_delivered",e),y=m.map((function(t){return $(e,t)})),[4,Promise.all(y)];case 10:return l.sent(),[2,e]}}))}))},t}(m);class Q extends G{constructor(){super(1,[])}getAttempts(e){return e.attempts??0}updateAttempts(e){return e.attempts=this.getAttempts(e)+1,this.getAttempts(e)}}class Y extends K{constructor(){super(new Q)}}class X extends q{constructor(e){super(),this._isClosed=!1,this._pendingEvents=0,(e=>{if(!e.writeKey)throw new p("writeKey","writeKey is missing.")})(e),this._eventFactory=new D,this._queue=new Y;const t=e.flushInterval??1e4;this._closeAndFlushDefaultTimeout=1.25*t;const{plugin:r,publisher:n}=((e,t)=>{const r=new k(e,this);return{publisher:r,plugin:P(r)}})({writeKey:e.writeKey,host:e.host,path:e.path,maxRetries:e.maxRetries??3,maxEventsInBatch:e.maxEventsInBatch??15,httpRequestTimeout:e.httpRequestTimeout,flushInterval:t});this._publisher=n,this.ready=this.register(r).then((()=>{})),this.emit("initialize",e),function(e){for(var t=e.constructor.prototype,r=0,n=Object.getOwnPropertyNames(t);r<n.length;r++){var o=n[r];if("constructor"!==o){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,o);s&&"function"==typeof s.value&&(e[o]=e[o].bind(e))}}}(this)}get VERSION(){return f}closeAndFlush({timeout:e=this._closeAndFlushDefaultTimeout}={}){this._publisher.flushAfterClose(this._pendingEvents),this._isClosed=!0;const t=new Promise((e=>{this._pendingEvents?this.once("drained",(()=>e())):e()}));return e?n(t,e).catch((()=>{})):t}_dispatch(e,t){this._isClosed?this.emit("call_after_close",e):(this._pendingEvents++,W(e,this._queue,this,t).catch((e=>e)).finally((()=>{this._pendingEvents--,this._pendingEvents||this.emit("drained")})))}alias({userId:e,previousId:t,context:r,timestamp:n,integrations:o},s){const i=this._eventFactory.alias(e,t,{context:r,integrations:o,timestamp:n});this._dispatch(i,s)}group({timestamp:e,groupId:t,userId:r,anonymousId:n,traits:o={},context:s,integrations:i},a){const c=this._eventFactory.group(t,o,{context:s,anonymousId:n,userId:r,timestamp:e,integrations:i});this._dispatch(c,a)}identify({userId:e,anonymousId:t,traits:r={},context:n,timestamp:o,integrations:s},i){const a=this._eventFactory.identify(e,r,{context:n,anonymousId:t,userId:e,timestamp:o,integrations:s});this._dispatch(a,i)}page({userId:e,anonymousId:t,category:r,name:n,properties:o,context:s,timestamp:i,integrations:a},c){const l=this._eventFactory.page(r??null,n??null,o,{context:s,anonymousId:t,userId:e,timestamp:i,integrations:a});this._dispatch(l,c)}screen({userId:e,anonymousId:t,category:r,name:n,properties:o,context:s,timestamp:i,integrations:a},c){const l=this._eventFactory.screen(r??null,n??null,o,{context:s,anonymousId:t,userId:e,timestamp:i,integrations:a});this._dispatch(l,c)}track({userId:e,anonymousId:t,event:r,properties:n,context:o,timestamp:s,integrations:i},a){const c=this._eventFactory.track(r,n,{context:o,userId:e,anonymousId:t,timestamp:s,integrations:i});this._dispatch(c,a)}register(...e){return this._queue.criticalTasks.run((async()=>{const t=H.system(),r=e.map((e=>this._queue.register(t,e,this)));await Promise.all(r),this.emit("register",e.map((e=>e.name)))}))}async deregister(...e){const t=H.system(),r=e.map((e=>{const r=this._queue.plugins.find((t=>t.name===e));if(r)return this._queue.deregister(t,r,this);t.log("warn",`plugin ${e} not found`)}));await Promise.all(r),this.emit("deregister",e)}}const Z=X},7803:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AbortError:()=>n,abortable:()=>l,all:()=>f,catchAbortError:()=>a,delay:()=>u,execute:()=>c,forever:()=>d,isAbortError:()=>o,race:()=>g,rethrowAbortError:()=>i,retry:()=>m,run:()=>v,spawn:()=>y,throwIfAborted:()=>s,waitForEvent:()=>h});class n extends Error{constructor(){super("The operation has been aborted"),this.message="The operation has been aborted",this.name="AbortError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}function o(e){return"object"==typeof e&&null!==e&&"AbortError"===e.name}function s(e){if(e.aborted)throw new n}function i(e){if(o(e))throw e}function a(e){if(!o(e))throw e}function c(e,t){return new Promise(((r,o)=>{if(e.aborted)return void o(new n);let s,i=!1;function a(){i||(i=!0,null!=s&&s())}const c=t((e=>{r(e),a()}),(e=>{o(e),a()}));if(!i){const t=()=>{const e=c();null==e?o(new n):e.then((()=>{o(new n)}),(e=>{o(e)})),a()};e.addEventListener("abort",t),s=()=>{e.removeEventListener("abort",t)}}}))}function l(e,t){if(e.aborted){const e=()=>{};t.then(e,e)}return c(e,((e,r)=>(t.then(e,r),()=>{})))}function u(e,t){return c(e,(e=>{const r="number"==typeof t?t:t.getTime()-Date.now(),n=setTimeout(e,r);return()=>{clearTimeout(n)}}))}function d(e){return c(e,(()=>()=>{}))}function h(e,t,r,n){return c(e,(e=>{let o,s=!1;return o=function(e,t,r,n){if(p((o=e).addEventListener)&&p(o.removeEventListener))return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n);var o;if(function(e){return p(e.on)&&p(e.off)}(e))return e.on(t,r),()=>e.off(t,r);if(function(e){return p(e.addListener)&&p(e.removeListener)}(e))return e.addListener(t,r),()=>e.removeListener(t,r);throw new Error("Invalid event target")}(t,r,((...t)=>{e(t.length>1?t:t[0]),s=!0,null!=o&&o()}),n),s&&o(),()=>{s=!0,null!=o&&o()}}))}const p=e=>"function"==typeof e;function f(e,t){return new Promise(((r,s)=>{if(e.aborted)return void s(new n);const i=new AbortController,a=t(i.signal);if(0===a.length)return void r([]);const c=()=>{i.abort()};let l;e.addEventListener("abort",c);const u=new Array(a.length);let d=0;function h(){d+=1,d===a.length&&(e.removeEventListener("abort",c),null!=l?s(l.reason):r(u))}for(const[e,t]of a.entries())t.then((t=>{u[e]=t,h()}),(e=>{i.abort(),(null==l||!o(e)&&o(l.reason))&&(l={reason:e}),h()}))}))}function g(e,t){return new Promise(((r,s)=>{if(e.aborted)return void s(new n);const i=new AbortController,a=t(i.signal),c=()=>{i.abort()};e.addEventListener("abort",c);let l,u=0;function d(t){i.abort(),u+=1,u===a.length&&(e.removeEventListener("abort",c),"fulfilled"===t.status?r(t.value):s(t.reason))}for(const e of a)e.then((e=>{null==l&&(l={status:"fulfilled",value:e}),d(l)}),(e=>{null!=l&&(o(e)||"fulfilled"!==l.status&&!o(l.reason))||(l={status:"rejected",reason:e}),d(l)}))}))}async function m(e,t,r={}){const{baseMs:n=1e3,maxDelayMs:o=3e4,onError:s,maxAttempts:a=1/0}=r;let c=0;const l=()=>{c=-1};for(;;)try{return await t(e,c,l)}catch(t){if(i(t),c>=a)throw t;let r;if(-1===c)r=0;else{const e=Math.min(o,Math.pow(2,c)*n);r=Math.round(e*(1+Math.random())/2)}s&&s(t,c,r),0!==r&&await u(e,r),c+=1}}function y(e,t){if(e.aborted)return Promise.reject(new n);const r=[],s=new AbortController,i=s.signal,c=()=>{s.abort()};e.addEventListener("abort",c);const l=new Set,u=()=>{for(const e of l)e.abort()};i.addEventListener("abort",u);let d=new Promise(((e,c)=>{let u,d;function h(t){if(i.aborted)return{abort(){},async join(){throw new n}};const r=new AbortController,o=t(r.signal),h={abort(){r.abort()},join:()=>o};return l.add(h),o.catch(a).catch((e=>{d={error:e},s.abort()})).finally((()=>{l.delete(h),0===l.size&&(null!=d?c(d.error):e(u.value))})),h}h((e=>t(e,{defer(e){r.push(e)},fork:h}))).join().then((e=>{s.abort(),u={value:e}}),(e=>{s.abort(),o(e)&&null!=d||(d={error:e})}))}));return d=d.finally((()=>{e.removeEventListener("abort",c),i.removeEventListener("abort",u);let t=Promise.resolve();for(let e=r.length-1;e>=0;e--)t=t.finally(r[e]);return t})),d}function v(e){const t=new AbortController,r=e(t.signal).catch(a);return()=>(t.abort(),r)}},83407:e=>{e.exports={newInvalidAsn1Error:function(e){var t=new Error;return t.name="InvalidAsn1Error",t.message=e||"",t}}},20279:(e,t,r)=>{var n=r(83407),o=r(34478),s=r(24578),i=r(3609);for(var a in e.exports={Reader:s,Writer:i},o)o.hasOwnProperty(a)&&(e.exports[a]=o[a]);for(var c in n)n.hasOwnProperty(c)&&(e.exports[c]=n[c])},24578:(e,t,r)=>{var n=r(39491),o=r(2399).Buffer,s=r(34478),i=r(83407).newInvalidAsn1Error;function a(e){if(!e||!o.isBuffer(e))throw new TypeError("data must be a node Buffer");this._buf=e,this._size=e.length,this._len=0,this._offset=0}Object.defineProperty(a.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(a.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(a.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),a.prototype.readByte=function(e){if(this._size-this._offset<1)return null;var t=255&this._buf[this._offset];return e||(this._offset+=1),t},a.prototype.peek=function(){return this.readByte(!0)},a.prototype.readLength=function(e){if(void 0===e&&(e=this._offset),e>=this._size)return null;var t=255&this._buf[e++];if(null===t)return null;if(128==(128&t)){if(0==(t&=127))throw i("Indefinite length not supported");if(t>4)throw i("encoding too long");if(this._size-e<t)return null;this._len=0;for(var r=0;r<t;r++)this._len=(this._len<<8)+(255&this._buf[e++])}else this._len=t;return e},a.prototype.readSequence=function(e){var t=this.peek();if(null===t)return null;if(void 0!==e&&e!==t)throw i("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var r=this.readLength(this._offset+1);return null===r?null:(this._offset=r,t)},a.prototype.readInt=function(){return this._readTag(s.Integer)},a.prototype.readBoolean=function(){return 0!==this._readTag(s.Boolean)},a.prototype.readEnumeration=function(){return this._readTag(s.Enumeration)},a.prototype.readString=function(e,t){e||(e=s.OctetString);var r=this.peek();if(null===r)return null;if(r!==e)throw i("Expected 0x"+e.toString(16)+": got 0x"+r.toString(16));var n=this.readLength(this._offset+1);if(null===n)return null;if(this.length>this._size-n)return null;if(this._offset=n,0===this.length)return t?o.alloc(0):"";var a=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,t?a:a.toString("utf8")},a.prototype.readOID=function(e){e||(e=s.OID);var t=this.readString(e,!0);if(null===t)return null;for(var r=[],n=0,o=0;o<t.length;o++){var i=255&t[o];n<<=7,n+=127&i,0==(128&i)&&(r.push(n),n=0)}return n=r.shift(),r.unshift(n%40),r.unshift(n/40>>0),r.join(".")},a.prototype._readTag=function(e){n.ok(void 0!==e);var t=this.peek();if(null===t)return null;if(t!==e)throw i("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var r=this.readLength(this._offset+1);if(null===r)return null;if(this.length>4)throw i("Integer too long: "+this.length);if(this.length>this._size-r)return null;this._offset=r;for(var o=this._buf[this._offset],s=0,a=0;a<this.length;a++)s<<=8,s|=255&this._buf[this._offset++];return 128==(128&o)&&4!==a&&(s-=1<<8*a),s>>0},e.exports=a},34478:e=>{e.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},3609:(e,t,r)=>{var n=r(39491),o=r(2399).Buffer,s=r(34478),i=r(83407).newInvalidAsn1Error,a={size:1024,growthFactor:8};function c(e){var t,r;t=a,r=e||{},n.ok(t),n.equal(typeof t,"object"),n.ok(r),n.equal(typeof r,"object"),Object.getOwnPropertyNames(t).forEach((function(e){if(!r[e]){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,n)}})),e=r,this._buf=o.alloc(e.size||1024),this._size=this._buf.length,this._offset=0,this._options=e,this._seq=[]}Object.defineProperty(c.prototype,"buffer",{get:function(){if(this._seq.length)throw i(this._seq.length+" unended sequence(s)");return this._buf.slice(0,this._offset)}}),c.prototype.writeByte=function(e){if("number"!=typeof e)throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=e},c.prototype.writeInt=function(e,t){if("number"!=typeof e)throw new TypeError("argument must be a Number");"number"!=typeof t&&(t=s.Integer);for(var r=4;(0==(4286578688&e)||-8388608==(4286578688&e))&&r>1;)r--,e<<=8;if(r>4)throw i("BER ints cannot be > 0xffffffff");for(this._ensure(2+r),this._buf[this._offset++]=t,this._buf[this._offset++]=r;r-- >0;)this._buf[this._offset++]=(4278190080&e)>>>24,e<<=8},c.prototype.writeNull=function(){this.writeByte(s.Null),this.writeByte(0)},c.prototype.writeEnumeration=function(e,t){if("number"!=typeof e)throw new TypeError("argument must be a Number");return"number"!=typeof t&&(t=s.Enumeration),this.writeInt(e,t)},c.prototype.writeBoolean=function(e,t){if("boolean"!=typeof e)throw new TypeError("argument must be a Boolean");"number"!=typeof t&&(t=s.Boolean),this._ensure(3),this._buf[this._offset++]=t,this._buf[this._offset++]=1,this._buf[this._offset++]=e?255:0},c.prototype.writeString=function(e,t){if("string"!=typeof e)throw new TypeError("argument must be a string (was: "+typeof e+")");"number"!=typeof t&&(t=s.OctetString);var r=o.byteLength(e);this.writeByte(t),this.writeLength(r),r&&(this._ensure(r),this._buf.write(e,this._offset),this._offset+=r)},c.prototype.writeBuffer=function(e,t){if("number"!=typeof t)throw new TypeError("tag must be a number");if(!o.isBuffer(e))throw new TypeError("argument must be a buffer");this.writeByte(t),this.writeLength(e.length),this._ensure(e.length),e.copy(this._buf,this._offset,0,e.length),this._offset+=e.length},c.prototype.writeStringArray=function(e){if(!e instanceof Array)throw new TypeError("argument must be an Array[String]");var t=this;e.forEach((function(e){t.writeString(e)}))},c.prototype.writeOID=function(e,t){if("string"!=typeof e)throw new TypeError("argument must be a string");if("number"!=typeof t&&(t=s.OID),!/^([0-9]+\.){3,}[0-9]+$/.test(e))throw new Error("argument is not a valid OID string");var r=e.split("."),n=[];n.push(40*parseInt(r[0],10)+parseInt(r[1],10)),r.slice(2).forEach((function(e){!function(e,t){t<128?e.push(t):t<16384?(e.push(t>>>7|128),e.push(127&t)):t<2097152?(e.push(t>>>14|128),e.push(255&(t>>>7|128)),e.push(127&t)):t<268435456?(e.push(t>>>21|128),e.push(255&(t>>>14|128)),e.push(255&(t>>>7|128)),e.push(127&t)):(e.push(255&(t>>>28|128)),e.push(255&(t>>>21|128)),e.push(255&(t>>>14|128)),e.push(255&(t>>>7|128)),e.push(127&t))}(n,parseInt(e,10))}));var o=this;this._ensure(2+n.length),this.writeByte(t),this.writeLength(n.length),n.forEach((function(e){o.writeByte(e)}))},c.prototype.writeLength=function(e){if("number"!=typeof e)throw new TypeError("argument must be a Number");if(this._ensure(4),e<=127)this._buf[this._offset++]=e;else if(e<=255)this._buf[this._offset++]=129,this._buf[this._offset++]=e;else if(e<=65535)this._buf[this._offset++]=130,this._buf[this._offset++]=e>>8,this._buf[this._offset++]=e;else{if(!(e<=16777215))throw i("Length too long (> 4 bytes)");this._buf[this._offset++]=131,this._buf[this._offset++]=e>>16,this._buf[this._offset++]=e>>8,this._buf[this._offset++]=e}},c.prototype.startSequence=function(e){"number"!=typeof e&&(e=s.Sequence|s.Constructor),this.writeByte(e),this._seq.push(this._offset),this._ensure(3),this._offset+=3},c.prototype.endSequence=function(){var e=this._seq.pop(),t=e+3,r=this._offset-t;if(r<=127)this._shift(t,r,-2),this._buf[e]=r;else if(r<=255)this._shift(t,r,-1),this._buf[e]=129,this._buf[e+1]=r;else if(r<=65535)this._buf[e]=130,this._buf[e+1]=r>>8,this._buf[e+2]=r;else{if(!(r<=16777215))throw i("Sequence too long");this._shift(t,r,1),this._buf[e]=131,this._buf[e+1]=r>>16,this._buf[e+2]=r>>8,this._buf[e+3]=r}},c.prototype._shift=function(e,t,r){n.ok(void 0!==e),n.ok(void 0!==t),n.ok(r),this._buf.copy(this._buf,e+r,e,e+t),this._offset+=r},c.prototype._ensure=function(e){if(n.ok(e),this._size-this._offset<e){var t=this._size*this._options.growthFactor;t-this._offset<e&&(t+=e);var r=o.alloc(t);this._buf.copy(r,0,0,this._offset),this._buf=r,this._size=t}},e.exports=c},90476:(e,t,r)=>{var n=r(20279);e.exports={Ber:n,BerReader:n.Reader,BerWriter:n.Writer}},5623:e=>{"use strict";function t(e,t,o){e instanceof RegExp&&(e=r(e,o)),t instanceof RegExp&&(t=r(t,o));var s=n(e,t,o);return s&&{start:s[0],end:s[1],pre:o.slice(0,s[0]),body:o.slice(s[0]+e.length,s[1]),post:o.slice(s[1]+t.length)}}function r(e,t){var r=t.match(e);return r?r[0]:null}function n(e,t,r){var n,o,s,i,a,c=r.indexOf(e),l=r.indexOf(t,c+1),u=c;if(c>=0&&l>0){if(e===t)return[c,l];for(n=[],s=r.length;u>=0&&!a;)u==c?(n.push(u),c=r.indexOf(e,u+1)):1==n.length?a=[n.pop(),l]:((o=n.pop())<s&&(s=o,i=l),l=r.indexOf(t,u+1)),u=c<l&&c>=0?c:l;n.length&&(a=[s,i])}return a}e.exports=t,t.range=n},62703:(e,t,r)=>{"use strict";var n=r(50780).lowlevel.crypto_hash,o=0,s=function(){this.S=[new Uint32Array([3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946]),new Uint32Array([1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055]),new Uint32Array([3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504]),new Uint32Array([976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462])],this.P=new Uint32Array([608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731])};function i(e,t,r){return(e[0][t[r+3]]+e[1][t[r+2]]^e[2][t[r+1]])+e[3][t[r]]}function a(e,t){var r,n=0;for(r=0;r<4;r++,o++)o>=t&&(o=0),n=n<<8|e[o];return n}function c(e,t,r){var n,o=new s,i=new Uint32Array(8),c=new Uint8Array([79,120,121,99,104,114,111,109,97,116,105,99,66,108,111,119,102,105,115,104,83,119,97,116,68,121,110,97,109,105,116,101]);for(o.expandstate(t,64,e,64),n=0;n<64;n++)o.expand0state(t,64),o.expand0state(e,64);for(n=0;n<8;n++)i[n]=a(c,c.byteLength);for(n=0;n<64;n++)o.enc(i,i.byteLength/8);for(n=0;n<8;n++)r[4*n+3]=i[n]>>>24,r[4*n+2]=i[n]>>>16,r[4*n+1]=i[n]>>>8,r[4*n+0]=i[n]}s.prototype.encipher=function(e,t){void 0===t&&(t=new Uint8Array(e.buffer),0!==e.byteOffset&&(t=t.subarray(e.byteOffset))),e[0]^=this.P[0];for(var r=1;r<16;r+=2)e[1]^=i(this.S,t,0)^this.P[r],e[0]^=i(this.S,t,4)^this.P[r+1];var n=e[0];e[0]=e[1]^this.P[17],e[1]=n},s.prototype.decipher=function(e){var t=new Uint8Array(e.buffer);0!==e.byteOffset&&(t=t.subarray(e.byteOffset)),e[0]^=this.P[17];for(var r=16;r>0;r-=2)e[1]^=i(this.S,t,0)^this.P[r],e[0]^=i(this.S,t,4)^this.P[r-1];var n=e[0];e[0]=e[1]^this.P[0],e[1]=n},s.prototype.expand0state=function(e,t){var r,n,s=new Uint32Array(2),i=new Uint8Array(s.buffer);for(r=0,o=0;r<18;r++)this.P[r]^=a(e,t);for(o=0,r=0;r<18;r+=2)this.encipher(s,i),this.P[r]=s[0],this.P[r+1]=s[1];for(r=0;r<4;r++)for(n=0;n<256;n+=2)this.encipher(s,i),this.S[r][n]=s[0],this.S[r][n+1]=s[1]},s.prototype.expandstate=function(e,t,r,n){var s,i,c=new Uint32Array(2);for(s=0,o=0;s<18;s++)this.P[s]^=a(r,n);for(s=0,o=0;s<18;s+=2)c[0]^=a(e,t),c[1]^=a(e,t),this.encipher(c),this.P[s]=c[0],this.P[s+1]=c[1];for(s=0;s<4;s++)for(i=0;i<256;i+=2)c[0]^=a(e,t),c[1]^=a(e,t),this.encipher(c),this.S[s][i]=c[0],this.S[s][i+1]=c[1];o=0},s.prototype.enc=function(e,t){for(var r=0;r<t;r++)this.encipher(e.subarray(2*r))},s.prototype.dec=function(e,t){for(var r=0;r<t;r++)this.decipher(e.subarray(2*r))},e.exports={BLOCKS:8,HASHSIZE:32,hash:c,pbkdf:function(e,t,r,o,s,i,a){var l,u,d,h,p,f,g=new Uint8Array(64),m=new Uint8Array(64),y=new Uint8Array(32),v=new Uint8Array(32),_=new Uint8Array(o+4),b=i;if(a<1)return-1;if(0===t||0===o||0===i||i>y.byteLength*y.byteLength||o>1<<20)return-1;for(h=Math.floor((i+y.byteLength-1)/y.byteLength),d=Math.floor((i+h-1)/h),l=0;l<o;l++)_[l]=r[l];for(n(g,e,t),f=1;i>0;f++){for(_[o+0]=f>>>24,_[o+1]=f>>>16,_[o+2]=f>>>8,_[o+3]=f,n(m,_,o+4),c(g,m,v),l=y.byteLength;l--;)y[l]=v[l];for(l=1;l<a;l++)for(n(m,v,v.byteLength),c(g,m,v),u=0;u<y.byteLength;u++)y[u]^=v[u];for(d=Math.min(d,i),l=0;l<d&&!((p=l*h+(f-1))>=b);l++)s[p]=y[l];i-=l}return 0}}},77424:(e,t,r)=>{e.exports={RBTree:r(62448),BinTree:r(69675)}},69675:(e,t,r)=>{var n=r(5301);function o(e){this.data=e,this.left=null,this.right=null}function s(e){this._root=null,this._comparator=e,this.size=0}o.prototype.get_child=function(e){return e?this.right:this.left},o.prototype.set_child=function(e,t){e?this.right=t:this.left=t},s.prototype=new n,s.prototype.insert=function(e){if(null===this._root)return this._root=new o(e),this.size++,!0;for(var t=0,r=null,n=this._root;;){if(null===n)return n=new o(e),r.set_child(t,n),ret=!0,this.size++,!0;if(0===this._comparator(n.data,e))return!1;t=this._comparator(n.data,e)<0,r=n,n=n.get_child(t)}},s.prototype.remove=function(e){if(null===this._root)return!1;var t=new o(void 0),r=t;r.right=this._root;for(var n=null,s=null,i=1;null!==r.get_child(i);){n=r,r=r.get_child(i);var a=this._comparator(e,r.data);i=a>0,0===a&&(s=r)}return null!==s&&(s.data=r.data,n.set_child(n.right===r,r.get_child(null===r.left)),this._root=t.right,this.size--,!0)},e.exports=s},62448:(e,t,r)=>{var n=r(5301);function o(e){this.data=e,this.left=null,this.right=null,this.red=!0}function s(e){this._root=null,this._comparator=e,this.size=0}function i(e){return null!==e&&e.red}function a(e,t){var r=e.get_child(!t);return e.set_child(!t,r.get_child(t)),r.set_child(t,e),e.red=!0,r.red=!1,r}function c(e,t){return e.set_child(!t,a(e.get_child(!t),!t)),a(e,t)}o.prototype.get_child=function(e){return e?this.right:this.left},o.prototype.set_child=function(e,t){e?this.right=t:this.left=t},s.prototype=new n,s.prototype.insert=function(e){var t=!1;if(null===this._root)this._root=new o(e),t=!0,this.size++;else{var r=new o(void 0),n=0,s=0,l=null,u=r,d=null,h=this._root;for(u.right=this._root;;){if(null===h?(h=new o(e),d.set_child(n,h),t=!0,this.size++):i(h.left)&&i(h.right)&&(h.red=!0,h.left.red=!1,h.right.red=!1),i(h)&&i(d)){var p=u.right===l;h===d.get_child(s)?u.set_child(p,a(l,!s)):u.set_child(p,c(l,!s))}var f=this._comparator(h.data,e);if(0===f)break;s=n,n=f<0,null!==l&&(u=l),l=d,d=h,h=h.get_child(n)}this._root=r.right}return this._root.red=!1,t},s.prototype.remove=function(e){if(null===this._root)return!1;var t=new o(void 0),r=t;r.right=this._root;for(var n=null,s=null,l=null,u=1;null!==r.get_child(u);){var d=u;s=n,n=r,r=r.get_child(u);var h=this._comparator(e,r.data);if(u=h>0,0===h&&(l=r),!i(r)&&!i(r.get_child(u)))if(i(r.get_child(!u))){var p=a(r,u);n.set_child(d,p),n=p}else if(!i(r.get_child(!u))){var f=n.get_child(!d);if(null!==f)if(i(f.get_child(!d))||i(f.get_child(d))){var g=s.right===n;i(f.get_child(d))?s.set_child(g,c(n,d)):i(f.get_child(!d))&&s.set_child(g,a(n,d));var m=s.get_child(g);m.red=!0,r.red=!0,m.left.red=!1,m.right.red=!1}else n.red=!1,f.red=!0,r.red=!0}}return null!==l&&(l.data=r.data,n.set_child(n.right===r,r.get_child(null===r.left)),this.size--),this._root=t.right,null!==this._root&&(this._root.red=!1),null!==l},e.exports=s},5301:e=>{function t(){}function r(e){this._tree=e,this._ancestors=[],this._cursor=null}t.prototype.clear=function(){this._root=null,this.size=0},t.prototype.find=function(e){for(var t=this._root;null!==t;){var r=this._comparator(e,t.data);if(0===r)return t.data;t=t.get_child(r>0)}return null},t.prototype.findIter=function(e){for(var t=this._root,r=this.iterator();null!==t;){var n=this._comparator(e,t.data);if(0===n)return r._cursor=t,r;r._ancestors.push(t),t=t.get_child(n>0)}return null},t.prototype.lowerBound=function(e){for(var t=this._root,r=this.iterator(),n=this._comparator;null!==t;){var o=n(e,t.data);if(0===o)return r._cursor=t,r;r._ancestors.push(t),t=t.get_child(o>0)}for(var s=r._ancestors.length-1;s>=0;--s)if(n(e,(t=r._ancestors[s]).data)<0)return r._cursor=t,r._ancestors.length=s,r;return r._ancestors.length=0,r},t.prototype.upperBound=function(e){for(var t=this.lowerBound(e),r=this._comparator;null!==t.data()&&0===r(t.data(),e);)t.next();return t},t.prototype.min=function(){var e=this._root;if(null===e)return null;for(;null!==e.left;)e=e.left;return e.data},t.prototype.max=function(){var e=this._root;if(null===e)return null;for(;null!==e.right;)e=e.right;return e.data},t.prototype.iterator=function(){return new r(this)},t.prototype.each=function(e){for(var t,r=this.iterator();null!==(t=r.next());)if(!1===e(t))return},t.prototype.reach=function(e){for(var t,r=this.iterator();null!==(t=r.prev());)if(!1===e(t))return},r.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},r.prototype.next=function(){if(null===this._cursor){var e=this._tree._root;null!==e&&this._minNode(e)}else{var t;if(null===this._cursor.right)do{if(t=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===t);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right)}return null!==this._cursor?this._cursor.data:null},r.prototype.prev=function(){if(null===this._cursor){var e=this._tree._root;null!==e&&this._maxNode(e)}else{var t;if(null===this._cursor.left)do{if(t=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===t);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left)}return null!==this._cursor?this._cursor.data:null},r.prototype._minNode=function(e){for(;null!==e.left;)this._ancestors.push(e),e=e.left;this._cursor=e},r.prototype._maxNode=function(e){for(;null!==e.right;)this._ancestors.push(e),e=e.right;this._cursor=e},e.exports=t},3644:(e,t,r)=>{var n=r(11048),o=r(5623);e.exports=function(e){return e?("{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2)),y(function(e){return e.split("\\\\").join(s).split("\\{").join(i).split("\\}").join(a).split("\\,").join(c).split("\\.").join(l)}(e),!0).map(d)):[]};var s="\0SLASH"+Math.random()+"\0",i="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",l="\0PERIOD"+Math.random()+"\0";function u(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function d(e){return e.split(s).join("\\").split(i).join("{").split(a).join("}").split(c).join(",").split(l).join(".")}function h(e){if(!e)return[""];var t=[],r=o("{","}",e);if(!r)return e.split(",");var n=r.pre,s=r.body,i=r.post,a=n.split(",");a[a.length-1]+="{"+s+"}";var c=h(i);return i.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),t.push.apply(t,a),t}function p(e){return"{"+e+"}"}function f(e){return/^-?0\d/.test(e)}function g(e,t){return e<=t}function m(e,t){return e>=t}function y(e,t){var r=[],s=o("{","}",e);if(!s||/\$$/.test(s.pre))return[e];var i,c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),d=c||l,v=s.body.indexOf(",")>=0;if(!d&&!v)return s.post.match(/,.*\}/)?y(e=s.pre+"{"+s.body+a+s.post):[e];if(d)i=s.body.split(/\.\./);else if(1===(i=h(s.body)).length&&1===(i=y(i[0],!1).map(p)).length)return(S=s.post.length?y(s.post,!1):[""]).map((function(e){return s.pre+i[0]+e}));var _,b=s.pre,S=s.post.length?y(s.post,!1):[""];if(d){var E=u(i[0]),w=u(i[1]),A=Math.max(i[0].length,i[1].length),T=3==i.length?Math.abs(u(i[2])):1,C=g;w<E&&(T*=-1,C=m);var I=i.some(f);_=[];for(var R=E;C(R,w);R+=T){var O;if(l)"\\"===(O=String.fromCharCode(R))&&(O="");else if(O=String(R),I){var k=A-O.length;if(k>0){var N=new Array(k+1).join("0");O=R<0?"-"+N+O.slice(1):N+O}}_.push(O)}}else _=n(i,(function(e){return y(e,!1)}));for(var P=0;P<_.length;P++)for(var M=0;M<S.length;M++){var L=b+_[P]+S[M];(!t||d||L)&&r.push(L)}return r}},72418:(e,t)=>{!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),o=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={splitValues:!1});var r,o=this;this.headersMap={},e&&("undefined"!=typeof Headers&&e instanceof Headers?n.getHeaderKeys(e).forEach((function(r){n.getHeaderValues(e,r).forEach((function(e){t.splitValues?o.append(r,n.splitHeaderValue(e)):o.append(r,e)}))})):"object"==typeof(r=e)&&"object"==typeof r.headersMap&&"function"==typeof r.forEach?e.forEach((function(e,t){o.append(e,t)})):"undefined"!=typeof Map&&e instanceof Map?e.forEach((function(e,t){o.append(t,e)})):"string"==typeof e?this.appendFromString(e):"object"==typeof e&&Object.getOwnPropertyNames(e).forEach((function(t){var r=e[t];Array.isArray(r)?r.forEach((function(e){o.append(t,e)})):o.append(t,r)})))}return e.prototype.appendFromString=function(e){for(var t=e.split("\r\n"),r=0;r<t.length;r++){var n=t[r],o=n.indexOf(":");if(o>0){var s=n.substring(0,o).trim(),i=n.substring(o+1).trim();this.append(s,i)}}},e.prototype.delete=function(e,t){var r=n.normalizeName(e);if(void 0===t)delete this.headersMap[r];else{var o=this.headersMap[r];if(o){var s=o.indexOf(t);s>=0&&o.splice(s,1),0===o.length&&delete this.headersMap[r]}}},e.prototype.append=function(e,t){var r=this,o=n.normalizeName(e);Array.isArray(this.headersMap[o])||(this.headersMap[o]=[]),Array.isArray(t)?t.forEach((function(e){r.headersMap[o].push(n.normalizeValue(e))})):this.headersMap[o].push(n.normalizeValue(t))},e.prototype.set=function(e,t){var r=n.normalizeName(e);if(Array.isArray(t)){var o=[];t.forEach((function(e){o.push(n.normalizeValue(e))})),this.headersMap[r]=o}else this.headersMap[r]=[n.normalizeValue(t)]},e.prototype.has=function(e,t){var r=this.headersMap[n.normalizeName(e)];if(!Array.isArray(r))return!1;if(void 0!==t){var o=n.normalizeValue(t);return r.indexOf(o)>=0}return!0},e.prototype.get=function(e){var t=this.headersMap[n.normalizeName(e)];return void 0!==t?t.concat():[]},e.prototype.forEach=function(e){var t=this;Object.getOwnPropertyNames(this.headersMap).forEach((function(r){e(r,t.headersMap[r])}),this)},e.prototype.toHeaders=function(){if("undefined"!=typeof Headers){var e=new Headers;return this.forEach((function(t,r){r.forEach((function(r){e.append(t,r)}))})),e}throw new Error("Headers class is not defined")},e}();t.BrowserHeaders=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.BrowserHeaders=n.BrowserHeaders},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iterateHeaders=function(e,t){for(var r=e[Symbol.iterator](),n=r.next();!n.done;)t(n.value[0]),n=r.next()},t.iterateHeadersKeys=function(e,t){for(var r=e.keys(),n=r.next();!n.done;)t(n.value),n=r.next()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.normalizeName=function(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()},t.normalizeValue=function(e){return"string"!=typeof e&&(e=String(e)),e},t.getHeaderValues=function(e,t){var r=e;if(r instanceof Headers&&r.getAll)return r.getAll(t);var n=r.get(t);return n&&"string"==typeof n?[n]:n},t.getHeaderKeys=function(e){var t=e,r={},o=[];return t.keys?n.iterateHeadersKeys(t,(function(e){r[e]||(r[e]=!0,o.push(e))})):t.forEach?t.forEach((function(e,t){r[t]||(r[t]=!0,o.push(t))})):n.iterateHeaders(t,(function(e){var t=e[0];r[t]||(r[t]=!0,o.push(t))})),o},t.splitHeaderValue=function(e){var t=[];return e.split(", ").forEach((function(e){e.split(",").forEach((function(e){t.push(e)}))})),t}}]))},82779:(e,t,r)=>{var n=r(14300).Buffer,o=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function s(e){if(n.isBuffer(e))return e;var t="function"==typeof n.alloc&&"function"==typeof n.from;if("number"==typeof e)return t?n.alloc(e):new n(e);if("string"==typeof e)return t?n.from(e):new n(e);throw new Error("input must be buffer, number, or string, received "+typeof e)}function i(e){var t=s(4);return t.writeInt32BE(e,0),t}function a(e,t){e=s(e),n.isBuffer(t)&&(t=t.readUInt32BE(0));for(var r=-1^~~t,i=0;i<e.length;i++)r=o[255&(r^e[i])]^r>>>8;return-1^r}function c(){return i(a.apply(null,arguments))}"undefined"!=typeof Int32Array&&(o=new Int32Array(o)),c.signed=function(){return a.apply(null,arguments)},c.unsigned=function(){return a.apply(null,arguments)>>>0},e.exports=c},11048:e=>{e.exports=function(e,r){for(var n=[],o=0;o<e.length;o++){var s=r(e[o],o);t(s)?n.push.apply(n,s):n.push(s)}return n};var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},41837:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryCache=void 0;var r=function(){function e(){this.cache={}}return e.prototype.set=function(e,t){this.cache[e]=t},e.prototype.get=function(e){return this.cache[e]},e}();t.InMemoryCache=r},37603:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DataGovernance:()=>o,FetchResult:()=>ce,FetchStatus:()=>Y,FlagOverrides:()=>Z,LogLevel:()=>Q,MapOverrideDataSource:()=>X,OptionsBase:()=>c,OverrideBehaviour:()=>G,ProjectConfig:()=>h,User:()=>$,createClientWithAutoPoll:()=>oe,createClientWithLazyLoad:()=>ie,createClientWithManualPoll:()=>se,createConsoleLogger:()=>ae});var n,o,s=function(){function e(e){this.SOURCE="ConfigCat",this.level=Q.Warn,e&&(this.level=e)}return e.prototype.log=function(e){this.info(e)},e.prototype.debug=function(e){this.isLogLevelEnabled(Q.Debug)&&console.info(this.SOURCE+" - DEBUG - "+e)},e.prototype.info=function(e){this.isLogLevelEnabled(Q.Info)&&console.info(this.SOURCE+" - INFO - "+e)},e.prototype.warn=function(e){this.isLogLevelEnabled(Q.Warn)&&console.warn(this.SOURCE+" - WARN - "+e)},e.prototype.error=function(e){this.isLogLevelEnabled(Q.Error)&&console.error(this.SOURCE+" - ERROR - "+e)},e.prototype.isLogLevelEnabled=function(e){return this.level>=e},e}(),i=function(){function e(){this.cache={}}return e.prototype.set=function(e,t){this.cache[e]=t},e.prototype.get=function(e){return this.cache[e]},e}(),a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){e[e.Global=0]="Global",e[e.EuOnly=1]="EuOnly"}(o||(o={}));var c=function(){function e(e,t,r,n){var a;if(this.configFileName="config_v5",this.logger=new s(Q.Warn),this.requestTimeoutMs=3e4,this.baseUrlOverriden=!1,this.proxy="",!e)throw new Error("Invalid 'apiKey' value");if(n||(n=new i),this.apiKey=e,this.clientVersion=t,this.dataGovernance=null!==(a=null==r?void 0:r.dataGovernance)&&void 0!==a?a:o.Global,this.cache=n,this.dataGovernance===o.EuOnly?this.baseUrl="https://cdn-eu.configcat.com":this.baseUrl="https://cdn-global.configcat.com",r){if(r.logger&&(this.logger=r.logger),r.requestTimeoutMs){if(r.requestTimeoutMs<0)throw new Error("Invalid 'requestTimeoutMs' value");this.requestTimeoutMs=r.requestTimeoutMs}r.baseUrl&&(this.baseUrl=r.baseUrl,this.baseUrlOverriden=!0),r.proxy&&(this.proxy=r.proxy),r.cache&&(this.cache=r.cache),r.flagOverrides&&(this.flagOverrides=r.flagOverrides)}}return e.prototype.getUrl=function(){return this.baseUrl+"/configuration-files/"+this.apiKey+"/"+this.configFileName+".json?sdk="+this.clientVersion},e.prototype.getCacheKey=function(){return"js_"+this.configFileName+"_"+this.apiKey},e}(),l=function(e){function t(t,r,n,o,s){var i=e.call(this,t,r+"/a-"+n,o,s)||this;if(i.pollIntervalSeconds=60,i.configChanged=function(){},i.maxInitWaitTimeSeconds=5,o&&(void 0!==o.pollIntervalSeconds&&null!==o.pollIntervalSeconds&&(i.pollIntervalSeconds=o.pollIntervalSeconds),o.configChanged&&(i.configChanged=o.configChanged),void 0!==o.maxInitWaitTimeSeconds&&null!==o.maxInitWaitTimeSeconds&&(i.maxInitWaitTimeSeconds=o.maxInitWaitTimeSeconds)),i.pollIntervalSeconds<1)throw new Error("Invalid 'pollIntervalSeconds' value");if(i.maxInitWaitTimeSeconds<0)throw new Error("Invalid 'maxInitWaitTimeSeconds' value");return i}return a(t,e),t}(c),u=function(e){function t(t,r,n,o,s){return e.call(this,t,r+"/m-"+n,o,s)||this}return a(t,e),t}(c),d=function(e){function t(t,r,n,o,s){var i=e.call(this,t,r+"/l-"+n,o,s)||this;if(i.cacheTimeToLiveSeconds=60,o&&o.cacheTimeToLiveSeconds&&(i.cacheTimeToLiveSeconds=o.cacheTimeToLiveSeconds),!i.cacheTimeToLiveSeconds||i.cacheTimeToLiveSeconds<1)throw new Error("Invalid 'cacheTimeToLiveSeconds' value. Value must be greater than zero.");return i}return a(t,e),t}(c),h=function(){function e(e,t,r){this.Timestamp=e,this.ConfigJSON=JSON.parse(t),this.HttpETag=r}return e.equals=function(e,t){return!(!e||!t)&&this.compareEtags(e.HttpETag,t.HttpETag)},e.compareEtags=function(e,t){return this.ensureStrictEtag(e)===this.ensureStrictEtag(t)},e.ensureStrictEtag=function(e){return e?e.length>2&&"W/"===e.substr(0,2).toLocaleUpperCase()?e.substring(2):e:""},e}(),p=function(){function e(){}return e.Preferences="p",e.FeatureFlags="f",e}(),f=function(){function e(){}return e.BaseUrl="u",e.Redirect="r",e}(),g=function(){function e(e,t,r,n){this.value=e,this.rolloutPercentageItems=t,this.rolloutRules=r,this.variationId=n}return e.fromJson=function(t){var r,n,o,s;return new e(t[this.Value],null!==(n=null===(r=t[this.RolloutPercentageItems])||void 0===r?void 0:r.map((function(e){return y.fromJson(e)})))&&void 0!==n?n:[],null!==(s=null===(o=t[this.RolloutRules])||void 0===o?void 0:o.map((function(e){return m.fromJson(e)})))&&void 0!==s?s:[],t[this.VariationId])},e.Value="v",e.SettingType="t",e.RolloutPercentageItems="p",e.RolloutRules="r",e.VariationId="i",e}(),m=function(){function e(e,t,r,n,o){this.comparisonAttribute=e,this.comparator=t,this.comparisonValue=r,this.value=n,this.variationId=o}return e.fromJson=function(t){return new e(t[this.ComparisonAttribute],t[this.Comparator],t[this.ComparisonValue],t[this.Value],t[this.VariationId])},e.Order="o",e.ComparisonAttribute="a",e.Comparator="t",e.ComparisonValue="c",e.Value="v",e.VariationId="i",e}(),y=function(){function e(e,t,r){this.percentage=e,this.value=t,this.variationId=r}return e.fromJson=function(t){return new e(t[this.Percentage],t[this.Value],t[this.VariationId])},e.Order="o",e.Value="v",e.Percentage="p",e.VariationId="i",e}(),v=function(){function e(e,t){this.fetchLogicCallbacks=[],this.configFetcher=e,this.baseConfig=t}return e.prototype.refreshLogicBaseAsync=function(e,t){var r=this;return void 0===t&&(t=!0),this.baseConfig.logger.debug("ConfigServiceBase.refreshLogicBaseAsync() - called."),new Promise((function(n){var o;r.fetchLogic(r.baseConfig,null!==(o=null==e?void 0:e.HttpETag)&&void 0!==o?o:null,0,(function(o){return s=r,i=void 0,c=function(){return function(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(r){switch(r.label){case 0:return o&&o.ConfigJSON?(this.baseConfig.logger.debug("ConfigServiceBase.refreshLogicBaseAsync() - fetchLogic() success, returning config."),[4,this.baseConfig.cache.set(this.baseConfig.getCacheKey(),o)]):[3,2];case 1:return r.sent(),n(o),[3,5];case 2:return t&&e&&e.ConfigJSON?(this.baseConfig.logger.debug("ConfigServiceBase.refreshLogicBaseAsync() - fetchLogic() didn't return a config, setting the cache with last config with new timestamp, returning last config."),e.Timestamp=(new Date).getTime(),[4,this.baseConfig.cache.set(this.baseConfig.getCacheKey(),e)]):[3,4];case 3:return r.sent(),n(e),[3,5];case 4:this.baseConfig.logger.debug("ConfigServiceBase.refreshLogicBaseAsync() - fetchLogic() didn't return a config, returing last config."),n(e),r.label=5;case 5:return[2]}}))},new((a=void 0)||(a=Promise))((function(e,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function n(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof a?o:new a((function(e){e(o)}))).then(r,n)}o((c=c.apply(s,i||[])).next())}));var s,i,a,c}))}))},e.prototype.fetchLogic=function(e,t,r,n){var o=this;this.baseConfig.logger.debug("ConfigServiceBase.fetchLogic() - called.");var s=this.baseConfig.baseUrl;this.fetchLogicInternal(this.baseConfig,t,r,(function(i){if(o.baseConfig.logger.debug("ConfigServiceBase.fetchLogic(): result.status: "+i.status),i.status!=Y.Fetched||h.compareEtags(null!=t?t:"",i.eTag))return o.baseConfig.logger.debug("ConfigServiceBase.fetchLogic(): result.status != FetchStatus.Fetched or etags are the same. Returning null."),void n(null);if(!i.responseBody)return o.baseConfig.logger.debug("ConfigServiceBase.fetchLogic(): no response body. Returning null."),void n(null);var a=new h((new Date).getTime(),i.responseBody,i.eTag),c=a.ConfigJSON[p.Preferences];if(!c)return o.baseConfig.logger.debug("ConfigServiceBase.fetchLogic(): preferences is empty. Returning newConfig."),void n(a);var l=c[f.BaseUrl];if(!l||l==s)return o.baseConfig.logger.debug("ConfigServiceBase.fetchLogic(): baseUrl OK. Returning newConfig."),void n(a);var u=c[f.Redirect];if(e.baseUrlOverriden&&2!==u)return o.baseConfig.logger.debug("ConfigServiceBase.fetchLogic(): options.baseUrlOverriden && redirect !== 2."),void n(a);if(e.baseUrl=l,0!==u){if(1===u&&e.logger.warn("Your dataGovernance parameter at ConfigCatClient initialization is not in sync with your preferences on the ConfigCat Dashboard: https://app.configcat.com/organization/data-governance. Only Organization Admins can access this preference."),r>=2)return e.logger.error("Redirect loop during config.json fetch. Please contact support@configcat.com."),void n(a);o.fetchLogic(e,t,++r,n)}else n(a)}))},e.prototype.fetchLogicInternal=function(e,t,r,n){var o=this;if(this.baseConfig.logger.debug("ConfigServiceBase.fetchLogicInternal(): called."),0===r){if(this.fetchLogicCallbacks.push(n),this.fetchLogicCallbacks.length>1)return void this.baseConfig.logger.debug("ConfigServiceBase.fetchLogicInternal(): The first fetchLogic call is already in progress. this.fetchLogicCallbacks.length = "+this.fetchLogicCallbacks.length);this.baseConfig.logger.debug("ConfigServiceBase.fetchLogicInternal(): Calling fetchLogic"),this.configFetcher.fetchLogic(e,t,(function(e){for(o.baseConfig.logger.debug("ConfigServiceBase.fetchLogicInternal(): fetchLogic() success, calling callbacks. this.fetchLogicCallbacks.length = "+o.fetchLogicCallbacks.length);o.fetchLogicCallbacks.length;){var t=o.fetchLogicCallbacks.pop();t&&(o.baseConfig.logger.debug("ConfigServiceBase.fetchLogicInternal(): fetchLogic() success, calling callback."),t(e))}}))}else this.baseConfig.logger.debug("ConfigServiceBase.fetchLogicInternal(): calling fetchLogic(), recursive call. retries = "+r),this.configFetcher.fetchLogic(e,t,n)},e}(),_=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),b=function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},S=function(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},E=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.disposed=!1,n.configChanged=r.configChanged,n.autoPollConfig=r,n.startRefreshWorker(1e3*r.pollIntervalSeconds),n.maxInitWaitTimeStamp=(new Date).getTime()+1e3*r.maxInitWaitTimeSeconds,n}return _(t,e),t.prototype.getConfig=function(){return b(this,void 0,void 0,(function(){var e;return S(this,(function(t){switch(t.label){case 0:return this.autoPollConfig.logger.debug("AutoPollConfigService.getConfig() called."),[4,this.tryReadFromCache(0)];case 1:return(e=t.sent())?(this.autoPollConfig.logger.debug("AutoPollConfigService.getConfig() - returning value from cache."),[2,new Promise((function(t){return t(e)}))]):(this.autoPollConfig.logger.debug("AutoPollConfigService.getConfig() - cache is empty, refreshing the cache."),[2,this.refreshLogic(!0)])}}))}))},t.prototype.refreshConfigAsync=function(){return this.autoPollConfig.logger.debug("AutoPollConfigService.refreshConfigAsync() called."),this.refreshLogic(!0)},t.prototype.dispose=function(){this.autoPollConfig.logger.debug("AutoPollConfigService.dispose() called."),this.disposed=!0,this.timerId&&(this.autoPollConfig.logger.debug("AutoPollConfigService.dispose() - clearing setTimeout."),clearTimeout(this.timerId))},t.prototype.refreshLogic=function(e){var t=this;return this.autoPollConfig.logger.debug("AutoPollConfigService.refreshLogic() - called."),new Promise((function(r){return b(t,void 0,void 0,(function(){var t,n,o,s;return S(this,(function(i){switch(i.label){case 0:return[4,this.baseConfig.cache.get(this.baseConfig.getCacheKey())];case 1:return t=i.sent(),[4,this.refreshLogicBaseAsync(t,e)];case 2:return n=i.sent(),o=!t&&n,s=t&&n&&!h.equals(t,n),this.autoPollConfig.logger.debug("AutoPollConfigService.refreshLogic() - weDontHaveCachedYetButHaveNew: ."+o+". weHaveBothButTheyDiffers: "+s+"."),(o||s)&&this.configChanged(),r(n),[2]}}))}))}))},t.prototype.startRefreshWorker=function(e){var t=this;this.autoPollConfig.logger.debug("AutoPollConfigService.startRefreshWorker() called."),this.refreshLogic(!0).then((function(r){t.autoPollConfig.logger.debug("AutoPollConfigService.startRefreshWorker() - calling refreshWorkerLogic()'s setTimeout."),setTimeout((function(){return t.refreshWorkerLogic(e)}),e)}))},t.prototype.refreshWorkerLogic=function(e){var t=this;this.disposed?this.autoPollConfig.logger.debug("AutoPollConfigService.refreshWorkerLogic() - called on a disposed client."):(this.autoPollConfig.logger.debug("AutoPollConfigService.refreshWorkerLogic() - called."),this.refreshLogic(!1).then((function(r){t.autoPollConfig.logger.debug("AutoPollConfigService.refreshWorkerLogic() - calling refreshWorkerLogic()'s setTimeout."),t.timerId=setTimeout((function(){t.refreshWorkerLogic(e)}),e)})))},t.prototype.tryReadFromCache=function(e){return b(this,void 0,void 0,(function(){var t,r,n;return S(this,(function(o){switch(o.label){case 0:return this.autoPollConfig.logger.debug("AutoPollConfigService.tryReadFromCache() - called. Tries: "+e+"."),[4,this.baseConfig.cache.get(this.baseConfig.getCacheKey())];case 1:return t=o.sent(),this.maxInitWaitTimeStamp>(new Date).getTime()&&(!t||t.Timestamp<(new Date).getTime()-1e3*this.autoPollConfig.pollIntervalSeconds)?(t?this.autoPollConfig.logger.debug("AutoPollConfigService.tryReadFromCache() - waiting for maxInitWaitTimeStamp because cache is expired."):this.autoPollConfig.logger.debug("AutoPollConfigService.tryReadFromCache() - waiting for maxInitWaitTimeStamp because cache is empty."),r=this.maxInitWaitTimeStamp-(new Date).getTime(),n=30+e*e*20,[4,this.sleep(Math.min(r,n))]):[3,3];case 2:return o.sent(),e++,[2,this.tryReadFromCache(e)];case 3:return this.autoPollConfig.logger.debug("AutoPollConfigService.tryReadFromCache() - returning value from cache."),[2,new Promise((function(e){return e(t)}))]}}))}))},t.prototype.sleep=function(e){return new Promise((function(t){return setTimeout(t,e)}))},t}(v),w=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),A=function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},T=function(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},C=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.cacheTimeToLiveSeconds=r.cacheTimeToLiveSeconds,n}return w(t,e),t.prototype.getConfig=function(){return A(this,void 0,void 0,(function(){var e;return T(this,(function(t){switch(t.label){case 0:return this.baseConfig.logger.debug("LazyLoadConfigService.getConfig() called."),[4,this.baseConfig.cache.get(this.baseConfig.getCacheKey())];case 1:return(e=t.sent())&&e.Timestamp+1e3*this.cacheTimeToLiveSeconds>(new Date).getTime()?(this.baseConfig.logger.debug("LazyLoadConfigService.getConfig(): cache is valid, returning from cache."),[2,e]):(this.baseConfig.logger.debug("LazyLoadConfigService.getConfig(): cache is empty or expired, calling refreshLogicBaseAsync()."),[2,this.refreshLogicBaseAsync(e)])}}))}))},t.prototype.refreshConfigAsync=function(){return A(this,void 0,void 0,(function(){var e;return T(this,(function(t){switch(t.label){case 0:return this.baseConfig.logger.debug("LazyLoadConfigService.refreshConfigAsync() called."),[4,this.baseConfig.cache.get(this.baseConfig.getCacheKey())];case 1:return e=t.sent(),[2,this.refreshLogicBaseAsync(e)]}}))}))},t}(v),I=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),R=function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},O=function(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},k=function(e){function t(t,r){return e.call(this,t,r)||this}return I(t,e),t.prototype.getConfig=function(){return R(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return this.baseConfig.logger.debug("ManualPollService.getConfig() called."),[4,this.baseConfig.cache.get(this.baseConfig.getCacheKey())];case 1:return[2,e.sent()]}}))}))},t.prototype.refreshConfigAsync=function(){return R(this,void 0,void 0,(function(){var e;return O(this,(function(t){switch(t.label){case 0:return this.baseConfig.logger.debug("ManualPollService.refreshConfigAsync() called."),[4,this.baseConfig.cache.get(this.baseConfig.getCacheKey())];case 1:return e=t.sent(),[2,this.refreshLogicBaseAsync(e)]}}))}))},t}(v);function N(e){function t(e,t){return e<<t|e>>>32-t}function r(e){for(var t="",r=7;r>=0;r--)t+=(e>>>4*r&15).toString(16);return t}var n,o,s,i,a,c,l,u,d,h=new Array(80),p=1732584193,f=4023233417,g=2562383102,m=271733878,y=3285377520,v=(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}(e)).length,_=new Array;for(o=0;o<v-3;o+=4)s=e.charCodeAt(o)<<24|e.charCodeAt(o+1)<<16|e.charCodeAt(o+2)<<8|e.charCodeAt(o+3),_.push(s);switch(v%4){case 0:o=2147483648;break;case 1:o=e.charCodeAt(v-1)<<24|8388608;break;case 2:o=e.charCodeAt(v-2)<<24|e.charCodeAt(v-1)<<16|32768;break;case 3:o=e.charCodeAt(v-3)<<24|e.charCodeAt(v-2)<<16|e.charCodeAt(v-1)<<8|128}for(_.push(o);_.length%16!=14;)_.push(0);for(_.push(v>>>29),_.push(v<<3&4294967295),n=0;n<_.length;n+=16){for(o=0;o<16;o++)h[o]=_[n+o];for(o=16;o<=79;o++)h[o]=t(h[o-3]^h[o-8]^h[o-14]^h[o-16],1);for(i=p,a=f,c=g,l=m,u=y,o=0;o<=19;o++)d=t(i,5)+(a&c|~a&l)+u+h[o]+1518500249&4294967295,u=l,l=c,c=t(a,30),a=i,i=d;for(o=20;o<=39;o++)d=t(i,5)+(a^c^l)+u+h[o]+1859775393&4294967295,u=l,l=c,c=t(a,30),a=i,i=d;for(o=40;o<=59;o++)d=t(i,5)+(a&c|a&l|c&l)+u+h[o]+2400959708&4294967295,u=l,l=c,c=t(a,30),a=i,i=d;for(o=60;o<=79;o++)d=t(i,5)+(a^c^l)+u+h[o]+3395469782&4294967295,u=l,l=c,c=t(a,30),a=i,i=d;p=p+i&4294967295,f=f+a&4294967295,g=g+c&4294967295,m=m+l&4294967295,y=y+u&4294967295}return(r(p)+r(f)+r(g)+r(m)+r(y)).toLowerCase()}var P=/^[0-9]+$/,M=function(e,t){var r=P.test(e),n=P.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},L=Number.MAX_SAFE_INTEGER||9007199254740991,B=[],D=[],x={},U=0,j=function(e,t){var r=U++;x[e]=r,D[r]=t,B[r]=new RegExp(t,void 0)};j("NUMERICIDENTIFIER","0|[1-9]\\d*"),j("NUMERICIDENTIFIERLOOSE","[0-9]+"),j("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),j("MAINVERSION","(".concat(D[x.NUMERICIDENTIFIER],")\\.")+"(".concat(D[x.NUMERICIDENTIFIER],")\\.")+"(".concat(D[x.NUMERICIDENTIFIER],")")),j("MAINVERSIONLOOSE","(".concat(D[x.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(D[x.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(D[x.NUMERICIDENTIFIERLOOSE],")")),j("PRERELEASEIDENTIFIER","(?:".concat(D[x.NUMERICIDENTIFIER],"|").concat(D[x.NONNUMERICIDENTIFIER],")")),j("PRERELEASEIDENTIFIERLOOSE","(?:".concat(D[x.NUMERICIDENTIFIERLOOSE],"|").concat(D[x.NONNUMERICIDENTIFIER],")")),j("PRERELEASE","(?:-(".concat(D[x.PRERELEASEIDENTIFIER],"(?:\\.").concat(D[x.PRERELEASEIDENTIFIER],")*))")),j("PRERELEASELOOSE","(?:-?(".concat(D[x.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(D[x.PRERELEASEIDENTIFIERLOOSE],")*))")),j("BUILDIDENTIFIER","[0-9A-Za-z-]+"),j("BUILD","(?:\\+(".concat(D[x.BUILDIDENTIFIER],"(?:\\.").concat(D[x.BUILDIDENTIFIER],")*))")),j("FULLPLAIN","v?".concat(D[x.MAINVERSION]).concat(D[x.PRERELEASE],"?").concat(D[x.BUILD],"?")),j("FULL","^".concat(D[x.FULLPLAIN],"$")),j("LOOSEPLAIN","[v=\\s]*".concat(D[x.MAINVERSIONLOOSE]).concat(D[x.PRERELEASELOOSE],"?").concat(D[x.BUILD],"?")),j("LOOSE","^".concat(D[x.LOOSEPLAIN],"$"));var F=function(){function e(t,r){if(r&&"object"==typeof r||(r={loose:!!r,includePrerelease:!1}),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError("Invalid Version: ".concat(t));if(t.length>256)throw new TypeError("version is longer than ".concat(256," characters"));this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;var n=t.trim().match(r.loose?B[x.LOOSE]:B[x.FULL]);if(!n)throw new TypeError("Invalid Version: ".concat(t));if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>L||this.major<0)throw new TypeError("Invalid major version");if(this.minor>L||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>L||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<L)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}return e.prototype.format=function(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version},e.prototype.toString=function(){return this.version},e.prototype.compare=function(t){if(!(t instanceof e)){if("string"==typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)},e.prototype.compareMain=function(t){return t instanceof e||(t=new e(t,this.options)),M(this.major,t.major)||M(this.minor,t.minor)||M(this.patch,t.patch)},e.prototype.comparePre=function(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var r=0;do{var n=this.prerelease[r],o=t.prerelease[r];if(void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return M(n,o)}while(++r)},e.prototype.compareBuild=function(t){t instanceof e||(t=new e(t,this.options));var r=0;do{var n=this.build[r],o=t.build[r];if(void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return M(n,o)}while(++r)},e.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: ".concat(e))}return this.format(),this.raw=this.version,this},e}(),H=function(e,t,r){return new F(e,r).compare(new F(t,r))},W=function(e){var t=function(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof F)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?B[x.LOOSE]:B[x.FULL]).test(e))return null;try{return new F(e,t)}catch(e){return null}}(e,!1);return t?t.version:null},q=function(e){return void 0===e};function z(e){return Object.fromEntries(Object.entries(e[p.FeatureFlags]).map((function(e){var t=e[0],r=e[1];return[t,g.fromJson(r)]})))}var G,$=function(e,t,r,n){this.custom={},this.identifier=e,this.email=t,this.country=r,this.custom=n||{}},V=function(){function e(e){this.logger=e}return e.prototype.Evaluate=function(e,t,r,n,o){if(this.logger.debug("RolloutEvaluator.Evaluate() called."),!e[t]){var s="Evaluating getValue('"+t+"') failed. Returning default value: '"+r+"'.";return s+=" Here are the available keys: {"+Object.keys(e).join()+"}.",this.logger.error(s),{Value:r,VariationId:o}}var i=e[t],a=new K;a.User=n,a.KeyName=t,a.ReturnValue=r;var c=new J;return c.EvaluateLog=a,n?null==(c=this.EvaluateRules(i.rolloutRules,n,a)).ValueAndVariationId&&(c.ValueAndVariationId=this.EvaluateVariations(i.rolloutPercentageItems,t,n),c.ValueAndVariationId&&(c.EvaluateLog.ReturnValue=c.ValueAndVariationId.Value),i.rolloutPercentageItems.length>0&&c.EvaluateLog.OpAppendLine("Evaluating % options => "+(null==c.ValueAndVariationId?"user not targeted":"user targeted"))):(i.rolloutRules&&i.rolloutRules.length>0||i.rolloutPercentageItems&&i.rolloutPercentageItems.length>0)&&(s="Evaluating getValue('"+t+"'). ",s+="UserObject missing! You should pass a UserObject to getValue(), in order to make targeting work properly. ",s+="Read more: https://configcat.com/docs/advanced/user-object",this.logger.warn(s)),null==c.ValueAndVariationId&&(c.ValueAndVariationId={Value:i.value,VariationId:i.variationId},c.EvaluateLog.ReturnValue=c.ValueAndVariationId.Value),this.logger.info(c.EvaluateLog.GetLog()),c.ValueAndVariationId},e.prototype.EvaluateRules=function(e,t,r){this.logger.debug("RolloutEvaluator.EvaluateRules() called.");var n=new J;if(n.ValueAndVariationId=null,e&&e.length>0)for(var o=function(o){var i=e[o],a=s.GetUserAttribute(t,i.comparisonAttribute);if(!a)return"continue";var c=i.comparator,l=i.comparisonValue,u="Evaluating rule: '"+a+"' "+s.RuleToString(c)+" '"+l+"' => ";switch(c){case 0:for(var d=l.split(","),h=0;h<d.length;h++)if(d[h].trim()===a)return u+="MATCH",r.OpAppendLine(u),n.ValueAndVariationId={Value:i.value,VariationId:i.variationId},r.ReturnValue=n.ValueAndVariationId.Value,n.EvaluateLog=r,{value:n};u+="no match";break;case 1:if(!l.split(",").some((function(e){return e.trim()===a})))return u+="MATCH",r.OpAppendLine(u),n.ValueAndVariationId={Value:i.value,VariationId:i.variationId},r.ReturnValue=n.ValueAndVariationId.Value,n.EvaluateLog=r,{value:n};u+="no match";break;case 2:if(-1!==a.indexOf(l))return u+="MATCH",r.OpAppendLine(u),n.ValueAndVariationId={Value:i.value,VariationId:i.variationId},r.ReturnValue=n.ValueAndVariationId.Value,n.EvaluateLog=r,{value:n};u+="no match";break;case 3:if(-1===a.indexOf(l))return u+="MATCH",r.OpAppendLine(u),n.ValueAndVariationId={Value:i.value,VariationId:i.variationId},r.ReturnValue=n.ValueAndVariationId.Value,n.EvaluateLog=r,{value:n};u+="no match";break;case 4:case 5:case 6:case 7:case 8:case 9:if(s.EvaluateSemver(a,l,c))return u+="MATCH",r.OpAppendLine(u),n.ValueAndVariationId={Value:i.value,VariationId:i.variationId},r.ReturnValue=n.ValueAndVariationId.Value,n.EvaluateLog=r,{value:n};u+="no match";break;case 10:case 11:case 12:case 13:case 14:case 15:if(s.EvaluateNumber(a,l,c))return u+="MATCH",r.OpAppendLine(u),n.ValueAndVariationId={Value:i.value,VariationId:i.variationId},r.ReturnValue=n.ValueAndVariationId.Value,n.EvaluateLog=r,{value:n};u+="no match";break;case 16:var p=l.split(",");for(h=0;h<p.length;h++)if(p[h].trim()===N(a))return u+="MATCH",r.OpAppendLine(u),n.ValueAndVariationId={Value:i.value,VariationId:i.variationId},r.ReturnValue=n.ValueAndVariationId.Value,n.EvaluateLog=r,{value:n};u+="no match";break;case 17:if(!l.split(",").some((function(e){return e.trim()===N(a)})))return u+="MATCH",r.OpAppendLine(u),n.ValueAndVariationId={Value:i.value,VariationId:i.variationId},r.ReturnValue=n.ValueAndVariationId.Value,n.EvaluateLog=r,{value:n};u+="no match"}r.OpAppendLine(u)},s=this,i=0;i<e.length;i++){var a=o(i);if("object"==typeof a)return a.value}return n.EvaluateLog=r,n},e.prototype.EvaluateVariations=function(e,t,r){if(this.logger.debug("RolloutEvaluator.EvaluateVariations() called."),e&&e.length>0)for(var n=N(t+(null===r.identifier||void 0===r.identifier?"":r.identifier)).substring(0,7),o=parseInt(n,16)%100,s=0,i=0;i<e.length;i++){var a=e[i];if(o<(s+=+a.percentage))return{Value:a.value,VariationId:a.variationId}}return null},e.prototype.EvaluateNumber=function(e,t,r){var n,o;if(this.logger.debug("RolloutEvaluator.EvaluateNumber() called."),!e||Number.isNaN(Number.parseFloat(e.replace(",","."))))return!1;if(n=Number.parseFloat(e.replace(",",".")),!t||Number.isNaN(Number.parseFloat(t.replace(",","."))))return!1;switch(o=Number.parseFloat(t.replace(",",".")),r){case 10:return n==o;case 11:return n!=o;case 12:return n<o;case 13:return n<=o;case 14:return n>o;case 15:return n>=o}return!1},e.prototype.EvaluateSemver=function(e,t,r){if(this.logger.debug("RolloutEvaluator.EvaluateSemver() called."),null==W(e)||q(t))return!1;switch(t=t.trim(),r){case 4:for(var n=t.split(","),o=!1,s=0;s<n.length;s++)if(n[s]&&!q(n[s])&&""!==n[s].trim()){if(null==W(n[s].trim()))return!1;o||(i=e,a=n[s].trim(),o=0===H(i,a,!0))}return o;case 5:return!t.split(",").some((function(t){return!(!t||q(t)||""===t.trim())&&null!=(t=W(t.trim()))&&function(e,t){return 0===H(e,t,!1)}(e,t)}));case 6:return null!=W(t)&&function(e,t){return H(e,t,!1)<0}(e,t);case 7:return null!=W(t)&&function(e,t){return H(e,t,!1)<=0}(e,t);case 8:return null!=W(t)&&function(e,t){return H(e,t,!1)>0}(e,t);case 9:return null!=W(t)&&function(e,t){return H(e,t,!1)>=0}(e,t)}var i,a;return!1},e.prototype.GetUserAttribute=function(e,t){switch(t){case"Identifier":return e.identifier;case"Email":return e.email;case"Country":return e.country;default:return(e.custom||{})[t]}},e.prototype.RuleToString=function(e){switch(e){case 0:return"IS ONE OF";case 1:return"IS NOT ONE OF";case 2:return"CONTAINS";case 3:return"DOES NOT CONTAIN";case 4:return"IS ONE OF (SemVer)";case 5:return"IS NOT ONE OF (SemVer)";case 6:return"< (SemVer)";case 7:return"<= (SemVer)";case 8:return"> (SemVer)";case 9:return">= (SemVer)";case 10:return"= (Number)";case 11:return"!= (Number)";case 12:return"< (Number)";case 13:return"<= (Number)";case 14:return"> (Number)";case 15:return">= (Number)";case 16:return"IS ONE OF (Sensitive)";case 17:return"IS NOT ONE OF (Sensitive)";default:return e}},e}(),J=function(){},K=function(){function e(){this.Operations=""}return e.prototype.OpAppendLine=function(e){this.Operations+=" "+e+"\n"},e.prototype.GetLog=function(){return"Evaluate '"+this.KeyName+"'\n User : "+JSON.stringify(this.User)+"\n"+this.Operations+" Returning value : "+this.ReturnValue},e}();!function(e){e[e.LocalOnly=0]="LocalOnly",e[e.LocalOverRemote=1]="LocalOverRemote",e[e.RemoteOverLocal=2]="RemoteOverLocal"}(G||(G={}));var Q,Y,X=function(){function e(e){this.map={},this.map=Object.fromEntries(Object.entries(e).map((function(e){return[e[0],{value:e[1],variationId:"",rolloutRules:[],rolloutPercentageItems:[]}]})))}return e.prototype.getOverrides=function(){return Promise.resolve(this.map)},e}(),Z=function(e,t){this.dataSource=e,this.behaviour=t},ee=function(){return ee=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ee.apply(this,arguments)},te=function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},re=function(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},ne=function(){function e(e,t){var r;if(!e)throw new Error("Invalid 'options' value");if(this.options=e,this.options.logger.debug("Initializing ConfigCatClient. Options: "+JSON.stringify(this.options)),!t)throw new Error("Invalid 'configCatKernel' value");if(!t.configFetcher)throw new Error("Invalid 'configCatKernel.configFetcher' value");if(this.evaluator=new V(e.logger),(null===(r=null==e?void 0:e.flagOverrides)||void 0===r?void 0:r.behaviour)!=G.LocalOnly)if(e&&e instanceof d)this.configService=new C(t.configFetcher,e);else if(e&&e instanceof u)this.configService=new k(t.configFetcher,e);else{if(!(e&&e instanceof l))throw new Error("Invalid 'options' value");this.configService=new E(t.configFetcher,e)}}return e.prototype.dispose=function(){this.options.logger.debug("dispose() called"),this.configService instanceof E&&(this.options.logger.debug("Disposing AutoPollConfigService"),this.configService.dispose())},e.prototype.getValue=function(e,t,r,n){this.options.logger.debug("getValue() called."),this.getValueAsync(e,t,n).then((function(e){r(e)}))},e.prototype.getValueAsync=function(e,t,r){var n=this;return this.options.logger.debug("getValueAsync() called."),new Promise((function(o){return te(n,void 0,void 0,(function(){var n,s;return re(this,(function(i){switch(i.label){case 0:return[4,this.getSettingsAsync()];case 1:return(n=i.sent())?(s=this.evaluator.Evaluate(n,e,t,r).Value,o(s),[2]):(this.options.logger.error("config.json is not present. Returning default value: '"+t+"'."),o(t),[2])}}))}))}))},e.prototype.forceRefresh=function(e){this.options.logger.debug("forceRefresh() called."),this.forceRefreshAsync().then((function(){e()}))},e.prototype.forceRefreshAsync=function(){var e=this;return this.options.logger.debug("forceRefreshAsync() called."),new Promise((function(t){return te(e,void 0,void 0,(function(){var e;return re(this,(function(r){switch(r.label){case 0:return[4,null===(e=this.configService)||void 0===e?void 0:e.refreshConfigAsync()];case 1:return r.sent(),t(),[2]}}))}))}))},e.prototype.getAllKeys=function(e){this.options.logger.debug("getAllKeys() called."),this.getAllKeysAsync().then((function(t){e(t)}))},e.prototype.getAllKeysAsync=function(){var e=this;return this.options.logger.debug("getAllKeysAsync() called."),new Promise((function(t){return te(e,void 0,void 0,(function(){var e;return re(this,(function(r){switch(r.label){case 0:return[4,this.getSettingsAsync()];case 1:return(e=r.sent())?(t(Object.keys(e)),[2]):(this.options.logger.error("config.json is not present, returning empty array"),t([]),[2])}}))}))}))},e.prototype.getVariationId=function(e,t,r,n){this.options.logger.debug("getVariationId() called."),this.getVariationIdAsync(e,t,n).then((function(e){r(e)}))},e.prototype.getVariationIdAsync=function(e,t,r){var n=this;return this.options.logger.debug("getVariationIdAsync() called."),new Promise((function(o){return te(n,void 0,void 0,(function(){var n,s;return re(this,(function(i){switch(i.label){case 0:return[4,this.getSettingsAsync()];case 1:return(n=i.sent())?(s=this.evaluator.Evaluate(n,e,null,r,t).VariationId,o(s),[2]):(this.options.logger.error("config.json is not present. Returning default variationId: '"+t+"'."),o(t),[2])}}))}))}))},e.prototype.getAllVariationIds=function(e,t){this.options.logger.debug("getAllVariationIds() called."),this.getAllVariationIdsAsync(t).then((function(t){e(t)}))},e.prototype.getAllVariationIdsAsync=function(e){var t=this;return this.options.logger.debug("getAllVariationIdsAsync() called."),new Promise((function(r){return te(t,void 0,void 0,(function(){var t,n,o,s=this;return re(this,(function(i){switch(i.label){case 0:return[4,this.getAllKeysAsync()];case 1:return 0===(t=i.sent()).length?(r([]),[2]):(n=t.map((function(t){return s.getVariationIdAsync(t,null,e)})),[4,Promise.all(n)]);case 2:return o=i.sent(),r(o),[2]}}))}))}))},e.prototype.getKeyAndValue=function(e,t){this.options.logger.debug("getKeyAndValue() called."),this.getKeyAndValueAsync(e).then((function(e){t(e)}))},e.prototype.getKeyAndValueAsync=function(e){var t=this;return this.options.logger.debug("getKeyAndValueAsync() called."),new Promise((function(r){return te(t,void 0,void 0,(function(){var t,n,o,s,i,a,c;return re(this,(function(l){switch(l.label){case 0:return[4,this.getSettingsAsync()];case 1:if(!(t=l.sent()))return this.options.logger.error("config.json is not present, returning empty array"),r(null),[2];for(n in t){if(e===t[n].variationId)return r({settingKey:n,settingValue:t[n].value}),[2];if((o=t[n].rolloutRules)&&o.length>0)for(a=0;a<o.length;a++)if(s=o[a],e===s.variationId)return r({settingKey:n,settingValue:s.value}),[2];if((i=t[n].rolloutPercentageItems)&&i.length>0)for(a=0;a<i.length;a++)if(c=i[a],e===c.variationId)return r({settingKey:n,settingValue:c.value}),[2]}return this.options.logger.error("Could not find the setting for the given variation ID: "+e),r(null),[2]}}))}))}))},e.prototype.getAllValues=function(e,t){this.options.logger.debug("getAllValues() called."),this.getAllValuesAsync(t).then((function(t){e(t)}))},e.prototype.getAllValuesAsync=function(e){var t=this;return this.options.logger.debug("getAllValuesAsync() called."),new Promise((function(r){return te(t,void 0,void 0,(function(){var t,n,o,s=this;return re(this,(function(i){switch(i.label){case 0:return[4,this.getSettingsAsync()];case 1:return(t=i.sent())?(n=Object.keys(t),o=[],n.forEach((function(r){o.push({settingKey:r,settingValue:s.evaluator.Evaluate(t,r,void 0,e).Value})})),r(o),[2]):(this.options.logger.error("config.json is not present, returning empty array"),r([]),[2])}}))}))}))},e.prototype.getSettingsAsync=function(){var e=this;return this.options.logger.debug("getSettingsAsync() called."),new Promise((function(t){return te(e,void 0,void 0,(function(){var e,r,n,o,s,i,a,c;return re(this,(function(l){switch(l.label){case 0:return(null===(s=this.options)||void 0===s?void 0:s.flagOverrides)?[4,this.options.flagOverrides.dataSource.getOverrides()]:[3,3];case 1:return e=l.sent(),this.options.flagOverrides.behaviour==G.LocalOnly?(t(e),[2]):[4,null===(i=this.configService)||void 0===i?void 0:i.getConfig()];case 2:if(r=l.sent(),n=z(null!==(a=null==r?void 0:r.ConfigJSON)&&void 0!==a?a:{}),this.options.flagOverrides.behaviour==G.LocalOverRemote)return t(ee(ee({},n),e)),[2];if(this.options.flagOverrides.behaviour==G.RemoteOverLocal)return t(ee(ee({},e),n)),[2];l.label=3;case 3:return[4,null===(c=this.configService)||void 0===c?void 0:c.getConfig()];case 4:return(o=l.sent())&&o.ConfigJSON&&o.ConfigJSON[p.FeatureFlags]?(t(z(o.ConfigJSON)),[2]):(t(null),[2])}}))}))}))},e}();function oe(e,t,r){return new ne(new l(e,t.sdkType,t.sdkVersion,r,t.cache),t)}function se(e,t,r){return new ne(new u(e,t.sdkType,t.sdkVersion,r,t.cache),t)}function ie(e,t,r){return new ne(new d(e,t.sdkType,t.sdkVersion,r,t.cache),t)}function ae(e){return new s(e)}Object.fromEntries||(Object.fromEntries=function(e){if(!e||!e[Symbol.iterator])throw new Error("Object.fromEntries() requires a single iterable argument");for(var t={},r=0,n=e;r<n.length;r++){var o=n[r],s=o[0],i=o[1];t[s]=i}return t}),function(e){e[e.Debug=4]="Debug",e[e.Info=3]="Info",e[e.Warn=2]="Warn",e[e.Error=1]="Error",e[e.Off=-1]="Off"}(Q||(Q={})),function(e){e[e.Fetched=0]="Fetched",e[e.NotModified=1]="NotModified",e[e.Errored=2]="Errored"}(Y||(Y={}));var ce=function(){function e(e,t,r){this.status=e,this.responseBody=t,this.eTag=r}return e.success=function(t,r){return new e(Y.Fetched,t,r)},e.notModified=function(){return new e(Y.NotModified,"")},e.error=function(){return new e(Y.Errored,"")},e}()},45932:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OverrideBehaviour=t.DataGovernance=t.createFlagOverridesFromMap=t.createConsoleLogger=t.createClientWithLazyLoad=t.createClientWithManualPoll=t.createClientWithAutoPoll=t.createClient=void 0;var n=r(37603),o=r(31490),s=r(41837),i=r(44758);function a(e,t){return n.createClientWithAutoPoll(e,{configFetcher:new o.HttpConfigFetcher,cache:new s.InMemoryCache,sdkType:"ConfigCat-Node",sdkVersion:i.default},t)}t.createClient=function(e,t){return a(e,t)},t.createClientWithAutoPoll=a,t.createClientWithManualPoll=function(e,t){return n.createClientWithManualPoll(e,{configFetcher:new o.HttpConfigFetcher,cache:new s.InMemoryCache,sdkType:"ConfigCat-Node",sdkVersion:i.default},t)},t.createClientWithLazyLoad=function(e,t){return n.createClientWithLazyLoad(e,{configFetcher:new o.HttpConfigFetcher,cache:new s.InMemoryCache,sdkType:"ConfigCat-Node",sdkVersion:i.default},t)},t.createConsoleLogger=function(e){return n.createConsoleLogger(e)},t.createFlagOverridesFromMap=function(e,t){return new n.FlagOverrides(new n.MapOverrideDataSource(e),t)},t.DataGovernance={Global:n.DataGovernance.Global,EuOnly:n.DataGovernance.EuOnly},t.OverrideBehaviour={LocalOnly:n.OverrideBehaviour.LocalOnly,LocalOverRemote:n.OverrideBehaviour.LocalOverRemote,RemoteOverLocal:n.OverrideBehaviour.RemoteOverLocal}},31490:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpConfigFetcher=void 0;var n=r(13685),o=r(95687),s=r(6149),i=r(57310),a=r(37603),c=function(){function e(){}return e.prototype.fetchLogic=function(e,t,r){e.logger.debug("HttpConfigFetcher.fetchLogic() called.");var c,l=e.getUrl(),u=l.startsWith("https");if(e.proxy)try{var d=new i.URL(e.proxy);c=("https:"===d.protocol?u?s.httpsOverHttps:s.httpOverHttps:u?s.httpsOverHttp:s.httpOverHttp)({proxy:{host:d.hostname,port:d.port,proxyAuth:d.username&&d.password?d.username+":"+d.password:null}})}catch(t){e.logger.error("Failed to parse options.proxy: "+e.proxy)}var h={agent:c,headers:{"User-Agent":e.clientVersion,"If-None-Match":t||null},timeout:e.requestTimeoutMs};e.logger.debug(JSON.stringify(h));var p=(u?o:n).get(l,h,(function(t){var n=[];t.on("data",(function(e){n.push(e)})),t.on("end",(function(){if(n&&t&&200===t.statusCode)e.logger.debug("HttpConfigFetcher.fetchLogic() Response received, status = 200."),r(a.FetchResult.success(Buffer.concat(n).toString(),t.headers.etag));else if(t&&304===t.statusCode)e.logger.debug("HttpConfigFetcher.fetchLogic() Response received, status = 304."),r(a.FetchResult.notModified());else{var o=t?"Status: "+t.statusCode+" - "+t.statusMessage:"Empty response from API.";e.logger.error("Failed to download feature flags & settings from ConfigCat. "+o),e.logger.error("Double-check your SDK Key on https://app.configcat.com/sdkkey"),r(a.FetchResult.error())}}))}));p.on("timeout",(function(){p.destroy(new Error("Request timed out. Timeout value: "+e.requestTimeoutMs+"ms"))})).on("error",(function(t){e.logger.error("Failed to download feature flags & settings from ConfigCat. "+t),r(a.FetchResult.error())})).end()},e}();t.HttpConfigFetcher=c},44758:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="8.0.0"},40452:function(e,t,r){var n;e.exports=(n=r(78249),r(98269),r(68214),r(90888),r(75109),function(){var e=n,t=e.lib.BlockCipher,r=e.algo,o=[],s=[],i=[],a=[],c=[],l=[],u=[],d=[],h=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,n=0;for(t=0;t<256;t++){var f=n^n<<1^n<<2^n<<3^n<<4;f=f>>>8^255&f^99,o[r]=f,s[f]=r;var g=e[r],m=e[g],y=e[m],v=257*e[f]^16843008*f;i[r]=v<<24|v>>>8,a[r]=v<<16|v>>>16,c[r]=v<<8|v>>>24,l[r]=v,v=16843009*y^65537*m^257*g^16843008*r,u[f]=v<<24|v>>>8,d[f]=v<<16|v>>>16,h[f]=v<<8|v>>>24,p[f]=v,r?(r=g^e[e[e[y^g]]],n^=e[e[n]]):r=n=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],g=r.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,n=4*((this._nRounds=r+6)+1),s=this._keySchedule=[],i=0;i<n;i++)i<r?s[i]=t[i]:(l=s[i-1],i%r?r>6&&i%r==4&&(l=o[l>>>24]<<24|o[l>>>16&255]<<16|o[l>>>8&255]<<8|o[255&l]):(l=o[(l=l<<8|l>>>24)>>>24]<<24|o[l>>>16&255]<<16|o[l>>>8&255]<<8|o[255&l],l^=f[i/r|0]<<24),s[i]=s[i-r]^l);for(var a=this._invKeySchedule=[],c=0;c<n;c++){if(i=n-c,c%4)var l=s[i];else l=s[i-4];a[c]=c<4||i<=4?l:u[o[l>>>24]]^d[o[l>>>16&255]]^h[o[l>>>8&255]]^p[o[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,a,c,l,o)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,u,d,h,p,s),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,o,s,i,a){for(var c=this._nRounds,l=e[t]^r[0],u=e[t+1]^r[1],d=e[t+2]^r[2],h=e[t+3]^r[3],p=4,f=1;f<c;f++){var g=n[l>>>24]^o[u>>>16&255]^s[d>>>8&255]^i[255&h]^r[p++],m=n[u>>>24]^o[d>>>16&255]^s[h>>>8&255]^i[255&l]^r[p++],y=n[d>>>24]^o[h>>>16&255]^s[l>>>8&255]^i[255&u]^r[p++],v=n[h>>>24]^o[l>>>16&255]^s[u>>>8&255]^i[255&d]^r[p++];l=g,u=m,d=y,h=v}g=(a[l>>>24]<<24|a[u>>>16&255]<<16|a[d>>>8&255]<<8|a[255&h])^r[p++],m=(a[u>>>24]<<24|a[d>>>16&255]<<16|a[h>>>8&255]<<8|a[255&l])^r[p++],y=(a[d>>>24]<<24|a[h>>>16&255]<<16|a[l>>>8&255]<<8|a[255&u])^r[p++],v=(a[h>>>24]<<24|a[l>>>16&255]<<16|a[u>>>8&255]<<8|a[255&d])^r[p++],e[t]=g,e[t+1]=m,e[t+2]=y,e[t+3]=v},keySize:8});e.AES=t._createHelper(g)}(),n.AES)},75109:function(e,t,r){var n,o,s,i,a,c,l,u,d,h,p,f,g,m,y,v,_,b,S;e.exports=(n=r(78249),r(90888),void(n.lib.Cipher||(o=n,s=o.lib,i=s.Base,a=s.WordArray,c=s.BufferedBlockAlgorithm,l=o.enc,l.Utf8,u=l.Base64,d=o.algo.EvpKDF,h=s.Cipher=c.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?S:_}return function(t){return{encrypt:function(r,n,o){return e(n).encrypt(t,r,n,o)},decrypt:function(r,n,o){return e(n).decrypt(t,r,n,o)}}}}()}),s.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),p=o.mode={},f=s.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),g=p.CBC=function(){var e=f.extend();function t(e,t,r){var n,o=this._iv;o?(n=o,this._iv=void 0):n=this._prevBlock;for(var s=0;s<r;s++)e[t+s]^=n[s]}return e.Encryptor=e.extend({processBlock:function(e,r){var n=this._cipher,o=n.blockSize;t.call(this,e,r,o),n.encryptBlock(e,r),this._prevBlock=e.slice(r,r+o)}}),e.Decryptor=e.extend({processBlock:function(e,r){var n=this._cipher,o=n.blockSize,s=e.slice(r,r+o);n.decryptBlock(e,r),t.call(this,e,r,o),this._prevBlock=s}}),e}(),m=(o.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,o=n<<24|n<<16|n<<8|n,s=[],i=0;i<n;i+=4)s.push(o);var c=a.create(s,n);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:m}),reset:function(){var e;h.reset.call(this);var t=this.cfg,r=t.iv,n=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,r&&r.words):(this._mode=e.call(n,this,r&&r.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),y=s.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),v=(o.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;return(r?a.create([1398893684,1701076831]).concat(r).concat(t):t).toString(u)},parse:function(e){var t,r=u.parse(e),n=r.words;return 1398893684==n[0]&&1701076831==n[1]&&(t=a.create(n.slice(2,4)),n.splice(0,4),r.sigBytes-=16),y.create({ciphertext:r,salt:t})}},_=s.SerializableCipher=i.extend({cfg:i.extend({format:v}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var o=e.createEncryptor(r,n),s=o.finalize(t),i=o.cfg;return y.create({ciphertext:s,key:r,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=(o.kdf={}).OpenSSL={execute:function(e,t,r,n){n||(n=a.random(8));var o=d.create({keySize:t+r}).compute(e,n),s=a.create(o.words.slice(t),4*r);return o.sigBytes=4*t,y.create({key:o,iv:s,salt:n})}},S=s.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:b}),encrypt:function(e,t,r,n){var o=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize);n.iv=o.iv;var s=_.encrypt.call(this,e,t,o.key,n);return s.mixIn(o),s},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var o=n.kdf.execute(r,e.keySize,e.ivSize,t.salt);return n.iv=o.iv,_.decrypt.call(this,e,t,o.key,n)}}))))},78249:function(e,t,r){var n;e.exports=(n=n||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&"undefined"!=typeof global&&global.crypto&&(n=global.crypto),!n)try{n=r(6113)}catch(e){}var o=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),i={},a=i.lib={},c=a.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=a.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,o=e.sigBytes;if(this.clamp(),n%4)for(var s=0;s<o;s++){var i=r[s>>>2]>>>24-s%4*8&255;t[n+s>>>2]|=i<<24-(n+s)%4*8}else for(var a=0;a<o;a+=4)t[n+a>>>2]=r[a>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(o());return new l.init(t,e)}}),u=i.enc={},d=u.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o++){var s=t[o>>>2]>>>24-o%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new l.init(r,t/2)}},h=u.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o++){var s=t[o>>>2]>>>24-o%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new l.init(r,t)}},p=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},f=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,n=this._data,o=n.words,s=n.sigBytes,i=this.blockSize,a=s/(4*i),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*i,u=e.min(4*c,s);if(c){for(var d=0;d<c;d+=i)this._doProcessBlock(o,d);r=o.splice(0,c),n.sigBytes-=u}return new l.init(r,u)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(a.Hasher=f.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new g.HMAC.init(e,r).finalize(t)}}}),i.algo={});return i}(Math),n)},98269:function(e,t,r){var n,o,s;e.exports=(n=r(78249),s=(o=n).lib.WordArray,o.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var o=[],s=0;s<r;s+=3)for(var i=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,a=0;a<4&&s+.75*a<r;a++)o.push(n.charAt(i>>>6*(3-a)&63));var c=n.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(e){var t=e.length,r=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var o=0;o<r.length;o++)n[r.charCodeAt(o)]=o}var i=r.charAt(64);if(i){var a=e.indexOf(i);-1!==a&&(t=a)}return function(e,t,r){for(var n=[],o=0,i=0;i<t;i++)if(i%4){var a=r[e.charCodeAt(i-1)]<<i%4*2|r[e.charCodeAt(i)]>>>6-i%4*2;n[o>>>2]|=a<<24-o%4*8,o++}return s.create(n,o)}(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},n.enc.Base64)},43786:function(e,t,r){var n,o,s;e.exports=(n=r(78249),s=(o=n).lib.WordArray,o.enc.Base64url={stringify:function(e,t=!0){var r=e.words,n=e.sigBytes,o=t?this._safe_map:this._map;e.clamp();for(var s=[],i=0;i<n;i+=3)for(var a=(r[i>>>2]>>>24-i%4*8&255)<<16|(r[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|r[i+2>>>2]>>>24-(i+2)%4*8&255,c=0;c<4&&i+.75*c<n;c++)s.push(o.charAt(a>>>6*(3-c)&63));var l=o.charAt(64);if(l)for(;s.length%4;)s.push(l);return s.join("")},parse:function(e,t=!0){var r=e.length,n=t?this._safe_map:this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<n.length;i++)o[n.charCodeAt(i)]=i}var a=n.charAt(64);if(a){var c=e.indexOf(a);-1!==c&&(r=c)}return function(e,t,r){for(var n=[],o=0,i=0;i<t;i++)if(i%4){var a=r[e.charCodeAt(i-1)]<<i%4*2|r[e.charCodeAt(i)]>>>6-i%4*2;n[o>>>2]|=a<<24-o%4*8,o++}return s.create(n,o)}(e,r,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},n.enc.Base64url)},50298:function(e,t,r){var n;e.exports=(n=r(78249),function(){var e=n,t=e.lib.WordArray,r=e.enc;function o(e){return e<<8&4278255360|e>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o+=2){var s=t[o>>>2]>>>16-o%4*8&65535;n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var r=e.length,n=[],o=0;o<r;o++)n[o>>>1]|=e.charCodeAt(o)<<16-o%2*16;return t.create(n,2*r)}},r.Utf16LE={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],s=0;s<r;s+=2){var i=o(t[s>>>2]>>>16-s%4*8&65535);n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var r=e.length,n=[],s=0;s<r;s++)n[s>>>1]|=o(e.charCodeAt(s)<<16-s%2*16);return t.create(n,2*r)}}}(),n.enc.Utf16)},90888:function(e,t,r){var n,o,s,i,a,c,l,u;e.exports=(u=r(78249),r(62783),r(89824),s=(o=(n=u).lib).Base,i=o.WordArray,c=(a=n.algo).MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,n=this.cfg,o=n.hasher.create(),s=i.create(),a=s.words,c=n.keySize,l=n.iterations;a.length<c;){r&&o.update(r),r=o.update(e).finalize(t),o.reset();for(var u=1;u<l;u++)r=o.finalize(r),o.reset();s.concat(r)}return s.sigBytes=4*c,s}}),n.EvpKDF=function(e,t,r){return l.create(r).compute(e,t)},u.EvpKDF)},42209:function(e,t,r){var n,o,s,i;e.exports=(i=r(78249),r(75109),o=(n=i).lib.CipherParams,s=n.enc.Hex,n.format.Hex={stringify:function(e){return e.ciphertext.toString(s)},parse:function(e){var t=s.parse(e);return o.create({ciphertext:t})}},i.format.Hex)},89824:function(e,t,r){var n,o,s;e.exports=(o=(n=r(78249)).lib.Base,s=n.enc.Utf8,void(n.algo.HMAC=o.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=s.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),i=this._iKey=t.clone(),a=o.words,c=i.words,l=0;l<r;l++)a[l]^=1549556828,c[l]^=909522486;o.sigBytes=i.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})))},81354:function(e,t,r){var n;e.exports=(n=r(78249),r(64938),r(4433),r(50298),r(98269),r(43786),r(68214),r(62783),r(52153),r(87792),r(70034),r(17460),r(13327),r(30706),r(89824),r(2112),r(90888),r(75109),r(8568),r(74242),r(59968),r(27660),r(31148),r(43615),r(92807),r(71077),r(56475),r(16991),r(42209),r(40452),r(94253),r(51857),r(84454),r(93974),n)},4433:function(e,t,r){var n;e.exports=(n=r(78249),function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init,r=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var r=e.byteLength,n=[],o=0;o<r;o++)n[o>>>2]|=e[o]<<24-o%4*8;t.call(this,n,r)}else t.apply(this,arguments)};r.prototype=e}}(),n.lib.WordArray)},68214:function(e,t,r){var n;e.exports=(n=r(78249),function(e){var t=n,r=t.lib,o=r.WordArray,s=r.Hasher,i=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=i.MD5=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,o=e[n];e[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var s=this._hash.words,i=e[t+0],c=e[t+1],p=e[t+2],f=e[t+3],g=e[t+4],m=e[t+5],y=e[t+6],v=e[t+7],_=e[t+8],b=e[t+9],S=e[t+10],E=e[t+11],w=e[t+12],A=e[t+13],T=e[t+14],C=e[t+15],I=s[0],R=s[1],O=s[2],k=s[3];I=l(I,R,O,k,i,7,a[0]),k=l(k,I,R,O,c,12,a[1]),O=l(O,k,I,R,p,17,a[2]),R=l(R,O,k,I,f,22,a[3]),I=l(I,R,O,k,g,7,a[4]),k=l(k,I,R,O,m,12,a[5]),O=l(O,k,I,R,y,17,a[6]),R=l(R,O,k,I,v,22,a[7]),I=l(I,R,O,k,_,7,a[8]),k=l(k,I,R,O,b,12,a[9]),O=l(O,k,I,R,S,17,a[10]),R=l(R,O,k,I,E,22,a[11]),I=l(I,R,O,k,w,7,a[12]),k=l(k,I,R,O,A,12,a[13]),O=l(O,k,I,R,T,17,a[14]),I=u(I,R=l(R,O,k,I,C,22,a[15]),O,k,c,5,a[16]),k=u(k,I,R,O,y,9,a[17]),O=u(O,k,I,R,E,14,a[18]),R=u(R,O,k,I,i,20,a[19]),I=u(I,R,O,k,m,5,a[20]),k=u(k,I,R,O,S,9,a[21]),O=u(O,k,I,R,C,14,a[22]),R=u(R,O,k,I,g,20,a[23]),I=u(I,R,O,k,b,5,a[24]),k=u(k,I,R,O,T,9,a[25]),O=u(O,k,I,R,f,14,a[26]),R=u(R,O,k,I,_,20,a[27]),I=u(I,R,O,k,A,5,a[28]),k=u(k,I,R,O,p,9,a[29]),O=u(O,k,I,R,v,14,a[30]),I=d(I,R=u(R,O,k,I,w,20,a[31]),O,k,m,4,a[32]),k=d(k,I,R,O,_,11,a[33]),O=d(O,k,I,R,E,16,a[34]),R=d(R,O,k,I,T,23,a[35]),I=d(I,R,O,k,c,4,a[36]),k=d(k,I,R,O,g,11,a[37]),O=d(O,k,I,R,v,16,a[38]),R=d(R,O,k,I,S,23,a[39]),I=d(I,R,O,k,A,4,a[40]),k=d(k,I,R,O,i,11,a[41]),O=d(O,k,I,R,f,16,a[42]),R=d(R,O,k,I,y,23,a[43]),I=d(I,R,O,k,b,4,a[44]),k=d(k,I,R,O,w,11,a[45]),O=d(O,k,I,R,C,16,a[46]),I=h(I,R=d(R,O,k,I,p,23,a[47]),O,k,i,6,a[48]),k=h(k,I,R,O,v,10,a[49]),O=h(O,k,I,R,T,15,a[50]),R=h(R,O,k,I,m,21,a[51]),I=h(I,R,O,k,w,6,a[52]),k=h(k,I,R,O,f,10,a[53]),O=h(O,k,I,R,S,15,a[54]),R=h(R,O,k,I,c,21,a[55]),I=h(I,R,O,k,_,6,a[56]),k=h(k,I,R,O,C,10,a[57]),O=h(O,k,I,R,y,15,a[58]),R=h(R,O,k,I,A,21,a[59]),I=h(I,R,O,k,g,6,a[60]),k=h(k,I,R,O,E,10,a[61]),O=h(O,k,I,R,p,15,a[62]),R=h(R,O,k,I,b,21,a[63]),s[0]=s[0]+I|0,s[1]=s[1]+R|0,s[2]=s[2]+O|0,s[3]=s[3]+k|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;r[o>>>5]|=128<<24-o%32;var s=e.floor(n/4294967296),i=n;r[15+(o+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),r[14+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,c=a.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,r,n,o,s,i){var a=e+(t&r|~t&n)+o+i;return(a<<s|a>>>32-s)+t}function u(e,t,r,n,o,s,i){var a=e+(t&n|r&~n)+o+i;return(a<<s|a>>>32-s)+t}function d(e,t,r,n,o,s,i){var a=e+(t^r^n)+o+i;return(a<<s|a>>>32-s)+t}function h(e,t,r,n,o,s,i){var a=e+(r^(t|~n))+o+i;return(a<<s|a>>>32-s)+t}t.MD5=s._createHelper(c),t.HmacMD5=s._createHmacHelper(c)}(Math),n.MD5)},8568:function(e,t,r){var n;e.exports=(n=r(78249),r(75109),n.mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();function t(e,t,r,n){var o,s=this._iv;s?(o=s.slice(0),this._iv=void 0):o=this._prevBlock,n.encryptBlock(o,0);for(var i=0;i<r;i++)e[t+i]^=o[i]}return e.Encryptor=e.extend({processBlock:function(e,r){var n=this._cipher,o=n.blockSize;t.call(this,e,r,o,n),this._prevBlock=e.slice(r,r+o)}}),e.Decryptor=e.extend({processBlock:function(e,r){var n=this._cipher,o=n.blockSize,s=e.slice(r,r+o);t.call(this,e,r,o,n),this._prevBlock=s}}),e}(),n.mode.CFB)},59968:function(e,t,r){var n;e.exports=(n=r(78249),r(75109),n.mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,r=e>>8&255,n=255&e;255===t?(t=0,255===r?(r=0,255===n?n=0:++n):++r):++t,e=0,e+=t<<16,e+=r<<8,e+=n}else e+=1<<24;return e}var r=e.Encryptor=e.extend({processBlock:function(e,r){var n=this._cipher,o=n.blockSize,s=this._iv,i=this._counter;s&&(i=this._counter=s.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(i);var a=i.slice(0);n.encryptBlock(a,0);for(var c=0;c<o;c++)e[r+c]^=a[c]}});return e.Decryptor=r,e}(),n.mode.CTRGladman)},74242:function(e,t,r){var n,o,s;e.exports=(s=r(78249),r(75109),s.mode.CTR=(o=(n=s.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,o=this._iv,s=this._counter;o&&(s=this._counter=o.slice(0),this._iv=void 0);var i=s.slice(0);r.encryptBlock(i,0),s[n-1]=s[n-1]+1|0;for(var a=0;a<n;a++)e[t+a]^=i[a]}}),n.Decryptor=o,n),s.mode.CTR)},31148:function(e,t,r){var n,o;e.exports=(o=r(78249),r(75109),o.mode.ECB=((n=o.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),n.Decryptor=n.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),n),o.mode.ECB)},27660:function(e,t,r){var n,o,s;e.exports=(s=r(78249),r(75109),s.mode.OFB=(o=(n=s.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,o=this._iv,s=this._keystream;o&&(s=this._keystream=o.slice(0),this._iv=void 0),r.encryptBlock(s,0);for(var i=0;i<n;i++)e[t+i]^=s[i]}}),n.Decryptor=o,n),s.mode.OFB)},43615:function(e,t,r){var n;e.exports=(n=r(78249),r(75109),n.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,n=4*t,o=n-r%n,s=r+o-1;e.clamp(),e.words[s>>>2]|=o<<24-s%4*8,e.sigBytes+=o},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Ansix923)},92807:function(e,t,r){var n;e.exports=(n=r(78249),r(75109),n.pad.Iso10126={pad:function(e,t){var r=4*t,o=r-e.sigBytes%r;e.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126)},71077:function(e,t,r){var n;e.exports=(n=r(78249),r(75109),n.pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971)},16991:function(e,t,r){var n;e.exports=(n=r(78249),r(75109),n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding)},56475:function(e,t,r){var n;e.exports=(n=r(78249),r(75109),n.pad.ZeroPadding={pad:function(e,t){var r=4*t;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){var t=e.words,r=e.sigBytes-1;for(r=e.sigBytes-1;r>=0;r--)if(t[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}}},n.pad.ZeroPadding)},2112:function(e,t,r){var n,o,s,i,a,c,l,u,d;e.exports=(d=r(78249),r(62783),r(89824),s=(o=(n=d).lib).Base,i=o.WordArray,c=(a=n.algo).SHA1,l=a.HMAC,u=a.PBKDF2=s.extend({cfg:s.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=l.create(r.hasher,e),o=i.create(),s=i.create([1]),a=o.words,c=s.words,u=r.keySize,d=r.iterations;a.length<u;){var h=n.update(t).finalize(s);n.reset();for(var p=h.words,f=p.length,g=h,m=1;m<d;m++){g=n.finalize(g),n.reset();for(var y=g.words,v=0;v<f;v++)p[v]^=y[v]}o.concat(h),c[0]++}return o.sigBytes=4*u,o}}),n.PBKDF2=function(e,t,r){return u.create(r).compute(e,t)},d.PBKDF2)},93974:function(e,t,r){var n;e.exports=(n=r(78249),r(98269),r(68214),r(90888),r(75109),function(){var e=n,t=e.lib.StreamCipher,r=e.algo,o=[],s=[],i=[],a=r.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var o=0;o<4;o++)c.call(this);for(o=0;o<8;o++)n[o]^=r[o+4&7];if(t){var s=t.words,i=s[0],a=s[1],l=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),d=l>>>16|4294901760&u,h=u<<16|65535&l;for(n[0]^=l,n[1]^=d,n[2]^=u,n[3]^=h,n[4]^=l,n[5]^=d,n[6]^=u,n[7]^=h,o=0;o<4;o++)c.call(this)}},_doProcessBlock:function(e,t){var r=this._X;c.call(this),o[0]=r[0]^r[5]>>>16^r[3]<<16,o[1]=r[2]^r[7]>>>16^r[5]<<16,o[2]=r[4]^r[1]>>>16^r[7]<<16,o[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)o[n]=16711935&(o[n]<<8|o[n]>>>24)|4278255360&(o[n]<<24|o[n]>>>8),e[t+n]^=o[n]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,r=0;r<8;r++)s[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0,r=0;r<8;r++){var n=e[r]+t[r],o=65535&n,a=n>>>16,c=((o*o>>>17)+o*a>>>15)+a*a,l=((4294901760&n)*n|0)+((65535&n)*n|0);i[r]=c^l}e[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,e[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,e[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,e[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,e[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,e[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,e[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,e[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}e.RabbitLegacy=t._createHelper(a)}(),n.RabbitLegacy)},84454:function(e,t,r){var n;e.exports=(n=r(78249),r(98269),r(68214),r(90888),r(75109),function(){var e=n,t=e.lib.StreamCipher,r=e.algo,o=[],s=[],i=[],a=r.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,r=0;r<4;r++)e[r]=16711935&(e[r]<<8|e[r]>>>24)|4278255360&(e[r]<<24|e[r]>>>8);var n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,r=0;r<4;r++)c.call(this);for(r=0;r<8;r++)o[r]^=n[r+4&7];if(t){var s=t.words,i=s[0],a=s[1],l=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),d=l>>>16|4294901760&u,h=u<<16|65535&l;for(o[0]^=l,o[1]^=d,o[2]^=u,o[3]^=h,o[4]^=l,o[5]^=d,o[6]^=u,o[7]^=h,r=0;r<4;r++)c.call(this)}},_doProcessBlock:function(e,t){var r=this._X;c.call(this),o[0]=r[0]^r[5]>>>16^r[3]<<16,o[1]=r[2]^r[7]>>>16^r[5]<<16,o[2]=r[4]^r[1]>>>16^r[7]<<16,o[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)o[n]=16711935&(o[n]<<8|o[n]>>>24)|4278255360&(o[n]<<24|o[n]>>>8),e[t+n]^=o[n]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,r=0;r<8;r++)s[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0,r=0;r<8;r++){var n=e[r]+t[r],o=65535&n,a=n>>>16,c=((o*o>>>17)+o*a>>>15)+a*a,l=((4294901760&n)*n|0)+((65535&n)*n|0);i[r]=c^l}e[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,e[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,e[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,e[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,e[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,e[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,e[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,e[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}e.Rabbit=t._createHelper(a)}(),n.Rabbit)},51857:function(e,t,r){var n;e.exports=(n=r(78249),r(98269),r(68214),r(90888),r(75109),function(){var e=n,t=e.lib.StreamCipher,r=e.algo,o=r.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes,n=this._S=[],o=0;o<256;o++)n[o]=o;o=0;for(var s=0;o<256;o++){var i=o%r,a=t[i>>>2]>>>24-i%4*8&255;s=(s+n[o]+a)%256;var c=n[o];n[o]=n[s],n[s]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=s.call(this)},keySize:8,ivSize:0});function s(){for(var e=this._S,t=this._i,r=this._j,n=0,o=0;o<4;o++){r=(r+e[t=(t+1)%256])%256;var s=e[t];e[t]=e[r],e[r]=s,n|=e[(e[t]+e[r])%256]<<24-8*o}return this._i=t,this._j=r,n}e.RC4=t._createHelper(o);var i=r.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)s.call(this)}});e.RC4Drop=t._createHelper(i)}(),n.RC4)},30706:function(e,t,r){var n;e.exports=(n=r(78249),function(e){var t=n,r=t.lib,o=r.WordArray,s=r.Hasher,i=t.algo,a=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=o.create([0,1518500249,1859775393,2400959708,2840853838]),h=o.create([1352829926,1548603684,1836072691,2053994217,0]),p=i.RIPEMD160=s.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,o=e[n];e[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var s,i,p,b,S,E,w,A,T,C,I,R=this._hash.words,O=d.words,k=h.words,N=a.words,P=c.words,M=l.words,L=u.words;for(E=s=R[0],w=i=R[1],A=p=R[2],T=b=R[3],C=S=R[4],r=0;r<80;r+=1)I=s+e[t+N[r]]|0,I+=r<16?f(i,p,b)+O[0]:r<32?g(i,p,b)+O[1]:r<48?m(i,p,b)+O[2]:r<64?y(i,p,b)+O[3]:v(i,p,b)+O[4],I=(I=_(I|=0,M[r]))+S|0,s=S,S=b,b=_(p,10),p=i,i=I,I=E+e[t+P[r]]|0,I+=r<16?v(w,A,T)+k[0]:r<32?y(w,A,T)+k[1]:r<48?m(w,A,T)+k[2]:r<64?g(w,A,T)+k[3]:f(w,A,T)+k[4],I=(I=_(I|=0,L[r]))+C|0,E=C,C=T,T=_(A,10),A=w,w=I;I=R[1]+p+T|0,R[1]=R[2]+b+C|0,R[2]=R[3]+S+E|0,R[3]=R[4]+s+w|0,R[4]=R[0]+i+A|0,R[0]=I},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o=this._hash,s=o.words,i=0;i<5;i++){var a=s[i];s[i]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return o},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function f(e,t,r){return e^t^r}function g(e,t,r){return e&t|~e&r}function m(e,t,r){return(e|~t)^r}function y(e,t,r){return e&r|t&~r}function v(e,t,r){return e^(t|~r)}function _(e,t){return e<<t|e>>>32-t}t.RIPEMD160=s._createHelper(p),t.HmacRIPEMD160=s._createHmacHelper(p)}(Math),n.RIPEMD160)},62783:function(e,t,r){var n,o,s,i,a,c,l,u;e.exports=(o=(n=u=r(78249)).lib,s=o.WordArray,i=o.Hasher,a=n.algo,c=[],l=a.SHA1=i.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],o=r[1],s=r[2],i=r[3],a=r[4],l=0;l<80;l++){if(l<16)c[l]=0|e[t+l];else{var u=c[l-3]^c[l-8]^c[l-14]^c[l-16];c[l]=u<<1|u>>>31}var d=(n<<5|n>>>27)+a+c[l];d+=l<20?1518500249+(o&s|~o&i):l<40?1859775393+(o^s^i):l<60?(o&s|o&i|s&i)-1894007588:(o^s^i)-899497514,a=i,i=s,s=o<<30|o>>>2,o=n,n=d}r[0]=r[0]+n|0,r[1]=r[1]+o|0,r[2]=r[2]+s|0,r[3]=r[3]+i|0,r[4]=r[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),n.SHA1=i._createHelper(l),n.HmacSHA1=i._createHmacHelper(l),u.SHA1)},87792:function(e,t,r){var n,o,s,i,a,c;e.exports=(c=r(78249),r(52153),o=(n=c).lib.WordArray,s=n.algo,i=s.SHA256,a=s.SHA224=i.extend({_doReset:function(){this._hash=new o.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=4,e}}),n.SHA224=i._createHelper(a),n.HmacSHA224=i._createHmacHelper(a),c.SHA224)},52153:function(e,t,r){var n;e.exports=(n=r(78249),function(e){var t=n,r=t.lib,o=r.WordArray,s=r.Hasher,i=t.algo,a=[],c=[];!function(){function t(t){for(var r=e.sqrt(t),n=2;n<=r;n++)if(!(t%n))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var n=2,o=0;o<64;)t(n)&&(o<8&&(a[o]=r(e.pow(n,.5))),c[o]=r(e.pow(n,1/3)),o++),n++}();var l=[],u=i.SHA256=s.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],o=r[1],s=r[2],i=r[3],a=r[4],u=r[5],d=r[6],h=r[7],p=0;p<64;p++){if(p<16)l[p]=0|e[t+p];else{var f=l[p-15],g=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,m=l[p-2],y=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;l[p]=g+l[p-7]+y+l[p-16]}var v=n&o^n&s^o&s,_=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),b=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&d)+c[p]+l[p];h=d,d=u,u=a,a=i+b|0,i=s,s=o,o=n,n=b+(_+v)|0}r[0]=r[0]+n|0,r[1]=r[1]+o|0,r[2]=r[2]+s|0,r[3]=r[3]+i|0,r[4]=r[4]+a|0,r[5]=r[5]+u|0,r[6]=r[6]+d|0,r[7]=r[7]+h|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;return r[o>>>5]|=128<<24-o%32,r[14+(o+64>>>9<<4)]=e.floor(n/4294967296),r[15+(o+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=s._createHelper(u),t.HmacSHA256=s._createHmacHelper(u)}(Math),n.SHA256)},13327:function(e,t,r){var n;e.exports=(n=r(78249),r(64938),function(e){var t=n,r=t.lib,o=r.WordArray,s=r.Hasher,i=t.x64.Word,a=t.algo,c=[],l=[],u=[];!function(){for(var e=1,t=0,r=0;r<24;r++){c[e+5*t]=(r+1)*(r+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var o=1,s=0;s<24;s++){for(var a=0,d=0,h=0;h<7;h++){if(1&o){var p=(1<<h)-1;p<32?d^=1<<p:a^=1<<p-32}128&o?o=o<<1^113:o<<=1}u[s]=i.create(a,d)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=i.create()}();var h=a.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new i.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var r=this._state,n=this.blockSize/2,o=0;o<n;o++){var s=e[t+2*o],i=e[t+2*o+1];s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),(R=r[o]).high^=i,R.low^=s}for(var a=0;a<24;a++){for(var h=0;h<5;h++){for(var p=0,f=0,g=0;g<5;g++)p^=(R=r[h+5*g]).high,f^=R.low;var m=d[h];m.high=p,m.low=f}for(h=0;h<5;h++){var y=d[(h+4)%5],v=d[(h+1)%5],_=v.high,b=v.low;for(p=y.high^(_<<1|b>>>31),f=y.low^(b<<1|_>>>31),g=0;g<5;g++)(R=r[h+5*g]).high^=p,R.low^=f}for(var S=1;S<25;S++){var E=(R=r[S]).high,w=R.low,A=c[S];A<32?(p=E<<A|w>>>32-A,f=w<<A|E>>>32-A):(p=w<<A-32|E>>>64-A,f=E<<A-32|w>>>64-A);var T=d[l[S]];T.high=p,T.low=f}var C=d[0],I=r[0];for(C.high=I.high,C.low=I.low,h=0;h<5;h++)for(g=0;g<5;g++){var R=r[S=h+5*g],O=d[S],k=d[(h+1)%5+5*g],N=d[(h+2)%5+5*g];R.high=O.high^~k.high&N.high,R.low=O.low^~k.low&N.low}R=r[0];var P=u[a];R.high^=P.high,R.low^=P.low}},_doFinalize:function(){var t=this._data,r=t.words,n=(this._nDataBytes,8*t.sigBytes),s=32*this.blockSize;r[n>>>5]|=1<<24-n%32,r[(e.ceil((n+1)/s)*s>>>5)-1]|=128,t.sigBytes=4*r.length,this._process();for(var i=this._state,a=this.cfg.outputLength/8,c=a/8,l=[],u=0;u<c;u++){var d=i[u],h=d.high,p=d.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),l.push(p),l.push(h)}return new o.init(l,a)},clone:function(){for(var e=s.clone.call(this),t=e._state=this._state.slice(0),r=0;r<25;r++)t[r]=t[r].clone();return e}});t.SHA3=s._createHelper(h),t.HmacSHA3=s._createHmacHelper(h)}(Math),n.SHA3)},17460:function(e,t,r){var n,o,s,i,a,c,l,u;e.exports=(u=r(78249),r(64938),r(70034),o=(n=u).x64,s=o.Word,i=o.WordArray,a=n.algo,c=a.SHA512,l=a.SHA384=c.extend({_doReset:function(){this._hash=new i.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var e=c._doFinalize.call(this);return e.sigBytes-=16,e}}),n.SHA384=c._createHelper(l),n.HmacSHA384=c._createHmacHelper(l),u.SHA384)},70034:function(e,t,r){var n;e.exports=(n=r(78249),r(64938),function(){var e=n,t=e.lib.Hasher,r=e.x64,o=r.Word,s=r.WordArray,i=e.algo;function a(){return o.create.apply(o,arguments)}var c=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],l=[];!function(){for(var e=0;e<80;e++)l[e]=a()}();var u=i.SHA512=t.extend({_doReset:function(){this._hash=new s.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],o=r[1],s=r[2],i=r[3],a=r[4],u=r[5],d=r[6],h=r[7],p=n.high,f=n.low,g=o.high,m=o.low,y=s.high,v=s.low,_=i.high,b=i.low,S=a.high,E=a.low,w=u.high,A=u.low,T=d.high,C=d.low,I=h.high,R=h.low,O=p,k=f,N=g,P=m,M=y,L=v,B=_,D=b,x=S,U=E,j=w,F=A,H=T,W=C,q=I,z=R,G=0;G<80;G++){var $,V,J=l[G];if(G<16)V=J.high=0|e[t+2*G],$=J.low=0|e[t+2*G+1];else{var K=l[G-15],Q=K.high,Y=K.low,X=(Q>>>1|Y<<31)^(Q>>>8|Y<<24)^Q>>>7,Z=(Y>>>1|Q<<31)^(Y>>>8|Q<<24)^(Y>>>7|Q<<25),ee=l[G-2],te=ee.high,re=ee.low,ne=(te>>>19|re<<13)^(te<<3|re>>>29)^te>>>6,oe=(re>>>19|te<<13)^(re<<3|te>>>29)^(re>>>6|te<<26),se=l[G-7],ie=se.high,ae=se.low,ce=l[G-16],le=ce.high,ue=ce.low;V=(V=(V=X+ie+(($=Z+ae)>>>0<Z>>>0?1:0))+ne+(($+=oe)>>>0<oe>>>0?1:0))+le+(($+=ue)>>>0<ue>>>0?1:0),J.high=V,J.low=$}var de,he=x&j^~x&H,pe=U&F^~U&W,fe=O&N^O&M^N&M,ge=k&P^k&L^P&L,me=(O>>>28|k<<4)^(O<<30|k>>>2)^(O<<25|k>>>7),ye=(k>>>28|O<<4)^(k<<30|O>>>2)^(k<<25|O>>>7),ve=(x>>>14|U<<18)^(x>>>18|U<<14)^(x<<23|U>>>9),_e=(U>>>14|x<<18)^(U>>>18|x<<14)^(U<<23|x>>>9),be=c[G],Se=be.high,Ee=be.low,we=q+ve+((de=z+_e)>>>0<z>>>0?1:0),Ae=ye+ge;q=H,z=W,H=j,W=F,j=x,F=U,x=B+(we=(we=(we=we+he+((de+=pe)>>>0<pe>>>0?1:0))+Se+((de+=Ee)>>>0<Ee>>>0?1:0))+V+((de+=$)>>>0<$>>>0?1:0))+((U=D+de|0)>>>0<D>>>0?1:0)|0,B=M,D=L,M=N,L=P,N=O,P=k,O=we+(me+fe+(Ae>>>0<ye>>>0?1:0))+((k=de+Ae|0)>>>0<de>>>0?1:0)|0}f=n.low=f+k,n.high=p+O+(f>>>0<k>>>0?1:0),m=o.low=m+P,o.high=g+N+(m>>>0<P>>>0?1:0),v=s.low=v+L,s.high=y+M+(v>>>0<L>>>0?1:0),b=i.low=b+D,i.high=_+B+(b>>>0<D>>>0?1:0),E=a.low=E+U,a.high=S+x+(E>>>0<U>>>0?1:0),A=u.low=A+F,u.high=w+j+(A>>>0<F>>>0?1:0),C=d.low=C+W,d.high=T+H+(C>>>0<W>>>0?1:0),R=h.low=R+z,h.high=I+q+(R>>>0<z>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(n+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(u),e.HmacSHA512=t._createHmacHelper(u)}(),n.SHA512)},94253:function(e,t,r){var n;e.exports=(n=r(78249),r(98269),r(68214),r(90888),r(75109),function(){var e=n,t=e.lib,r=t.WordArray,o=t.BlockCipher,s=e.algo,i=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=s.DES=o.extend({_doReset:function(){for(var e=this._key.words,t=[],r=0;r<56;r++){var n=i[r]-1;t[r]=e[n>>>5]>>>31-n%32&1}for(var o=this._subKeys=[],s=0;s<16;s++){var l=o[s]=[],u=c[s];for(r=0;r<24;r++)l[r/6|0]|=t[(a[r]-1+u)%28]<<31-r%6,l[4+(r/6|0)]|=t[28+(a[r+24]-1+u)%28]<<31-r%6;for(l[0]=l[0]<<1|l[0]>>>31,r=1;r<7;r++)l[r]=l[r]>>>4*(r-1)+3;l[7]=l[7]<<5|l[7]>>>27}var d=this._invSubKeys=[];for(r=0;r<16;r++)d[r]=o[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,r){this._lBlock=e[t],this._rBlock=e[t+1],h.call(this,4,252645135),h.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),h.call(this,1,1431655765);for(var n=0;n<16;n++){for(var o=r[n],s=this._lBlock,i=this._rBlock,a=0,c=0;c<8;c++)a|=l[c][((i^o[c])&u[c])>>>0];this._lBlock=i,this._rBlock=s^a}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,h.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function h(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function p(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}e.DES=o._createHelper(d);var f=s.TripleDES=o.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),o=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=d.createEncryptor(r.create(t)),this._des2=d.createEncryptor(r.create(n)),this._des3=d.createEncryptor(r.create(o))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=o._createHelper(f)}(),n.TripleDES)},64938:function(e,t,r){var n,o,s,i,a,c;e.exports=(n=r(78249),s=(o=n).lib,i=s.Base,a=s.WordArray,(c=o.x64={}).Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),c.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],n=0;n<t;n++){var o=e[n];r.push(o.high),r.push(o.low)}return a.create(r,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),r=t.length,n=0;n<r;n++)t[n]=t[n].clone();return e}}),n)},37334:(e,t,r)=>{e.exports=u,u.realpath=u,u.sync=d,u.realpathSync=d,u.monkeypatch=function(){n.realpath=u,n.realpathSync=d},u.unmonkeypatch=function(){n.realpath=o,n.realpathSync=s};var n=r(57147),o=n.realpath,s=n.realpathSync,i=process.version,a=/^v[0-5]\./.test(i),c=r(47059);function l(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function u(e,t,r){if(a)return o(e,t,r);"function"==typeof t&&(r=t,t=null),o(e,t,(function(n,o){l(n)?c.realpath(e,t,r):r(n,o)}))}function d(e,t){if(a)return s(e,t);try{return s(e,t)}catch(r){if(l(r))return c.realpathSync(e,t);throw r}}},47059:(e,t,r)=>{var n=r(71017),o="win32"===process.platform,s=r(57147),i=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);if(n.normalize,o)var a=/(.*?)(?:[\/\\]+|$)/g;else a=/(.*?)(?:[\/]+|$)/g;if(o)var c=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else c=/^[\/]*/;t.realpathSync=function(e,t){if(e=n.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var r,i,l,u,d=e,h={},p={};function f(){var t=c.exec(e);r=t[0].length,i=t[0],l=t[0],u="",o&&!p[l]&&(s.lstatSync(l),p[l]=!0)}for(f();r<e.length;){a.lastIndex=r;var g=a.exec(e);if(u=i,i+=g[0],l=u+g[1],r=a.lastIndex,!(p[l]||t&&t[l]===l)){var m;if(t&&Object.prototype.hasOwnProperty.call(t,l))m=t[l];else{var y=s.lstatSync(l);if(!y.isSymbolicLink()){p[l]=!0,t&&(t[l]=l);continue}var v=null;if(!o){var _=y.dev.toString(32)+":"+y.ino.toString(32);h.hasOwnProperty(_)&&(v=h[_])}null===v&&(s.statSync(l),v=s.readlinkSync(l)),m=n.resolve(u,v),t&&(t[l]=m),o||(h[_]=v)}e=n.resolve(m,e.slice(r)),f()}}return t&&(t[d]=e),e},t.realpath=function(e,t,r){if("function"!=typeof r&&(r=function(e){return"function"==typeof e?e:function(){var e;if(i){var t=new Error;e=function(e){e&&(t.message=e.message,r(e=t))}}else e=r;return e;function r(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}()}(t),t=null),e=n.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(r.bind(null,null,t[e]));var l,u,d,h,p=e,f={},g={};function m(){var t=c.exec(e);l=t[0].length,u=t[0],d=t[0],h="",o&&!g[d]?s.lstat(d,(function(e){if(e)return r(e);g[d]=!0,y()})):process.nextTick(y)}function y(){if(l>=e.length)return t&&(t[p]=e),r(null,e);a.lastIndex=l;var n=a.exec(e);return h=u,u+=n[0],d=h+n[1],l=a.lastIndex,g[d]||t&&t[d]===d?process.nextTick(y):t&&Object.prototype.hasOwnProperty.call(t,d)?b(t[d]):s.lstat(d,v)}function v(e,n){if(e)return r(e);if(!n.isSymbolicLink())return g[d]=!0,t&&(t[d]=d),process.nextTick(y);if(!o){var i=n.dev.toString(32)+":"+n.ino.toString(32);if(f.hasOwnProperty(i))return _(null,f[i],d)}s.stat(d,(function(e){if(e)return r(e);s.readlink(d,(function(e,t){o||(f[i]=t),_(e,t)}))}))}function _(e,o,s){if(e)return r(e);var i=n.resolve(h,o);t&&(t[s]=i),b(i)}function b(t){e=n.resolve(t,e.slice(l)),m()}m()}},66772:(e,t,r)=>{function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.setopts=function(e,t,r){if(r||(r={}),r.matchBase&&-1===t.indexOf("/")){if(r.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!r.silent,e.pattern=t,e.strict=!1!==r.strict,e.realpath=!!r.realpath,e.realpathCache=r.realpathCache||Object.create(null),e.follow=!!r.follow,e.dot=!!r.dot,e.mark=!!r.mark,e.nodir=!!r.nodir,e.nodir&&(e.mark=!0),e.sync=!!r.sync,e.nounique=!!r.nounique,e.nonull=!!r.nonull,e.nosort=!!r.nosort,e.nocase=!!r.nocase,e.stat=!!r.stat,e.noprocess=!!r.noprocess,e.absolute=!!r.absolute,e.fs=r.fs||o,e.maxLength=r.maxLength||1/0,e.cache=r.cache||Object.create(null),e.statCache=r.statCache||Object.create(null),e.symlinks=r.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(u))}(e,r),e.changedCwd=!1;var i=process.cwd();n(r,"cwd")?(e.cwd=s.resolve(r.cwd),e.changedCwd=e.cwd!==i):e.cwd=i,e.root=r.root||s.resolve(e.cwd,"/"),e.root=s.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/")),e.cwdAbs=a(e.cwd)?e.cwd:d(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),e.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,r.allowWindowsEscape=!1,e.minimatch=new c(t,r),e.options=e.minimatch.options},t.ownProp=n,t.makeAbs=d,t.finish=function(e){for(var t=e.nounique,r=t?[]:Object.create(null),n=0,o=e.matches.length;n<o;n++){var s=e.matches[n];if(s&&0!==Object.keys(s).length){var i=Object.keys(s);t?r.push.apply(r,i):i.forEach((function(e){r[e]=!0}))}else if(e.nonull){var a=e.minimatch.globSet[n];t?r.push(a):r[a]=!0}}if(t||(r=Object.keys(r)),e.nosort||(r=r.sort(l)),e.mark){for(n=0;n<r.length;n++)r[n]=e._mark(r[n]);e.nodir&&(r=r.filter((function(t){var r=!/\/$/.test(t),n=e.cache[t]||e.cache[d(e,t)];return r&&n&&(r="DIR"!==n&&!Array.isArray(n)),r})))}e.ignore.length&&(r=r.filter((function(t){return!h(e,t)}))),e.found=r},t.mark=function(e,t){var r=d(e,t),n=e.cache[r],o=t;if(n){var s="DIR"===n||Array.isArray(n),i="/"===t.slice(-1);if(s&&!i?o+="/":!s&&i&&(o=o.slice(0,-1)),o!==t){var a=d(e,o);e.statCache[a]=e.statCache[r],e.cache[a]=e.cache[r]}}return o},t.isIgnored=h,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return!(!e.gmatcher||!e.gmatcher.match(t))}))};var o=r(57147),s=r(71017),i=r(91171),a=r(64095),c=i.Minimatch;function l(e,t){return e.localeCompare(t,"en")}function u(e){var t=null;if("/**"===e.slice(-3)){var r=e.replace(/(\/\*\*)+$/,"");t=new c(r,{dot:!0})}return{matcher:new c(e,{dot:!0}),gmatcher:t}}function d(e,t){var r=t;return r="/"===t.charAt(0)?s.join(e.root,t):a(t)||""===t?t:e.changedCwd?s.resolve(e.cwd,t):s.resolve(t),"win32"===process.platform&&(r=r.replace(/\\/g,"/")),r}function h(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))}))}},12884:(e,t,r)=>{e.exports=v;var n=r(37334),o=r(91171),s=(o.Minimatch,r(94378)),i=r(82361).EventEmitter,a=r(71017),c=r(39491),l=r(64095),u=r(14751),d=r(66772),h=d.setopts,p=d.ownProp,f=r(67844),g=(r(73837),d.childrenIgnored),m=d.isIgnored,y=r(30778);function v(e,t,r){if("function"==typeof t&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return u(e,t)}return new b(e,t,r)}v.sync=u;var _=v.GlobSync=u.GlobSync;function b(e,t,r){if("function"==typeof t&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new _(e,t)}if(!(this instanceof b))return new b(e,t,r);h(this,e,t),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),"function"==typeof r&&(r=y(r),this.on("error",r),this.on("end",(function(e){r(null,e)})));var o=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===n)return i();for(var s=0;s<n;s++)this._process(this.minimatch.set[s],s,!1,i);function i(){--o._processing,o._processing<=0&&o._finish()}}v.glob=v,v.hasMagic=function(e,t){var r=function(e,t){if(null===t||"object"!=typeof t)return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}({},t);r.noprocess=!0;var n=new b(e,r).minimatch.set;if(!e)return!1;if(n.length>1)return!0;for(var o=0;o<n[0].length;o++)if("string"!=typeof n[0][o])return!0;return!1},v.Glob=b,s(b,i),b.prototype._finish=function(){if(c(this instanceof b),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();d.finish(this),this.emit("end",this.found)}},b.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n)}function n(){0==--e&&t._finish()}},b.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var o=Object.keys(r),s=this,i=o.length;if(0===i)return t();var a=this.matches[e]=Object.create(null);o.forEach((function(r,o){r=s._makeAbs(r),n.realpath(r,s.realpathCache,(function(n,o){n?"stat"===n.syscall?a[r]=!0:s.emit("error",n):a[o]=!0,0==--i&&(s.matches[e]=a,t())}))}))},b.prototype._mark=function(e){return d.mark(this,e)},b.prototype._makeAbs=function(e){return d.makeAbs(this,e)},b.prototype.abort=function(){this.aborted=!0,this.emit("abort")},b.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},b.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);for(this._processQueue.length=0,t=0;t<n.length;t++){var o=n[t];this._processing--,this._process(o[0],o[1],o[2],o[3])}}}},b.prototype._process=function(e,t,r,n){if(c(this instanceof b),c("function"==typeof n),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,r,n]);else{for(var s,i=0;"string"==typeof e[i];)i++;switch(i){case e.length:return void this._processSimple(e.join("/"),t,n);case 0:s=null;break;default:s=e.slice(0,i).join("/")}var a,u=e.slice(i);null===s?a=".":l(s)||l(e.map((function(e){return"string"==typeof e?e:"[*]"})).join("/"))?(s&&l(s)||(s="/"+s),a=s):a=s;var d=this._makeAbs(a);if(g(this,a))return n();u[0]===o.GLOBSTAR?this._processGlobStar(s,a,d,u,t,r,n):this._processReaddir(s,a,d,u,t,r,n)}},b.prototype._processReaddir=function(e,t,r,n,o,s,i){var a=this;this._readdir(r,s,(function(c,l){return a._processReaddir2(e,t,r,n,o,s,l,i)}))},b.prototype._processReaddir2=function(e,t,r,n,o,s,i,c){if(!i)return c();for(var l=n[0],u=!!this.minimatch.negate,d=l._glob,h=this.dot||"."===d.charAt(0),p=[],f=0;f<i.length;f++)("."!==(m=i[f]).charAt(0)||h)&&(u&&!e?!m.match(l):m.match(l))&&p.push(m);var g=p.length;if(0===g)return c();if(1===n.length&&!this.mark&&!this.stat){for(this.matches[o]||(this.matches[o]=Object.create(null)),f=0;f<g;f++){var m=p[f];e&&(m="/"!==e?e+"/"+m:e+m),"/"!==m.charAt(0)||this.nomount||(m=a.join(this.root,m)),this._emitMatch(o,m)}return c()}for(n.shift(),f=0;f<g;f++)m=p[f],e&&(m="/"!==e?e+"/"+m:e+m),this._process([m].concat(n),o,s,c);c()},b.prototype._emitMatch=function(e,t){if(!this.aborted&&!m(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var r=l(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0;var o=this.statCache[r];o&&this.emit("stat",t,o),this.emit("match",t)}}},b.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var r=this,n=f("lstat\0"+e,(function(n,o){if(n&&"ENOENT"===n.code)return t();var s=o&&o.isSymbolicLink();r.symlinks[e]=s,s||!o||o.isDirectory()?r._readdir(e,!1,t):(r.cache[e]="FILE",t())}));n&&r.fs.lstat(e,n)}},b.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=f("readdir\0"+e+"\0"+t,r))){if(t&&!p(this.symlinks,e))return this._readdirInGlobStar(e,r);if(p(this.cache,e)){var n=this.cache[e];if(!n||"FILE"===n)return r();if(Array.isArray(n))return r(null,n)}this.fs.readdir(e,function(e,t,r){return function(n,o){n?e._readdirError(t,n,r):e._readdirEntries(t,o,r)}}(this,e,r))}},b.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var o=t[n];o="/"===e?e+o:e+"/"+o,this.cache[o]=!0}return this.cache[e]=t,r(null,t)}},b.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var o=new Error(t.code+" invalid cwd "+this.cwd);o.path=this.cwd,o.code=t.code,this.emit("error",o),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return r()}},b.prototype._processGlobStar=function(e,t,r,n,o,s,i){var a=this;this._readdir(r,s,(function(c,l){a._processGlobStar2(e,t,r,n,o,s,l,i)}))},b.prototype._processGlobStar2=function(e,t,r,n,o,s,i,a){if(!i)return a();var c=n.slice(1),l=e?[e]:[],u=l.concat(c);this._process(u,o,!1,a);var d=this.symlinks[r],h=i.length;if(d&&s)return a();for(var p=0;p<h;p++)if("."!==i[p].charAt(0)||this.dot){var f=l.concat(i[p],c);this._process(f,o,!0,a);var g=l.concat(i[p],n);this._process(g,o,!0,a)}a()},b.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,(function(o,s){n._processSimple2(e,t,o,s,r)}))},b.prototype._processSimple2=function(e,t,r,n,o){if(this.matches[t]||(this.matches[t]=Object.create(null)),!n)return o();if(e&&l(e)&&!this.nomount){var s=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=a.join(this.root,e):(e=a.resolve(this.root,e),s&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),o()},b.prototype._stat=function(e,t){var r=this._makeAbs(e),n="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&p(this.cache,r)){var o=this.cache[r];if(Array.isArray(o)&&(o="DIR"),!n||"DIR"===o)return t(null,o);if(n&&"FILE"===o)return t()}var s=this.statCache[r];if(void 0!==s){if(!1===s)return t(null,s);var i=s.isDirectory()?"DIR":"FILE";return n&&"FILE"===i?t():t(null,i,s)}var a=this,c=f("stat\0"+r,(function(n,o){if(o&&o.isSymbolicLink())return a.fs.stat(r,(function(n,s){n?a._stat2(e,r,null,o,t):a._stat2(e,r,n,s,t)}));a._stat2(e,r,n,o,t)}));c&&a.fs.lstat(r,c)},b.prototype._stat2=function(e,t,r,n,o){if(r&&("ENOENT"===r.code||"ENOTDIR"===r.code))return this.statCache[t]=!1,o();var s="/"===e.slice(-1);if(this.statCache[t]=n,"/"===t.slice(-1)&&n&&!n.isDirectory())return o(null,!1,n);var i=!0;return n&&(i=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||i,s&&"FILE"===i?o():o(null,i,n)}},14751:(e,t,r)=>{e.exports=p,p.GlobSync=f;var n=r(37334),o=r(91171),s=(o.Minimatch,r(12884).Glob,r(73837),r(71017)),i=r(39491),a=r(64095),c=r(66772),l=c.setopts,u=c.ownProp,d=c.childrenIgnored,h=c.isIgnored;function p(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new f(e,t).found}function f(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof f))return new f(e,t);if(l(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}f.prototype._finish=function(){if(i.ok(this instanceof f),this.realpath){var e=this;this.matches.forEach((function(t,r){var o=e.matches[r]=Object.create(null);for(var s in t)try{s=e._makeAbs(s),o[n.realpathSync(s,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;o[e._makeAbs(s)]=!0}}))}c.finish(this)},f.prototype._process=function(e,t,r){i.ok(this instanceof f);for(var n,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t);case 0:n=null;break;default:n=e.slice(0,s).join("/")}var c,l=e.slice(s);null===n?c=".":a(n)||a(e.map((function(e){return"string"==typeof e?e:"[*]"})).join("/"))?(n&&a(n)||(n="/"+n),c=n):c=n;var u=this._makeAbs(c);d(this,c)||(l[0]===o.GLOBSTAR?this._processGlobStar(n,c,u,l,t,r):this._processReaddir(n,c,u,l,t,r))},f.prototype._processReaddir=function(e,t,r,n,o,i){var a=this._readdir(r,i);if(a){for(var c=n[0],l=!!this.minimatch.negate,u=c._glob,d=this.dot||"."===u.charAt(0),h=[],p=0;p<a.length;p++)("."!==(m=a[p]).charAt(0)||d)&&(l&&!e?!m.match(c):m.match(c))&&h.push(m);var f=h.length;if(0!==f)if(1!==n.length||this.mark||this.stat)for(n.shift(),p=0;p<f;p++){var g;m=h[p],g=e?[e,m]:[m],this._process(g.concat(n),o,i)}else{this.matches[o]||(this.matches[o]=Object.create(null));for(p=0;p<f;p++){var m=h[p];e&&(m="/"!==e.slice(-1)?e+"/"+m:e+m),"/"!==m.charAt(0)||this.nomount||(m=s.join(this.root,m)),this._emitMatch(o,m)}}}},f.prototype._emitMatch=function(e,t){if(!h(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},f.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r;try{r=this.fs.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var n=r&&r.isSymbolicLink();return this.symlinks[e]=n,n||!r||r.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},f.prototype._readdir=function(e,t){if(t&&!u(this.symlinks,e))return this._readdirInGlobStar(e);if(u(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return null;if(Array.isArray(r))return r}try{return this._readdirEntries(e,this.fs.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},f.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var n=t[r];n="/"===e?e+n:e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,t},f.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=t.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},f.prototype._processGlobStar=function(e,t,r,n,o,s){var i=this._readdir(r,s);if(i){var a=n.slice(1),c=e?[e]:[],l=c.concat(a);this._process(l,o,!1);var u=i.length;if(!this.symlinks[r]||!s)for(var d=0;d<u;d++)if("."!==i[d].charAt(0)||this.dot){var h=c.concat(i[d],a);this._process(h,o,!0);var p=c.concat(i[d],n);this._process(p,o,!0)}}},f.prototype._processSimple=function(e,t){var r=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),r){if(e&&a(e)&&!this.nomount){var n=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=s.join(this.root,e):(e=s.resolve(this.root,e),n&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},f.prototype._stat=function(e){var t=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&u(this.cache,t)){var n=this.cache[t];if(Array.isArray(n)&&(n="DIR"),!r||"DIR"===n)return n;if(r&&"FILE"===n)return!1}var o=this.statCache[t];if(!o){var s;try{s=this.fs.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{o=this.fs.statSync(t)}catch(e){o=s}else o=s}return this.statCache[t]=o,n=!0,o&&(n=o.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||n,(!r||"FILE"!==n)&&n},f.prototype._mark=function(e){return c.mark(this,e)},f.prototype._makeAbs=function(e){return c.makeAbs(this,e)}},33019:function(__unused_webpack_module,exports){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(e,t,r){e instanceof String&&(e=String(e));for(var n=e.length,o=0;o<n;o++){var s=e[o];if(t.call(r,s,o,e))return{i:o,v:s}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(e,t,r,n){if(t){for(r=$jscomp.global,e=e.split("."),n=0;n<e.length-1;n++){var o=e[n];o in r||(r[o]={}),r=r[o]}(t=t(n=r[e=e[e.length-1]]))!=n&&null!=t&&$jscomp.defineProperty(r,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.findIndex",(function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).i}}),"es6","es3"),$jscomp.checkStringArgs=function(e,t,r){if(null==e)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""},$jscomp.polyfill("String.prototype.endsWith",(function(e){return e||function(e,t){var r=$jscomp.checkStringArgs(this,e,"endsWith");e+="",void 0===t&&(t=r.length),t=Math.max(0,Math.min(0|t,r.length));for(var n=e.length;0<n&&0<t;)if(r[--t]!=e[--n])return!1;return 0>=n}}),"es6","es3"),$jscomp.polyfill("Array.prototype.find",(function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).v}}),"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",(function(e){return e||function(e,t){var r=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var n=r.length,o=e.length;t=Math.max(0,Math.min(0|t,r.length));for(var s=0;s<o&&t<n;)if(r[t++]!=e[s++])return!1;return s>=o}}),"es6","es3"),$jscomp.polyfill("String.prototype.repeat",(function(e){return e||function(e){var t=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var r="";e;)1&e&&(r+=t),(e>>>=1)&&(t+=t);return r}}),"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=this||self,goog.exportPath_=function(e,t,r){e=e.split("."),r=r||goog.global,e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(var n;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t},goog.define=function(e,t){if(!COMPILED){var r=goog.global.CLOSURE_UNCOMPILED_DEFINES,n=goog.global.CLOSURE_DEFINES;r&&void 0===r.nodeType&&Object.prototype.hasOwnProperty.call(r,e)?t=r[e]:n&&void 0===n.nodeType&&Object.prototype.hasOwnProperty.call(n,e)&&(t=n[e])}return t},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var r=e;(r=r.substring(0,r.lastIndexOf(".")))&&!goog.getObjectByName(r);)goog.implicitNamespaces_[r]=!0}goog.exportPath_(e,t)},goog.getScriptNonce=function(e){return e&&e!=goog.global?goog.getScriptNonce_(e.document):(null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(e)?e:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if("string"!=typeof e||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED){if(e in goog.loadedModules_)return goog.loadedModules_[e].exports;if(!goog.implicitNamespaces_[e])return null!=(e=goog.getObjectByName(e))?e:null}return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var e=goog.global.$jscomp;return!!e&&"function"==typeof e.getCurrentModulePath&&!!e.getCurrentModulePath()},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(e){if(!COMPILED){if(!goog.isInEs6ModuleLoader_())throw Error("goog.declareModuleId may only be called from within an ES6 module");if(goog.moduleLoaderState_&&goog.moduleLoaderState_.moduleName)throw Error("goog.declareModuleId may only be called once per module.");if(e in goog.loadedModules_)throw Error('Module with namespace "'+e+'" already exists.')}if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=e;else{var t=goog.global.$jscomp;if(!t||"function"!=typeof t.getCurrentModulePath)throw Error('Module with namespace "'+e+'" has been loaded incorrectly.');t=t.require(t.getCurrentModulePath()),goog.loadedModules_[e]={exports:t,type:goog.ModuleType.ES6,moduleId:e}}},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&null!=goog.getObjectByName(e)},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){e=e.split("."),t=t||goog.global;for(var r=0;r<e.length;r++)if(null==(t=t[e[r]]))return null;return t},goog.globalize=function(e,t){for(var r in t=t||goog.global,e)t[r]=e[r]},goog.addDependency=function(e,t,r,n){!COMPILED&&goog.DEPENDENCIES_ENABLED&&goog.debugLoader_.addDependency(e,t,r,n)},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_.requested(e),goog.isProvided_(e)){if(goog.isInModuleLoader_())return goog.module.getInternal_(e)}else if(goog.ENABLE_DEBUG_LOADER){var t=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(e)}finally{goog.moduleLoaderState_=t}}return null}},goog.requireType=function(e){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.instance_=void 0,e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(e){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(e){return"(function(){"+e+"\n;})();\n"},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(e))var r=e.call(void 0,{});else{if("string"!=typeof e)throw Error("Invalid module definition");goog.useSafari10Workaround()&&(e=goog.workaroundSafari10EvalBug(e)),r=goog.loadModuleFromSource_.call(void 0,e)}var n=goog.moduleLoaderState_.moduleName;if("string"!=typeof n||!n)throw Error('Invalid module name "'+n+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(n,r):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof r&&null!=r&&Object.seal(r),goog.loadedModules_[n]={exports:r,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),0==t.status||200==t.status?t.responseText:null}catch(e){return null}},goog.transpile_=function(e,t,r){var n=goog.global.$jscomp;n||(goog.global.$jscomp=n={});var o=n.transpile;if(!o){var s=goog.basePath+goog.TRANSPILER,i=goog.loadFileSync_(s);if(i){if(function(){(0,eval)(i+"\n//# sourceURL="+s)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,o=(n=goog.global.$jscomp).transpile}}return o||(o=n.transpile=function(e,t){return goog.logToConsole_(t+" requires transpilation but no transpiler was found."),e}),o(e,t,r)},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var r=Object.prototype.toString.call(e);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return Object.prototype.hasOwnProperty.call(e,goog.UID_PROPERTY_)&&e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if("function"==typeof e.clone)return e.clone();for(var r in t="array"==t?[]:{},e)t[r]=goog.cloneObject(e[r]);return t}return e},goog.bindNative_=function(e,t,r){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,r){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var r in t)e[r]=t[r]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(e){}if(void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,r=t.createElement("script");r.type="text/javascript",r.defer=!1,r.appendChild(t.createTextNode(e)),t.head.appendChild(r),t.head.removeChild(r)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+e);var r=function(e){return goog.cssNameMapping_[e]||e},n=function(e){e=e.split("-");for(var t=[],n=0;n<e.length;n++)t.push(r(e[n]));return t.join("-")};return n=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?r:n:function(e){return e},e=t?e+"-"+n(t):n(e),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(e):e},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t,r){return r&&r.html&&(e=e.replace(/</g,"&lt;")),t&&(e=e.replace(/\{\$([^}]+)}/g,(function(e,r){return null!=t&&r in t?t[r]:e}))),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,r){goog.exportPath_(e,t,r)},goog.exportProperty=function(e,t,r){e[t]=r},goog.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.base=function(e,r,n){for(var o=Array(arguments.length-2),s=2;s<arguments.length;s++)o[s-2]=arguments[s];return t.prototype[r].apply(e,o)}},goog.scope=function(e){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var r=t.constructor,n=t.statics;return r&&r!=Object.prototype.constructor||(r=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),r=goog.defineClass.createSealingConstructor_(r,e),e&&goog.inherits(r,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(r.prototype,t),null!=n&&(n instanceof Function?n(r):goog.defineClass.applyProperties_(r,n)),r},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(e,t){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return e;var r=!goog.defineClass.isUnsealable_(t),n=function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===n&&r&&Object.seal instanceof Function&&Object.seal(t),t};return n},goog.defineClass.isUnsealable_=function(e){return e&&e.prototype&&e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);for(var n=0;n<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;n++)r=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[n],Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",!COMPILED&&goog.DEPENDENCIES_ENABLED&&(goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.isDocumentLoading_=function(){var e=goog.global.document;return e.attachEvent?"complete"!=e.readyState:"loading"==e.readyState},goog.findBasePath_=function(){if(null!=goog.global.CLOSURE_BASE_PATH&&"string"==typeof goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){var e=goog.global.document,t=e.currentScript;for(t=(e=t?[t]:e.getElementsByTagName("SCRIPT")).length-1;0<=t;--t){var r=e[t].src,n=r.lastIndexOf("?");if(n=-1==n?r.length:n,"base.js"==r.substr(n-7,7)){goog.basePath=r.substr(0,n-7);break}}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null,this.transpilationTarget_=goog.TRANSPILE_TO_LANGUAGE},goog.Transpiler.prototype.createRequiresTranspilation_=function(){function a(t,r){e?d[t]=!0:r()?(c=t,d[t]=!1):e=d[t]=!0}function b(a){try{return!!eval(a)}catch(e){return!1}}var c="es3",d={es3:!1},e=!1,f=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";return a("es5",(function(){return b("[1,].length==1")})),a("es6",(function(){return!f.match(/Edge\/(\d+)(\.\d)*/i)&&b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')})),a("es7",(function(){return b("2 ** 2 == 4")})),a("es8",(function(){return b("async () => 1, true")})),a("es9",(function(){return b("({...rest} = {}), true")})),a("es_next",(function(){return!1})),{target:c,map:d}},goog.Transpiler.prototype.needsTranspile=function(e,t){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(!this.requiresTranspilation_){var r=this.createRequiresTranspilation_();this.requiresTranspilation_=r.map,this.transpilationTarget_=this.transpilationTarget_||r.target}if(e in this.requiresTranspilation_)return!!this.requiresTranspilation_[e]||!(!goog.inHtmlDocument_()||"es6"!=t||"noModule"in goog.global.document.createElement("script"));throw Error("Unknown language mode: "+e)},goog.Transpiler.prototype.transpile=function(e,t){return goog.transpile_(e,t,this.transpilationTarget_)},goog.transpiler_=new goog.Transpiler,goog.protectScriptTag_=function(e){return e.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},goog.DebugLoader_=function(){this.dependencies_={},this.idToPath_={},this.written_={},this.loadingDeps_=[],this.depsToLoad_=[],this.paused_=!1,this.factory_=new goog.DependencyFactory(goog.transpiler_),this.deferredCallbacks_={},this.deferredQueue_=[]},goog.DebugLoader_.prototype.bootstrap=function(e,t){function r(){n&&(goog.global.setTimeout(n,0),n=null)}var n=t;if(e.length){t=[];for(var o=0;o<e.length;o++){var s=this.getPathFromDeps_(e[o]);if(!s)throw Error("Unregonized namespace: "+e[o]);t.push(this.dependencies_[s])}s=goog.require;var i=0;for(o=0;o<e.length;o++)s(e[o]),t[o].onLoad((function(){++i==e.length&&r()}))}else r()},goog.DebugLoader_.prototype.loadClosureDeps=function(){this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+"deps.js"),"deps.js",[],[],{},!1)),this.loadDeps_()},goog.DebugLoader_.prototype.requested=function(e,t){(e=this.getPathFromDeps_(e))&&(t||this.areDepsLoaded_(this.dependencies_[e].requires))&&(t=this.deferredCallbacks_[e])&&(delete this.deferredCallbacks_[e],t())},goog.DebugLoader_.prototype.setDependencyFactory=function(e){this.factory_=e},goog.DebugLoader_.prototype.load_=function(e){if(!this.getPathFromDeps_(e))throw e="goog.require could not find: "+e,goog.logToConsole_(e),Error(e);var t=this,r=[],n=function(e){var o=t.getPathFromDeps_(e);if(!o)throw Error("Bad dependency path or symbol: "+e);if(!t.written_[o]){for(t.written_[o]=!0,e=t.dependencies_[o],o=0;o<e.requires.length;o++)goog.isProvided_(e.requires[o])||n(e.requires[o]);r.push(e)}};n(e),e=!!this.depsToLoad_.length,this.depsToLoad_=this.depsToLoad_.concat(r),this.paused_||e||this.loadDeps_()},goog.DebugLoader_.prototype.loadDeps_=function(){for(var e=this,t=this.paused_;this.depsToLoad_.length&&!t;)!function(){var r=!1,n=e.depsToLoad_.shift(),o=!1;e.loading_(n);var s={pause:function(){if(r)throw Error("Cannot call pause after the call to load.");t=!0},resume:function(){r?e.resume_():t=!1},loaded:function(){if(o)throw Error("Double call to loaded.");o=!0,e.loaded_(n)},pending:function(){for(var t=[],r=0;r<e.loadingDeps_.length;r++)t.push(e.loadingDeps_[r]);return t},setModuleState:function(e){goog.moduleLoaderState_={type:e,moduleName:"",declareLegacyNamespace:!1}},registerEs6ModuleExports:function(e,t,r){r&&(goog.loadedModules_[r]={exports:t,type:goog.ModuleType.ES6,moduleId:r||""})},registerGoogModuleExports:function(e,t){goog.loadedModules_[e]={exports:t,type:goog.ModuleType.GOOG,moduleId:e}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(t){if(r)throw Error("Cannot register with defer after the call to load.");e.defer_(n,t)},areDepsLoaded:function(){return e.areDepsLoaded_(n.requires)}};try{n.load(s)}finally{r=!0}}();t&&this.pause_()},goog.DebugLoader_.prototype.pause_=function(){this.paused_=!0},goog.DebugLoader_.prototype.resume_=function(){this.paused_&&(this.paused_=!1,this.loadDeps_())},goog.DebugLoader_.prototype.loading_=function(e){this.loadingDeps_.push(e)},goog.DebugLoader_.prototype.loaded_=function(e){for(var t=0;t<this.loadingDeps_.length;t++)if(this.loadingDeps_[t]==e){this.loadingDeps_.splice(t,1);break}for(t=0;t<this.deferredQueue_.length;t++)if(this.deferredQueue_[t]==e.path){this.deferredQueue_.splice(t,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)for(;this.deferredQueue_.length;)this.requested(this.deferredQueue_.shift(),!0);e.loaded()},goog.DebugLoader_.prototype.areDepsLoaded_=function(e){for(var t=0;t<e.length;t++){var r=this.getPathFromDeps_(e[t]);if(!r||!(r in this.deferredCallbacks_)&&!goog.isProvided_(e[t]))return!1}return!0},goog.DebugLoader_.prototype.getPathFromDeps_=function(e){return e in this.idToPath_?this.idToPath_[e]:e in this.dependencies_?e:null},goog.DebugLoader_.prototype.defer_=function(e,t){this.deferredCallbacks_[e.path]=t,this.deferredQueue_.push(e.path)},goog.LoadController=function(){},goog.LoadController.prototype.pause=function(){},goog.LoadController.prototype.resume=function(){},goog.LoadController.prototype.loaded=function(){},goog.LoadController.prototype.pending=function(){},goog.LoadController.prototype.registerEs6ModuleExports=function(e,t,r){},goog.LoadController.prototype.setModuleState=function(e){},goog.LoadController.prototype.clearModuleState=function(){},goog.LoadController.prototype.defer=function(e){},goog.LoadController.prototype.areDepsLoaded=function(){},goog.Dependency=function(e,t,r,n,o){this.path=e,this.relativePath=t,this.provides=r,this.requires=n,this.loadFlags=o,this.loaded_=!1,this.loadCallbacks_=[]},goog.Dependency.prototype.getPathName=function(){var e=this.path,t=e.indexOf("://");return 0<=t&&0<=(t=(e=e.substring(t+3)).indexOf("/"))&&(e=e.substring(t+1)),e},goog.Dependency.prototype.onLoad=function(e){this.loaded_?e():this.loadCallbacks_.push(e)},goog.Dependency.prototype.loaded=function(){this.loaded_=!0;var e=this.loadCallbacks_;this.loadCallbacks_=[];for(var t=0;t<e.length;t++)e[t]()},goog.Dependency.defer_=!1,goog.Dependency.callbackMap_={},goog.Dependency.registerCallback_=function(e){var t=Math.random().toString(32);return goog.Dependency.callbackMap_[t]=e,t},goog.Dependency.unregisterCallback_=function(e){delete goog.Dependency.callbackMap_[e]},goog.Dependency.callback_=function(e,t){if(!(e in goog.Dependency.callbackMap_))throw Error("Callback key "+e+" does not exist (was base.js loaded more than once?).");for(var r=goog.Dependency.callbackMap_[e],n=[],o=1;o<arguments.length;o++)n.push(arguments[o]);r.apply(void 0,n)},goog.Dependency.prototype.load=function(e){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?e.loaded():e.pause();else if(goog.inHtmlDocument_()){var t=goog.global.document;if("complete"==t.readyState&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){if(/\bdeps.js$/.test(this.path))return void e.loaded();throw Error('Cannot write "'+this.path+'" after document load')}if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()){var r=goog.Dependency.registerCallback_((function(t){goog.DebugLoader_.IS_OLD_IE_&&"complete"!=t.readyState||(goog.Dependency.unregisterCallback_(r),e.loaded())})),n=!goog.DebugLoader_.IS_OLD_IE_&&goog.getScriptNonce()?' nonce="'+goog.getScriptNonce()+'"':"";n='<script src="'+this.path+'" '+(goog.DebugLoader_.IS_OLD_IE_?"onreadystatechange":"onload")+"=\"goog.Dependency.callback_('"+r+'\', this)" type="text/javascript" '+(goog.Dependency.defer_?"defer":"")+n+"><\/script>",t.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(n):n)}else{var o=t.createElement("script");o.defer=goog.Dependency.defer_,o.async=!1,o.type="text/javascript",(n=goog.getScriptNonce())&&o.setAttribute("nonce",n),goog.DebugLoader_.IS_OLD_IE_?(e.pause(),o.onreadystatechange=function(){"loaded"!=o.readyState&&"complete"!=o.readyState||(e.loaded(),e.resume())}):o.onload=function(){o.onload=null,e.loaded()},o.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(this.path):this.path,t.head.appendChild(o)}}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),"deps.js"==this.relativePath?(goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or setting CLOSURE_NO_DEPS to true."),e.loaded()):e.pause()},goog.Es6ModuleDependency=function(e,t,r,n,o){goog.Dependency.call(this,e,t,r,n,o)},goog.inherits(goog.Es6ModuleDependency,goog.Dependency),goog.Es6ModuleDependency.prototype.load=function(e){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?e.loaded():e.pause();else if(goog.inHtmlDocument_()){var t=goog.global.document,r=this;if(goog.isDocumentLoading_()){var n=function(e,r){e=r?'<script type="module" crossorigin>'+r+"<\/script>":'<script type="module" crossorigin src="'+e+'"><\/script>',t.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(e):e)};goog.Dependency.defer_=!0}else n=function(e,r){var n=t.createElement("script");n.defer=!0,n.async=!1,n.type="module",n.setAttribute("crossorigin",!0);var o=goog.getScriptNonce();o&&n.setAttribute("nonce",o),r?n.textContent=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScript(r):r:n.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(e):e,t.head.appendChild(n)};var o=goog.Dependency.registerCallback_((function(){goog.Dependency.unregisterCallback_(o),e.setModuleState(goog.ModuleType.ES6)}));n(void 0,'goog.Dependency.callback_("'+o+'")'),n(this.path,void 0);var s=goog.Dependency.registerCallback_((function(t){goog.Dependency.unregisterCallback_(s),e.registerEs6ModuleExports(r.path,t,goog.moduleLoaderState_.moduleName)}));n(void 0,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+s+'", m)');var i=goog.Dependency.registerCallback_((function(){goog.Dependency.unregisterCallback_(i),e.clearModuleState(),e.loaded()}));n(void 0,'goog.Dependency.callback_("'+i+'")')}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),e.pause()},goog.TransformedDependency=function(e,t,r,n,o){goog.Dependency.call(this,e,t,r,n,o),this.contents_=null,this.lazyFetch_=!goog.inHtmlDocument_()||!("noModule"in goog.global.document.createElement("script"))},goog.inherits(goog.TransformedDependency,goog.Dependency),goog.TransformedDependency.prototype.load=function(e){function t(){n.contents_=goog.loadFileSync_(n.path),n.contents_&&(n.contents_=n.transform(n.contents_),n.contents_&&(n.contents_+="\n//# sourceURL="+n.path))}function r(){if(n.lazyFetch_&&t(),n.contents_){o&&e.setModuleState(goog.ModuleType.ES6);try{var r=n.contents_;if(n.contents_=null,goog.globalEval(r),o)var s=goog.moduleLoaderState_.moduleName}finally{o&&e.clearModuleState()}o&&goog.global.$jscomp.require.ensure([n.getPathName()],(function(){e.registerEs6ModuleExports(n.path,goog.global.$jscomp.require(n.getPathName()),s)})),e.loaded()}}var n=this;if(goog.global.CLOSURE_IMPORT_SCRIPT)t(),this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT("",this.contents_)?(this.contents_=null,e.loaded()):e.pause();else{var o=this.loadFlags.module==goog.ModuleType.ES6;this.lazyFetch_||t();var s=1<e.pending().length,i=s&&goog.DebugLoader_.IS_OLD_IE_;if(s=goog.Dependency.defer_&&(s||goog.isDocumentLoading_()),i||s)e.defer((function(){r()}));else{var a=goog.global.document;if(i=goog.inHtmlDocument_()&&"ActiveXObject"in goog.global,o&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()&&!i){goog.Dependency.defer_=!0,e.pause();var c=a.onreadystatechange;a.onreadystatechange=function(){"interactive"==a.readyState&&(a.onreadystatechange=c,r(),e.resume()),goog.isFunction(c)&&c.apply(void 0,arguments)}}else!goog.DebugLoader_.IS_OLD_IE_&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()?function(){var e=goog.global.document,t=goog.Dependency.registerCallback_((function(){goog.Dependency.unregisterCallback_(t),r()})),n='<script type="text/javascript">'+goog.protectScriptTag_('goog.Dependency.callback_("'+t+'");')+"<\/script>";e.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(n):n)}():r()}}},goog.TransformedDependency.prototype.transform=function(e){},goog.TranspiledDependency=function(e,t,r,n,o,s){goog.TransformedDependency.call(this,e,t,r,n,o),this.transpiler=s},goog.inherits(goog.TranspiledDependency,goog.TransformedDependency),goog.TranspiledDependency.prototype.transform=function(e){return this.transpiler.transpile(e,this.getPathName())},goog.PreTranspiledEs6ModuleDependency=function(e,t,r,n,o){goog.TransformedDependency.call(this,e,t,r,n,o)},goog.inherits(goog.PreTranspiledEs6ModuleDependency,goog.TransformedDependency),goog.PreTranspiledEs6ModuleDependency.prototype.transform=function(e){return e},goog.GoogModuleDependency=function(e,t,r,n,o,s,i){goog.TransformedDependency.call(this,e,t,r,n,o),this.needsTranspile_=s,this.transpiler_=i},goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency),goog.GoogModuleDependency.prototype.transform=function(e){return this.needsTranspile_&&(e=this.transpiler_.transpile(e,this.getPathName())),goog.LOAD_MODULE_USING_EVAL&&void 0!==goog.global.JSON?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+this.path+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+this.path+"\n"},goog.DebugLoader_.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.DebugLoader_.prototype.addDependency=function(e,t,r,n){t=t||[],e=e.replace(/\\/g,"/");var o=goog.normalizePath_(goog.basePath+e);for(n&&"boolean"!=typeof n||(n=n?{module:goog.ModuleType.GOOG}:{}),r=this.factory_.createDependency(o,e,t,r,n,goog.transpiler_.needsTranspile(n.lang||"es3",n.module)),this.dependencies_[o]=r,r=0;r<t.length;r++)this.idToPath_[t[r]]=o;this.idToPath_[e]=o},goog.DependencyFactory=function(e){this.transpiler=e},goog.DependencyFactory.prototype.createDependency=function(e,t,r,n,o,s){return o.module==goog.ModuleType.GOOG?new goog.GoogModuleDependency(e,t,r,n,o,s,this.transpiler):s?new goog.TranspiledDependency(e,t,r,n,o,this.transpiler):o.module==goog.ModuleType.ES6?"never"==goog.TRANSPILE&&goog.ASSUME_ES_MODULES_TRANSPILED?new goog.PreTranspiledEs6ModuleDependency(e,t,r,n,o):new goog.Es6ModuleDependency(e,t,r,n,o):new goog.Dependency(e,t,r,n,o)},goog.debugLoader_=new goog.DebugLoader_,goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()},goog.setDependencyFactory=function(e){goog.debugLoader_.setDependencyFactory(e)},goog.global.CLOSURE_NO_DEPS||goog.debugLoader_.loadClosureDeps(),goog.bootstrap=function(e,t){goog.debugLoader_.bootstrap(e,t)}),goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(e){return e},goog.createTrustedTypesPolicy=function(e){var t=null,r=goog.global.trustedTypes||goog.global.TrustedTypes;if(!r||!r.createPolicy)return t;try{t=r.createPolicy(e,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(e){goog.logToConsole_(e.message)}return t},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null,goog.object={},goog.object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},goog.object.forEach=function(e,t,r){for(var n in e)t.call(r,e[n],n,e)},goog.object.filter=function(e,t,r){var n,o={};for(n in e)t.call(r,e[n],n,e)&&(o[n]=e[n]);return o},goog.object.map=function(e,t,r){var n,o={};for(n in e)o[n]=t.call(r,e[n],n,e);return o},goog.object.some=function(e,t,r){for(var n in e)if(t.call(r,e[n],n,e))return!0;return!1},goog.object.every=function(e,t,r){for(var n in e)if(!t.call(r,e[n],n,e))return!1;return!0},goog.object.getCount=function(e){var t,r=0;for(t in e)r++;return r},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t,r=[],n=0;for(t in e)r[n++]=e[t];return r},goog.object.getKeys=function(e){var t,r=[],n=0;for(t in e)r[n++]=t;return r},goog.object.getValueByKeys=function(e,t){var r=goog.isArrayLike(t),n=r?t:arguments;for(r=r?0:1;r<n.length;r++){if(null==e)return;e=e[n[r]]}return e},goog.object.containsKey=function(e,t){return null!==e&&t in e},goog.object.containsValue=function(e,t){for(var r in e)if(e[r]==t)return!0;return!1},goog.object.findKey=function(e,t,r){for(var n in e)if(t.call(r,e[n],n,e))return n},goog.object.findValue=function(e,t,r){return(t=goog.object.findKey(e,t,r))&&e[t]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var r;return(r=t in e)&&delete e[t],r},goog.object.add=function(e,t,r){if(null!==e&&t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,r)},goog.object.get=function(e,t,r){return null!==e&&t in e?e[t]:r},goog.object.set=function(e,t,r){e[t]=r},goog.object.setIfUndefined=function(e,t,r){return t in e?e[t]:e[t]=r},goog.object.setWithReturnValueIfNotSet=function(e,t,r){return t in e?e[t]:(r=r(),e[t]=r)},goog.object.equals=function(e,t){for(var r in e)if(!(r in t)||e[r]!==t[r])return!1;for(var n in t)if(!(n in e))return!1;return!0},goog.object.clone=function(e){var t,r={};for(t in e)r[t]=e[t];return r},goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(goog.isFunction(e.clone))return e.clone();for(var r in t="array"==t?[]:{},e)t[r]=goog.object.unsafeClone(e[r]);return t}return e},goog.object.transpose=function(e){var t,r={};for(t in e)r[e[t]]=t;return r},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(e,t){for(var r,n,o=1;o<arguments.length;o++){for(r in n=arguments[o])e[r]=n[r];for(var s=0;s<goog.object.PROTOTYPE_FIELDS_.length;s++)r=goog.object.PROTOTYPE_FIELDS_[s],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&Array.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var r={},n=0;n<t;n+=2)r[arguments[n]]=arguments[n+1];return r},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&Array.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var r={},n=0;n<t;n++)r[arguments[n]]=!0;return r},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)},goog.object.getAllPropertyNames=function(e,t,r){if(!e)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(e);for(var n={};e&&(e!==Object.prototype||t)&&(e!==Function.prototype||r);){for(var o=Object.getOwnPropertyNames(e),s=0;s<o.length;s++)n[o[s]]=!0;e=Object.getPrototypeOf(e)}return goog.object.getKeys(n)},goog.object.getSuperClass=function(e){return(e=Object.getPrototypeOf(e.prototype))&&e.constructor},goog.debug={},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(e,t){goog.debug.Error.call(this,goog.asserts.subs_(e,t)),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(e,t){for(var r="",n=(e=e.split("%s")).length-1,o=0;o<n;o++)r+=e[o]+(o<t.length?t[o]:"%s");return r+e[n]},goog.asserts.doAssertFailure_=function(e,t,r,n){var o="Assertion failed";if(r){o+=": "+r;var s=n}else e&&(o+=": "+e,s=t);e=new goog.asserts.AssertionError(""+o,s||[]),goog.asserts.errorHandler_(e)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertExists=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&null==e&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&"number"!=typeof e&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&"string"!=typeof e&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!Array.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&"boolean"!=typeof e&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,r){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,r,n){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],r,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertFinite=function(e,t,r){return!goog.asserts.ENABLE_ASSERTS||"number"==typeof e&&isFinite(e)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e};var jspb={BinaryConstants:{},ConstBinaryMessage:function(){},BinaryMessage:function(){}};jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(e){var t=jspb.BinaryConstants.FieldType,r=jspb.BinaryConstants.WireType;switch(e){case t.INT32:case t.INT64:case t.UINT32:case t.UINT64:case t.SINT32:case t.SINT64:case t.BOOL:case t.ENUM:case t.VHASH64:return r.VARINT;case t.DOUBLE:case t.FIXED64:case t.SFIXED64:case t.FHASH64:return r.FIXED64;case t.STRING:case t.MESSAGE:case t.BYTES:return r.DELIMITED;case t.FLOAT:case t.FIXED32:case t.SFIXED32:return r.FIXED32;default:return r.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=0x8000000000000000,jspb.BinaryConstants.TWO_TO_64=0x10000000000000000,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(e){return e[e.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.indexOf.call(e,t,r)}:function(e,t,r){if(r=null==r?0:0>r?Math.max(0,e.length+r):r,"string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,r);for(;r<e.length;r++)if(r in e&&e[r]===t)return r;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.lastIndexOf.call(e,t,null==r?e.length-1:r)}:function(e,t,r){if(0>(r=null==r?e.length-1:r)&&(r=Math.max(0,e.length+r)),"string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.lastIndexOf(t,r);for(;0<=r;r--)if(r in e&&e[r]===t)return r;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(e,t,r){goog.asserts.assert(null!=e.length),Array.prototype.forEach.call(e,t,r)}:function(e,t,r){for(var n=e.length,o="string"==typeof e?e.split(""):e,s=0;s<n;s++)s in o&&t.call(r,o[s],s,e)},goog.array.forEachRight=function(e,t,r){var n=e.length,o="string"==typeof e?e.split(""):e;for(--n;0<=n;--n)n in o&&t.call(r,o[n],n,e)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.filter.call(e,t,r)}:function(e,t,r){for(var n=e.length,o=[],s=0,i="string"==typeof e?e.split(""):e,a=0;a<n;a++)if(a in i){var c=i[a];t.call(r,c,a,e)&&(o[s++]=c)}return o},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.map.call(e,t,r)}:function(e,t,r){for(var n=e.length,o=Array(n),s="string"==typeof e?e.split(""):e,i=0;i<n;i++)i in s&&(o[i]=t.call(r,s[i],i,e));return o},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(e,t,r,n){return goog.asserts.assert(null!=e.length),n&&(t=goog.bind(t,n)),Array.prototype.reduce.call(e,t,r)}:function(e,t,r,n){var o=r;return goog.array.forEach(e,(function(r,s){o=t.call(n,o,r,s,e)})),o},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(e,t,r,n){return goog.asserts.assert(null!=e.length),goog.asserts.assert(null!=t),n&&(t=goog.bind(t,n)),Array.prototype.reduceRight.call(e,t,r)}:function(e,t,r,n){var o=r;return goog.array.forEachRight(e,(function(r,s){o=t.call(n,o,r,s,e)})),o},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.some.call(e,t,r)}:function(e,t,r){for(var n=e.length,o="string"==typeof e?e.split(""):e,s=0;s<n;s++)if(s in o&&t.call(r,o[s],s,e))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.every.call(e,t,r)}:function(e,t,r){for(var n=e.length,o="string"==typeof e?e.split(""):e,s=0;s<n;s++)if(s in o&&!t.call(r,o[s],s,e))return!1;return!0},goog.array.count=function(e,t,r){var n=0;return goog.array.forEach(e,(function(e,o,s){t.call(r,e,o,s)&&++n}),r),n},goog.array.find=function(e,t,r){return 0>(t=goog.array.findIndex(e,t,r))?null:"string"==typeof e?e.charAt(t):e[t]},goog.array.findIndex=function(e,t,r){for(var n=e.length,o="string"==typeof e?e.split(""):e,s=0;s<n;s++)if(s in o&&t.call(r,o[s],s,e))return s;return-1},goog.array.findRight=function(e,t,r){return 0>(t=goog.array.findIndexRight(e,t,r))?null:"string"==typeof e?e.charAt(t):e[t]},goog.array.findIndexRight=function(e,t,r){var n=e.length,o="string"==typeof e?e.split(""):e;for(--n;0<=n;n--)if(n in o&&t.call(r,o[n],n,e))return n;return-1},goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)},goog.array.isEmpty=function(e){return 0==e.length},goog.array.clear=function(e){if(!Array.isArray(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0},goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)},goog.array.insertAt=function(e,t,r){goog.array.splice(e,r,0,t)},goog.array.insertArrayAt=function(e,t,r){goog.partial(goog.array.splice,e,r,0).apply(null,t)},goog.array.insertBefore=function(e,t,r){var n;2==arguments.length||0>(n=goog.array.indexOf(e,r))?e.push(t):goog.array.insertAt(e,t,n)},goog.array.remove=function(e,t){var r;return(r=0<=(t=goog.array.indexOf(e,t)))&&goog.array.removeAt(e,t),r},goog.array.removeLast=function(e,t){return 0<=(t=goog.array.lastIndexOf(e,t))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAt=function(e,t){return goog.asserts.assert(null!=e.length),1==Array.prototype.splice.call(e,t,1).length},goog.array.removeIf=function(e,t,r){return 0<=(t=goog.array.findIndex(e,t,r))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAllIf=function(e,t,r){var n=0;return goog.array.forEachRight(e,(function(o,s){t.call(r,o,s,e)&&goog.array.removeAt(e,s)&&n++})),n},goog.array.concat=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(e){var t=e.length;if(0<t){for(var r=Array(t),n=0;n<t;n++)r[n]=e[n];return r}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(e,t){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(goog.isArrayLike(n)){var o=e.length||0,s=n.length||0;e.length=o+s;for(var i=0;i<s;i++)e[o+i]=n[i]}else e.push(n)}},goog.array.splice=function(e,t,r,n){return goog.asserts.assert(null!=e.length),Array.prototype.splice.apply(e,goog.array.slice(arguments,1))},goog.array.slice=function(e,t,r){return goog.asserts.assert(null!=e.length),2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,r)},goog.array.removeDuplicates=function(e,t,r){t=t||e;var n=function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e};r=r||n,n={};for(var o=0,s=0;s<e.length;){var i=e[s++],a=r(i);Object.prototype.hasOwnProperty.call(n,a)||(n[a]=!0,t[o++]=i)}t.length=o},goog.array.binarySearch=function(e,t,r){return goog.array.binarySearch_(e,r||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(e,t,r){return goog.array.binarySearch_(e,t,!0,void 0,r)},goog.array.binarySearch_=function(e,t,r,n,o){for(var s,i=0,a=e.length;i<a;){var c=i+(a-i>>>1),l=r?t.call(o,e[c],c,e):t(n,e[c]);0<l?i=c+1:(a=c,s=!l)}return s?i:-i-1},goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(e,t){for(var r=Array(e.length),n=0;n<e.length;n++)r[n]={index:n,value:e[n]};var o=t||goog.array.defaultCompare;for(goog.array.sort(r,(function(e,t){return o(e.value,t.value)||e.index-t.index})),n=0;n<e.length;n++)e[n]=r[n].value},goog.array.sortByKey=function(e,t,r){var n=r||goog.array.defaultCompare;goog.array.sort(e,(function(e,r){return n(t(e),t(r))}))},goog.array.sortObjectsByKey=function(e,t,r){goog.array.sortByKey(e,(function(e){return e[t]}),r)},goog.array.isSorted=function(e,t,r){t=t||goog.array.defaultCompare;for(var n=1;n<e.length;n++){var o=t(e[n-1],e[n]);if(0<o||0==o&&r)return!1}return!0},goog.array.equals=function(e,t,r){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;var n=e.length;r=r||goog.array.defaultCompareEquality;for(var o=0;o<n;o++)if(!r(e[o],t[o]))return!1;return!0},goog.array.compare3=function(e,t,r){r=r||goog.array.defaultCompare;for(var n=Math.min(e.length,t.length),o=0;o<n;o++){var s=r(e[o],t[o]);if(0!=s)return s}return goog.array.defaultCompare(e.length,t.length)},goog.array.defaultCompare=function(e,t){return e>t?1:e<t?-1:0},goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)},goog.array.defaultCompareEquality=function(e,t){return e===t},goog.array.binaryInsert=function(e,t,r){return 0>(r=goog.array.binarySearch(e,t,r))&&(goog.array.insertAt(e,t,-(r+1)),!0)},goog.array.binaryRemove=function(e,t,r){return 0<=(t=goog.array.binarySearch(e,t,r))&&goog.array.removeAt(e,t)},goog.array.bucket=function(e,t,r){for(var n={},o=0;o<e.length;o++){var s=e[o],i=t.call(r,s,o,e);void 0!==i&&(n[i]||(n[i]=[])).push(s)}return n},goog.array.toObject=function(e,t,r){var n={};return goog.array.forEach(e,(function(o,s){n[t.call(r,o,s,e)]=o})),n},goog.array.range=function(e,t,r){var n=[],o=0,s=e;if(void 0!==t&&(o=e,s=t),0>(r=r||1)*(s-o))return[];if(0<r)for(e=o;e<s;e+=r)n.push(e);else for(e=o;e>s;e+=r)n.push(e);return n},goog.array.repeat=function(e,t){for(var r=[],n=0;n<t;n++)r[n]=e;return r},goog.array.flatten=function(e){for(var t=[],r=0;r<arguments.length;r++){var n=arguments[r];if(Array.isArray(n))for(var o=0;o<n.length;o+=8192){var s=goog.array.slice(n,o,o+8192);s=goog.array.flatten.apply(null,s);for(var i=0;i<s.length;i++)t.push(s[i])}else t.push(n)}return t},goog.array.rotate=function(e,t){return goog.asserts.assert(null!=e.length),e.length&&(0<(t%=e.length)?Array.prototype.unshift.apply(e,e.splice(-t,t)):0>t&&Array.prototype.push.apply(e,e.splice(0,-t))),e},goog.array.moveItem=function(e,t,r){goog.asserts.assert(0<=t&&t<e.length),goog.asserts.assert(0<=r&&r<e.length),t=Array.prototype.splice.call(e,t,1),Array.prototype.splice.call(e,r,0,t[0])},goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],r=arguments[0].length,n=1;n<arguments.length;n++)arguments[n].length<r&&(r=arguments[n].length);for(n=0;n<r;n++){for(var o=[],s=0;s<arguments.length;s++)o.push(arguments[s][n]);t.push(o)}return t},goog.array.shuffle=function(e,t){t=t||Math.random;for(var r=e.length-1;0<r;r--){var n=Math.floor(t()*(r+1)),o=e[r];e[r]=e[n],e[n]=o}},goog.array.copyByIndex=function(e,t){var r=[];return goog.array.forEach(t,(function(t){r.push(e[t])})),r},goog.array.concatMap=function(e,t,r){return goog.array.concat.apply([],goog.array.map(e,t,r))},goog.crypt={},goog.crypt.stringToByteArray=function(e){for(var t=[],r=0,n=0;n<e.length;n++){var o=e.charCodeAt(n);255<o&&(t[r++]=255&o,o>>=8),t[r++]=o}return t},goog.crypt.byteArrayToString=function(e){if(8192>=e.length)return String.fromCharCode.apply(null,e);for(var t="",r=0;r<e.length;r+=8192){var n=goog.array.slice(e,r,r+8192);t+=String.fromCharCode.apply(null,n)}return t},goog.crypt.byteArrayToHex=function(e,t){return goog.array.map(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join(t||"")},goog.crypt.hexToByteArray=function(e){goog.asserts.assert(0==e.length%2,"Key string length must be multiple of 2");for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substring(r,r+2),16));return t},goog.crypt.stringToUtf8ByteArray=function(e){for(var t=[],r=0,n=0;n<e.length;n++){var o=e.charCodeAt(n);128>o?t[r++]=o:(2048>o?t[r++]=o>>6|192:(55296==(64512&o)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++n)),t[r++]=o>>18|240,t[r++]=o>>12&63|128):t[r++]=o>>12|224,t[r++]=o>>6&63|128),t[r++]=63&o|128)}return t},goog.crypt.utf8ByteArrayToString=function(e){for(var t=[],r=0,n=0;r<e.length;){var o=e[r++];if(128>o)t[n++]=String.fromCharCode(o);else if(191<o&&224>o){var s=e[r++];t[n++]=String.fromCharCode((31&o)<<6|63&s)}else if(239<o&&365>o){s=e[r++];var i=e[r++];o=((7&o)<<18|(63&s)<<12|(63&i)<<6|63&e[r++])-65536,t[n++]=String.fromCharCode(55296+(o>>10)),t[n++]=String.fromCharCode(56320+(1023&o))}else s=e[r++],i=e[r++],t[n++]=String.fromCharCode((15&o)<<12|(63&s)<<6|63&i)}return t.join("")},goog.crypt.xorByteArray=function(e,t){goog.asserts.assert(e.length==t.length,"XOR array lengths must match");for(var r=[],n=0;n<e.length;n++)r.push(e[n]^t[n]);return r},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(e){if(goog.asserts.ENABLE_ASSERTS){var t=goog.dom.asserts.getWindow_(e);t&&(!e||!(e instanceof t.Location)&&e instanceof t.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(e))}return e},goog.dom.asserts.assertIsElementType_=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var r=goog.dom.asserts.getWindow_(e);r&&void 0!==r[t]&&(e&&(e instanceof r[t]||!(e instanceof r.Location||e instanceof r.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,goog.dom.asserts.debugStringForType_(e)))}return e},goog.dom.asserts.assertIsHTMLAnchorElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(e){if(!goog.isObject(e))return void 0===e?"undefined":null===e?"null":typeof e;try{return e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(e){try{var t=e&&e.ownerDocument,r=t&&(t.defaultView||t.parentWindow);if((r=r||goog.global).Element&&r.Location)return r}catch(e){}return null},goog.functions={},goog.functions.constant=function(e){return function(){return e}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(e,t){return e},goog.functions.error=function(e){return function(){throw Error(e)}},goog.functions.fail=function(e){return function(){throw e}},goog.functions.lock=function(e,t){return t=t||0,function(){return e.apply(this,Array.prototype.slice.call(arguments,0,t))}},goog.functions.nth=function(e){return function(){return arguments[e]}},goog.functions.partialRight=function(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=Array.prototype.slice.call(arguments);return t.push.apply(t,r),e.apply(this,t)}},goog.functions.withReturnValue=function(e,t){return goog.functions.sequence(e,goog.functions.constant(t))},goog.functions.equalTo=function(e,t){return function(r){return t?e==r:e===r}},goog.functions.compose=function(e,t){var r=arguments,n=r.length;return function(){var e;n&&(e=r[n-1].apply(this,arguments));for(var t=n-2;0<=t;t--)e=r[t].call(this,e);return e}},goog.functions.sequence=function(e){var t=arguments,r=t.length;return function(){for(var e,n=0;n<r;n++)e=t[n].apply(this,arguments);return e}},goog.functions.and=function(e){var t=arguments,r=t.length;return function(){for(var e=0;e<r;e++)if(!t[e].apply(this,arguments))return!1;return!0}},goog.functions.or=function(e){var t=arguments,r=t.length;return function(){for(var e=0;e<r;e++)if(t[e].apply(this,arguments))return!0;return!1}},goog.functions.not=function(e){return function(){return!e.apply(this,arguments)}},goog.functions.create=function(e,t){var r=function(){};return r.prototype=e.prototype,r=new r,e.apply(r,Array.prototype.slice.call(arguments,1)),r},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(e){var t,r=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(r||(t=e(),r=!0),t):e()}},goog.functions.once=function(e){var t=e;return function(){if(t){var e=t;t=null,e()}}},goog.functions.debounce=function(e,t,r){var n=0;return function(o){goog.global.clearTimeout(n);var s=arguments;n=goog.global.setTimeout((function(){e.apply(r,s)}),t)}},goog.functions.throttle=function(e,t,r){var n=0,o=!1,s=[],i=function(){n=0,o&&(o=!1,a())},a=function(){n=goog.global.setTimeout(i,t),e.apply(r,s)};return function(e){s=arguments,n?o=!0:a()}},goog.functions.rateLimit=function(e,t,r){var n=0,o=function(){n=0};return function(s){n||(n=goog.global.setTimeout(o,t),e.apply(r,arguments))}},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(e){this.tagName_=e},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(e){return!0===goog.dom.tags.VOID_TAGS_[e]},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.string={},goog.string.TypedString=function(){},goog.string.Const=function(e,t){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=e===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.DEBUG&&(goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"}),goog.string.Const.unwrap=function(e){return e instanceof goog.string.Const&&e.constructor===goog.string.Const&&e.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?e.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+e+"'"),"type_error:Const")},goog.string.Const.from=function(e){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeScript.fromConstantAndArgs=function(e,t){for(var r=[],n=1;n<arguments.length;n++)r.push(goog.html.SafeScript.stringify_(arguments[n]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(e)+")("+r.join(", ")+");")},goog.html.SafeScript.fromJson=function(e){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(e))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(e){return goog.html.SafeScript.unwrapTrustedScript(e).toString()},goog.html.SafeScript.unwrapTrustedScript=function(e){return e instanceof goog.html.SafeScript&&e.constructor===goog.html.SafeScript&&e.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(e){return JSON.stringify(e).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeScript).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(e):e,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(e){return goog.fs.url.getUrlObject_().createObjectURL(e)},goog.fs.url.revokeObjectUrl=function(e){goog.fs.url.getUrlObject_().revokeObjectURL(e)},goog.fs.url.UrlObject_=function(){},goog.fs.url.UrlObject_.prototype.createObjectURL=function(e){},goog.fs.url.UrlObject_.prototype.revokeObjectURL=function(e){},goog.fs.url.getUrlObject_=function(){var e=goog.fs.url.findUrlObject_();if(null!=e)return e;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return void 0!==goog.global.URL&&void 0!==goog.global.URL.createObjectURL?goog.global.URL:void 0!==goog.global.webkitURL&&void 0!==goog.global.webkitURL.createObjectURL?goog.global.webkitURL:void 0!==goog.global.createObjectURL?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return null!=goog.fs.url.findUrlObject_()},goog.fs.blob={},goog.fs.blob.getBlob=function(e){var t=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(void 0!==t){t=new t;for(var r=0;r<arguments.length;r++)t.append(arguments[r]);return t.getBlob()}return goog.fs.blob.getBlobWithProperties(goog.array.toArray(arguments))},goog.fs.blob.getBlobWithProperties=function(e,t,r){var n=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(void 0!==n){n=new n;for(var o=0;o<e.length;o++)n.append(e[o],r);return n.getBlob(t)}if(void 0!==goog.global.Blob)return n={},t&&(n.type=t),r&&(n.endings=r),new Blob(e,n);throw Error("This browser doesn't seem to support creating Blobs")},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||3<=goog.LOCALE.length&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))||7<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))&&("adlm"==goog.LOCALE.substring(3,7).toLowerCase()||"arab"==goog.LOCALE.substring(3,7).toLowerCase()||"hebr"==goog.LOCALE.substring(3,7).toLowerCase()||"nkoo"==goog.LOCALE.substring(3,7).toLowerCase()||"rohg"==goog.LOCALE.substring(3,7).toLowerCase()||"thaa"==goog.LOCALE.substring(3,7).toLowerCase())||8<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))&&("adlm"==goog.LOCALE.substring(4,8).toLowerCase()||"arab"==goog.LOCALE.substring(4,8).toLowerCase()||"hebr"==goog.LOCALE.substring(4,8).toLowerCase()||"nkoo"==goog.LOCALE.substring(4,8).toLowerCase()||"rohg"==goog.LOCALE.substring(4,8).toLowerCase()||"thaa"==goog.LOCALE.substring(4,8).toLowerCase()),goog.i18n.bidi.Format={LRE:"‪",RLE:"‫",PDF:"‬",LRM:"‎",RLM:"‏"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(e,t){return"number"==typeof e?0<e?goog.i18n.bidi.Dir.LTR:0>e?goog.i18n.bidi.Dir.RTL:t?null:goog.i18n.bidi.Dir.NEUTRAL:null==e?null:e?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ऀ-῿‎Ⰰ-\ud801\ud804-\ud839\ud83c-\udbff豈-﬜︀-﹯﻽-￿",goog.i18n.bidi.rtlChars_="֑-ۯۺ-ࣿ‏\ud802-\ud803\ud83a-\ud83bיִ-﷿ﹰ-ﻼ",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(e,t){return t?e.replace(goog.i18n.bidi.htmlSkipReg_,""):e},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(e,t){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(e,t){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(e){return goog.i18n.bidi.rtlRe_.test(e)},goog.i18n.bidi.isLtrChar=function(e){return goog.i18n.bidi.ltrRe_.test(e)},goog.i18n.bidi.isNeutralChar=function(e){return!goog.i18n.bidi.isLtrChar(e)&&!goog.i18n.bidi.isRtlChar(e)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(e,t){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(e,t){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(e,t){return e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t),goog.i18n.bidi.isRequiredLtrRe_.test(e)||!goog.i18n.bidi.hasAnyLtr(e)&&!goog.i18n.bidi.hasAnyRtl(e)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(e,t){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(e,t){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(e){return goog.i18n.bidi.rtlLocalesRe_.test(e)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(e,t){return t=(void 0===t?goog.i18n.bidi.hasAnyRtl(e):t)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,e.replace(goog.i18n.bidi.bracketGuardTextRe_,t+"$&"+t)},goog.i18n.bidi.enforceRtlInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+e+"</span>"},goog.i18n.bidi.enforceRtlInText=function(e){return goog.i18n.bidi.Format.RLE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+e+"</span>"},goog.i18n.bidi.enforceLtrInText=function(e){return goog.i18n.bidi.Format.LRE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(e){return e.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(e){return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1״").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1׳")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(e,t){var r=0,n=0,o=!1;for(e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t).split(goog.i18n.bidi.wordSeparatorRe_),t=0;t<e.length;t++){var s=e[t];goog.i18n.bidi.startsWithRtl(s)?(r++,n++):goog.i18n.bidi.isRequiredLtrRe_.test(s)?o=!0:goog.i18n.bidi.hasAnyLtr(s)?n++:goog.i18n.bidi.hasNumeralsRe_.test(s)&&(o=!0)}return 0==n?o?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:r/n>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(e,t){return goog.i18n.bidi.estimateDirection(e,t)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(e,t){e&&(t=goog.i18n.bidi.toDir(t))&&(e.style.textAlign=t==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,e.dir=t==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(e,t){switch(goog.i18n.bidi.estimateDirection(t)){case goog.i18n.bidi.Dir.LTR:e.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:e.dir="rtl";break;default:e.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(e,t){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=e===goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(e,t){var r=goog.html.TrustedResourceUrl.unwrap(this),n=(r=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(r))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(r[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",r[2]||"",e)+goog.html.TrustedResourceUrl.stringifyParams_("#",n,t))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(e){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(e){return e instanceof goog.html.TrustedResourceUrl&&e.constructor===goog.html.TrustedResourceUrl&&e.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(e,t){var r=goog.string.Const.unwrap(e);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return e=r.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,(function(e,n){if(!Object.prototype.hasOwnProperty.call(t,n))throw Error('Found marker, "'+n+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[n])instanceof goog.string.Const?goog.string.Const.unwrap(e):encodeURIComponent(String(e))})),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(e,t,r,n){return goog.html.TrustedResourceUrl.format(e,t).cloneWithParams(r,n)},goog.html.TrustedResourceUrl.fromConstant=function(e){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.TrustedResourceUrl.fromConstants=function(e){for(var t="",r=0;r<e.length;r++)t+=goog.string.Const.unwrap(e[r]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.TrustedResourceUrl.fromSafeScript=function(e){return e=goog.fs.blob.getBlobWithProperties([goog.html.SafeScript.unwrap(e)],"text/javascript"),e=goog.fs.url.createObjectUrl(e),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(e){return e=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(e):e,new goog.html.TrustedResourceUrl(goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.html.TrustedResourceUrl.stringifyParams_=function(e,t,r){if(null==r)return t;if("string"==typeof r)return r?e+encodeURIComponent(r):"";for(var n in r){var o=r[n];o=Array.isArray(o)?o:[o];for(var s=0;s<o.length;s++){var i=o[s];null!=i&&(t||(t=e),t+=(t.length>e.length?"&":"")+encodeURIComponent(n)+"="+encodeURIComponent(String(i)))}}return t},goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.internal={},goog.string.internal.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},goog.string.internal.endsWith=function(e,t){var r=e.length-t.length;return 0<=r&&e.indexOf(t,r)==r},goog.string.internal.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(0,t.length))},goog.string.internal.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},goog.string.internal.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},goog.string.internal.caseInsensitiveCompare=function(e,t){return(e=String(e).toLowerCase())<(t=String(t).toLowerCase())?-1:e==t?0:1},goog.string.internal.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},goog.string.internal.htmlEscape=function(e,t){if(t)e=e.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(e))return e;-1!=e.indexOf("&")&&(e=e.replace(goog.string.internal.AMP_RE_,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(goog.string.internal.LT_RE_,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(goog.string.internal.GT_RE_,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(goog.string.internal.QUOT_RE_,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(goog.string.internal.NULL_RE_,"&#0;"))}return e},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(e,t){return goog.string.internal.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.internal.contains=function(e,t){return-1!=e.indexOf(t)},goog.string.internal.caseInsensitiveContains=function(e,t){return goog.string.internal.contains(e.toLowerCase(),t.toLowerCase())},goog.string.internal.compareVersions=function(e,t){var r=0;e=goog.string.internal.trim(String(e)).split("."),t=goog.string.internal.trim(String(t)).split(".");for(var n=Math.max(e.length,t.length),o=0;0==r&&o<n;o++){var s=e[o]||"",i=t[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],0==s[0].length&&0==i[0].length)break;r=0==s[1].length?0:parseInt(s[1],10);var a=0==i[1].length?0:parseInt(i[1],10);r=goog.string.internal.compareElements_(r,a)||goog.string.internal.compareElements_(0==s[2].length,0==i[2].length)||goog.string.internal.compareElements_(s[2],i[2]),s=s[3],i=i[3]}while(0==r)}return r},goog.string.internal.compareElements_=function(e,t){return e<t?-1:e>t?1:0},goog.html.SafeUrl=function(e,t){this.privateDoNotAccessOrElseSafeUrlWrappedValue_=e===goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(e){return e instanceof goog.html.SafeUrl&&e.constructor===goog.html.SafeUrl&&e.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(e){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(e)},goog.html.SafeUrl.fromBlob=function(e){return e=goog.html.SafeUrl.isSafeMimeType(e.type)?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromMediaSource=function(e){return goog.asserts.assert("MediaSource"in goog.global,"No support for MediaSource"),e=e instanceof MediaSource?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.DATA_URL_PATTERN_=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(e){var t=(e=e.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_);return t=t&&goog.html.SafeUrl.isSafeMimeType(t[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t?e:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"tel:")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(e){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(e))||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"fb-messenger://share")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromWhatsAppUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"whatsapp://send")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromSmsUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(e){var t=e.indexOf("#");if(0<t&&(e=e.substring(0,t)),!(t=e.match(/[?&]body=/gi)))return!0;if(1<t.length)return!1;if(!(e=e.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(e)}catch(e){return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(e)},goog.html.SafeUrl.fromSshUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"ssh://")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(e,t,r){return(e=e.exec(t))?(e=e[1],-1==(r instanceof goog.string.Const?[goog.string.Const.unwrap(r)]:r.map((function(e){return goog.string.Const.unwrap(e)}))).indexOf(e)&&(t=goog.html.SafeUrl.INNOCUOUS_STRING)):t=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.fromTrustedResourceUrl=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(e))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(e){return e instanceof goog.html.SafeUrl?e:(e="object"==typeof e&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SAFE_URL_PATTERN_.test(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(e,t){return e instanceof goog.html.SafeUrl?e:(e="object"==typeof e&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),t&&/^data:/i.test(e)&&(t=goog.html.SafeUrl.fromDataUrl(e)).getTypedStringValue()==e?t:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(e),"%s does not match the safe URL pattern",e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(e){return new goog.html.SafeUrl(goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(e,";"),"Last character of style string is not ';': "+e),goog.asserts.assert(goog.string.internal.contains(e,":"),"Style string must contain at least one ':', to specify a \"name: value\" pair: "+e),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(e){return e instanceof goog.html.SafeStyle&&e.constructor===goog.html.SafeStyle&&e.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyle).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=e,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(e){var t,r="";for(t in e){if(!/^[-_a-zA-Z0-9]+$/.test(t))throw Error("Name allows only [-_a-zA-Z0-9], got: "+t);var n=e[t];null!=n&&(r+=t+":"+(n=Array.isArray(n)?goog.array.map(n,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(n))+";")}return r?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(r):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(e){if(e instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(e).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(e=e instanceof goog.string.Const?goog.string.Const.unwrap(e):goog.html.SafeStyle.sanitizePropertyValueString_(String(e)),/[{;}]/.test(e))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[e]);return e},goog.html.SafeStyle.sanitizePropertyValueString_=function(e){var t=e.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(t)?goog.html.SafeStyle.COMMENT_RE_.test(e)?(goog.asserts.fail("String value disallows comments, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(e)?goog.html.SafeStyle.hasBalancedSquareBrackets_(e)?goog.html.SafeStyle.sanitizeUrl_(e):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(e){for(var t=!0,r=!0,n=0;n<e.length;n++){var o=e.charAt(n);"'"==o&&r?t=!t:'"'==o&&t&&(r=!r)}return t&&r},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(e){for(var t=!0,r=/^[-_a-zA-Z0-9]$/,n=0;n<e.length;n++){var o=e.charAt(n);if("]"==o){if(t)return!1;t=!0}else if("["==o){if(!t)return!1;t=!1}else if(!t&&!r.test(o))return!1}return t},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_="[-,.\"'%_!# a-zA-Z0-9\\[\\]]",goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.ALLOWED_FUNCTIONS_="calc cubic-bezier fit-content hsl hsla linear-gradient matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)?".split(" "),goog.html.SafeStyle.FUNCTIONS_RE_=new RegExp("\\b("+goog.html.SafeStyle.ALLOWED_FUNCTIONS_.join("|")+")\\([-+*/0-9a-z.%\\[\\], ]+\\)","g"),goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(e){return e.replace(goog.html.SafeStyle.URL_RE_,(function(e,t,r,n){var o="";return r=r.replace(/^(['"])(.*)\1$/,(function(e,t,r){return o=t,r})),e=goog.html.SafeUrl.sanitize(r).getTypedStringValue(),t+o+e+o+n}))},goog.html.SafeStyle.concat=function(e){var t="",r=function(e){Array.isArray(e)?goog.array.forEach(e,r):t+=goog.html.SafeStyle.unwrap(e)};return goog.array.forEach(arguments,r),t?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t):goog.html.SafeStyle.EMPTY},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(e,t){if(goog.string.internal.contains(e,"<"))throw Error("Selector does not allow '<', got: "+e);var r=e.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(r))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+e);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(r))throw Error("() and [] in selector must be balanced, got: "+e);return t instanceof goog.html.SafeStyle||(t=goog.html.SafeStyle.create(t)),e=e+"{"+goog.html.SafeStyle.unwrap(t).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(e){for(var t={"(":")","[":"]"},r=[],n=0;n<e.length;n++){var o=e[n];if(t[o])r.push(t[o]);else if(goog.object.contains(t,o)&&r.pop()!=o)return!1}return 0==r.length},goog.html.SafeStyleSheet.concat=function(e){var t="",r=function(e){Array.isArray(e)?goog.array.forEach(e,r):t+=goog.html.SafeStyleSheet.unwrap(e)};return goog.array.forEach(arguments,r),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeStyleSheet.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(e,"<"),"Forbidden '<' character in style sheet string: "+e),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(e){return e instanceof goog.html.SafeStyleSheet&&e.constructor===goog.html.SafeStyleSheet&&e.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyleSheet).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=e,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();return e&&(e=e.userAgent)?e:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(t,e)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(t,e)},goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,r=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,n=[];t=r.exec(e);)n.push([t[1],t[2],t[3]||void 0]);return n},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function e(e){return e=goog.array.find(e,n),r[e]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);t=goog.labs.userAgent.util.extractVersionTuples(t);var r={};goog.array.forEach(t,(function(e){r[e[0]]=e[1]}));var n=goog.partial(goog.object.containsKey,r);return goog.labs.userAgent.browser.isOpera()?e(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?e(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?e(["Edg"]):goog.labs.userAgent.browser.isChrome()?e(["Chrome","CriOS","HeadlessChrome"]):(t=t[2])&&t[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),e)},goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\d\.]*)/.exec(e);if(t&&t[1])return t[1];t="";var r=/MSIE +([\d\.]+)/.exec(e);if(r&&r[1])if(e=/Trident\/(\d.\d)/.exec(e),"7.0"==r[1])if(e&&e[1])switch(e[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0"}else t="7.0";else t=r[1];return t},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.ENABLE_ERROR_MESSAGES=goog.DEBUG,goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE=!0,goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(e){return goog.html.SafeHtml.unwrapTrustedHTML(e).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(e){return e instanceof goog.html.SafeHtml&&e.constructor===goog.html.SafeHtml&&e.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(e){if(e instanceof goog.html.SafeHtml)return e;var t="object"==typeof e,r=null;return t&&e.implementsGoogI18nBidiDirectionalString&&(r=e.getDirection()),e=t&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(e),r)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.comment=function(e){return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("\x3c!--"+goog.string.internal.htmlEscape(e)+"--\x3e",null)},goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(e,t,r){return goog.html.SafeHtml.verifyTagName(String(e)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(e),t,r)},goog.html.SafeHtml.verifyTagName=function(e){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Invalid tag name <"+e+">.":"");if(e.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Tag name <"+e+"> is not allowed for SafeHtml.":"")},goog.html.SafeHtml.createIframe=function(e,t,r,n){e&&goog.html.TrustedResourceUrl.unwrap(e);var o={};return o.src=e||null,o.srcdoc=t&&goog.html.SafeHtml.unwrap(t),e=goog.html.SafeHtml.combineAttributes(o,{sandbox:""},r),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,n)},goog.html.SafeHtml.createSandboxIframe=function(e,t,r,n){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"The browser does not support sandboxed iframes.":"");var o={};return o.src=e?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)):null,o.srcdoc=t||null,o.sandbox="",e=goog.html.SafeHtml.combineAttributes(o,{},r),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,n)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(e,t){return goog.html.TrustedResourceUrl.unwrap(e),e=goog.html.SafeHtml.combineAttributes({src:e},{},t),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",e)},goog.html.SafeHtml.createScript=function(e,t){for(var r in t){var n=r.toLowerCase();if("language"==n||"src"==n||"text"==n||"type"==n)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot set "'+n+'" attribute':"")}for(r="",e=goog.array.concat(e),n=0;n<e.length;n++)r+=goog.html.SafeScript.unwrap(e[n]);return e=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",t,e)},goog.html.SafeHtml.createStyle=function(e,t){t=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},t);var r="";e=goog.array.concat(e);for(var n=0;n<e.length;n++)r+=goog.html.SafeStyleSheet.unwrap(e[n]);return e=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",t,e)},goog.html.SafeHtml.createMetaRefresh=function(e,t){return e=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(t||0)+"; url="+e})},goog.html.SafeHtml.getAttrNameAndValue_=function(e,t,r){if(r instanceof goog.string.Const)r=goog.string.Const.unwrap(r);else if("style"==t.toLowerCase()){if(!goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");r=goog.html.SafeHtml.getStyleValue_(r)}else{if(/^on/i.test(t))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+t+'" requires goog.string.Const value, "'+r+'" given.':"");if(t.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(r instanceof goog.html.TrustedResourceUrl)r=goog.html.TrustedResourceUrl.unwrap(r);else if(r instanceof goog.html.SafeUrl)r=goog.html.SafeUrl.unwrap(r);else{if("string"!=typeof r)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+t+'" on tag "'+e+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+r+'" given.':"");r=goog.html.SafeUrl.sanitize(r).getTypedStringValue()}}return r.implementsGoogStringTypedString&&(r=r.getTypedStringValue()),goog.asserts.assert("string"==typeof r||"number"==typeof r,"String or number value expected, got "+typeof r+" with value: "+r),t+'="'+goog.string.internal.htmlEscape(String(r))+'"'},goog.html.SafeHtml.getStyleValue_=function(e){if(!goog.isObject(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof e+" given: "+e:"");return e instanceof goog.html.SafeStyle||(e=goog.html.SafeStyle.create(e)),goog.html.SafeStyle.unwrap(e)},goog.html.SafeHtml.createWithDir=function(e,t,r,n){return(t=goog.html.SafeHtml.create(t,r,n)).dir_=e,t},goog.html.SafeHtml.join=function(e,t){var r=(e=goog.html.SafeHtml.htmlEscape(e)).getDirection(),n=[],o=function(e){Array.isArray(e)?goog.array.forEach(e,o):(e=goog.html.SafeHtml.htmlEscape(e),n.push(goog.html.SafeHtml.unwrap(e)),e=e.getDirection(),r==goog.i18n.bidi.Dir.NEUTRAL?r=e:e!=goog.i18n.bidi.Dir.NEUTRAL&&r!=e&&(r=null))};return goog.array.forEach(t,o),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n.join(goog.html.SafeHtml.unwrap(e)),r)},goog.html.SafeHtml.concat=function(e){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(e,t){var r=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return r.dir_=e,r},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(e,t){return(new goog.html.SafeHtml).initSecurityPrivateDoNotAccessOrElse_(e,t)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e,t){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(e):e,this.dir_=t,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(e,t,r){var n=null,o="<"+e+goog.html.SafeHtml.stringifyAttributes(e,t);return null==r?r=[]:Array.isArray(r)||(r=[r]),goog.dom.tags.isVoidTag(e.toLowerCase())?(goog.asserts.assert(!r.length,"Void tag <"+e+"> does not allow content."),o+=">"):(n=goog.html.SafeHtml.concat(r),o+=">"+goog.html.SafeHtml.unwrap(n)+"</"+e+">",n=n.getDirection()),(e=t&&t.dir)&&(n=/^(ltr|rtl|auto)$/i.test(e)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o,n)},goog.html.SafeHtml.stringifyAttributes=function(e,t){var r="";if(t)for(var n in t){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(n))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Invalid attribute name "'+n+'".':"");var o=t[n];null!=o&&(r+=" "+goog.html.SafeHtml.getAttrNameAndValue_(e,n,o))}return r},goog.html.SafeHtml.combineAttributes=function(e,t,r){var n,o={};for(n in e)goog.asserts.assert(n.toLowerCase()==n,"Must be lower case"),o[n]=e[n];for(n in t)goog.asserts.assert(n.toLowerCase()==n,"Must be lower case"),o[n]=t[n];if(r)for(n in r){var s=n.toLowerCase();if(s in e)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot override "'+s+'" attribute, got "'+n+'" with value "'+r[n]+'"':"");s in t&&delete o[s],o[n]=r[n]}return o},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(e,t,r){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(t,r||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(e,t,r){e.insertAdjacentHTML(t,goog.html.SafeHtml.unwrapTrustedHTML(r))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue((function(){if(goog.DEBUG&&"undefined"==typeof document)return!1;var e=document.createElement("div"),t=document.createElement("div");return t.appendChild(document.createElement("div")),e.appendChild(t),!(goog.DEBUG&&!e.firstChild||(t=e.firstChild.firstChild,e.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),t.parentElement))})),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(e,t){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;e.lastChild;)e.removeChild(e.lastChild);e.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setInnerHtml=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var r=e.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[r])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+e.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(e,t)},goog.dom.safe.setOuterHtml=function(e,t){e.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setFormElementAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLFormElement(e).action=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setButtonFormAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLButtonElement(e).formAction=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setInputFormAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLInputElement(e).formAction=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setStyle=function(e,t){e.style.cssText=goog.html.SafeStyle.unwrap(t)},goog.dom.safe.documentWrite=function(e,t){e.write(goog.html.SafeHtml.unwrapTrustedHTML(t))},goog.dom.safe.setAnchorHref=function(e,t){goog.dom.asserts.assertIsHTMLAnchorElement(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.href=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setImageSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLImageElement(e),!(t instanceof goog.html.SafeUrl)){var r=/^data:image\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,r)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setAudioSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLAudioElement(e),!(t instanceof goog.html.SafeUrl)){var r=/^data:audio\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,r)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setVideoSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLVideoElement(e),!(t instanceof goog.html.SafeUrl)){var r=/^data:video\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,r)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setEmbedSrc=function(e,t){goog.dom.asserts.assertIsHTMLEmbedElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t)},goog.dom.safe.setFrameSrc=function(e,t){goog.dom.asserts.assertIsHTMLFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrcdoc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setLinkHrefAndRel=function(e,t,r){goog.dom.asserts.assertIsHTMLLinkElement(e),e.rel=r,goog.string.internal.caseInsensitiveContains(r,"stylesheet")?(goog.asserts.assert(t instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),e.href=goog.html.TrustedResourceUrl.unwrap(t)):e.href=t instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(t):t instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(t):goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitizeAssertUnchanged(t))},goog.dom.safe.setObjectData=function(e,t){goog.dom.asserts.assertIsHTMLObjectElement(e),e.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t)},goog.dom.safe.setScriptSrc=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t),(t=goog.getScriptNonce())&&e.setAttribute("nonce",t)},goog.dom.safe.setScriptContent=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.text=goog.html.SafeScript.unwrapTrustedScript(t),(t=goog.getScriptNonce())&&e.setAttribute("nonce",t)},goog.dom.safe.setLocationHref=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.href=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.assignLocation=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.assign(goog.html.SafeUrl.unwrap(t))},goog.dom.safe.replaceLocation=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.replace(goog.html.SafeUrl.unwrap(t))},goog.dom.safe.openInWindow=function(e,t,r,n,o){return e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),t=t||goog.global,r=r instanceof goog.string.Const?goog.string.Const.unwrap(r):r||"",t.open(goog.html.SafeUrl.unwrap(e),r,n,o)},goog.dom.safe.parseFromStringHtml=function(e,t){return goog.dom.safe.parseFromString(e,t,"text/html")},goog.dom.safe.parseFromString=function(e,t,r){return e.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(t),r)},goog.dom.safe.createImageFromBlob=function(e){if(!/^image\/.*/g.test(e.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var t=goog.global.URL.createObjectURL(e);return(e=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(t)},goog.dom.safe.setImageSrc(e,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),t)),e},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:" "},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(e,t){for(var r=e.split("%s"),n="",o=Array.prototype.slice.call(arguments,1);o.length&&1<r.length;)n+=r.shift()+o.shift();return n+r.join("%s")},goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(e){return 0==e.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)},goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},goog.string.isSpace=function(e){return" "==e},goog.string.isUnicodeChar=function(e){return 1==e.length&&" "<=e&&"~">=e||""<=e&&"�">=e},goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(e,t,r){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var n=e.toLowerCase().match(r),o=t.toLowerCase().match(r),s=Math.min(n.length,o.length),i=0;i<s;i++){r=n[i];var a=o[i];if(r!=a)return e=parseInt(r,10),!isNaN(e)&&(t=parseInt(a,10),!isNaN(t)&&e-t)?e-t:r<a?-1:1}return n.length!=o.length?n.length-o.length:e<t?-1:1},goog.string.intAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\D+/g)},goog.string.floatAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(e){return encodeURIComponent(String(e))},goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(e,t){return e=goog.string.internal.htmlEscape(e,t),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;")),e},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},n=t?t.createElement("div"):goog.global.document.createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,(function(e,t){var o=r[e];return o||("#"==t.charAt(0)&&(t=Number("0"+t.substr(1)),isNaN(t)||(o=String.fromCharCode(t))),o||(goog.dom.safe.setInnerHtml(n,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),e+" ")),o=n.firstChild.nodeValue.slice(0,-1)),r[e]=o)}))},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,(function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return"#"!=t.charAt(0)||(t=Number("0"+t.substr(1)),isNaN(t))?e:String.fromCharCode(t)}}))},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(e,t){for(var r=t.length,n=0;n<r;n++){var o=1==r?t:t.charAt(n);if(e.charAt(0)==o&&e.charAt(e.length-1)==o)return e.substring(1,e.length-1)}return e},goog.string.truncate=function(e,t,r){return r&&(e=goog.string.unescapeEntities(e)),e.length>t&&(e=e.substring(0,t-3)+"..."),r&&(e=goog.string.htmlEscape(e)),e},goog.string.truncateMiddle=function(e,t,r,n){if(r&&(e=goog.string.unescapeEntities(e)),n&&e.length>t){n>t&&(n=t);var o=e.length-n;e=e.substring(0,t-n)+"..."+e.substring(o)}else e.length>t&&(n=Math.floor(t/2),o=e.length-n,e=e.substring(0,n+t%2)+"..."+e.substring(o));return r&&(e=goog.string.htmlEscape(e)),e},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(e){e=String(e);for(var t=['"'],r=0;r<e.length;r++){var n=e.charAt(r),o=n.charCodeAt(0);t[r+1]=goog.string.specialEscapeChars_[n]||(31<o&&127>o?n:goog.string.escapeChar(n))}return t.push('"'),t.join("")},goog.string.escapeString=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=goog.string.escapeChar(e.charAt(r));return t.join("")},goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t=e.charCodeAt(0);if(31<t&&127>t)var r=e;else 256>t?(r="\\x",(16>t||256<t)&&(r+="0")):(r="\\u",4096>t&&(r+="0")),r+=t.toString(16).toUpperCase();return goog.string.jsEscapeCache_[e]=r},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},goog.string.removeAt=function(e,t,r){var n=e;return 0<=t&&t<e.length&&0<r&&(n=e.substr(0,t)+e.substr(t+r,e.length-t-r)),n},goog.string.remove=function(e,t){return e.replace(t,"")},goog.string.removeAll=function(e,t){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,"")},goog.string.replaceAll=function(e,t,r){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,r.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(e,t){return e.repeat(t)}:function(e,t){return Array(t+1).join(e)},goog.string.padNumber=function(e,t,r){return-1==(r=(e=void 0!==r?e.toFixed(r):String(e)).indexOf("."))&&(r=e.length),goog.string.repeat("0",Math.max(0,t-r))+e},goog.string.makeSafe=function(e){return null==e?"":String(e)},goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(e){for(var t=0,r=0;r<e.length;++r)t=31*t+e.charCodeAt(r)>>>0;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t},goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,(function(e,t){return t.toUpperCase()}))},goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(e,t){return t="string"==typeof t?goog.string.regExpEscape(t):"\\s",e.replace(new RegExp("(^"+(t?"|["+t+"]+":"")+")([a-z])","g"),(function(e,t,r){return t+r.toUpperCase()}))},goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()},goog.string.parseInt=function(e){return isFinite(e)&&(e=String(e)),"string"==typeof e?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN},goog.string.splitLimit=function(e,t,r){e=e.split(t);for(var n=[];0<r&&e.length;)n.push(e.shift()),r--;return e.length&&n.push(e.join(t)),n},goog.string.lastComponent=function(e,t){if(!t)return e;"string"==typeof t&&(t=[t]);for(var r=-1,n=0;n<t.length;n++)if(""!=t[n]){var o=e.lastIndexOf(t[n]);o>r&&(r=o)}return-1==r?e:e.slice(r+1)},goog.string.editDistance=function(e,t){var r=[],n=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var o=0;o<t.length+1;o++)r[o]=o;for(o=0;o<e.length;o++){n[0]=o+1;for(var s=0;s<t.length;s++)n[s+1]=Math.min(n[s]+1,r[s+1]+1,r[s]+Number(e[o]!=t[s]));for(s=0;s<r.length;s++)r[s]=n[s]}return n[t.length]},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){e=goog.labs.userAgent.util.extractVersionTuples(e);var t,r=goog.labs.userAgent.engine.getEngineTuple_(e);if(r)return"Gecko"==r[0]?goog.labs.userAgent.engine.getVersionForKey_(e,"Firefox"):r[1];if((e=e[0])&&(t=e[2])&&(t=/Trident\/([^\s;]+)/.exec(t)))return t[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1];for(var t=0;t<e.length;t++){var r=e[t];if("Edge"==r[0])return r}},goog.labs.userAgent.engine.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)},goog.labs.userAgent.engine.getVersionForKey_=function(e,t){return(e=goog.array.find(e,(function(e){return t==e[0]})))&&e[1]||""},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t="";return goog.labs.userAgent.platform.isWindows()?t=(e=(t=/Windows (?:NT|Phone) ([0-9.]+)/).exec(e))?e[1]:"0.0":goog.labs.userAgent.platform.isIos()?t=(e=(t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(e))&&e[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?t=(e=(t=/Mac OS X ([0-9_.]+)/).exec(e))?e[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?t=(e=(t=/(?:KaiOS)\/(\S+)/i).exec(e))&&e[1]:goog.labs.userAgent.platform.isAndroid()?t=(e=(t=/Android\s+([^\);]+)(\)|;)/).exec(e))&&e[1]:goog.labs.userAgent.platform.isChromeOS()&&(t=(e=(t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(e))&&e[1]),t||""},goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)},goog.reflect={},goog.reflect.object=function(e,t){return t},goog.reflect.objectProperty=function(e,t){return e},goog.reflect.sinkValue=function(e){return goog.reflect.sinkValue[" "](e),e},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(e,t){try{return goog.reflect.sinkValue(e[t]),!0}catch(e){}return!1},goog.reflect.cache=function(e,t,r,n){return n=n?n(t):t,Object.prototype.hasOwnProperty.call(e,n)?e[n]:e[n]=r(t)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigatorTyped();return e&&e.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigatorTyped();return!!e&&goog.string.contains(e.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.determineVersion_=function(){var e="",t=goog.userAgent.getVersionRegexResult_();return t&&(e=t?t[1]:""),goog.userAgent.IE&&null!=(t=goog.userAgent.getDocumentMode_())&&t>parseFloat(e)?String(t):e},goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(e):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(e):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(e):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(e):void 0},goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,e,(function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,e)}))},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(e){return Number(goog.userAgent.DOCUMENT_MODE)>=e},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE)return goog.userAgent.getDocumentMode_()||parseInt(goog.userAgent.VERSION,10)||void 0}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()};goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(e){return goog.string.contains(goog.crypt.base64.paddingChars_,e)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||"function"==typeof goog.global.btoa,goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&"function"==typeof goog.global.atob,goog.crypt.base64.encodeByteArray=function(e,t){goog.asserts.assert(goog.isArrayLike(e),"encodeByteArray takes an array as a parameter"),void 0===t&&(t=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),t=goog.crypt.base64.byteToCharMaps_[t];for(var r=[],n=0;n<e.length;n+=3){var o=e[n],s=n+1<e.length,i=s?e[n+1]:0,a=n+2<e.length,c=a?e[n+2]:0,l=o>>2;o=(3&o)<<4|i>>4,i=(15&i)<<2|c>>6,c&=63,a||(c=64,s||(i=64)),r.push(t[l],t[o],t[i]||"",t[c]||"")}return r.join("")},goog.crypt.base64.encodeString=function(e,t){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!t?goog.global.btoa(e):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(e),t)},goog.crypt.base64.decodeString=function(e,t){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!t)return goog.global.atob(e);var r="";return goog.crypt.base64.decodeStringInternal_(e,(function(e){r+=String.fromCharCode(e)})),r},goog.crypt.base64.decodeStringToByteArray=function(e,t){var r=[];return goog.crypt.base64.decodeStringInternal_(e,(function(e){r.push(e)})),r},goog.crypt.base64.decodeStringToUint8Array=function(e){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var t=e.length,r=3*t/4;r%3?r=Math.floor(r):goog.crypt.base64.isPadding_(e[t-1])&&(r=goog.crypt.base64.isPadding_(e[t-2])?r-2:r-1);var n=new Uint8Array(r),o=0;return goog.crypt.base64.decodeStringInternal_(e,(function(e){n[o++]=e})),n.subarray(0,o)},goog.crypt.base64.decodeStringInternal_=function(e,t){function r(t){for(;n<e.length;){var r=e.charAt(n++),o=goog.crypt.base64.charToByteMap_[r];if(null!=o)return o;if(!goog.string.isEmptyOrWhitespace(r))throw Error("Unknown base64 encoding at char: "+r)}return t}goog.crypt.base64.init_();for(var n=0;;){var o=r(-1),s=r(0),i=r(64),a=r(64);if(64===a&&-1===o)break;t(o<<2|s>>4),64!=i&&(t(s<<4&240|i>>2),64!=a&&t(i<<6&192|a))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var e=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),t=["+/=","+/","-_=","-_.","-_"],r=0;5>r;r++){var n=e.concat(t[r].split(""));goog.crypt.base64.byteToCharMaps_[r]=n;for(var o=0;o<n.length;o++){var s=n[o],i=goog.crypt.base64.charToByteMap_[s];void 0===i?goog.crypt.base64.charToByteMap_[s]=o:goog.asserts.assert(i===o)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(e){var t=e>>>0;e=Math.floor((e-t)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=t,jspb.utils.split64High=e},jspb.utils.splitInt64=function(e){var t=0>e,r=(e=Math.abs(e))>>>0;e=Math.floor((e-r)/jspb.BinaryConstants.TWO_TO_32),e>>>=0,t&&(e=~e>>>0,4294967295<(r=1+(~r>>>0))&&(r=0,4294967295<++e&&(e=0))),jspb.utils.split64Low=r,jspb.utils.split64High=e},jspb.utils.splitZigzag64=function(e){var t=0>e;e=2*Math.abs(e),jspb.utils.splitUint64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;t&&(0==e?0==r?r=e=4294967295:(r--,e=4294967295):e--),jspb.utils.split64Low=e,jspb.utils.split64High=r},jspb.utils.splitFloat32=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))0<1/e?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(e))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(e>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|2139095040)>>>0;else if(e<jspb.BinaryConstants.FLOAT32_MIN)e=Math.round(e/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|e)>>>0;else{var r=Math.floor(Math.log(e)/Math.LN2);e*=Math.pow(2,-r),16777216<=(e=Math.round(e*jspb.BinaryConstants.TWO_TO_23))&&++r,jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|r+127<<23|8388607&e)>>>0}},jspb.utils.splitFloat64=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))jspb.utils.split64High=0<1/e?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(e))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(e>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(t<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(e<jspb.BinaryConstants.FLOAT64_MIN){var r=e/Math.pow(2,-1074);e=r/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(t<<31|e)>>>0,jspb.utils.split64Low=r>>>0}else{var n=0;if(2<=(r=e))for(;2<=r&&1023>n;)n++,r/=2;else for(;1>r&&-1022<n;)r*=2,n--;e=(r=e*Math.pow(2,-n))*jspb.BinaryConstants.TWO_TO_20&1048575,r=r*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(t<<31|n+1023<<20|e)>>>0,jspb.utils.split64Low=r}},jspb.utils.splitHash64=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),o=e.charCodeAt(3),s=e.charCodeAt(4),i=e.charCodeAt(5),a=e.charCodeAt(6);e=e.charCodeAt(7),jspb.utils.split64Low=t+(r<<8)+(n<<16)+(o<<24)>>>0,jspb.utils.split64High=s+(i<<8)+(a<<16)+(e<<24)>>>0},jspb.utils.joinUint64=function(e,t){return t*jspb.BinaryConstants.TWO_TO_32+(e>>>0)},jspb.utils.joinInt64=function(e,t){var r=2147483648&t;return r&&(t=~t>>>0,0==(e=1+~e>>>0)&&(t=t+1>>>0)),e=jspb.utils.joinUint64(e,t),r?-e:e},jspb.utils.toZigzag64=function(e,t,r){var n=t>>31;return r(e<<1^n,(t<<1|e>>>31)^n)},jspb.utils.joinZigzag64=function(e,t){return jspb.utils.fromZigzag64(e,t,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(e,t,r){var n=-(1&e);return r((e>>>1|t<<31)^n,t>>>1^n)},jspb.utils.joinFloat32=function(e,t){t=2*(e>>31)+1;var r=e>>>23&255;return e&=8388607,255==r?e?NaN:1/0*t:0==r?t*Math.pow(2,-149)*e:t*Math.pow(2,r-150)*(e+Math.pow(2,23))},jspb.utils.joinFloat64=function(e,t){var r=2*(t>>31)+1,n=t>>>20&2047;return e=jspb.BinaryConstants.TWO_TO_32*(1048575&t)+e,2047==n?e?NaN:1/0*r:0==n?r*Math.pow(2,-1074)*e:r*Math.pow(2,n-1075)*(e+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(e,t){return String.fromCharCode(e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255,t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(e,t){function r(e,t){return e=e?String(e):"",t?"0000000".slice(e.length)+e:e}if(2097151>=t)return""+jspb.utils.joinUint64(e,t);var n=(e>>>24|t<<8)>>>0&16777215;return e=(16777215&e)+6777216*n+6710656*(t=t>>16&65535),n+=8147497*t,t*=2,1e7<=e&&(n+=Math.floor(e/1e7),e%=1e7),1e7<=n&&(t+=Math.floor(n/1e7),n%=1e7),r(t,0)+r(n,t)+r(e,1)},jspb.utils.joinSignedDecimalString=function(e,t){var r=2147483648&t;return r&&(t=~t+(0==(e=1+~e>>>0)?1:0)>>>0),e=jspb.utils.joinUnsignedDecimalString(e,t),r?"-"+e:e},jspb.utils.hash64ToDecimalString=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;return t?jspb.utils.joinSignedDecimalString(e,r):jspb.utils.joinUnsignedDecimalString(e,r)},jspb.utils.hash64ArrayToDecimalStrings=function(e,t){for(var r=Array(e.length),n=0;n<e.length;n++)r[n]=jspb.utils.hash64ToDecimalString(e[n],t);return r},jspb.utils.decimalStringToHash64=function(e){function t(e,t){for(var r=0;8>r&&(1!==e||0<t);r++)t=e*n[r]+t,n[r]=255&t,t>>>=8}goog.asserts.assert(0<e.length);var r=!1;"-"===e[0]&&(r=!0,e=e.slice(1));for(var n=[0,0,0,0,0,0,0,0],o=0;o<e.length;o++)t(10,e.charCodeAt(o)-jspb.utils.ZERO_CHAR_CODE_);return r&&(function(){for(var e=0;8>e;e++)n[e]=255&~n[e]}(),t(1,1)),goog.crypt.byteArrayToString(n)},jspb.utils.splitDecimalString=function(e){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e))},jspb.utils.toHexDigit_=function(e){return String.fromCharCode(10>e?jspb.utils.ZERO_CHAR_CODE_+e:jspb.utils.A_CHAR_CODE_-10+e)},jspb.utils.fromHexCharCode_=function(e){return e>=jspb.utils.A_CHAR_CODE_?e-jspb.utils.A_CHAR_CODE_+10:e-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(e){var t=Array(18);t[0]="0",t[1]="x";for(var r=0;8>r;r++){var n=e.charCodeAt(7-r);t[2*r+2]=jspb.utils.toHexDigit_(n>>4),t[2*r+3]=jspb.utils.toHexDigit_(15&n)}return t.join("")},jspb.utils.hexStringToHash64=function(e){e=e.toLowerCase(),goog.asserts.assert(18==e.length),goog.asserts.assert("0"==e[0]),goog.asserts.assert("x"==e[1]);for(var t="",r=0;8>r;r++){var n=jspb.utils.fromHexCharCode_(e.charCodeAt(2*r+2)),o=jspb.utils.fromHexCharCode_(e.charCodeAt(2*r+3));t=String.fromCharCode(16*n+o)+t}return t},jspb.utils.hash64ToNumber=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;return t?jspb.utils.joinInt64(e,r):jspb.utils.joinUint64(e,r)},jspb.utils.numberToHash64=function(e){return jspb.utils.splitInt64(e),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(e,t,r){for(var n=0,o=t;o<r;o++)n+=e[o]>>7;return r-t-n},jspb.utils.countVarintFields=function(e,t,r,n){var o=0;if(128>(n=8*n+jspb.BinaryConstants.WireType.VARINT))for(;t<r&&e[t++]==n;)for(o++;;){var s=e[t++];if(0==(128&s))break}else for(;t<r;){for(s=n;128<s;){if(e[t]!=(127&s|128))return o;t++,s>>=7}if(e[t++]!=s)break;for(o++;0!=(128&(s=e[t++])););}return o},jspb.utils.countFixedFields_=function(e,t,r,n,o){var s=0;if(128>n)for(;t<r&&e[t++]==n;)s++,t+=o;else for(;t<r;){for(var i=n;128<i;){if(e[t++]!=(127&i|128))return s;i>>=7}if(e[t++]!=i)break;s++,t+=o}return s},jspb.utils.countFixed32Fields=function(e,t,r,n){return jspb.utils.countFixedFields_(e,t,r,8*n+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(e,t,r,n){return jspb.utils.countFixedFields_(e,t,r,8*n+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(e,t,r,n){var o=0;for(n=8*n+jspb.BinaryConstants.WireType.DELIMITED;t<r;){for(var s=n;128<s;){if(e[t++]!=(127&s|128))return o;s>>=7}if(e[t++]!=s)break;o++;for(var i=0,a=1;i+=(127&(s=e[t++]))*a,a*=128,0!=(128&s););t+=i}return o},jspb.utils.debugBytesToTextFormat=function(e){var t='"';if(e){e=jspb.utils.byteSourceToUint8Array(e);for(var r=0;r<e.length;r++)t+="\\x",16>e[r]&&(t+="0"),t+=e[r].toString(16)}return t+'"'},jspb.utils.debugScalarToTextFormat=function(e){return"string"==typeof e?goog.string.quote(e):e.toString()},jspb.utils.stringToByteArray=function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++){var n=e.charCodeAt(r);if(255<n)throw Error("Conversion error: string contains codepoint outside of byte range");t[r]=n}return t},jspb.utils.byteSourceToUint8Array=function(e){return e.constructor===Uint8Array?e:e.constructor===ArrayBuffer||e.constructor===Array?new Uint8Array(e):e.constructor===String?goog.crypt.base64.decodeStringToUint8Array(e):e instanceof Uint8Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):(goog.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(e,t,r){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,e&&this.setBlock(e,t,r)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(e,t,r){if(jspb.BinaryDecoder.instanceCache_.length){var n=jspb.BinaryDecoder.instanceCache_.pop();return e&&n.setBlock(e,t,r),n}return new jspb.BinaryDecoder(e,t,r)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(e,t,r){this.bytes_=jspb.utils.byteSourceToUint8Array(e),this.start_=void 0!==t?t:0,this.end_=void 0!==r?this.start_+r:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(e){this.end_=e},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(e){this.cursor_=e},jspb.BinaryDecoder.prototype.advance=function(e){this.cursor_+=e,goog.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(e){for(var t=128,r=0,n=0,o=0;4>o&&128<=t;o++)r|=(127&(t=this.bytes_[this.cursor_++]))<<7*o;if(128<=t&&(r|=(127&(t=this.bytes_[this.cursor_++]))<<28,n|=(127&t)>>4),128<=t)for(o=0;5>o&&128<=t;o++)n|=(127&(t=this.bytes_[this.cursor_++]))<<7*o+3;if(128>t)return e(r>>>0,n>>>0);goog.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(e){return this.readSplitVarint64((function(t,r){return jspb.utils.fromZigzag64(t,r,e)}))},jspb.BinaryDecoder.prototype.readSplitFixed64=function(e){var t=this.bytes_,r=this.cursor_;this.cursor_+=8;for(var n=0,o=0,s=r+7;s>=r;s--)n=n<<8|t[s],o=o<<8|t[s+4];return e(n,o)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(e){for(;128<e;)this.cursor_--,e>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var e=this.bytes_,t=e[this.cursor_+0],r=127&t;return 128>t?(this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(t=e[this.cursor_+1]))<<7,128>t?(this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(t=e[this.cursor_+2]))<<14,128>t?(this.cursor_+=3,goog.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(t=e[this.cursor_+3]))<<21,128>t?(this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),r):(r|=(15&(t=e[this.cursor_+4]))<<28,128>t?(this.cursor_+=5,goog.asserts.assert(this.cursor_<=this.end_),r>>>0):(this.cursor_+=5,128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&goog.asserts.assert(!1),goog.asserts.assert(this.cursor_<=this.end_),r)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=jspb.BinaryDecoder.prototype.readUnsignedVarint32,jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var e=this.readUnsignedVarint32();return e>>>1^-(1&e)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),e},jspb.BinaryDecoder.prototype.readUint16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],n=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8|r<<16|n<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUint64(e,t)},jspb.BinaryDecoder.prototype.readUint64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUnsignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readInt8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),e<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],n=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8|r<<16|n<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinInt64(e,t)},jspb.BinaryDecoder.prototype.readInt64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinSignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readFloat=function(){var e=this.readUint32();return jspb.utils.joinFloat32(e,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinFloat64(e,t)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(e){var t=this.bytes_,r=this.cursor_;e=r+e;for(var n=[],o="";r<e;){var s=t[r++];if(128>s)n.push(s);else{if(192>s)continue;if(224>s){var i=t[r++];n.push((31&s)<<6|63&i)}else if(240>s){i=t[r++];var a=t[r++];n.push((15&s)<<12|(63&i)<<6|63&a)}else 248>s&&(s=(7&s)<<18|(63&(i=t[r++]))<<12|(63&(a=t[r++]))<<6|63&t[r++],s-=65536,n.push(55296+(s>>10&1023),56320+(1023&s)))}8192<=n.length&&(o+=String.fromCharCode.apply(null,n),n.length=0)}return o+=goog.crypt.byteArrayToString(n),this.cursor_=r,o},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var e=this.readUnsignedVarint32();return this.readString(e)},jspb.BinaryDecoder.prototype.readBytes=function(e){if(0>e||this.cursor_+e>this.bytes_.length)return this.error_=!0,goog.asserts.fail("Invalid byte length!"),new Uint8Array(0);var t=this.bytes_.subarray(this.cursor_,this.cursor_+e);return this.cursor_+=e,goog.asserts.assert(this.cursor_<=this.end_),t},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var e=this.bytes_,t=this.cursor_,r=e[t+0],n=e[t+1],o=e[t+2],s=e[t+3],i=e[t+4],a=e[t+5],c=e[t+6];return e=e[t+7],this.cursor_+=8,String.fromCharCode(r,n,o,s,i,a,c,e)},jspb.BinaryReader=function(e,t,r){this.decoder_=jspb.BinaryDecoder.alloc(e,t,r),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(e,t,r){if(jspb.BinaryReader.instanceCache_.length){var n=jspb.BinaryReader.instanceCache_.pop();return e&&n.decoder_.setBlock(e,t,r),n}return new jspb.BinaryReader(e,t,r)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isDelimited=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED},jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(e,t,r){this.decoder_.setBlock(e,t,r),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(e){this.decoder_.advance(e)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return goog.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var e=this.decoder_.readUnsignedVarint32(),t=e>>>3;return(e&=7)!=jspb.BinaryConstants.WireType.VARINT&&e!=jspb.BinaryConstants.WireType.FIXED32&&e!=jspb.BinaryConstants.WireType.FIXED64&&e!=jspb.BinaryConstants.WireType.DELIMITED&&e!=jspb.BinaryConstants.WireType.START_GROUP&&e!=jspb.BinaryConstants.WireType.END_GROUP?(goog.asserts.fail("Invalid wire type: %s (at position %s)",e,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=t,this.nextWireType_=e,!0)},jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var e=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==e;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(goog.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)goog.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var e=this.decoder_.readUnsignedVarint32();this.decoder_.advance(e)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(goog.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(goog.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var e=this.nextField_;;){if(!this.nextField()){goog.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=e&&(goog.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:goog.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(e,t){null===this.readCallbacks_&&(this.readCallbacks_={}),goog.asserts.assert(!this.readCallbacks_[e]),this.readCallbacks_[e]=t},jspb.BinaryReader.prototype.runReadCallback=function(e){return goog.asserts.assert(null!==this.readCallbacks_),e=this.readCallbacks_[e],goog.asserts.assert(e),e(this)},jspb.BinaryReader.prototype.readAny=function(e){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(e);var t=jspb.BinaryConstants.FieldType;switch(e){case t.DOUBLE:return this.readDouble();case t.FLOAT:return this.readFloat();case t.INT64:return this.readInt64();case t.UINT64:return this.readUint64();case t.INT32:return this.readInt32();case t.FIXED64:return this.readFixed64();case t.FIXED32:return this.readFixed32();case t.BOOL:return this.readBool();case t.STRING:return this.readString();case t.GROUP:goog.asserts.fail("Group field type not supported in readAny()");case t.MESSAGE:goog.asserts.fail("Message field type not supported in readAny()");case t.BYTES:return this.readBytes();case t.UINT32:return this.readUint32();case t.ENUM:return this.readEnum();case t.SFIXED32:return this.readSfixed32();case t.SFIXED64:return this.readSfixed64();case t.SINT32:return this.readSint32();case t.SINT64:return this.readSint64();case t.FHASH64:return this.readFixedHash64();case t.VHASH64:return this.readVarintHash64();default:goog.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(e,t){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var r=this.decoder_.getEnd(),n=this.decoder_.readUnsignedVarint32();n=this.decoder_.getCursor()+n,this.decoder_.setEnd(n),t(e,this),this.decoder_.setCursor(n),this.decoder_.setEnd(r)},jspb.BinaryReader.prototype.readGroup=function(e,t,r){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),goog.asserts.assert(this.nextField_==e),r(t,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(goog.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},jspb.BinaryReader.prototype.getFieldDecoder=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32(),t=this.decoder_.getCursor(),r=t+e;return e=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),t,e),this.decoder_.setCursor(r),e},jspb.BinaryReader.prototype.readInt32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},jspb.BinaryReader.prototype.readInt32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readInt64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readUint32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},jspb.BinaryReader.prototype.readUint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},jspb.BinaryReader.prototype.readSint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},jspb.BinaryReader.prototype.readSint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},jspb.BinaryReader.prototype.readFixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},jspb.BinaryReader.prototype.readFixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},jspb.BinaryReader.prototype.readSfixed32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},jspb.BinaryReader.prototype.readSfixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},jspb.BinaryReader.prototype.readDouble=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},jspb.BinaryReader.prototype.readBool=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readEnum=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readString=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(e)},jspb.BinaryReader.prototype.readBytes=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(e)},jspb.BinaryReader.prototype.readVarintHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(e){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(e)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(e){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64((function(t,r){return jspb.utils.fromZigzag64(t,r,e)}))},jspb.BinaryReader.prototype.readFixedHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(e){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(e)},jspb.BinaryReader.prototype.readPackedField_=function(e){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var t=this.decoder_.readUnsignedVarint32();t=this.decoder_.getCursor()+t;for(var r=[];this.decoder_.getCursor()<t;)r.push(e.call(this.decoder_));return r},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var e=this.buffer_;return this.buffer_=[],e},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(e,t){for(goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(t==Math.floor(t)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32);0<t||127<e;)this.buffer_.push(127&e|128),e=(e>>>7|t<<25)>>>0,t>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(e,t){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(t==Math.floor(t)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(e),this.writeUint32(t)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(e){for(goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);127<e;)this.buffer_.push(127&e|128),e>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(e){if(goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),0<=e)this.writeUnsignedVarint32(e);else{for(var t=0;9>t;t++)this.buffer_.push(127&e|128),e>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((e<<1^e>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(e){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(e))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(e){var t=this;jspb.utils.splitHash64(e),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,(function(e,r){t.writeSplitVarint64(e>>>0,r>>>0)}))},jspb.BinaryEncoder.prototype.writeUint8=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&256>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&65536>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(-128<=e&&128>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(-32768<=e&&32768>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(+e>=-jspb.BinaryConstants.TWO_TO_63&&+e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(e){goog.asserts.assert(1/0===e||-1/0===e||isNaN(e)||e>=-jspb.BinaryConstants.FLOAT32_MAX&&e<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(e),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(e){goog.asserts.assert(1/0===e||-1/0===e||isNaN(e)||e>=-jspb.BinaryConstants.FLOAT64_MAX&&e<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(e){goog.asserts.assert("boolean"==typeof e||"number"==typeof e),this.buffer_.push(e?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(e)},jspb.BinaryEncoder.prototype.writeBytes=function(e){this.buffer_.push.apply(this.buffer_,e)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(e){jspb.utils.splitHash64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(e){jspb.utils.splitHash64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(e){var t=this.buffer_.length;goog.asserts.assertString(e);for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);if(128>n)this.buffer_.push(n);else if(2048>n)this.buffer_.push(n>>6|192),this.buffer_.push(63&n|128);else if(65536>n)if(55296<=n&&56319>=n&&r+1<e.length){var o=e.charCodeAt(r+1);56320<=o&&57343>=o&&(n=1024*(n-55296)+o-56320+65536,this.buffer_.push(n>>18|240),this.buffer_.push(n>>12&63|128),this.buffer_.push(n>>6&63|128),this.buffer_.push(63&n|128),r++)}else this.buffer_.push(n>>12|224),this.buffer_.push(n>>6&63|128),this.buffer_.push(63&n|128)}return this.buffer_.length-t},jspb.arith={},jspb.arith.UInt64=function(e,t){this.lo=e,this.hi=t},jspb.arith.UInt64.prototype.cmp=function(e){return this.hi<e.hi||this.hi==e.hi&&this.lo<e.lo?-1:this.hi==e.hi&&this.lo==e.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return 0==this.lo&&0==this.hi},jspb.arith.UInt64.prototype.add=function(e){return new jspb.arith.UInt64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(e){return new jspb.arith.UInt64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(e,t){var r=65535&e,n=65535&t,o=t>>>16;for(t=r*n+65536*(r*o&65535)+65536*((e>>>=16)*n&65535),r=e*o+(r*o>>>16)+(e*n>>>16);4294967296<=t;)t-=4294967296,r+=1;return new jspb.arith.UInt64(t>>>0,r>>>0)},jspb.arith.UInt64.prototype.mul=function(e){var t=jspb.arith.UInt64.mul32x32(this.lo,e);return(e=jspb.arith.UInt64.mul32x32(this.hi,e)).hi=e.lo,e.lo=0,t.add(e)},jspb.arith.UInt64.prototype.div=function(e){if(0==e)return[];var t=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(this.lo,this.hi);e=new jspb.arith.UInt64(e,0);for(var n=new jspb.arith.UInt64(1,0);!e.msb();)e=e.leftShift(),n=n.leftShift();for(;!n.zero();)0>=e.cmp(r)&&(t=t.add(n),r=r.sub(e)),e=e.rightShift(),n=n.rightShift();return[t,r]},jspb.arith.UInt64.prototype.toString=function(){for(var e="",t=this;!t.zero();){var r=(t=t.div(10))[0];e=t[1].lo+e,t=r}return""==e&&(e="0"),e},jspb.arith.UInt64.fromString=function(e){for(var t=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(0,0),n=0;n<e.length;n++){if("0">e[n]||"9"<e[n])return null;var o=parseInt(e[n],10);r.lo=o,t=t.mul(10).add(r)}return t},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(e,t){this.lo=e,this.hi=t},jspb.arith.Int64.prototype.add=function(e){return new jspb.arith.Int64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(e){return new jspb.arith.Int64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var e=0!=(2147483648&this.hi),t=new jspb.arith.UInt64(this.lo,this.hi);return e&&(t=new jspb.arith.UInt64(0,0).sub(t)),(e?"-":"")+t.toString()},jspb.arith.Int64.fromString=function(e){var t=0<e.length&&"-"==e[0];return t&&(e=e.substring(1)),null===(e=jspb.arith.UInt64.fromString(e))?null:(t&&(e=new jspb.arith.UInt64(0,0).sub(e)),new jspb.arith.Int64(e.lo,e.hi))},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(e){var t=this.encoder_.end();this.blocks_.push(t),this.blocks_.push(e),this.totalLength_+=t.length+e.length},jspb.BinaryWriter.prototype.beginDelimited_=function(e){return this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),e=this.encoder_.end(),this.blocks_.push(e),this.totalLength_+=e.length,e.push(this.totalLength_),e},jspb.BinaryWriter.prototype.endDelimited_=function(e){var t=e.pop();for(t=this.totalLength_+this.encoder_.length()-t,goog.asserts.assert(0<=t);127<t;)e.push(127&t|128),t>>>=7,this.totalLength_++;e.push(t),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(e,t,r){this.appendUint8Array_(e.subarray(t,r))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(e,t,r){null!=e&&null!=t&&null!=r&&this.writeSerializedMessage(e,t,r)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){goog.asserts.assert(0==this.bookmarks_.length);for(var e=new Uint8Array(this.totalLength_+this.encoder_.length()),t=this.blocks_,r=t.length,n=0,o=0;o<r;o++){var s=t[o];e.set(s,n),n+=s.length}return t=this.encoder_.end(),e.set(t,n),n+=t.length,goog.asserts.assert(n==e.length),this.blocks_=[e],e},jspb.BinaryWriter.prototype.getResultBase64String=function(e){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),e)},jspb.BinaryWriter.prototype.beginSubMessage=function(e){this.bookmarks_.push(this.beginDelimited_(e))},jspb.BinaryWriter.prototype.endSubMessage=function(){goog.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(e,t){goog.asserts.assert(1<=e&&e==Math.floor(e)),this.encoder_.writeUnsignedVarint32(8*e+t)},jspb.BinaryWriter.prototype.writeAny=function(e,t,r){var n=jspb.BinaryConstants.FieldType;switch(e){case n.DOUBLE:this.writeDouble(t,r);break;case n.FLOAT:this.writeFloat(t,r);break;case n.INT64:this.writeInt64(t,r);break;case n.UINT64:this.writeUint64(t,r);break;case n.INT32:this.writeInt32(t,r);break;case n.FIXED64:this.writeFixed64(t,r);break;case n.FIXED32:this.writeFixed32(t,r);break;case n.BOOL:this.writeBool(t,r);break;case n.STRING:this.writeString(t,r);break;case n.GROUP:goog.asserts.fail("Group field type not supported in writeAny()");break;case n.MESSAGE:goog.asserts.fail("Message field type not supported in writeAny()");break;case n.BYTES:this.writeBytes(t,r);break;case n.UINT32:this.writeUint32(t,r);break;case n.ENUM:this.writeEnum(t,r);break;case n.SFIXED32:this.writeSfixed32(t,r);break;case n.SFIXED64:this.writeSfixed64(t,r);break;case n.SINT32:this.writeSint32(t,r);break;case n.SINT64:this.writeSint64(t,r);break;case n.FHASH64:this.writeFixedHash64(t,r);break;case n.VHASH64:this.writeVarintHash64(t,r);break;default:goog.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(t))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(t))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(t))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(t))},jspb.BinaryWriter.prototype.writeInt32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeInt32String=function(e,t){null!=t&&(t=parseInt(t,10),goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeInt64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(e,t))},jspb.BinaryWriter.prototype.writeInt64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeUint32=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeUint32String=function(e,t){null!=t&&(t=parseInt(t,10),goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeUint64=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(e,t))},jspb.BinaryWriter.prototype.writeUint64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSint32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(e,t))},jspb.BinaryWriter.prototype.writeSint64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(e,t))},jspb.BinaryWriter.prototype.writeSintHash64=function(e,t){null!=t&&this.writeZigzagVarintHash64_(e,t)},jspb.BinaryWriter.prototype.writeSint64String=function(e,t){null!=t&&this.writeZigzagVarint64String_(e,t)},jspb.BinaryWriter.prototype.writeFixed32=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(t))},jspb.BinaryWriter.prototype.writeFixed64=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(t))},jspb.BinaryWriter.prototype.writeFixed64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(t))},jspb.BinaryWriter.prototype.writeSfixed64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(t))},jspb.BinaryWriter.prototype.writeSfixed64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeFloat=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(t))},jspb.BinaryWriter.prototype.writeDouble=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(t))},jspb.BinaryWriter.prototype.writeBool=function(e,t){null!=t&&(goog.asserts.assert("boolean"==typeof t||"number"==typeof t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(t))},jspb.BinaryWriter.prototype.writeEnum=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},jspb.BinaryWriter.prototype.writeString=function(e,t){null!=t&&(e=this.beginDelimited_(e),this.encoder_.writeString(t),this.endDelimited_(e))},jspb.BinaryWriter.prototype.writeBytes=function(e,t){null!=t&&(t=jspb.utils.byteSourceToUint8Array(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),this.appendUint8Array_(t))},jspb.BinaryWriter.prototype.writeMessage=function(e,t,r){null!=t&&(e=this.beginDelimited_(e),r(t,this),this.endDelimited_(e))},jspb.BinaryWriter.prototype.writeMessageSet=function(e,t,r){null!=t&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e),e=this.beginDelimited_(3),r(t,this),this.endDelimited_(e),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(e,t,r){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),r(t,this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeFixedHash64=function(e,t){null!=t&&(goog.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(t))},jspb.BinaryWriter.prototype.writeVarintHash64=function(e,t){null!=t&&(goog.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(t))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(e,t,r){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t,r)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(e,t,r){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t,r)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(e,t,r){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT);var n=this.encoder_;jspb.utils.toZigzag64(t,r,(function(e,t){n.writeSplitVarint64(e>>>0,t>>>0)}))},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSignedVarint32_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeInt32String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSignedVarint64_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(e,t,r,n){if(null!=t)for(var o=0;o<t.length;o++)this.writeSplitFixed64(e,r(t[o]),n(t[o]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(e,t,r,n){if(null!=t)for(var o=0;o<t.length;o++)this.writeSplitVarint64(e,r(t[o]),n(t[o]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(e,t,r,n){if(null!=t)for(var o=0;o<t.length;o++)this.writeSplitZigzagVarint64(e,r(t[o]),n(t[o]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeInt64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUnsignedVarint32_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUint32String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUnsignedVarint64_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUint64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint32_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSint64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint64_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint64String_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarintHash64_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed32(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed64(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed32(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed64(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFloat(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedDouble=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeDouble(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedBool=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeBool(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedEnum=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeEnum(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedString=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeString(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedBytes=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeBytes(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedMessage=function(e,t,r){if(null!=t)for(var n=0;n<t.length;n++){var o=this.beginDelimited_(e);r(t[n],this),this.endDelimited_(o)}},jspb.BinaryWriter.prototype.writeRepeatedGroup=function(e,t,r){if(null!=t)for(var n=0;n<t.length;n++)this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),r(t[n],this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP)},jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixedHash64(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeVarintHash64(e,t[r])},jspb.BinaryWriter.prototype.writePackedInt32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeSignedVarint32(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeSignedVarint32(parseInt(t[r],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeSignedVarint64(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(e,t,r,n){if(null!=t){e=this.beginDelimited_(e);for(var o=0;o<t.length;o++)this.encoder_.writeSplitFixed64(r(t[o]),n(t[o]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(e,t,r,n){if(null!=t){e=this.beginDelimited_(e);for(var o=0;o<t.length;o++)this.encoder_.writeSplitVarint64(r(t[o]),n(t[o]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(e,t,r,n){if(null!=t){e=this.beginDelimited_(e);for(var o=this.encoder_,s=0;s<t.length;s++)jspb.utils.toZigzag64(r(t[s]),n(t[s]),(function(e,t){o.writeSplitVarint64(e>>>0,t>>>0)}));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++){var n=jspb.arith.Int64.fromString(t[r]);this.encoder_.writeSplitVarint64(n.lo,n.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeUnsignedVarint32(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeUnsignedVarint32(parseInt(t[r],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeUnsignedVarint64(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++){var n=jspb.arith.UInt64.fromString(t[r]);this.encoder_.writeSplitVarint64(n.lo,n.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarint32(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarint64(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(t[r]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarintHash64(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeUint32(t[e])},jspb.BinaryWriter.prototype.writePackedFixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeUint64(t[e])},jspb.BinaryWriter.prototype.writePackedFixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++){var r=jspb.arith.UInt64.fromString(t[e]);this.encoder_.writeSplitFixed64(r.lo,r.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeInt32(t[e])},jspb.BinaryWriter.prototype.writePackedSfixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64(t[e])},jspb.BinaryWriter.prototype.writePackedSfixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64String(t[e])},jspb.BinaryWriter.prototype.writePackedFloat=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeFloat(t[e])},jspb.BinaryWriter.prototype.writePackedDouble=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeDouble(t[e])},jspb.BinaryWriter.prototype.writePackedBool=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),e=0;e<t.length;e++)this.encoder_.writeBool(t[e])},jspb.BinaryWriter.prototype.writePackedEnum=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeEnum(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedFixedHash64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeFixedHash64(t[e])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeVarintHash64(t[r]);this.endDelimited_(e)}},jspb.Map=function(e,t){this.arr_=e,this.valueCtor_=t,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},jspb.Map.prototype.loadFromArray_=function(){for(var e=0;e<this.arr_.length;e++){var t=this.arr_[e],r=t[0];this.map_[r.toString()]=new jspb.Map.Entry_(r,t[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var e,t=this.map_;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var r=t[e].valueWrapper;r&&r.toArray()}}}else{for(this.arr_.length=0,(t=this.stringKeys_()).sort(),e=0;e<t.length;e++){var n=this.map_[t[e]];(r=n.valueWrapper)&&r.toArray(),this.arr_.push([n.key,n.value])}this.arrClean=!0}return this.arr_},jspb.Map.prototype.toObject=function(e,t){for(var r=this.toArray(),n=[],o=0;o<r.length;o++){var s=this.map_[r[o][0].toString()];this.wrapEntry_(s);var i=s.valueWrapper;i?(goog.asserts.assert(t),n.push([s.key,t(e,i)])):n.push([s.key,s.value])}return n},jspb.Map.fromObject=function(e,t,r){t=new jspb.Map([],t);for(var n=0;n<e.length;n++){var o=e[n][0],s=r(e[n][1]);t.set(o,s)}return t},jspb.Map.ArrayIteratorIterable_=function(e){this.idx_=0,this.arr_=e},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},"undefined"!=typeof Symbol&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},jspb.Map.prototype.del=function(e){e=e.toString();var t=this.map_.hasOwnProperty(e);return delete this.map_[e],this.arrClean=!1,t},jspb.Map.prototype.getEntryList=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++){var n=this.map_[t[r]];e.push([n.key,n.value])}return e},jspb.Map.prototype.entries=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++){var n=this.map_[t[r]];e.push([n.key,this.wrapEntry_(n)])}return new jspb.Map.ArrayIteratorIterable_(e)},jspb.Map.prototype.keys=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++)e.push(this.map_[t[r]].key);return new jspb.Map.ArrayIteratorIterable_(e)},jspb.Map.prototype.values=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++)e.push(this.wrapEntry_(this.map_[t[r]]));return new jspb.Map.ArrayIteratorIterable_(e)},jspb.Map.prototype.forEach=function(e,t){var r=this.stringKeys_();r.sort();for(var n=0;n<r.length;n++){var o=this.map_[r[n]];e.call(t,this.wrapEntry_(o),o.key,this)}},jspb.Map.prototype.set=function(e,t){var r=new jspb.Map.Entry_(e);return this.valueCtor_?(r.valueWrapper=t,r.value=t.toArray()):r.value=t,this.map_[e.toString()]=r,this.arrClean=!1,this},jspb.Map.prototype.wrapEntry_=function(e){return this.valueCtor_?(e.valueWrapper||(e.valueWrapper=new this.valueCtor_(e.value)),e.valueWrapper):e.value},jspb.Map.prototype.get=function(e){if(e=this.map_[e.toString()])return this.wrapEntry_(e)},jspb.Map.prototype.has=function(e){return e.toString()in this.map_},jspb.Map.prototype.serializeBinary=function(e,t,r,n,o){var s=this.stringKeys_();s.sort();for(var i=0;i<s.length;i++){var a=this.map_[s[i]];t.beginSubMessage(e),r.call(t,1,a.key),this.valueCtor_?n.call(t,2,this.wrapEntry_(a),o):n.call(t,2,a.value),t.endSubMessage()}},jspb.Map.deserializeBinary=function(e,t,r,n,o,s,i){for(;t.nextField()&&!t.isEndGroup();){var a=t.getFieldNumber();1==a?s=r.call(t):2==a&&(e.valueCtor_?(goog.asserts.assert(o),i||(i=new e.valueCtor_),n.call(t,i,o)):i=n.call(t))}goog.asserts.assert(null!=s),goog.asserts.assert(null!=i),e.set(s,i)},jspb.Map.prototype.stringKeys_=function(){var e,t=this.map_,r=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.push(e);return r},jspb.Map.Entry_=function(e,t){this.key=e,this.value=t,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(e,t,r,n,o){this.fieldIndex=e,this.fieldName=t,this.ctor=r,this.toObjectFn=n,this.isRepeated=o},jspb.ExtensionFieldBinaryInfo=function(e,t,r,n,o,s){this.fieldInfo=e,this.binaryReaderFn=t,this.binaryWriterFn=r,this.binaryMessageSerializeFn=n,this.binaryMessageDeserializeFn=o,this.isPacked=s},jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},jspb.Message=function(){},jspb.Message.GENERATE_TO_OBJECT=!0,jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_="function"==typeof Uint8Array,jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},jspb.Message.getIndex_=function(e,t){return t+e.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(e,t){return t-e.arrayIndexOffset_},jspb.Message.initialize=function(e,t,r,n,o,s){if(e.wrappers_=null,t||(t=r?[r]:[]),e.messageId_=r?String(r):void 0,e.arrayIndexOffset_=0===r?-1:0,e.array=t,jspb.Message.initPivotAndExtensionObject_(e,n),e.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(e.repeatedFields=o),o)for(t=0;t<o.length;t++)(r=o[t])<e.pivot_?(r=jspb.Message.getIndex_(e,r),e.array[r]=e.array[r]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[r]=e.extensionObject_[r]||jspb.Message.EMPTY_LIST_SENTINEL_);if(s&&s.length)for(t=0;t<s.length;t++)jspb.Message.computeOneofCase(e,s[t])},jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(e){return jspb.Message.ASSUME_LOCAL_ARRAYS?e instanceof Array:Array.isArray(e)},jspb.Message.isExtensionObject_=function(e){return!(null===e||"object"!=typeof e||jspb.Message.isArray_(e)||jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(e,t){var r=e.array.length,n=-1;if(r&&(n=r-1,r=e.array[n],jspb.Message.isExtensionObject_(r)))return e.pivot_=jspb.Message.getFieldNumber_(e,n),void(e.extensionObject_=r);-1<t?(e.pivot_=Math.max(t,jspb.Message.getFieldNumber_(e,n+1)),e.extensionObject_=null):e.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(e){var t=jspb.Message.getIndex_(e,e.pivot_);e.array[t]||(e.extensionObject_=e.array[t]={})},jspb.Message.toObjectList=function(e,t,r){for(var n=[],o=0;o<e.length;o++)n[o]=t.call(e[o],r,e[o]);return n},jspb.Message.toObjectExtension=function(e,t,r,n,o){for(var s in r){var i=r[s],a=n.call(e,i);if(null!=a){for(var c in i.fieldName)if(i.fieldName.hasOwnProperty(c))break;t[c]=i.toObjectFn?i.isRepeated?jspb.Message.toObjectList(a,i.toObjectFn,o):i.toObjectFn(o,a):a}}},jspb.Message.serializeBinaryExtensions=function(e,t,r,n){for(var o in r){var s=r[o],i=s.fieldInfo;if(!s.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var a=n.call(e,i);if(null!=a)if(i.isMessageType()){if(!s.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");s.binaryWriterFn.call(t,i.fieldIndex,a,s.binaryMessageSerializeFn)}else s.binaryWriterFn.call(t,i.fieldIndex,a)}},jspb.Message.readBinaryExtension=function(e,t,r,n,o){var s=r[t.getFieldNumber()];if(s){if(r=s.fieldInfo,!s.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(r.isMessageType()){var i=new r.ctor;s.binaryReaderFn.call(t,i,s.binaryMessageDeserializeFn)}else i=s.binaryReaderFn.call(t);r.isRepeated&&!s.isPacked?(t=n.call(e,r))?t.push(i):o.call(e,r,[i]):o.call(e,r,i)}else t.skipField()},jspb.Message.getField=function(e,t){if(t<e.pivot_){t=jspb.Message.getIndex_(e,t);var r=e.array[t];return r===jspb.Message.EMPTY_LIST_SENTINEL_?e.array[t]=[]:r}if(e.extensionObject_)return(r=e.extensionObject_[t])===jspb.Message.EMPTY_LIST_SENTINEL_?e.extensionObject_[t]=[]:r},jspb.Message.getRepeatedField=function(e,t){return jspb.Message.getField(e,t)},jspb.Message.getOptionalFloatingPointField=function(e,t){return null==(e=jspb.Message.getField(e,t))?e:+e},jspb.Message.getBooleanField=function(e,t){return null==(e=jspb.Message.getField(e,t))?e:!!e},jspb.Message.getRepeatedFloatingPointField=function(e,t){var r=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var n=0;n<r.length;n++)r[n]=+r[n];e.convertedPrimitiveFields_[t]=!0}return r},jspb.Message.getRepeatedBooleanField=function(e,t){var r=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var n=0;n<r.length;n++)r[n]=!!r[n];e.convertedPrimitiveFields_[t]=!0}return r},jspb.Message.bytesAsB64=function(e){return null==e||"string"==typeof e?e:jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array?goog.crypt.base64.encodeByteArray(e):(goog.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(e)),null)},jspb.Message.bytesAsU8=function(e){return null==e||e instanceof Uint8Array?e:"string"==typeof e?goog.crypt.base64.decodeStringToUint8Array(e):(goog.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(e)),null)},jspb.Message.bytesListAsB64=function(e){return jspb.Message.assertConsistentTypes_(e),e.length&&"string"!=typeof e[0]?goog.array.map(e,jspb.Message.bytesAsB64):e},jspb.Message.bytesListAsU8=function(e){return jspb.Message.assertConsistentTypes_(e),!e.length||e[0]instanceof Uint8Array?e:goog.array.map(e,jspb.Message.bytesAsU8)},jspb.Message.assertConsistentTypes_=function(e){if(goog.DEBUG&&e&&1<e.length){var t=goog.typeOf(e[0]);goog.array.forEach(e,(function(e){goog.typeOf(e)!=t&&goog.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(e)+" expected "+t)}))}},jspb.Message.getFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getField(e,t))?r:e},jspb.Message.getBooleanFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getBooleanField(e,t))?r:e},jspb.Message.getFloatingPointFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getOptionalFloatingPointField(e,t))?r:e},jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,jspb.Message.getMapField=function(e,t,r,n){if(e.wrappers_||(e.wrappers_={}),t in e.wrappers_)return e.wrappers_[t];var o=jspb.Message.getField(e,t);if(!o){if(r)return;o=[],jspb.Message.setField(e,t,o)}return e.wrappers_[t]=new jspb.Map(o,n)},jspb.Message.setField=function(e,t,r){return goog.asserts.assertInstanceof(e,jspb.Message),t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=r:(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[t]=r),e},jspb.Message.setProto3IntField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},jspb.Message.setProto3FloatField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},jspb.Message.setProto3BooleanField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,!1)},jspb.Message.setProto3StringField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,"")},jspb.Message.setProto3BytesField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,"")},jspb.Message.setProto3EnumField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},jspb.Message.setProto3StringIntField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,"0")},jspb.Message.setFieldIgnoringDefault_=function(e,t,r,n){return goog.asserts.assertInstanceof(e,jspb.Message),r!==n?jspb.Message.setField(e,t,r):t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(e),delete e.extensionObject_[t]),e},jspb.Message.addToRepeatedField=function(e,t,r,n){return goog.asserts.assertInstanceof(e,jspb.Message),t=jspb.Message.getRepeatedField(e,t),null!=n?t.splice(n,0,r):t.push(r),e},jspb.Message.setOneofField=function(e,t,r,n){return goog.asserts.assertInstanceof(e,jspb.Message),(r=jspb.Message.computeOneofCase(e,r))&&r!==t&&void 0!==n&&(e.wrappers_&&r in e.wrappers_&&(e.wrappers_[r]=void 0),jspb.Message.setField(e,r,void 0)),jspb.Message.setField(e,t,n)},jspb.Message.computeOneofCase=function(e,t){for(var r,n,o=0;o<t.length;o++){var s=t[o],i=jspb.Message.getField(e,s);null!=i&&(r=s,n=i,jspb.Message.setField(e,s,void 0))}return r?(jspb.Message.setField(e,r,n),r):0},jspb.Message.getWrapperField=function(e,t,r,n){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[r]){var o=jspb.Message.getField(e,r);(n||o)&&(e.wrappers_[r]=new t(o))}return e.wrappers_[r]},jspb.Message.getRepeatedWrapperField=function(e,t,r){return jspb.Message.wrapRepeatedField_(e,t,r),(t=e.wrappers_[r])==jspb.Message.EMPTY_LIST_SENTINEL_&&(t=e.wrappers_[r]=[]),t},jspb.Message.wrapRepeatedField_=function(e,t,r){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[r]){for(var n=jspb.Message.getRepeatedField(e,r),o=[],s=0;s<n.length;s++)o[s]=new t(n[s]);e.wrappers_[r]=o}},jspb.Message.setWrapperField=function(e,t,r){goog.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={});var n=r?r.toArray():r;return e.wrappers_[t]=r,jspb.Message.setField(e,t,n)},jspb.Message.setOneofWrapperField=function(e,t,r,n){goog.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={});var o=n?n.toArray():n;return e.wrappers_[t]=n,jspb.Message.setOneofField(e,t,r,o)},jspb.Message.setRepeatedWrapperField=function(e,t,r){goog.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={}),r=r||[];for(var n=[],o=0;o<r.length;o++)n[o]=r[o].toArray();return e.wrappers_[t]=r,jspb.Message.setField(e,t,n)},jspb.Message.addToRepeatedWrapperField=function(e,t,r,n,o){jspb.Message.wrapRepeatedField_(e,n,t);var s=e.wrappers_[t];return s||(s=e.wrappers_[t]=[]),r=r||new n,e=jspb.Message.getRepeatedField(e,t),null!=o?(s.splice(o,0,r),e.splice(o,0,r.toArray())):(s.push(r),e.push(r.toArray())),r},jspb.Message.toMap=function(e,t,r,n){for(var o={},s=0;s<e.length;s++)o[t.call(e[s])]=r?r.call(e[s],n,e[s]):e[s];return o},jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var e in this.wrappers_){var t=this.wrappers_[e];if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&t[r].toArray();else t&&t.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(e){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var t=e.fieldIndex;if(e.isRepeated){if(e.isMessageType())return this.wrappers_[t]||(this.wrappers_[t]=goog.array.map(this.extensionObject_[t]||[],(function(t){return new e.ctor(t)}))),this.wrappers_[t]}else if(e.isMessageType())return!this.wrappers_[t]&&this.extensionObject_[t]&&(this.wrappers_[t]=new e.ctor(this.extensionObject_[t])),this.wrappers_[t];return this.extensionObject_[t]}},jspb.Message.prototype.setExtension=function(e,t){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var r=e.fieldIndex;return e.isRepeated?(t=t||[],e.isMessageType()?(this.wrappers_[r]=t,this.extensionObject_[r]=goog.array.map(t,(function(e){return e.toArray()}))):this.extensionObject_[r]=t):e.isMessageType()?(this.wrappers_[r]=t,this.extensionObject_[r]=t?t.toArray():t):this.extensionObject_[r]=t,this},jspb.Message.difference=function(e,t){if(!(e instanceof t.constructor))throw Error("Messages have different types.");var r=e.toArray();t=t.toArray();var n=[],o=0,s=r.length>t.length?r.length:t.length;for(e.getJsPbMessageId()&&(n[0]=e.getJsPbMessageId(),o=1);o<s;o++)jspb.Message.compareFields(r[o],t[o])||(n[o]=t[o]);return new e.constructor(n)},jspb.Message.equals=function(e,t){return e==t||!(!e||!t)&&e instanceof t.constructor&&jspb.Message.compareFields(e.toArray(),t.toArray())},jspb.Message.compareExtensions=function(e,t){e=e||{},t=t||{};var r,n={};for(r in e)n[r]=0;for(r in t)n[r]=0;for(r in n)if(!jspb.Message.compareFields(e[r],t[r]))return!1;return!0},jspb.Message.compareFields=function(e,t){if(e==t)return!0;if(!goog.isObject(e)||!goog.isObject(t))return!!("number"==typeof e&&isNaN(e)||"number"==typeof t&&isNaN(t))&&String(e)==String(t);if(e.constructor!=t.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e.constructor===Uint8Array){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}if(e.constructor===Array){var n=void 0,o=void 0,s=Math.max(e.length,t.length);for(r=0;r<s;r++){var i=e[r],a=t[r];if(i&&i.constructor==Object&&(goog.asserts.assert(void 0===n),goog.asserts.assert(r===e.length-1),n=i,i=void 0),a&&a.constructor==Object&&(goog.asserts.assert(void 0===o),goog.asserts.assert(r===t.length-1),o=a,a=void 0),!jspb.Message.compareFields(i,a))return!1}return!n&&!o||(n=n||{},o=o||{},jspb.Message.compareExtensions(n,o))}if(e.constructor===Object)return jspb.Message.compareExtensions(e,t);throw Error("Invalid type in JSPB array")},jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},jspb.Message.clone=function(e){return jspb.Message.cloneMessage(e)},jspb.Message.cloneMessage=function(e){return new e.constructor(jspb.Message.clone_(e.toArray()))},jspb.Message.copyInto=function(e,t){goog.asserts.assertInstanceof(e,jspb.Message),goog.asserts.assertInstanceof(t,jspb.Message),goog.asserts.assert(e.constructor==t.constructor,"Copy source and target message should have the same type."),e=jspb.Message.clone(e);for(var r=t.toArray(),n=e.toArray(),o=r.length=0;o<n.length;o++)r[o]=n[o];t.wrappers_=e.wrappers_,t.extensionObject_=e.extensionObject_},jspb.Message.clone_=function(e){if(Array.isArray(e)){for(var t=Array(e.length),r=0;r<e.length;r++){var n=e[r];null!=n&&(t[r]="object"==typeof n?jspb.Message.clone_(goog.asserts.assert(n)):n)}return t}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)return new Uint8Array(e);for(r in t={},e)null!=(n=e[r])&&(t[r]="object"==typeof n?jspb.Message.clone_(goog.asserts.assert(n)):n);return t},jspb.Message.registerMessageType=function(e,t){t.messageId=e},jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf},93602:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,i={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(i,{Headers:()=>p,flattenHeadersList:()=>E,flattenHeadersObject:()=>w,headersToList:()=>f,headersToObject:()=>y,headersToString:()=>g,listToHeaders:()=>_,objectToHeaders:()=>S,reduceHeadersObject:()=>b,stringToHeaders:()=>v}),e.exports=(t=i,((e,t,i,a)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of o(t))s.call(e,i)||undefined===i||r(e,i,{get:()=>t[i],enumerable:!(a=n(t,i))||a.enumerable});return e})(r({},"__esModule",{value:!0}),t));var a=/[^a-z0-9\-#$%&'*+.^_`|~]/i;function c(e){if("string"!=typeof e&&(e=String(e)),a.test(e)||""===e.trim())throw new TypeError("Invalid character in header field name");return e.toLowerCase()}var l,u,d=Symbol("normalizedHeaders"),h=Symbol("rawHeaderNames"),p=class{constructor(e){this[l]={},this[u]=new Map,["Headers","HeadersPolyfill"].includes(null==e?void 0:e.constructor.name)||e instanceof p?e.forEach(((e,t)=>{this.append(t,e)}),this):Array.isArray(e)?e.forEach((([e,t])=>{this.append(e,Array.isArray(t)?t.join(", "):t)})):e&&Object.getOwnPropertyNames(e).forEach((t=>{const r=e[t];this.append(t,Array.isArray(r)?r.join(", "):r)}))}[(l=d,u=h,Symbol.iterator)](){return this.entries()}*keys(){for(const e of Object.keys(this[d]))yield e}*values(){for(const e of Object.values(this[d]))yield e}*entries(){for(const e of Object.keys(this[d]))yield[e,this.get(e)]}get(e){return this[d][c(e)]||null}set(e,t){const r=c(e);this[d][r]=function(e){return"string"!=typeof e&&(e=String(e)),e}(t),this[h].set(r,e)}append(e,t){const r=c(e);let n=this.has(r)?`${this.get(r)}, ${t}`:t;this.set(e,n)}delete(e){if(!this.has(e))return;const t=c(e);delete this[d][t],this[h].delete(t)}all(){return this[d]}raw(){const e={};for(const[t,r]of this.entries())e[this[h].get(t)]=r;return e}has(e){return this[d].hasOwnProperty(c(e))}forEach(e,t){for(const r in this[d])this[d].hasOwnProperty(r)&&e.call(t,this[d][r],r,this)}};function f(e){const t=[];return e.forEach(((e,r)=>{const n=e.includes(",")?e.split(",").map((e=>e.trim())):e;t.push([r,n])})),t}function g(e){return f(e).map((([e,t])=>`${e}: ${[].concat(t).join(", ")}`)).join("\r\n")}var m=["user-agent"];function y(e){const t={};return e.forEach(((e,r)=>{const n=!m.includes(r.toLowerCase())&&e.includes(",");t[r]=n?e.split(",").map((e=>e.trim())):e})),t}function v(e){return e.trim().split(/[\r\n]+/).reduce(((e,t)=>{if(""===t.trim())return e;const r=t.split(": "),n=r.shift(),o=r.join(": ");return e.append(n,o),e}),new p)}function _(e){const t=new p;return e.forEach((([e,r])=>{[].concat(r).forEach((r=>{t.append(e,r)}))})),t}function b(e,t,r){return Object.keys(e).reduce(((r,n)=>t(r,n,e[n])),r)}function S(e){return b(e,((e,t,r)=>([].concat(r).filter(Boolean).forEach((r=>{e.append(t,r)})),e)),new p)}function E(e){return e.map((([e,t])=>[e,[].concat(t).join(", ")]))}function w(e){return b(e,((e,t,r)=>(e[t]=[].concat(r).join(", "),e)),{})}},67844:(e,t,r)=>{var n=r(52479),o=Object.create(null),s=r(30778);function i(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n]=e[n];return r}e.exports=n((function(e,t){return o[e]?(o[e].push(t),null):(o[e]=[t],function(e){return s((function t(){var r=o[e],n=r.length,s=i(arguments);try{for(var a=0;a<n;a++)r[a].apply(null,s)}finally{r.length>n?(r.splice(0,n),process.nextTick((function(){t.apply(null,s)}))):delete o[e]}}))}(e))}))},94378:(e,t,r)=>{try{var n=r(73837);if("function"!=typeof n.inherits)throw"";e.exports=n.inherits}catch(t){e.exports=r(35717)}},35717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},76884:e=>{var t,r=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,n=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o="a-z\\xdf-\\xf6\\xf8-\\xff",s="A-Z\\xc0-\\xd6\\xd8-\\xde",i="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a="["+i+"]",c="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",l="\\d+",u="["+o+"]",d="[^\\ud800-\\udfff"+i+l+"\\u2700-\\u27bf"+o+s+"]",h="\\ud83c[\\udffb-\\udfff]",p="[^\\ud800-\\udfff]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",m="["+s+"]",y="(?:"+u+"|"+d+")",v="(?:"+m+"|"+d+")",_="(?:['’](?:d|ll|m|re|s|t|ve))?",b="(?:['’](?:D|LL|M|RE|S|T|VE))?",S="(?:"+c+"|"+h+")?",E="[\\ufe0e\\ufe0f]?",w=E+S+"(?:\\u200d(?:"+[p,f,g].join("|")+")"+E+S+")*",A="(?:"+["[\\u2700-\\u27bf]",f,g].join("|")+")"+w,T="(?:"+[p+c+"?",c,f,g,"[\\ud800-\\udfff]"].join("|")+")",C=RegExp("['’]","g"),I=RegExp(c,"g"),R=RegExp(h+"(?="+h+")|"+T+w,"g"),O=RegExp([m+"?"+u+"+"+_+"(?="+[a,m,"$"].join("|")+")",v+"+"+b+"(?="+[a,m+y,"$"].join("|")+")",m+"?"+y+"+"+_,m+"+"+b,l,A].join("|"),"g"),k=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),N=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,P="object"==typeof global&&global&&global.Object===Object&&global,M="object"==typeof self&&self&&self.Object===Object&&self,L=P||M||Function("return this")(),B=(t={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},function(e){return null==t?void 0:t[e]});function D(e){return k.test(e)}var x=Object.prototype.toString,U=L.Symbol,j=U?U.prototype:void 0,F=j?j.toString:void 0;function H(e){return null==e?"":function(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==x.call(e)}(e))return F?F.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}var W,q=(W=function(e,t,r){return t=t.toLowerCase(),e+(r?z(H(t).toLowerCase()):t)},function(e){return function(e,t,r,n){for(var o=-1,s=e?e.length:0;++o<s;)r=t(r,e[o],o,e);return r}(function(e,t,n){return e=H(e),void 0===t?function(e){return N.test(e)}(e)?function(e){return e.match(O)||[]}(e):function(e){return e.match(r)||[]}(e):e.match(t)||[]}(function(e){return(e=H(e))&&e.replace(n,B).replace(I,"")}(e).replace(C,"")),W,"")}),z=("toUpperCase",function(e){var t,r,n,o,s=D(e=H(e))?function(e){return D(e)?function(e){return e.match(R)||[]}(e):function(e){return e.split("")}(e)}(e):void 0,i=s?s[0]:e.charAt(0),a=s?(t=s,r=1,o=t.length,n=void 0===n?o:n,!r&&n>=o?t:function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(o);++n<o;)s[n]=e[n+t];return s}(t,r,n)).join(""):e.slice(1);return i.toUpperCase()+a});e.exports=q},39593:(e,t,r)=>{"use strict";const n=r(34411),o=Symbol("max"),s=Symbol("length"),i=Symbol("lengthCalculator"),a=Symbol("allowStale"),c=Symbol("maxAge"),l=Symbol("dispose"),u=Symbol("noDisposeOnSet"),d=Symbol("lruList"),h=Symbol("cache"),p=Symbol("updateAgeOnGet"),f=()=>1,g=(e,t,r)=>{const n=e[h].get(t);if(n){const t=n.value;if(m(e,t)){if(v(e,n),!e[a])return}else r&&(e[p]&&(n.value.now=Date.now()),e[d].unshiftNode(n));return t.value}},m=(e,t)=>{if(!t||!t.maxAge&&!e[c])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[c]&&r>e[c]},y=e=>{if(e[s]>e[o])for(let t=e[d].tail;e[s]>e[o]&&null!==t;){const r=t.prev;v(e,t),t=r}},v=(e,t)=>{if(t){const r=t.value;e[l]&&e[l](r.key,r.value),e[s]-=r.length,e[h].delete(r.key),e[d].removeNode(t)}};class _{constructor(e,t,r,n,o){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=o||0}}const b=(e,t,r,n)=>{let o=r.value;m(e,o)&&(v(e,r),e[a]||(o=void 0)),o&&t.call(n,o.value,o.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[o]=e.max||1/0;const t=e.length||f;if(this[i]="function"!=typeof t?f:t,this[a]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[c]=e.maxAge||0,this[l]=e.dispose,this[u]=e.noDisposeOnSet||!1,this[p]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[o]=e||1/0,y(this)}get max(){return this[o]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[c]=e,y(this)}get maxAge(){return this[c]}set lengthCalculator(e){"function"!=typeof e&&(e=f),e!==this[i]&&(this[i]=e,this[s]=0,this[d].forEach((e=>{e.length=this[i](e.value,e.key),this[s]+=e.length}))),y(this)}get lengthCalculator(){return this[i]}get length(){return this[s]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let r=this[d].tail;null!==r;){const n=r.prev;b(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[d].head;null!==r;){const n=r.next;b(this,e,r,t),r=n}}keys(){return this[d].toArray().map((e=>e.key))}values(){return this[d].toArray().map((e=>e.value))}reset(){this[l]&&this[d]&&this[d].length&&this[d].forEach((e=>this[l](e.key,e.value))),this[h]=new Map,this[d]=new n,this[s]=0}dump(){return this[d].map((e=>!m(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[d]}set(e,t,r){if((r=r||this[c])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,a=this[i](t,e);if(this[h].has(e)){if(a>this[o])return v(this,this[h].get(e)),!1;const i=this[h].get(e).value;return this[l]&&(this[u]||this[l](e,i.value)),i.now=n,i.maxAge=r,i.value=t,this[s]+=a-i.length,i.length=a,this.get(e),y(this),!0}const p=new _(e,t,a,n,r);return p.length>this[o]?(this[l]&&this[l](e,t),!1):(this[s]+=p.length,this[d].unshift(p),this[h].set(e,this[d].head),y(this),!0)}has(e){if(!this[h].has(e))return!1;const t=this[h].get(e).value;return!m(this,t)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){const e=this[d].tail;return e?(v(this,e),e.value):null}del(e){v(this,this[h].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],o=n.e||0;if(0===o)this.set(n.k,n.v);else{const e=o-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[h].forEach(((e,t)=>g(this,t,!1)))}}},91171:(e,t,r)=>{e.exports=h,h.Minimatch=p;var n=function(){try{return r(71017)}catch(e){}}()||{sep:"/"};h.sep=n.sep;var o=h.GLOBSTAR=p.GLOBSTAR={},s=r(3644),i={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="[^/]",c="[^/]*?",l="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{}),u=/\/+/;function d(e,t){t=t||{};var r={};return Object.keys(e).forEach((function(t){r[t]=e[t]})),Object.keys(t).forEach((function(e){r[e]=t[e]})),r}function h(e,t,r){return g(t),r||(r={}),!(!r.nocomment&&"#"===t.charAt(0))&&new p(t,r).match(e)}function p(e,t){if(!(this instanceof p))return new p(e,t);g(e),t||(t={}),e=e.trim(),t.allowWindowsEscape||"/"===n.sep||(e=e.split(n.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}function f(e,t){return t||(t=this instanceof p?this.options:{}),e=void 0===e?this.pattern:e,g(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:s(e)}h.filter=function(e,t){return t=t||{},function(r,n,o){return h(r,e,t)}},h.defaults=function(e){if(!e||"object"!=typeof e||!Object.keys(e).length)return h;var t=h,r=function(r,n,o){return t(r,n,d(e,o))};return(r.Minimatch=function(r,n){return new t.Minimatch(r,d(e,n))}).defaults=function(r){return t.defaults(d(e,r)).Minimatch},r.filter=function(r,n){return t.filter(r,d(e,n))},r.defaults=function(r){return t.defaults(d(e,r))},r.makeRe=function(r,n){return t.makeRe(r,d(e,n))},r.braceExpand=function(r,n){return t.braceExpand(r,d(e,n))},r.match=function(r,n,o){return t.match(r,n,d(e,o))},r},p.defaults=function(e){return h.defaults(e).Minimatch},p.prototype.debug=function(){},p.prototype.make=function(){var e=this.pattern,t=this.options;if(t.nocomment||"#"!==e.charAt(0))if(e){this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,r),r=this.globParts=r.map((function(e){return e.split(u)})),this.debug(this.pattern,r),r=r.map((function(e,t,r){return e.map(this.parse,this)}),this),this.debug(this.pattern,r),r=r.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,r),this.set=r}else this.empty=!0;else this.comment=!0},p.prototype.parseNegate=function(){var e=this.pattern,t=!1,r=0;if(!this.options.nonegate){for(var n=0,o=e.length;n<o&&"!"===e.charAt(n);n++)t=!t,r++;r&&(this.pattern=e.substr(r)),this.negate=t}},h.braceExpand=function(e,t){return f(e,t)},p.prototype.braceExpand=f;var g=function(e){if("string"!=typeof e)throw new TypeError("invalid pattern");if(e.length>65536)throw new TypeError("pattern is too long")};p.prototype.parse=function(e,t){g(e);var r=this.options;if("**"===e){if(!r.noglobstar)return o;e="*"}if(""===e)return"";var n,s="",u=!!r.nocase,d=!1,h=[],p=[],f=!1,y=-1,v=-1,_="."===e.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=this;function S(){if(n){switch(n){case"*":s+=c,u=!0;break;case"?":s+=a,u=!0;break;default:s+="\\"+n}b.debug("clearStateChar %j %j",n,s),n=!1}}for(var E,w=0,A=e.length;w<A&&(E=e.charAt(w));w++)if(this.debug("%s\t%s %s %j",e,w,s,E),d&&l[E])s+="\\"+E,d=!1;else switch(E){case"/":return!1;case"\\":S(),d=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,w,s,E),f){this.debug("  in class"),"!"===E&&w===v+1&&(E="^"),s+=E;continue}b.debug("call clearStateChar %j",n),S(),n=E,r.noext&&S();continue;case"(":if(f){s+="(";continue}if(!n){s+="\\(";continue}h.push({type:n,start:w-1,reStart:s.length,open:i[n].open,close:i[n].close}),s+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,s),n=!1;continue;case")":if(f||!h.length){s+="\\)";continue}S(),u=!0;var T=h.pop();s+=T.close,"!"===T.type&&p.push(T),T.reEnd=s.length;continue;case"|":if(f||!h.length||d){s+="\\|",d=!1;continue}S(),s+="|";continue;case"[":if(S(),f){s+="\\"+E;continue}f=!0,v=w,y=s.length,s+=E;continue;case"]":if(w===v+1||!f){s+="\\"+E,d=!1;continue}var C=e.substring(v+1,w);try{RegExp("["+C+"]")}catch(e){var I=this.parse(C,m);s=s.substr(0,y)+"\\["+I[0]+"\\]",u=u||I[1],f=!1;continue}u=!0,f=!1,s+=E;continue;default:S(),d?d=!1:!l[E]||"^"===E&&f||(s+="\\"),s+=E}for(f&&(C=e.substr(v+1),I=this.parse(C,m),s=s.substr(0,y)+"\\["+I[0],u=u||I[1]),T=h.pop();T;T=h.pop()){var R=s.slice(T.reStart+T.open.length);this.debug("setting tail",s,T),R=R.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,r){return r||(r="\\"),t+t+r+"|"})),this.debug("tail=%j\n   %s",R,R,T,s);var O="*"===T.type?c:"?"===T.type?a:"\\"+T.type;u=!0,s=s.slice(0,T.reStart)+O+"\\("+R}S(),d&&(s+="\\\\");var k=!1;switch(s.charAt(0)){case"[":case".":case"(":k=!0}for(var N=p.length-1;N>-1;N--){var P=p[N],M=s.slice(0,P.reStart),L=s.slice(P.reStart,P.reEnd-8),B=s.slice(P.reEnd-8,P.reEnd),D=s.slice(P.reEnd);B+=D;var x=M.split("(").length-1,U=D;for(w=0;w<x;w++)U=U.replace(/\)[+*?]?/,"");var j="";""===(D=U)&&t!==m&&(j="$"),s=M+L+D+j+B}if(""!==s&&u&&(s="(?=.)"+s),k&&(s=_+s),t===m)return[s,u];if(!u)return e.replace(/\\(.)/g,"$1");var F=r.nocase?"i":"";try{var H=new RegExp("^"+s+"$",F)}catch(e){return new RegExp("$.")}return H._glob=e,H._src=s,H};var m={};h.makeRe=function(e,t){return new p(e,t||{}).makeRe()},p.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?c:t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",n=t.nocase?"i":"",s=e.map((function(e){return e.map((function(e){return e===o?r:"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):e._src})).join("\\/")})).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,n)}catch(e){this.regexp=!1}return this.regexp},h.match=function(e,t,r){var n=new p(t,r=r||{});return e=e.filter((function(e){return n.match(e)})),n.options.nonull&&!e.length&&e.push(t),e},p.prototype.match=function(e,t){if(void 0===t&&(t=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var r=this.options;"/"!==n.sep&&(e=e.split(n.sep).join("/")),e=e.split(u),this.debug(this.pattern,"split",e);var o,s,i=this.set;for(this.debug(this.pattern,"set",i),s=e.length-1;s>=0&&!(o=e[s]);s--);for(s=0;s<i.length;s++){var a=i[s],c=e;if(r.matchBase&&1===a.length&&(c=[o]),this.matchOne(c,a,t))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate},p.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var s=0,i=0,a=e.length,c=t.length;s<a&&i<c;s++,i++){this.debug("matchOne loop");var l,u=t[i],d=e[s];if(this.debug(t,u,d),!1===u)return!1;if(u===o){this.debug("GLOBSTAR",[t,u,d]);var h=s,p=i+1;if(p===c){for(this.debug("** at the end");s<a;s++)if("."===e[s]||".."===e[s]||!n.dot&&"."===e[s].charAt(0))return!1;return!0}for(;h<a;){var f=e[h];if(this.debug("\nglobstar while",e,h,t,p,f),this.matchOne(e.slice(h),t.slice(p),r))return this.debug("globstar found match!",h,a,f),!0;if("."===f||".."===f||!n.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,h,t,p);break}this.debug("globstar swallow a segment, and continue"),h++}return!(!r||(this.debug("\n>>> no match, partial?",e,h,t,p),h!==a))}if("string"==typeof u?(l=d===u,this.debug("string match",u,d,l)):(l=d.match(u),this.debug("pattern match",u,d,l)),!l)return!1}if(s===a&&i===c)return!0;if(s===a)return r;if(i===c)return s===a-1&&""===e[s];throw new Error("wtf?")}},55696:(e,t)=>{"use strict";function r(e){return e.toLowerCase()}function n(e,t){if(!/^[0-9a-z_.-]+$/.test(e))throw new Error(`Metadata key '${e}' contains illegal characters`);if(e.endsWith("-bin")){if(!(t instanceof Uint8Array))throw new Error(`Metadata key '${e}' ends with '-bin', thus it must have binary value`)}else{if("string"!=typeof t)throw new Error(`Metadata key '${e}' doesn't end with '-bin', thus it must have string value`);if(!/^[ -~]*$/.test(t))throw new Error(`Metadata value '${t}' of key '${e}' contains illegal characters`)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0,t.Metadata=function(e){const t=new Map,o={set(e,s){if(e=r(e),Array.isArray(s))if(0===s.length)t.delete(e);else{for(const t of s)n(e,t);t.set(e,e.endsWith("-bin")?s:[s.join(", ")])}else n(e,s),t.set(e,[s]);return o},append(e,s){n(e=r(e),s);let i=t.get(e);return null==i&&(i=[],t.set(e,i)),i.push(s),e.endsWith("-bin")||t.set(e,[i.join(", ")]),o},delete(e){e=r(e),t.delete(e)},get(e){var n;return e=r(e),null===(n=t.get(e))||void 0===n?void 0:n[0]},getAll(e){var n;return e=r(e),null!==(n=t.get(e))&&void 0!==n?n:[]},has:e=>(e=r(e),t.has(e)),[Symbol.iterator]:()=>t[Symbol.iterator]()};if(null!=e){const t=(s=e,Symbol.iterator in s?e:Object.entries(e));for(const[e,r]of t)o.set(e,r)}var s;return o}},42248:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},86682:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Status=void 0,(r=t.Status||(t.Status={}))[r.OK=0]="OK",r[r.CANCELLED=1]="CANCELLED",r[r.UNKNOWN=2]="UNKNOWN",r[r.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",r[r.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",r[r.NOT_FOUND=5]="NOT_FOUND",r[r.ALREADY_EXISTS=6]="ALREADY_EXISTS",r[r.PERMISSION_DENIED=7]="PERMISSION_DENIED",r[r.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",r[r.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",r[r.ABORTED=10]="ABORTED",r[r.OUT_OF_RANGE=11]="OUT_OF_RANGE",r[r.UNIMPLEMENTED=12]="UNIMPLEMENTED",r[r.INTERNAL=13]="INTERNAL",r[r.UNAVAILABLE=14]="UNAVAILABLE",r[r.DATA_LOSS=15]="DATA_LOSS",r[r.UNAUTHENTICATED=16]="UNAUTHENTICATED"},7510:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},21813:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientError=void 0;const n=r(85659),o=r(86682);class s extends n.ExtendableError{constructor(e,t,r){super(`${e} ${o.Status[t]}: ${r}`),this.path=e,this.code=t,this.details=r,this.name="ClientError",Object.defineProperty(this,"@@nice-grpc",{value:!0}),Object.defineProperty(this,"@@nice-grpc:ClientError",{value:!0})}static[Symbol.hasInstance](e){return this!==s?this.prototype.isPrototypeOf(e):"object"==typeof e&&null!==e&&(e.constructor===s||!0===e["@@nice-grpc:ClientError"]||"ClientError"===e.name&&!0===e["@@nice-grpc"])}}t.ClientError=s},30612:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},39135:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.composeClientMiddleware=void 0,t.composeClientMiddleware=function(e,t){return(r,n)=>t(Object.assign(Object.assign({},r),{next:(t,n)=>e(Object.assign(Object.assign({},r),{request:t}),n)}),n)}},9612:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(55696),t),o(r(86682),t),o(r(42248),t),o(r(7510),t),o(r(30612),t),o(r(39135),t),o(r(21813),t),o(r(2571),t),o(r(22646),t),o(r(36264),t),o(r(43110),t)},2571:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},43110:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerError=void 0;const n=r(85659),o=r(86682);class s extends n.ExtendableError{constructor(e,t){super(`${o.Status[e]}: ${t}`),this.code=e,this.details=t,this.name="ServerError",Object.defineProperty(this,"@@nice-grpc",{value:!0}),Object.defineProperty(this,"@@nice-grpc:ServerError",{value:!0})}static[Symbol.hasInstance](e){return this!==s?this.prototype.isPrototypeOf(e):"object"==typeof e&&null!==e&&(e.constructor===s||!0===e["@@nice-grpc:ServerError"]||"ServerError"===e.name&&!0===e["@@nice-grpc"])}}t.ServerError=s},22646:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},36264:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.composeServerMiddleware=void 0,t.composeServerMiddleware=function(e,t){return(r,n)=>e(Object.assign(Object.assign({},r),{next:(e,n)=>t(Object.assign(Object.assign({},r),{request:e}),n)}),n)}},42903:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},96283:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.createClientFactory=void 0;const n=r(56112),o=r(9612),s=r(83595),i=r(52278),a=r(81234),c=r(68142),l=r(70189);function u(){return d()}function d(e){return{use:t=>d(null==e?t:(0,o.composeClientMiddleware)(e,t)),create(t,r,o={}){const u=new((0,n.makeClientConstructor)({},""))("",null,{channelOverride:r}),d={},h=Object.entries((0,s.normalizeServiceDefinition)(t));for(const[t,r]of h){const n={...o["*"],...o[t]};r.requestStream?r.responseStream?d[t]=(0,i.createBidiStreamingMethod)(r,u,e,n):d[t]=(0,a.createClientStreamingMethod)(r,u,e,n):r.responseStream?d[t]=(0,c.createServerStreamingMethod)(r,u,e,n):d[t]=(0,l.createUnaryMethod)(r,u,e,n)}return d}}}t.createClientFactory=u,t.createClient=function(e,t,r){return u().create(e,t,r)}},90463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.waitForChannelReady=t.createChannel=void 0;const n=r(56112),o=new Set(["http","https"]);t.createChannel=function(e,t,r={}){const s=/^(?:([^:]+):\/\/)?(.*?)(?::(\d+))?$/.exec(e);if(null==s)throw new Error(`Invalid address: '${e}'`);let[,i,a,c]=s;const l=!i||o.has(i),u=t?._isSecure()||i?.includes("https");t??(t=u?n.ChannelCredentials.createSsl():n.ChannelCredentials.createInsecure()),c??(c=u?"443":"80");let d=l?`${a}:${c}`:e;return new n.Channel(d,t,r)},t.waitForChannelReady=async function(e,t){for(;;){const r=e.getConnectivityState(!0);if(r===n.connectivityState.READY)return;await new Promise(((n,o)=>{e.watchConnectivityState(r,t,(e=>{null!=e?o(e):n()}))}))}}},52278:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBidiStreamingMethod=void 0;const n=r(7803),o=r(9612),s=r(83595),i=r(21473),a=r(37407),c=r(96199),l=r(61176),u=r(25138);t.createBidiStreamingMethod=function(e,t,r,d){const h=(0,s.toGrpcJsMethodDefinition)(e),p={path:e.path,requestStream:e.requestStream,responseStream:e.responseStream,options:e.options};async function*f(r,s){if(!(0,a.isAsyncIterable)(r))throw new Error("A middleware passed invalid request to next(): expected a single message for bidirectional streaming method");const{metadata:d=(0,o.Metadata)(),onHeader:p,onTrailer:f}=s,g=s.signal??(new AbortController).signal,m=new AbortController,y=t.makeBidiStreamRequest(h.path,h.requestSerialize,h.responseDeserialize,(0,i.convertMetadataToGrpcJs)(d));let v;(0,c.patchClientWritableStream)(y),y.on("metadata",(e=>{p?.((0,i.convertMetadataFromGrpcJs)(e))})),y.on("status",(e=>{f?.((0,i.convertMetadataFromGrpcJs)(e.metadata))})),async function(e,t,r){for await(const o of t)(0,n.throwIfAborted)(e),r.write(o)||await(0,n.waitForEvent)(e,r,"drain")}(m.signal,r,y).then((()=>{y.end()}),(e=>{(0,n.isAbortError)(e)||(v=e,y.cancel())}));const _=()=>{m.abort(),y.cancel()};g.addEventListener("abort",_);try{yield*(0,l.readableToAsyncIterable)(y)}catch(t){throw(0,u.wrapClientError)(t,e.path)}finally{if(m.abort(),g.removeEventListener("abort",_),(0,n.throwIfAborted)(g),y.cancel(),v)throw v}}const g=null==r?f:(e,t)=>r({method:p,requestStream:!0,request:e,responseStream:!0,next:f},t);return(e,t)=>{const r=g(e,{...d,...t})[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({async next(){const e=await r.next();return e.done&&null!=e.value?await r.throw(new Error("A middleware returned a message, but expected to return void for bidirectional streaming method")):e},return:()=>r.return(),throw:e=>r.throw(e)})}}}},81234:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createClientStreamingMethod=void 0;const n=r(7803),o=r(9612),s=r(83595),i=r(21473),a=r(37407),c=r(96199),l=r(25138);t.createClientStreamingMethod=function(e,t,r,u){const d=(0,s.toGrpcJsMethodDefinition)(e),h={path:e.path,requestStream:e.requestStream,responseStream:e.responseStream,options:e.options};async function*p(r,s){if(!(0,a.isAsyncIterable)(r))throw new Error("A middleware passed invalid request to next(): expected a single message for client streaming method");const{metadata:u=(0,o.Metadata)(),signal:h=(new AbortController).signal,onHeader:p,onTrailer:f}=s;return await(0,n.execute)(h,((o,s)=>{const a=new AbortController,h=t.makeClientStreamRequest(d.path,d.requestSerialize,d.responseDeserialize,(0,i.convertMetadataToGrpcJs)(u),((t,r)=>{a.abort(),null!=t?s((0,l.wrapClientError)(t,e.path)):o(r)}));return(0,c.patchClientWritableStream)(h),h.on("metadata",(e=>{p?.((0,i.convertMetadataFromGrpcJs)(e))})),h.on("status",(e=>{f?.((0,i.convertMetadataFromGrpcJs)(e.metadata))})),async function(e,t,r){for await(const o of t)(0,n.throwIfAborted)(e),r.write(o)||await(0,n.waitForEvent)(e,r,"drain")}(a.signal,r,h).then((()=>{h.end()}),(e=>{(0,n.isAbortError)(e)||(s(e),h.cancel())})),()=>{a.abort(),h.cancel()}}))}const f=null==r?p:(e,t)=>r({method:h,requestStream:!0,request:e,responseStream:!1,next:p},t);return async(e,t)=>{const r=f(e,{...u,...t})[Symbol.asyncIterator]();let n=await r.next();for(;;)if(n.done){if(null!=n.value)return n.value;n=await r.throw(new Error("A middleware returned void, but expected to return a message for client streaming method"))}else n=await r.throw(new Error("A middleware yielded a message, but expected to only return a message for client streaming method"))}}},68142:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createServerStreamingMethod=void 0;const n=r(7803),o=r(9612),s=r(83595),i=r(21473),a=r(37407),c=r(61176),l=r(25138);t.createServerStreamingMethod=function(e,t,r,u){const d=(0,s.toGrpcJsMethodDefinition)(e),h={path:e.path,requestStream:e.requestStream,responseStream:e.responseStream,options:e.options};async function*p(r,s){if((0,a.isAsyncIterable)(r))throw new Error("A middleware passed invalid request to next(): expected a single message for server streaming method");const{metadata:u=(0,o.Metadata)(),onHeader:h,onTrailer:p}=s,f=s.signal??(new AbortController).signal,g=t.makeServerStreamRequest(d.path,d.requestSerialize,d.responseDeserialize,r,(0,i.convertMetadataToGrpcJs)(u));g.on("metadata",(e=>{h?.((0,i.convertMetadataFromGrpcJs)(e))})),g.on("status",(e=>{p?.((0,i.convertMetadataFromGrpcJs)(e.metadata))}));const m=()=>{g.cancel()};f.addEventListener("abort",m);try{yield*(0,c.readableToAsyncIterable)(g)}catch(t){throw(0,l.wrapClientError)(t,e.path)}finally{f.removeEventListener("abort",m),(0,n.throwIfAborted)(f),g.cancel()}}const f=null==r?p:(e,t)=>r({method:h,requestStream:!1,request:e,responseStream:!0,next:p},t);return(e,t)=>{const r=f(e,{...u,...t})[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({async next(){const e=await r.next();return e.done&&null!=e.value?await r.throw(new Error("A middleware returned a message, but expected to return void for server streaming method")):e},return:()=>r.return(),throw:e=>r.throw(e)})}}}},70189:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUnaryMethod=void 0;const n=r(7803),o=r(9612),s=r(83595),i=r(21473),a=r(37407),c=r(25138);t.createUnaryMethod=function(e,t,r,l){const u=(0,s.toGrpcJsMethodDefinition)(e),d={path:e.path,requestStream:e.requestStream,responseStream:e.responseStream,options:e.options};async function*h(r,s){if((0,a.isAsyncIterable)(r))throw new Error("A middleware passed invalid request to next(): expected a single message for unary method");const{metadata:l=(0,o.Metadata)(),signal:d=(new AbortController).signal,onHeader:h,onTrailer:p}=s;return await(0,n.execute)(d,((n,o)=>{const s=t.makeUnaryRequest(u.path,u.requestSerialize,u.responseDeserialize,r,(0,i.convertMetadataToGrpcJs)(l),((t,r)=>{null!=t?o((0,c.wrapClientError)(t,e.path)):n(r)}));return s.on("metadata",(e=>{h?.((0,i.convertMetadataFromGrpcJs)(e))})),s.on("status",(e=>{p?.((0,i.convertMetadataFromGrpcJs)(e.metadata))})),()=>{s.cancel()}}))}const p=null==r?h:(e,t)=>r({method:d,requestStream:!1,request:e,responseStream:!1,next:h},t);return async(e,t)=>{const r=p(e,{...l,...t})[Symbol.asyncIterator]();let n=await r.next();for(;;)if(n.done){if(null!=n.value)return n.value;n=await r.throw(new Error("A middleware returned void, but expected to return a message for unary method"))}else n=await r.throw(new Error("A middleware yielded a message, but expected to only return a message for unary method"))}}},25138:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapClientError=void 0;const n=r(9612),o=r(56112);t.wrapClientError=function(e,t){return"object"==typeof(r=e)&&null!==r&&"number"==typeof r.code&&"string"==typeof r.details&&r.metadata instanceof o.Metadata?new n.ClientError(t,e.code,e.details):e;var r}},99710:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelCredentials=t.Channel=t.waitForChannelReady=t.createChannel=void 0,o(r(9612),t),o(r(70008),t),o(r(88083),t);var s=r(90463);Object.defineProperty(t,"createChannel",{enumerable:!0,get:function(){return s.createChannel}}),Object.defineProperty(t,"waitForChannelReady",{enumerable:!0,get:function(){return s.waitForChannelReady}});var i=r(56112);Object.defineProperty(t,"Channel",{enumerable:!0,get:function(){return i.Channel}}),Object.defineProperty(t,"ChannelCredentials",{enumerable:!0,get:function(){return i.ChannelCredentials}}),o(r(96283),t),o(r(42903),t)},70008:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createServer=void 0;const n=r(56112),o=r(9612),s=r(83595),i=r(1843),a=r(33121),c=r(9371),l=r(10047);function u(e,t){const r=[];let d;return{use(n){if(null!=d)throw new Error("server.use() must be used before listen()");if(r.length>0)throw new Error("server.use() must be used before adding any services");return u(e,null==t?n:(0,o.composeServerMiddleware)(t,n))},...function e(t){return{with:r=>e(null==t?r:(0,o.composeServerMiddleware)(t,r)),add(e,n){if(null!=d)throw new Error("server.add() must be used before listen()");r.push({definition:(0,s.normalizeServiceDefinition)(e),middleware:t,implementation:n})}}}(t),async listen(t,o){if(null!=d)throw new Error("server.listen() has already been called");d=new n.Server(e);for(const{definition:e,middleware:t,implementation:n}of r){const r={};for(const[o,s]of Object.entries(e)){const e=n[o].bind(n);s.requestStream?s.responseStream?r[o]=(0,i.createBidiStreamingMethodHandler)(s,e,t):r[o]=(0,a.createClientStreamingMethodHandler)(s,e,t):s.responseStream?r[o]=(0,c.createServerStreamingMethodHandler)(s,e,t):r[o]=(0,l.createUnaryMethodHandler)(s,e,t)}d.addService((0,s.toGrpcJsServiceDefinition)(e),r)}const u=await new Promise(((e,r)=>{d.bindAsync(t,o??n.ServerCredentials.createInsecure(),((t,n)=>{null!=t?(d=void 0,r(t)):e(n)}))}));return d.start(),u},async shutdown(){null!=d&&(await new Promise(((e,t)=>{d.tryShutdown((r=>{null!=r?t(r):e()}))})),d=void 0)},forceShutdown(){null!=d&&(d.forceShutdown(),d=void 0)}}}t.createServer=function(e={}){return u(e)}},88083:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},30178:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCallContext=void 0;const n=r(9612),o=r(21473);t.createCallContext=function(e){const t=(0,n.Metadata)(),r=(0,n.Metadata)(),s=new AbortController;e.cancelled?s.abort():e.on("cancelled",(()=>{s.abort()}));let i=!1;return{metadata:(0,o.convertMetadataFromGrpcJs)(e.metadata),peer:e.getPeer(),header:t,sendHeader(){i||(e.sendMetadata((0,o.convertMetadataToGrpcJs)(t)),i=!0)},trailer:r,signal:s.signal}}},8695:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createErrorStatusObject=void 0;const n=r(56112),o=r(7803),s=r(9612);t.createErrorStatusObject=function(e,t,r){return t instanceof s.ServerError?{code:t.code,details:t.details,metadata:r}:(0,o.isAbortError)(t)?{code:n.status.CANCELLED,details:"The operation was cancelled",metadata:r}:(process.emitWarning(`${e}: Uncaught error in server implementation method: ${t instanceof Error?t.stack:t}`),{code:n.status.UNKNOWN,details:"Unknown server error occurred",metadata:r})}},1843:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBidiStreamingMethodHandler=void 0;const n=r(7803),o=r(21473),s=r(37407),i=r(61176),a=r(30178),c=r(8695);t.createBidiStreamingMethodHandler=function(e,t,r){const l={path:e.path,requestStream:e.requestStream,responseStream:e.responseStream,options:e.options};async function*u(e,r){if(!(0,s.isAsyncIterable)(e))throw new Error("A middleware passed invalid request to next(): expected a single message for bidirectional streaming method");yield*t(e,r)}const d=null==r?u:(e,t)=>r({method:l,requestStream:!0,request:e,responseStream:!0,next:u},t);return t=>{const r=(0,a.createCallContext)(t);Promise.resolve().then((async()=>{const e=d((0,i.readableToAsyncIterable)(t),r)[Symbol.asyncIterator]();try{let o=await e.next();for(;;)if(o.done){if(null==o.value)break;o=await e.throw(new Error("A middleware returned a message, but expected to return void for bidirectional streaming method"))}else{try{r.sendHeader(),t.write(o.value)||await(0,n.waitForEvent)(r.signal,t,"drain")}catch(t){o=(0,n.isAbortError)(t)?await e.return():await e.throw(t);continue}o=await e.next()}}finally{r.sendHeader()}})).then((()=>{t.end((0,o.convertMetadataToGrpcJs)(r.trailer))}),(n=>{t.destroy((0,c.createErrorStatusObject)(e.path,n,(0,o.convertMetadataToGrpcJs)(r.trailer)))}))}}},33121:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createClientStreamingMethodHandler=void 0;const n=r(37407),o=r(30178),s=r(8695),i=r(61176),a=r(21473);t.createClientStreamingMethodHandler=function(e,t,r){const c={path:e.path,requestStream:e.requestStream,responseStream:e.responseStream,options:e.options};async function*l(e,r){if(!(0,n.isAsyncIterable)(e))throw new Error("A middleware passed invalid request to next(): expected a single message for client streaming method");return await t(e,r)}const u=null==r?l:(e,t)=>r({method:c,requestStream:!0,request:e,responseStream:!1,next:l},t);return(t,r)=>{const n=(0,o.createCallContext)(t);Promise.resolve().then((async()=>{const e=u((0,i.readableToAsyncIterable)(t),n)[Symbol.asyncIterator]();try{let t=await e.next();for(;;)if(t.done){if(null!=t.value)return t.value;t=await e.throw(new Error("A middleware returned void, but expected to return a message for client streaming method"))}else t=await e.throw(new Error("A middleware yielded a message, but expected to only return a message for client streaming method"))}finally{n.sendHeader()}})).then((e=>{r(null,e,(0,a.convertMetadataToGrpcJs)(n.trailer))}),(t=>{r((0,s.createErrorStatusObject)(e.path,t,(0,a.convertMetadataToGrpcJs)(n.trailer)))}))}}},9371:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createServerStreamingMethodHandler=void 0;const n=r(7803),o=r(21473),s=r(37407),i=r(30178),a=r(8695);t.createServerStreamingMethodHandler=function(e,t,r){const c={path:e.path,requestStream:e.requestStream,responseStream:e.responseStream,options:e.options};async function*l(e,r){if((0,s.isAsyncIterable)(e))throw new Error("A middleware passed invalid request to next(): expected a single message for server streaming method");yield*t(e,r)}const u=null==r?l:(e,t)=>r({method:c,requestStream:!1,request:e,responseStream:!0,next:l},t);return t=>{const r=(0,i.createCallContext)(t);Promise.resolve().then((async()=>{const e=u(t.request,r)[Symbol.asyncIterator]();try{let o=await e.next();for(;;)if(o.done){if(null==o.value)break;o=await e.throw(new Error("A middleware returned a message, but expected to return void for server streaming method"))}else{try{r.sendHeader(),t.write(o.value)||await(0,n.waitForEvent)(r.signal,t,"drain")}catch(t){o=(0,n.isAbortError)(t)?await e.return():await e.throw(t);continue}o=await e.next()}}finally{r.sendHeader()}})).then((()=>{t.end((0,o.convertMetadataToGrpcJs)(r.trailer))}),(n=>{t.destroy((0,a.createErrorStatusObject)(e.path,n,(0,o.convertMetadataToGrpcJs)(r.trailer)))}))}}},10047:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUnaryMethodHandler=void 0;const n=r(21473),o=r(37407),s=r(30178),i=r(8695);t.createUnaryMethodHandler=function(e,t,r){const a={path:e.path,requestStream:e.requestStream,responseStream:e.responseStream,options:e.options};async function*c(e,r){if((0,o.isAsyncIterable)(e))throw new Error("A middleware passed invalid request to next(): expected a single message for unary method");return await t(e,r)}const l=null==r?c:(e,t)=>r({method:a,requestStream:!1,request:e,responseStream:!1,next:c},t);return(t,r)=>{const o=(0,s.createCallContext)(t);Promise.resolve().then((async()=>{const e=l(t.request,o)[Symbol.asyncIterator]();try{let t=await e.next();for(;;)if(t.done){if(null!=t.value)return t.value;t=await e.throw(new Error("A middleware returned void, but expected to return a message for unary method"))}else t=await e.throw(new Error("A middleware yielded a message, but expected to only return a message for unary method"))}finally{o.sendHeader()}})).then((e=>{r(null,e,(0,n.convertMetadataToGrpcJs)(o.trailer))}),(t=>{r((0,i.createErrorStatusObject)(e.path,t,(0,n.convertMetadataToGrpcJs)(o.trailer)))}))}}},52867:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGrpcJsServiceDefinition=t.fromGrpcJsServiceDefinition=void 0,t.fromGrpcJsServiceDefinition=function(e){const t={};for(const[r,n]of Object.entries(e))t[r]={path:n.path,requestStream:n.requestStream,responseStream:n.responseStream,requestDeserialize:e=>n.requestDeserialize(Buffer.from(e)),requestSerialize:n.requestSerialize,responseDeserialize:e=>n.responseDeserialize(Buffer.from(e)),responseSerialize:n.responseSerialize,options:{}};return t},t.isGrpcJsServiceDefinition=function(e){return Object.values(e).every((e=>"object"==typeof e&&null!=e&&"string"==typeof e.path))}},83595:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toGrpcJsMethodDefinition=t.toGrpcJsServiceDefinition=t.normalizeServiceDefinition=void 0;const n=r(52867),o=r(91603);function s(e){return{path:e.path,requestStream:e.requestStream,responseStream:e.responseStream,requestDeserialize:e.requestDeserialize,requestSerialize:t=>Buffer.from(e.requestSerialize(t)),responseDeserialize:e.responseDeserialize,responseSerialize:t=>Buffer.from(e.responseSerialize(t))}}t.normalizeServiceDefinition=function(e){return(0,n.isGrpcJsServiceDefinition)(e)?(0,n.fromGrpcJsServiceDefinition)(e):(0,o.isTsProtoServiceDefinition)(e)?(0,o.fromTsProtoServiceDefinition)(e):e},t.toGrpcJsServiceDefinition=function(e){const t={};for(const[r,n]of Object.entries(e))t[r]=s(n);return t},t.toGrpcJsMethodDefinition=s},91603:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTsProtoServiceDefinition=t.fromTsProtoServiceDefinition=void 0,t.fromTsProtoServiceDefinition=function(e){const t={};for(const[r,n]of Object.entries(e.methods)){const o=n.requestType.encode,s=n.requestType.fromPartial,i=n.responseType.encode,a=n.responseType.fromPartial;t[r]={path:`/${e.fullName}/${n.name}`,requestStream:n.requestStream,responseStream:n.responseStream,requestDeserialize:n.requestType.decode,requestSerialize:null!=s?e=>o(s(e)).finish():e=>o(e).finish(),responseDeserialize:n.responseType.decode,responseSerialize:null!=a?e=>i(a(e)).finish():e=>i(e).finish(),options:n.options}}return t},t.isTsProtoServiceDefinition=function(e){return"name"in e&&"fullName"in e&&"methods"in e}},21473:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.convertMetadataFromGrpcJs=t.convertMetadataToGrpcJs=void 0;const i=s(r(56112)),a=r(9612);t.convertMetadataToGrpcJs=function(e){const t=new i.Metadata;for(const[r,n]of e)for(const e of n)t.add(r,"string"==typeof e?e:Buffer.from(e));return t},t.convertMetadataFromGrpcJs=function(e){const t=(0,a.Metadata)();for(const r of Object.keys(e.getMap())){const n=e.get(r);t.set(r,n)}return t}},37407:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAsyncIterable=void 0,t.isAsyncIterable=function(e){return null!=e&&Symbol.asyncIterator in e}},96199:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patchClientWritableStream=void 0,t.patchClientWritableStream=function(e){const t=e.call.call,r=t.attachHttp2Stream;t.attachHttp2Stream=function(e,...t){const n=e.write;return e.write=function(...e){return!!this.writableEnded||n.apply(this,e)},r.call(this,e,...t)}}},61176:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readableToAsyncIterable=void 0,t.readableToAsyncIterable=async function*(e){let t=r;function n(n){this===e?(t(),t=r):t=n}const o=e._readableState;let s=o.errored,i=o.errorEmitted,a=o.endEmitted,c=o.closeEmitted;for(e.on("readable",n).on("error",(function(e){s=e,i=!0,n.call(this)})).on("end",(function(){a=!0,n.call(this)})).on("close",(function(){c=!0,n.call(this)}));;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(i)throw s;if(a)break;if(c)break;await new Promise(n)}}};const r=()=>{}},62485:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addAdminServicesToServer=t.registerAdminService=void 0;const r=[];t.registerAdminService=function(e,t){r.push({getServiceDefinition:e,getHandlers:t})},t.addAdminServicesToServer=function(e){for(const{getServiceDefinition:t,getHandlers:n}of r)e.addService(t(),n())}},19722:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackoffTimeout=void 0,t.BackoffTimeout=class{constructor(e,t){this.callback=e,this.initialDelay=1e3,this.multiplier=1.6,this.maxDelay=12e4,this.jitter=.2,this.running=!1,this.hasRef=!0,this.startTime=new Date,t&&(t.initialDelay&&(this.initialDelay=t.initialDelay),t.multiplier&&(this.multiplier=t.multiplier),t.jitter&&(this.jitter=t.jitter),t.maxDelay&&(this.maxDelay=t.maxDelay)),this.nextDelay=this.initialDelay,this.timerId=setTimeout((()=>{}),0),clearTimeout(this.timerId)}runTimer(e){var t,r;clearTimeout(this.timerId),this.timerId=setTimeout((()=>{this.callback(),this.running=!1}),e),this.hasRef||null===(r=(t=this.timerId).unref)||void 0===r||r.call(t)}runOnce(){this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);const e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),t=e*this.jitter;var r,n;this.nextDelay=e+(r=-t,n=t,Math.random()*(n-r)+r)}stop(){clearTimeout(this.timerId),this.running=!1}reset(){if(this.nextDelay=this.initialDelay,this.running){const e=new Date,t=this.startTime;t.setMilliseconds(t.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<t?this.runTimer(t.getTime()-e.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var e,t;this.hasRef=!0,null===(t=(e=this.timerId).ref)||void 0===t||t.call(e)}unref(){var e,t;this.hasRef=!1,null===(t=(e=this.timerId).unref)||void 0===t||t.call(e)}}},37220:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallCredentials=void 0;const n=r(45935);class o{static createFromMetadataGenerator(e){return new i(e)}static createFromGoogleCredential(e){return o.createFromMetadataGenerator(((t,r)=>{let o;var s;o="getRequestHeaders"in(s=e)&&"function"==typeof s.getRequestHeaders?e.getRequestHeaders(t.service_url):new Promise(((r,n)=>{e.getRequestMetadata(t.service_url,((e,t)=>{e?n(e):t?r(t):n(new Error("Headers not set by metadata plugin"))}))})),o.then((e=>{const t=new n.Metadata;for(const r of Object.keys(e))t.add(r,e[r]);r(null,t)}),(e=>{r(e)}))}))}static createEmpty(){return new a}}t.CallCredentials=o;class s extends o{constructor(e){super(),this.creds=e}async generateMetadata(e){const t=new n.Metadata,r=await Promise.all(this.creds.map((t=>t.generateMetadata(e))));for(const e of r)t.merge(e);return t}compose(e){return new s(this.creds.concat([e]))}_equals(e){return this===e||e instanceof s&&this.creds.every(((t,r)=>t._equals(e.creds[r])))}}class i extends o{constructor(e){super(),this.metadataGenerator=e}generateMetadata(e){return new Promise(((t,r)=>{this.metadataGenerator(e,((e,n)=>{void 0!==n?t(n):r(e)}))}))}compose(e){return new s([this,e])}_equals(e){return this===e||e instanceof i&&this.metadataGenerator===e.metadataGenerator}}class a extends o{generateMetadata(e){return Promise.resolve(new n.Metadata)}compose(e){return e}_equals(e){return e instanceof a}}},72944:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterceptingListenerImpl=t.isInterceptingListener=void 0,t.isInterceptingListener=function(e){return void 0!==e.onReceiveMetadata&&1===e.onReceiveMetadata.length},t.InterceptingListenerImpl=class{constructor(e,t){this.listener=e,this.nextListener=t,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(e){this.processingMetadata=!0,this.listener.onReceiveMetadata(e,(e=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(e),this.processPendingMessage(),this.processPendingStatus()}))}onReceiveMessage(e){this.processingMessage=!0,this.listener.onReceiveMessage(e,(e=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=e,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(e),this.processPendingStatus())}))}onReceiveStatus(e){this.listener.onReceiveStatus(e,(e=>{this.processingMetadata||this.processingMessage?this.pendingStatus=e:this.nextListener.onReceiveStatus(e)}))}}},24891:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNextCallNumber=void 0;let r=0;t.getNextCallNumber=function(){return r++}},31141:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientDuplexStreamImpl=t.ClientWritableStreamImpl=t.ClientReadableStreamImpl=t.ClientUnaryCallImpl=t.callErrorFromStatus=void 0;const n=r(82361),o=r(12781),s=r(18585);t.callErrorFromStatus=function(e,t){const r=`${e.code} ${s.Status[e.code]}: ${e.details}`,n=`${new Error(r).stack}\nfor call at\n${t}`;return Object.assign(new Error(r),e,{stack:n})};class i extends n.EventEmitter{constructor(){super()}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}}t.ClientUnaryCallImpl=i;class a extends o.Readable{constructor(e){super({objectMode:!0}),this.deserialize=e}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}_read(e){var t;null===(t=this.call)||void 0===t||t.startRead()}}t.ClientReadableStreamImpl=a;class c extends o.Writable{constructor(e){super({objectMode:!0}),this.serialize=e}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}_write(e,t,r){var n;const o={callback:r},s=Number(t);Number.isNaN(s)||(o.flags=s),null===(n=this.call)||void 0===n||n.sendMessageWithContext(o,e)}_final(e){var t;null===(t=this.call)||void 0===t||t.halfClose(),e()}}t.ClientWritableStreamImpl=c;class l extends o.Duplex{constructor(e,t){super({objectMode:!0}),this.serialize=e,this.deserialize=t}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}_read(e){var t;null===(t=this.call)||void 0===t||t.startRead()}_write(e,t,r){var n;const o={callback:r},s=Number(t);Number.isNaN(s)||(o.flags=s),null===(n=this.call)||void 0===n||n.sendMessageWithContext(o,e)}_final(e){var t;null===(t=this.call)||void 0===t||t.halfClose(),e()}}t.ClientDuplexStreamImpl=l},24648:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelCredentials=void 0;const n=r(24404),o=r(37220),s=r(57631);function i(e,t){if(e&&!(e instanceof Buffer))throw new TypeError(`${t}, if provided, must be a Buffer.`)}class a{constructor(e){this.callCredentials=e||o.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl(e,t,r,o){var a;if(i(e,"Root certificate"),i(t,"Private key"),i(r,"Certificate chain"),t&&!r)throw new Error("Private key must be given with accompanying certificate chain");if(!t&&r)throw new Error("Certificate chain must be given with accompanying private key");const c=(0,n.createSecureContext)({ca:null!==(a=null!=e?e:(0,s.getDefaultRootsData)())&&void 0!==a?a:void 0,key:null!=t?t:void 0,cert:null!=r?r:void 0,ciphers:s.CIPHER_SUITES});return new l(c,null!=o?o:{})}static createFromSecureContext(e,t){return new l(e,null!=t?t:{})}static createInsecure(){return new c}}t.ChannelCredentials=a;class c extends a{constructor(e){super(e)}compose(e){throw new Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return!1}_equals(e){return e instanceof c}}class l extends a{constructor(e,t){super(),this.secureContext=e,this.verifyOptions=t,this.connectionOptions={secureContext:e},(null==t?void 0:t.checkServerIdentity)&&(this.connectionOptions.checkServerIdentity=t.checkServerIdentity)}compose(e){const t=this.callCredentials.compose(e);return new u(this,t)}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return!0}_equals(e){return this===e||e instanceof l&&this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity}}class u extends a{constructor(e,t){super(t),this.channelCredentials=e}compose(e){const t=this.callCredentials.compose(e);return new u(this.channelCredentials,t)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return!0}_equals(e){return this===e||e instanceof u&&this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials)}}},63910:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.channelOptionsEqual=t.recognizedOptions=void 0,t.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0},t.channelOptionsEqual=function(e,t){const r=Object.keys(e).sort(),n=Object.keys(t).sort();if(r.length!==n.length)return!1;for(let o=0;o<r.length;o+=1){if(r[o]!==n[o])return!1;if(e[r[o]]!==t[n[o]])return!1}return!0}},84476:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelImplementation=void 0;const n=r(24648),o=r(6112);t.ChannelImplementation=class{constructor(e,t,r){if("string"!=typeof e)throw new TypeError("Channel target must be a string");if(!(t instanceof n.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(r&&"object"!=typeof r)throw new TypeError("Channel options must be an object");this.internalChannel=new o.InternalChannel(e,t,r)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,t,r){this.internalChannel.watchConnectivityState(e,t,r)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,t,r,n,o){if("string"!=typeof e)throw new TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(e,t,r,n,o)}}},87876:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.getChannelzServiceDefinition=t.getChannelzHandlers=t.unregisterChannelzRef=t.registerChannelzSocket=t.registerChannelzServer=t.registerChannelzSubchannel=t.registerChannelzChannel=t.ChannelzCallTracker=t.ChannelzChildrenTracker=t.ChannelzTrace=void 0;const n=r(41808),o=r(99341),s=r(18585),i=r(45385),a=r(62485),c=r(38088);function l(e){return{channel_id:e.id,name:e.name}}function u(e){return{subchannel_id:e.id,name:e.name}}function d(e){return{socket_id:e.id,name:e.name}}t.ChannelzTrace=class{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(e,t,r){const n=new Date;this.events.push({description:t,severity:e,timestamp:n,childChannel:"channel"===(null==r?void 0:r.kind)?r:void 0,childSubchannel:"subchannel"===(null==r?void 0:r.kind)?r:void 0}),this.events.length>=64&&(this.events=this.events.slice(32)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:S(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map((e=>({description:e.description,severity:e.severity,timestamp:S(e.timestamp),channel_ref:e.childChannel?l(e.childChannel):null,subchannel_ref:e.childSubchannel?u(e.childSubchannel):null})))}}},t.ChannelzChildrenTracker=class{constructor(){this.channelChildren=new Map,this.subchannelChildren=new Map,this.socketChildren=new Map}refChild(e){var t,r,n;switch(e.kind){case"channel":{let r=null!==(t=this.channelChildren.get(e.id))&&void 0!==t?t:{ref:e,count:0};r.count+=1,this.channelChildren.set(e.id,r);break}case"subchannel":{let t=null!==(r=this.subchannelChildren.get(e.id))&&void 0!==r?r:{ref:e,count:0};t.count+=1,this.subchannelChildren.set(e.id,t);break}case"socket":{let t=null!==(n=this.socketChildren.get(e.id))&&void 0!==n?n:{ref:e,count:0};t.count+=1,this.socketChildren.set(e.id,t);break}}}unrefChild(e){switch(e.kind){case"channel":{let t=this.channelChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.channelChildren.delete(e.id):this.channelChildren.set(e.id,t));break}case"subchannel":{let t=this.subchannelChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.subchannelChildren.delete(e.id):this.subchannelChildren.set(e.id,t));break}case"socket":{let t=this.socketChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.socketChildren.delete(e.id):this.socketChildren.set(e.id,t));break}}}getChildLists(){const e=[];for(const{ref:t}of this.channelChildren.values())e.push(t);const t=[];for(const{ref:e}of this.subchannelChildren.values())t.push(e);const r=[];for(const{ref:e}of this.socketChildren.values())r.push(e);return{channels:e,subchannels:t,sockets:r}}},t.ChannelzCallTracker=class{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}};let h=1;function p(){return h++}const f=[],g=[],m=[],y=[];function v(e){if(""===e)return[];const t=e.split(":").map((e=>function(e){const t=Number.parseInt(e,16);return[t/256|0,t%256]}(e)));return[].concat(...t)}function _(e){if((0,n.isIPv4)(e))return Buffer.from(Uint8Array.from(e.split(".").map((e=>Number.parseInt(e)))));if((0,n.isIPv6)(e)){let t,r;const n=e.indexOf("::");-1===n?(t=e,r=""):(t=e.substring(0,n),r=e.substring(n+2));const o=Buffer.from(v(t)),s=Buffer.from(v(r)),i=Buffer.alloc(16-o.length-s.length,0);return Buffer.concat([o,i,s])}return null}function b(e){switch(e){case o.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case o.ConnectivityState.IDLE:return{state:"IDLE"};case o.ConnectivityState.READY:return{state:"READY"};case o.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case o.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function S(e){if(!e)return null;const t=e.getTime();return{seconds:t/1e3|0,nanos:t%1e3*1e6}}function E(e){const t=e.getInfo();return{ref:l(e.ref),data:{target:t.target,state:b(t.state),calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:S(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},channel_ref:t.children.channels.map((e=>l(e))),subchannel_ref:t.children.subchannels.map((e=>u(e)))}}function w(e,t){const r=Number.parseInt(e.request.channel_id),n=f[r];void 0!==n?t(null,{channel:E(n)}):t({code:s.Status.NOT_FOUND,details:"No channel data found for id "+r})}function A(e,t){const r=Number.parseInt(e.request.max_results),n=[];let o=Number.parseInt(e.request.start_channel_id);for(;o<f.length;o++){const e=f[o];if(void 0!==e&&(n.push(E(e)),n.length>=r))break}t(null,{channel:n,end:o>=m.length})}function T(e){const t=e.getInfo();return{ref:(r=e.ref,{server_id:r.id}),data:{calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:S(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},listen_socket:t.listenerChildren.sockets.map((e=>d(e)))};var r}function C(e,t){const r=Number.parseInt(e.request.server_id),n=m[r];void 0!==n?t(null,{server:T(n)}):t({code:s.Status.NOT_FOUND,details:"No server data found for id "+r})}function I(e,t){const r=Number.parseInt(e.request.max_results),n=[];let o=Number.parseInt(e.request.start_server_id);for(;o<m.length;o++){const e=m[o];if(void 0!==e&&(n.push(T(e)),n.length>=r))break}t(null,{server:n,end:o>=m.length})}function R(e,t){const r=Number.parseInt(e.request.subchannel_id),n=g[r];if(void 0===n)return void t({code:s.Status.NOT_FOUND,details:"No subchannel data found for id "+r});const o=n.getInfo();t(null,{subchannel:{ref:u(n.ref),data:{target:o.target,state:b(o.state),calls_started:o.callTracker.callsStarted,calls_succeeded:o.callTracker.callsSucceeded,calls_failed:o.callTracker.callsFailed,last_call_started_timestamp:S(o.callTracker.lastCallStartedTimestamp),trace:o.trace.getTraceMessage()},socket_ref:o.children.sockets.map((e=>d(e)))}})}function O(e){var t;return(0,i.isTcpSubchannelAddress)(e)?{address:"tcpip_address",tcpip_address:{ip_address:null!==(t=_(e.host))&&void 0!==t?t:void 0,port:e.port}}:{address:"uds_address",uds_address:{filename:e.path}}}function k(e,t){var r,n,o,i,a;const c=Number.parseInt(e.request.socket_id),l=y[c];if(void 0===l)return void t({code:s.Status.NOT_FOUND,details:"No socket data found for id "+c});const u=l.getInfo(),h=u.security?{model:"tls",tls:{cipher_suite:u.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:null!==(r=u.security.cipherSuiteStandardName)&&void 0!==r?r:void 0,other_name:null!==(n=u.security.cipherSuiteOtherName)&&void 0!==n?n:void 0,local_certificate:null!==(o=u.security.localCertificate)&&void 0!==o?o:void 0,remote_certificate:null!==(i=u.security.remoteCertificate)&&void 0!==i?i:void 0}}:null;t(null,{socket:{ref:d(l.ref),local:u.localAddress?O(u.localAddress):null,remote:u.remoteAddress?O(u.remoteAddress):null,remote_name:null!==(a=u.remoteName)&&void 0!==a?a:void 0,security:h,data:{keep_alives_sent:u.keepAlivesSent,streams_started:u.streamsStarted,streams_succeeded:u.streamsSucceeded,streams_failed:u.streamsFailed,last_local_stream_created_timestamp:S(u.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:S(u.lastRemoteStreamCreatedTimestamp),messages_received:u.messagesReceived,messages_sent:u.messagesSent,last_message_received_timestamp:S(u.lastMessageReceivedTimestamp),last_message_sent_timestamp:S(u.lastMessageSentTimestamp),local_flow_control_window:u.localFlowControlWindow?{value:u.localFlowControlWindow}:null,remote_flow_control_window:u.remoteFlowControlWindow?{value:u.remoteFlowControlWindow}:null}}})}function N(e,t){const r=Number.parseInt(e.request.server_id),n=m[r];if(void 0===n)return void t({code:s.Status.NOT_FOUND,details:"No server data found for id "+r});const o=Number.parseInt(e.request.start_socket_id),i=Number.parseInt(e.request.max_results),a=n.getInfo().sessionChildren.sockets.sort(((e,t)=>e.id-t.id)),c=[];let l=0;for(;l<a.length&&!(a[l].id>=o&&(c.push(d(a[l])),c.length>=i));l++);t(null,{socket_ref:c,end:l>=a.length})}function P(){return{GetChannel:w,GetTopChannels:A,GetServer:C,GetServers:I,GetSubchannel:R,GetSocket:k,GetServerSockets:N}}t.registerChannelzChannel=function(e,t,r){const n=p(),o={id:n,name:e,kind:"channel"};return r&&(f[n]={ref:o,getInfo:t}),o},t.registerChannelzSubchannel=function(e,t,r){const n=p(),o={id:n,name:e,kind:"subchannel"};return r&&(g[n]={ref:o,getInfo:t}),o},t.registerChannelzServer=function(e,t){const r=p(),n={id:r,kind:"server"};return t&&(m[r]={ref:n,getInfo:e}),n},t.registerChannelzSocket=function(e,t,r){const n=p(),o={id:n,name:e,kind:"socket"};return r&&(y[n]={ref:o,getInfo:t}),o},t.unregisterChannelzRef=function(e){switch(e.kind){case"channel":return void delete f[e.id];case"subchannel":return void delete g[e.id];case"server":return void delete m[e.id];case"socket":return void delete y[e.id]}},t.getChannelzHandlers=P;let M=null;function L(){if(M)return M;const e=(0,r(59421).J_)("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]}),t=(0,c.loadPackageDefinition)(e);return M=t.grpc.channelz.v1.Channelz.service,M}t.getChannelzServiceDefinition=L,t.setup=function(){(0,a.registerAdminService)(L,P)}},71061:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInterceptingCall=t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.InterceptorConfigurationError=void 0;const n=r(45935),o=r(72944),s=r(18585),i=r(24385);class a extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,a)}}t.InterceptorConfigurationError=a,t.ListenerBuilder=class{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}},t.RequesterBuilder=class{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}};const c={onReceiveMetadata:(e,t)=>{t(e)},onReceiveMessage:(e,t)=>{t(e)},onReceiveStatus:(e,t)=>{t(e)}},l={start:(e,t,r)=>{r(e,t)},sendMessage:(e,t)=>{t(e)},halfClose:e=>{e()},cancel:e=>{e()}};t.InterceptingCall=class{constructor(e,t){var r,n,o,s;this.nextCall=e,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,this.requester=t?{start:null!==(r=t.start)&&void 0!==r?r:l.start,sendMessage:null!==(n=t.sendMessage)&&void 0!==n?n:l.sendMessage,halfClose:null!==(o=t.halfClose)&&void 0!==o?o:l.halfClose,cancel:null!==(s=t.cancel)&&void 0!==s?s:l.cancel}:l}cancelWithStatus(e,t){this.requester.cancel((()=>{this.nextCall.cancelWithStatus(e,t)}))}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(e,t){var r,n,s,i,a,l;const u={onReceiveMetadata:null!==(n=null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r?void 0:r.bind(t))&&void 0!==n?n:e=>{},onReceiveMessage:null!==(i=null===(s=null==t?void 0:t.onReceiveMessage)||void 0===s?void 0:s.bind(t))&&void 0!==i?i:e=>{},onReceiveStatus:null!==(l=null===(a=null==t?void 0:t.onReceiveStatus)||void 0===a?void 0:a.bind(t))&&void 0!==l?l:e=>{}};this.processingMetadata=!0,this.requester.start(e,u,((e,t)=>{var r,n,s;let i;if(this.processingMetadata=!1,(0,o.isInterceptingListener)(t))i=t;else{const e={onReceiveMetadata:null!==(r=t.onReceiveMetadata)&&void 0!==r?r:c.onReceiveMetadata,onReceiveMessage:null!==(n=t.onReceiveMessage)&&void 0!==n?n:c.onReceiveMessage,onReceiveStatus:null!==(s=t.onReceiveStatus)&&void 0!==s?s:c.onReceiveStatus};i=new o.InterceptingListenerImpl(e,u)}this.nextCall.start(e,i),this.processPendingMessage(),this.processPendingHalfClose()}))}sendMessageWithContext(e,t){this.processingMessage=!0,this.requester.sendMessage(t,(r=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=t):(this.nextCall.sendMessageWithContext(e,r),this.processPendingHalfClose())}))}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose((()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()}))}};class u{constructor(e,t){this.call=e,this.methodDefinition=t}cancelWithStatus(e,t){this.call.cancelWithStatus(e,t)}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,t){let r;try{r=this.methodDefinition.requestSerialize(t)}catch(e){return void this.call.cancelWithStatus(s.Status.INTERNAL,`Request message serialization failure: ${(0,i.getErrorMessage)(e)}`)}this.call.sendMessageWithContext(e,r)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,t){let r=null;this.call.start(e,{onReceiveMetadata:e=>{var r;null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r||r.call(t,e)},onReceiveMessage:e=>{var o;let a;try{a=this.methodDefinition.responseDeserialize(e)}catch(e){return r={code:s.Status.INTERNAL,details:`Response message parsing error: ${(0,i.getErrorMessage)(e)}`,metadata:new n.Metadata},void this.call.cancelWithStatus(r.code,r.details)}null===(o=null==t?void 0:t.onReceiveMessage)||void 0===o||o.call(t,a)},onReceiveStatus:e=>{var n,o;r?null===(n=null==t?void 0:t.onReceiveStatus)||void 0===n||n.call(t,r):null===(o=null==t?void 0:t.onReceiveStatus)||void 0===o||o.call(t,e)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}}class d extends u{constructor(e,t){super(e,t)}start(e,t){var r,n;let o=!1;const s={onReceiveMetadata:null!==(n=null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r?void 0:r.bind(t))&&void 0!==n?n:e=>{},onReceiveMessage:e=>{var r;o=!0,null===(r=null==t?void 0:t.onReceiveMessage)||void 0===r||r.call(t,e)},onReceiveStatus:e=>{var r,n;o||null===(r=null==t?void 0:t.onReceiveMessage)||void 0===r||r.call(t,null),null===(n=null==t?void 0:t.onReceiveStatus)||void 0===n||n.call(t,e)}};super.start(e,s),this.call.startRead()}}class h extends u{}t.getInterceptingCall=function(e,t,r,n){if(e.clientInterceptors.length>0&&e.clientInterceptorProviders.length>0)throw new a("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(e.callInterceptors.length>0&&e.callInterceptorProviders.length>0)throw new a("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let o=[];o=e.callInterceptors.length>0||e.callInterceptorProviders.length>0?[].concat(e.callInterceptors,e.callInterceptorProviders.map((e=>e(t)))).filter((e=>e)):[].concat(e.clientInterceptors,e.clientInterceptorProviders.map((e=>e(t)))).filter((e=>e));const s=Object.assign({},r,{method_definition:t});return o.reduceRight(((e,t)=>r=>t(r,e)),(e=>function(e,t,r){const n=function(e,t,r){var n,o;const s=null!==(n=r.deadline)&&void 0!==n?n:1/0,i=r.host,a=null!==(o=r.parent)&&void 0!==o?o:null,c=r.propagate_flags,l=r.credentials,u=e.createCall(t,s,i,a,c);return l&&u.setCredentials(l),u}(e,r.path,t);return r.responseStream?new h(n,r):new d(n,r)}(n,e,t)))(s)}},20985:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;const n=r(31141),o=r(84476),s=r(99341),i=r(18585),a=r(45935),c=r(71061),l=Symbol(),u=Symbol(),d=Symbol(),h=Symbol();function p(e){return"function"==typeof e}function f(e){return e.stack.split("\n").slice(1).join("\n")}t.Client=class{constructor(e,t,r={}){var n,s;if(r=Object.assign({},r),this[u]=null!==(n=r.interceptors)&&void 0!==n?n:[],delete r.interceptors,this[d]=null!==(s=r.interceptor_providers)&&void 0!==s?s:[],delete r.interceptor_providers,this[u].length>0&&this[d].length>0)throw new Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[h]=r.callInvocationTransformer,delete r.callInvocationTransformer,r.channelOverride)this[l]=r.channelOverride;else if(r.channelFactoryOverride){const n=r.channelFactoryOverride;delete r.channelFactoryOverride,this[l]=n(e,t,r)}else this[l]=new o.ChannelImplementation(e,t,r)}close(){this[l].close()}getChannel(){return this[l]}waitForReady(e,t){const r=n=>{if(n)return void t(new Error("Failed to connect before the deadline"));let o;try{o=this[l].getConnectivityState(!0)}catch(e){return void t(new Error("The channel has been closed"))}if(o===s.ConnectivityState.READY)t();else try{this[l].watchConnectivityState(o,e,r)}catch(e){t(new Error("The channel has been closed"))}};setImmediate(r)}checkOptionalUnaryResponseArguments(e,t,r){if(p(e))return{metadata:new a.Metadata,options:{},callback:e};if(p(t))return e instanceof a.Metadata?{metadata:e,options:{},callback:t}:{metadata:new a.Metadata,options:e,callback:t};if(!(e instanceof a.Metadata&&t instanceof Object&&p(r)))throw new Error("Incorrect arguments passed");return{metadata:e,options:t,callback:r}}makeUnaryRequest(e,t,r,o,s,a,p){var g,m;const y=this.checkOptionalUnaryResponseArguments(s,a,p),v={path:e,requestStream:!1,responseStream:!1,requestSerialize:t,responseDeserialize:r};let _={argument:o,metadata:y.metadata,call:new n.ClientUnaryCallImpl,channel:this[l],methodDefinition:v,callOptions:y.options,callback:y.callback};this[h]&&(_=this[h](_));const b=_.call,S={clientInterceptors:this[u],clientInterceptorProviders:this[d],callInterceptors:null!==(g=_.callOptions.interceptors)&&void 0!==g?g:[],callInterceptorProviders:null!==(m=_.callOptions.interceptor_providers)&&void 0!==m?m:[]},E=(0,c.getInterceptingCall)(S,_.methodDefinition,_.callOptions,_.channel);b.call=E;let w=null,A=!1;const T=new Error;return E.start(_.metadata,{onReceiveMetadata:e=>{b.emit("metadata",e)},onReceiveMessage(e){null!==w&&E.cancelWithStatus(i.Status.INTERNAL,"Too many responses received"),w=e},onReceiveStatus(e){if(!A){if(A=!0,e.code===i.Status.OK)if(null===w){const t=f(T);_.callback((0,n.callErrorFromStatus)({code:i.Status.INTERNAL,details:"No message received",metadata:e.metadata},t))}else _.callback(null,w);else{const t=f(T);_.callback((0,n.callErrorFromStatus)(e,t))}b.emit("status",e)}}}),E.sendMessage(o),E.halfClose(),b}makeClientStreamRequest(e,t,r,o,s,a){var p,g;const m=this.checkOptionalUnaryResponseArguments(o,s,a),y={path:e,requestStream:!0,responseStream:!1,requestSerialize:t,responseDeserialize:r};let v={metadata:m.metadata,call:new n.ClientWritableStreamImpl(t),channel:this[l],methodDefinition:y,callOptions:m.options,callback:m.callback};this[h]&&(v=this[h](v));const _=v.call,b={clientInterceptors:this[u],clientInterceptorProviders:this[d],callInterceptors:null!==(p=v.callOptions.interceptors)&&void 0!==p?p:[],callInterceptorProviders:null!==(g=v.callOptions.interceptor_providers)&&void 0!==g?g:[]},S=(0,c.getInterceptingCall)(b,v.methodDefinition,v.callOptions,v.channel);_.call=S;let E=null,w=!1;const A=new Error;return S.start(v.metadata,{onReceiveMetadata:e=>{_.emit("metadata",e)},onReceiveMessage(e){null!==E&&S.cancelWithStatus(i.Status.INTERNAL,"Too many responses received"),E=e},onReceiveStatus(e){if(!w){if(w=!0,e.code===i.Status.OK)if(null===E){const t=f(A);v.callback((0,n.callErrorFromStatus)({code:i.Status.INTERNAL,details:"No message received",metadata:e.metadata},t))}else v.callback(null,E);else{const t=f(A);v.callback((0,n.callErrorFromStatus)(e,t))}_.emit("status",e)}}}),_}checkMetadataAndOptions(e,t){let r,n;return e instanceof a.Metadata?(r=e,n=t||{}):(n=e||{},r=new a.Metadata),{metadata:r,options:n}}makeServerStreamRequest(e,t,r,o,s,a){var p,g;const m=this.checkMetadataAndOptions(s,a),y={path:e,requestStream:!1,responseStream:!0,requestSerialize:t,responseDeserialize:r};let v={argument:o,metadata:m.metadata,call:new n.ClientReadableStreamImpl(r),channel:this[l],methodDefinition:y,callOptions:m.options};this[h]&&(v=this[h](v));const _=v.call,b={clientInterceptors:this[u],clientInterceptorProviders:this[d],callInterceptors:null!==(p=v.callOptions.interceptors)&&void 0!==p?p:[],callInterceptorProviders:null!==(g=v.callOptions.interceptor_providers)&&void 0!==g?g:[]},S=(0,c.getInterceptingCall)(b,v.methodDefinition,v.callOptions,v.channel);_.call=S;let E=!1;const w=new Error;return S.start(v.metadata,{onReceiveMetadata(e){_.emit("metadata",e)},onReceiveMessage(e){_.push(e)},onReceiveStatus(e){if(!E){if(E=!0,_.push(null),e.code!==i.Status.OK){const t=f(w);_.emit("error",(0,n.callErrorFromStatus)(e,t))}_.emit("status",e)}}}),S.sendMessage(o),S.halfClose(),_}makeBidiStreamRequest(e,t,r,o,s){var a,p;const g=this.checkMetadataAndOptions(o,s),m={path:e,requestStream:!0,responseStream:!0,requestSerialize:t,responseDeserialize:r};let y={metadata:g.metadata,call:new n.ClientDuplexStreamImpl(t,r),channel:this[l],methodDefinition:m,callOptions:g.options};this[h]&&(y=this[h](y));const v=y.call,_={clientInterceptors:this[u],clientInterceptorProviders:this[d],callInterceptors:null!==(a=y.callOptions.interceptors)&&void 0!==a?a:[],callInterceptorProviders:null!==(p=y.callOptions.interceptor_providers)&&void 0!==p?p:[]},b=(0,c.getInterceptingCall)(_,y.methodDefinition,y.callOptions,y.channel);v.call=b;let S=!1;const E=new Error;return b.start(y.metadata,{onReceiveMetadata(e){v.emit("metadata",e)},onReceiveMessage(e){v.push(e)},onReceiveStatus(e){if(!S){if(S=!0,v.push(null),e.code!==i.Status.OK){const t=f(E);v.emit("error",(0,n.callErrorFromStatus)(e,t))}v.emit("status",e)}}}),v}}},49190:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionAlgorithms=void 0,(r=t.CompressionAlgorithms||(t.CompressionAlgorithms={}))[r.identity=0]="identity",r[r.deflate=1]="deflate",r[r.gzip=2]="gzip"},81517:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionFilterFactory=t.CompressionFilter=void 0;const n=r(59796),o=r(49190),s=r(18585),i=r(28712),a=r(11712);class c{async writeMessage(e,t){let r=e;t&&(r=await this.compressMessage(r));const n=Buffer.allocUnsafe(r.length+5);return n.writeUInt8(t?1:0,0),n.writeUInt32BE(r.length,1),r.copy(n,5),n}async readMessage(e){const t=1===e.readUInt8(0);let r=e.slice(5);return t&&(r=await this.decompressMessage(r)),r}}class l extends c{async compressMessage(e){return e}async writeMessage(e,t){const r=Buffer.allocUnsafe(e.length+5);return r.writeUInt8(0,0),r.writeUInt32BE(e.length,1),e.copy(r,5),r}decompressMessage(e){return Promise.reject(new Error('Received compressed message but "grpc-encoding" header was identity'))}}class u extends c{compressMessage(e){return new Promise(((t,r)=>{n.deflate(e,((e,n)=>{e?r(e):t(n)}))}))}decompressMessage(e){return new Promise(((t,r)=>{n.inflate(e,((e,n)=>{e?r(e):t(n)}))}))}}class d extends c{compressMessage(e){return new Promise(((t,r)=>{n.gzip(e,((e,n)=>{e?r(e):t(n)}))}))}decompressMessage(e){return new Promise(((t,r)=>{n.unzip(e,((e,n)=>{e?r(e):t(n)}))}))}}class h extends c{constructor(e){super(),this.compressionName=e}compressMessage(e){return Promise.reject(new Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(new Error(`Compression method not supported: ${this.compressionName}`))}}function p(e){switch(e){case"identity":return new l;case"deflate":return new u;case"gzip":return new d;default:return new h(e)}}class f extends i.BaseFilter{constructor(e,t){var r;super(),this.sharedFilterConfig=t,this.sendCompression=new l,this.receiveCompression=new l,this.currentCompressionAlgorithm="identity";const n=e["grpc.default_compression_algorithm"];if(void 0!==n)if("number"==typeof(i=n)&&"string"==typeof o.CompressionAlgorithms[i]){const e=o.CompressionAlgorithms[n],s=null===(r=t.serverSupportedEncodingHeader)||void 0===r?void 0:r.split(",");s&&!s.includes(e)||(this.currentCompressionAlgorithm=e,this.sendCompression=p(this.currentCompressionAlgorithm))}else a.log(s.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${n}`);var i}async sendMetadata(e){const t=await e;return t.set("grpc-accept-encoding","identity,deflate,gzip"),t.set("accept-encoding","identity"),"identity"===this.currentCompressionAlgorithm?t.remove("grpc-encoding"):t.set("grpc-encoding",this.currentCompressionAlgorithm),t}receiveMetadata(e){const t=e.get("grpc-encoding");if(t.length>0){const e=t[0];"string"==typeof e&&(this.receiveCompression=p(e))}e.remove("grpc-encoding");const r=e.get("grpc-accept-encoding")[0];return r&&(this.sharedFilterConfig.serverSupportedEncodingHeader=r,r.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new l,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}async sendMessage(e){var t;const r=await e;let n;return n=!(this.sendCompression instanceof l)&&0==(2&(null!==(t=r.flags)&&void 0!==t?t:0)),{message:await this.sendCompression.writeMessage(r.message,n),flags:r.flags}}async receiveMessage(e){return this.receiveCompression.readMessage(await e)}}t.CompressionFilter=f,t.CompressionFilterFactory=class{constructor(e,t){this.channel=e,this.options=t,this.sharedFilterConfig={}}createFilter(){return new f(this.options,this.sharedFilterConfig)}}},99341:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectivityState=void 0,(r=t.ConnectivityState||(t.ConnectivityState={}))[r.IDLE=0]="IDLE",r[r.CONNECTING=1]="CONNECTING",r[r.READY=2]="READY",r[r.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",r[r.SHUTDOWN=4]="SHUTDOWN"},18585:(e,t)=>{"use strict";var r,n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=t.Propagate=t.LogVerbosity=t.Status=void 0,(o=t.Status||(t.Status={}))[o.OK=0]="OK",o[o.CANCELLED=1]="CANCELLED",o[o.UNKNOWN=2]="UNKNOWN",o[o.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",o[o.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",o[o.NOT_FOUND=5]="NOT_FOUND",o[o.ALREADY_EXISTS=6]="ALREADY_EXISTS",o[o.PERMISSION_DENIED=7]="PERMISSION_DENIED",o[o.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",o[o.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",o[o.ABORTED=10]="ABORTED",o[o.OUT_OF_RANGE=11]="OUT_OF_RANGE",o[o.UNIMPLEMENTED=12]="UNIMPLEMENTED",o[o.INTERNAL=13]="INTERNAL",o[o.UNAVAILABLE=14]="UNAVAILABLE",o[o.DATA_LOSS=15]="DATA_LOSS",o[o.UNAUTHENTICATED=16]="UNAUTHENTICATED",(n=t.LogVerbosity||(t.LogVerbosity={}))[n.DEBUG=0]="DEBUG",n[n.INFO=1]="INFO",n[n.ERROR=2]="ERROR",n[n.NONE=3]="NONE",(r=t.Propagate||(t.Propagate={}))[r.DEADLINE=1]="DEADLINE",r[r.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",r[r.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",r[r.CANCELLATION=8]="CANCELLATION",r[r.DEFAULTS=65535]="DEFAULTS",t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1,t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4194304},87693:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restrictControlPlaneStatusCode=void 0;const n=r(18585),o=[n.Status.OK,n.Status.INVALID_ARGUMENT,n.Status.NOT_FOUND,n.Status.ALREADY_EXISTS,n.Status.FAILED_PRECONDITION,n.Status.ABORTED,n.Status.OUT_OF_RANGE,n.Status.DATA_LOSS];t.restrictControlPlaneStatusCode=function(e,t){return o.includes(e)?{code:n.Status.INTERNAL,details:`Invalid status from control plane: ${e} ${n.Status[e]} ${t}`}:{code:e,details:t}}},89454:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deadlineToString=t.getRelativeTimeout=t.getDeadlineTimeoutString=t.minDeadline=void 0,t.minDeadline=function(...e){let t=1/0;for(const r of e){const e=r instanceof Date?r.getTime():r;e<t&&(t=e)}return t};const r=[["m",1],["S",1e3],["M",6e4],["H",36e5]];t.getDeadlineTimeoutString=function(e){const t=(new Date).getTime();e instanceof Date&&(e=e.getTime());const n=Math.max(e-t,0);for(const[e,t]of r){const r=n/t;if(r<1e8)return String(Math.ceil(r))+e}throw new Error("Deadline is too far in the future")},t.getRelativeTimeout=function(e){const t=(e instanceof Date?e.getTime():e)-(new Date).getTime();return t<0?0:t>2147483647?1/0:t},t.deadlineToString=function(e){if(e instanceof Date)return e.toISOString();{const t=new Date(e);return Number.isNaN(t.getTime())?""+e:t.toISOString()}}},81795:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDuration=t.durationToMs=t.msToDuration=void 0,t.msToDuration=function(e){return{seconds:e/1e3|0,nanos:e%1e3*1e6|0}},t.durationToMs=function(e){return 1e3*e.seconds+e.nanos/1e6|0},t.isDuration=function(e){return"number"==typeof e.seconds&&"number"==typeof e.nanos}},24385:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorCode=t.getErrorMessage=void 0,t.getErrorMessage=function(e){return e instanceof Error?e.message:String(e)},t.getErrorCode=function(e){return"object"==typeof e&&null!==e&&"code"in e&&"number"==typeof e.code?e.code:null}},93761:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutlierDetectionLoadBalancingConfig=t.BaseSubchannelWrapper=t.registerAdminService=t.FilterStackFactory=t.BaseFilter=t.PickResultType=t.QueuePicker=t.UnavailablePicker=t.ChildLoadBalancerHandler=t.subchannelAddressToString=t.validateLoadBalancingConfig=t.getFirstUsableConfig=t.registerLoadBalancerType=t.createChildChannelControlHelper=t.BackoffTimeout=t.durationToMs=t.uriToString=t.registerResolver=t.log=t.trace=void 0;var n=r(11712);Object.defineProperty(t,"trace",{enumerable:!0,get:function(){return n.trace}}),Object.defineProperty(t,"log",{enumerable:!0,get:function(){return n.log}});var o=r(80480);Object.defineProperty(t,"registerResolver",{enumerable:!0,get:function(){return o.registerResolver}});var s=r(16191);Object.defineProperty(t,"uriToString",{enumerable:!0,get:function(){return s.uriToString}});var i=r(81795);Object.defineProperty(t,"durationToMs",{enumerable:!0,get:function(){return i.durationToMs}});var a=r(19722);Object.defineProperty(t,"BackoffTimeout",{enumerable:!0,get:function(){return a.BackoffTimeout}});var c=r(54821);Object.defineProperty(t,"createChildChannelControlHelper",{enumerable:!0,get:function(){return c.createChildChannelControlHelper}}),Object.defineProperty(t,"registerLoadBalancerType",{enumerable:!0,get:function(){return c.registerLoadBalancerType}}),Object.defineProperty(t,"getFirstUsableConfig",{enumerable:!0,get:function(){return c.getFirstUsableConfig}}),Object.defineProperty(t,"validateLoadBalancingConfig",{enumerable:!0,get:function(){return c.validateLoadBalancingConfig}});var l=r(45385);Object.defineProperty(t,"subchannelAddressToString",{enumerable:!0,get:function(){return l.subchannelAddressToString}});var u=r(69849);Object.defineProperty(t,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return u.ChildLoadBalancerHandler}});var d=r(84562);Object.defineProperty(t,"UnavailablePicker",{enumerable:!0,get:function(){return d.UnavailablePicker}}),Object.defineProperty(t,"QueuePicker",{enumerable:!0,get:function(){return d.QueuePicker}}),Object.defineProperty(t,"PickResultType",{enumerable:!0,get:function(){return d.PickResultType}});var h=r(28712);Object.defineProperty(t,"BaseFilter",{enumerable:!0,get:function(){return h.BaseFilter}});var p=r(74574);Object.defineProperty(t,"FilterStackFactory",{enumerable:!0,get:function(){return p.FilterStackFactory}});var f=r(62485);Object.defineProperty(t,"registerAdminService",{enumerable:!0,get:function(){return f.registerAdminService}});var g=r(44027);Object.defineProperty(t,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return g.BaseSubchannelWrapper}});var m=r(60828);Object.defineProperty(t,"OutlierDetectionLoadBalancingConfig",{enumerable:!0,get:function(){return m.OutlierDetectionLoadBalancingConfig}})},74574:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterStackFactory=t.FilterStack=void 0;class r{constructor(e){this.filters=e}sendMetadata(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMetadata(t);return t}receiveMetadata(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMetadata(t);return t}sendMessage(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMessage(t);return t}receiveMessage(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMessage(t);return t}receiveTrailers(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveTrailers(t);return t}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}}t.FilterStack=r;class n{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}clone(){return new n([...this.factories])}createFilter(){return new r(this.factories.map((e=>e.createFilter())))}}t.FilterStackFactory=n},28712:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFilter=void 0,t.BaseFilter=class{async sendMetadata(e){return e}receiveMetadata(e){return e}async sendMessage(e){return e}async receiveMessage(e){return e}receiveTrailers(e){return e}}},70865:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProxiedConnection=t.mapProxyName=void 0;const n=r(11712),o=r(18585),s=r(80480),i=r(13685),a=r(24404),c=r(11712),l=r(45385),u=r(16191),d=r(57310);function h(e){c.trace(o.LogVerbosity.DEBUG,"proxy",e)}t.mapProxyName=function(e,t){var r;const s={target:e,extraOptions:{}};if(0===(null!==(r=t["grpc.enable_http_proxy"])&&void 0!==r?r:1))return s;if("unix"===e.scheme)return s;const i=function(){let e,t="",r="";if(process.env.grpc_proxy)r="grpc_proxy",t=process.env.grpc_proxy;else if(process.env.https_proxy)r="https_proxy",t=process.env.https_proxy;else{if(!process.env.http_proxy)return{};r="http_proxy",t=process.env.http_proxy}try{e=new d.URL(t)}catch(e){return(0,n.log)(o.LogVerbosity.ERROR,`cannot parse value of "${r}" env var`),{}}if("http:"!==e.protocol)return(0,n.log)(o.LogVerbosity.ERROR,`"${e.protocol}" scheme not supported in proxy URI`),{};let s=null;e.username&&(e.password?((0,n.log)(o.LogVerbosity.INFO,"userinfo found in proxy URI"),s=`${e.username}:${e.password}`):s=e.username);const i=e.hostname;let a=e.port;""===a&&(a="80");const c={address:`${i}:${a}`};return s&&(c.creds=s),h("Proxy server "+c.address+" set by environment variable "+r),c}();if(!i.address)return s;const a=(0,u.splitHostPort)(e.path);if(!a)return s;const c=a.host;for(const t of function(){let e=process.env.no_grpc_proxy,t="no_grpc_proxy";return e||(e=process.env.no_proxy,t="no_proxy"),e?(h("No proxy server list set by environment variable "+t),e.split(",")):[]}())if(t===c)return h("Not using proxy for target in no_proxy list: "+(0,u.uriToString)(e)),s;const l={"grpc.http_connect_target":(0,u.uriToString)(e)};return i.creds&&(l["grpc.http_connect_creds"]=i.creds),{target:{scheme:"dns",path:i.address},extraOptions:l}},t.getProxiedConnection=function(e,t,r){if(!("grpc.http_connect_target"in t))return Promise.resolve({});const c=t["grpc.http_connect_target"],d=(0,u.parseUri)(c);if(null===d)return Promise.resolve({});const p={method:"CONNECT",path:d.path},f={Host:d.path};(0,l.isTcpSubchannelAddress)(e)?(p.host=e.host,p.port=e.port):p.socketPath=e.path,"grpc.http_connect_creds"in t&&(f["Proxy-Authorization"]="Basic "+Buffer.from(t["grpc.http_connect_creds"]).toString("base64")),p.headers=f;const g=(0,l.subchannelAddressToString)(e);return h("Using proxy "+g+" to connect to "+p.path),new Promise(((e,t)=>{const c=i.request(p);c.once("connect",((i,l,f)=>{var m;if(c.removeAllListeners(),l.removeAllListeners(),200===i.statusCode)if(h("Successfully connected to "+p.path+" through proxy "+g),"secureContext"in r){const n=(0,s.getDefaultAuthority)(d),o=(0,u.splitHostPort)(n),i=null!==(m=null==o?void 0:o.host)&&void 0!==m?m:n,c=a.connect(Object.assign({host:i,servername:i,socket:l},r),(()=>{h("Successfully established a TLS connection to "+p.path+" through proxy "+g),e({socket:c,realTarget:d})}));c.on("error",(e=>{h("Failed to establish a TLS connection to "+p.path+" through proxy "+g+" with error "+e.message),t()}))}else h("Successfully established a plaintext connection to "+p.path+" through proxy "+g),e({socket:l,realTarget:d});else(0,n.log)(o.LogVerbosity.ERROR,"Failed to connect to "+p.path+" through proxy "+g+" with status "+i.statusCode),t()})),c.once("error",(e=>{c.removeAllListeners(),(0,n.log)(o.LogVerbosity.ERROR,"Failed to connect to proxy "+g+" with error "+e.message),t()})),c.end()}))}},56112:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.experimental=t.addAdminServicesToServer=t.getChannelzHandlers=t.getChannelzServiceDefinition=t.InterceptorConfigurationError=t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.StatusBuilder=t.getClientChannel=t.ServerCredentials=t.Server=t.setLogVerbosity=t.setLogger=t.load=t.loadObject=t.CallCredentials=t.ChannelCredentials=t.waitForClientReady=t.closeClient=t.Channel=t.makeGenericClientConstructor=t.makeClientConstructor=t.loadPackageDefinition=t.Client=t.compressionAlgorithms=t.propagate=t.connectivityState=t.status=t.logVerbosity=t.Metadata=t.credentials=void 0;const n=r(37220);Object.defineProperty(t,"CallCredentials",{enumerable:!0,get:function(){return n.CallCredentials}});const o=r(84476);Object.defineProperty(t,"Channel",{enumerable:!0,get:function(){return o.ChannelImplementation}});const s=r(49190);Object.defineProperty(t,"compressionAlgorithms",{enumerable:!0,get:function(){return s.CompressionAlgorithms}});const i=r(99341);Object.defineProperty(t,"connectivityState",{enumerable:!0,get:function(){return i.ConnectivityState}});const a=r(24648);Object.defineProperty(t,"ChannelCredentials",{enumerable:!0,get:function(){return a.ChannelCredentials}});const c=r(20985);Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return c.Client}});const l=r(18585);Object.defineProperty(t,"logVerbosity",{enumerable:!0,get:function(){return l.LogVerbosity}}),Object.defineProperty(t,"status",{enumerable:!0,get:function(){return l.Status}}),Object.defineProperty(t,"propagate",{enumerable:!0,get:function(){return l.Propagate}});const u=r(11712),d=r(38088);Object.defineProperty(t,"loadPackageDefinition",{enumerable:!0,get:function(){return d.loadPackageDefinition}}),Object.defineProperty(t,"makeClientConstructor",{enumerable:!0,get:function(){return d.makeClientConstructor}}),Object.defineProperty(t,"makeGenericClientConstructor",{enumerable:!0,get:function(){return d.makeClientConstructor}});const h=r(45935);Object.defineProperty(t,"Metadata",{enumerable:!0,get:function(){return h.Metadata}});const p=r(3321);Object.defineProperty(t,"Server",{enumerable:!0,get:function(){return p.Server}});const f=r(42019);Object.defineProperty(t,"ServerCredentials",{enumerable:!0,get:function(){return f.ServerCredentials}});const g=r(91182);Object.defineProperty(t,"StatusBuilder",{enumerable:!0,get:function(){return g.StatusBuilder}}),t.credentials={combineChannelCredentials:(e,...t)=>t.reduce(((e,t)=>e.compose(t)),e),combineCallCredentials:(e,...t)=>t.reduce(((e,t)=>e.compose(t)),e),createInsecure:a.ChannelCredentials.createInsecure,createSsl:a.ChannelCredentials.createSsl,createFromSecureContext:a.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:n.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:n.CallCredentials.createFromGoogleCredential,createEmpty:n.CallCredentials.createEmpty},t.closeClient=e=>e.close(),t.waitForClientReady=(e,t,r)=>e.waitForReady(t,r),t.loadObject=(e,t)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},t.load=(e,t,r)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},t.setLogger=e=>{u.setLogger(e)},t.setLogVerbosity=e=>{u.setLoggerVerbosity(e)},t.getClientChannel=e=>c.Client.prototype.getChannel.call(e);var m=r(71061);Object.defineProperty(t,"ListenerBuilder",{enumerable:!0,get:function(){return m.ListenerBuilder}}),Object.defineProperty(t,"RequesterBuilder",{enumerable:!0,get:function(){return m.RequesterBuilder}}),Object.defineProperty(t,"InterceptingCall",{enumerable:!0,get:function(){return m.InterceptingCall}}),Object.defineProperty(t,"InterceptorConfigurationError",{enumerable:!0,get:function(){return m.InterceptorConfigurationError}});var y=r(87876);Object.defineProperty(t,"getChannelzServiceDefinition",{enumerable:!0,get:function(){return y.getChannelzServiceDefinition}}),Object.defineProperty(t,"getChannelzHandlers",{enumerable:!0,get:function(){return y.getChannelzHandlers}});var v=r(62485);Object.defineProperty(t,"addAdminServicesToServer",{enumerable:!0,get:function(){return v.addAdminServicesToServer}});const _=r(93761);t.experimental=_;const b=r(53126),S=r(91665),E=r(6369),w=r(75890),A=r(83683),T=r(60828),C=r(87876),I=r(26593).i8;u.trace(l.LogVerbosity.DEBUG,"index","Loading @grpc/grpc-js version "+I),b.setup(),S.setup(),E.setup(),w.setup(),A.setup(),T.setup(),C.setup()},6112:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalChannel=void 0;const n=r(24648),o=r(65177),s=r(39008),i=r(84562),a=r(18585),c=r(74574),l=r(81517),u=r(80480),d=r(11712),h=r(43240),p=r(70865),f=r(16191),g=r(99341),m=r(87876),y=r(61419),v=r(89454),_=r(25252),b=r(24891),S=r(87693),E=r(71413),w=r(44027),A=new Map;class T extends w.BaseSubchannelWrapper{constructor(e,t){super(e),this.channel=t,this.refCount=0,this.subchannelStateListener=(e,r,n,o)=>{t.throttleKeepalive(o)},e.addConnectivityStateListener(this.subchannelStateListener)}ref(){this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this))}}t.InternalChannel=class{constructor(e,t,r){var y,v,_,b,w,C,I;if(this.credentials=t,this.options=r,this.connectivityState=g.ConnectivityState.IDLE,this.currentPicker=new i.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.channelzEnabled=!0,this.callTracker=new m.ChannelzCallTracker,this.childrenTracker=new m.ChannelzChildrenTracker,"string"!=typeof e)throw new TypeError("Channel target must be a string");if(!(t instanceof n.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(r&&"object"!=typeof r)throw new TypeError("Channel options must be an object");this.originalTarget=e;const R=(0,f.parseUri)(e);if(null===R)throw new Error(`Could not parse target name "${e}"`);const O=(0,u.mapUriDefaultScheme)(R);if(null===O)throw new Error(`Could not find a default scheme for target name "${e}"`);this.callRefTimer=setInterval((()=>{}),2147483647),null===(v=(y=this.callRefTimer).unref)||void 0===v||v.call(y),0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new m.ChannelzTrace,this.channelzRef=(0,m.registerChannelzChannel)(e,(()=>this.getChannelzInfo()),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,u.getDefaultAuthority)(O);const k=(0,p.mapProxyName)(O,r);this.target=k.target,this.options=Object.assign({},this.options,k.extraOptions),this.subchannelPool=(0,s.getSubchannelPool)(0===(null!==(_=r["grpc.use_local_subchannel_pool"])&&void 0!==_?_:0)),this.retryBufferTracker=new E.MessageBufferTracker(null!==(b=r["grpc.retry_buffer_size"])&&void 0!==b?b:16777216,null!==(w=r["grpc.per_rpc_retry_buffer_size"])&&void 0!==w?w:1048576),this.keepaliveTime=null!==(C=r["grpc.keepalive_time_ms"])&&void 0!==C?C:-1;const N={createSubchannel:(e,t)=>{const r=this.subchannelPool.getOrCreateSubchannel(this.target,e,Object.assign({},this.options,t),this.credentials);r.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",r.getChannelzRef());const n=new T(r,this);return this.wrappedSubchannels.add(n),n},updateState:(e,t)=>{this.currentPicker=t;const r=this.pickQueue.slice();this.pickQueue=[],this.callRefTimerUnref();for(const e of r)e.doPick();this.updateState(e)},requestReresolution:()=>{throw new Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:e=>{this.channelzEnabled&&this.childrenTracker.refChild(e)},removeChannelzChild:e=>{this.channelzEnabled&&this.childrenTracker.unrefChild(e)}};this.resolvingLoadBalancer=new o.ResolvingLoadBalancer(this.target,N,r,((e,t)=>{e.retryThrottling?A.set(this.getTarget(),new E.RetryThrottler(e.retryThrottling.maxTokens,e.retryThrottling.tokenRatio,A.get(this.getTarget()))):A.delete(this.getTarget()),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded"),this.configSelector=t,this.currentResolutionError=null,process.nextTick((()=>{const e=this.configSelectionQueue;this.configSelectionQueue=[],this.callRefTimerUnref();for(const t of e)t.getConfig();this.configSelectionQueue=[]}))}),(e=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+e.code+' and details "'+e.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),null===this.configSelector&&(this.currentResolutionError=Object.assign(Object.assign({},(0,S.restrictControlPlaneStatusCode)(e.code,e.details)),{metadata:e.metadata}));const t=this.configSelectionQueue;this.configSelectionQueue=[],this.callRefTimerUnref();for(const r of t)r.reportResolverError(e)})),this.filterStackFactory=new c.FilterStackFactory([new h.MaxMessageSizeFilterFactory(this.options),new l.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(r,void 0,2));const P=new Error;(0,d.trace)(a.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+") Channel constructed \n"+(null===(I=P.stack)||void 0===I?void 0:I.substring(P.stack.indexOf("\n")+1)))}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace(e,t){(0,d.trace)(null!=t?t:a.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,f.uriToString)(this.target)+" "+e)}callRefTimerRef(){var e,t,r,n;(null===(t=(e=this.callRefTimer).hasRef)||void 0===t?void 0:t.call(e))||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(n=(r=this.callRefTimer).ref)||void 0===n||n.call(r))}callRefTimerUnref(){var e,t;this.callRefTimer.hasRef&&!this.callRefTimer.hasRef()||(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(t=(e=this.callRefTimer).unref)||void 0===t||t.call(e))}removeConnectivityStateWatcher(e){const t=this.connectivityStateWatchers.findIndex((t=>t===e));t>=0&&this.connectivityStateWatchers.splice(t,1)}updateState(e){(0,d.trace)(a.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,f.uriToString)(this.target)+" "+g.ConnectivityState[this.connectivityState]+" -> "+g.ConnectivityState[e]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO",g.ConnectivityState[this.connectivityState]+" -> "+g.ConnectivityState[e]),this.connectivityState=e;const t=this.connectivityStateWatchers.slice();for(const r of t)e!==r.currentState&&(r.timer&&clearTimeout(r.timer),this.removeConnectivityStateWatcher(r),r.callback());e!==g.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive(e){if(e>this.keepaliveTime){this.keepaliveTime=e;for(const t of this.wrappedSubchannels)t.throttleKeepalive(e)}}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e)}doPick(e,t){return this.currentPicker.pick({metadata:e,extraPickInfo:t})}queueCallForPick(e){this.pickQueue.push(e),this.callRefTimerRef()}getConfig(e,t){return this.resolvingLoadBalancer.exitIdle(),this.configSelector?{type:"SUCCESS",config:this.configSelector(e,t)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(e){this.configSelectionQueue.push(e),this.callRefTimerRef()}createLoadBalancingCall(e,t,r,n,o){const s=(0,b.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+s+'] method="'+t+'"'),new y.LoadBalancingCall(this,e,t,r,n,o,s)}createRetryingCall(e,t,r,n,o){const s=(0,b.getNextCallNumber)();return this.trace("createRetryingCall ["+s+'] method="'+t+'"'),new E.RetryingCall(this,e,t,r,n,o,s,this.retryBufferTracker,A.get(this.getTarget()))}createInnerCall(e,t,r,n,o){return 0===this.options["grpc.enable_retries"]?this.createLoadBalancingCall(e,t,r,n,o):this.createRetryingCall(e,t,r,n,o)}createResolvingCall(e,t,r,n,o){const s=(0,b.getNextCallNumber)();this.trace("createResolvingCall ["+s+'] method="'+e+'", deadline='+(0,v.deadlineToString)(t));const i={deadline:t,flags:null!=o?o:a.Propagate.DEFAULTS,host:null!=r?r:this.defaultAuthority,parentCall:n},c=new _.ResolvingCall(this,e,i,this.filterStackFactory.clone(),this.credentials._getCallCredentials(),s);return this.channelzEnabled&&(this.callTracker.addCallStarted(),c.addStatusWatcher((e=>{e.code===a.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}))),c}close(){this.resolvingLoadBalancer.destroy(),this.updateState(g.ConnectivityState.SHUTDOWN),clearInterval(this.callRefTimer),this.channelzEnabled&&(0,m.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return(0,f.uriToString)(this.target)}getConnectivityState(e){const t=this.connectivityState;return e&&this.resolvingLoadBalancer.exitIdle(),t}watchConnectivityState(e,t,r){if(this.connectivityState===g.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");let n=null;if(t!==1/0){const e=t instanceof Date?t:new Date(t),s=new Date;if(t===-1/0||e<=s)return void process.nextTick(r,new Error("Deadline passed without connectivity state change"));n=setTimeout((()=>{this.removeConnectivityStateWatcher(o),r(new Error("Deadline passed without connectivity state change"))}),e.getTime()-s.getTime())}const o={currentState:e,callback:r,timer:n};this.connectivityStateWatchers.push(o)}getChannelzRef(){return this.channelzRef}createCall(e,t,r,n,o){if("string"!=typeof e)throw new TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===g.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");return this.createResolvingCall(e,t,r,n,o)}}},69849:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChildLoadBalancerHandler=void 0;const n=r(54821),o=r(99341);t.ChildLoadBalancerHandler=class{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.ChildPolicyHelper=class{constructor(e){this.parent=e,this.child=null}createSubchannel(e,t){return this.parent.channelControlHelper.createSubchannel(e,t)}updateState(e,t){var r;if(this.calledByPendingChild()){if(e===o.ConnectivityState.CONNECTING)return;null===(r=this.parent.currentChild)||void 0===r||r.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(e,t)}requestReresolution(){var e;const t=null!==(e=this.parent.pendingChild)&&void 0!==e?e:this.parent.currentChild;this.child===t&&this.parent.channelControlHelper.requestReresolution()}setChild(e){this.child=e}addChannelzChild(e){this.parent.channelControlHelper.addChannelzChild(e)}removeChannelzChild(e){this.parent.channelControlHelper.removeChannelzChild(e)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}updateAddressList(e,t,r){let o;if(null===this.currentChild||this.currentChild.getTypeName()!==t.getLoadBalancerName()){const e=new this.ChildPolicyHelper(this),r=(0,n.createLoadBalancer)(t,e);e.setChild(r),null===this.currentChild?(this.currentChild=r,o=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=r,o=this.pendingChild)}else o=null===this.pendingChild?this.currentChild:this.pendingChild;o.updateAddressList(e,t,r)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return"child_load_balancer_helper"}}},60828:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.OutlierDetectionLoadBalancer=t.OutlierDetectionLoadBalancingConfig=void 0;const o=r(99341),s=r(18585),i=r(81795),a=r(93761),c=r(54821),l=r(69849),u=r(84562),d=r(45385),h=r(44027),p=r(11712);function f(e){p.trace(s.LogVerbosity.DEBUG,"outlier_detection",e)}const g="outlier_detection",m="true"===(null!==(n=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)&&void 0!==n?n:"true"),y={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},v={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function _(e,t,r,n){if(t in e&&typeof e[t]!==r)throw new Error(`outlier detection config ${n?`${n}.${t}`:t} parse error: expected ${r}, got ${typeof e[t]}`)}function b(e,t,r){const n=r?`${r}.${t}`:t;if(t in e){if(!(0,i.isDuration)(e[t]))throw new Error(`outlier detection config ${n} parse error: expected Duration, got ${typeof e[t]}`);if(!(e[t].seconds>=0&&e[t].seconds<=315576e6&&e[t].nanos>=0&&e[t].nanos<=999999999))throw new Error(`outlier detection config ${n} parse error: values out of range for non-negative Duaration`)}}function S(e,t,r){const n=r?`${r}.${t}`:t;if(_(e,t,"number",r),t in e&&!(e[t]>=0&&e[t]<=100))throw new Error(`outlier detection config ${n} parse error: value out of range for percentage (0-100)`)}class E{constructor(e,t,r,n,o,s,i){this.childPolicy=i,this.intervalMs=null!=e?e:1e4,this.baseEjectionTimeMs=null!=t?t:3e4,this.maxEjectionTimeMs=null!=r?r:3e5,this.maxEjectionPercent=null!=n?n:10,this.successRateEjection=o?Object.assign(Object.assign({},y),o):null,this.failurePercentageEjection=s?Object.assign(Object.assign({},v),s):null}getLoadBalancerName(){return g}toJsonObject(){return{interval:(0,i.msToDuration)(this.intervalMs),base_ejection_time:(0,i.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,i.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map((e=>e.toJsonObject()))}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy(e){return new E(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,e)}static createFromJson(e){var t;if(b(e,"interval"),b(e,"base_ejection_time"),b(e,"max_ejection_time"),S(e,"max_ejection_percent"),"success_rate_ejection"in e){if("object"!=typeof e.success_rate_ejection)throw new Error("outlier detection config success_rate_ejection must be an object");_(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),S(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),_(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),_(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e){if("object"!=typeof e.failure_percentage_ejection)throw new Error("outlier detection config failure_percentage_ejection must be an object");S(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),S(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),_(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),_(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new E(e.interval?(0,i.durationToMs)(e.interval):null,e.base_ejection_time?(0,i.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0,i.durationToMs)(e.max_ejection_time):null,null!==(t=e.max_ejection_percent)&&void 0!==t?t:null,e.success_rate_ejection,e.failure_percentage_ejection,e.child_policy.map(c.validateLoadBalancingConfig))}}t.OutlierDetectionLoadBalancingConfig=E;class w extends h.BaseSubchannelWrapper{constructor(e,t){super(e),this.mapEntry=t,this.stateListeners=[],this.ejected=!1,this.refCount=0,this.childSubchannelState=e.getConnectivityState(),e.addConnectivityStateListener(((e,t,r,n)=>{if(this.childSubchannelState=r,!this.ejected)for(const e of this.stateListeners)e(this,t,r,n)}))}getConnectivityState(){return this.ejected?o.ConnectivityState.TRANSIENT_FAILURE:this.childSubchannelState}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){const t=this.stateListeners.indexOf(e);t>-1&&this.stateListeners.splice(t,1)}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){const e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1)}}eject(){this.ejected=!0;for(const e of this.stateListeners)e(this,this.childSubchannelState,o.ConnectivityState.TRANSIENT_FAILURE,-1)}uneject(){this.ejected=!1;for(const e of this.stateListeners)e(this,o.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState,-1)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}}class A{constructor(){this.activeBucket={success:0,failure:0},this.inactiveBucket={success:0,failure:0}}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket={success:0,failure:0}}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}}class T{constructor(e,t){this.wrappedPicker=e,this.countCalls=t}pick(e){const t=this.wrappedPicker.pick(e);if(t.pickResultType===u.PickResultType.COMPLETE){const e=t.subchannel,r=e.getMapEntry();if(r){let n=t.onCallEnded;return this.countCalls&&(n=e=>{var n;e===s.Status.OK?r.counter.addSuccess():r.counter.addFailure(),null===(n=t.onCallEnded)||void 0===n||n.call(t,e)}),Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel(),onCallEnded:n})}return Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel()})}return t}}class C{constructor(e){this.addressMap=new Map,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new l.ChildLoadBalancerHandler((0,a.createChildChannelControlHelper)(e,{createSubchannel:(t,r)=>{const n=e.createSubchannel(t,r),o=this.addressMap.get((0,d.subchannelAddressToString)(t)),s=new w(n,o);return null!==(null==o?void 0:o.currentEjectionTimestamp)&&s.eject(),null==o||o.subchannelWrappers.push(s),s},updateState:(t,r)=>{t===o.ConnectivityState.READY?e.updateState(t,new T(r,this.isCountingEnabled())):e.updateState(t,r)}})),this.ejectionTimer=setInterval((()=>{}),0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return null!==this.latestConfig&&(null!==this.latestConfig.getSuccessRateEjectionConfig()||null!==this.latestConfig.getFailurePercentageEjectionConfig())}getCurrentEjectionPercent(){let e=0;for(const t of this.addressMap.values())null!==t.currentEjectionTimestamp&&(e+=1);return 100*e/this.addressMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;const t=this.latestConfig.getSuccessRateEjectionConfig();if(!t)return;f("Running success rate check");const r=t.request_volume;let n=0;const o=[];for(const[e,t]of this.addressMap){const s=t.counter.getLastSuccesses(),i=t.counter.getLastFailures();f("Stats for "+e+": successes="+s+" failures="+i+" targetRequestVolume="+r),s+i>=r&&(n+=1,o.push(s/(s+i)))}if(f("Found "+n+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+o+"]"),n<t.minimum_hosts)return;const s=o.reduce(((e,t)=>e+t))/o.length;let i=0;for(const e of o){const t=e-s;i+=t*t}const a=i/o.length,c=Math.sqrt(a),l=s-c*(t.stdev_factor/1e3);f("stdev="+c+" ejectionThreshold="+l);for(const[n,o]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;const s=o.counter.getLastSuccesses(),i=o.counter.getLastFailures();if(s+i<r)continue;const a=s/(s+i);if(f("Checking candidate "+n+" successRate="+a),a<l){const r=100*Math.random();f("Candidate "+n+" randomNumber="+r+" enforcement_percentage="+t.enforcement_percentage),r<t.enforcement_percentage&&(f("Ejecting candidate "+n),this.eject(o,e))}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;const t=this.latestConfig.getFailurePercentageEjectionConfig();if(!t)return;f("Running failure percentage check. threshold="+t.threshold+" request volume threshold="+t.request_volume);let r=0;for(const e of this.addressMap.values())e.counter.getLastSuccesses()+e.counter.getLastFailures()>=t.request_volume&&(r+=1);if(!(r<t.minimum_hosts))for(const[r,n]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;const o=n.counter.getLastSuccesses(),s=n.counter.getLastFailures();if((f("Candidate successes="+o+" failures="+s),!(o+s<t.request_volume))&&100*s/(s+o)>t.threshold){const o=100*Math.random();f("Candidate "+r+" randomNumber="+o+" enforcement_percentage="+t.enforcement_percentage),o<t.enforcement_percentage&&(f("Ejecting candidate "+r),this.eject(n,e))}}}eject(e,t){e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1;for(const t of e.subchannelWrappers)t.eject()}uneject(e){e.currentEjectionTimestamp=null;for(const t of e.subchannelWrappers)t.uneject()}switchAllBuckets(){for(const e of this.addressMap.values())e.counter.switchBuckets()}startTimer(e){var t,r;this.ejectionTimer=setTimeout((()=>this.runChecks()),e),null===(r=(t=this.ejectionTimer).unref)||void 0===r||r.call(t)}runChecks(){const e=new Date;if(f("Ejection timer running"),this.switchAllBuckets(),this.latestConfig){this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e);for(const[e,t]of this.addressMap.entries())if(null===t.currentEjectionTimestamp)t.ejectionTimeMultiplier>0&&(t.ejectionTimeMultiplier-=1);else{const r=this.latestConfig.getBaseEjectionTimeMs(),n=this.latestConfig.getMaxEjectionTimeMs(),o=new Date(t.currentEjectionTimestamp.getTime());o.setMilliseconds(o.getMilliseconds()+Math.min(r*t.ejectionTimeMultiplier,Math.max(r,n))),o<new Date&&(f("Unejecting "+e),this.uneject(t))}}}updateAddressList(e,t,r){if(!(t instanceof E))return;const n=new Set;for(const t of e)n.add((0,d.subchannelAddressToString)(t));for(const e of n)this.addressMap.has(e)||(f("Adding map entry for "+e),this.addressMap.set(e,{counter:new A,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));for(const e of this.addressMap.keys())n.has(e)||(f("Removing map entry for "+e),this.addressMap.delete(e));const o=(0,c.getFirstUsableConfig)(t.getChildPolicy(),!0);if(this.childBalancer.updateAddressList(e,o,r),t.getSuccessRateEjectionConfig()||t.getFailurePercentageEjectionConfig())if(this.timerStartTime){f("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);const e=t.getIntervalMs()-((new Date).getTime()-this.timerStartTime.getTime());this.startTimer(e)}else f("Starting new timer"),this.timerStartTime=new Date,this.startTimer(t.getIntervalMs()),this.switchAllBuckets();else{f("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer);for(const e of this.addressMap.values())this.uneject(e),e.ejectionTimeMultiplier=0}this.latestConfig=t}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return g}}t.OutlierDetectionLoadBalancer=C,t.setup=function(){m&&(0,a.registerLoadBalancerType)(g,C,E)}},75890:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.PickFirstLoadBalancer=t.PickFirstLoadBalancingConfig=void 0;const n=r(54821),o=r(99341),s=r(84562),i=r(45385),a=r(11712),c=r(18585);function l(e){a.trace(c.LogVerbosity.DEBUG,"pick_first",e)}const u="pick_first";class d{getLoadBalancerName(){return u}constructor(){}toJsonObject(){return{[u]:{}}}static createFromJson(e){return new d}}t.PickFirstLoadBalancingConfig=d;class h{constructor(e){this.subchannel=e}pick(e){return{pickResultType:s.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}}class p{constructor(e){this.channelControlHelper=e,this.latestAddressList=[],this.subchannels=[],this.currentState=o.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.triedAllSubchannels=!1,this.subchannelStateCounts={[o.ConnectivityState.CONNECTING]:0,[o.ConnectivityState.IDLE]:0,[o.ConnectivityState.READY]:0,[o.ConnectivityState.SHUTDOWN]:0,[o.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannelStateListener=(e,t,r)=>{if(this.subchannelStateCounts[t]-=1,this.subchannelStateCounts[r]+=1,e.getRealSubchannel()===this.subchannels[this.currentSubchannelIndex].getRealSubchannel()&&r===o.ConnectivityState.TRANSIENT_FAILURE&&this.startNextSubchannelConnecting(),r!==o.ConnectivityState.READY){if(this.triedAllSubchannels&&this.subchannelStateCounts[o.ConnectivityState.IDLE]===this.subchannels.length)return this.resetSubchannelList(!1),void this.updateState(o.ConnectivityState.IDLE,new s.QueuePicker(this));if(null===this.currentPick)if(this.triedAllSubchannels){let e;e=this.subchannelStateCounts[o.ConnectivityState.CONNECTING]>0?o.ConnectivityState.CONNECTING:this.subchannelStateCounts[o.ConnectivityState.TRANSIENT_FAILURE]>0?o.ConnectivityState.TRANSIENT_FAILURE:o.ConnectivityState.IDLE,e!==this.currentState&&(e===o.ConnectivityState.TRANSIENT_FAILURE?this.updateState(e,new s.UnavailablePicker):this.updateState(e,new s.QueuePicker(this)))}else this.updateState(o.ConnectivityState.CONNECTING,new s.QueuePicker(this))}else this.pickSubchannel(e)},this.pickedSubchannelStateListener=(e,t,r)=>{if(r!==o.ConnectivityState.READY)if(this.currentPick=null,e.unref(),e.removeConnectivityStateListener(this.pickedSubchannelStateListener),this.channelControlHelper.removeChannelzChild(e.getChannelzRef()),this.subchannels.length>0)if(this.triedAllSubchannels){let e;e=this.subchannelStateCounts[o.ConnectivityState.CONNECTING]>0?o.ConnectivityState.CONNECTING:this.subchannelStateCounts[o.ConnectivityState.TRANSIENT_FAILURE]>0?o.ConnectivityState.TRANSIENT_FAILURE:o.ConnectivityState.IDLE,e===o.ConnectivityState.TRANSIENT_FAILURE?this.updateState(e,new s.UnavailablePicker):this.updateState(e,new s.QueuePicker(this))}else this.updateState(o.ConnectivityState.CONNECTING,new s.QueuePicker(this));else this.updateState(o.ConnectivityState.IDLE,new s.QueuePicker(this))},this.connectionDelayTimeout=setTimeout((()=>{}),0),clearTimeout(this.connectionDelayTimeout)}startNextSubchannelConnecting(){if(!this.triedAllSubchannels){for(const[e,t]of this.subchannels.entries())if(e>this.currentSubchannelIndex){const r=t.getConnectivityState();if(r===o.ConnectivityState.IDLE||r===o.ConnectivityState.CONNECTING)return void this.startConnecting(e)}this.triedAllSubchannels=!0}}startConnecting(e){clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.subchannels[e].getConnectivityState()===o.ConnectivityState.IDLE&&(l("Start connecting to subchannel with address "+this.subchannels[e].getAddress()),process.nextTick((()=>{this.subchannels[e].startConnecting()}))),this.connectionDelayTimeout=setTimeout((()=>{this.startNextSubchannelConnecting()}),250)}pickSubchannel(e){l("Pick subchannel with address "+e.getAddress()),null!==this.currentPick&&(this.currentPick.unref(),this.currentPick.removeConnectivityStateListener(this.pickedSubchannelStateListener)),this.currentPick=e,this.updateState(o.ConnectivityState.READY,new h(e)),e.addConnectivityStateListener(this.pickedSubchannelStateListener),e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout)}updateState(e,t){l(o.ConnectivityState[this.currentState]+" -> "+o.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(e=!0){for(const e of this.subchannels)e.removeConnectivityStateListener(this.subchannelStateListener),e.unref(),this.channelControlHelper.removeChannelzChild(e.getChannelzRef());this.currentSubchannelIndex=0,this.subchannelStateCounts={[o.ConnectivityState.CONNECTING]:0,[o.ConnectivityState.IDLE]:0,[o.ConnectivityState.READY]:0,[o.ConnectivityState.SHUTDOWN]:0,[o.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannels=[],e&&(this.triedAllSubchannels=!1)}connectToAddressList(){this.resetSubchannelList(),l("Connect to address list "+this.latestAddressList.map((e=>(0,i.subchannelAddressToString)(e)))),this.subchannels=this.latestAddressList.map((e=>this.channelControlHelper.createSubchannel(e,{})));for(const e of this.subchannels)e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef());for(const e of this.subchannels)if(e.addConnectivityStateListener(this.subchannelStateListener),this.subchannelStateCounts[e.getConnectivityState()]+=1,e.getConnectivityState()===o.ConnectivityState.READY)return this.pickSubchannel(e),void this.resetSubchannelList();for(const[e,t]of this.subchannels.entries()){const r=t.getConnectivityState();if(r===o.ConnectivityState.IDLE||r===o.ConnectivityState.CONNECTING)return this.startConnecting(e),void(null===this.currentPick&&this.updateState(o.ConnectivityState.CONNECTING,new s.QueuePicker(this)))}null===this.currentPick&&this.updateState(o.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker)}updateAddressList(e,t){0!==this.subchannels.length&&this.latestAddressList.every(((t,r)=>(0,i.subchannelAddressEqual)(e[r],t)))||(this.latestAddressList=e,this.connectToAddressList())}exitIdle(){(this.currentState===o.ConnectivityState.IDLE||this.triedAllSubchannels)&&this.channelControlHelper.requestReresolution();for(const e of this.subchannels)e.startConnecting();this.currentState===o.ConnectivityState.IDLE&&this.latestAddressList.length>0&&this.connectToAddressList()}resetBackoff(){}destroy(){if(this.resetSubchannelList(),null!==this.currentPick){const e=this.currentPick;e.unref(),e.removeConnectivityStateListener(this.pickedSubchannelStateListener),this.channelControlHelper.removeChannelzChild(e.getChannelzRef())}}getTypeName(){return u}}t.PickFirstLoadBalancer=p,t.setup=function(){(0,n.registerLoadBalancerType)(u,p,d),(0,n.registerDefaultLoadBalancerType)(u)}},83683:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.RoundRobinLoadBalancer=void 0;const n=r(54821),o=r(99341),s=r(84562),i=r(45385),a=r(11712),c=r(18585);function l(e){a.trace(c.LogVerbosity.DEBUG,"round_robin",e)}const u="round_robin";class d{getLoadBalancerName(){return u}constructor(){}toJsonObject(){return{[u]:{}}}static createFromJson(e){return new d}}class h{constructor(e,t=0){this.subchannelList=e,this.nextIndex=t}pick(e){const t=this.subchannelList[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.subchannelList.length,{pickResultType:s.PickResultType.COMPLETE,subchannel:t,status:null,onCallStarted:null,onCallEnded:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}}class p{constructor(e){this.channelControlHelper=e,this.subchannels=[],this.currentState=o.ConnectivityState.IDLE,this.currentReadyPicker=null,this.subchannelStateCounts={[o.ConnectivityState.CONNECTING]:0,[o.ConnectivityState.IDLE]:0,[o.ConnectivityState.READY]:0,[o.ConnectivityState.SHUTDOWN]:0,[o.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannelStateListener=(e,t,r)=>{this.subchannelStateCounts[t]-=1,this.subchannelStateCounts[r]+=1,this.calculateAndUpdateState(),r!==o.ConnectivityState.TRANSIENT_FAILURE&&r!==o.ConnectivityState.IDLE||(this.channelControlHelper.requestReresolution(),e.startConnecting())}}calculateAndUpdateState(){if(this.subchannelStateCounts[o.ConnectivityState.READY]>0){const e=this.subchannels.filter((e=>e.getConnectivityState()===o.ConnectivityState.READY));let t=0;null!==this.currentReadyPicker&&(t=e.indexOf(this.currentReadyPicker.peekNextSubchannel()),t<0&&(t=0)),this.updateState(o.ConnectivityState.READY,new h(e,t))}else this.subchannelStateCounts[o.ConnectivityState.CONNECTING]>0?this.updateState(o.ConnectivityState.CONNECTING,new s.QueuePicker(this)):this.subchannelStateCounts[o.ConnectivityState.TRANSIENT_FAILURE]>0?this.updateState(o.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker):this.updateState(o.ConnectivityState.IDLE,new s.QueuePicker(this))}updateState(e,t){l(o.ConnectivityState[this.currentState]+" -> "+o.ConnectivityState[e]),e===o.ConnectivityState.READY?this.currentReadyPicker=t:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(const e of this.subchannels)e.removeConnectivityStateListener(this.subchannelStateListener),e.unref(),this.channelControlHelper.removeChannelzChild(e.getChannelzRef());this.subchannelStateCounts={[o.ConnectivityState.CONNECTING]:0,[o.ConnectivityState.IDLE]:0,[o.ConnectivityState.READY]:0,[o.ConnectivityState.SHUTDOWN]:0,[o.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannels=[]}updateAddressList(e,t){this.resetSubchannelList(),l("Connect to address list "+e.map((e=>(0,i.subchannelAddressToString)(e)))),this.subchannels=e.map((e=>this.channelControlHelper.createSubchannel(e,{})));for(const e of this.subchannels){e.ref(),e.addConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.addChannelzChild(e.getChannelzRef());const t=e.getConnectivityState();this.subchannelStateCounts[t]+=1,t!==o.ConnectivityState.IDLE&&t!==o.ConnectivityState.TRANSIENT_FAILURE||e.startConnecting()}this.calculateAndUpdateState()}exitIdle(){for(const e of this.subchannels)e.startConnecting()}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return u}}t.RoundRobinLoadBalancer=p,t.setup=function(){(0,n.registerLoadBalancerType)(u,p,d)}},54821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateLoadBalancingConfig=t.getFirstUsableConfig=t.isLoadBalancerNameRegistered=t.createLoadBalancer=t.registerDefaultLoadBalancerType=t.registerLoadBalancerType=t.createChildChannelControlHelper=void 0,t.createChildChannelControlHelper=function(e,t){var r,n,o,s,i,a,c,l,u,d;return{createSubchannel:null!==(n=null===(r=t.createSubchannel)||void 0===r?void 0:r.bind(t))&&void 0!==n?n:e.createSubchannel.bind(e),updateState:null!==(s=null===(o=t.updateState)||void 0===o?void 0:o.bind(t))&&void 0!==s?s:e.updateState.bind(e),requestReresolution:null!==(a=null===(i=t.requestReresolution)||void 0===i?void 0:i.bind(t))&&void 0!==a?a:e.requestReresolution.bind(e),addChannelzChild:null!==(l=null===(c=t.addChannelzChild)||void 0===c?void 0:c.bind(t))&&void 0!==l?l:e.addChannelzChild.bind(e),removeChannelzChild:null!==(d=null===(u=t.removeChannelzChild)||void 0===u?void 0:u.bind(t))&&void 0!==d?d:e.removeChannelzChild.bind(e)}};const r={};let n=null;t.registerLoadBalancerType=function(e,t,n){r[e]={LoadBalancer:t,LoadBalancingConfig:n}},t.registerDefaultLoadBalancerType=function(e){n=e},t.createLoadBalancer=function(e,t){const n=e.getLoadBalancerName();return n in r?new r[n].LoadBalancer(t):null},t.isLoadBalancerNameRegistered=function(e){return e in r},t.getFirstUsableConfig=function(e,t=!1){for(const t of e)if(t.getLoadBalancerName()in r)return t;return t&&n?new r[n].LoadBalancingConfig:null},t.validateLoadBalancingConfig=function(e){if(null===e||"object"!=typeof e)throw new Error("Load balancing config must be an object");const t=Object.keys(e);if(1!==t.length)throw new Error("Provided load balancing config has multiple conflicting entries");const n=t[0];if(n in r)return r[n].LoadBalancingConfig.createFromJson(e[n]);throw new Error(`Unrecognized load balancing config name ${n}`)}},61419:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadBalancingCall=void 0;const n=r(99341),o=r(18585),s=r(89454),i=r(45935),a=r(84562),c=r(16191),l=r(11712),u=r(87693),d=r(85158);t.LoadBalancingCall=class{constructor(e,t,r,n,o,s,i){var a,l;this.channel=e,this.callConfig=t,this.methodName=r,this.host=n,this.credentials=o,this.deadline=s,this.callNumber=i,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.pendingChildStatus=null,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null;const u=this.methodName.split("/");let d="";u.length>=2&&(d=u[1]);const h=null!==(l=null===(a=(0,c.splitHostPort)(this.host))||void 0===a?void 0:a.host)&&void 0!==l?l:"localhost";this.serviceUrl=`https://${h}/${d}`}trace(e){l.trace(o.LogVerbosity.DEBUG,"load_balancing_call","["+this.callNumber+"] "+e)}outputStatus(e,t){var r,n;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+e.code+' details="'+e.details+'"');const o=Object.assign(Object.assign({},e),{progress:t});null===(r=this.listener)||void 0===r||r.onReceiveStatus(o),null===(n=this.onCallEnded)||void 0===n||n.call(this,o.code)}}doPick(){var e,t;if(this.ended)return;if(!this.metadata)throw new Error("doPick called before start");const r=this.channel.doPick(this.metadata,this.callConfig.pickInformation),c=r.subchannel?"("+r.subchannel.getChannelzRef().id+") "+r.subchannel.getAddress():""+r.subchannel;switch(this.trace("Pick result: "+a.PickResultType[r.pickResultType]+" subchannel: "+c+" status: "+(null===(e=r.status)||void 0===e?void 0:e.code)+" "+(null===(t=r.status)||void 0===t?void 0:t.details)),r.pickResultType){case a.PickResultType.COMPLETE:this.credentials.generateMetadata({service_url:this.serviceUrl}).then((e=>{var t,a,l;const u=this.metadata.clone();if(u.merge(e),u.get("authorization").length>1&&this.outputStatus({code:o.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new i.Metadata},"PROCESSED"),r.subchannel.getConnectivityState()!==n.ConnectivityState.READY)return this.trace("Picked subchannel "+c+" has state "+n.ConnectivityState[r.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),void this.doPick();this.deadline!==1/0&&u.set("grpc-timeout",(0,s.getDeadlineTimeoutString)(this.deadline));try{this.child=r.subchannel.getRealSubchannel().createCall(u,this.host,this.methodName,{onReceiveMetadata:e=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(e)},onReceiveMessage:e=>{this.trace("Received message"),this.listener.onReceiveMessage(e)},onReceiveStatus:e=>{this.trace("Received status"),e.rstCode===d.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(e,"REFUSED"):this.outputStatus(e,"PROCESSED")}})}catch(e){return this.trace("Failed to start call on picked subchannel "+c+" with error "+e.message),void this.outputStatus({code:o.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+e.message,metadata:new i.Metadata},"NOT_STARTED")}null===(a=(t=this.callConfig).onCommitted)||void 0===a||a.call(t),null===(l=r.onCallStarted)||void 0===l||l.call(r),this.onCallEnded=r.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()}),(e=>{const{code:t,details:r}=(0,u.restrictControlPlaneStatusCode)("number"==typeof e.code?e.code:o.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${e.message}`);this.outputStatus({code:t,details:r,metadata:new i.Metadata},"PROCESSED")}));break;case a.PickResultType.DROP:const{code:e,details:t}=(0,u.restrictControlPlaneStatusCode)(r.status.code,r.status.details);this.outputStatus({code:e,details:t,metadata:r.status.metadata},"DROP");break;case a.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{const{code:e,details:t}=(0,u.restrictControlPlaneStatusCode)(r.status.code,r.status.details);this.outputStatus({code:e,details:t,metadata:r.status.metadata},"PROCESSED")}break;case a.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null===(r=this.child)||void 0===r||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new i.Metadata},"PROCESSED")}getPeer(){var e,t;return null!==(t=null===(e=this.child)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.listener=t,this.metadata=e,this.doPick()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.child.sendMessageWithContext(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){throw new Error("Method not implemented.")}getCallNumber(){return this.callNumber}}},11712:(e,t,r)=>{"use strict";var n,o,s,i;Object.defineProperty(t,"__esModule",{value:!0}),t.isTracerEnabled=t.trace=t.log=t.setLoggerVerbosity=t.setLogger=t.getLogger=void 0;const a=r(18585);let c={error:(e,...t)=>{console.error("E "+e,...t)},info:(e,...t)=>{console.error("I "+e,...t)},debug:(e,...t)=>{console.error("D "+e,...t)}},l=a.LogVerbosity.ERROR;switch((null!==(o=null!==(n=process.env.GRPC_NODE_VERBOSITY)&&void 0!==n?n:process.env.GRPC_VERBOSITY)&&void 0!==o?o:"").toUpperCase()){case"DEBUG":l=a.LogVerbosity.DEBUG;break;case"INFO":l=a.LogVerbosity.INFO;break;case"ERROR":l=a.LogVerbosity.ERROR;break;case"NONE":l=a.LogVerbosity.NONE}t.getLogger=()=>c,t.setLogger=e=>{c=e},t.setLoggerVerbosity=e=>{l=e},t.log=(e,...t)=>{let r;if(e>=l){switch(e){case a.LogVerbosity.DEBUG:r=c.debug;break;case a.LogVerbosity.INFO:r=c.info;break;case a.LogVerbosity.ERROR:r=c.error}r||(r=c.error),r&&r.bind(c)(...t)}};const u=null!==(i=null!==(s=process.env.GRPC_NODE_TRACE)&&void 0!==s?s:process.env.GRPC_TRACE)&&void 0!==i?i:"",d=new Set,h=new Set;for(const e of u.split(","))e.startsWith("-")?h.add(e.substring(1)):d.add(e);const p=d.has("all");function f(e){return!h.has(e)&&(p||d.has(e))}t.trace=function(e,r,n){f(r)&&(0,t.log)(e,(new Date).toISOString()+" | "+r+" | "+n)},t.isTracerEnabled=f},38088:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadPackageDefinition=t.makeClientConstructor=void 0;const n=r(20985),o={unary:n.Client.prototype.makeUnaryRequest,server_stream:n.Client.prototype.makeServerStreamRequest,client_stream:n.Client.prototype.makeClientStreamRequest,bidi:n.Client.prototype.makeBidiStreamRequest};function s(e){return["__proto__","prototype","constructor"].includes(e)}function i(e,t,r){r||(r={});class i extends n.Client{}return Object.keys(e).forEach((t=>{if(s(t))return;const r=e[t];let n;if("string"==typeof t&&"$"===t.charAt(0))throw new Error("Method names cannot start with $");n=r.requestStream?r.responseStream?"bidi":"client_stream":r.responseStream?"server_stream":"unary";const a=r.requestSerialize,c=r.responseDeserialize,l=function(e,t,r,n){return function(...o){return e.call(this,t,r,n,...o)}}(o[n],r.path,a,c);i.prototype[t]=l,Object.assign(i.prototype[t],r),r.originalName&&!s(r.originalName)&&(i.prototype[r.originalName]=i.prototype[t])})),i.service=e,i.serviceName=t,i}t.makeClientConstructor=i,t.loadPackageDefinition=function(e){const t={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n],a=n.split(".");if(a.some((e=>s(e))))continue;const c=a[a.length-1];let l=t;for(const e of a.slice(0,-1))l[e]||(l[e]={}),l=l[e];r=o,l[c]="format"in r?o:i(o,c,{})}var r;return t}},43240:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaxMessageSizeFilterFactory=t.MaxMessageSizeFilter=void 0;const n=r(28712),o=r(18585),s=r(45935);class i extends n.BaseFilter{constructor(e){super(),this.options=e,this.maxSendMessageSize=o.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=o.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,"grpc.max_send_message_length"in e&&(this.maxSendMessageSize=e["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in e&&(this.maxReceiveMessageSize=e["grpc.max_receive_message_length"])}async sendMessage(e){if(-1===this.maxSendMessageSize)return e;{const t=await e;if(t.message.length>this.maxSendMessageSize)throw{code:o.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${t.message.length} vs. ${this.maxSendMessageSize})`,metadata:new s.Metadata};return t}}async receiveMessage(e){if(-1===this.maxReceiveMessageSize)return e;{const t=await e;if(t.length>this.maxReceiveMessageSize)throw{code:o.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${t.length} vs. ${this.maxReceiveMessageSize})`,metadata:new s.Metadata};return t}}}t.MaxMessageSizeFilter=i,t.MaxMessageSizeFilterFactory=class{constructor(e){this.options=e}createFilter(){return new i(this.options)}}},45935:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;const n=r(11712),o=r(18585),s=r(24385),i=/^[0-9a-z_.-]+$/,a=/^[ -~]*$/;function c(e){return e.endsWith("-bin")}function l(e){return!e.startsWith("grpc-")}function u(e){return e.toLowerCase()}function d(e,t){if(!function(e){return i.test(e)}(e))throw new Error('Metadata key "'+e+'" contains illegal characters');if(null!=t)if(c(e)){if(!Buffer.isBuffer(t))throw new Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(t))throw new Error("keys that don't end with '-bin' must have String values");if(!function(e){return a.test(e)}(t))throw new Error('Metadata string value "'+t+'" contains illegal characters')}}class h{constructor(e={}){this.internalRepr=new Map,this.options=e}set(e,t){d(e=u(e),t),this.internalRepr.set(e,[t])}add(e,t){d(e=u(e),t);const r=this.internalRepr.get(e);void 0===r?this.internalRepr.set(e,[t]):r.push(t)}remove(e){e=u(e),this.internalRepr.delete(e)}get(e){return e=u(e),this.internalRepr.get(e)||[]}getMap(){const e={};for(const[t,r]of this.internalRepr)if(r.length>0){const n=r[0];e[t]=Buffer.isBuffer(n)?Buffer.from(n):n}return e}clone(){const e=new h(this.options),t=e.internalRepr;for(const[e,r]of this.internalRepr){const n=r.map((e=>Buffer.isBuffer(e)?Buffer.from(e):e));t.set(e,n)}return e}merge(e){for(const[t,r]of e.internalRepr){const e=(this.internalRepr.get(t)||[]).concat(r);this.internalRepr.set(t,e)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){const e={};for(const[t,r]of this.internalRepr)e[t]=r.map(p);return e}_getCoreRepresentation(){return this.internalRepr}toJSON(){const e={};for(const[t,r]of this.internalRepr)e[t]=r;return e}static fromHttp2Headers(e){const t=new h;for(const r of Object.keys(e)){if(":"===r.charAt(0))continue;const i=e[r];try{c(r)?Array.isArray(i)?i.forEach((e=>{t.add(r,Buffer.from(e,"base64"))})):void 0!==i&&(l(r)?i.split(",").forEach((e=>{t.add(r,Buffer.from(e.trim(),"base64"))})):t.add(r,Buffer.from(i,"base64"))):Array.isArray(i)?i.forEach((e=>{t.add(r,e)})):void 0!==i&&t.add(r,i)}catch(e){const t=`Failed to add metadata entry ${r}: ${i}. ${(0,s.getErrorMessage)(e)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,n.log)(o.LogVerbosity.ERROR,t)}}return t}}t.Metadata=h;const p=e=>Buffer.isBuffer(e)?e.toString("base64"):e},84562:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueuePicker=t.UnavailablePicker=t.PickResultType=void 0;const n=r(45935),o=r(18585);var s;!function(e){e[e.COMPLETE=0]="COMPLETE",e[e.QUEUE=1]="QUEUE",e[e.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",e[e.DROP=3]="DROP"}(s=t.PickResultType||(t.PickResultType={})),t.UnavailablePicker=class{constructor(e){this.status=void 0!==e?e:{code:o.Status.UNAVAILABLE,details:"No connection established",metadata:new n.Metadata}}pick(e){return{pickResultType:s.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}},t.QueuePicker=class{constructor(e){this.loadBalancer=e,this.calledExitIdle=!1}pick(e){return this.calledExitIdle||(process.nextTick((()=>{this.loadBalancer.exitIdle()})),this.calledExitIdle=!0),{pickResultType:s.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}}},53126:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;const n=r(80480),o=r(9523),s=r(73837),i=r(86132),a=r(18585),c=r(45935),l=r(11712),u=r(18585),d=r(16191),h=r(41808),p=r(19722);function f(e){l.trace(u.LogVerbosity.DEBUG,"dns_resolver",e)}const g=s.promisify(o.resolveTxt),m=s.promisify(o.lookup);class y{constructor(e,t,r){var n,o,s;this.target=e,this.listener=t,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,f("Resolver constructed for target "+(0,d.uriToString)(e));const i=(0,d.splitHostPort)(e.path);null===i?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,h.isIPv4)(i.host)||(0,h.isIPv6)(i.host)?(this.ipResult=[{host:i.host,port:null!==(n=i.port)&&void 0!==n?n:443}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=i.host,this.port=null!==(o=i.port)&&void 0!==o?o:443),this.percentage=100*Math.random(),1===r["grpc.service_config_disable_resolution"]&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:a.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,d.uriToString)(this.target)}`,metadata:new c.Metadata};const l={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoff=new p.BackoffTimeout((()=>{this.continueResolving&&this.startResolutionWithBackoff()}),l),this.backoff.unref(),this.minTimeBetweenResolutionsMs=null!==(s=r["grpc.dns_min_time_between_resolutions_ms"])&&void 0!==s?s:3e4,this.nextResolutionTimer=setTimeout((()=>{}),0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(null!==this.ipResult)return f("Returning IP address for target "+(0,d.uriToString)(this.target)),setImmediate((()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})})),this.backoff.stop(),void this.backoff.reset();if(null===this.dnsHostname)f("Failed to parse DNS address "+(0,d.uriToString)(this.target)),setImmediate((()=>{this.listener.onError({code:a.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,d.uriToString)(this.target)}`,metadata:new c.Metadata})})),this.stopNextResolutionTimer();else{if(null!==this.pendingLookupPromise)return;f("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;const e=this.dnsHostname;this.pendingLookupPromise=m(e,{all:!0}),this.pendingLookupPromise.then((e=>{this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop();const t=e.filter((e=>4===e.family)),r=e.filter((e=>6===e.family));this.latestLookupResult=function(...e){const t=[];for(let r=0;r<Math.max.apply(null,e.map((e=>e.length)));r++)for(const n of e)r<n.length&&t.push(n[r]);return t}(r,t).map((e=>({host:e.address,port:+this.port})));const n="["+this.latestLookupResult.map((e=>e.host+":"+e.port)).join(",")+"]";f("Resolved addresses for target "+(0,d.uriToString)(this.target)+": "+n),0!==this.latestLookupResult.length?this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{}):this.listener.onError(this.defaultResolutionError)}),(e=>{f("Resolution error for target "+(0,d.uriToString)(this.target)+": "+e.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError)})),this.isServiceConfigEnabled&&null===this.pendingTxtPromise&&(this.pendingTxtPromise=g(e),this.pendingTxtPromise.then((e=>{this.pendingTxtPromise=null;try{this.latestServiceConfig=(0,i.extractAndSelectServiceConfig)(e,this.percentage)}catch(e){this.latestServiceConfigError={code:a.Status.UNAVAILABLE,details:"Parsing service config failed",metadata:new c.Metadata}}null!==this.latestLookupResult&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}),(e=>{})))}}startNextResolutionTimer(){var e,t;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=null===(t=(e=setTimeout((()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()}),this.minTimeBetweenResolutionsMs)).unref)||void 0===t?void 0:t.call(e),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){null===this.pendingLookupPromise&&(this.continueResolving=!1,this.startResolution(),this.backoff.runOnce(),this.startNextResolutionTimer())}updateResolution(){null===this.pendingLookupPromise&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?this.continueResolving=!0:this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.stop(),this.stopNextResolutionTimer()}static getDefaultAuthority(e){return e.path}}t.setup=function(){(0,n.registerResolver)("dns",y),(0,n.registerDefaultScheme)("dns")}},6369:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;const n=r(41808),o=r(18585),s=r(45935),i=r(80480),a=r(16191),c=r(11712);function l(e){c.trace(o.LogVerbosity.DEBUG,"ip_resolver",e)}const u="ipv4",d="ipv6";class h{constructor(e,t,r){var i;this.target=e,this.listener=t,this.addresses=[],this.error=null,l("Resolver constructed for target "+(0,a.uriToString)(e));const c=[];if(e.scheme!==u&&e.scheme!==d)return void(this.error={code:o.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new s.Metadata});const h=e.path.split(",");for(const t of h){const r=(0,a.splitHostPort)(t);if(null===r)return void(this.error={code:o.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new s.Metadata});if(e.scheme===u&&!(0,n.isIPv4)(r.host)||e.scheme===d&&!(0,n.isIPv6)(r.host))return void(this.error={code:o.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new s.Metadata});c.push({host:r.host,port:null!==(i=r.port)&&void 0!==i?i:443})}this.addresses=c,l("Parsed "+e.scheme+" address list "+this.addresses)}updateResolution(){process.nextTick((()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})}))}destroy(){}static getDefaultAuthority(e){return e.path.split(",")[0]}}t.setup=function(){(0,i.registerResolver)(u,h),(0,i.registerResolver)(d,h)}},91665:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;const n=r(80480);class o{constructor(e,t,r){let n;this.listener=t,this.addresses=[],n=""===e.authority?"/"+e.path:e.path,this.addresses=[{path:n}]}updateResolution(){process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{})}destroy(){}static getDefaultAuthority(e){return"localhost"}}t.setup=function(){(0,n.registerResolver)("unix",o)}},80480:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapUriDefaultScheme=t.getDefaultAuthority=t.createResolver=t.registerDefaultScheme=t.registerResolver=void 0;const n=r(16191),o={};let s=null;t.registerResolver=function(e,t){o[e]=t},t.registerDefaultScheme=function(e){s=e},t.createResolver=function(e,t,r){if(void 0!==e.scheme&&e.scheme in o)return new o[e.scheme](e,t,r);throw new Error(`No resolver could be created for target ${(0,n.uriToString)(e)}`)},t.getDefaultAuthority=function(e){if(void 0!==e.scheme&&e.scheme in o)return o[e.scheme].getDefaultAuthority(e);throw new Error(`Invalid target ${(0,n.uriToString)(e)}`)},t.mapUriDefaultScheme=function(e){return void 0!==e.scheme&&e.scheme in o?e:null!==s?{scheme:s,authority:void 0,path:(0,n.uriToString)(e)}:null}},25252:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingCall=void 0;const n=r(18585),o=r(89454),s=r(45935),i=r(11712),a=r(87693);t.ResolvingCall=class{constructor(e,t,r,s,i,a){this.channel=e,this.method=t,this.filterStackFactory=s,this.credentials=i,this.callNumber=a,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout((()=>{}),0),this.filterStack=null,this.deadline=r.deadline,this.host=r.host,r.parentCall&&(r.flags&n.Propagate.CANCELLATION&&r.parentCall.on("cancelled",(()=>{this.cancelWithStatus(n.Status.CANCELLED,"Cancelled by parent call")})),r.flags&n.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+r.parentCall.getDeadline()),this.deadline=(0,o.minDeadline)(this.deadline,r.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace(e){i.trace(n.LogVerbosity.DEBUG,"resolving_call","["+this.callNumber+"] "+e)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.trace("Deadline: "+(0,o.deadlineToString)(this.deadline));const e=(0,o.getRelativeTimeout)(this.deadline);if(e!==1/0){this.trace("Deadline will be reached in "+e+"ms");const t=()=>{this.cancelWithStatus(n.Status.DEADLINE_EXCEEDED,"Deadline exceeded")};e<=0?process.nextTick(t):this.deadlineTimer=setTimeout(t,e)}}outputStatus(e){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);const t=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+t.code+' details="'+t.details+'"'),this.statusWatchers.forEach((e=>e(t))),process.nextTick((()=>{var e;null===(e=this.listener)||void 0===e||e.onReceiveStatus(t)}))}}sendMessageOnChild(e,t){if(!this.child)throw new Error("sendMessageonChild called with child not populated");const r=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:t,flags:e.flags})).then((t=>{this.writeFilterPending=!1,r.sendMessageWithContext(e,t.message),this.pendingHalfClose&&r.halfClose()}),(e=>{this.cancelWithStatus(e.code,e.details)}))}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw new Error("getConfig called before start");const e=this.channel.getConfig(this.method,this.metadata);if("NONE"===e.type)return void this.channel.queueCallForConfig(this);if("ERROR"===e.type)return void(this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e.error));const t=e.config;if(t.status===n.Status.OK){if(t.methodConfig.timeout){const e=new Date;e.setSeconds(e.getSeconds()+t.methodConfig.timeout.seconds),e.setMilliseconds(e.getMilliseconds()+t.methodConfig.timeout.nanos/1e6),this.deadline=(0,o.minDeadline)(this.deadline,e),this.runDeadlineTimer()}this.filterStackFactory.push(t.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then((e=>{this.child=this.channel.createInnerCall(t,this.method,this.host,this.credentials,this.deadline),this.child.start(e,{onReceiveMetadata:e=>{this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(e))},onReceiveMessage:e=>{this.readFilterPending=!0,this.filterStack.receiveMessage(e).then((e=>{this.readFilterPending=!1,this.listener.onReceiveMessage(e),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)}),(e=>{this.cancelWithStatus(e.code,e.details)}))},onReceiveStatus:e=>{this.readFilterPending?this.pendingChildStatus=e:this.outputStatus(e)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()}),(e=>{this.outputStatus(e)}))}else{const{code:e,details:r}=(0,a.restrictControlPlaneStatusCode)(t.status,"Failed to route call to method "+this.method);this.outputStatus({code:e,details:r,metadata:new s.Metadata})}}reportResolverError(e){var t;(null===(t=this.metadata)||void 0===t?void 0:t.getOptions().waitForReady)?this.channel.queueCallForConfig(this):this.outputStatus(e)}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null===(r=this.child)||void 0===r||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new s.Metadata})}getPeer(){var e,t;return null!==(t=null===(e=this.child)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.metadata=e.clone(),this.listener=t,this.getConfig()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.sendMessageOnChild(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){this.credentials=this.credentials.compose(e)}addStatusWatcher(e){this.statusWatchers.push(e)}getCallNumber(){return this.callNumber}}},65177:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingLoadBalancer=void 0;const n=r(54821),o=r(86132),s=r(99341),i=r(80480),a=r(84562),c=r(19722),l=r(18585),u=r(45935),d=r(11712),h=r(18585),p=r(16191),f=r(69849);t.ResolvingLoadBalancer=class{constructor(e,t,r,d,h){this.target=e,this.channelControlHelper=t,this.channelOptions=r,this.onSuccessfulResolution=d,this.onFailedResolution=h,this.latestChildState=s.ConnectivityState.IDLE,this.latestChildPicker=new a.QueuePicker(this),this.currentState=s.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,r["grpc.service_config"]?this.defaultServiceConfig=(0,o.validateServiceConfig)(JSON.parse(r["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(s.ConnectivityState.IDLE,new a.QueuePicker(this)),this.childLoadBalancer=new f.ChildLoadBalancerHandler({createSubchannel:t.createSubchannel.bind(t),requestReresolution:()=>{this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()},updateState:(e,t)=>{this.latestChildState=e,this.latestChildPicker=t,this.updateState(e,t)},addChannelzChild:t.addChannelzChild.bind(t),removeChannelzChild:t.removeChannelzChild.bind(t)}),this.innerResolver=(0,i.createResolver)(e,{onSuccessfulResolution:(e,t,r,o,s)=>{var i;let a=null;null===t?null===r?(this.previousServiceConfig=null,a=this.defaultServiceConfig):null===this.previousServiceConfig?this.handleResolutionFailure(r):a=this.previousServiceConfig:(a=t,this.previousServiceConfig=t);const c=null!==(i=null==a?void 0:a.loadBalancingConfig)&&void 0!==i?i:[],d=(0,n.getFirstUsableConfig)(c,!0);if(null===d)return void this.handleResolutionFailure({code:l.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new u.Metadata});this.childLoadBalancer.updateAddressList(e,d,s);const h=null!=a?a:this.defaultServiceConfig;this.onSuccessfulResolution(h,null!=o?o:function(e){return function(t,r){var n,o;const s=t.split("/").filter((e=>e.length>0)),i=null!==(n=s[0])&&void 0!==n?n:"",a=null!==(o=s[1])&&void 0!==o?o:"";if(e&&e.methodConfig)for(const t of e.methodConfig)for(const e of t.name)if(e.service===i&&(void 0===e.method||e.method===a))return{methodConfig:t,pickInformation:{},status:l.Status.OK,dynamicFilterFactories:[]};return{methodConfig:{name:[]},pickInformation:{},status:l.Status.OK,dynamicFilterFactories:[]}}}(h))},onError:e=>{this.handleResolutionFailure(e)}},r);const p={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new c.BackoffTimeout((()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker)}),p),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===s.ConnectivityState.IDLE&&this.updateState(s.ConnectivityState.CONNECTING,new a.QueuePicker(this)),this.backoffTimeout.runOnce()}updateState(e,t){var r;r=(0,p.uriToString)(this.target)+" "+s.ConnectivityState[this.currentState]+" -> "+s.ConnectivityState[e],d.trace(h.LogVerbosity.DEBUG,"resolving_load_balancer",r),e===s.ConnectivityState.IDLE&&(t=new a.QueuePicker(this)),this.currentState=e,this.channelControlHelper.updateState(e,t)}handleResolutionFailure(e){this.latestChildState===s.ConnectivityState.IDLE&&(this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new a.UnavailablePicker(e)),this.onFailedResolution(e))}exitIdle(){this.currentState!==s.ConnectivityState.IDLE&&this.currentState!==s.ConnectivityState.TRANSIENT_FAILURE||(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(e,t){throw new Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.updateState(s.ConnectivityState.SHUTDOWN,new a.UnavailablePicker)}getTypeName(){return"resolving_load_balancer"}}},71413:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RetryingCall=t.MessageBufferTracker=t.RetryThrottler=void 0;const n=r(18585),o=r(45935),s=r(11712);t.RetryThrottler=class{constructor(e,t,r){this.maxTokens=e,this.tokenRatio=t,this.tokens=r?r.tokens*(e/r.maxTokens):e}addCallSucceeded(){this.tokens=Math.max(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.min(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}},t.MessageBufferTracker=class{constructor(e,t){this.totalLimit=e,this.limitPerCall=t,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(e,t){var r;const n=null!==(r=this.allocatedPerCall.get(t))&&void 0!==r?r:0;return!(this.limitPerCall-n<e||this.totalLimit-this.totalAllocated<e||(this.allocatedPerCall.set(t,n+e),this.totalAllocated+=e,0))}free(e,t){var r;if(this.totalAllocated<e)throw new Error(`Invalid buffer allocation state: call ${t} freed ${e} > total allocated ${this.totalAllocated}`);this.totalAllocated-=e;const n=null!==(r=this.allocatedPerCall.get(t))&&void 0!==r?r:0;if(n<e)throw new Error(`Invalid buffer allocation state: call ${t} freed ${e} > allocated for call ${n}`);this.allocatedPerCall.set(t,n-e)}freeAll(e){var t;const r=null!==(t=this.allocatedPerCall.get(e))&&void 0!==t?t:0;if(this.totalAllocated<r)throw new Error(`Invalid buffer allocation state: call ${e} allocated ${r} > total allocated ${this.totalAllocated}`);this.totalAllocated-=r,this.allocatedPerCall.delete(e)}};const i="grpc-previous-rpc-attempts";t.RetryingCall=class{constructor(e,t,r,n,o,s,i,a,c){if(this.channel=e,this.callConfig=t,this.methodName=r,this.host=n,this.credentials=o,this.deadline=s,this.callNumber=i,this.bufferTracker=a,this.retryThrottler=c,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0,t.methodConfig.retryPolicy){this.state="RETRY";const e=t.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(e.initialBackoff.substring(0,e.initialBackoff.length-1))}else t.methodConfig.hedgingPolicy?this.state="HEDGING":this.state="TRANSPARENT_ONLY"}getCallNumber(){return this.callNumber}trace(e){s.trace(n.LogVerbosity.DEBUG,"retrying_call","["+this.callNumber+"] "+e)}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'"'),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick((()=>{var t;null===(t=this.listener)||void 0===t||t.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata})}))}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.reportStatus({code:e,details:t,metadata:new o.Metadata});for(const{call:r}of this.underlyingCalls)r.cancelWithStatus(e,t)}getPeer(){return null!==this.committedCallIndex?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry(e){var t;return null!==(t=this.writeBuffer[e-this.writeBufferOffset])&&void 0!==t?t:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if("COMMITTED"!==this.state)return;const e=this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let t=this.writeBufferOffset;t<e;t++){const e=this.getBufferEntry(t);e.allocated&&this.bufferTracker.free(e.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice(e-this.writeBufferOffset),this.writeBufferOffset=e}commitCall(e){if("COMMITTED"!==this.state&&"COMPLETED"!==this.underlyingCalls[e].state){this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e),this.state="COMMITTED",this.committedCallIndex=e;for(let t=0;t<this.underlyingCalls.length;t++)t!==e&&"COMPLETED"!==this.underlyingCalls[t].state&&(this.underlyingCalls[t].state="COMPLETED",this.underlyingCalls[t].call.cancelWithStatus(n.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages()}}commitCallWithMostMessages(){if("COMMITTED"===this.state)return;let e=-1,t=-1;for(const[r,n]of this.underlyingCalls.entries())"ACTIVE"===n.state&&n.nextMessageToSend>e&&(e=n.nextMessageToSend,t=r);-1===t?this.state="TRANSPARENT_ONLY":this.commitCall(t)}isStatusCodeInList(e,t){return e.some((e=>e===t||e.toString().toLowerCase()===n.Status[t].toLowerCase()))}getNextRetryBackoffMs(){var e;const t=null===(e=this.callConfig)||void 0===e?void 0:e.methodConfig.retryPolicy;if(!t)return 0;const r=Math.random()*this.nextRetryBackoffSec*1e3,n=Number(t.maxBackoff.substring(0,t.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*t.backoffMultiplier,n),r}maybeRetryCall(e,t){if("RETRY"!==this.state)return void t(!1);const r=this.callConfig.methodConfig.retryPolicy;if(this.attempts>=Math.min(r.maxAttempts,5))return void t(!1);let n;if(null===e)n=this.getNextRetryBackoffMs();else{if(e<0)return this.state="TRANSPARENT_ONLY",void t(!1);n=e,this.nextRetryBackoffSec=this.initialRetryBackoffSec}setTimeout((()=>{var e,r;"RETRY"===this.state?(null===(r=null===(e=this.retryThrottler)||void 0===e?void 0:e.canRetryCall())||void 0===r||r)&&(t(!0),this.attempts+=1,this.startNewAttempt()):t(!1)}),n)}countActiveCalls(){let e=0;for(const t of this.underlyingCalls)"ACTIVE"===(null==t?void 0:t.state)&&(e+=1);return e}handleProcessedStatus(e,t,r){var n,o,s;switch(this.state){case"COMMITTED":case"TRANSPARENT_ONLY":this.commitCall(t),this.reportStatus(e);break;case"HEDGING":if(this.isStatusCodeInList(null!==(n=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)&&void 0!==n?n:[],e.code)){let n;if(null===(o=this.retryThrottler)||void 0===o||o.addCallFailed(),null===r)n=0;else{if(r<0)return this.state="TRANSPARENT_ONLY",this.commitCall(t),void this.reportStatus(e);n=r}setTimeout((()=>{this.maybeStartHedgingAttempt(),0===this.countActiveCalls()&&(this.commitCall(t),this.reportStatus(e))}),n)}else this.commitCall(t),this.reportStatus(e);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)?(null===(s=this.retryThrottler)||void 0===s||s.addCallFailed(),this.maybeRetryCall(r,(r=>{r||(this.commitCall(t),this.reportStatus(e))}))):(this.commitCall(t),this.reportStatus(e))}}getPushback(e){const t=e.get("grpc-retry-pushback-ms");if(0===t.length)return null;try{return parseInt(t[0])}catch(e){return-1}}handleChildStatus(e,t){var r;if("COMPLETED"===this.underlyingCalls[t].state)return;if(this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[t].call.getCallNumber()+"] in state "+this.underlyingCalls[t].state),this.underlyingCalls[t].state="COMPLETED",e.code===n.Status.OK)return null===(r=this.retryThrottler)||void 0===r||r.addCallSucceeded(),this.commitCall(t),void this.reportStatus(e);if("COMMITTED"===this.state)return void this.reportStatus(e);const o=this.getPushback(e.metadata);switch(e.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(e,t,o):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(t),this.reportStatus(e);break;case"PROCESSED":this.handleProcessedStatus(e,t,o)}}maybeStartHedgingAttempt(){if("HEDGING"!==this.state)return;if(!this.callConfig.methodConfig.hedgingPolicy)return;const e=this.callConfig.methodConfig.hedgingPolicy;this.attempts>=Math.min(e.maxAttempts,5)||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer())}maybeStartHedgingTimer(){var e,t,r;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),"HEDGING"!==this.state)return;if(!this.callConfig.methodConfig.hedgingPolicy)return;const n=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=Math.min(n.maxAttempts,5))return;const o=null!==(e=n.hedgingDelay)&&void 0!==e?e:"0s",s=Number(o.substring(0,o.length-1));this.hedgingTimer=setTimeout((()=>{this.maybeStartHedgingAttempt()}),1e3*s),null===(r=(t=this.hedgingTimer).unref)||void 0===r||r.call(t)}startNewAttempt(){const e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);const t=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0});const r=this.attempts-1,n=this.initialMetadata.clone();r>0&&n.set(i,`${r}`);let o=!1;e.start(n,{onReceiveMetadata:n=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]"),this.commitCall(t),o=!0,r>0&&n.set(i,`${r}`),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMetadata(n)},onReceiveMessage:r=>{this.trace("Received message from child ["+e.getCallNumber()+"]"),this.commitCall(t),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMessage(r)},onReceiveStatus:n=>{this.trace("Received status from child ["+e.getCallNumber()+"]"),!o&&r>0&&n.metadata.set(i,`${r}`),this.handleChildStatus(n,t)}}),this.sendNextChildMessage(t),this.readStarted&&e.startRead()}start(e,t){this.trace("start called"),this.listener=t,this.initialMetadata=e,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(e){var t,r;const n=this.underlyingCalls[e],o=n.nextMessageToSend;null===(r=(t=this.getBufferEntry(o)).callback)||void 0===r||r.call(t),this.clearSentMessages(),n.nextMessageToSend+=1,this.sendNextChildMessage(e)}sendNextChildMessage(e){const t=this.underlyingCalls[e];if("COMPLETED"!==t.state&&this.getBufferEntry(t.nextMessageToSend)){const r=this.getBufferEntry(t.nextMessageToSend);switch(r.entryType){case"MESSAGE":t.call.sendMessageWithContext({callback:t=>{this.handleChildWriteCompleted(e)}},r.message.message);break;case"HALF_CLOSE":t.nextMessageToSend+=1,t.call.halfClose()}}}sendMessageWithContext(e,t){var r;this.trace("write() called with message of length "+t.length);const n={message:t,flags:e.flags},o=this.getNextBufferIndex(),s={entryType:"MESSAGE",message:n,allocated:this.bufferTracker.allocate(t.length,this.callNumber)};if(this.writeBuffer.push(s),s.allocated){null===(r=e.callback)||void 0===r||r.call(e);for(const[e,r]of this.underlyingCalls.entries())"ACTIVE"===r.state&&r.nextMessageToSend===o&&r.call.sendMessageWithContext({callback:t=>{this.handleChildWriteCompleted(e)}},t)}else{if(this.commitCallWithMostMessages(),null===this.committedCallIndex)return;const r=this.underlyingCalls[this.committedCallIndex];s.callback=e.callback,"ACTIVE"===r.state&&r.nextMessageToSend===o&&r.call.sendMessageWithContext({callback:e=>{this.handleChildWriteCompleted(this.committedCallIndex)}},t)}}startRead(){this.trace("startRead called"),this.readStarted=!0;for(const e of this.underlyingCalls)"ACTIVE"===(null==e?void 0:e.state)&&e.call.startRead()}halfClose(){this.trace("halfClose called");const e=this.getNextBufferIndex();this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1});for(const t of this.underlyingCalls)"ACTIVE"===(null==t?void 0:t.state)&&t.nextMessageToSend===e&&(t.nextMessageToSend+=1,t.call.halfClose())}setCredentials(e){throw new Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}}},93047:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2ServerCallStream=t.ServerDuplexStreamImpl=t.ServerWritableStreamImpl=t.ServerReadableStreamImpl=t.ServerUnaryCallImpl=void 0;const n=r(82361),o=r(85158),s=r(12781),i=r(59796),a=r(73837),c=r(18585),l=r(45935),u=r(40494),d=r(11712),h=r(24385),p="server_call",f=(0,a.promisify)(i.unzip),g=(0,a.promisify)(i.inflate);function m(e){d.trace(c.LogVerbosity.DEBUG,p,e)}const y="grpc-message",v="grpc-status",_="grpc-timeout",b=/(\d{1,8})\s*([HMSmun])/,S={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},E={"grpc-accept-encoding":"identity,deflate,gzip","grpc-encoding":"identity"},w={[o.constants.HTTP2_HEADER_STATUS]:o.constants.HTTP_STATUS_OK,[o.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},A={waitForTrailers:!0};class T extends n.EventEmitter{constructor(e,t,r){super(),this.call=e,this.metadata=t,this.request=r,this.cancelled=!1,this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}t.ServerUnaryCallImpl=T;class C extends s.Readable{constructor(e,t,r,n){super({objectMode:!0}),this.call=e,this.metadata=t,this.deserialize=r,this.cancelled=!1,this.call.setupSurfaceCall(this),this.call.setupReadable(this,n)}_read(e){this.call.consumeUnpushedMessages(this)&&this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}t.ServerReadableStreamImpl=C;class I extends s.Writable{constructor(e,t,r,n){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.request=n,this.cancelled=!1,this.trailingMetadata=new l.Metadata,this.call.setupSurfaceCall(this),this.on("error",(e=>{this.call.sendError(e),this.end()}))}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write(e,t,r){try{const t=this.call.serializeMessage(e);if(!this.call.write(t))return void this.call.once("drain",r)}catch(e){this.emit("error",{details:(0,h.getErrorMessage)(e),code:c.Status.INTERNAL})}r()}_final(e){this.call.sendStatus({code:c.Status.OK,details:"OK",metadata:this.trailingMetadata}),e(null)}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerWritableStreamImpl=I;class R extends s.Duplex{constructor(e,t,r,n,o){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.deserialize=n,this.cancelled=!1,this.trailingMetadata=new l.Metadata,this.call.setupSurfaceCall(this),this.call.setupReadable(this,o),this.on("error",(e=>{this.call.sendError(e),this.end()}))}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerDuplexStreamImpl=R,R.prototype._read=C.prototype._read,R.prototype._write=I.prototype._write,R.prototype._final=I.prototype._final;class O extends n.EventEmitter{constructor(e,t,r){super(),this.stream=e,this.handler=t,this.options=r,this.cancelled=!1,this.deadlineTimer=null,this.statusSent=!1,this.deadline=1/0,this.wantTrailers=!1,this.metadataSent=!1,this.canPush=!1,this.isPushPending=!1,this.bufferedMessages=[],this.messagesToPush=[],this.maxSendMessageSize=c.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=c.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.stream.once("error",(e=>{})),this.stream.once("close",(()=>{var e;m("Request to method "+(null===(e=this.handler)||void 0===e?void 0:e.path)+" stream closed with rstCode "+this.stream.rstCode),this.statusSent||(this.cancelled=!0,this.emit("cancelled","cancelled"),this.emit("streamEnd",!1),this.sendStatus({code:c.Status.CANCELLED,details:"Cancelled by client",metadata:null}))})),this.stream.on("drain",(()=>{this.emit("drain")})),"grpc.max_send_message_length"in r&&(this.maxSendMessageSize=r["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in r&&(this.maxReceiveMessageSize=r["grpc.max_receive_message_length"])}checkCancelled(){return(this.stream.destroyed||this.stream.closed)&&(this.cancelled=!0),this.cancelled}getDecompressedMessage(e,t){return"deflate"===t?g(e.subarray(5)):"gzip"===t?f(e.subarray(5)):"identity"===t?e.subarray(5):Promise.reject({code:c.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${t}"`})}sendMetadata(e){if(this.checkCancelled())return;if(this.metadataSent)return;this.metadataSent=!0;const t=e?e.toHttp2Headers():null,r=Object.assign(Object.assign(Object.assign({},w),E),t);this.stream.respond(r,A)}receiveMetadata(e){const t=l.Metadata.fromHttp2Headers(e);d.isTracerEnabled(p)&&m("Request to "+this.handler.path+" received headers "+JSON.stringify(t.toJSON()));const r=t.get(_);if(r.length>0){const e=r[0].toString().match(b);if(null===e){const e=new Error("Invalid deadline");return e.code=c.Status.OUT_OF_RANGE,this.sendError(e),t}const n=+e[1]*S[e[2]]|0,o=new Date;this.deadline=o.setMilliseconds(o.getMilliseconds()+n),this.deadlineTimer=setTimeout(k,n,this),t.remove(_)}return t.remove(o.constants.HTTP2_HEADER_ACCEPT_ENCODING),t.remove(o.constants.HTTP2_HEADER_TE),t.remove(o.constants.HTTP2_HEADER_CONTENT_TYPE),t.remove("grpc-accept-encoding"),t}receiveUnaryMessage(e,t){const{stream:r}=this;let n=0;const o=this,s=[],i=this.maxReceiveMessageSize;function a(e){if(n+=e.byteLength,-1!==i&&n>i)return r.removeListener("data",a),r.removeListener("end",l),r.removeListener("error",l),void t({code:c.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${n} vs. ${i})`});s.push(e)}function l(i){if(r.removeListener("data",a),r.removeListener("end",l),r.removeListener("error",l),void 0!==i)return void t({code:c.Status.INTERNAL,details:i.message});if(0===n)return void t({code:c.Status.INTERNAL,details:"received empty unary message"});o.emit("receiveMessage");const u=Buffer.concat(s,n),d=1===u.readUInt8(0)?e:"identity",h=o.getDecompressedMessage(u,d);Buffer.isBuffer(h)?o.safeDeserializeMessage(h,t):h.then((e=>o.safeDeserializeMessage(e,t)),(r=>t(r.code?r:{code:c.Status.INTERNAL,details:`Received "grpc-encoding" header "${e}" but ${e} decompression failed`})))}r.on("data",a),r.on("end",l),r.on("error",l)}safeDeserializeMessage(e,t){try{t(null,this.deserializeMessage(e))}catch(e){t({details:(0,h.getErrorMessage)(e),code:c.Status.INTERNAL})}}serializeMessage(e){const t=this.handler.serialize(e),r=t.byteLength,n=Buffer.allocUnsafe(r+5);return n.writeUInt8(0,0),n.writeUInt32BE(r,1),t.copy(n,5),n}deserializeMessage(e){return this.handler.deserialize(e)}async sendUnaryMessage(e,t,r,n){if(!this.checkCancelled()){if(void 0===r&&(r=null),e)return!Object.prototype.hasOwnProperty.call(e,"metadata")&&r&&(e.metadata=r),void this.sendError(e);try{const e=this.serializeMessage(t);this.write(e),this.sendStatus({code:c.Status.OK,details:"OK",metadata:r})}catch(e){this.sendError({details:(0,h.getErrorMessage)(e),code:c.Status.INTERNAL})}}}sendStatus(e){var t,r;if(this.emit("callEnd",e.code),this.emit("streamEnd",e.code===c.Status.OK),!this.checkCancelled())if(m("Request to method "+(null===(t=this.handler)||void 0===t?void 0:t.path)+" ended with status code: "+c.Status[e.code]+" details: "+e.details),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.headersSent)this.wantTrailers||(this.wantTrailers=!0,this.stream.once("wantTrailers",(()=>{var t;const r=Object.assign({[v]:e.code,[y]:encodeURI(e.details)},null===(t=e.metadata)||void 0===t?void 0:t.toHttp2Headers());this.stream.sendTrailers(r),this.statusSent=!0})),this.stream.end());else{const t=Object.assign(Object.assign({[v]:e.code,[y]:encodeURI(e.details)},w),null===(r=e.metadata)||void 0===r?void 0:r.toHttp2Headers());this.stream.respond(t,{endStream:!0}),this.statusSent=!0}}sendError(e){const t={code:c.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:"metadata"in e&&void 0!==e.metadata?e.metadata:null};"code"in e&&"number"==typeof e.code&&Number.isInteger(e.code)&&(t.code=e.code,"details"in e&&"string"==typeof e.details&&(t.details=e.details)),this.sendStatus(t)}write(e){if(!this.checkCancelled()){if(!(-1!==this.maxSendMessageSize&&e.length>this.maxSendMessageSize))return this.sendMetadata(),this.emit("sendMessage"),this.stream.write(e);this.sendError({code:c.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${e.length} vs. ${this.maxSendMessageSize})`})}}resume(){this.stream.resume()}setupSurfaceCall(e){this.once("cancelled",(t=>{e.cancelled=!0,e.emit("cancelled",t)})),this.once("callEnd",(t=>e.emit("callEnd",t)))}setupReadable(e,t){const r=new u.StreamDecoder;let n=!1,o=!1,s=!1;const i=()=>{s||!n||o||(s=!0,this.pushOrBufferMessage(e,null))};this.stream.on("data",(async n=>{const s=r.write(n);o=!0,this.stream.pause();for(const r of s){if(-1!==this.maxReceiveMessageSize&&r.length>this.maxReceiveMessageSize)return void this.sendError({code:c.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${r.length} vs. ${this.maxReceiveMessageSize})`});this.emit("receiveMessage");const n=1===r.readUInt8(0)?t:"identity",o=await this.getDecompressedMessage(r,n);if(!o)return;this.pushOrBufferMessage(e,o)}o=!1,this.stream.resume(),i()})),this.stream.once("end",(()=>{n=!0,i()}))}consumeUnpushedMessages(e){for(this.canPush=!0;this.messagesToPush.length>0;){const t=this.messagesToPush.shift(),r=e.push(t);if(null===t||!1===r){this.canPush=!1;break}}return this.canPush}pushOrBufferMessage(e,t){this.isPushPending?this.bufferedMessages.push(t):this.pushMessage(e,t)}async pushMessage(e,t){if(null===t)return m("Received end of stream"),void(this.canPush?e.push(null):this.messagesToPush.push(null));m("Received message of length "+t.length),this.isPushPending=!0;try{const r=await this.deserializeMessage(t);this.canPush?e.push(r)||(this.canPush=!1,this.stream.pause()):this.messagesToPush.push(r)}catch(t){this.bufferedMessages.length=0;let r=(0,h.getErrorCode)(t);(null===r||r<c.Status.OK||r>c.Status.UNAUTHENTICATED)&&(r=c.Status.INTERNAL),e.emit("error",{details:(0,h.getErrorMessage)(t),code:r})}this.isPushPending=!1,this.bufferedMessages.length>0&&this.pushMessage(e,this.bufferedMessages.shift())}getPeer(){const e=this.stream.session.socket;return e.remoteAddress?e.remotePort?`${e.remoteAddress}:${e.remotePort}`:e.remoteAddress:"unknown"}getDeadline(){return this.deadline}getPath(){return this.handler.path}}function k(e){const t=new Error("Deadline exceeded");t.code=c.Status.DEADLINE_EXCEEDED,e.sendError(t),e.cancelled=!0,e.emit("cancelled","deadline")}t.Http2ServerCallStream=O},42019:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerCredentials=void 0;const n=r(57631);class o{static createInsecure(){return new s}static createSsl(e,t,r=!1){if(null!==e&&!Buffer.isBuffer(e))throw new TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(t))throw new TypeError("keyCertPairs must be an array");if("boolean"!=typeof r)throw new TypeError("checkClientCertificate must be a boolean");const o=[],s=[];for(let e=0;e<t.length;e++){const r=t[e];if(null===r||"object"!=typeof r)throw new TypeError(`keyCertPair[${e}] must be an object`);if(!Buffer.isBuffer(r.private_key))throw new TypeError(`keyCertPair[${e}].private_key must be a Buffer`);if(!Buffer.isBuffer(r.cert_chain))throw new TypeError(`keyCertPair[${e}].cert_chain must be a Buffer`);o.push(r.cert_chain),s.push(r.private_key)}return new i({ca:e||(0,n.getDefaultRootsData)()||void 0,cert:o,key:s,requestCert:r,ciphers:n.CIPHER_SUITES})}}t.ServerCredentials=o;class s extends o{_isSecure(){return!1}_getSettings(){return null}}class i extends o{constructor(e){super(),this.options=e}_isSecure(){return!0}_getSettings(){return this.options}}},3321:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;const n=r(85158),o=r(18585),s=r(93047),i=r(42019),a=r(80480),c=r(11712),l=r(45385),u=r(16191),d=r(87876),h=r(24385),p=~(1<<31),{HTTP2_HEADER_PATH:f}=n.constants;function g(){}function m(e){return{code:o.Status.UNIMPLEMENTED,details:`The server does not implement the method ${e}`}}t.Server=class{constructor(e){var t,r,n,o;this.http2ServerList=[],this.handlers=new Map,this.sessions=new Map,this.started=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.channelzTrace=new d.ChannelzTrace,this.callTracker=new d.ChannelzCallTracker,this.listenerChildrenTracker=new d.ChannelzChildrenTracker,this.sessionChildrenTracker=new d.ChannelzChildrenTracker,this.options=null!=e?e:{},0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,d.registerChannelzServer)((()=>this.getChannelzInfo()),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=null!==(t=this.options["grpc.max_connection_age_ms"])&&void 0!==t?t:p,this.maxConnectionAgeGraceMs=null!==(r=this.options["grpc.max_connection_age_grace_ms"])&&void 0!==r?r:p,this.keepaliveTimeMs=null!==(n=this.options["grpc.keepalive_time_ms"])&&void 0!==n?n:2147483647,this.keepaliveTimeoutMs=null!==(o=this.options["grpc.keepalive_timeout_ms"])&&void 0!==o?o:2e4,this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter(e){return()=>{var t,r,n;const o=this.sessions.get(e),s=e.socket,i=s.remoteAddress?(0,l.stringToSubchannelAddress)(s.remoteAddress,s.remotePort):null,a=s.localAddress?(0,l.stringToSubchannelAddress)(s.localAddress,s.localPort):null;let c;if(e.encrypted){const e=s,r=e.getCipher(),n=e.getCertificate(),o=e.getPeerCertificate();c={cipherSuiteStandardName:null!==(t=r.standardName)&&void 0!==t?t:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:n&&"raw"in n?n.raw:null,remoteCertificate:o&&"raw"in o?o.raw:null}}else c=null;return{remoteAddress:i,localAddress:a,security:c,remoteName:null,streamsStarted:o.streamTracker.callsStarted,streamsSucceeded:o.streamTracker.callsSucceeded,streamsFailed:o.streamTracker.callsFailed,messagesSent:o.messagesSent,messagesReceived:o.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:o.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:o.lastMessageSentTimestamp,lastMessageReceivedTimestamp:o.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(r=e.state.localWindowSize)&&void 0!==r?r:null,remoteFlowControlWindow:null!==(n=e.state.remoteWindowSize)&&void 0!==n?n:null}}}trace(e){c.trace(o.LogVerbosity.DEBUG,"server","("+this.channelzRef.id+") "+e)}addProtoService(){throw new Error("Not implemented. Use addService() instead")}addService(e,t){if(null===e||"object"!=typeof e||null===t||"object"!=typeof t)throw new Error("addService() requires two objects as arguments");const r=Object.keys(e);if(0===r.length)throw new Error("Cannot add an empty service to a server");r.forEach((r=>{const n=e[r];let o;o=n.requestStream?n.responseStream?"bidi":"clientStream":n.responseStream?"serverStream":"unary";let s,i=t[r];if(void 0===i&&"string"==typeof n.originalName&&(i=t[n.originalName]),s=void 0!==i?i.bind(t):function(e,t){const r=m(t);switch(e){case"unary":case"clientStream":return(e,t)=>{t(r,null)};case"serverStream":case"bidi":return e=>{e.emit("error",r)};default:throw new Error(`Invalid handlerType ${e}`)}}(o,r),!1===this.register(n.path,s,n.responseSerialize,n.requestDeserialize,o))throw new Error(`Method handler for ${n.path} already provided.`)}))}removeService(e){if(null===e||"object"!=typeof e)throw new Error("removeService() requires object as argument");Object.keys(e).forEach((t=>{const r=e[t];this.unregister(r.path)}))}bind(e,t){throw new Error("Not implemented. Use bindAsync() instead")}bindAsync(e,t,r){if(!0===this.started)throw new Error("server is already started");if("string"!=typeof e)throw new TypeError("port must be a string");if(null===t||!(t instanceof i.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");if("function"!=typeof r)throw new TypeError("callback must be a function");const s=(0,u.parseUri)(e);if(null===s)throw new Error(`Could not parse port "${e}"`);const h=(0,a.mapUriDefaultScheme)(s);if(null===h)throw new Error(`Could not get a default scheme for port "${e}"`);const p={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};"grpc-node.max_session_memory"in this.options?p.maxSessionMemory=this.options["grpc-node.max_session_memory"]:p.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(p.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]});const f=(e,t)=>{process.nextTick((()=>r(e,t)))},m=()=>{let e;if(t._isSecure()){const r=Object.assign(p,t._getSettings());e=n.createSecureServer(r),e.on("secureConnection",(e=>{e.on("error",(e=>{this.trace("An incoming TLS connection closed with error: "+e.message)}))}))}else e=n.createServer(p);return e.setTimeout(0,g),this._setupHandlers(e),e},y=(e,t,r)=>0===e.length?Promise.resolve({port:t,count:r}):Promise.all(e.map((e=>{let r;this.trace("Attempting to bind "+(0,l.subchannelAddressToString)(e)),r=(0,l.isTcpSubchannelAddress)(e)?{host:e.host,port:t}:e;const n=m();return new Promise(((o,s)=>{const i=t=>{this.trace("Failed to bind "+(0,l.subchannelAddressToString)(e)+" with error "+t.message),o(t)};n.once("error",i),n.listen(r,(()=>{const e=n.address();let r,s;r="string"==typeof e?{path:e}:{host:e.address,port:e.port},s=(0,d.registerChannelzSocket)((0,l.subchannelAddressToString)(r),(()=>({localAddress:r,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null})),this.channelzEnabled),this.channelzEnabled&&this.listenerChildrenTracker.refChild(s),this.http2ServerList.push({server:n,channelzRef:s}),this.trace("Successfully bound "+(0,l.subchannelAddressToString)(r)),o("port"in r?r.port:t),n.removeListener("error",i)}))}))}))).then((e=>{let n=0;for(const r of e)if("number"==typeof r&&(n+=1,r!==t))throw new Error("Invalid state: multiple port numbers added from single address");return{port:t,count:n+r}})),v=e=>{if(0===e.length)return Promise.resolve({port:0,count:0});const t=e[0],r=m();return new Promise(((n,o)=>{const s=r=>{this.trace("Failed to bind "+(0,l.subchannelAddressToString)(t)+" with error "+r.message),n(v(e.slice(1)))};r.once("error",s),r.listen(t,(()=>{const t=r.address(),o={host:t.address,port:t.port};let i;i=(0,d.registerChannelzSocket)((0,l.subchannelAddressToString)(o),(()=>({localAddress:o,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null})),this.channelzEnabled),this.channelzEnabled&&this.listenerChildrenTracker.refChild(i),this.http2ServerList.push({server:r,channelzRef:i}),this.trace("Successfully bound "+(0,l.subchannelAddressToString)(o)),n(y(e.slice(1),t.port,1)),r.removeListener("error",s)}))}))},_={onSuccessfulResolution:(t,r,n)=>{if(_.onSuccessfulResolution=()=>{},0===t.length)return void f(new Error(`No addresses resolved for port ${e}`),0);let s;s=(0,l.isTcpSubchannelAddress)(t[0])?0===t[0].port?v(t):y(t,t[0].port,0):y(t,1,0),s.then((e=>{if(0===e.count){const e=`No address added out of total ${t.length} resolved`;c.log(o.LogVerbosity.ERROR,e),f(new Error(e),0)}else e.count<t.length&&c.log(o.LogVerbosity.INFO,`WARNING Only ${e.count} addresses added out of total ${t.length} resolved`),f(null,e.port)}),(e=>{const r=`No address added out of total ${t.length} resolved`;c.log(o.LogVerbosity.ERROR,r),f(new Error(r),0)}))},onError:e=>{f(new Error(e.details),0)}};(0,a.createResolver)(h,_,this.options).updateResolution()}forceShutdown(){for(const{server:e,channelzRef:t}of this.http2ServerList)e.listening&&e.close((()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),(0,d.unregisterChannelzRef)(t))}));this.started=!1,this.sessions.forEach(((e,t)=>{t.destroy(n.constants.NGHTTP2_CANCEL)})),this.sessions.clear(),this.channelzEnabled&&(0,d.unregisterChannelzRef)(this.channelzRef)}register(e,t,r,n,o){return!this.handlers.has(e)&&(this.handlers.set(e,{func:t,serialize:r,deserialize:n,type:o,path:e}),!0)}unregister(e){return this.handlers.delete(e)}start(){if(0===this.http2ServerList.length||this.http2ServerList.every((({server:e})=>!0!==e.listening)))throw new Error("server must be bound in order to start");if(!0===this.started)throw new Error("server is already started");this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Starting"),this.started=!0}tryShutdown(e){const t=t=>{this.channelzEnabled&&(0,d.unregisterChannelzRef)(this.channelzRef),e(t)};let r=0;function n(){r--,0===r&&t()}this.started=!1;for(const{server:e,channelzRef:t}of this.http2ServerList)e.listening&&(r++,e.close((()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),(0,d.unregisterChannelzRef)(t)),n()})));this.sessions.forEach(((e,t)=>{t.closed||(r+=1,t.close(n))})),0===r&&t()}addHttp2Port(){throw new Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(e,t){const r=t[n.constants.HTTP2_HEADER_CONTENT_TYPE];return!("string"!=typeof r||!r.startsWith("application/grpc"))||(e.respond({[n.constants.HTTP2_HEADER_STATUS]:n.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1)}_retrieveHandler(e){const t=e[f];this.trace("Received call to method "+t+" at address "+this.serverAddressString);const r=this.handlers.get(t);if(void 0===r)throw this.trace("No handler registered for method "+t+". Sending UNIMPLEMENTED status."),m(t);return r}_respondWithError(e,t,r=null){const n=new s.Http2ServerCallStream(t,null,this.options);void 0===e.code&&(e.code=o.Status.INTERNAL),this.channelzEnabled&&(this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed()),n.sendError(e)}_channelzHandler(e,t){var r;const n=this.sessions.get(e.session);if(this.callTracker.addCallStarted(),null==n||n.streamTracker.addCallStarted(),!this._verifyContentType(e,t))return this.callTracker.addCallFailed(),void(null==n||n.streamTracker.addCallFailed());let i;try{i=this._retrieveHandler(t)}catch(t){return void this._respondWithError({details:(0,h.getErrorMessage)(t),code:null!==(r=(0,h.getErrorCode)(t))&&void 0!==r?r:void 0},e,n)}const a=new s.Http2ServerCallStream(e,i,this.options);a.once("callEnd",(e=>{e===o.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()})),n&&(a.once("streamEnd",(e=>{e?n.streamTracker.addCallSucceeded():n.streamTracker.addCallFailed()})),a.on("sendMessage",(()=>{n.messagesSent+=1,n.lastMessageSentTimestamp=new Date})),a.on("receiveMessage",(()=>{n.messagesReceived+=1,n.lastMessageReceivedTimestamp=new Date}))),this._runHandlerForCall(a,i,t)||(this.callTracker.addCallFailed(),null==n||n.streamTracker.addCallFailed(),a.sendError({code:o.Status.INTERNAL,details:`Unknown handler type: ${i.type}`}))}_streamHandler(e,t){var r;if(!0!==this._verifyContentType(e,t))return;let n;try{n=this._retrieveHandler(t)}catch(t){return void this._respondWithError({details:(0,h.getErrorMessage)(t),code:null!==(r=(0,h.getErrorCode)(t))&&void 0!==r?r:void 0},e,null)}const i=new s.Http2ServerCallStream(e,n,this.options);this._runHandlerForCall(i,n,t)||i.sendError({code:o.Status.INTERNAL,details:`Unknown handler type: ${n.type}`})}_runHandlerForCall(e,t,r){var n;const o=e.receiveMetadata(r),i=null!==(n=o.get("grpc-encoding")[0])&&void 0!==n?n:"identity";o.remove("grpc-encoding");const{type:a}=t;if("unary"===a)!function(e,t,r,n){e.receiveUnaryMessage(n,((n,o)=>{if(n)return void e.sendError(n);if(void 0===o||e.cancelled)return;const i=new s.ServerUnaryCallImpl(e,r,o);t.func(i,((t,r,n,o)=>{e.sendUnaryMessage(t,r,n,o)}))}))}(e,t,o,i);else if("clientStream"===a)!function(e,t,r,n){const o=new s.ServerReadableStreamImpl(e,r,t.deserialize,n);function i(t,r,n,s){o.destroy(),e.sendUnaryMessage(t,r,n,s)}e.cancelled||(o.on("error",i),t.func(o,i))}(e,t,o,i);else if("serverStream"===a)!function(e,t,r,n){e.receiveUnaryMessage(n,((n,o)=>{if(n)return void e.sendError(n);if(void 0===o||e.cancelled)return;const i=new s.ServerWritableStreamImpl(e,r,t.serialize,o);t.func(i)}))}(e,t,o,i);else{if("bidi"!==a)return!1;!function(e,t,r,n){const o=new s.ServerDuplexStreamImpl(e,r,t.serialize,t.deserialize,n);e.cancelled||t.func(o)}(e,t,o,i)}return!0}_setupHandlers(e){if(null===e)return;const t=e.address();let r="null";t&&(r="string"==typeof t?t:t.address+":"+t.port),this.serverAddressString=r;const o=this.channelzEnabled?this._channelzHandler:this._streamHandler;e.on("stream",o.bind(this)),e.on("session",(e=>{var t,r,o,s,i;if(!this.started)return void e.destroy();let a;a=(0,d.registerChannelzSocket)(null!==(t=e.socket.remoteAddress)&&void 0!==t?t:"unknown",this.getChannelzSessionInfoGetter(e),this.channelzEnabled);const c={ref:a,streamTracker:new d.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set(e,c);const l=e.socket.remoteAddress;this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection established by client "+l),this.sessionChildrenTracker.refChild(a));let u=null,h=null,f=!1;if(this.maxConnectionAgeMs!==p){const t=this.maxConnectionAgeMs/10,s=Math.random()*t*2-t;u=null===(o=(r=setTimeout((()=>{var t,r;f=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+l);try{e.goaway(n.constants.NGHTTP2_NO_ERROR,~(1<<31),Buffer.from("max_age"))}catch(t){return void e.destroy()}e.close(),this.maxConnectionAgeGraceMs!==p&&(h=null===(r=(t=setTimeout((()=>{e.destroy()}),this.maxConnectionAgeGraceMs)).unref)||void 0===r?void 0:r.call(t))}),this.maxConnectionAgeMs+s)).unref)||void 0===o?void 0:o.call(r)}const g=null===(i=(s=setInterval((()=>{var t,r;const n=null===(r=(t=setTimeout((()=>{f=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+l),e.close()}),this.keepaliveTimeoutMs)).unref)||void 0===r?void 0:r.call(t);try{e.ping(((e,t,r)=>{clearTimeout(n)}))}catch(t){e.destroy()}}),this.keepaliveTimeMs)).unref)||void 0===i?void 0:i.call(s);e.on("close",(()=>{this.channelzEnabled&&(f||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+l),this.sessionChildrenTracker.unrefChild(a),(0,d.unregisterChannelzRef)(a)),u&&clearTimeout(u),h&&clearTimeout(h),g&&clearTimeout(g),this.sessions.delete(e)}))}))}}},86132:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractAndSelectServiceConfig=t.validateServiceConfig=t.validateRetryThrottling=void 0;const n=r(22037),o=r(18585),s=r(54821),i=/^\d+(\.\d{1,9})?s$/;function a(e){if(!("service"in e)||"string"!=typeof e.service)throw new Error("Invalid method config name: invalid service");const t={service:e.service};if("method"in e){if("string"!=typeof e.method)throw new Error("Invalid method config name: invalid method");t.method=e.method}return t}function c(e){var t;const r={name:[]};if(!("name"in e)||!Array.isArray(e.name))throw new Error("Invalid method config: invalid name array");for(const t of e.name)r.name.push(a(t));if("waitForReady"in e){if("boolean"!=typeof e.waitForReady)throw new Error("Invalid method config: invalid waitForReady");r.waitForReady=e.waitForReady}if("timeout"in e)if("object"==typeof e.timeout){if(!("seconds"in e.timeout)||"number"!=typeof e.timeout.seconds)throw new Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in e.timeout)||"number"!=typeof e.timeout.nanos)throw new Error("Invalid method config: invalid timeout.nanos");r.timeout=e.timeout}else{if("string"!=typeof e.timeout||!i.test(e.timeout))throw new Error("Invalid method config: invalid timeout");{const n=e.timeout.substring(0,e.timeout.length-1).split(".");r.timeout={seconds:0|n[0],nanos:0|(null!==(t=n[1])&&void 0!==t?t:0)}}}if("maxRequestBytes"in e){if("number"!=typeof e.maxRequestBytes)throw new Error("Invalid method config: invalid maxRequestBytes");r.maxRequestBytes=e.maxRequestBytes}if("maxResponseBytes"in e){if("number"!=typeof e.maxResponseBytes)throw new Error("Invalid method config: invalid maxRequestBytes");r.maxResponseBytes=e.maxResponseBytes}if("retryPolicy"in e){if("hedgingPolicy"in e)throw new Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");r.retryPolicy=function(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw new Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in e)||"string"!=typeof e.initialBackoff||!i.test(e.initialBackoff))throw new Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer followed by s");if(!("maxBackoff"in e)||"string"!=typeof e.maxBackoff||!i.test(e.maxBackoff))throw new Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer followed by s");if(!("backoffMultiplier"in e)||"number"!=typeof e.backoffMultiplier||e.backoffMultiplier<=0)throw new Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in e)||!Array.isArray(e.retryableStatusCodes))throw new Error("Invalid method config retry policy: retryableStatusCodes is required");if(0===e.retryableStatusCodes.length)throw new Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(const t of e.retryableStatusCodes)if("number"==typeof t){if(!Object.values(o.Status).includes(t))throw new Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else{if("string"!=typeof t)throw new Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");if(!Object.values(o.Status).includes(t.toUpperCase()))throw new Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}return{maxAttempts:e.maxAttempts,initialBackoff:e.initialBackoff,maxBackoff:e.maxBackoff,backoffMultiplier:e.backoffMultiplier,retryableStatusCodes:e.retryableStatusCodes}}(e.retryPolicy)}else"hedgingPolicy"in e&&(r.hedgingPolicy=function(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw new Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in e&&("string"!=typeof e.hedgingDelay||!i.test(e.hedgingDelay)))throw new Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in e&&Array.isArray(e.nonFatalStatusCodes))for(const t of e.nonFatalStatusCodes)if("number"==typeof t){if(!Object.values(o.Status).includes(t))throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value not in status code range")}else{if("string"!=typeof t)throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value must be a string or number");if(!Object.values(o.Status).includes(t.toUpperCase()))throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value not a status code name")}const t={maxAttempts:e.maxAttempts};return e.hedgingDelay&&(t.hedgingDelay=e.hedgingDelay),e.nonFatalStatusCodes&&(t.nonFatalStatusCodes=e.nonFatalStatusCodes),t}(e.hedgingPolicy));return r}function l(e){if(!("maxTokens"in e)||"number"!=typeof e.maxTokens||e.maxTokens<=0||e.maxTokens>1e3)throw new Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in e)||"number"!=typeof e.tokenRatio||e.tokenRatio<=0)throw new Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+e.maxTokens.toFixed(3),tokenRatio:+e.tokenRatio.toFixed(3)}}function u(e){const t={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in e){if("string"!=typeof e.loadBalancingPolicy)throw new Error("Invalid service config: invalid loadBalancingPolicy");t.loadBalancingPolicy=e.loadBalancingPolicy}if("loadBalancingConfig"in e){if(!Array.isArray(e.loadBalancingConfig))throw new Error("Invalid service config: invalid loadBalancingConfig");for(const r of e.loadBalancingConfig)t.loadBalancingConfig.push((0,s.validateLoadBalancingConfig)(r))}if("methodConfig"in e&&Array.isArray(e.methodConfig))for(const r of e.methodConfig)t.methodConfig.push(c(r));"retryThrottling"in e&&(t.retryThrottling=l(e.retryThrottling));const r=[];for(const e of t.methodConfig)for(const t of e.name){for(const e of r)if(t.service===e.service&&t.method===e.method)throw new Error(`Invalid service config: duplicate name ${t.service}/${t.method}`);r.push(t)}return t}function d(e){if(!("serviceConfig"in e))throw new Error("Invalid service config choice: missing service config");const t={serviceConfig:u(e.serviceConfig)};if("clientLanguage"in e){if(!Array.isArray(e.clientLanguage))throw new Error("Invalid service config choice: invalid clientLanguage");t.clientLanguage=[];for(const r of e.clientLanguage){if("string"!=typeof r)throw new Error("Invalid service config choice: invalid clientLanguage");t.clientLanguage.push(r)}}if("clientHostname"in e){if(!Array.isArray(e.clientHostname))throw new Error("Invalid service config choice: invalid clientHostname");t.clientHostname=[];for(const r of e.clientHostname){if("string"!=typeof r)throw new Error("Invalid service config choice: invalid clientHostname");t.clientHostname.push(r)}}if("percentage"in e){if(!("number"==typeof e.percentage&&0<=e.percentage&&e.percentage<=100))throw new Error("Invalid service config choice: invalid percentage");t.percentage=e.percentage}const r=["clientLanguage","percentage","clientHostname","serviceConfig"];for(const t in e)if(!r.includes(t))throw new Error(`Invalid service config choice: unexpected field ${t}`);return t}function h(e,t){if(!Array.isArray(e))throw new Error("Invalid service config list");for(const r of e){const e=d(r);if(!("number"==typeof e.percentage&&t>e.percentage)){if(Array.isArray(e.clientHostname)){let t=!1;for(const r of e.clientHostname)r===n.hostname()&&(t=!0);if(!t)continue}if(Array.isArray(e.clientLanguage)){let t=!1;for(const r of e.clientLanguage)"node"===r&&(t=!0);if(!t)continue}return e.serviceConfig}}throw new Error("No matching service config found")}t.validateRetryThrottling=l,t.validateServiceConfig=u,t.extractAndSelectServiceConfig=function(e,t){for(const r of e)if(r.length>0&&r[0].startsWith("grpc_config=")){const e=r.join("").substring("grpc_config=".length);return h(JSON.parse(e),t)}return null}},91182:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusBuilder=void 0,t.StatusBuilder=class{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){const e={};return null!==this.code&&(e.code=this.code),null!==this.details&&(e.details=this.details),null!==this.metadata&&(e.metadata=this.metadata),e}}},40494:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamDecoder=void 0,function(e){e[e.NO_DATA=0]="NO_DATA",e[e.READING_SIZE=1]="READING_SIZE",e[e.READING_MESSAGE=2]="READING_MESSAGE"}(r||(r={})),t.StreamDecoder=class{constructor(){this.readState=r.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(e){let t,n=0;const o=[];for(;n<e.length;)switch(this.readState){case r.NO_DATA:this.readCompressFlag=e.slice(n,n+1),n+=1,this.readState=r.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case r.READING_SIZE:if(t=Math.min(e.length-n,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,n,n+t),this.readSizeRemaining-=t,n+=t,0===this.readSizeRemaining)if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=r.READING_MESSAGE;else{const e=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=r.NO_DATA,o.push(e)}break;case r.READING_MESSAGE:if(t=Math.min(e.length-n,this.readMessageRemaining),this.readPartialMessage.push(e.slice(n,n+t)),this.readMessageRemaining-=t,n+=t,0===this.readMessageRemaining){const e=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),t=Buffer.concat(e,this.readMessageSize+5);this.readState=r.NO_DATA,o.push(t)}break;default:throw new Error("Unexpected read state")}return o}}},45385:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringToSubchannelAddress=t.subchannelAddressToString=t.subchannelAddressEqual=t.isTcpSubchannelAddress=void 0;const n=r(41808);function o(e){return"port"in e}t.isTcpSubchannelAddress=o,t.subchannelAddressEqual=function(e,t){return o(e)?o(t)&&e.host===t.host&&e.port===t.port:!o(t)&&e.path===t.path},t.subchannelAddressToString=function(e){return o(e)?e.host+":"+e.port:e.path},t.stringToSubchannelAddress=function(e,t){return(0,n.isIP)(e)?{host:e,port:null!=t?t:443}:{path:e}}},90345:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelCall=void 0;const n=r(85158),o=r(22037),s=r(18585),i=r(45935),a=r(40494),c=r(11712),l=r(18585),{HTTP2_HEADER_STATUS:u,HTTP2_HEADER_CONTENT_TYPE:d,NGHTTP2_CANCEL:h}=n.constants;t.Http2SubchannelCall=class{constructor(e,t,r,c,l){this.http2Stream=e,this.callEventTracker=t,this.listener=r,this.transport=c,this.callId=l,this.decoder=new a.StreamDecoder,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.mappedStatusCode=s.Status.UNKNOWN,this.finalStatus=null,this.internalError=null,e.on("response",((e,t)=>{let r="";for(const t of Object.keys(e))r+="\t\t"+t+": "+e[t]+"\n";switch(this.trace("Received server headers:\n"+r),e[":status"]){case 400:this.mappedStatusCode=s.Status.INTERNAL;break;case 401:this.mappedStatusCode=s.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=s.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=s.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=s.Status.UNAVAILABLE;break;default:this.mappedStatusCode=s.Status.UNKNOWN}if(t&n.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(e);else{let t;try{t=i.Metadata.fromHttp2Headers(e)}catch(e){return void this.endCall({code:s.Status.UNKNOWN,details:e.message,metadata:new i.Metadata})}this.listener.onReceiveMetadata(t)}})),e.on("trailers",(e=>{this.handleTrailers(e)})),e.on("data",(e=>{if(this.statusOutput)return;this.trace("receive HTTP/2 data frame of length "+e.length);const t=this.decoder.write(e);for(const e of t)this.trace("parsed message of length "+e.length),this.callEventTracker.addMessageReceived(),this.tryPush(e)})),e.on("end",(()=>{this.readsClosed=!0,this.maybeOutputStatus()})),e.on("close",(()=>{process.nextTick((()=>{var t;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),(null===(t=this.finalStatus)||void 0===t?void 0:t.code)===s.Status.OK)return;let r,o="";switch(e.rstCode){case n.constants.NGHTTP2_NO_ERROR:if(null!==this.finalStatus)return;r=s.Status.INTERNAL,o=`Received RST_STREAM with code ${e.rstCode}`;break;case n.constants.NGHTTP2_REFUSED_STREAM:r=s.Status.UNAVAILABLE,o="Stream refused by server";break;case n.constants.NGHTTP2_CANCEL:r=s.Status.CANCELLED,o="Call cancelled";break;case n.constants.NGHTTP2_ENHANCE_YOUR_CALM:r=s.Status.RESOURCE_EXHAUSTED,o="Bandwidth exhausted or memory limit exceeded";break;case n.constants.NGHTTP2_INADEQUATE_SECURITY:r=s.Status.PERMISSION_DENIED,o="Protocol not secure enough";break;case n.constants.NGHTTP2_INTERNAL_ERROR:r=s.Status.INTERNAL,null===this.internalError?o=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:"ECONNRESET"===this.internalError.code||"ETIMEDOUT"===this.internalError.code?(r=s.Status.UNAVAILABLE,o=this.internalError.message):o=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:r=s.Status.INTERNAL,o=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:r,details:o,metadata:new i.Metadata,rstCode:e.rstCode})}))})),e.on("error",(e=>{"ERR_HTTP2_STREAM_ERROR"!==e.code&&(this.trace("Node error event: message="+e.message+" code="+e.code+" errno="+function(e){for(const[t,r]of Object.entries(o.constants.errno))if(r===e)return t;return"Unknown system error "+e}(e.errno)+" syscall="+e.syscall),this.internalError=e),this.callEventTracker.onStreamEnd(!1)}))}onDisconnect(){this.endCall({code:s.Status.UNAVAILABLE,details:"Connection dropped",metadata:new i.Metadata})}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick((()=>{this.listener.onReceiveStatus(this.finalStatus)})),this.http2Stream.resume())}trace(e){c.trace(l.LogVerbosity.DEBUG,"subchannel_call","["+this.callId+"] "+e)}endCall(e){null!==this.finalStatus&&this.finalStatus.code!==s.Status.OK||(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){null!==this.finalStatus&&(this.finalStatus.code!==s.Status.OK||this.readsClosed&&0===this.unpushedReadMessages.length&&!this.isReadFilterPending&&!this.isPushPending)&&this.outputStatus()}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick((()=>{this.isPushPending=!1,this.statusOutput||(this.listener.onReceiveMessage(e),this.maybeOutputStatus())}))}tryPush(e){this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e))}handleTrailers(e){this.callEventTracker.onStreamEnd(!0);let t,r="";for(const t of Object.keys(e))r+="\t\t"+t+": "+e[t]+"\n";this.trace("Received server trailers:\n"+r);try{t=i.Metadata.fromHttp2Headers(e)}catch(e){t=new i.Metadata}const n=t.getMap();let o=this.mappedStatusCode;if(o===s.Status.UNKNOWN&&"string"==typeof n["grpc-status"]){const e=Number(n["grpc-status"]);e in s.Status&&(o=e,this.trace("received status code "+e+" from server")),t.remove("grpc-status")}let a="";if("string"==typeof n["grpc-message"]){try{a=decodeURI(n["grpc-message"])}catch(e){a=n["grpc-message"]}t.remove("grpc-message"),this.trace('received status details string "'+a+'" from server')}const c={code:o,details:a,metadata:t};this.endCall(c)}destroyHttp2Stream(){var e;if(!this.http2Stream.destroyed){let t;t=(null===(e=this.finalStatus)||void 0===e?void 0:e.code)===s.Status.OK?n.constants.NGHTTP2_NO_ERROR:n.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+t),this.http2Stream.close(t)}}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.endCall({code:e,details:t,metadata:new i.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}startRead(){if(null!==this.finalStatus&&this.finalStatus.code!==s.Status.OK)return this.readsClosed=!0,void this.maybeOutputStatus();if(this.canPush=!0,this.unpushedReadMessages.length>0){const e=this.unpushedReadMessages.shift();this.push(e)}else this.http2Stream.resume()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);const r=t=>{var r;let n=s.Status.UNAVAILABLE;"ERR_STREAM_WRITE_AFTER_END"===(null==t?void 0:t.code)&&(n=s.Status.INTERNAL),t&&this.cancelWithStatus(n,`Write error: ${t.message}`),null===(r=e.callback)||void 0===r||r.call(e)};this.trace("sending data chunk of length "+t.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(t,r)}catch(e){this.endCall({code:s.Status.UNAVAILABLE,details:`Write failed with error ${e.message}`,metadata:new i.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}}},44027:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSubchannelWrapper=void 0,t.BaseSubchannelWrapper=class{constructor(e){this.child=e}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e)}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}}},39008:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSubchannelPool=t.SubchannelPool=void 0;const n=r(63910),o=r(11499),s=r(45385),i=r(16191),a=r(93185);class c{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let e=!0;for(const t in this.pool){const r=this.pool[t].filter((e=>!e.subchannel.unrefIfOneRef()));r.length>0&&(e=!1),this.pool[t]=r}e&&null!==this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var e,t;null===this.cleanupTimer&&(this.cleanupTimer=setInterval((()=>{this.unrefUnusedSubchannels()}),1e4),null===(t=(e=this.cleanupTimer).unref)||void 0===t||t.call(e))}getOrCreateSubchannel(e,t,r,c){this.ensureCleanupTask();const l=(0,i.uriToString)(e);if(l in this.pool){const e=this.pool[l];for(const o of e)if((0,s.subchannelAddressEqual)(t,o.subchannelAddress)&&(0,n.channelOptionsEqual)(r,o.channelArguments)&&c._equals(o.channelCredentials))return o.subchannel}const u=new o.Subchannel(e,t,r,c,new a.Http2SubchannelConnector(e));return l in this.pool||(this.pool[l]=[]),this.pool[l].push({subchannelAddress:t,channelArguments:r,channelCredentials:c,subchannel:u}),u.ref(),u}}t.SubchannelPool=c;const l=new c;t.getSubchannelPool=function(e){return e?l:new c}},11499:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subchannel=void 0;const n=r(99341),o=r(19722),s=r(11712),i=r(18585),a=r(16191),c=r(45385),l=r(87876);t.Subchannel=class{constructor(e,t,r,s,i){var a;this.channelTarget=e,this.subchannelAddress=t,this.options=r,this.credentials=s,this.connector=i,this.connectivityState=n.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=[],this.refcount=0,this.channelzEnabled=!0,this.callTracker=new l.ChannelzCallTracker,this.childrenTracker=new l.ChannelzChildrenTracker,this.streamTracker=new l.ChannelzCallTracker;const u={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new o.BackoffTimeout((()=>{this.handleBackoffTimer()}),u),this.subchannelAddressString=(0,c.subchannelAddressToString)(t),this.keepaliveTime=null!==(a=r["grpc.keepalive_time_ms"])&&void 0!==a?a:-1,0===r["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new l.ChannelzTrace,this.channelzRef=(0,l.registerChannelzSubchannel)(this.subchannelAddressString,(()=>this.getChannelzInfo()),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(r,void 0,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){s.trace(i.LogVerbosity.DEBUG,"subchannel","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){s.trace(i.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.CONNECTING):this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){const t=Math.min(this.keepaliveTime,2147483647);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":t})}this.connector.connect(this.subchannelAddress,this.credentials,e).then((e=>{this.transitionToState([n.ConnectivityState.CONNECTING],n.ConnectivityState.READY)&&(this.transport=e,this.channelzEnabled&&this.childrenTracker.refChild(e.getChannelzRef()),e.addDisconnectListener((e=>{this.transitionToState([n.ConnectivityState.READY],n.ConnectivityState.IDLE),e&&this.keepaliveTime>0&&(this.keepaliveTime*=2,s.log(i.LogVerbosity.ERROR,`Connection to ${(0,a.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))})))}),(e=>{this.transitionToState([n.ConnectivityState.CONNECTING],n.ConnectivityState.TRANSIENT_FAILURE)}))}transitionToState(e,t){var r,o;if(-1===e.indexOf(this.connectivityState))return!1;this.trace(n.ConnectivityState[this.connectivityState]+" -> "+n.ConnectivityState[t]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO",n.ConnectivityState[this.connectivityState]+" -> "+n.ConnectivityState[t]);const s=this.connectivityState;switch(this.connectivityState=t,t){case n.ConnectivityState.READY:this.stopBackoff();break;case n.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case n.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null===(r=this.transport)||void 0===r||r.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick((()=>{this.handleBackoffTimer()}));break;case n.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null===(o=this.transport)||void 0===o||o.shutdown(),this.transport=null;break;default:throw new Error(`Invalid state: unknown ConnectivityState ${t}`)}for(const e of[...this.stateListeners])e(this,s,t,this.keepaliveTime);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,0===this.refcount&&(this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Shutting down"),this.transitionToState([n.ConnectivityState.CONNECTING,n.ConnectivityState.READY],n.ConnectivityState.IDLE),this.channelzEnabled&&(0,l.unregisterChannelzRef)(this.channelzRef))}unrefIfOneRef(){return 1===this.refcount&&(this.unref(),!0)}createCall(e,t,r,n){if(!this.transport)throw new Error("Cannot create call, subchannel not READY");let o;return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),o={onCallEnd:e=>{e.code===i.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):o={},this.transport.createCall(e,t,r,n,o)}startConnecting(){this.transitionToState([n.ConnectivityState.IDLE],n.ConnectivityState.CONNECTING)||this.connectivityState===n.ConnectivityState.TRANSIENT_FAILURE&&(this.continueConnecting=!0)}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){const t=this.stateListeners.indexOf(e);t>-1&&this.stateListeners.splice(t,1)}resetBackoff(){this.backoffTimeout.reset(),this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.CONNECTING)}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}throttleKeepalive(e){e>this.keepaliveTime&&(this.keepaliveTime=e)}}},57631:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultRootsData=t.CIPHER_SUITES=void 0;const n=r(57147);t.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;const o=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH;let s=null;t.getDefaultRootsData=function(){return o?(null===s&&(s=n.readFileSync(o)),s):null}},93185:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelConnector=void 0;const n=r(85158),o=r(24404),s=r(87876),i=r(18585),a=r(70865),c=r(11712),l=r(80480),u=r(45385),d=r(16191),h=r(41808),p=r(90345),f=r(24891),g="transport",m=r(26593).i8,{HTTP2_HEADER_AUTHORITY:y,HTTP2_HEADER_CONTENT_TYPE:v,HTTP2_HEADER_METHOD:_,HTTP2_HEADER_PATH:b,HTTP2_HEADER_TE:S,HTTP2_HEADER_USER_AGENT:E}=n.constants,w=Buffer.from("too_many_pings","ascii");class A{constructor(e,t,r){this.session=e,this.keepaliveTimeMs=-1,this.keepaliveTimeoutMs=2e4,this.keepaliveTimeoutId=null,this.keepaliveWithoutCalls=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.remoteName=null,this.streamTracker=new s.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.userAgent=[r["grpc.primary_user_agent"],`grpc-node-js/${m}`,r["grpc.secondary_user_agent"]].filter((e=>e)).join(" "),"grpc.keepalive_time_ms"in r&&(this.keepaliveTimeMs=r["grpc.keepalive_time_ms"]),"grpc.keepalive_timeout_ms"in r&&(this.keepaliveTimeoutMs=r["grpc.keepalive_timeout_ms"]),this.keepaliveWithoutCalls="grpc.keepalive_permit_without_calls"in r&&1===r["grpc.keepalive_permit_without_calls"],this.keepaliveIntervalId=setTimeout((()=>{}),0),clearTimeout(this.keepaliveIntervalId),this.keepaliveWithoutCalls&&this.startKeepalivePings(),this.subchannelAddressString=(0,u.subchannelAddressToString)(t),0===r["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,s.registerChannelzSocket)(this.subchannelAddressString,(()=>this.getChannelzInfo()),this.channelzEnabled),e.once("close",(()=>{this.trace("session closed"),this.stopKeepalivePings(),this.handleDisconnect()})),e.once("goaway",((e,t,r)=>{let o=!1;e===n.constants.NGHTTP2_ENHANCE_YOUR_CALM&&r.equals(w)&&(o=!0),this.trace("connection closed by GOAWAY with code "+e),this.reportDisconnectToOwner(o)})),e.once("error",(e=>{this.trace("connection closed with error "+e.message)})),c.isTracerEnabled(g)&&(e.on("remoteSettings",(t=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))})),e.on("localSettings",(t=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))})))}getChannelzInfo(){var e,t,r;const n=this.session.socket,o=n.remoteAddress?(0,u.stringToSubchannelAddress)(n.remoteAddress,n.remotePort):null,s=n.localAddress?(0,u.stringToSubchannelAddress)(n.localAddress,n.localPort):null;let i;if(this.session.encrypted){const t=n,r=t.getCipher(),o=t.getCertificate(),s=t.getPeerCertificate();i={cipherSuiteStandardName:null!==(e=r.standardName)&&void 0!==e?e:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:o&&"raw"in o?o.raw:null,remoteCertificate:s&&"raw"in s?s.raw:null}}else i=null;return{remoteAddress:o,localAddress:s,security:i,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(t=this.session.state.localWindowSize)&&void 0!==t?t:null,remoteFlowControlWindow:null!==(r=this.session.state.remoteWindowSize)&&void 0!==r?r:null}}trace(e){c.trace(i.LogVerbosity.DEBUG,g,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){c.trace(i.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){c.trace(i.LogVerbosity.DEBUG,"transport_flowctrl","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){c.trace(i.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}reportDisconnectToOwner(e){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach((t=>t(e))))}handleDisconnect(){this.reportDisconnectToOwner(!1),setImmediate((()=>{for(const e of this.activeCalls)e.onDisconnect()}))}addDisconnectListener(e){this.disconnectListeners.push(e)}clearKeepaliveTimeout(){this.keepaliveTimeoutId&&(clearTimeout(this.keepaliveTimeoutId),this.keepaliveTimeoutId=null)}sendPing(){var e,t;this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimeoutId||(this.keepaliveTimeoutId=setTimeout((()=>{this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()}),this.keepaliveTimeoutMs),null===(t=(e=this.keepaliveTimeoutId).unref)||void 0===t||t.call(e));try{this.session.ping(((e,t,r)=>{this.keepaliveTrace("Received ping response"),this.clearKeepaliveTimeout()}))}catch(e){this.handleDisconnect()}}startKeepalivePings(){var e,t;this.keepaliveTimeMs<0||(this.keepaliveIntervalId=setInterval((()=>{this.sendPing()}),this.keepaliveTimeMs),null===(t=(e=this.keepaliveIntervalId).unref)||void 0===t||t.call(e))}stopKeepalivePings(){clearInterval(this.keepaliveIntervalId),this.clearKeepaliveTimeout()}removeActiveCall(e){this.activeCalls.delete(e),0===this.activeCalls.size&&(this.session.unref(),this.keepaliveWithoutCalls||this.stopKeepalivePings())}addActiveCall(e){0===this.activeCalls.size&&(this.session.ref(),this.keepaliveWithoutCalls||this.startKeepalivePings()),this.activeCalls.add(e)}createCall(e,t,r,n,o){const s=e.toHttp2Headers();let i,a,c;s[y]=t,s[E]=this.userAgent,s[v]="application/grpc",s[_]="POST",s[b]=r,s[S]="trailers";try{i=this.session.request(s)}catch(e){throw this.handleDisconnect(),e}return this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed),this.channelzEnabled?(this.streamTracker.addCallStarted(),a={addMessageSent:()=>{var e;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,null===(e=o.addMessageSent)||void 0===e||e.call(o)},addMessageReceived:()=>{var e;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,null===(e=o.addMessageReceived)||void 0===e||e.call(o)},onCallEnd:e=>{var t;null===(t=o.onCallEnd)||void 0===t||t.call(o,e),this.removeActiveCall(c)},onStreamEnd:e=>{var t;e?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),null===(t=o.onStreamEnd)||void 0===t||t.call(o,e)}}):a={addMessageSent:()=>{var e;null===(e=o.addMessageSent)||void 0===e||e.call(o)},addMessageReceived:()=>{var e;null===(e=o.addMessageReceived)||void 0===e||e.call(o)},onCallEnd:e=>{var t;null===(t=o.onCallEnd)||void 0===t||t.call(o,e),this.removeActiveCall(c)},onStreamEnd:e=>{var t;null===(t=o.onStreamEnd)||void 0===t||t.call(o,e)}},c=new p.Http2SubchannelCall(i,a,n,this,(0,f.getNextCallNumber)()),this.addActiveCall(c),c}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}shutdown(){this.session.close()}}t.Http2SubchannelConnector=class{constructor(e){this.channelTarget=e,this.session=null,this.isShutdown=!1}trace(e){}createSession(e,t,r,s){return this.isShutdown?Promise.reject():new Promise(((i,a)=>{var c,p,f;let g;s.realTarget?(g=(0,d.uriToString)(s.realTarget),this.trace("creating HTTP/2 session through proxy to "+(0,d.uriToString)(s.realTarget))):(g=null,this.trace("creating HTTP/2 session to "+(0,u.subchannelAddressToString)(e)));const m=(0,l.getDefaultAuthority)(null!==(c=s.realTarget)&&void 0!==c?c:this.channelTarget);let y=t._getConnectionOptions()||{};y.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER,y.maxSessionMemory="grpc-node.max_session_memory"in r?r["grpc-node.max_session_memory"]:Number.MAX_SAFE_INTEGER;let v="http://";if("secureContext"in y){if(v="https://",r["grpc.ssl_target_name_override"]){const e=r["grpc.ssl_target_name_override"];y.checkServerIdentity=(t,r)=>(0,o.checkServerIdentity)(e,r),y.servername=e}else{const e=null!==(f=null===(p=(0,d.splitHostPort)(m))||void 0===p?void 0:p.host)&&void 0!==f?f:"localhost";y.servername=e}s.socket&&(y.createConnection=(e,t)=>s.socket)}else y.createConnection=(t,r)=>s.socket?s.socket:h.connect(e);y=Object.assign(Object.assign({},y),e);const _=n.connect(v+m,y);this.session=_,_.unref(),_.once("connect",(()=>{_.removeAllListeners(),i(new A(_,e,r)),this.session=null})),_.once("close",(()=>{this.session=null,a()})),_.once("error",(e=>{this.trace("connection failed with error "+e.message)}))}))}connect(e,t,r){var n,s;if(this.isShutdown)return Promise.reject();const i=t._getConnectionOptions()||{};if("secureContext"in i)if(i.ALPNProtocols=["h2"],r["grpc.ssl_target_name_override"]){const e=r["grpc.ssl_target_name_override"];i.checkServerIdentity=(t,r)=>(0,o.checkServerIdentity)(e,r),i.servername=e}else if("grpc.http_connect_target"in r){const e=(0,l.getDefaultAuthority)(null!==(n=(0,d.parseUri)(r["grpc.http_connect_target"]))&&void 0!==n?n:{path:"localhost"}),t=(0,d.splitHostPort)(e);i.servername=null!==(s=null==t?void 0:t.host)&&void 0!==s?s:e}return(0,a.getProxiedConnection)(e,r,i).then((n=>this.createSession(e,t,r,n)))}shutdown(){var e;this.isShutdown=!0,null===(e=this.session)||void 0===e||e.close(),this.session=null}}},16191:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uriToString=t.splitHostPort=t.parseUri=void 0;const r=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;t.parseUri=function(e){const t=r.exec(e);return null===t?null:{scheme:t[1],authority:t[2],path:t[3]}};const n=/^\d+$/;t.splitHostPort=function(e){if(e.startsWith("[")){const t=e.indexOf("]");if(-1===t)return null;const r=e.substring(1,t);if(-1===r.indexOf(":"))return null;if(e.length>t+1){if(":"===e[t+1]){const o=e.substring(t+2);return n.test(o)?{host:r,port:+o}:null}return null}return{host:r}}{const t=e.split(":");return 2===t.length?n.test(t[1])?{host:t[0],port:+t[1]}:null:{host:e}}},t.uriToString=function(e){let t="";return void 0!==e.scheme&&(t+=e.scheme+":"),void 0!==e.authority&&(t+="//"+e.authority+"/"),t+=e.path,t}},73414:(e,t,r)=>{if(!globalThis.DOMException)try{const{MessageChannel:e}=r(71267),t=(new e).port1,n=new ArrayBuffer;t.postMessage(n,[n,n])}catch(e){"DOMException"===e.constructor.name&&(globalThis.DOMException=e.constructor)}e.exports=globalThis.DOMException},65352:(e,t,r)=>{t=e.exports=de,Object.defineProperty(t,"__esModule",{value:!0});var n=r(13685),o=r(95687),s=r(59796),i=r(12781),a=r(14300),c=r(73837),l=r(57310),u=r(41808),d=r(57147),h=r(71017),p=r(73414);function f(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var g=f(n),m=f(o),y=f(s),v=f(i),_=f(p);if(!globalThis.ReadableStream)try{const e=r(97742),{emitWarning:t}=e;try{e.emitWarning=()=>{},Object.assign(globalThis,r(72477)),e.emitWarning=t}catch(r){throw e.emitWarning=t,r}}catch(e){Object.assign(globalThis,r(42660))}try{const{Blob:e}=r(14300);e&&!e.prototype.stream&&(e.prototype.stream=function(e){let t=0;const r=this;return new ReadableStream({type:"bytes",async pull(e){const n=r.slice(t,Math.min(r.size,t+65536)),o=await n.arrayBuffer();t+=o.byteLength,e.enqueue(new Uint8Array(o)),t===r.size&&e.close()}})})}catch(e){}async function*b(e,t=!0){for(const r of e)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(t){let e=r.byteOffset;const t=r.byteOffset+r.byteLength;for(;e!==t;){const n=Math.min(t-e,65536),o=r.buffer.slice(e,e+n);e+=o.byteLength,yield new Uint8Array(o)}}else yield r;else{let e=0,t=r;for(;e!==t.size;){const r=t.slice(e,Math.min(t.size,e+65536)),n=await r.arrayBuffer();e+=n.byteLength,yield new Uint8Array(n)}}}const S=class e{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],r={}){if("object"!=typeof t||null===t)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if("function"!=typeof t[Symbol.iterator])throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if("object"!=typeof r&&"function"!=typeof r)throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");null===r&&(r={});const n=new TextEncoder;for(const r of t){let t;t=ArrayBuffer.isView(r)?new Uint8Array(r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)):r instanceof ArrayBuffer?new Uint8Array(r.slice(0)):r instanceof e?r:n.encode(`${r}`),this.#r+=ArrayBuffer.isView(t)?t.byteLength:t.size,this.#e.push(t)}this.#n=`${void 0===r.endings?"transparent":r.endings}`;const o=void 0===r.type?"":String(r.type);this.#t=/^[\x20-\x7E]*$/.test(o)?o:""}get size(){return this.#r}get type(){return this.#t}async text(){const e=new TextDecoder;let t="";for await(const r of b(this.#e,!1))t+=e.decode(r,{stream:!0});return t+=e.decode(),t}async arrayBuffer(){const e=new Uint8Array(this.size);let t=0;for await(const r of b(this.#e,!1))e.set(r,t),t+=r.length;return e.buffer}stream(){const e=b(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(t){const r=await e.next();r.done?t.close():t.enqueue(r.value)},async cancel(){await e.return()}})}slice(t=0,r=this.size,n=""){const{size:o}=this;let s=t<0?Math.max(o+t,0):Math.min(t,o),i=r<0?Math.max(o+r,0):Math.min(r,o);const a=Math.max(i-s,0),c=this.#e,l=[];let u=0;for(const e of c){if(u>=a)break;const t=ArrayBuffer.isView(e)?e.byteLength:e.size;if(s&&t<=s)s-=t,i-=t;else{let r;ArrayBuffer.isView(e)?(r=e.subarray(s,Math.min(t,i)),u+=r.byteLength):(r=e.slice(s,Math.min(t,i)),u+=r.size),i-=t,l.push(r),s=0}}const d=new e([],{type:String(n).toLowerCase()});return d.#r=a,d.#e=l,d}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&"object"==typeof e&&"function"==typeof e.constructor&&("function"==typeof e.stream||"function"==typeof e.arrayBuffer)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(S.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});const E=S,w=class extends E{#o=0;#s="";constructor(e,t,r={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,r),null===r&&(r={});const n=void 0===r.lastModified?Date.now():Number(r.lastModified);Number.isNaN(n)||(this.#o=n),this.#s=String(t)}get name(){return this.#s}get lastModified(){return this.#o}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof E&&/^(File)$/.test(e[Symbol.toStringTag])}};var{toStringTag:A,iterator:T,hasInstance:C}=Symbol,I=Math.random,R="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),O=(e,t,r)=>(e+="",/^(Blob|File)$/.test(t&&t[A])?[(r=void 0!==r?r+"":"File"==t[A]?t.name:"blob",e),t.name!==r||"blob"==t[A]?new w([t],r,t):t]:[e,t+""]),k=(e,t)=>(t?e:e.replace(/\r?\n|\r/g,"\r\n")).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),N=(e,t,r)=>{if(t.length<r)throw new TypeError(`Failed to execute '${e}' on 'FormData': ${r} arguments required, but only ${t.length} present.`)};const P=class{#i=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[A](){return"FormData"}[T](){return this.entries()}static[C](e){return e&&"object"==typeof e&&"FormData"===e[A]&&!R.some((t=>"function"!=typeof e[t]))}append(...e){N("append",arguments,2),this.#i.push(O(...e))}delete(e){N("delete",arguments,1),e+="",this.#i=this.#i.filter((([t])=>t!==e))}get(e){N("get",arguments,1),e+="";for(var t=this.#i,r=t.length,n=0;n<r;n++)if(t[n][0]===e)return t[n][1];return null}getAll(e,t){return N("getAll",arguments,1),t=[],e+="",this.#i.forEach((r=>r[0]===e&&t.push(r[1]))),t}has(e){return N("has",arguments,1),e+="",this.#i.some((t=>t[0]===e))}forEach(e,t){for(var[r,n]of(N("forEach",arguments,1),this))e.call(t,n,r,this)}set(...e){N("set",arguments,2);var t=[],r=!0;e=O(...e),this.#i.forEach((n=>{n[0]===e[0]?r&&(r=!t.push(e)):t.push(n)})),r&&t.push(e),this.#i=t}*entries(){yield*this.#i}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}};class M extends Error{constructor(e,t){super(e),Error.captureStackTrace(this,this.constructor),this.type=t}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class L extends M{constructor(e,t,r){super(e,t),r&&(this.code=this.errno=r.code,this.erroredSysCall=r.syscall)}}const B=Symbol.toStringTag,D=e=>"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&"function"==typeof e.sort&&"URLSearchParams"===e[B],x=e=>e&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&/^(Blob|File)$/.test(e[B]),U=c.promisify(v.default.pipeline),j=Symbol("Body internals");class F{constructor(e,{size:t=0}={}){let r=null;null===e?e=null:D(e)?e=a.Buffer.from(e.toString()):x(e)||a.Buffer.isBuffer(e)||(c.types.isAnyArrayBuffer(e)?e=a.Buffer.from(e):ArrayBuffer.isView(e)?e=a.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof v.default||(e instanceof P?r=(e=function(e,t=E){var r=`${I()}${I()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],o=`--${r}\r\nContent-Disposition: form-data; name="`;return e.forEach(((e,t)=>"string"==typeof e?n.push(o+k(t)+`"\r\n\r\n${e.replace(/\r(?!\n)|(?<!\r)\n/g,"\r\n")}\r\n`):n.push(o+k(t)+`"; filename="${k(e.name,1)}"\r\nContent-Type: ${e.type||"application/octet-stream"}\r\n\r\n`,e,"\r\n"))),n.push(`--${r}--`),new t(n,{type:"multipart/form-data; boundary="+r})}(e)).type.split("=")[1]:e=a.Buffer.from(String(e))));let n=e;a.Buffer.isBuffer(e)?n=v.default.Readable.from(e):x(e)&&(n=v.default.Readable.from(e.stream())),this[j]={body:e,stream:n,boundary:r,disturbed:!1,error:null},this.size=t,e instanceof v.default&&e.on("error",(e=>{const t=e instanceof M?e:new L(`Invalid response body while trying to fetch ${this.url}: ${e.message}`,"system",e);this[j].error=t}))}get body(){return this[j].stream}get bodyUsed(){return this[j].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:t,byteLength:r}=await H(this);return e.slice(t,t+r)}async formData(){const e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){const e=new P,t=new URLSearchParams(await this.text());for(const[r,n]of t)e.append(r,n);return e}const{toFormData:t}=await Promise.resolve().then((function(){return r(62092)}));return t(this.body,e)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[j].body&&this[j].body.type||"",t=await this.arrayBuffer();return new E([t],{type:e})}async json(){const e=await this.text();return JSON.parse(e)}async text(){const e=await H(this);return(new TextDecoder).decode(e)}buffer(){return H(this)}}async function H(e){if(e[j].disturbed)throw new TypeError(`body used already for: ${e.url}`);if(e[j].disturbed=!0,e[j].error)throw e[j].error;const{body:t}=e;if(null===t)return a.Buffer.alloc(0);if(!(t instanceof v.default))return a.Buffer.alloc(0);const r=[];let n=0;try{for await(const o of t){if(e.size>0&&n+o.length>e.size){const r=new L(`content size at ${e.url} over limit: ${e.size}`,"max-size");throw t.destroy(r),r}n+=o.length,r.push(o)}}catch(t){throw t instanceof M?t:new L(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t)}if(!0!==t.readableEnded&&!0!==t._readableState.ended)throw new L(`Premature close of server response while trying to fetch ${e.url}`);try{return r.every((e=>"string"==typeof e))?a.Buffer.from(r.join("")):a.Buffer.concat(r,n)}catch(t){throw new L(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t)}}F.prototype.buffer=c.deprecate(F.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer"),Object.defineProperties(F.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:c.deprecate((()=>{}),"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});const W=(e,t)=>{let r,n,{body:o}=e[j];if(e.bodyUsed)throw new Error("cannot clone body after it is used");return o instanceof v.default&&"function"!=typeof o.getBoundary&&(r=new i.PassThrough({highWaterMark:t}),n=new i.PassThrough({highWaterMark:t}),o.pipe(r),o.pipe(n),e[j].stream=r,o=n),o},q=c.deprecate((e=>e.getBoundary()),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),z=(e,t)=>null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":D(e)?"application/x-www-form-urlencoded;charset=UTF-8":x(e)?e.type||null:a.Buffer.isBuffer(e)||c.types.isAnyArrayBuffer(e)||ArrayBuffer.isView(e)?null:e instanceof P?`multipart/form-data; boundary=${t[j].boundary}`:e&&"function"==typeof e.getBoundary?`multipart/form-data;boundary=${q(e)}`:e instanceof v.default?null:"text/plain;charset=UTF-8",G="function"==typeof g.default.validateHeaderName?g.default.validateHeaderName:e=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){const t=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},$="function"==typeof g.default.validateHeaderValue?g.default.validateHeaderValue:(e,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){const t=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_CHAR"}),t}};class V extends URLSearchParams{constructor(e){let t=[];if(e instanceof V){const r=e.raw();for(const[e,n]of Object.entries(r))t.push(...n.map((t=>[e,t])))}else if(null==e);else{if("object"!=typeof e||c.types.isBoxedPrimitive(e))throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");{const r=e[Symbol.iterator];if(null==r)t.push(...Object.entries(e));else{if("function"!=typeof r)throw new TypeError("Header pairs must be iterable");t=[...e].map((e=>{if("object"!=typeof e||c.types.isBoxedPrimitive(e))throw new TypeError("Each header pair must be an iterable object");return[...e]})).map((e=>{if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");return[...e]}))}}}return t=t.length>0?t.map((([e,t])=>(G(e),$(e,String(t)),[String(e).toLowerCase(),String(t)]))):void 0,super(t),new Proxy(this,{get(e,t,r){switch(t){case"append":case"set":return(r,n)=>(G(r),$(r,String(n)),URLSearchParams.prototype[t].call(e,String(r).toLowerCase(),String(n)));case"delete":case"has":case"getAll":return r=>(G(r),URLSearchParams.prototype[t].call(e,String(r).toLowerCase()));case"keys":return()=>(e.sort(),new Set(URLSearchParams.prototype.keys.call(e)).keys());default:return Reflect.get(e,t,r)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const t=this.getAll(e);if(0===t.length)return null;let r=t.join(", ");return/^content-encoding$/i.test(e)&&(r=r.toLowerCase()),r}forEach(e,t){for(const r of this.keys())Reflect.apply(e,t,[this.get(r),r,this])}*values(){for(const e of this.keys())yield this.get(e)}*entries(){for(const e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce(((e,t)=>(e[t]=this.getAll(t),e)),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce(((e,t)=>{const r=this.getAll(t);return e[t]="host"===t?r[0]:r.length>1?r:r[0],e}),{})}}Object.defineProperties(V.prototype,["get","entries","forEach","values"].reduce(((e,t)=>(e[t]={enumerable:!0},e)),{}));const J=new Set([301,302,303,307,308]),K=e=>J.has(e),Q=Symbol("Response internals");class Y extends F{constructor(e=null,t={}){super(e,t);const r=null!=t.status?t.status:200,n=new V(t.headers);if(null!==e&&!n.has("Content-Type")){const t=z(e,this);t&&n.append("Content-Type",t)}this[Q]={type:"default",url:t.url,status:r,statusText:t.statusText||"",headers:n,counter:t.counter,highWaterMark:t.highWaterMark}}get type(){return this[Q].type}get url(){return this[Q].url||""}get status(){return this[Q].status}get ok(){return this[Q].status>=200&&this[Q].status<300}get redirected(){return this[Q].counter>0}get statusText(){return this[Q].statusText}get headers(){return this[Q].headers}get highWaterMark(){return this[Q].highWaterMark}clone(){return new Y(W(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,t=302){if(!K(t))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new Y(null,{headers:{location:new URL(e).toString()},status:t})}static error(){const e=new Y(null,{status:0,statusText:""});return e[Q].type="error",e}get[Symbol.toStringTag](){return"Response"}}function X(e,t=!1){return null==e?"no-referrer":(e=new URL(e),/^(about|blob|data):$/.test(e.protocol)?"no-referrer":(e.username="",e.password="",e.hash="",t&&(e.pathname="",e.search=""),e))}Object.defineProperties(Y.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});const Z=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]);function ee(e){return!!/^about:(blank|srcdoc)$/.test(e)||"data:"===e.protocol||!!/^(blob|filesystem):$/.test(e.protocol)||function(e){if(/^(http|ws)s:$/.test(e.protocol))return!0;const t=e.host.replace(/(^\[)|(]$)/g,""),r=u.isIP(t);return!(4!==r||!/^127\./.test(t))||!(6!==r||!/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t))||"localhost"!==e.host&&!e.host.endsWith(".localhost")&&"file:"===e.protocol}(e)}const te=Symbol("Request internals"),re=e=>"object"==typeof e&&"object"==typeof e[te],ne=c.deprecate((()=>{}),".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)");class oe extends F{constructor(e,t={}){let r;if(re(e)?r=new URL(e.url):(r=new URL(e),e={}),""!==r.username||""!==r.password)throw new TypeError(`${r} is an url with embedded credentials.`);let n=t.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(n)&&(n=n.toUpperCase()),!re(t)&&"data"in t&&ne(),(null!=t.body||re(e)&&null!==e.body)&&("GET"===n||"HEAD"===n))throw new TypeError("Request with GET/HEAD method cannot have body");const o=t.body?t.body:re(e)&&null!==e.body?W(e):null;super(o,{size:t.size||e.size||0});const s=new V(t.headers||e.headers||{});if(null!==o&&!s.has("Content-Type")){const e=z(o,this);e&&s.set("Content-Type",e)}let i=re(e)?e.signal:null;if("signal"in t&&(i=t.signal),null!=i&&("object"!=typeof(a=i)||"AbortSignal"!==a[B]&&"EventTarget"!==a[B]))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");var a;let c=null==t.referrer?e.referrer:t.referrer;if(""===c)c="no-referrer";else if(c){const e=new URL(c);c=/^about:(\/\/)?client$/.test(e)?"client":e}else c=void 0;this[te]={method:n,redirect:t.redirect||e.redirect||"follow",headers:s,parsedURL:r,signal:i,referrer:c},this.follow=void 0===t.follow?void 0===e.follow?20:e.follow:t.follow,this.compress=void 0===t.compress?void 0===e.compress||e.compress:t.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,this.highWaterMark=t.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=t.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=t.referrerPolicy||e.referrerPolicy||""}get method(){return this[te].method}get url(){return l.format(this[te].parsedURL)}get headers(){return this[te].headers}get redirect(){return this[te].redirect}get signal(){return this[te].signal}get referrer(){return"no-referrer"===this[te].referrer?"":"client"===this[te].referrer?"about:client":this[te].referrer?this[te].referrer.toString():void 0}get referrerPolicy(){return this[te].referrerPolicy}set referrerPolicy(e){this[te].referrerPolicy=function(e){if(!Z.has(e))throw new TypeError(`Invalid referrerPolicy: ${e}`);return e}(e)}clone(){return new oe(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(oe.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});class se extends M{constructor(e,t="aborted"){super(e,t)}}const{stat:ie}=d.promises,ae=(e,t,r="")=>new E([new le({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],{type:r}),ce=(e,t,r="")=>new w([new le({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],h.basename(t),{type:r,lastModified:e.mtimeMs});class le{#a;#c;constructor(e){this.#a=e.path,this.#c=e.start,this.size=e.size,this.lastModified=e.lastModified}slice(e,t){return new le({path:this.#a,lastModified:this.lastModified,size:t-e,start:this.#c+e})}async*stream(){const{mtimeMs:e}=await ie(this.#a);if(e>this.lastModified)throw new _.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*d.createReadStream(this.#a,{start:this.#c,end:this.#c+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}const ue=new Set(["data:","http:","https:"]);async function de(e,t){return new Promise(((r,n)=>{const o=new oe(e,t),{parsedURL:s,options:c}=(e=>{const{parsedURL:t}=e[te],r=new V(e[te].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(null===e.body&&/^(post|put)$/i.test(e.method)&&(n="0"),null!==e.body){const t=(e=>{const{body:t}=e[j];return null===t?0:x(t)?t.size:a.Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null})(e);"number"!=typeof t||Number.isNaN(t)||(n=String(t))}n&&r.set("Content-Length",n),""===e.referrerPolicy&&(e.referrerPolicy="strict-origin-when-cross-origin"),e.referrer&&"no-referrer"!==e.referrer?e[te].referrer=function(e,{referrerURLCallback:t,referrerOriginCallback:r}={}){if("no-referrer"===e.referrer||""===e.referrerPolicy)return null;const n=e.referrerPolicy;if("about:client"===e.referrer)return"no-referrer";const o=e.referrer;let s=X(o),i=X(o,!0);s.toString().length>4096&&(s=i),t&&(s=t(s)),r&&(i=r(i));const a=new URL(e.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return i;case"unsafe-url":return s;case"strict-origin":return ee(s)&&!ee(a)?"no-referrer":i.toString();case"strict-origin-when-cross-origin":return s.origin===a.origin?s:ee(s)&&!ee(a)?"no-referrer":i;case"same-origin":return s.origin===a.origin?s:"no-referrer";case"origin-when-cross-origin":return s.origin===a.origin?s:i;case"no-referrer-when-downgrade":return ee(s)&&!ee(a)?"no-referrer":s;default:throw new TypeError(`Invalid referrerPolicy: ${n}`)}}(e):e[te].referrer="no-referrer",e[te].referrer instanceof URL&&r.set("Referer",e.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip, deflate, br");let{agent:o}=e;"function"==typeof o&&(o=o(t)),r.has("Connection")||o||r.set("Connection","close");const s=(e=>{if(e.search)return e.search;const t=e.href.length-1,r=e.hash||("#"===e.href[t]?"#":"");return"?"===e.href[t-r.length]?"?":""})(t);return{parsedURL:t,options:{path:t.pathname+s,method:e.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:e.insecureHTTPParser,agent:o}}})(o);if(!ue.has(s.protocol))throw new TypeError(`node-fetch cannot load ${e}. URL scheme "${s.protocol.replace(/:$/,"")}" is not supported.`);if("data:"===s.protocol){const e=function(e){if(!/^data:/i.test(e))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');const t=(e=e.replace(/\r?\n/g,"")).indexOf(",");if(-1===t||t<=4)throw new TypeError("malformed data: URI");const r=e.substring(5,t).split(";");let n="",o=!1;const s=r[0]||"text/plain";let i=s;for(let e=1;e<r.length;e++)"base64"===r[e]?o=!0:(i+=`;${r[e]}`,0===r[e].indexOf("charset=")&&(n=r[e].substring(8)));r[0]||n.length||(i+=";charset=US-ASCII",n="US-ASCII");const a=o?"base64":"ascii",c=unescape(e.substring(t+1)),l=Buffer.from(c,a);return l.type=s,l.typeFull=i,l.charset=n,l}(o.url),t=new Y(e,{headers:{"Content-Type":e.typeFull}});return void r(t)}const l=("https:"===s.protocol?m.default:g.default).request,{signal:u}=o;let d=null;const h=()=>{const e=new se("The operation was aborted.");n(e),o.body&&o.body instanceof v.default.Readable&&o.body.destroy(e),d&&d.body&&d.body.emit("error",e)};if(u&&u.aborted)return void h();const p=()=>{h(),_()},f=l(s.toString(),c);u&&u.addEventListener("abort",p);const _=()=>{f.abort(),u&&u.removeEventListener("abort",p)};f.on("error",(e=>{n(new L(`request to ${o.url} failed, reason: ${e.message}`,"system",e)),_()})),function(e,t){const r=a.Buffer.from("0\r\n\r\n");let n,o=!1,s=!1;e.on("response",(e=>{const{headers:t}=e;o="chunked"===t["transfer-encoding"]&&!t["content-length"]})),e.on("socket",(t=>{const i=()=>{if(o&&!s){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",(e=>{d&&d.body&&d.body.destroy(e)})(e)}},c=e=>{s=0===a.Buffer.compare(e.slice(-5),r),!s&&n&&(s=0===a.Buffer.compare(n.slice(-3),r.slice(0,3))&&0===a.Buffer.compare(e.slice(-2),r.slice(3))),n=e};t.prependListener("close",i),t.on("data",c),e.on("close",(()=>{t.removeListener("close",i),t.removeListener("data",c)}))}))}(f),process.version<"v14"&&f.on("socket",(e=>{let t;e.prependListener("end",(()=>{t=e._eventsCount})),e.prependListener("close",(r=>{if(d&&t<e._eventsCount&&!r){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",d.body.emit("error",e)}}))})),f.on("response",(e=>{f.setTimeout(0);const s=function(e=[]){return new V(e.reduce(((e,t,r,n)=>(r%2==0&&e.push(n.slice(r,r+2)),e)),[]).filter((([e,t])=>{try{return G(e),$(e,String(t)),!0}catch{return!1}})))}(e.rawHeaders);if(K(e.statusCode)){const i=s.get("Location");let c=null;try{c=null===i?null:new URL(i,o.url)}catch{if("manual"!==o.redirect)return n(new L(`uri requested responds with an invalid redirect URL: ${i}`,"invalid-redirect")),void _()}switch(o.redirect){case"error":return n(new L(`uri requested responds with a redirect, redirect mode is set to error: ${o.url}`,"no-redirect")),void _();case"manual":break;case"follow":{if(null===c)break;if(o.counter>=o.follow)return n(new L(`maximum redirect reached at: ${o.url}`,"max-redirect")),void _();const i={headers:new V(o.headers),follow:o.follow,counter:o.counter+1,agent:o.agent,compress:o.compress,method:o.method,body:W(o),signal:o.signal,size:o.size,referrer:o.referrer,referrerPolicy:o.referrerPolicy};if(!((e,t)=>{const r=new URL(t).hostname,n=new URL(e).hostname;return r===n||r.endsWith(`.${n}`)})(o.url,c)||(a=o.url,new URL(c).protocol!==new URL(a).protocol))for(const e of["authorization","www-authenticate","cookie","cookie2"])i.headers.delete(e);if(303!==e.statusCode&&o.body&&t.body instanceof v.default.Readable)return n(new L("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void _();303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==o.method)||(i.method="GET",i.body=void 0,i.headers.delete("content-length"));const l=function(e){const t=(e.get("referrer-policy")||"").split(/[,\s]+/);let r="";for(const e of t)e&&Z.has(e)&&(r=e);return r}(s);return l&&(i.referrerPolicy=l),r(de(new oe(c,i))),void _()}default:return n(new TypeError(`Redirect option '${o.redirect}' is not a valid value of RequestRedirect`))}}var a;u&&e.once("end",(()=>{u.removeEventListener("abort",p)}));let c=i.pipeline(e,new i.PassThrough,(e=>{e&&n(e)}));process.version<"v12.10"&&e.on("aborted",p);const l={url:o.url,status:e.statusCode,statusText:e.statusMessage,headers:s,size:o.size,counter:o.counter,highWaterMark:o.highWaterMark},h=s.get("Content-Encoding");if(!o.compress||"HEAD"===o.method||null===h||204===e.statusCode||304===e.statusCode)return d=new Y(c,l),void r(d);const g={flush:y.default.Z_SYNC_FLUSH,finishFlush:y.default.Z_SYNC_FLUSH};if("gzip"===h||"x-gzip"===h)return c=i.pipeline(c,y.default.createGunzip(g),(e=>{e&&n(e)})),d=new Y(c,l),void r(d);if("deflate"===h||"x-deflate"===h){const t=i.pipeline(e,new i.PassThrough,(e=>{e&&n(e)}));return t.once("data",(e=>{c=8==(15&e[0])?i.pipeline(c,y.default.createInflate(),(e=>{e&&n(e)})):i.pipeline(c,y.default.createInflateRaw(),(e=>{e&&n(e)})),d=new Y(c,l),r(d)})),void t.once("end",(()=>{d||(d=new Y(c,l),r(d))}))}if("br"===h)return c=i.pipeline(c,y.default.createBrotliDecompress(),(e=>{e&&n(e)})),d=new Y(c,l),void r(d);d=new Y(c,l),r(d)})),(async(e,{body:t})=>{null===t?e.end():await U(t,e)})(f,o).catch(n)}))}t.AbortError=se,t.Blob=E,t.FetchError=L,t.File=w,t.FormData=P,t.Headers=V,t.Request=oe,t.Response=Y,t.blobFrom=(e,t)=>ie(e).then((r=>ae(r,e,t))),t.blobFromSync=(e,t)=>ae(d.statSync(e),e,t),t.default=de,t.fileFrom=(e,t)=>ie(e).then((r=>ce(r,e,t))),t.fileFromSync=(e,t)=>ce(d.statSync(e),e,t),t.isRedirect=K},62092:(e,t,r)=>{"use strict";r(57147),r(71017),r(73414);var n=r(65352);r(13685),r(95687),r(59796),r(12781),r(14300),r(73837),r(57310),r(41808);let o=0;const s={START_BOUNDARY:o++,HEADER_FIELD_START:o++,HEADER_FIELD:o++,HEADER_VALUE_START:o++,HEADER_VALUE:o++,HEADER_VALUE_ALMOST_DONE:o++,HEADERS_ALMOST_DONE:o++,PART_DATA_START:o++,PART_DATA:o++,END:o++};let i=1;const a=i,c=i*=2,l=e=>32|e,u=()=>{};class d{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=u,this.onHeaderField=u,this.onHeadersEnd=u,this.onHeaderValue=u,this.onPartBegin=u,this.onPartData=u,this.onPartEnd=u,this.boundaryChars={},e="\r\n--"+e;const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r),this.boundaryChars[t[r]]=!0;this.boundary=t,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=s.START_BOUNDARY}write(e){let t=0;const r=e.length;let n=this.index,{lookbehind:o,boundary:i,boundaryChars:u,index:d,state:h,flags:p}=this;const f=this.boundary.length,g=f-1,m=e.length;let y,v;const _=e=>{this[e+"Mark"]=t},b=e=>{delete this[e+"Mark"]},S=(e,t,r,n)=>{void 0!==t&&t===r||this[e](n&&n.subarray(t,r))},E=(r,n)=>{const o=r+"Mark";o in this&&(n?(S(r,this[o],t,e),delete this[o]):(S(r,this[o],e.length,e),this[o]=0))};for(t=0;t<r;t++)switch(y=e[t],h){case s.START_BOUNDARY:if(d===i.length-2){if(45===y)p|=c;else if(13!==y)return;d++;break}if(d-1==i.length-2){if(p&c&&45===y)h=s.END,p=0;else{if(p&c||10!==y)return;d=0,S("onPartBegin"),h=s.HEADER_FIELD_START}break}y!==i[d+2]&&(d=-2),y===i[d+2]&&d++;break;case s.HEADER_FIELD_START:h=s.HEADER_FIELD,_("onHeaderField"),d=0;case s.HEADER_FIELD:if(13===y){b("onHeaderField"),h=s.HEADERS_ALMOST_DONE;break}if(d++,45===y)break;if(58===y){if(1===d)return;E("onHeaderField",!0),h=s.HEADER_VALUE_START;break}if(v=l(y),v<97||v>122)return;break;case s.HEADER_VALUE_START:if(32===y)break;_("onHeaderValue"),h=s.HEADER_VALUE;case s.HEADER_VALUE:13===y&&(E("onHeaderValue",!0),S("onHeaderEnd"),h=s.HEADER_VALUE_ALMOST_DONE);break;case s.HEADER_VALUE_ALMOST_DONE:if(10!==y)return;h=s.HEADER_FIELD_START;break;case s.HEADERS_ALMOST_DONE:if(10!==y)return;S("onHeadersEnd"),h=s.PART_DATA_START;break;case s.PART_DATA_START:h=s.PART_DATA,_("onPartData");case s.PART_DATA:if(n=d,0===d){for(t+=g;t<m&&!(e[t]in u);)t+=f;t-=g,y=e[t]}if(d<i.length)i[d]===y?(0===d&&E("onPartData",!0),d++):d=0;else if(d===i.length)d++,13===y?p|=a:45===y?p|=c:d=0;else if(d-1===i.length)if(p&a){if(d=0,10===y){p&=~a,S("onPartEnd"),S("onPartBegin"),h=s.HEADER_FIELD_START;break}}else p&c&&45===y?(S("onPartEnd"),h=s.END,p=0):d=0;if(d>0)o[d-1]=y;else if(n>0){const e=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);S("onPartData",0,n,e),n=0,_("onPartData"),t--}break;case s.END:break;default:throw new Error(`Unexpected state entered: ${h}`)}E("onHeaderField"),E("onHeaderValue"),E("onPartData"),this.index=d,this.state=h,this.flags=p}end(){if(this.state===s.HEADER_FIELD_START&&0===this.index||this.state===s.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==s.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}t.toFormData=async function(e,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");const r=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!r)throw new TypeError("no or bad content-type header, no multipart boundary");const o=new d(r[1]||r[2]);let s,i,a,c,l,u;const h=[],p=new n.FormData,f=e=>{a+=v.decode(e,{stream:!0})},g=e=>{h.push(e)},m=()=>{const e=new n.File(h,u,{type:l});p.append(c,e)},y=()=>{p.append(c,a)},v=new TextDecoder("utf-8");v.decode(),o.onPartBegin=function(){o.onPartData=f,o.onPartEnd=y,s="",i="",a="",c="",l="",u=null,h.length=0},o.onHeaderField=function(e){s+=v.decode(e,{stream:!0})},o.onHeaderValue=function(e){i+=v.decode(e,{stream:!0})},o.onHeaderEnd=function(){if(i+=v.decode(),s=s.toLowerCase(),"content-disposition"===s){const e=i.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);e&&(c=e[2]||e[3]||""),u=function(e){const t=e.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;const r=t[2]||t[3]||"";let n=r.slice(r.lastIndexOf("\\")+1);return n=n.replace(/%22/g,'"'),n=n.replace(/&#(\d{4});/g,((e,t)=>String.fromCharCode(t))),n}(i),u&&(o.onPartData=g,o.onPartEnd=m)}else"content-type"===s&&(l=i);i="",s=""};for await(const t of e)o.write(t);return o.end(),p}},30778:(e,t,r)=>{var n=r(52479);function o(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function s(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(o),e.exports.strict=n(s),o.proto=o((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return o(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return s(this)},configurable:!0})}))},64095:e=>{"use strict";function t(e){return"/"===e.charAt(0)}function r(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),r=t[1]||"",n=Boolean(r&&":"!==r.charAt(1));return Boolean(t[2]||n)}e.exports="win32"===process.platform?r:t,e.exports.posix=t,e.exports.win32=r},78448:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,generateChallenge:()=>s,verifyChallenge:()=>a});var n=r(81354);function o(e){return function(e){const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~";let r="";const o=function(e){const t=n.lib.WordArray.random(e),r=[];return t.words.forEach((e=>{const t=function(e){const t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e,!1),t}(e),n=new Uint8Array(t);for(let e=0;e<4;e++)r.push(n[e])})),r}(e);for(let n=0;n<e;n++)r+=t[o[n]%t.length];return r}(e)}function s(e){return(0,n.SHA256)(e).toString(n.enc.Base64url)}function i(e){if(e||(e=43),e<43||e>128)throw`Expected a length between 43 and 128. Received ${e}.`;const t=o(e);return{code_verifier:t,code_challenge:s(t)}}function a(e,t){return s(e)===t}},38076:(e,t,r)=>{"use strict";t.register=r(4583).globalRegistry,t.Registry=r(4583),t.contentType=r(4583).globalRegistry.contentType,t.validateMetricName=r(17609).validateMetricName,t.Counter=r(61696),t.Gauge=r(4162),t.Histogram=r(29024),t.Summary=r(14654),t.Pushgateway=r(72553),t.linearBuckets=r(884).linearBuckets,t.exponentialBuckets=r(884).exponentialBuckets,t.collectDefaultMetrics=r(73038),t.aggregators=r(26930).aggregators,t.AggregatorRegistry=r(23252)},884:(e,t)=>{"use strict";t.linearBuckets=(e,t,r)=>{if(r<1)throw new Error("Linear buckets needs a positive count");const n=new Array(r);for(let o=0;o<r;o++)n[o]=e+o*t;return n},t.exponentialBuckets=(e,t,r)=>{if(e<=0)throw new Error("Exponential buckets needs a positive start");if(r<1)throw new Error("Exponential buckets needs a positive count");if(t<=1)throw new Error("Exponential buckets needs a factor greater than 1");const n=new Array(r);for(let o=0;o<r;o++)n[o]=e,e*=t;return n}},23252:(e,t,r)=>{"use strict";const n=r(4583),{Grouper:o}=r(10580),{aggregators:s}=r(26930);let i=()=>{const e=r(35001);return i=()=>e,e};const a="prom-client:getMetricsReq",c="prom-client:getMetricsRes";let l=[n.globalRegistry],u=0,d=!1;const h=new Map;class p extends n{constructor(){super(),d||(d=!0,i().isMaster&&i().on("message",((e,t)=>{if(t.type===c){const e=h.get(t.requestId);if(t.error)return void e.done(new Error(t.error));if(t.metrics.forEach((t=>e.responses.push(t))),e.pending--,0===e.pending){h.delete(t.requestId),clearTimeout(e.errorTimeout);const r=p.aggregate(e.responses).metrics();e.done(null,r)}}})),i().isWorker&&process.on("message",(e=>{e.type===a&&Promise.all(l.map((e=>e.getMetricsAsJSON()))).then((t=>{process.send({type:c,requestId:e.requestId,metrics:t})})).catch((t=>{process.send({type:c,requestId:e.requestId,error:t.message})}))})))}clusterMetrics(){const e=u++;return new Promise(((t,r)=>{let n=!1;function o(e,o){n||(n=!0,e?r(e):t(o))}const s={responses:[],pending:0,done:o,errorTimeout:setTimeout((()=>{const e=new Error("Operation timed out.");s.done(e)}),5e3)};h.set(e,s);const c={type:a,requestId:e};for(const e in i().workers)i().workers[e].isConnected()&&(i().workers[e].send(c),s.pending++);0===s.pending&&(clearTimeout(s.errorTimeout),process.nextTick((()=>o(null,""))))}))}static aggregate(e){const t=new n,r=new o;return e.forEach((e=>{e.forEach((e=>{r.add(e.name,e)}))})),r.forEach((e=>{const r=e[0].aggregator,n=s[r];if("function"!=typeof n)throw new Error(`'${r}' is not a defined aggregator.`);const o=n(e);if(o){const e=Object.assign({get:()=>o},o);t.registerMetric(e)}})),t}static setRegistries(e){Array.isArray(e)||(e=[e]),e.forEach((e=>{if(!(e instanceof n))throw new TypeError("Expected Registry, got "+typeof e)})),l=e}}e.exports=p},61696:(e,t,r)=>{"use strict";const n=r(73837),{hashObject:o,isObject:s,getLabels:i,removeLabels:a}=r(10580),{validateLabel:c}=r(17609),{Metric:l}=r(65362);function u(e,t,r={},n=""){return e[n]?e[n].value+=t:e[n]={value:t,labels:r},e}e.exports=class extends l{inc(e,t){let r;if(s(e)?(r=o(e),c(this.labelNames,e)):(t=e,e={}),t&&!Number.isFinite(t))throw new TypeError(`Value is not a valid number: ${n.format(t)}`);if(t<0)throw new Error("It is not possible to decrease a counter");null==t&&(t=1),u(this.hashMap,t,e,r)}reset(){this.hashMap={},0===this.labelNames.length&&u(this.hashMap,0)}async get(){if(this.collect){const e=this.collect();e instanceof Promise&&await e}return{help:this.help,name:this.name,type:"counter",values:Object.values(this.hashMap),aggregator:this.aggregator}}labels(...e){const t=i(this.labelNames,e)||{};return{inc:this.inc.bind(this,t)}}remove(...e){const t=i(this.labelNames,e)||{};return c(this.labelNames,t),a.call(this,this.hashMap,t)}}},73038:(e,t,r)=>{"use strict";const{isObject:n}=r(10580),o=r(61523),s=r(96310),i=r(81157),a=r(66483),c=r(80844),l=r(9807),u=r(96802),d=r(72308),h=r(33182),p=r(51482),f=r(68888),g=r(5256),m=r(19493),y={processCpuTotal:o,processStartTime:s,osMemoryHeap:i,processOpenFileDescriptors:a,processMaxFileDescriptors:c,eventLoopLag:l,..."function"==typeof process.getActiveResourcesInfo?{processResources:h}:{},processHandles:u,processRequests:d,heapSizeAndUsed:p,heapSpacesSizeAndUsed:f,version:g,gc:m},v=Object.keys(y);e.exports=function(e){if(null!=e&&!n(e))throw new TypeError("config must be null, undefined, or an object");e={eventLoopMonitoringPrecision:10,...e};for(const t of Object.values(y))t(e.register,e)},e.exports.metricsList=v},4162:(e,t,r)=>{"use strict";const n=r(73837),{setValue:o,setValueDelta:s,getLabels:i,hashObject:a,isObject:c,removeLabels:l}=r(10580),{validateLabel:u}=r(17609),{Metric:d}=r(65362);function h(e,t,r){if("number"!=typeof r)throw new TypeError(`Delta is not a valid number: ${n.format(r)}`);u(e.labelNames,t);const o=a(t);s(e.hashMap,r,t,o)}function p(e){return c(e)?e:{}}function f(e,t){return c(e)?t:e}e.exports=class extends d{set(e,t){t=f(e,t),function(e,t,r){if("number"!=typeof r)throw new TypeError(`Value is not a valid number: ${n.format(r)}`);u(e.labelNames,t),o(e.hashMap,r,t)}(this,e=p(e),t)}reset(){this.hashMap={},0===this.labelNames.length&&o(this.hashMap,0,{})}inc(e,t){void 0===(t=f(e,t))&&(t=1),h(this,e=p(e),t)}dec(e,t){void 0===(t=f(e,t))&&(t=1),h(this,e=p(e),-t)}setToCurrentTime(e){const t=Date.now()/1e3;void 0===e?this.set(t):this.set(e,t)}startTimer(e){const t=process.hrtime();return r=>{const n=process.hrtime(t),o=n[0]+n[1]/1e9;return this.set(Object.assign({},e,r),o),o}}async get(){if(this.collect){const e=this.collect();e instanceof Promise&&await e}return{help:this.help,name:this.name,type:"gauge",values:Object.values(this.hashMap),aggregator:this.aggregator}}_getValue(e){const t=a(e||{});return this.hashMap[t]?this.hashMap[t].value:0}labels(...e){const t=i(this.labelNames,e);return u(this.labelNames,t),{inc:this.inc.bind(this,t),dec:this.dec.bind(this,t),set:this.set.bind(this,t),setToCurrentTime:this.setToCurrentTime.bind(this,t),startTimer:this.startTimer.bind(this,t)}}remove(...e){const t=i(this.labelNames,e);u(this.labelNames,t),l.call(this,this.hashMap,t)}}},29024:(e,t,r)=>{"use strict";const n=r(73837),{getLabels:o,hashObject:s,isObject:i,removeLabels:a}=r(10580),{validateLabel:c}=r(17609),{Metric:l}=r(65362);function u(e){return()=>{const t=process.hrtime();return r=>{const n=process.hrtime(t),o=n[0]+n[1]/1e9;return this.observe(Object.assign({},e,r),o),o}}}function d(e,t,r){return{labels:e,value:t,metricName:r}}function h(e){return t=>{const r=function(e,t){return i(e)?{labels:e,value:t}:{value:e,labels:{}}}(e,t);if(c(this.labelNames,r.labels),!Number.isFinite(r.value))throw new TypeError(`Value is not a valid number: ${n.format(r.value)}`);const o=s(r.labels);let a=this.hashMap[o];a||(a=p(r.labels,Object.assign({},this.bucketValues)));const l=function(e,t){for(let r=0;r<e.length;r++){const n=e[r];if(t<=n)return n}return-1}(this.upperBounds,r.value);a.sum+=r.value,a.count+=1,Object.prototype.hasOwnProperty.call(a.bucketValues,l)&&(a.bucketValues[l]+=1),this.hashMap[o]=a}}function p(e,t){return{labels:e,bucketValues:t,sum:0,count:0}}e.exports=class extends l{constructor(e){super(e,{buckets:[.005,.01,.025,.05,.1,.25,.5,1,2.5,5,10]});for(const e of this.labelNames)if("le"===e)throw new Error("le is a reserved label keyword");this.upperBounds=this.buckets,this.bucketValues=this.upperBounds.reduce(((e,t)=>(e[t]=0,e)),{}),Object.freeze(this.bucketValues),Object.freeze(this.upperBounds),0===this.labelNames.length&&(this.hashMap={[s({})]:p({},Object.assign({},this.bucketValues))})}observe(e,t){h.call(this,0===e?0:e||{})(t)}async get(){if(this.collect){const e=this.collect();e instanceof Promise&&await e}const e=Object.values(this.hashMap).map((t=this,e=>{const r=[],n=Object.keys(e.labels);let o=0;for(const s of t.upperBounds){o+=e.bucketValues[s];const i={le:s};for(const t of n)i[t]=e.labels[t];r.push(d(i,o,`${t.name}_bucket`))}return{buckets:r,data:e}})).reduce(function(e){return(t,r)=>{t.push(...r.buckets);const n={le:"+Inf"};for(const e of Object.keys(r.data.labels))n[e]=r.data.labels[e];return t.push(d(n,r.data.count,`${e.name}_bucket`),d(r.data.labels,r.data.sum,`${e.name}_sum`),d(r.data.labels,r.data.count,`${e.name}_count`)),t}}(this),[]);var t;return{name:this.name,help:this.help,type:"histogram",values:e,aggregator:this.aggregator}}reset(){this.hashMap={}}zero(e){const t=s(e);this.hashMap[t]=p(e,Object.assign({},this.bucketValues))}startTimer(e){return u.call(this,e)()}labels(...e){const t=o(this.labelNames,e);return c(this.labelNames,t),{observe:h.call(this,t),startTimer:u.call(this,t)}}remove(...e){const t=o(this.labelNames,e);c(this.labelNames,t),a.call(this,this.hashMap,t)}}},65362:(e,t,r)=>{"use strict";const{globalRegistry:n}=r(4583),{isObject:o}=r(10580),{validateMetricName:s,validateLabelName:i}=r(17609);e.exports={Metric:class{constructor(e,t={}){if(!o(e))throw new TypeError("constructor expected a config object");if(Object.assign(this,{labelNames:[],registers:[n],aggregator:"sum"},t,e),this.registers||(this.registers=[n]),!this.help)throw new Error("Missing mandatory help parameter");if(!this.name)throw new Error("Missing mandatory name parameter");if(!s(this.name))throw new Error("Invalid metric name");if(!i(this.labelNames))throw new Error("Invalid label name");if(this.collect&&"function"!=typeof this.collect)throw new Error('Optional "collect" parameter must be a function');this.reset();for(const e of this.registers)e.registerMetric(this)}reset(){}}}},26930:(e,t,r)=>{"use strict";const{Grouper:n,hashObject:o}=r(10580);function s(e){return t=>{if(0===t.length)return;const r={help:t[0].help,name:t[0].name,type:t[0].type,values:[],aggregator:t[0].aggregator},s=new n;return t.forEach((e=>{e.values.forEach((e=>{const t=o(e.labels);s.add(`${e.metricName}_${t}`,e)}))})),s.forEach((t=>{if(0===t.length)return;const n={value:e(t),labels:t[0].labels};t[0].metricName&&(n.metricName=t[0].metricName),r.values.push(n)})),r}}t.AggregatorFactory=s,t.aggregators={sum:s((e=>e.reduce(((e,t)=>e+t.value),0))),first:s((e=>e[0].value)),omit:()=>{},average:s((e=>e.reduce(((e,t)=>e+t.value),0)/e.length)),min:s((e=>e.reduce(((e,t)=>Math.min(e,t.value)),1/0))),max:s((e=>e.reduce(((e,t)=>Math.max(e,t.value)),-1/0)))}},9807:(e,t,r)=>{"use strict";const n=r(4162);let o;try{o=r(4074)}catch{}const s="nodejs_eventloop_lag_seconds",i="nodejs_eventloop_lag_min_seconds",a="nodejs_eventloop_lag_max_seconds",c="nodejs_eventloop_lag_mean_seconds",l="nodejs_eventloop_lag_stddev_seconds",u="nodejs_eventloop_lag_p50_seconds",d="nodejs_eventloop_lag_p90_seconds",h="nodejs_eventloop_lag_p99_seconds";function p(e,t,r){const n=process.hrtime(e),o=(1e9*n[0]+n[1])/1e9;t.set(r,o)}e.exports=(e,t={})=>{const r=t.prefix?t.prefix:"",f=t.labels?t.labels:{},g=Object.keys(f),m=e?[e]:void 0;let y;if(o&&o.monitorEventLoopDelay){const e=o.monitorEventLoopDelay({resolution:t.eventLoopMonitoringPrecision});e.enable(),y=()=>{const t=process.hrtime();setImmediate(p,t,v,f),_.set(f,e.min/1e9),b.set(f,e.max/1e9),S.set(f,e.mean/1e9),E.set(f,e.stddev/1e9),w.set(f,e.percentile(50)/1e9),A.set(f,e.percentile(90)/1e9),T.set(f,e.percentile(99)/1e9),e.reset()}}else y=()=>{const e=process.hrtime();setImmediate(p,e,v,f)};const v=new n({name:r+s,help:"Lag of event loop in seconds.",registers:m,labelNames:g,aggregator:"average",collect:y}),_=new n({name:r+i,help:"The minimum recorded event loop delay.",registers:m,labelNames:g,aggregator:"min"}),b=new n({name:r+a,help:"The maximum recorded event loop delay.",registers:m,labelNames:g,aggregator:"max"}),S=new n({name:r+c,help:"The mean of the recorded event loop delays.",registers:m,labelNames:g,aggregator:"average"}),E=new n({name:r+l,help:"The standard deviation of the recorded event loop delays.",registers:m,labelNames:g,aggregator:"average"}),w=new n({name:r+u,help:"The 50th percentile of the recorded event loop delays.",registers:m,labelNames:g,aggregator:"average"}),A=new n({name:r+d,help:"The 90th percentile of the recorded event loop delays.",registers:m,labelNames:g,aggregator:"average"}),T=new n({name:r+h,help:"The 99th percentile of the recorded event loop delays.",registers:m,labelNames:g,aggregator:"average"})},e.exports.metricNames=[s,i,a,c,l,u,d,h]},19493:(e,t,r)=>{"use strict";const n=r(29024);let o;try{o=r(4074)}catch{}const s="nodejs_gc_duration_seconds",i=[.001,.01,.1,1,2,5],a=[];o&&o.constants&&(a[o.constants.NODE_PERFORMANCE_GC_MAJOR]="major",a[o.constants.NODE_PERFORMANCE_GC_MINOR]="minor",a[o.constants.NODE_PERFORMANCE_GC_INCREMENTAL]="incremental",a[o.constants.NODE_PERFORMANCE_GC_WEAKCB]="weakcb"),e.exports=(e,t={})=>{if(!o)return;const r=t.prefix?t.prefix:"",c=t.labels?t.labels:{},l=Object.keys(c),u=t.gcDurationBuckets?t.gcDurationBuckets:i,d=new n({name:r+s,help:"Garbage collection duration by kind, one of major, minor, incremental or weakcb.",labelNames:["kind",...l],buckets:u,registers:e?[e]:void 0});new o.PerformanceObserver((e=>{const t=e.getEntries()[0],r=t.detail?a[t.detail.kind]:a[t.kind];d.observe(Object.assign({kind:r},c),t.duration/1e3)})).observe({entryTypes:["gc"]})},e.exports.metricNames=[s]},51482:(e,t,r)=>{"use strict";const n=r(4162),o=r(37241),s="nodejs_heap_size_total_bytes",i="nodejs_heap_size_used_bytes",a="nodejs_external_memory_bytes";e.exports=(e,t={})=>{if("function"!=typeof process.memoryUsage)return;const r=t.labels?t.labels:{},c=Object.keys(r),l=e?[e]:void 0,u=t.prefix?t.prefix:"",d=new n({name:u+s,help:"Process heap size from Node.js in bytes.",registers:l,labelNames:c,collect:()=>{const e=o();e&&(d.set(r,e.heapTotal),h.set(r,e.heapUsed),void 0!==e.external&&p.set(r,e.external))}}),h=new n({name:u+i,help:"Process heap size used from Node.js in bytes.",registers:l,labelNames:c}),p=new n({name:u+a,help:"Node.js external memory size in bytes.",registers:l,labelNames:c})},e.exports.metricNames=[s,i,a]},68888:(e,t,r)=>{"use strict";const n=r(4162),o=r(84655),s=["total","used","available"],i={};s.forEach((e=>{i[e]=`nodejs_heap_space_size_${e}_bytes`})),e.exports=(e,t={})=>{const r=e?[e]:void 0,a=t.prefix?t.prefix:"",c=t.labels?t.labels:{},l=["space",...Object.keys(c)],u={};s.forEach((e=>{u[e]=new n({name:a+i[e],help:`Process heap space size ${e} from Node.js in bytes.`,labelNames:l,registers:r})})),u.total.collect=()=>{for(const e of o.getHeapSpaceStatistics()){const t=e.space_name.substr(0,e.space_name.indexOf("_space"));u.total.set({space:t,...c},e.space_size),u.used.set({space:t,...c},e.space_used_size),u.available.set({space:t,...c},e.space_available_size)}}},e.exports.metricNames=Object.values(i)},25537:e=>{"use strict";e.exports={aggregateByObjectName:function(e){const t={};for(let r=0;r<e.length;r++){const n=e[r];n&&void 0!==n.constructor&&(Object.hasOwnProperty.call(t,n.constructor.name)?t[n.constructor.name]+=1:t[n.constructor.name]=1)}return t},updateMetrics:function(e,t,r){e.reset();for(const n in t)e.set(Object.assign({type:n},r||{}),t[n])}}},37241:e=>{"use strict";e.exports=function(){try{return process.memoryUsage()}catch{return}}},81157:(e,t,r)=>{"use strict";const n=r(4162),o=r(98517),s=r(37241),i="process_resident_memory_bytes";e.exports=(e,t)=>"linux"===process.platform?o(e,t):function(e,t={}){const r=t.prefix?t.prefix:"",o=t.labels?t.labels:{},a=Object.keys(o);new n({name:r+i,help:"Resident memory size in bytes.",registers:e?[e]:void 0,labelNames:a,collect(){const e=s();e&&this.set(o,e.rss)}})}(e,t),e.exports.metricNames="linux"===process.platform?o.metricNames:[i]},98517:(e,t,r)=>{"use strict";const n=r(4162),o=r(57147),s=["VmSize","VmRSS","VmData"],i="process_resident_memory_bytes",a="process_virtual_memory_bytes",c="process_heap_bytes";e.exports=(e,t={})=>{const r=e?[e]:void 0,l=t.prefix?t.prefix:"",u=t.labels?t.labels:{},d=Object.keys(u),h=new n({name:l+i,help:"Resident memory size in bytes.",registers:r,labelNames:d,collect(){try{const e=function(e){const t={};return e.split("\n").filter((e=>s.some((t=>0===e.indexOf(t))))).forEach((e=>{const r=e.split(":");let n=r[1].trim();n=n.substr(0,n.length-3),n=1024*Number(n),t[r[0]]=n})),t}(o.readFileSync("/proc/self/status","utf8"));h.set(u,e.VmRSS),p.set(u,e.VmSize),f.set(u,e.VmData)}catch{}}}),p=new n({name:l+a,help:"Virtual memory size in bytes.",registers:r,labelNames:d}),f=new n({name:l+c,help:"Process heap size in bytes.",registers:r,labelNames:d})},e.exports.metricNames=[i,a,c]},61523:(e,t,r)=>{"use strict";const n=r(61696),o="process_cpu_user_seconds_total",s="process_cpu_system_seconds_total",i="process_cpu_seconds_total";e.exports=(e,t={})=>{const r=e?[e]:void 0,a=t.prefix?t.prefix:"",c=t.labels?t.labels:{},l=Object.keys(c);let u=process.cpuUsage();const d=new n({name:a+o,help:"Total user CPU time spent in seconds.",registers:r,labelNames:l,collect(){const e=process.cpuUsage(),t=e.user-u.user,r=e.system-u.system;u=e,d.inc(c,t/1e6),h.inc(c,r/1e6),p.inc(c,(t+r)/1e6)}}),h=new n({name:a+s,help:"Total system CPU time spent in seconds.",registers:r,labelNames:l}),p=new n({name:a+i,help:"Total user and system CPU time spent in seconds.",registers:r,labelNames:l})},e.exports.metricNames=[o,s,i]},96802:(e,t,r)=>{"use strict";const{aggregateByObjectName:n}=r(25537),{updateMetrics:o}=r(25537),s=r(4162),i="nodejs_active_handles",a="nodejs_active_handles_total";e.exports=(e,t={})=>{if("function"!=typeof process._getActiveHandles)return;const r=e?[e]:void 0,c=t.prefix?t.prefix:"",l=t.labels?t.labels:{},u=Object.keys(l);new s({name:c+i,help:"Number of active libuv handles grouped by handle type. Every handle type is C++ class name.",labelNames:["type",...u],registers:r,collect(){const e=process._getActiveHandles();o(this,n(e),l)}}),new s({name:c+a,help:"Total number of active handles.",registers:r,labelNames:u,collect(){const e=process._getActiveHandles();this.set(l,e.length)}})},e.exports.metricNames=[i,a]},80844:(e,t,r)=>{"use strict";const n=r(4162),o=r(57147),s="process_max_fds";let i;e.exports=(e,t={})=>{if(void 0===i)try{const e=o.readFileSync("/proc/self/limits","utf8").split("\n");for(const t of e)if(t.startsWith("Max open files")){const e=t.split(/  +/);i=Number(e[1]);break}}catch{return}if(void 0===i)return;const r=t.prefix?t.prefix:"",a=t.labels?t.labels:{},c=Object.keys(a);new n({name:r+s,help:"Maximum number of open file descriptors.",registers:e?[e]:void 0,labelNames:c,collect(){void 0!==i&&this.set(a,i)}})},e.exports.metricNames=[s]},66483:(e,t,r)=>{"use strict";const n=r(4162),o=r(57147),s=r(77282),i="process_open_fds";e.exports=(e,t={})=>{if("linux"!==s.platform)return;const r=t.prefix?t.prefix:"",a=t.labels?t.labels:{},c=Object.keys(a);new n({name:r+i,help:"Number of open file descriptors.",registers:e?[e]:void 0,labelNames:c,collect(){try{const e=o.readdirSync("/proc/self/fd");this.set(a,e.length-1)}catch{}}})},e.exports.metricNames=[i]},72308:(e,t,r)=>{"use strict";const n=r(4162),{aggregateByObjectName:o}=r(25537),{updateMetrics:s}=r(25537),i="nodejs_active_requests",a="nodejs_active_requests_total";e.exports=(e,t={})=>{if("function"!=typeof process._getActiveRequests)return;const r=t.prefix?t.prefix:"",c=t.labels?t.labels:{},l=Object.keys(c);new n({name:r+i,help:"Number of active libuv requests grouped by request type. Every request type is C++ class name.",labelNames:["type",...l],registers:e?[e]:void 0,collect(){const e=process._getActiveRequests();s(this,o(e),c)}}),new n({name:r+a,help:"Total number of active requests.",registers:e?[e]:void 0,labelNames:l,collect(){const e=process._getActiveRequests();this.set(c,e.length)}})},e.exports.metricNames=[i,a]},33182:(e,t,r)=>{"use strict";const n=r(4162),{updateMetrics:o}=r(25537),s="nodejs_active_resources",i="nodejs_active_resources_total";e.exports=(e,t={})=>{if("function"!=typeof process.getActiveResourcesInfo)return;const r=t.prefix?t.prefix:"",a=t.labels?t.labels:{},c=Object.keys(a);new n({name:r+s,help:"Number of active resources that are currently keeping the event loop alive, grouped by async resource type.",labelNames:["type",...c],registers:e?[e]:void 0,collect(){const e=process.getActiveResourcesInfo(),t={};for(let r=0;r<e.length;r++){const n=e[r];Object.hasOwn(t,n)?t[n]+=1:t[n]=1}o(this,t,a)}}),new n({name:r+i,help:"Total number of active resources.",registers:e?[e]:void 0,labelNames:c,collect(){const e=process.getActiveResourcesInfo();this.set(a,e.length)}})},e.exports.metricNames=[s,i]},96310:(e,t,r)=>{"use strict";const n=r(4162),o=Math.round(Date.now()/1e3-process.uptime()),s="process_start_time_seconds";e.exports=(e,t={})=>{const r=t.prefix?t.prefix:"",i=t.labels?t.labels:{},a=Object.keys(i);new n({name:r+s,help:"Start time of the process since unix epoch in seconds.",registers:e?[e]:void 0,labelNames:a,aggregator:"omit",collect(){this.set(i,o)}})},e.exports.metricNames=[s]},5256:(e,t,r)=>{"use strict";const n=r(4162),o=process.version,s=o.slice(1).split(".").map(Number),i="nodejs_version_info";e.exports=(e,t={})=>{const r=t.prefix?t.prefix:"",a=t.labels?t.labels:{},c=Object.keys(a);new n({name:r+i,help:"Node.js version info.",labelNames:["version","major","minor","patch",...c],registers:e?[e]:void 0,aggregator:"first",collect(){this.labels(o,s[0],s[1],s[2],...Object.values(a)).set(1)}})},e.exports.metricNames=[i]},72553:(e,t,r)=>{"use strict";const n=r(57310),o=r(13685),s=r(95687),{gzipSync:i}=r(59796),{globalRegistry:a}=r(4583);async function c(e,t,r){const a=n.parse(this.gatewayUrl),c=`${a.pathname&&"/"!==a.pathname?a.pathname:""}/metrics/job/${encodeURIComponent(t)}${function(e){return e?Object.keys(e).map((t=>`/${encodeURIComponent(t)}/${encodeURIComponent(e[t])}`)).join(""):""}(r)}`,l=n.resolve(this.gatewayUrl,c),u=n.parse(l),d=-1!==u.href.search(/^https/)?s:o,h=Object.assign(u,this.requestOptions,{method:e});return new Promise(((t,r)=>{const n=d.request(h,(e=>{let r="";e.setEncoding("utf8"),e.on("data",(e=>{r+=e})),e.on("end",(()=>{t({resp:e,body:r})}))}));n.on("error",(e=>{r(e)})),"DELETE"!==e?this.registry.metrics().then((e=>{h.headers&&"gzip"===h.headers["Content-Encoding"]&&(e=i(e)),n.write(e),n.end()})).catch((e=>{r(e)})):n.end()}))}e.exports=class{constructor(e,t,r){r||(r=a),this.registry=r,this.gatewayUrl=e,this.requestOptions=Object.assign({},t)}pushAdd(e){if(!e||!e.jobName)throw new Error("Missing jobName parameter");return c.call(this,"POST",e.jobName,e.groupings)}push(e){if(!e||!e.jobName)throw new Error("Missing jobName parameter");return c.call(this,"PUT",e.jobName,e.groupings)}delete(e){if(!e||!e.jobName)throw new Error("Missing jobName parameter");return c.call(this,"DELETE",e.jobName,e.groupings)}}},4583:(e,t,r)=>{"use strict";const{getValueAsString:n}=r(10580);function o(e){return e.replace(/\n/g,"\\n").replace(/\\(?!n)/g,"\\\\")}function s(e){return"string"!=typeof e?e:o(e).replace(/"/g,'\\"')}class i{constructor(){this._metrics={},this._collectors=[],this._defaultLabels={}}getMetricsAsArray(){return Object.values(this._metrics)}async getMetricAsPrometheusString(e){const t=await e.get(),r=o(t.name),i=`# HELP ${r} ${o(t.help)}`,a=`# TYPE ${r} ${t.type}`,c=Object.keys(this._defaultLabels);let l="";for(const e of t.values||[]){if(e.labels=e.labels||{},c.length>0){e.labels=Object.assign({},e.labels);for(const t of c)e.labels[t]=e.labels[t]||this._defaultLabels[t]}let r=e.metricName||t.name;const o=Object.keys(e.labels),i=o.length;if(i>0){let t="",n=0;for(;n<i-1;n++)t+=`${o[n]}="${s(e.labels[o[n]])}",`;t+=`${o[n]}="${s(e.labels[o[n]])}"`,r+=`{${t}}`}l+=`${r} ${n(e.value)}\n`}return`${i}\n${a}\n${l}`.trim()}async metrics(){const e=[];for(const t of this.getMetricsAsArray())e.push(this.getMetricAsPrometheusString(t));return`${(await Promise.all(e)).join("\n\n")}\n`}registerMetric(e){if(this._metrics[e.name]&&this._metrics[e.name]!==e)throw new Error(`A metric with the name ${e.name} has already been registered.`);this._metrics[e.name]=e}clear(){this._metrics={},this._defaultLabels={}}async getMetricsAsJSON(){const e=[],t=Object.keys(this._defaultLabels),r=[];for(const e of this.getMetricsAsArray())r.push(e.get());const n=await Promise.all(r);for(const r of n){if(r.values&&t.length>0)for(const e of r.values){e.labels=Object.assign({},e.labels);for(const r of t)e.labels[r]=e.labels[r]||this._defaultLabels[r]}e.push(r)}return e}removeSingleMetric(e){delete this._metrics[e]}getSingleMetricAsString(e){return this.getMetricAsPrometheusString(this._metrics[e])}getSingleMetric(e){return this._metrics[e]}setDefaultLabels(e){this._defaultLabels=e}resetMetrics(){for(const e in this._metrics)this._metrics[e].reset()}get contentType(){return"text/plain; version=0.0.4; charset=utf-8"}static merge(e){const t=new i;return e.reduce(((e,t)=>e.concat(t.getMetricsAsArray())),[]).forEach(t.registerMetric,t),t}}e.exports=i,e.exports.globalRegistry=new i},14654:(e,t,r)=>{"use strict";const n=r(73837),{getLabels:o,hashObject:s,removeLabels:i}=r(10580),{validateLabel:a}=r(17609),{Metric:c}=r(65362),l=r(62401);function u(e){return()=>{const t=process.hrtime();return r=>{const n=process.hrtime(t),o=n[0]+n[1]/1e9;return this.observe(Object.assign({},e,r),o),o}}}function d(e){return t=>{const r=function(e,t){return void 0===t?{value:e,labels:{}}:{labels:e,value:t}}(e,t);if(a(this.labelNames,e),!Number.isFinite(r.value))throw new TypeError(`Value is not a valid number: ${n.format(r.value)}`);const o=s(r.labels);let i=this.hashMap[o];i||(i={labels:r.labels,td:new l(this.maxAgeSeconds,this.ageBuckets),count:0,sum:0}),i.td.push(r.value),i.count++,i.count%this.compressCount==0&&i.td.compress(),i.sum+=r.value,this.hashMap[o]=i}}e.exports=class extends c{constructor(e){super(e,{percentiles:[.01,.05,.5,.9,.95,.99,.999],compressCount:1e3,hashMap:{}});for(const e of this.labelNames)if("quantile"===e)throw new Error("quantile is a reserved label keyword");0===this.labelNames.length&&(this.hashMap={[s({})]:{labels:{},td:new l(this.maxAgeSeconds,this.ageBuckets),count:0,sum:0}})}observe(e,t){d.call(this,0===e?0:e||{})(t)}async get(){if(this.collect){const e=this.collect();e instanceof Promise&&await e}const e=Object.values(this.hashMap),t=[];return e.forEach((e=>{var r,n,o;(r=e,n=this.percentiles,r.td.compress(),n.map((e=>{const t=r.td.percentile(e);return{labels:Object.assign({quantile:e},r.labels),value:t||0}}))).forEach((e=>{t.push(e)})),t.push((o=e,{metricName:`${this.name}_sum`,labels:o.labels,value:o.sum})),t.push(function(e,t){return{metricName:`${t.name}_count`,labels:e.labels,value:e.count}}(e,this))})),{name:this.name,help:this.help,type:"summary",values:t,aggregator:this.aggregator}}reset(){Object.values(this.hashMap).forEach((e=>{e.td.reset(),e.count=0,e.sum=0}))}startTimer(e){return u.call(this,e)()}labels(...e){const t=o(this.labelNames,e);return a(this.labelNames,t),{observe:d.call(this,t),startTimer:u.call(this,t)}}remove(...e){const t=o(this.labelNames,e);a(this.labelNames,t),i.call(this,this.hashMap,t)}}},62401:(e,t,r)=>{"use strict";const{TDigest:n}=r(14378);function o(){let e=Date.now()-this.lastRotateTimestampMillis;for(;e>this.durationBetweenRotatesMillis&&this.shouldRotate;)this.ringBuffer[this.currentBuffer]=new n,++this.currentBuffer>=this.ringBuffer.length&&(this.currentBuffer=0),e-=this.durationBetweenRotatesMillis,this.lastRotateTimestampMillis+=this.durationBetweenRotatesMillis;return this.ringBuffer[this.currentBuffer]}e.exports=class{constructor(e,t){this.maxAgeSeconds=e||0,this.ageBuckets=t||0,this.shouldRotate=e&&t,this.ringBuffer=Array(t).fill(new n),this.currentBuffer=0,this.lastRotateTimestampMillis=Date.now(),this.durationBetweenRotatesMillis=1e3*e/t||1/0}percentile(e){return o.call(this).percentile(e)}push(e){o.call(this),this.ringBuffer.forEach((t=>{t.push(e)}))}reset(){this.ringBuffer.forEach((e=>{e.reset()}))}compress(){this.ringBuffer.forEach((e=>{e.compress()}))}}},10580:(e,t)=>{"use strict";function r(e){let t=Object.keys(e);if(0===t.length)return"";t.length>1&&(t=t.sort());let r="",n=0;const o=t.length;for(;n<o-1;n++)r+=`${t[n]}:${e[t[n]]},`;return r+=`${t[n]}:${e[t[n]]}`,r}t.getValueAsString=function(e){return Number.isNaN(e)?"Nan":Number.isFinite(e)?`${e}`:e<0?"-Inf":"+Inf"},t.removeLabels=function(e,t){delete e[r(t)]},t.setValue=function(e,t,n){return e[r(n)]={value:"number"==typeof t?t:0,labels:n||{}},e},t.setValueDelta=function(e,t,r,n=""){const o="number"==typeof t?t:0;return e[n]?e[n].value+=o:e[n]={value:o,labels:r},e},t.getLabels=function(e,t){if("object"==typeof t[0])return t[0];if(e.length!==t.length)throw new Error("Invalid number of arguments");const r={};for(let n=0;n<e.length;n++)r[e[n]]=t[n];return r},t.hashObject=r,t.isObject=function(e){return e===Object(e)};class n extends Map{add(e,t){this.has(e)?this.get(e).push(t):this.set(e,[t])}}t.Grouper=n},17609:(e,t,r)=>{"use strict";const n=r(73837),o=/^[a-zA-Z_:][a-zA-Z0-9_:]*$/,s=/^[a-zA-Z_][a-zA-Z0-9_]*$/;t.validateMetricName=function(e){return o.test(e)},t.validateLabelName=function(e=[]){return e.every((e=>s.test(e)))},t.validateLabel=function(e,t){for(const r in t)if(!e.includes(r))throw new Error(`Added label "${r}" is not included in initial labelset: ${n.inspect(e)}`)}},93961:(e,t,r)=>{"use strict";var n=r(43281);e.exports=t=n.descriptor=n.Root.fromJSON(r(43571)).lookup(".google.protobuf");var o=n.Namespace,s=n.Root,i=n.Enum,a=n.Type,c=n.Field,l=n.MapField,u=n.OneOf,d=n.Service,h=n.Method;function p(e,r,n){var l=t.FileDescriptorProto.create({name:e.filename||(e.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});n&&(l.syntax=n),e instanceof s||(l.package=e.fullName.substring(1));for(var u,h=0;h<e.nestedArray.length;++h)(u=e._nestedArray[h])instanceof a?l.messageType.push(u.toDescriptor(n)):u instanceof i?l.enumType.push(u.toDescriptor()):u instanceof c?l.extension.push(u.toDescriptor(n)):u instanceof d?l.service.push(u.toDescriptor()):u instanceof o&&p(u,r,n);l.options=E(e.options,t.FileOptions),l.messageType.length+l.enumType.length+l.extension.length+l.service.length&&r.push(l)}s.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.FileDescriptorSet.decode(e));var r=new s;if(e.file)for(var n,o,l,u=0;u<e.file.length;++u){if(o=r,(n=e.file[u]).package&&n.package.length&&(o=r.define(n.package)),n.name&&n.name.length&&r.files.push(o.filename=n.name),n.messageType)for(l=0;l<n.messageType.length;++l)o.add(a.fromDescriptor(n.messageType[l],n.syntax));if(n.enumType)for(l=0;l<n.enumType.length;++l)o.add(i.fromDescriptor(n.enumType[l]));if(n.extension)for(l=0;l<n.extension.length;++l)o.add(c.fromDescriptor(n.extension[l]));if(n.service)for(l=0;l<n.service.length;++l)o.add(d.fromDescriptor(n.service[l]));var h=S(n.options,t.FileOptions);if(h){var p=Object.keys(h);for(l=0;l<p.length;++l)o.setOption(p[l],h[p[l]])}}return r},s.prototype.toDescriptor=function(e){var r=t.FileDescriptorSet.create();return p(this,r.file,e),r};var f=0;a.fromDescriptor=function(e,r){"number"==typeof e.length&&(e=t.DescriptorProto.decode(e));var n,o=new a(e.name.length?e.name:"Type"+f++,S(e.options,t.MessageOptions));if(e.oneofDecl)for(n=0;n<e.oneofDecl.length;++n)o.add(u.fromDescriptor(e.oneofDecl[n]));if(e.field)for(n=0;n<e.field.length;++n){var s=c.fromDescriptor(e.field[n],r);o.add(s),e.field[n].hasOwnProperty("oneofIndex")&&o.oneofsArray[e.field[n].oneofIndex].add(s)}if(e.extension)for(n=0;n<e.extension.length;++n)o.add(c.fromDescriptor(e.extension[n],r));if(e.nestedType)for(n=0;n<e.nestedType.length;++n)o.add(a.fromDescriptor(e.nestedType[n],r)),e.nestedType[n].options&&e.nestedType[n].options.mapEntry&&o.setOption("map_entry",!0);if(e.enumType)for(n=0;n<e.enumType.length;++n)o.add(i.fromDescriptor(e.enumType[n]));if(e.extensionRange&&e.extensionRange.length)for(o.extensions=[],n=0;n<e.extensionRange.length;++n)o.extensions.push([e.extensionRange[n].start,e.extensionRange[n].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(o.reserved=[],e.reservedRange)for(n=0;n<e.reservedRange.length;++n)o.reserved.push([e.reservedRange[n].start,e.reservedRange[n].end]);if(e.reservedName)for(n=0;n<e.reservedName.length;++n)o.reserved.push(e.reservedName[n])}return o},a.prototype.toDescriptor=function(e){var r,n=t.DescriptorProto.create({name:this.name});for(r=0;r<this.fieldsArray.length;++r){var o;if(n.field.push(o=this._fieldsArray[r].toDescriptor(e)),this._fieldsArray[r]instanceof l){var s=b(this._fieldsArray[r].keyType,this._fieldsArray[r].resolvedKeyType),u=b(this._fieldsArray[r].type,this._fieldsArray[r].resolvedType),d=11===u||14===u?this._fieldsArray[r].resolvedType&&w(this.parent,this._fieldsArray[r].resolvedType)||this._fieldsArray[r].type:void 0;n.nestedType.push(t.DescriptorProto.create({name:o.typeName,field:[t.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),t.FieldDescriptorProto.create({name:"value",number:2,label:1,type:u,typeName:d})],options:t.MessageOptions.create({mapEntry:!0})}))}}for(r=0;r<this.oneofsArray.length;++r)n.oneofDecl.push(this._oneofsArray[r].toDescriptor());for(r=0;r<this.nestedArray.length;++r)this._nestedArray[r]instanceof c?n.field.push(this._nestedArray[r].toDescriptor(e)):this._nestedArray[r]instanceof a?n.nestedType.push(this._nestedArray[r].toDescriptor(e)):this._nestedArray[r]instanceof i&&n.enumType.push(this._nestedArray[r].toDescriptor());if(this.extensions)for(r=0;r<this.extensions.length;++r)n.extensionRange.push(t.DescriptorProto.ExtensionRange.create({start:this.extensions[r][0],end:this.extensions[r][1]}));if(this.reserved)for(r=0;r<this.reserved.length;++r)"string"==typeof this.reserved[r]?n.reservedName.push(this.reserved[r]):n.reservedRange.push(t.DescriptorProto.ReservedRange.create({start:this.reserved[r][0],end:this.reserved[r][1]}));return n.options=E(this.options,t.MessageOptions),n};var g=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;c.fromDescriptor=function(e,r){if("number"==typeof e.length&&(e=t.DescriptorProto.decode(e)),"number"!=typeof e.number)throw Error("missing field id");var n,o;switch(n=e.typeName&&e.typeName.length?e.typeName:function(e){switch(e){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+e)}(e.type),e.label){case 1:o=void 0;break;case 2:o="required";break;case 3:o="repeated";break;default:throw Error("illegal label: "+e.label)}var s=e.extendee;void 0!==e.extendee&&(s=s.length?s:void 0);var i=new c(e.name.length?e.name:"field"+e.number,e.number,n,o,s);if(i.options=S(e.options,t.FieldOptions),e.defaultValue&&e.defaultValue.length){var a=e.defaultValue;switch(a){case"true":case"TRUE":a=!0;break;case"false":case"FALSE":a=!1;break;default:g.exec(a)&&(a=parseInt(a))}i.setOption("default",a)}return function(e){switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}(e.type)&&("proto3"===r?e.options&&!e.options.packed&&i.setOption("packed",!1):e.options&&e.options.packed||i.setOption("packed",!1)),i},c.prototype.toDescriptor=function(e){var r=t.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)r.type=11,r.typeName=n.util.ucFirst(this.name),r.label=3;else{switch(r.type=b(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:r.typeName=this.resolvedType?w(this.parent,this.resolvedType):this.type}switch(this.rule){case"repeated":r.label=3;break;case"required":r.label=2;break;default:r.label=1}}if(r.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(r.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(r.options=E(this.options,t.FieldOptions),null!=this.options.default&&(r.defaultValue=String(this.options.default))),"proto3"===e?this.packed||((r.options||(r.options=t.FieldOptions.create())).packed=!1):this.packed&&((r.options||(r.options=t.FieldOptions.create())).packed=!0),r};var m=0;i.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.EnumDescriptorProto.decode(e));var r={};if(e.value)for(var n=0;n<e.value.length;++n){var o=e.value[n].name,s=e.value[n].number||0;r[o&&o.length?o:"NAME"+s]=s}return new i(e.name&&e.name.length?e.name:"Enum"+m++,r,S(e.options,t.EnumOptions))},i.prototype.toDescriptor=function(){for(var e=[],r=0,n=Object.keys(this.values);r<n.length;++r)e.push(t.EnumValueDescriptorProto.create({name:n[r],number:this.values[n[r]]}));return t.EnumDescriptorProto.create({name:this.name,value:e,options:E(this.options,t.EnumOptions)})};var y=0;u.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.OneofDescriptorProto.decode(e)),new u(e.name&&e.name.length?e.name:"oneof"+y++)},u.prototype.toDescriptor=function(){return t.OneofDescriptorProto.create({name:this.name})};var v=0;d.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.ServiceDescriptorProto.decode(e));var r=new d(e.name&&e.name.length?e.name:"Service"+v++,S(e.options,t.ServiceOptions));if(e.method)for(var n=0;n<e.method.length;++n)r.add(h.fromDescriptor(e.method[n]));return r},d.prototype.toDescriptor=function(){for(var e=[],r=0;r<this.methodsArray.length;++r)e.push(this._methodsArray[r].toDescriptor());return t.ServiceDescriptorProto.create({name:this.name,method:e,options:E(this.options,t.ServiceOptions)})};var _=0;function b(e,t){switch(e){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(t instanceof i)return 14;if(t instanceof a)return t.group?10:11;throw Error("illegal type: "+e)}function S(e,t){if(e){for(var r,o,s,a,c=[],l=0;l<t.fieldsArray.length;++l)"uninterpretedOption"!==(o=(r=t._fieldsArray[l]).name)&&e.hasOwnProperty(o)&&(s=e[o],r.resolvedType instanceof i&&"number"==typeof s&&void 0!==r.resolvedType.valuesById[s]&&(s=r.resolvedType.valuesById[s]),c.push((a=o).substring(0,1)+a.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,(function(e,t){return"_"+t.toLowerCase()})),s));return c.length?n.util.toObject(c):void 0}}function E(e,t){if(e){for(var r,o,s=[],i=0,a=Object.keys(e);i<a.length;++i)if(o=e[r=a[i]],"default"!==r){var c=t.fields[r];(c||(c=t.fields[r=n.util.camelCase(r)]))&&s.push(r,o)}return s.length?t.fromObject(n.util.toObject(s)):void 0}}function w(e,t){var r=e.fullName.split("."),n=t.fullName.split("."),i=0,a=0,c=n.length-1;if(!(e instanceof s)&&t instanceof o)for(;i<r.length&&a<c&&r[i]===n[a];){var l=t.lookup(r[i++],!0);if(null!==l&&l!==t)break;++a}else for(;i<r.length&&a<c&&r[i]===n[a];++i,++a);return n.slice(a).join(".")}h.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.MethodDescriptorProto.decode(e)),new h(e.name&&e.name.length?e.name:"Method"+_++,"rpc",e.inputType,e.outputType,Boolean(e.clientStreaming),Boolean(e.serverStreaming),S(e.options,t.MethodOptions))},h.prototype.toDescriptor=function(){return t.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:E(this.options,t.MethodOptions)})}},43281:(e,t,r)=>{"use strict";e.exports=r(99050)},62100:(e,t,r)=>{"use strict";e.exports=r(89482)},42967:e=>{"use strict";e.exports=n;var t,r=/\/|\./;function n(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),n[e]=t}n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),n("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:t}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),n.get=function(e){return n[e]||null}},33996:(e,t,r)=>{"use strict";var n=t,o=r(67025),s=r(9935);function i(e,t,r,n){var s=!1;if(t.resolvedType)if(t.resolvedType instanceof o){e("switch(d%s){",n);for(var i=t.resolvedType.values,a=Object.keys(i),c=0;c<a.length;++c)i[a[c]]!==t.typeDefault||s||(e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n),t.repeated||e("break"),s=!0),e("case%j:",a[c])("case %i:",i[a[c]])("m%s=%j",n,i[a[c]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var l=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":l=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,l)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,l?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function a(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof o?e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,r,n,n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var s=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":s=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,s?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,r=s.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var a=t[n].resolve(),c=s.safeProp(a.name);a.map?(r("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),i(r,a,n,c+"[ks[i]]")("}")("}")):a.repeated?(r("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),i(r,a,n,c+"[i]")("}")("}")):(a.resolvedType instanceof o||r("if(d%s!=null){",c),i(r,a,n,c),a.resolvedType instanceof o||r("}"))}return r("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(s.compareFieldsById);if(!t.length)return s.codegen()("return {}");for(var r=s.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],i=[],c=[],l=0;l<t.length;++l)t[l].partOf||(t[l].resolve().repeated?n:t[l].map?i:c).push(t[l]);if(n.length){for(r("if(o.arrays||o.defaults){"),l=0;l<n.length;++l)r("d%s=[]",s.safeProp(n[l].name));r("}")}if(i.length){for(r("if(o.objects||o.defaults){"),l=0;l<i.length;++l)r("d%s={}",s.safeProp(i[l].name));r("}")}if(c.length){for(r("if(o.defaults){"),l=0;l<c.length;++l){var u=c[l],d=s.safeProp(u.name);if(u.resolvedType instanceof o)r("d%s=o.enums===String?%j:%j",d,u.resolvedType.valuesById[u.typeDefault],u.typeDefault);else if(u.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",u.typeDefault.low,u.typeDefault.high,u.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,u.typeDefault.toString(),u.typeDefault.toNumber());else if(u.bytes){var h="["+Array.prototype.slice.call(u.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,u.typeDefault))("else{")("d%s=%s",d,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else r("d%s=%j",d,u.typeDefault)}r("}")}var p=!1;for(l=0;l<t.length;++l){u=t[l];var f=e._fieldsArray.indexOf(u);d=s.safeProp(u.name),u.map?(p||(p=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),a(r,u,f,d+"[ks2[j]]")("}")):u.repeated?(r("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),a(r,u,f,d+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",d,u.name),a(r,u,f,d),u.partOf&&r("if(o.oneofs)")("d%s=%j",s.safeProp(u.partOf.name),u.name)),r("}")}return r("return d")}},15305:(e,t,r)=>{"use strict";e.exports=function(e){var t=s.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var a=e._fieldsArray[r].resolve(),c=a.resolvedType instanceof n?"int32":a.type,l="m"+s.safeProp(a.name);t("case %i: {",a.id),a.map?(t("if(%s===util.emptyObject)",l)("%s={}",l)("var c2 = r.uint32()+r.pos"),void 0!==o.defaults[a.keyType]?t("k=%j",o.defaults[a.keyType]):t("k=null"),void 0!==o.defaults[c]?t("value=%j",o.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===o.basic[c]?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==o.long[a.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',l):t("%s[k]=value",l)):a.repeated?(t("if(!(%s&&%s.length))",l,l)("%s=[]",l),void 0!==o.packed[c]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",l,c)("}else"),void 0===o.basic[c]?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",l,r):t("%s.push(r.%s())",l,c)):void 0===o.basic[c]?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",l,r):t("%s=r.%s()",l,c),t("break")("}")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var u=e._fieldsArray[r];u.required&&t("if(!m.hasOwnProperty(%j))",u.name)("throw util.ProtocolError(%j,{instance:m})",i(u))}return t("return m")};var n=r(67025),o=r(77063),s=r(9935);function i(e){return"missing required '"+e.name+"'"}},44928:(e,t,r)=>{"use strict";e.exports=function(e){for(var t,r=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(s.compareFieldsById),c=0;c<a.length;++c){var l=a[c].resolve(),u=e._fieldsArray.indexOf(l),d=l.resolvedType instanceof n?"int32":l.type,h=o.basic[d];t="m"+s.safeProp(l.name),l.map?(r("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,l.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(l.id<<3|2)>>>0,8|o.mapKey[l.keyType],l.keyType),void 0===h?r("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",u,t):r(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,d,t),r("}")("}")):l.repeated?(r("if(%s!=null&&%s.length){",t,t),l.packed&&void 0!==o.packed[d]?r("w.uint32(%i).fork()",(l.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",d,t)("w.ldelim()"):(r("for(var i=0;i<%s.length;++i)",t),void 0===h?i(r,l,u,t+"[i]"):r("w.uint32(%i).%s(%s[i])",(l.id<<3|h)>>>0,d,t)),r("}")):(l.optional&&r("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,l.name),void 0===h?i(r,l,u,t):r("w.uint32(%i).%s(%s)",(l.id<<3|h)>>>0,d,t))}return r("return w")};var n=r(67025),o=r(77063),s=r(9935);function i(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}},67025:(e,t,r)=>{"use strict";e.exports=i;var n=r(3243);((i.prototype=Object.create(n.prototype)).constructor=i).className="Enum";var o=r(69313),s=r(9935);function i(e,t,r,o,s,i){if(n.call(this,e,r),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=o,this.comments=s||{},this.valuesOptions=i,this.reserved=void 0,t)for(var a=Object.keys(t),c=0;c<a.length;++c)"number"==typeof t[a[c]]&&(this.valuesById[this.values[a[c]]=t[a[c]]]=a[c])}i.fromJSON=function(e,t){var r=new i(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},i.prototype.add=function(e,t,r,n){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return n&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[e]=n||null),this.comments[e]=r||null,this},i.prototype.remove=function(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this},i.prototype.isReservedId=function(e){return o.isReservedId(this.reserved,e)},i.prototype.isReservedName=function(e){return o.isReservedName(this.reserved,e)}},13548:(e,t,r)=>{"use strict";e.exports=l;var n=r(3243);((l.prototype=Object.create(n.prototype)).constructor=l).className="Field";var o,s=r(67025),i=r(77063),a=r(9935),c=/^required|optional|repeated$/;function l(e,t,r,o,s,l,u){if(a.isObject(o)?(u=s,l=o,o=s=void 0):a.isObject(s)&&(u=l,l=s,s=void 0),n.call(this,e,l),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(r))throw TypeError("type must be a string");if(void 0!==o&&!c.test(o=o.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==s&&!a.isString(s))throw TypeError("extend must be a string");"proto3_optional"===o&&(o="optional"),this.rule=o&&"optional"!==o?o:void 0,this.type=r,this.id=t,this.extend=s||void 0,this.required="required"===o,this.optional=!this.required,this.repeated="repeated"===o,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==i.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=u}l.fromJSON=function(e,t){return new l(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(l.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),l.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),n.prototype.setOption.call(this,e,t,r)},l.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},l.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=i.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof o?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof s&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof s)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof o&&(this.parent.ctor.prototype[this.name]=this.defaultValue),n.prototype.resolve.call(this)},l.d=function(e,t,r,n){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(o,s){a.decorateType(o.constructor).add(new l(s,e,t,r,{default:n}))}},l._configure=function(e){o=e}},88836:(e,t,r)=>{"use strict";var n=e.exports=r(89482);n.build="light",n.load=function(e,t,r){return"function"==typeof t?(r=t,t=new n.Root):t||(t=new n.Root),t.load(e,r)},n.loadSync=function(e,t){return t||(t=new n.Root),t.loadSync(e)},n.encoder=r(44928),n.decoder=r(15305),n.verifier=r(24497),n.converter=r(33996),n.ReflectionObject=r(3243),n.Namespace=r(69313),n.Root=r(99424),n.Enum=r(67025),n.Type=r(7645),n.Field=r(13548),n.OneOf=r(27598),n.MapField=r(16039),n.Service=r(77513),n.Method=r(94429),n.Message=r(88368),n.wrappers=r(71667),n.types=r(77063),n.util=r(9935),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},89482:(e,t,r)=>{"use strict";var n=t;function o(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(41173),n.BufferWriter=r(43155),n.Reader=r(51408),n.BufferReader=r(50593),n.util=r(99693),n.rpc=r(35994),n.roots=r(85054),n.configure=o,o()},99050:(e,t,r)=>{"use strict";var n=e.exports=r(88836);n.build="full",n.tokenize=r(50626),n.parse=r(62228),n.common=r(42967),n.Root._configure(n.Type,n.parse,n.common)},16039:(e,t,r)=>{"use strict";e.exports=i;var n=r(13548);((i.prototype=Object.create(n.prototype)).constructor=i).className="MapField";var o=r(77063),s=r(9935);function i(e,t,r,o,i,a){if(n.call(this,e,t,o,void 0,void 0,i,a),!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}i.fromJSON=function(e,t){return new i(e,t.id,t.keyType,t.type,t.options,t.comment)},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},i.prototype.resolve=function(){if(this.resolved)return this;if(void 0===o.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},i.d=function(e,t,r){return"function"==typeof r?r=s.decorateType(r).name:r&&"object"==typeof r&&(r=s.decorateEnum(r).name),function(n,o){s.decorateType(n.constructor).add(new i(o,e,t,r))}}},88368:(e,t,r)=>{"use strict";e.exports=o;var n=r(99693);function o(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}o.create=function(e){return this.$type.create(e)},o.encode=function(e,t){return this.$type.encode(e,t)},o.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},o.decode=function(e){return this.$type.decode(e)},o.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},o.verify=function(e){return this.$type.verify(e)},o.fromObject=function(e){return this.$type.fromObject(e)},o.toObject=function(e,t){return this.$type.toObject(e,t)},o.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},94429:(e,t,r)=>{"use strict";e.exports=s;var n=r(3243);((s.prototype=Object.create(n.prototype)).constructor=s).className="Method";var o=r(9935);function s(e,t,r,s,i,a,c,l,u){if(o.isObject(i)?(c=i,i=a=void 0):o.isObject(a)&&(c=a,a=void 0),void 0!==t&&!o.isString(t))throw TypeError("type must be a string");if(!o.isString(r))throw TypeError("requestType must be a string");if(!o.isString(s))throw TypeError("responseType must be a string");n.call(this,e,c),this.type=t||"rpc",this.requestType=r,this.requestStream=!!i||void 0,this.responseType=s,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=l,this.parsedOptions=u}s.fromJSON=function(e,t){return new s(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},s.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},69313:(e,t,r)=>{"use strict";e.exports=d;var n=r(3243);((d.prototype=Object.create(n.prototype)).constructor=d).className="Namespace";var o,s,i,a=r(13548),c=r(9935),l=r(27598);function u(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function d(e,t){n.call(this,e,t),this.nested=void 0,this._nestedArray=null}function h(e){return e._nestedArray=null,e}d.fromJSON=function(e,t){return new d(e,t.options).addJSON(t.nested)},d.arrayToJSON=u,d.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0;return!1},d.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(d.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=c.toArray(this.nested))}}),d.prototype.toJSON=function(e){return c.toObject(["options",this.options,"nested",u(this.nestedArray,e)])},d.prototype.addJSON=function(e){if(e)for(var t,r=Object.keys(e),n=0;n<r.length;++n)t=e[r[n]],this.add((void 0!==t.fields?o.fromJSON:void 0!==t.values?i.fromJSON:void 0!==t.methods?s.fromJSON:void 0!==t.id?a.fromJSON:d.fromJSON)(r[n],t));return this},d.prototype.get=function(e){return this.nested&&this.nested[e]||null},d.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof i)return this.nested[e].values;throw Error("no such enum: "+e)},d.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof o||e instanceof l||e instanceof i||e instanceof s||e instanceof d))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof d&&e instanceof d)||t instanceof o||t instanceof s)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,n=0;n<r.length;++n)e.add(r[n]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),h(this)},d.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),h(this)},d.prototype.define=function(e,t){if(c.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof d))throw Error("path conflicts with non-namespace objects")}else r.add(r=new d(n))}return t&&r.addJSON(t),r},d.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof d?e[t++].resolveAll():e[t++].resolve();return this.resolve()},d.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),c.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof d&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var o=0;o<this.nestedArray.length;++o)if(this._nestedArray[o]instanceof d&&(n=this._nestedArray[o].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},d.prototype.lookupType=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such type: "+e);return t},d.prototype.lookupEnum=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},d.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[o,i]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},d.prototype.lookupService=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},d._configure=function(e,t,r){o=e,s=t,i=r}},3243:(e,t,r)=>{"use strict";e.exports=s,s.className="ReflectionObject";var n,o=r(9935);function s(e,t){if(!o.isString(e))throw TypeError("name must be a string");if(t&&!o.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(s.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),s.prototype.toJSON=function(){throw Error()},s.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},s.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},s.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},s.prototype.getOption=function(e){if(this.options)return this.options[e]},s.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},s.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(r){var s=n.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(s){var i=s[e];o.setProperty(i,r,t)}else(s={})[e]=o.setProperty({},r,t),n.push(s)}else{var a={};a[e]=t,n.push(a)}return this},s.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},s.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},s._configure=function(e){n=e}},27598:(e,t,r)=>{"use strict";e.exports=i;var n=r(3243);((i.prototype=Object.create(n.prototype)).constructor=i).className="OneOf";var o=r(13548),s=r(9935);function i(e,t,r,o){if(Array.isArray(t)||(r=t,t=void 0),n.call(this,e,r),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=o}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}i.fromJSON=function(e,t){return new i(e,t.oneof,t.options,t.comment)},i.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},i.prototype.add=function(e){if(!(e instanceof o))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},i.prototype.remove=function(e){if(!(e instanceof o))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},i.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var r=e.get(this.oneof[t]);r&&!r.partOf&&(r.partOf=this,this.fieldsArray.push(r))}a(this)},i.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},i.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){s.decorateType(t.constructor).add(new i(r,e)),Object.defineProperty(t,r,{get:s.oneOfGetter(e),set:s.oneOfSetter(e)})}}},62228:(e,t,r)=>{"use strict";e.exports=A,A.filename=null,A.defaults={keepCase:!1};var n=r(50626),o=r(99424),s=r(7645),i=r(13548),a=r(16039),c=r(27598),l=r(67025),u=r(77513),d=r(94429),h=r(77063),p=r(9935),f=/^[1-9][0-9]*$/,g=/^-?[1-9][0-9]*$/,m=/^0[x][0-9a-fA-F]+$/,y=/^-?0[x][0-9a-fA-F]+$/,v=/^0[0-7]+$/,_=/^-?0[0-7]+$/,b=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,S=/^[a-zA-Z_][a-zA-Z_0-9]*$/,E=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,w=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function A(e,t,r){t instanceof o||(r=t,t=new o),r||(r=A.defaults);var T,C,I,R,O,k=r.preferTrailingComment||!1,N=n(e,r.alternateCommentMode||!1),P=N.next,M=N.push,L=N.peek,B=N.skip,D=N.cmnt,x=!0,U=!1,j=t,F=r.keepCase?function(e){return e}:p.camelCase;function H(e,t,r){var n=A.filename;return r||(A.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+N.line+")")}function W(){var e,t=[];do{if('"'!==(e=P())&&"'"!==e)throw H(e);t.push(P()),B(e),e=L()}while('"'===e||"'"===e);return t.join("")}function q(e){var t=P();switch(t){case"'":case'"':return M(t),W();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e,t){var r=1;switch("-"===e.charAt(0)&&(r=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return r*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(f.test(e))return r*parseInt(e,10);if(m.test(e))return r*parseInt(e,16);if(v.test(e))return r*parseInt(e,8);if(b.test(e))return r*parseFloat(e);throw H(e,"number",!0)}(t)}catch(r){if(e&&E.test(t))return t;throw H(t,"value")}}function z(e,t){var r,n;do{!t||'"'!==(r=L())&&"'"!==r?e.push([n=G(P()),B("to",!0)?G(P()):n]):e.push(W())}while(B(",",!0));B(";")}function G(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw H(e,"id");if(g.test(e))return parseInt(e,10);if(y.test(e))return parseInt(e,16);if(_.test(e))return parseInt(e,8);throw H(e,"id")}function $(){if(void 0!==T)throw H("package");if(T=P(),!E.test(T))throw H(T,"name");j=j.define(T),B(";")}function V(){var e,t=L();switch(t){case"weak":e=I||(I=[]),P();break;case"public":P();default:e=C||(C=[])}t=W(),B(";"),e.push(t)}function J(){if(B("="),R=W(),!(U="proto3"===R)&&"proto2"!==R)throw H(R,"syntax");B(";")}function K(e,t){switch(t){case"option":return ee(e,t),B(";"),!0;case"message":return Y(e,t),!0;case"enum":return Z(e,t),!0;case"service":return function(e,t){if(!S.test(t=P()))throw H(t,"service name");var r=new u(t);Q(r,(function(e){if(!K(r,e)){if("rpc"!==e)throw H(e);!function(e,t){var r=D(),n=t;if(!S.test(t=P()))throw H(t,"name");var o,s,i,a,c=t;if(B("("),B("stream",!0)&&(s=!0),!E.test(t=P()))throw H(t);if(o=t,B(")"),B("returns"),B("("),B("stream",!0)&&(a=!0),!E.test(t=P()))throw H(t);i=t,B(")");var l=new d(c,n,o,i,s,a);l.comment=r,Q(l,(function(e){if("option"!==e)throw H(e);ee(l,e),B(";")})),e.add(l)}(r,e)}})),e.add(r)}(e,t),!0;case"extend":return function(e,t){if(!E.test(t=P()))throw H(t,"reference");var r=t;Q(null,(function(t){switch(t){case"required":case"repeated":X(e,t,r);break;case"optional":X(e,U?"proto3_optional":"optional",r);break;default:if(!U||!E.test(t))throw H(t);M(t),X(e,"optional",r)}}))}(e,t),!0}return!1}function Q(e,t,r){var n=N.line;if(e&&("string"!=typeof e.comment&&(e.comment=D()),e.filename=A.filename),B("{",!0)){for(var o;"}"!==(o=P());)t(o);B(";",!0)}else r&&r(),B(";"),e&&("string"!=typeof e.comment||k)&&(e.comment=D(n)||e.comment)}function Y(e,t){if(!S.test(t=P()))throw H(t,"type name");var r=new s(t);Q(r,(function(e){if(!K(r,e))switch(e){case"map":!function(e){B("<");var t=P();if(void 0===h.mapKey[t])throw H(t,"type");B(",");var r=P();if(!E.test(r))throw H(r,"type");B(">");var n=P();if(!S.test(n))throw H(n,"name");B("=");var o=new a(F(n),G(P()),t,r);Q(o,(function(e){if("option"!==e)throw H(e);ee(o,e),B(";")}),(function(){ne(o)})),e.add(o)}(r);break;case"required":case"repeated":X(r,e);break;case"optional":X(r,U?"proto3_optional":"optional");break;case"oneof":!function(e,t){if(!S.test(t=P()))throw H(t,"name");var r=new c(F(t));Q(r,(function(e){"option"===e?(ee(r,e),B(";")):(M(e),X(r,"optional"))})),e.add(r)}(r,e);break;case"extensions":z(r.extensions||(r.extensions=[]));break;case"reserved":z(r.reserved||(r.reserved=[]),!0);break;default:if(!U||!E.test(e))throw H(e);M(e),X(r,"optional")}})),e.add(r)}function X(e,t,r){var n=P();if("group"!==n){if(!E.test(n))throw H(n,"type");var o=P();if(!S.test(o))throw H(o,"name");o=F(o),B("=");var a=new i(o,G(P()),n,t,r);if(Q(a,(function(e){if("option"!==e)throw H(e);ee(a,e),B(";")}),(function(){ne(a)})),"proto3_optional"===t){var l=new c("_"+o);a.setOption("proto3_optional",!0),l.add(a),e.add(l)}else e.add(a);U||!a.repeated||void 0===h.packed[n]&&void 0!==h.basic[n]||a.setOption("packed",!1,!0)}else!function(e,t){var r=P();if(!S.test(r))throw H(r,"name");var n=p.lcFirst(r);r===n&&(r=p.ucFirst(r)),B("=");var o=G(P()),a=new s(r);a.group=!0;var c=new i(n,o,r,t);c.filename=A.filename,Q(a,(function(e){switch(e){case"option":ee(a,e),B(";");break;case"required":case"repeated":X(a,e);break;case"optional":X(a,U?"proto3_optional":"optional");break;case"message":Y(a,e);break;case"enum":Z(a,e);break;default:throw H(e)}})),e.add(a).add(c)}(e,t)}function Z(e,t){if(!S.test(t=P()))throw H(t,"name");var r=new l(t);Q(r,(function(e){switch(e){case"option":ee(r,e),B(";");break;case"reserved":z(r.reserved||(r.reserved=[]),!0);break;default:!function(e,t){if(!S.test(t))throw H(t,"name");B("=");var r=G(P(),!0),n={options:void 0,setOption:function(e,t){void 0===this.options&&(this.options={}),this.options[e]=t}};Q(n,(function(e){if("option"!==e)throw H(e);ee(n,e),B(";")}),(function(){ne(n)})),e.add(t,r,n.comment,n.options)}(r,e)}})),e.add(r)}function ee(e,t){var r=B("(",!0);if(!E.test(t=P()))throw H(t,"name");var n,o=t,s=o;r&&(B(")"),s=o="("+o+")",t=L(),w.test(t)&&(n=t.slice(1),o+=t,P())),B("="),function(e,t,r,n){e.setParsedOption&&e.setParsedOption(t,r,n)}(e,s,te(e,o),n)}function te(e,t){if(B("{",!0)){for(var r={};!B("}",!0);){if(!S.test(O=P()))throw H(O,"name");var n,o=O;if(B(":",!0),"{"===L())n=te(e,t+"."+O);else if("["===L()){var s;if(n=[],B("[",!0)){do{s=q(!0),n.push(s)}while(B(",",!0));B("]"),void 0!==s&&re(e,t+"."+O,s)}}else n=q(!0),re(e,t+"."+O,n);var i=r[o];i&&(n=[].concat(i).concat(n)),r[o]=n,B(",",!0),B(";",!0)}return r}var a=q(!0);return re(e,t,a),a}function re(e,t,r){e.setOption&&e.setOption(t,r)}function ne(e){if(B("[",!0)){do{ee(e,"option")}while(B(",",!0));B("]")}return e}for(;null!==(O=P());)switch(O){case"package":if(!x)throw H(O);$();break;case"import":if(!x)throw H(O);V();break;case"syntax":if(!x)throw H(O);J();break;case"option":ee(j,O),B(";");break;default:if(K(j,O)){x=!1;continue}throw H(O)}return A.filename=null,{package:T,imports:C,weakImports:I,syntax:R,root:t}}},51408:(e,t,r)=>{"use strict";e.exports=c;var n,o=r(99693),s=o.LongBits,i=o.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},d=function(){return o.Buffer?function(e){return(c.create=function(e){return o.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function h(){var e=new s(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new s(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}c.create=d(),c.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return i.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){n=e,c.create=d(),n._configure();var t=o.Long?"toLong":"toNumber";o.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},50593:(e,t,r)=>{"use strict";e.exports=s;var n=r(51408);(s.prototype=Object.create(n.prototype)).constructor=s;var o=r(99693);function s(e){n.call(this,e)}s._configure=function(){o.Buffer&&(s.prototype._slice=o.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},99424:(e,t,r)=>{"use strict";e.exports=d;var n=r(69313);((d.prototype=Object.create(n.prototype)).constructor=d).className="Root";var o,s,i,a=r(13548),c=r(67025),l=r(27598),u=r(9935);function d(e){n.call(this,"",e),this.deferred=[],this.files=[]}function h(){}d.fromJSON=function(e,t){return t||(t=new d),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},d.prototype.resolvePath=u.path.resolve,d.prototype.fetch=u.fetch,d.prototype.load=function e(t,r,n){"function"==typeof r&&(n=r,r=void 0);var o=this;if(!n)return u.asPromise(e,o,t,r);var a=n===h;function c(e,t){if(n){var r=n;if(n=null,a)throw e;r(e,t)}}function l(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in i)return r}return null}function d(e,t){try{if(u.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),u.isString(t)){s.filename=e;var n,i=s(t,o,r),d=0;if(i.imports)for(;d<i.imports.length;++d)(n=l(i.imports[d])||o.resolvePath(e,i.imports[d]))&&p(n);if(i.weakImports)for(d=0;d<i.weakImports.length;++d)(n=l(i.weakImports[d])||o.resolvePath(e,i.weakImports[d]))&&p(n,!0)}else o.setOptions(t.options).addJSON(t.nested)}catch(e){c(e)}a||f||c(null,o)}function p(e,t){if(e=l(e)||e,!(o.files.indexOf(e)>-1))if(o.files.push(e),e in i)a?d(e,i[e]):(++f,setTimeout((function(){--f,d(e,i[e])})));else if(a){var r;try{r=u.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||c(e))}d(e,r)}else++f,o.fetch(e,(function(r,s){--f,n&&(r?t?f||c(null,o):c(r):d(e,s))}))}var f=0;u.isString(t)&&(t=[t]);for(var g,m=0;m<t.length;++m)(g=o.resolvePath("",t[m]))&&p(g);if(a)return o;f||c(null,o)},d.prototype.loadSync=function(e,t){if(!u.isNode)throw Error("not supported");return this.load(e,t,h)},d.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return r.get(n.name)||(n.declaringField=t,t.extensionField=n,r.add(n)),!0}return!1}d.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||f(0,e)||this.deferred.push(e);else if(e instanceof c)p.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof l)){if(e instanceof o)for(var t=0;t<this.deferred.length;)f(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);p.test(e.name)&&(e.parent[e.name]=e)}},d.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)p.test(e.name)&&delete e.parent[e.name];else if(e instanceof n){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);p.test(e.name)&&delete e.parent[e.name]}},d._configure=function(e,t,r){o=e,s=t,i=r}},85054:e=>{"use strict";e.exports={}},35994:(e,t,r)=>{"use strict";t.Service=r(77948)},77948:(e,t,r)=>{"use strict";e.exports=o;var n=r(99693);function o(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(o.prototype=Object.create(n.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,r,o,s,i){if(!s)throw TypeError("request must be specified");var a=this;if(!i)return n.asPromise(e,a,t,r,o,s);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](s).finish(),(function(e,r){if(e)return a.emit("error",e,t),i(e);if(null!==r){if(!(r instanceof o))try{r=o[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),i(e)}return a.emit("data",r,t),i(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){i(e)}),0)}else setTimeout((function(){i(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},77513:(e,t,r)=>{"use strict";e.exports=a;var n=r(69313);((a.prototype=Object.create(n.prototype)).constructor=a).className="Service";var o=r(94429),s=r(9935),i=r(35994);function a(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var r=new a(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),s=0;s<n.length;++s)r.add(o.fromJSON(n[s],t.methods[n[s]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},a.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return s.toObject(["options",t&&t.options||void 0,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof o?(this.methods[e.name]=e,e.parent=this,c(this)):n.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof o){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return n.prototype.remove.call(this,e)},a.prototype.create=function(e,t,r){for(var n,o=new i.Service(e,t,r),a=0;a<this.methodsArray.length;++a){var c=s.lcFirst((n=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");o[c]=s.codegen(["r","c"],s.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return o}},50626:e=>{"use strict";e.exports=d;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,o=/^ *[*/]+ */,s=/^\s*\*?\/*/,i=/\n/g,a=/\s/,c=/\\(.?)/g,l={0:"\0",r:"\r",n:"\n",t:"\t"};function u(e){return e.replace(c,(function(e,t){switch(t){case"\\":case"":return t;default:return l[t]||""}}))}function d(e,c){e=e.toString();var l=0,d=e.length,h=1,p=0,f={},g=[],m=null;function y(e){return Error("illegal "+e+" (line "+h+")")}function v(t){return e.charAt(t)}function _(t,r,n){var a,l={type:e.charAt(t++),lineEmpty:!1,leading:n},u=t-(c?2:3);do{if(--u<0||"\n"===(a=e.charAt(u))){l.lineEmpty=!0;break}}while(" "===a||"\t"===a);for(var d=e.substring(t,r).split(i),g=0;g<d.length;++g)d[g]=d[g].replace(c?s:o,"").trim();l.text=d.join("\n").trim(),f[h]=l,p=h}function b(t){var r=S(t),n=e.substring(t,r);return/^\s*\/{1,2}/.test(n)}function S(e){for(var t=e;t<d&&"\n"!==v(t);)t++;return t}function E(){if(g.length>0)return g.shift();if(m)return function(){var t="'"===m?n:r;t.lastIndex=l-1;var o=t.exec(e);if(!o)throw y("string");return l=t.lastIndex,w(m),m=null,u(o[1])}();var o,s,i,p,f,E=0===l;do{if(l===d)return null;for(o=!1;a.test(i=v(l));)if("\n"===i&&(E=!0,++h),++l===d)return null;if("/"===v(l)){if(++l===d)throw y("comment");if("/"===v(l))if(c){if(p=l,f=!1,b(l)){f=!0;do{if((l=S(l))===d)break;if(l++,!E)break}while(b(l))}else l=Math.min(d,S(l)+1);f&&(_(p,l,E),E=!0),h++,o=!0}else{for(f="/"===v(p=l+1);"\n"!==v(++l);)if(l===d)return null;++l,f&&(_(p,l-1,E),E=!0),++h,o=!0}else{if("*"!==(i=v(l)))return"/";p=l+1,f=c||"*"===v(p);do{if("\n"===i&&++h,++l===d)throw y("comment");s=i,i=v(l)}while("*"!==s||"/"!==i);++l,f&&(_(p,l-2,E),E=!0),o=!0}}}while(o);var A=l;if(t.lastIndex=0,!t.test(v(A++)))for(;A<d&&!t.test(v(A));)++A;var T=e.substring(l,l=A);return'"'!==T&&"'"!==T||(m=T),T}function w(e){g.push(e)}function A(){if(!g.length){var e=E();if(null===e)return null;w(e)}return g[0]}return Object.defineProperty({next:E,peek:A,push:w,skip:function(e,t){var r=A();if(r===e)return E(),!0;if(!t)throw y("token '"+r+"', '"+e+"' expected");return!1},cmnt:function(e){var t,r=null;return void 0===e?(t=f[h-1],delete f[h-1],t&&(c||"*"===t.type||t.lineEmpty)&&(r=t.leading?t.text:null)):(p<e&&A(),t=f[e],delete f[e],!t||t.lineEmpty||!c&&"/"!==t.type||(r=t.leading?null:t.text)),r}},"line",{get:function(){return h}})}d.unescape=u},7645:(e,t,r)=>{"use strict";e.exports=v;var n=r(69313);((v.prototype=Object.create(n.prototype)).constructor=v).className="Type";var o=r(67025),s=r(27598),i=r(13548),a=r(16039),c=r(77513),l=r(88368),u=r(51408),d=r(41173),h=r(9935),p=r(44928),f=r(15305),g=r(24497),m=r(33996),y=r(71667);function v(e,t){n.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function _(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(v.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=v.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof l||((e.prototype=new l).constructor=e,h.merge(e.prototype,t)),e.$type=e.prototype.$type=this,h.merge(e,l,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:h.oneOfGetter(this._oneofsArray[r].oneof),set:h.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),v.generateConstructor=function(e){for(var t,r=h.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",h.safeProp(t.name)):t.repeated&&r("this%s=[]",h.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},v.fromJSON=function(e,t){var r=new v(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var l=Object.keys(t.fields),u=0;u<l.length;++u)r.add((void 0!==t.fields[l[u]].keyType?a.fromJSON:i.fromJSON)(l[u],t.fields[l[u]]));if(t.oneofs)for(l=Object.keys(t.oneofs),u=0;u<l.length;++u)r.add(s.fromJSON(l[u],t.oneofs[l[u]]));if(t.nested)for(l=Object.keys(t.nested),u=0;u<l.length;++u){var d=t.nested[l[u]];r.add((void 0!==d.id?i.fromJSON:void 0!==d.fields?v.fromJSON:void 0!==d.values?o.fromJSON:void 0!==d.methods?c.fromJSON:n.fromJSON)(l[u],d))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},v.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return h.toObject(["options",t&&t.options||void 0,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},v.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return n.prototype.resolveAll.call(this)},v.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},v.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof i&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),_(this)}return e instanceof s?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),_(this)):n.prototype.add.call(this,e)},v.prototype.remove=function(e){if(e instanceof i&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),_(this)}if(e instanceof s){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),_(this)}return n.prototype.remove.call(this,e)},v.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},v.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},v.prototype.create=function(e){return new this.ctor(e)},v.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=p(this)({Writer:d,types:t,util:h}),this.decode=f(this)({Reader:u,types:t,util:h}),this.verify=g(this)({types:t,util:h}),this.fromObject=m.fromObject(this)({types:t,util:h}),this.toObject=m.toObject(this)({types:t,util:h});var n=y[e];if(n){var o=Object.create(this);o.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(o),o.toObject=this.toObject,this.toObject=n.toObject.bind(o)}return this},v.prototype.encode=function(e,t){return this.setup().encode(e,t)},v.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},v.prototype.decode=function(e,t){return this.setup().decode(e,t)},v.prototype.decodeDelimited=function(e){return e instanceof u||(e=u.create(e)),this.decode(e,e.uint32())},v.prototype.verify=function(e){return this.setup().verify(e)},v.prototype.fromObject=function(e){return this.setup().fromObject(e)},v.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},v.d=function(e){return function(t){h.decorateType(t,e)}}},77063:(e,t,r)=>{"use strict";var n=t,o=r(9935),s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function i(e,t){var r=0,n={};for(t|=0;r<e.length;)n[s[r+t]]=e[r++];return n}n.basic=i([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=i([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",o.emptyArray,null]),n.long=i([0,0,0,1,1],7),n.mapKey=i([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=i([1,5,0,0,0,5,5,0,0,0,1,1,0])},9935:(e,t,r)=>{"use strict";var n,o,s=e.exports=r(99693),i=r(85054);s.codegen=r(75124),s.fetch=r(49054),s.path=r(18626),s.fs=s.inquire("fs"),s.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},s.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],o=e[r++];void 0!==o&&(t[n]=o)}return t};var a=/\\/g,c=/"/g;s.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},s.safeProp=function(e){return!/^[$\w_]+$/.test(e)||s.isReserved(e)?'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+e},s.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var l=/_([a-z])/g;s.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(l,(function(e,t){return t.toUpperCase()}))},s.compareFieldsById=function(e,t){return e.id-t.id},s.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(s.decorateRoot.remove(e.$type),e.$type.name=t,s.decorateRoot.add(e.$type)),e.$type;n||(n=r(7645));var o=new n(t||e.name);return s.decorateRoot.add(o),o.ctor=e,Object.defineProperty(e,"$type",{value:o,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:o,enumerable:!1}),o};var u=0;s.decorateEnum=function(e){if(e.$type)return e.$type;o||(o=r(67025));var t=new o("Enum"+u++,e);return s.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},s.setProperty=function(e,t,r){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,r,n){var o=r.shift();if("__proto__"===o)return t;if(r.length>0)t[o]=e(t[o]||{},r,n);else{var s=t[o];s&&(n=[].concat(s).concat(n)),t[o]=n}return t}(e,t=t.split("."),r)},Object.defineProperty(s,"decorateRoot",{get:function(){return i.decorated||(i.decorated=new(r(99424)))}})},1945:(e,t,r)=>{"use strict";e.exports=o;var n=r(99693);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=o.zero=new o(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var i=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new o(r,n)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(n.isString(e)){if(!n.Long)return o.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):s},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;o.fromHash=function(e){return e===i?s:new o((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},99693:function(e,t,r){"use strict";var n=t;function o(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e}function s(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&o(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}n.asPromise=r(34537),n.base64=r(97419),n.EventEmitter=r(19211),n.float=r(10945),n.inquire=r(67199),n.utf8=r(94997),n.pool=r(76662),n.LongBits=r(1945),n.isNode=Boolean("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),n.global=n.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=o,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=s,n.ProtocolError=s("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},24497:(e,t,r)=>{"use strict";e.exports=function(e){var t=o.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r={};e.oneofsArray.length&&t("var p={}");for(var n=0;n<e.fieldsArray.length;++n){var c=e._fieldsArray[n].resolve(),l="m"+o.safeProp(c.name);if(c.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",l,c.name),c.map)t("if(!util.isObject(%s))",l)("return%j",s(c,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),a(t,c,"k[i]"),i(t,c,n,l+"[k[i]]")("}");else if(c.repeated)t("if(!Array.isArray(%s))",l)("return%j",s(c,"array"))("for(var i=0;i<%s.length;++i){",l),i(t,c,n,l+"[i]")("}");else{if(c.partOf){var u=o.safeProp(c.partOf.name);1===r[c.partOf.name]&&t("if(p%s===1)",u)("return%j",c.partOf.name+": multiple values"),r[c.partOf.name]=1,t("p%s=1",u)}i(t,c,n,l)}c.optional&&t("}")}return t("return null")};var n=r(67025),o=r(9935);function s(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function i(e,t,r,o){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(%s){",o)("default:")("return%j",s(t,"enum value"));for(var i=Object.keys(t.resolvedType.values),a=0;a<i.length;++a)e("case %i:",t.resolvedType.values[i[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,o)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",o)("return%j",s(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",o,o,o,o)("return%j",s(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',o)("return%j",s(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',o)("return%j",s(t,"boolean"));break;case"string":e("if(!util.isString(%s))",o)("return%j",s(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',o,o,o)("return%j",s(t,"buffer"))}return e}function a(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",s(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",s(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",s(t,"boolean key"))}return e}},71667:(e,t,r)=>{"use strict";var n=t,o=r(88368);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var n="."===e["@type"].charAt(0)?e["@type"].slice(1):e["@type"];return-1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="",n="";if(t&&t.json&&e.type_url&&e.value){n=e.type_url.substring(e.type_url.lastIndexOf("/")+1),r=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var s=this.lookup(n);s&&(e=s.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof o){var i=e.$type.toObject(e,t);return""===r&&(r="type.googleapis.com/"),n=r+("."===e.$type.fullName[0]?e.$type.fullName.slice(1):e.$type.fullName),i["@type"]=n,i}return this.toObject(e,t)}}},41173:(e,t,r)=>{"use strict";e.exports=d;var n,o=r(99693),s=o.LongBits,i=o.base64,a=o.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function l(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var h=function(){return o.Buffer?function(){return(d.create=function(){return new n})()}:function(){return new d}};function p(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function m(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=h(),d.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(d.alloc=o.pool(d.alloc,o.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(g,10,s.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=s.from(e);return this._push(g,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(g,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=s.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var y=o.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(o.isString(e)){var r=d.alloc(t=i.length(e));i.decode(e,r,0),e=r}return this.uint32(t)._push(y,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(l,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){n=e,d.create=h(),n._configure()}},43155:(e,t,r)=>{"use strict";e.exports=s;var n=r(41173);(s.prototype=Object.create(n.prototype)).constructor=s;var o=r(99693);function s(){n.call(this)}function i(e,t,r){e.length<40?o.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}s._configure=function(){s.alloc=o._Buffer_allocUnsafe,s.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},s.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(i,t,e),this},s._configure()},22003:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)};function o(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function s(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,s=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return i}function i(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e}var a=function(e,t){this.target=t,this.type=e},c=function(e){function t(t,r){var n=e.call(this,"error",r)||this;return n.message=t.message,n.error=t,n}return o(t,e),t}(a),l=function(e){function t(t,r,n){void 0===t&&(t=1e3),void 0===r&&(r="");var o=e.call(this,"close",n)||this;return o.wasClean=!0,o.code=t,o.reason=r,o}return o(t,e),t}(a),u=function(){if("undefined"!=typeof WebSocket)return WebSocket},d={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1};const h=function(){function e(e,t,r){var n=this;void 0===r&&(r={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(e){n._debug("open event");var t=n._options.minUptime,r=void 0===t?d.minUptime:t;clearTimeout(n._connectTimeout),n._uptimeTimeout=setTimeout((function(){return n._acceptOpen()}),r),n._ws.binaryType=n._binaryType,n._messageQueue.forEach((function(e){return n._ws.send(e)})),n._messageQueue=[],n.onopen&&n.onopen(e),n._listeners.open.forEach((function(t){return n._callEventListener(e,t)}))},this._handleMessage=function(e){n._debug("message event"),n.onmessage&&n.onmessage(e),n._listeners.message.forEach((function(t){return n._callEventListener(e,t)}))},this._handleError=function(e){n._debug("error event",e.message),n._disconnect(void 0,"TIMEOUT"===e.message?"timeout":void 0),n.onerror&&n.onerror(e),n._debug("exec error listeners"),n._listeners.error.forEach((function(t){return n._callEventListener(e,t)})),n._connect()},this._handleClose=function(e){n._debug("close event"),n._clearTimeouts(),n._shouldReconnect&&n._connect(),n.onclose&&n.onclose(e),n._listeners.close.forEach((function(t){return n._callEventListener(e,t)}))},this._url=e,this._protocols=t,this._options=r,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(e,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CONNECTING",{get:function(){return e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OPEN",{get:function(){return e.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSING",{get:function(){return e.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSED",{get:function(){return e.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){return this._messageQueue.reduce((function(e,t){return"string"==typeof t?e+=t.length:t instanceof Blob?e+=t.size:e+=t.byteLength,e}),0)+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?e.CLOSED:e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),e.prototype.close=function(e,t){void 0===e&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),this._ws?this._ws.readyState!==this.CLOSED?this._ws.close(e,t):this._debug("close: already closed"):this._debug("close enqueued: no ws instance")},e.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,this._ws&&this._ws.readyState!==this.CLOSED?(this._disconnect(e,t),this._connect()):this._connect()},e.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,r=void 0===t?d.maxEnqueuedMessages:t;this._messageQueue.length<r&&(this._debug("enqueue",e),this._messageQueue.push(e))}},e.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},e.prototype.dispatchEvent=function(e){var t,r,n=this._listeners[e.type];if(n)try{for(var o=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}(n),s=o.next();!s.done;s=o.next()){var i=s.value;this._callEventListener(e,i)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return!0},e.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter((function(e){return e!==t})))},e.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,i(["RWS>"],e))},e.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,r=void 0===t?d.reconnectionDelayGrowFactor:t,n=e.minReconnectionDelay,o=void 0===n?d.minReconnectionDelay:n,s=e.maxReconnectionDelay,i=void 0===s?d.maxReconnectionDelay:s,a=0;return this._retryCount>0&&(a=o*Math.pow(r,this._retryCount-1))>i&&(a=i),this._debug("next delay",a),a},e.prototype._wait=function(){var e=this;return new Promise((function(t){setTimeout(t,e._getNextDelay())}))},e.prototype._getNextUrl=function(e){if("string"==typeof e)return Promise.resolve(e);if("function"==typeof e){var t=e();if("string"==typeof t)return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},e.prototype._connect=function(){var e=this;if(!this._connectLock&&this._shouldReconnect){this._connectLock=!0;var t=this._options,r=t.maxRetries,n=void 0===r?d.maxRetries:r,o=t.connectionTimeout,s=void 0===o?d.connectionTimeout:o,i=t.WebSocket,a=void 0===i?u():i;if(this._retryCount>=n)this._debug("max retries reached",this._retryCount,">=",n);else{if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),void 0===(c=a)||!c||2!==c.CLOSING)throw Error("No valid WebSocket class provided");var c;this._wait().then((function(){return e._getNextUrl(e._url)})).then((function(t){e._closeCalled||(e._debug("connect",{url:t,protocols:e._protocols}),e._ws=e._protocols?new a(t,e._protocols):new a(t),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout((function(){return e._handleTimeout()}),s))}))}}},e.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new c(Error("TIMEOUT"),this))},e.prototype._disconnect=function(e,t){if(void 0===e&&(e=1e3),this._clearTimeouts(),this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new l(e,t,this))}catch(e){}}},e.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},e.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},e.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},e.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},e.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},e}()},50984:(e,t,r)=>{const n=r(39491),o=r(71017),s=r(57147);let i;try{i=r(12884)}catch(e){}const a={nosort:!0,silent:!0};let c=0;const l="win32"===process.platform,u=e=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((t=>{e[t]=e[t]||s[t],e[t+="Sync"]=e[t]||s[t]})),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,!1===e.glob&&(e.disableGlob=!0),!0!==e.disableGlob&&void 0===i)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");e.disableGlob=e.disableGlob||!1,e.glob=e.glob||a},d=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),n(e,"rimraf: missing path"),n.equal(typeof e,"string","rimraf: path should be a string"),n.equal(typeof r,"function","rimraf: callback function required"),n(t,"rimraf: invalid options argument provided"),n.equal(typeof t,"object","rimraf: options should be object"),u(t);let o=0,s=null,a=0;const l=(e,n)=>e?r(e):(a=n.length,0===a?r():void n.forEach((e=>{const n=i=>{if(i){if(("EBUSY"===i.code||"ENOTEMPTY"===i.code||"EPERM"===i.code)&&o<t.maxBusyTries)return o++,setTimeout((()=>h(e,t,n)),100*o);if("EMFILE"===i.code&&c<t.emfileWait)return setTimeout((()=>h(e,t,n)),c++);"ENOENT"===i.code&&(i=null)}c=0,(e=>{s=s||e,0==--a&&r(s)})(i)};h(e,t,n)})));if(t.disableGlob||!i.hasMagic(e))return l(null,[e]);t.lstat(e,((r,n)=>{if(!r)return l(null,[e]);i(e,t.glob,l)}))},h=(e,t,r)=>{n(e),n(t),n("function"==typeof r),t.lstat(e,((n,o)=>n&&"ENOENT"===n.code?r(null):(n&&"EPERM"===n.code&&l&&p(e,t,n,r),o&&o.isDirectory()?g(e,t,n,r):void t.unlink(e,(n=>{if(n){if("ENOENT"===n.code)return r(null);if("EPERM"===n.code)return l?p(e,t,n,r):g(e,t,n,r);if("EISDIR"===n.code)return g(e,t,n,r)}return r(n)})))))},p=(e,t,r,o)=>{n(e),n(t),n("function"==typeof o),t.chmod(e,438,(n=>{n?o("ENOENT"===n.code?null:r):t.stat(e,((n,s)=>{n?o("ENOENT"===n.code?null:r):s.isDirectory()?g(e,t,r,o):t.unlink(e,o)}))}))},f=(e,t,r)=>{n(e),n(t);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw r}let o;try{o=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw r}o.isDirectory()?v(e,t,r):t.unlinkSync(e)},g=(e,t,r,o)=>{n(e),n(t),n("function"==typeof o),t.rmdir(e,(n=>{!n||"ENOTEMPTY"!==n.code&&"EEXIST"!==n.code&&"EPERM"!==n.code?n&&"ENOTDIR"===n.code?o(r):o(n):m(e,t,o)}))},m=(e,t,r)=>{n(e),n(t),n("function"==typeof r),t.readdir(e,((n,s)=>{if(n)return r(n);let i,a=s.length;if(0===a)return t.rmdir(e,r);s.forEach((n=>{d(o.join(e,n),t,(n=>{if(!i)return n?r(i=n):void(0==--a&&t.rmdir(e,r))}))}))}))},y=(e,t)=>{let r;if(u(t=t||{}),n(e,"rimraf: missing path"),n.equal(typeof e,"string","rimraf: path should be a string"),n(t,"rimraf: missing options"),n.equal(typeof t,"object","rimraf: options should be object"),t.disableGlob||!i.hasMagic(e))r=[e];else try{t.lstatSync(e),r=[e]}catch(n){r=i.sync(e,t.glob)}if(r.length)for(let e=0;e<r.length;e++){const n=r[e];let o;try{o=t.lstatSync(n)}catch(e){if("ENOENT"===e.code)return;"EPERM"===e.code&&l&&f(n,t,e)}try{o&&o.isDirectory()?v(n,t,null):t.unlinkSync(n)}catch(e){if("ENOENT"===e.code)return;if("EPERM"===e.code)return l?f(n,t,e):v(n,t,e);if("EISDIR"!==e.code)throw e;v(n,t,e)}}},v=(e,t,r)=>{n(e),n(t);try{t.rmdirSync(e)}catch(n){if("ENOENT"===n.code)return;if("ENOTDIR"===n.code)throw r;"ENOTEMPTY"!==n.code&&"EEXIST"!==n.code&&"EPERM"!==n.code||_(e,t)}},_=(e,t)=>{n(e),n(t),t.readdirSync(e).forEach((r=>y(o.join(e,r),t)));const r=l?100:1;let s=0;for(;;){let n=!0;try{const o=t.rmdirSync(e,t);return n=!1,o}finally{if(++s<r&&n)continue}}};e.exports=d,d.sync=y},2399:(e,t,r)=>{"use strict";var n,o=r(14300),s=o.Buffer,i={};for(n in o)o.hasOwnProperty(n)&&"SlowBuffer"!==n&&"Buffer"!==n&&(i[n]=o[n]);var a=i.Buffer={};for(n in s)s.hasOwnProperty(n)&&"allocUnsafe"!==n&&"allocUnsafeSlow"!==n&&(a[n]=s[n]);if(i.Buffer.prototype=s.prototype,a.from&&a.from!==Uint8Array.from||(a.from=function(e,t,r){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return s(e,t,r)}),a.alloc||(a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=s(e);return t&&0!==t.length?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n}),!i.kStringMaxLength)try{i.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(e){}i.constants||(i.constants={MAX_LENGTH:i.kMaxLength},i.kStringMaxLength&&(i.constants.MAX_STRING_LENGTH=i.kStringMaxLength)),e.exports=i},22257:(e,t,r)=>{const n=Symbol("SemVer ANY");class o{static get ANY(){return n}constructor(e,t){if(t=s(t),e instanceof o){if(e.loose===!!t.loose)return e;e=e.value}l("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(e){const t=this.options.loose?i[a.COMPARATORLOOSE]:i[a.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new u(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(l("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof o))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new d(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new d(this.value,t).test(e.semver);const r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),n=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),s=this.semver.version===e.semver.version,i=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=c(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),l=c(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||n||s&&i||a||l}}e.exports=o;const s=r(12893),{re:i,t:a}=r(55765),c=r(7539),l=r(74225),u=r(26376),d=r(66902)},66902:(e,t,r)=>{class n{constructor(e,t){if(t=s(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof i)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!f(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&g(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,r=o.get(t);if(r)return r;const n=this.options.loose,s=n?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];e=e.replace(s,I(this.options.includePrerelease)),a("hyphen replace",e),e=e.replace(l[u.COMPARATORTRIM],d),a("comparator trim",e);let c=(e=(e=(e=e.replace(l[u.TILDETRIM],h)).replace(l[u.CARETTRIM],p)).split(/\s+/).join(" ")).split(" ").map((e=>y(e,this.options))).join(" ").split(/\s+/).map((e=>C(e,this.options)));n&&(c=c.filter((e=>(a("loose invalid filter",e,this.options),!!e.match(l[u.COMPARATORLOOSE]))))),a("range list",c);const g=new Map,m=c.map((e=>new i(e,this.options)));for(const e of m){if(f(e))return[e];g.set(e.value,e)}g.size>1&&g.has("")&&g.delete("");const v=[...g.values()];return o.set(t,v),v}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some((r=>m(r,t)&&e.set.some((e=>m(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(R(this.set[t],e,this.options))return!0;return!1}}e.exports=n;const o=new(r(39593))({max:1e3}),s=r(12893),i=r(22257),a=r(74225),c=r(26376),{re:l,t:u,comparatorTrimReplace:d,tildeTrimReplace:h,caretTrimReplace:p}=r(55765),f=e=>"<0.0.0-0"===e.value,g=e=>""===e.value,m=(e,t)=>{let r=!0;const n=e.slice();let o=n.pop();for(;r&&n.length;)r=n.every((e=>o.intersects(e,t))),o=n.pop();return r},y=(e,t)=>(a("comp",e,t),e=S(e,t),a("caret",e),e=_(e,t),a("tildes",e),e=w(e,t),a("xrange",e),e=T(e,t),a("stars",e),e),v=e=>!e||"x"===e.toLowerCase()||"*"===e,_=(e,t)=>e.trim().split(/\s+/).map((e=>b(e,t))).join(" "),b=(e,t)=>{const r=t.loose?l[u.TILDELOOSE]:l[u.TILDE];return e.replace(r,((t,r,n,o,s)=>{let i;return a("tilde",e,t,r,n,o,s),v(r)?i="":v(n)?i=`>=${r}.0.0 <${+r+1}.0.0-0`:v(o)?i=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:s?(a("replaceTilde pr",s),i=`>=${r}.${n}.${o}-${s} <${r}.${+n+1}.0-0`):i=`>=${r}.${n}.${o} <${r}.${+n+1}.0-0`,a("tilde return",i),i}))},S=(e,t)=>e.trim().split(/\s+/).map((e=>E(e,t))).join(" "),E=(e,t)=>{a("caret",e,t);const r=t.loose?l[u.CARETLOOSE]:l[u.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,o,s,i)=>{let c;return a("caret",e,t,r,o,s,i),v(r)?c="":v(o)?c=`>=${r}.0.0${n} <${+r+1}.0.0-0`:v(s)?c="0"===r?`>=${r}.${o}.0${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.0${n} <${+r+1}.0.0-0`:i?(a("replaceCaret pr",i),c="0"===r?"0"===o?`>=${r}.${o}.${s}-${i} <${r}.${o}.${+s+1}-0`:`>=${r}.${o}.${s}-${i} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${s}-${i} <${+r+1}.0.0-0`):(a("no pr"),c="0"===r?"0"===o?`>=${r}.${o}.${s}${n} <${r}.${o}.${+s+1}-0`:`>=${r}.${o}.${s}${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${s} <${+r+1}.0.0-0`),a("caret return",c),c}))},w=(e,t)=>(a("replaceXRanges",e,t),e.split(/\s+/).map((e=>A(e,t))).join(" ")),A=(e,t)=>{e=e.trim();const r=t.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return e.replace(r,((r,n,o,s,i,c)=>{a("xRange",e,r,n,o,s,i,c);const l=v(o),u=l||v(s),d=u||v(i),h=d;return"="===n&&h&&(n=""),c=t.includePrerelease?"-0":"",l?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&h?(u&&(s=0),i=0,">"===n?(n=">=",u?(o=+o+1,s=0,i=0):(s=+s+1,i=0)):"<="===n&&(n="<",u?o=+o+1:s=+s+1),"<"===n&&(c="-0"),r=`${n+o}.${s}.${i}${c}`):u?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:d&&(r=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),a("xRange return",r),r}))},T=(e,t)=>(a("replaceStars",e,t),e.trim().replace(l[u.STAR],"")),C=(e,t)=>(a("replaceGTE0",e,t),e.trim().replace(l[t.includePrerelease?u.GTE0PRE:u.GTE0],"")),I=e=>(t,r,n,o,s,i,a,c,l,u,d,h,p)=>`${r=v(n)?"":v(o)?`>=${n}.0.0${e?"-0":""}`:v(s)?`>=${n}.${o}.0${e?"-0":""}`:i?`>=${r}`:`>=${r}${e?"-0":""}`} ${c=v(l)?"":v(u)?`<${+l+1}.0.0-0`:v(d)?`<${l}.${+u+1}.0-0`:h?`<=${l}.${u}.${d}-${h}`:e?`<${l}.${u}.${+d+1}-0`:`<=${c}`}`.trim(),R=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(a(e[r].semver),e[r].semver!==i.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},26376:(e,t,r)=>{const n=r(74225),{MAX_LENGTH:o,MAX_SAFE_INTEGER:s}=r(83295),{re:i,t:a}=r(55765),c=r(12893),{compareIdentifiers:l}=r(86742);class u{constructor(e,t){if(t=c(t),e instanceof u){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>o)throw new TypeError(`version is longer than ${o} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?i[a.LOOSE]:i[a.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<s)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof u)){if("string"==typeof e&&e===this.version)return 0;e=new u(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof u||(e=new u(e,this.options)),l(this.major,e.major)||l(this.minor,e.minor)||l(this.patch,e.patch)}comparePre(e){if(e instanceof u||(e=new u(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],o=e.prerelease[t];if(n("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return l(r,o)}while(++t)}compareBuild(e){e instanceof u||(e=new u(e,this.options));let t=0;do{const r=this.build[t],o=e.build[t];if(n("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return l(r,o)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(0===l(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=u},13507:(e,t,r)=>{const n=r(33959);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},7539:(e,t,r)=>{const n=r(58718),o=r(81194),s=r(71312),i=r(25903),a=r(21544),c=r(12056);e.exports=(e,t,r,l)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,l);case"!=":return o(e,r,l);case">":return s(e,r,l);case">=":return i(e,r,l);case"<":return a(e,r,l);case"<=":return c(e,r,l);default:throw new TypeError(`Invalid operator: ${t}`)}}},99038:(e,t,r)=>{const n=r(26376),o=r(33959),{re:s,t:i}=r(55765);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let t;for(;(t=s[i.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&t.index+t[0].length===r.index+r[0].length||(r=t),s[i.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;s[i.COERCERTL].lastIndex=-1}else r=e.match(s[i.COERCE]);return null===r?null:o(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)}},88880:(e,t,r)=>{const n=r(26376);e.exports=(e,t,r)=>{const o=new n(e,r),s=new n(t,r);return o.compare(s)||o.compareBuild(s)}},27880:(e,t,r)=>{const n=r(46269);e.exports=(e,t)=>n(e,t,!0)},46269:(e,t,r)=>{const n=r(26376);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},62378:(e,t,r)=>{const n=r(33959),o=r(58718);e.exports=(e,t)=>{if(o(e,t))return null;{const r=n(e),o=n(t),s=r.prerelease.length||o.prerelease.length,i=s?"pre":"",a=s?"prerelease":"";for(const e in r)if(("major"===e||"minor"===e||"patch"===e)&&r[e]!==o[e])return i+e;return a}}},58718:(e,t,r)=>{const n=r(46269);e.exports=(e,t,r)=>0===n(e,t,r)},71312:(e,t,r)=>{const n=r(46269);e.exports=(e,t,r)=>n(e,t,r)>0},25903:(e,t,r)=>{const n=r(46269);e.exports=(e,t,r)=>n(e,t,r)>=0},20253:(e,t,r)=>{const n=r(26376);e.exports=(e,t,r,o)=>{"string"==typeof r&&(o=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,o).version}catch(e){return null}}},21544:(e,t,r)=>{const n=r(46269);e.exports=(e,t,r)=>n(e,t,r)<0},12056:(e,t,r)=>{const n=r(46269);e.exports=(e,t,r)=>n(e,t,r)<=0},38679:(e,t,r)=>{const n=r(26376);e.exports=(e,t)=>new n(e,t).major},87789:(e,t,r)=>{const n=r(26376);e.exports=(e,t)=>new n(e,t).minor},81194:(e,t,r)=>{const n=r(46269);e.exports=(e,t,r)=>0!==n(e,t,r)},33959:(e,t,r)=>{const{MAX_LENGTH:n}=r(83295),{re:o,t:s}=r(55765),i=r(26376),a=r(12893);e.exports=(e,t)=>{if(t=a(t),e instanceof i)return e;if("string"!=typeof e)return null;if(e.length>n)return null;if(!(t.loose?o[s.LOOSE]:o[s.FULL]).test(e))return null;try{return new i(e,t)}catch(e){return null}}},52358:(e,t,r)=>{const n=r(26376);e.exports=(e,t)=>new n(e,t).patch},57559:(e,t,r)=>{const n=r(33959);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},79795:(e,t,r)=>{const n=r(46269);e.exports=(e,t,r)=>n(t,e,r)},63657:(e,t,r)=>{const n=r(88880);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},45712:(e,t,r)=>{const n=r(66902);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},21100:(e,t,r)=>{const n=r(88880);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},76397:(e,t,r)=>{const n=r(33959);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},81249:(e,t,r)=>{const n=r(55765);e.exports={re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:r(83295).SEMVER_SPEC_VERSION,SemVer:r(26376),compareIdentifiers:r(86742).compareIdentifiers,rcompareIdentifiers:r(86742).rcompareIdentifiers,parse:r(33959),valid:r(76397),clean:r(13507),inc:r(20253),diff:r(62378),major:r(38679),minor:r(87789),patch:r(52358),prerelease:r(57559),compare:r(46269),rcompare:r(79795),compareLoose:r(27880),compareBuild:r(88880),sort:r(21100),rsort:r(63657),gt:r(71312),lt:r(21544),eq:r(58718),neq:r(81194),gte:r(25903),lte:r(12056),cmp:r(7539),coerce:r(99038),Comparator:r(22257),Range:r(66902),satisfies:r(45712),toComparators:r(51042),maxSatisfying:r(85775),minSatisfying:r(71657),minVersion:r(95316),validRange:r(89042),outside:r(6826),gtr:r(97606),ltr:r(50032),intersects:r(82937),simplifyRange:r(17908),subset:r(50799)}},83295:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:t,MAX_SAFE_COMPONENT_LENGTH:16}},74225:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},86742:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),o=t.test(r);return n&&o&&(e=+e,r=+r),e===r?0:n&&!o?-1:o&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},12893:e=>{const t=["includePrerelease","loose","rtl"];e.exports=e=>e?"object"!=typeof e?{loose:!0}:t.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{}},55765:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n}=r(83295),o=r(74225),s=(t=e.exports={}).re=[],i=t.src=[],a=t.t={};let c=0;const l=(e,t,r)=>{const n=c++;o(e,n,t),a[e]=n,i[n]=t,s[n]=new RegExp(t,r?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${i[a.NUMERICIDENTIFIER]})\\.(${i[a.NUMERICIDENTIFIER]})\\.(${i[a.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${i[a.NUMERICIDENTIFIERLOOSE]})\\.(${i[a.NUMERICIDENTIFIERLOOSE]})\\.(${i[a.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${i[a.NUMERICIDENTIFIER]}|${i[a.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${i[a.NUMERICIDENTIFIERLOOSE]}|${i[a.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${i[a.PRERELEASEIDENTIFIER]}(?:\\.${i[a.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${i[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${i[a.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${i[a.BUILDIDENTIFIER]}(?:\\.${i[a.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${i[a.MAINVERSION]}${i[a.PRERELEASE]}?${i[a.BUILD]}?`),l("FULL",`^${i[a.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${i[a.MAINVERSIONLOOSE]}${i[a.PRERELEASELOOSE]}?${i[a.BUILD]}?`),l("LOOSE",`^${i[a.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${i[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${i[a.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${i[a.XRANGEIDENTIFIER]})(?:\\.(${i[a.XRANGEIDENTIFIER]})(?:\\.(${i[a.XRANGEIDENTIFIER]})(?:${i[a.PRERELEASE]})?${i[a.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${i[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[a.XRANGEIDENTIFIERLOOSE]})(?:${i[a.PRERELEASELOOSE]})?${i[a.BUILD]}?)?)?`),l("XRANGE",`^${i[a.GTLT]}\\s*${i[a.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${i[a.GTLT]}\\s*${i[a.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),l("COERCERTL",i[a.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${i[a.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",l("TILDE",`^${i[a.LONETILDE]}${i[a.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${i[a.LONETILDE]}${i[a.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${i[a.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",l("CARET",`^${i[a.LONECARET]}${i[a.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${i[a.LONECARET]}${i[a.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${i[a.GTLT]}\\s*(${i[a.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${i[a.GTLT]}\\s*(${i[a.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${i[a.GTLT]}\\s*(${i[a.LOOSEPLAIN]}|${i[a.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${i[a.XRANGEPLAIN]})\\s+-\\s+(${i[a.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${i[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${i[a.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},97606:(e,t,r)=>{const n=r(6826);e.exports=(e,t,r)=>n(e,t,">",r)},82937:(e,t,r)=>{const n=r(66902);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t))},50032:(e,t,r)=>{const n=r(6826);e.exports=(e,t,r)=>n(e,t,"<",r)},85775:(e,t,r)=>{const n=r(26376),o=r(66902);e.exports=(e,t,r)=>{let s=null,i=null,a=null;try{a=new o(t,r)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(s&&-1!==i.compare(e)||(s=e,i=new n(s,r)))})),s}},71657:(e,t,r)=>{const n=r(26376),o=r(66902);e.exports=(e,t,r)=>{let s=null,i=null,a=null;try{a=new o(t,r)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(s&&1!==i.compare(e)||(s=e,i=new n(s,r)))})),s}},95316:(e,t,r)=>{const n=r(26376),o=r(66902),s=r(71312);e.exports=(e,t)=>{e=new o(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const o=e.set[t];let i=null;o.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!s(t,i)||(i=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!i||r&&!s(r,i)||(r=i)}return r&&e.test(r)?r:null}},6826:(e,t,r)=>{const n=r(26376),o=r(22257),{ANY:s}=o,i=r(66902),a=r(45712),c=r(71312),l=r(21544),u=r(12056),d=r(25903);e.exports=(e,t,r,h)=>{let p,f,g,m,y;switch(e=new n(e,h),t=new i(t,h),r){case">":p=c,f=u,g=l,m=">",y=">=";break;case"<":p=l,f=d,g=c,m="<",y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,h))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let i=null,a=null;if(n.forEach((e=>{e.semver===s&&(e=new o(">=0.0.0")),i=i||e,a=a||e,p(e.semver,i.semver,h)?i=e:g(e.semver,a.semver,h)&&(a=e)})),i.operator===m||i.operator===y)return!1;if((!a.operator||a.operator===m)&&f(e,a.semver))return!1;if(a.operator===y&&g(e,a.semver))return!1}return!0}},17908:(e,t,r)=>{const n=r(45712),o=r(46269);e.exports=(e,t,r)=>{const s=[];let i=null,a=null;const c=e.sort(((e,t)=>o(e,t,r)));for(const e of c)n(e,t,r)?(a=e,i||(i=e)):(a&&s.push([i,a]),a=null,i=null);i&&s.push([i,null]);const l=[];for(const[e,t]of s)e===t?l.push(e):t||e!==c[0]?t?e===c[0]?l.push(`<=${t}`):l.push(`${e} - ${t}`):l.push(`>=${e}`):l.push("*");const u=l.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return u.length<d.length?u:t}},50799:(e,t,r)=>{const n=r(66902),o=r(22257),{ANY:s}=o,i=r(45712),a=r(46269),c=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===s){if(1===t.length&&t[0].semver===s)return!0;e=r.includePrerelease?[new o(">=0.0.0-0")]:[new o(">=0.0.0")]}if(1===t.length&&t[0].semver===s){if(r.includePrerelease)return!0;t=[new o(">=0.0.0")]}const n=new Set;let c,d,h,p,f,g,m;for(const t of e)">"===t.operator||">="===t.operator?c=l(c,t,r):"<"===t.operator||"<="===t.operator?d=u(d,t,r):n.add(t.semver);if(n.size>1)return null;if(c&&d){if(h=a(c.semver,d.semver,r),h>0)return null;if(0===h&&(">="!==c.operator||"<="!==d.operator))return null}for(const e of n){if(c&&!i(e,String(c),r))return null;if(d&&!i(e,String(d),r))return null;for(const n of t)if(!i(e,String(n),r))return!1;return!0}let y=!(!d||r.includePrerelease||!d.semver.prerelease.length)&&d.semver,v=!(!c||r.includePrerelease||!c.semver.prerelease.length)&&c.semver;y&&1===y.prerelease.length&&"<"===d.operator&&0===y.prerelease[0]&&(y=!1);for(const e of t){if(m=m||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,c)if(v&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===v.major&&e.semver.minor===v.minor&&e.semver.patch===v.patch&&(v=!1),">"===e.operator||">="===e.operator){if(p=l(c,e,r),p===e&&p!==c)return!1}else if(">="===c.operator&&!i(c.semver,String(e),r))return!1;if(d)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),"<"===e.operator||"<="===e.operator){if(f=u(d,e,r),f===e&&f!==d)return!1}else if("<="===d.operator&&!i(d.semver,String(e),r))return!1;if(!e.operator&&(d||c)&&0!==h)return!1}return!(c&&g&&!d&&0!==h||d&&m&&!c&&0!==h||v||y)},l=(e,t,r)=>{if(!e)return t;const n=a(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},u=(e,t,r)=>{if(!e)return t;const n=a(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let o=!1;e:for(const n of e.set){for(const e of t.set){const t=c(n,e,r);if(o=o||null!==t,t)continue e}if(o)return!1}return!0}},51042:(e,t,r)=>{const n=r(66902);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},89042:(e,t,r)=>{const n=r(66902);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},6200:(e,t,r)=>{"use strict";const n=r(91003),o=/\s/,s=/\r|\n/,i=/^(Host|Match)$/i,a=/^(GlobalKnownHostsFile|Host|IPQoS|SendEnv|UserKnownHostsFile|ProxyCommand)$/i,c=/^(?:CertificateFile|IdentityFile|IdentityAgent|User)$/i,l=/^(Include|IdentityFile)$/i,u=["IdentityFile","LocalForward","RemoteForward","DynamicForward","CertificateFile"];function d(e,t){return t.hasOwnProperty(e.param)&&t[e.param]===e.value}function h(e){for(const t of e)if(i.test(t.param))for(const e of t.config)if(e.before)return e.before;return"  "}class p extends Array{compute(e){const t={},r=(e,r)=>{u.includes(e)?(t[e]||(t[e]=[])).push(r):null==t[e]&&(t[e]=r)};for(const t of this)1===t.type&&("Host"===t.param?n(t.value,e)&&(r(t.param,t.value),t.config.filter((e=>1===e.type)).forEach((e=>r(e.param,e.value)))):"Match"===t.param||r(t.param,t.value));return t}find(e={}){if("function"==typeof e)return super.find(e);if(!e||!("Host"in e)&&!("Match"in e))throw new Error("Can only find by Host or Match");return super.find((t=>d(t,e)))}remove(e={}){let t;if("function"==typeof e)t=super.findIndex(e);else{if(!e||!("Host"in e)&&!("Match"in e))throw new Error("Can only remove by Host or Match");t=super.findIndex((t=>d(t,e)))}if(t>=0)return this.splice(t,1)}toString(){return this.constructor.stringify(this)}append(e){const t=h(this),r=this.length>0?this[this.length-1]:null;let n=r&&r.config||this,o=this,s=n.length>0?n[n.length-1]:r;s&&!s.after&&(s.after="\n");for(const r in e){const a={type:1,param:r,separator:" ",value:e[r],before:"",after:"\n"};i.test(r)?(n=o,s&&"\n"===s.after&&(s.after+="\n"),n.push(a),n=a.config=new p):(a.before=n===o?"":t,n.push(a)),s=a}return o}prepend(e,t=!1){const r=h(this);let n=this,o=0;if(t){for(;o<this.length&&!i.test(this[o].param);)o+=1;if(o>=this.length)return this.append(e)}let s=!1,a=0;for(const t in e){a+=1;const c={type:1,param:t,separator:" ",value:e[t],before:"",after:"\n"};i.test(t)?(n.splice(o,0,c),n=c.config=new p,s=!0):(a===Object.keys(e).length&&(c.after+="\n"),s?(c.before=r,n.push(c)):(n.splice(o,0,c),o+=1,l.test(t)&&(c.after+="\n")))}return n}static stringify(e){let t="";function r(e,t){return Array.isArray(e)?e.map((e=>r(e,o.test(e)))).join(" "):t?`"${e}"`:e}function n(e){const t=e.quoted||c.test(e.param)&&o.test(e.value),n=r(e.value,t);return`${e.param}${e.separator}${n}`}const s=e=>{t+=e.before,2===e.type?t+=e.content:1===e.type&&u.includes(e.param)?[].concat(e.value).forEach((function(r,o,s){t+=n({...e,value:r}),o<s.length-1&&(t+=`\n${e.before}`)})):1===e.type&&(t+=n(e)),t+=e.after,e.config&&e.config.forEach(s)};return e.forEach(s),t}static get DIRECTIVE(){return 1}static get COMMENT(){return 2}static parse(e){let t=0,r=l(),n=new p,c=n;function l(){return e[t++]}function u(){let e="";for(;o.test(r);)e+=r,r=l();return e}function d(){let e=u();return"="===r&&(e+=r,r=l()),e+u()}function h(){let e="",t=!1,n=!1;for(;r&&!s.test(r);)n?(e+='"'===r?r:`\\${r}`,n=!1):'"'!==r||e&&!t?"\\"===r?n=!0:e+=r:t=!t,r=l();if(t||n)throw new Error(`Unexpected line break at ${e}`);return e.trim()}function f(){const e=[];let t="",n=!1,o=!1;for(;r&&!s.test(r);)o?(t+='"'===r?r:`\\${r}`,o=!1):'"'===r?n=!n:"\\"===r?o=!0:n?t+=r:/[ \t]/.test(r)?t&&(e.push(t),t=""):t+=r,r=l();if(n||o)throw new Error(`Unexpected line break at ${e.concat(t).join(" ")}`);return t&&e.push(t),e.length>1?e:e[0]}function g(){const e=u(),t="#"===r?function(){let e="";for(;r&&!s.test(r);)e+=r,r=l();return{type:2,content:e}}():function(){const e=function(){let e="";for(;r&&/[^ \t=]/.test(r);)e+=r,r=l();return e}(),t=a.test(e),n={type:1,param:e,separator:d(),quoted:!t&&'"'===r,value:t?f():h()};return n.quoted||delete n.quoted,n}(),n=function(){let e="";for(;s.test(r);)e+=r,r=l();return e}();return t.before=e,t.after=n,t}for(;r;){let e=g();1===e.type&&i.test(e.param)?(n=c,n.push(e),n=e.config=new p):1!==e.type||e.param?n.push(e):n[n.length-1].after+=e.before}return c}}e.exports=p},91003:e=>{"use strict";function t(e,t){return e=function(e,t){for(let t of"\\()[]{}.+^$|")e=e.replace(new RegExp("\\"+t,"g"),"\\"+t);return e}(e),e=e.replace(/\*/g,".*").replace(/\?/g,".?"),new RegExp("^(?:"+e+")$").test(t)}e.exports=function(e,r){const n=Array.isArray(e)?e:e.split(/,/);let o=!1;for(const e of n){if("!"==e[0]&&t(e.slice(1),r))return!1;t(e,r)&&(o=!0)}return o}},50491:(e,t,r)=>{"use strict";const{Duplex:n,Readable:o,Writable:s}=r(12781),{CHANNEL_EXTENDED_DATATYPE:{STDERR:i}}=r(3190),{bufferSlice:a}=r(39205),c=2097152,l=1048576;class u extends o{constructor(e,t){super(t),this._channel=e}_read(e){this._channel._waitChanDrain&&(this._channel._waitChanDrain=!1,this._channel.incoming.window<=l&&f(this._channel))}}class d extends s{constructor(e){super({highWaterMark:c}),this._channel=e}_write(e,t,r){const n=this._channel,o=n._client._protocol,s=n.outgoing,c=s.packetSize,l=s.id;let u=s.window;const d=e.length;let h=0;if("open"===s.state){for(;d-h>0&&u>0;){let t=d-h;t>u&&(t=u),t>c&&(t=c),0===h&&t===d?o.channelExtData(l,e,i):o.channelExtData(l,a(e,h,h+t),i),h+=t,u-=t}if(s.window=u,d-h>0)return 0===u&&(n._waitWindow=!0),n._chunkErr=h>0?a(e,h,d):e,void(n._chunkcbErr=r);r()}}}function h(){this.eof(),!this.server&&this.allowHalfOpen||this.close(),this.writable=!1}function p(){this.readable=!1}function f(e){if("closed"===e.outgoing.state)return;const t=c-e.incoming.window;t<=0||(e.incoming.window+=t,e._client._protocol.channelWindowAdjust(e.outgoing.id,t))}e.exports={Channel:class extends n{constructor(e,t,r){const n={highWaterMark:c,allowHalfOpen:!r||r&&!1!==r.allowHalfOpen,emitClose:!1};super(n),this.allowHalfOpen=n.allowHalfOpen;const o=!(!r||!r.server);this.server=o,this.type=t.type,this.subtype=void 0,this.incoming=t.incoming,this.outgoing=t.outgoing,this._callbacks=[],this._client=e,this._hasX11=!1,this._exit={code:void 0,signal:void 0,dump:void 0,desc:void 0},this.stdin=this.stdout=this,this.stderr=o?new d(this):new u(this,n),this._waitWindow=!1,this._waitChanDrain=!1,this._chunk=void 0,this._chunkcb=void 0,this._chunkErr=void 0,this._chunkcbErr=void 0,this.on("finish",h).on("prefinish",h),this.on("end",p).on("close",p)}_read(e){this._waitChanDrain&&(this._waitChanDrain=!1,this.incoming.window<=l&&f(this))}_write(e,t,r){const n=this._client._protocol,o=this.outgoing,s=o.packetSize,i=o.id;let c=o.window;const l=e.length;let u=0;if("open"===o.state){for(;l-u>0&&c>0;){let t=l-u;t>c&&(t=c),t>s&&(t=s),0===u&&t===l?n.channelData(i,e):n.channelData(i,a(e,u,u+t)),u+=t,c-=t}if(o.window=c,l-u>0)return 0===c&&(this._waitWindow=!0),this._chunk=u>0?a(e,u,l):e,void(this._chunkcb=r);r()}}eof(){"open"===this.outgoing.state&&(this.outgoing.state="eof",this._client._protocol.channelEOF(this.outgoing.id))}close(){"open"!==this.outgoing.state&&"eof"!==this.outgoing.state||(this.outgoing.state="closing",this._client._protocol.channelClose(this.outgoing.id))}destroy(){return this.end(),this.close(),this}setWindow(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");"session"!==this.type||"shell"!==this.subtype&&"exec"!==this.subtype||!this.writable||"open"!==this.outgoing.state||this._client._protocol.windowChange(this.outgoing.id,e,t,r,n)}signal(e){if(this.server)throw new Error("Client-only method called in server mode");"session"===this.type&&this.writable&&"open"===this.outgoing.state&&this._client._protocol.signal(this.outgoing.id,e)}exit(e,t,r){if(!this.server)throw new Error("Server-only method called in client mode");"session"===this.type&&this.writable&&"open"===this.outgoing.state&&("number"==typeof e?this._client._protocol.exitStatus(this.outgoing.id,e):this._client._protocol.exitSignal(this.outgoing.id,e,t,r))}},MAX_WINDOW:c,PACKET_SIZE:32768,windowAdjust:f,WINDOW_THRESHOLD:l}},81119:(e,t,r)=>{"use strict";const{Socket:n}=r(41808),{Duplex:o}=r(12781),{resolve:s}=r(71017),{readFile:i}=r(57147),{execFile:a,spawn:c}=r(32081),{isParsedKey:l,parseKey:u}=r(13781),{makeBufferParser:d,readUInt32BE:h,writeUInt32BE:p,writeUInt32LE:f}=r(39205);function g(e){let t=!1;return(...r)=>{t||(t=!0,e(...r))}}function m(){}const y=Buffer.alloc(0),v=d();class _{getIdentities(e){e(new Error("Missing getIdentities() implementation"))}sign(e,t,r,n){"function"==typeof r&&(n=r),n(new Error("Missing sign() implementation"))}}class b extends _{constructor(e){super(),this.socketPath=e}getStream(e){e=g(e);const t=new n;function r(){try{t.destroy()}catch{}e(new Error("Failed to connect to agent"))}t.on("connect",(()=>{e(null,t)})),t.on("close",r).on("end",r).on("error",r),t.connect(this.socketPath)}getIdentities(e){e=g(e),this.getStream(((t,r)=>{function n(t){if(r)try{r.destroy()}catch{}t||(t=new Error("Failed to retrieve identities from agent")),e(t)}if(t)return n(t);const o=new T(!0);o.on("error",n),o.pipe(r).pipe(o),r.on("close",n).on("end",n).on("error",n),o.getIdentities(((t,o)=>{if(t)return n(t);try{r.destroy()}catch{}e(null,o)}))}))}sign(e,t,r,n){"function"==typeof r?(n=r,r=void 0):"object"==typeof r&&null!==r||(r=void 0),n=g(n),this.getStream(((o,s)=>{function i(e){if(s)try{s.destroy()}catch{}e||(e=new Error("Failed to sign data with agent")),n(e)}if(o)return i(o);const a=new T(!0);a.on("error",i),a.pipe(s).pipe(a),s.on("close",i).on("end",i).on("error",i),a.sign(e,t,r,((e,t)=>{if(e)return i(e);try{s.destroy()}catch{}n(null,t)}))}))}}const S=(()=>{const e=s(__dirname,"..","util/pagent.exe"),t={10:new Error("Invalid pagent.exe arguments"),11:new Error("Pageant is not running"),12:new Error("pagent.exe could not create an mmap"),13:new Error("pagent.exe could not set mode for stdin"),14:new Error("pagent.exe could not set mode for stdout"),15:new Error("pagent.exe did not get expected input payload")};function r(e){e.buffer=null,e.proc&&(e.proc.kill(),e.proc=void 0)}class n extends o{constructor(){super(),this.proc=void 0,this.buffer=null}_read(e){}_write(r,n,o){if(null===this.buffer)this.buffer=r;else{const e=Buffer.allocUnsafe(this.buffer.length+r.length);this.buffer.copy(e,0),r.copy(e,this.buffer.length),this.buffer=e}if(this.buffer.length<4)return o();const s=h(this.buffer,0);if(this.buffer.length-4<s)return o();if(r=this.buffer.slice(0,4+s),this.buffer.length>4+s)return o(new Error("Unexpected multiple agent requests"));let i;this.buffer=null;const a=this.proc=c(e,[r.length]);a.stdout.on("data",(e=>{this.push(e)})),a.on("error",(e=>{i=e,o(i)})),a.on("close",(e=>{if(this.proc=void 0,!i){if(i=t[e])return o(i);o()}})),a.stdin.end(r)}_final(e){r(this),e()}_destroy(e,t){r(this),t()}}return class extends b{getStream(e){e(null,new n)}}})(),E=(()=>{const e=/^!<socket >(\d+) s ([A-Z0-9]{8}-[A-Z0-9]{8}-[A-Z0-9]{8}-[A-Z0-9]{8})/;return class extends b{getStream(t){t=g(t);let r=this.socketPath,o=!1;i(r,(function s(c,l){if(c)return o?t(new Error("Invalid cygwin unix socket path")):void a("cygpath",["-w",r],((e,n,a)=>{if(e||0===n.length)return t(new Error("Invalid cygwin unix socket path"));o=!0,r=n.toString().replace(/[\r\n]/g,""),i(r,s)}));const u=e.exec(l.toString("ascii"));if(!u)return t(new Error("Malformed cygwin unix socket file"));let d,p=0,g=!1;const m=[];let y,v=Buffer.alloc(12);const _=parseInt(u[1],10),b=u[2].replace(/-/g,""),S=Buffer.allocUnsafe(16);for(let e=0,t=0;t<32;++e,t+=2)S[e]=parseInt(b.substring(t,t+2),16);for(let e=0;e<16;e+=4)f(S,h(S,e),e);function E(){p=0,d="secret",y.write(S)}function w(e){if(p+=e.length,"secret"!==d){if("creds"===d&&(g||m.push(e),12===p)){if(y.removeListener("connect",E),y.removeListener("data",w),y.removeListener("error",A),y.removeListener("end",A),y.removeListener("close",A),g)return t(null,y);g=!0,v=Buffer.concat(m),f(v,process.pid,0),y.on("error",(()=>{})),y.destroy(),T()}}else 16===p&&(p=0,d="creds",y.write(v))}function A(){t(new Error("Problem negotiating cygwin unix socket security"))}function T(){y=new n,y.on("connect",E),y.on("data",w),y.on("error",A),y.on("end",A),y.on("close",A),y.connect(_)}T()}))}}})(),w=/^[/\\][/\\]\.[/\\]pipe[/\\].+/;function A(e){return"win32"!==process.platform||w.test(e)?new b(e):"pageant"===e?new S:new E(e)}const T=(()=>{const e=Symbol("Inbound Request Type"),t=Symbol("Inbound Request Response"),r=Symbol("Inbound Request Context");class n{constructor(n,o){this[e]=n,this[t]=void 0,this[r]=o}hasResponded(){return void 0!==this[t]}getType(){return this[e]}getContext(){return this[r]}}function s(e,r,n){return r[t]=n,function(e){let r;for(;e[d].length;){const n=e[d][0][t];if(void 0===n)break;e[d].shift(),r=e.push(n)}return r}(e)}function i(e){if(e[g]=null,0===e[f]){const t=e[d];if(t&&t.length){e[d]=[];for(const e of t)e.cb(new Error("No reply from server"))}}try{e.end()}catch{}setImmediate((()=>{e[S]||e.emit("end"),e[b]||e.emit("close")}))}function a(){this[b]=!0}function c(){this[S]=!0}const d=Symbol("Requests"),f=Symbol("Agent Protocol Role"),g=Symbol("Agent Protocol Buffer"),_=Symbol("Agent Protocol Current Message Length"),b=Symbol("Agent Protocol Closed"),S=Symbol("Agent Protocol Ended");return class extends o{constructor(e){super({autoDestroy:!0,emitClose:!1}),this[f]=e?0:1,this[d]=[],this[g]=null,this[_]=-1,this.once("end",c),this.once("close",a)}_read(e){}_write(e,t,r){null===this[g]?this[g]=e:this[g]=function(e,t){const r=Buffer.allocUnsafe(e.length+t.length);return e.copy(r,0),t.copy(r,e.length),r}(this[g],e);let o=this[g],s=o.length,i=0;for(;i<s&&!(s<5)&&(-1===this[_]&&(this[_]=h(o,i)),!(s<4+this[_]));){const e=o[i+=4];if(++i,0===this[f]){if(0===this[d].length)return r(new Error("Received unexpected message from server"));const t=this[d].shift();switch(e){case 5:t.cb(new Error("Agent responded with failure"));break;case 12:{if(11!==t.type)return r(new Error("Agent responded with wrong message type"));v.init(o,i);const e=v.readUInt32BE();if(void 0===e)return v.clear(),r(new Error("Malformed agent response"));const n=[];for(let t=0;t<e;++t){let e=v.readString();if(void 0===e)return v.clear(),r(new Error("Malformed agent response"));const t=v.readString(!0);if(void 0===t)return v.clear(),r(new Error("Malformed agent response"));e=u(e),e instanceof Error||(e.comment=e.comment||t,n.push(e))}i=v.pos(),v.clear(),t.cb(null,n);break}case 14:{if(13!==t.type)return r(new Error("Agent responded with wrong message type"));v.init(o,i);let e=v.readString();if(i=v.pos(),v.clear(),void 0===e)return r(new Error("Malformed agent response"));if(v.init(e,0),v.readString(!0),e=v.readString(),v.clear(),void 0===e)return r(new Error("Malformed OpenSSH signature format"));t.cb(null,e);break}default:return r(new Error("Agent responded with unsupported message type"))}}else switch(e){case 11:{const t=new n(e);this[d].push(t),this.emit("identities",t);break}case 13:{v.init(o,i);let t=v.readString();const r=v.readString(),s=v.readUInt32BE();if(i=v.pos(),v.clear(),void 0===s){const t=new n(e);return this[d].push(t),this.failureReply(t)}if(t=u(t),t instanceof Error){const t=new n(e);return this[d].push(t),this.failureReply(t)}const a={hash:void 0};let c;"ssh-rsa"===t.type&&(2&s?(c="rsa-sha2-256",a.hash="sha256"):4&s&&(c="rsa-sha2-512",a.hash="sha512")),void 0===c&&(c=t.type);const l=new n(e,c);this[d].push(l),this.emit("sign",l,t,r,a);break}default:{const t=new n(e);this[d].push(t),this.failureReply(t)}}if(this[_]=-1,i===s){this[g]=null;break}this[g]=o=o.slice(i),s=o.length,i=0}r()}_destroy(e,t){i(this),t()}_final(e){i(this),e()}sign(e,t,r,n){if(0!==this[f])throw new Error("Client-only method called with server role");"function"==typeof r?(n=r,r=void 0):"object"==typeof r&&null!==r||(r=void 0);let o=0;if((e=u(e))instanceof Error)throw new Error("Invalid public key argument");if("ssh-rsa"===e.type&&r)switch(r.hash){case"sha256":o=2;break;case"sha512":o=4}const s=(e=e.getPublicSSH()).length,i=t.length;let a=0;const c=Buffer.allocUnsafe(9+s+4+i+4);return p(c,c.length-4,a),c[a+=4]=13,p(c,s,++a),e.copy(c,a+=4),p(c,i,a+=s),t.copy(c,a+=4),p(c,o,a+=i),"function"!=typeof n&&(n=m),this[d].push({type:13,cb:n}),this.push(c)}getIdentities(e){if(0!==this[f])throw new Error("Client-only method called with server role");let t=0;const r=Buffer.allocUnsafe(5);return p(r,r.length-4,t),r[t+=4]=11,"function"!=typeof e&&(e=m),this[d].push({type:11,cb:e}),this.push(r)}failureReply(e){if(1!==this[f])throw new Error("Server-only method called with client role");if(!(e instanceof n))throw new Error("Wrong request argument");if(e.hasResponded())return!0;let t=0;const r=Buffer.allocUnsafe(5);return p(r,r.length-4,t),r[t+=4]=5,s(this,e,r)}getIdentitiesReply(e,t){if(1!==this[f])throw new Error("Server-only method called with client role");if(!(e instanceof n))throw new Error("Wrong request argument");if(e.hasResponded())return!0;if(11!==e.getType())throw new Error("Invalid response to request");if(!Array.isArray(t))throw new Error("Keys argument must be an array");let r=4;const o=[];for(let e=0;e<t.length;++e){const n=t[e];if("object"!=typeof n||null===n)throw new Error(`Invalid key entry: ${n}`);let s,i;if(l(n))s=n;else if(l(n.pubKey))s=n.pubKey;else{if("object"!=typeof n.pubKey||null===n.pubKey)continue;if(({pubKey:s,comment:i}=n.pubKey),s=u(s),s instanceof Error)continue}i=s.comment||i,s=s.getPublicSSH(),r+=4+s.length,i&&"string"==typeof i?i=Buffer.from(i):Buffer.isBuffer(i)||(i=y),r+=4+i.length,o.push({pubKey:s,comment:i})}let i=0;const a=Buffer.allocUnsafe(5+r);p(a,a.length-4,i),a[i+=4]=12,p(a,o.length,++i),i+=4;for(let e=0;e<o.length;++e){const{pubKey:t,comment:r}=o[e];p(a,t.length,i),t.copy(a,i+=4),p(a,r.length,i+=t.length),i+=4,r.length&&(r.copy(a,i),i+=r.length)}return s(this,e,a)}signReply(e,t){if(1!==this[f])throw new Error("Server-only method called with client role");if(!(e instanceof n))throw new Error("Wrong request argument");if(e.hasResponded())return!0;if(13!==e.getType())throw new Error("Invalid response to request");if(!Buffer.isBuffer(t))throw new Error("Signature argument must be a Buffer");if(0===t.length)throw new Error("Signature argument must be non-empty");let r=0;const o=e.getContext(),i=Buffer.byteLength(o),a=Buffer.allocUnsafe(13+i+4+t.length);return p(a,a.length-4,r),a[r+=4]=14,p(a,4+i+4+t.length,++r),p(a,i,r+=4),a.utf8Write(o,r+=4,i),p(a,t.length,r+=i),t.copy(a,r+=4),s(this,e,a)}}})(),C=Symbol("Agent"),I=Symbol("Agent Keys"),R=Symbol("Agent Keys Index"),O=Symbol("Agent Init Callbacks");function k(e){return e instanceof _}e.exports={AgentContext:class{constructor(e){if("string"==typeof e)e=A(e);else if(!k(e))throw new Error("Invalid agent argument");this[C]=e,this[I]=null,this[R]=-1,this[O]=null}init(e){if("function"!=typeof e&&(e=m),null===this[I])if(null===this[O]){this[O]=[e];const t=(...e)=>{process.nextTick((()=>{const t=this[O];this[O]=null;for(const r of t)r(...e)}))};this[C].getIdentities(g(((e,r)=>{if(e)return t(e);if(!Array.isArray(r))return t(new Error("Agent implementation failed to provide keys"));const n=[];for(let e of r)e=u(e),e instanceof Error||n.push(e);this[I]=n,this[R]=-1,t()})))}else this[O].push(e);else process.nextTick(e)}nextKey(){return!(null===this[I]||++this[R]>=this[I].length)&&this[I][this[R]]}currentKey(){return null===this[I]||this[R]>=this[I].length?null:this[I][this[R]]}pos(){return null===this[I]||this[R]>=this[I].length?-1:this[R]}reset(){this[R]=-1}sign(...e){this[C].sign(...e)}},AgentProtocol:T,BaseAgent:_,createAgent:A,CygwinAgent:E,isAgent:k,OpenSSHAgent:b,PageantAgent:S}},92353:(e,t,r)=>{"use strict";const{createHash:n,getHashes:o,randomFillSync:s}=r(6113),{Socket:i}=r(41808),{lookup:a}=r(9523),c=r(82361),l=o(),{COMPAT:u,CHANNEL_EXTENDED_DATATYPE:{STDERR:d},CHANNEL_OPEN_FAILURE:h,DEFAULT_CIPHER:p,DEFAULT_COMPRESSION:f,DEFAULT_KEX:g,DEFAULT_MAC:m,DEFAULT_SERVER_HOST_KEY:y,DISCONNECT_REASON:v,DISCONNECT_REASON_BY_VALUE:_,SUPPORTED_CIPHER:b,SUPPORTED_COMPRESSION:S,SUPPORTED_KEX:E,SUPPORTED_MAC:w,SUPPORTED_SERVER_HOST_KEY:A}=r(3190),{init:T}=r(38545),C=r(53603),{parseKey:I}=r(13781),{SFTP:R}=r(64061),{bufferCopy:O,makeBufferParser:k,makeError:N,readUInt32BE:P,sigSSHToASN1:M,writeUInt32BE:L}=r(39205),{AgentContext:B,createAgent:D,isAgent:x}=r(81119),{Channel:U,MAX_WINDOW:j,PACKET_SIZE:F,windowAdjust:H,WINDOW_THRESHOLD:W}=r(50491),{ChannelManager:q,generateAlgorithmList:z,isWritable:G,onChannelOpenFailure:$,onCHANNEL_CLOSE:V}=r(17236),J=k(),K=k(),Q=/^OpenSSH_(?:(?![0-4])\d)|(?:\d{2,})/,Y=e=>{};function X(e,t,r,n){const o=j,s=F;"function"==typeof r&&(n=r,r={});const i=(e,t)=>{n(e,t)};i.type=t;const a=e._chanMgr.add(i);if(-1!==a)switch(t){case"session":case"sftp":e._protocol.session(a,o,s);break;case"direct-tcpip":e._protocol.directTcpip(a,o,s,r);break;case"direct-streamlocal@openssh.com":e._protocol.openssh_directStreamLocal(a,o,s,r);break;default:throw new Error(`Unsupported channel type: ${t}`)}else n(new Error("No free channels available"))}function Z(e,t,r){const n={single:!1,protocol:"MIT-MAGIC-COOKIE-1",cookie:void 0,screen:0};"function"==typeof t?r=t:"object"==typeof t&&null!==t&&("boolean"==typeof t.single&&(n.single=t.single),"number"==typeof t.screen&&(n.screen=t.screen),"string"==typeof t.protocol&&(n.protocol=t.protocol),"string"==typeof t.cookie?n.cookie=t.cookie:Buffer.isBuffer(t.cookie)&&(n.cookie=t.cookie.hexSlice(0,t.cookie.length))),void 0===n.cookie&&(n.cookie=oe());const o="function"==typeof r;"open"===e.outgoing.state?(o&&e._callbacks.push((t=>{t?r(!0!==t?t:new Error("Unable to request X11")):(e._hasX11=!0,++e._client._acceptX11,e.once("close",(()=>{e._client._acceptX11&&--e._client._acceptX11})),r())})),e._client._protocol.x11Forward(e.outgoing.id,n,o)):o&&r(new Error("Channel is not open"))}function ee(e,t,r){let n=24,o=80,s=640,i=480,a="vt100",c=null;"function"==typeof t?r=t:"object"==typeof t&&null!==t&&("number"==typeof t.rows&&(n=t.rows),"number"==typeof t.cols&&(o=t.cols),"number"==typeof t.width&&(s=t.width),"number"==typeof t.height&&(i=t.height),"string"==typeof t.term&&(a=t.term),"object"==typeof t.modes&&(c=t.modes));const l="function"==typeof r;"open"===e.outgoing.state?(l&&e._callbacks.push((e=>{e?r(!0!==e?e:new Error("Unable to request a pseudo-terminal")):r()})),e._client._protocol.pty(e.outgoing.id,n,o,i,s,a,c,l)):l&&r(new Error("Channel is not open"))}function te(e,t){const r="function"==typeof t;"open"===e.outgoing.state?e._client._agentFwdEnabled?r&&t(!1):(e._client._agentFwdEnabled=!0,e._callbacks.push((n=>{if(n)return e._client._agentFwdEnabled=!1,void(r&&t(!0!==n?n:new Error("Unable to request agent forwarding")));r&&t()})),e._client._protocol.openssh_agentForward(e.outgoing.id,!0)):r&&t(new Error("Channel is not open"))}function re(e,t){if("open"!==e.outgoing.state)return;const r=Object.keys(t||{});for(let n=0;n<r.length;++n){const o=r[n],s=t[o];e._client._protocol.env(e.outgoing.id,o,s,!1)}}function ne(e,t,r){"open"===e.outgoing.state?(e._callbacks.push((n=>{n?r(!0!==n?n:new Error(`Unable to start subsystem: ${t}`)):(e.subtype="subsystem",r(void 0,e))})),e._client._protocol.subsystem(e.outgoing.id,t,!0)):r(new Error("Channel is not open"))}const oe=(()=>{const e=Buffer.allocUnsafe(16);return()=>(s(e,0,16),e.hexSlice(0,16))})();function se(e){if(!Array.isArray(e))throw new Error("authList must be an array");let t=0;return(r,n,o)=>t!==e.length&&e[t++]}e.exports=class extends c{constructor(){super(),this.config={host:void 0,port:void 0,localAddress:void 0,localPort:void 0,forceIPv4:void 0,forceIPv6:void 0,keepaliveCountMax:void 0,keepaliveInterval:void 0,readyTimeout:void 0,ident:void 0,username:void 0,password:void 0,privateKey:void 0,tryKeyboard:void 0,agent:void 0,allowAgentFwd:void 0,authHandler:void 0,hostHashAlgo:void 0,hostHashCb:void 0,strictVendor:void 0,debug:void 0},this._agent=void 0,this._readyTimeout=void 0,this._chanMgr=void 0,this._callbacks=void 0,this._forwarding=void 0,this._forwardingUnix=void 0,this._acceptX11=void 0,this._agentFwdEnabled=void 0,this._remoteVer=void 0,this._protocol=void 0,this._sock=void 0,this._resetKA=void 0}connect(e){if(this._sock&&G(this._sock))return this.once("close",(()=>{this.connect(e)})),this.end(),this;this.config.host=e.hostname||e.host||"localhost",this.config.port=e.port||22,this.config.localAddress="string"==typeof e.localAddress?e.localAddress:void 0,this.config.localPort="string"==typeof e.localPort||"number"==typeof e.localPort?e.localPort:void 0,this.config.forceIPv4=e.forceIPv4||!1,this.config.forceIPv6=e.forceIPv6||!1,this.config.keepaliveCountMax="number"==typeof e.keepaliveCountMax&&e.keepaliveCountMax>=0?e.keepaliveCountMax:3,this.config.keepaliveInterval="number"==typeof e.keepaliveInterval&&e.keepaliveInterval>0?e.keepaliveInterval:0,this.config.readyTimeout="number"==typeof e.readyTimeout&&e.readyTimeout>=0?e.readyTimeout:2e4,this.config.ident="string"==typeof e.ident||Buffer.isBuffer(e.ident)?e.ident:void 0;const t={kex:void 0,serverHostKey:void 0,cs:{cipher:void 0,mac:void 0,compress:void 0,lang:[]},sc:void 0};let r=!0;if("object"==typeof e.algorithms&&null!==e.algorithms&&(t.kex=z(e.algorithms.kex,g,E),t.kex!==g&&(r=!1),t.serverHostKey=z(e.algorithms.serverHostKey,y,A),t.serverHostKey!==y&&(r=!1),t.cs.cipher=z(e.algorithms.cipher,p,b),t.cs.cipher!==p&&(r=!1),t.cs.mac=z(e.algorithms.hmac,m,w),t.cs.mac!==m&&(r=!1),t.cs.compress=z(e.algorithms.compress,f,S),t.cs.compress!==f&&(r=!1),r||(t.sc=t.cs)),"string"==typeof e.username)this.config.username=e.username;else{if("string"!=typeof e.user)throw new Error("Invalid username");this.config.username=e.user}this.config.password="string"==typeof e.password?e.password:void 0,this.config.privateKey="string"==typeof e.privateKey||Buffer.isBuffer(e.privateKey)?e.privateKey:void 0,this.config.localHostname="string"==typeof e.localHostname?e.localHostname:void 0,this.config.localUsername="string"==typeof e.localUsername?e.localUsername:void 0,this.config.tryKeyboard=!0===e.tryKeyboard,"string"==typeof e.agent&&e.agent.length?this.config.agent=D(e.agent):x(e.agent)?this.config.agent=e.agent:this.config.agent=void 0,this.config.allowAgentFwd=!0===e.agentForward&&void 0!==this.config.agent;let o=this.config.authHandler="function"==typeof e.authHandler||Array.isArray(e.authHandler)?e.authHandler:void 0;this.config.strictVendor="boolean"!=typeof e.strictVendor||e.strictVendor;const s=this.config.debug="function"==typeof e.debug?e.debug:void 0;if(!0===e.agentForward&&!this.config.allowAgentFwd)throw new Error("You must set a valid agent path to allow agent forwarding");let c,u,k=this._callbacks=[];if(this._chanMgr=new q(this),this._forwarding={},this._forwardingUnix={},this._acceptX11=0,this._agentFwdEnabled=!1,this._agent=this.config.agent?this.config.agent:void 0,this._remoteVer=void 0,this.config.privateKey){if(c=I(this.config.privateKey,e.passphrase),c instanceof Error)throw new Error(`Cannot parse privateKey: ${c.message}`);if(Array.isArray(c)&&(c=c[0]),null===c.getPrivatePEM())throw new Error("privateKey value does not contain a (valid) private key")}if("function"==typeof e.hostVerifier){const t=e.hostVerifier;let r;-1!==l.indexOf(e.hostHash)&&(r=n(e.hostHash)),u=(e,n)=>{r&&(r.update(e),e=r.digest("hex"));const o=t(e,n);void 0!==o&&n(o)}}const P=this._sock=e.sock||new i;let X=!1,Z=!1;this._protocol&&this._protocol.cleanup();const ee=s?(e,t,r)=>{s(`Debug output from server: ${JSON.stringify(r)}`)}:void 0,te=this._protocol=new C({ident:this.config.ident,offer:r?void 0:t,onWrite:e=>{G(P)&&P.write(e)},onError:e=>{"handshake"===e.level&&clearTimeout(this._readyTimeout),te._destruct||P.removeAllListeners("data"),this.emit("error",e);try{P.end()}catch{}},onHeader:e=>{Z=!0,this._remoteVer=e.versions.software,e.greeting&&this.emit("greeting",e.greeting)},onHandshakeComplete:e=>{this.emit("handshake",e),X||(X=!0,te.service("ssh-userauth"))},debug:s,hostVerifier:u,messageHandlers:{DEBUG:ee,DISCONNECT:(e,t,r)=>{if(t!==v.BY_APPLICATION){r||void 0===(r=_[t])&&(r=`Unexpected disconnection reason: ${t}`);const e=new Error(r);e.code=t,this.emit("error",e)}P.end()},SERVICE_ACCEPT:(e,t)=>{"ssh-userauth"===t&&_e()},USERAUTH_BANNER:(e,t)=>{this.emit("banner",t)},USERAUTH_SUCCESS:e=>{ce(),clearTimeout(this._readyTimeout),this.emit("ready")},USERAUTH_FAILURE:(e,t,r)=>{if("agent"===de.type){const e=de.agentCtx.pos();return s&&s(`Client: Agent key #${e+1} failed`),be()}s&&s(`Client: ${de.type} auth failed`),pe=r,fe=t,_e()},USERAUTH_PASSWD_CHANGEREQ:(e,t)=>{"password"===de.type&&this.emit("change password",t,(e=>{te.authPassword(this.config.username,this.config.password,e)}))},USERAUTH_PK_OK:e=>{if("agent"===de.type){const e=de.agentCtx.currentKey();te.authPK(de.username,e,((t,r)=>{de.agentCtx.sign(e,t,{},((e,t)=>{if(!e)return r(t);e.level="agent",this.emit("error",e),be()}))}))}else"publickey"===de.type&&te.authPK(de.username,de.key,((e,t)=>{const r=de.key.sign(e);if(r instanceof Error)return r.message=`Error signing data with key: ${r.message}`,r.level="client-authentication",this.emit("error",r),_e();t(r)}))},USERAUTH_INFO_REQUEST:(e,t,r,n)=>{if("keyboard-interactive"===de.type){if(0===(Array.isArray(n)?n.length:0))return s&&s("Client: Sending automatic USERAUTH_INFO_RESPONSE"),void te.authInfoRes();de.prompt(t,r,"",n,(e=>{te.authInfoRes(e)}))}},REQUEST_SUCCESS:(e,t)=>{k.length&&k.shift()(!1,t)},REQUEST_FAILURE:e=>{k.length&&k.shift()(!0)},GLOBAL_REQUEST:(e,t,r,n)=>{"hostkeys-00@openssh.com"===t?(!function(e,t,r){if(!e._sock||!G(e._sock))return;if("function"!=typeof r&&(r=Y),!Array.isArray(t))throw new TypeError("Invalid keys argument type");const n=[];for(const e of t){const t=I(e);if(t instanceof Error)throw t;n.push(t)}if(!e.config.strictVendor||e.config.strictVendor&&Q.test(e._remoteVer))return e._callbacks.push(((t,o)=>{if(t)return void r(!0!==t?t:new Error("Server failed to prove supplied keys"));const s=[];let i=0;for(J.init(o,0);J.avail()&&i!==n.length;){const t=n[i++],r=t.getPublicSSH(),o=J.readString();K.init(o,0);const a=K.readString(!0);let c,l=K.readString();if(a!==t.type){if("ssh-rsa"!==t.type)continue;switch(a){case"rsa-sha2-256":c="sha256";break;case"rsa-sha2-512":c="sha512";break;default:continue}}const u=e._protocol._kex.sessionID,d=Buffer.allocUnsafe(37+u.length+4+r.length);let h=0;L(d,29,h),d.utf8Write("hostkeys-prove-00@openssh.com",h+=4,29),L(d,u.length,h+=29),O(u,d,0,u.length,h+=4),L(d,r.length,h+=u.length),O(r,d,0,r.length,h+=4),(l=M(l,a))&&!0===t.verify(d,l,c)&&s.push(t)}K.clear(),J.clear(),r(null,s)})),void e._protocol.openssh_hostKeysProve(n);process.nextTick(r,new Error("strictVendor enabled and server is not OpenSSH or compatible version"))}(this,n,((e,t)=>{e||this.emit("hostkeys",t)})),r&&te.requestSuccess()):r&&te.requestFailure()},CHANNEL_OPEN:(e,t)=>{!function(e,t){let r,n=-1;const o=()=>{const r={type:t.type,incoming:{id:n,window:j,packetSize:F,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}},o=new U(e,r);return e._chanMgr.update(n,o),e._protocol.channelOpenConfirm(t.sender,n,j,F),o},s=()=>{void 0===r&&(r=-1===n?h.RESOURCE_SHORTAGE:h.CONNECT_FAILED),-1!==n&&e._chanMgr.remove(n),e._protocol.channelOpenFail(t.sender,r,"")},i=()=>(n=e._chanMgr.add(),-1===n&&(r=h.RESOURCE_SHORTAGE,e.config.debug&&e.config.debug("Client: Automatic rejection of incoming channel open: no channels available")),-1!==n),a=t.data;switch(t.type){case"forwarded-tcpip":{const t=e._forwarding[`${a.destIP}:${a.destPort}`];if(void 0!==t&&i())return 0===a.destPort&&(a.destPort=t),void e.emit("tcp connection",a,o,s);break}case"forwarded-streamlocal@openssh.com":if(void 0!==e._forwardingUnix[a.socketPath]&&i())return void e.emit("unix connection",a,o,s);break;case"auth-agent@openssh.com":if(e._agentFwdEnabled&&"function"==typeof e._agent.getStream&&i())return void e._agent.getStream(((e,t)=>{if(e)return s();const r=o();r.pipe(t).pipe(r)}));break;case"x11":if(0!==e._acceptX11&&i())return void e.emit("x11",a,o,s);break;default:r=h.UNKNOWN_CHANNEL_TYPE,e.config.debug&&e.config.debug(`Client: Automatic rejection of unsupported incoming channel open type: ${t.type}`)}void 0===r&&(r=h.ADMINISTRATIVELY_PROHIBITED,e.config.debug&&e.config.debug("Client: Automatic rejection of unexpected incoming channel open for: "+t.type)),s()}(this,t)},CHANNEL_OPEN_CONFIRMATION:(e,t)=>{const r=this._chanMgr.get(t.recipient);if("function"!=typeof r)return;const n="sftp"===r.type,o={type:n?"session":r.type,incoming:{id:t.recipient,window:j,packetSize:F,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}},i=n?new R(this,o,{debug:s}):new U(this,o);this._chanMgr.update(t.recipient,i),r(void 0,i)},CHANNEL_OPEN_FAILURE:(e,t,r,n)=>{const o=this._chanMgr.get(t);"function"==typeof o&&$(this,t,{reason:r,description:n},o)},CHANNEL_DATA:(e,t,r)=>{const n=this._chanMgr.get(t);"object"==typeof n&&null!==n&&0!==n.incoming.window&&(n.incoming.window-=r.length,!1!==n.push(r)?n.incoming.window<=W&&H(n):n._waitChanDrain=!0)},CHANNEL_EXTENDED_DATA:(e,t,r,n)=>{if(n!==d)return;const o=this._chanMgr.get(t);"object"==typeof o&&null!==o&&0!==o.incoming.window&&(o.incoming.window-=r.length,o.stderr.push(r)?o.incoming.window<=W&&H(o):o._waitChanDrain=!0)},CHANNEL_WINDOW_ADJUST:(e,t,r)=>{const n=this._chanMgr.get(t);"object"==typeof n&&null!==n&&(n.outgoing.window+=r,n._waitWindow&&(n._waitWindow=!1,n._chunk?n._write(n._chunk,null,n._chunkcb):n._chunkcb?n._chunkcb():n._chunkErr?n.stderr._write(n._chunkErr,null,n._chunkcbErr):n._chunkcbErr&&n._chunkcbErr()))},CHANNEL_SUCCESS:(e,t)=>{const r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&(this._resetKA(),r._callbacks.length&&r._callbacks.shift()(!1))},CHANNEL_FAILURE:(e,t)=>{const r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&(this._resetKA(),r._callbacks.length&&r._callbacks.shift()(!0))},CHANNEL_REQUEST:(e,t,r,n,o)=>{const s=this._chanMgr.get(t);if("object"!=typeof s||null===s)return;const i=s._exit;if(void 0===i.code){switch(r){case"exit-status":return void s.emit("exit",i.code=o);case"exit-signal":return void s.emit("exit",i.code=null,i.signal=`SIG${o.signal}`,i.dump=o.coreDumped,i.desc=o.errorMessage)}n&&e.channelFailure(s.outgoing.id)}},CHANNEL_EOF:(e,t)=>{const r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&"open"===r.incoming.state&&(r.incoming.state="eof",r.readable&&r.push(null),r.stderr.readable&&r.stderr.push(null))},CHANNEL_CLOSE:(e,t)=>{V(this,t,this._chanMgr.get(t))}}});P.pause();const re=this.config.keepaliveInterval,ne=this.config.keepaliveCountMax;let oe,ie=0;const ae=()=>{if(++ie>ne){if(clearInterval(oe),P.readable){const e=new Error("Keepalive timeout");e.level="client-timeout",this.emit("error",e),P.destroy()}}else G(P)?(k.push(ce),te.ping()):clearInterval(oe)};function ce(){re>0&&(ie=0,clearInterval(oe),G(P)&&(oe=setInterval(ae,re)))}this._resetKA=ce;const le=(()=>{let e=!1;return()=>{if(!e&&(e=!0,he&&!Z)){const e=N("Connection lost before handshake","protocol",!0);this.emit("error",e)}}})(),ue=(()=>{let e=!1;return()=>{e||(e=!0,he=!0,s&&s("Socket connected"),this.emit("connect"),T.then((()=>{te.start(),P.on("data",(e=>{try{te.parse(e,0,e.length)}catch(e){this.emit("error",e);try{G(P)&&P.end()}catch{}}})),P.stderr&&"function"==typeof P.stderr.resume&&P.stderr.resume(),P.resume()})).catch((e=>{this.emit("error",e);try{G(P)&&P.end()}catch{}})))}})();let de,he=!1;P.on("connect",ue).on("timeout",(()=>{this.emit("timeout")})).on("error",(e=>{s&&s(`Socket error: ${e.message}`),clearTimeout(this._readyTimeout),e.level="client-socket",this.emit("error",e)})).on("end",(()=>{s&&s("Socket ended"),le(),te.cleanup(),clearTimeout(this._readyTimeout),clearInterval(oe),this.emit("end")})).on("close",(()=>{s&&s("Socket closed"),le(),te.cleanup(),clearTimeout(this._readyTimeout),clearInterval(oe),this.emit("close");const e=k;k=this._callbacks=[];const t=new Error("No response from server");for(let r=0;r<e.length;++r)e[r](t);this._chanMgr.cleanup(t)}));let pe=null,fe=null;const ge=["none"];void 0!==this.config.password&&ge.push("password"),void 0!==c&&ge.push("publickey"),void 0!==this._agent&&ge.push("agent"),this.config.tryKeyboard&&ge.push("keyboard-interactive"),void 0!==c&&void 0!==this.config.localHostname&&void 0!==this.config.localUsername&&ge.push("hostbased"),Array.isArray(o)?o=se(o):"function"!=typeof o&&(o=se(ge));let me=!1;const ye=e=>{if(!me){if(me=!0,!1===e){const e=new Error("All configured authentication methods failed");return e.level="client-authentication",this.emit("error",e),void this.end()}if("string"==typeof e){const t=e;if(-1===ge.indexOf(t))return ve(`Authentication method not allowed: ${t}`);const r=this.config.username;switch(t){case"password":e={type:t,username:r,password:this.config.password};break;case"publickey":e={type:t,username:r,key:c};break;case"hostbased":e={type:t,username:r,key:c,localHostname:this.config.localHostname,localUsername:this.config.localUsername};break;case"agent":e={type:t,username:r,agentCtx:new B(this._agent)};break;case"keyboard-interactive":e={type:t,username:r,prompt:(...e)=>this.emit("keyboard-interactive",...e)};break;case"none":e={type:t,username:r};break;default:return ve(`Skipping unsupported authentication method: ${e}`)}}else{if("object"!=typeof e||null===e)return ve(`Skipping invalid authentication attempt: ${e}`);{const t=e.username;if("string"!=typeof t)return ve(`Skipping invalid authentication attempt: ${e}`);const r=e.type;switch(r){case"password":{const{password:n}=e;if("string"!=typeof n&&!Buffer.isBuffer(n))return ve("Skipping invalid password auth attempt");e={type:r,username:t,password:n};break}case"publickey":{const n=I(e.key,e.passphrase);if(n instanceof Error)return ve("Skipping invalid key auth attempt");if(!n.isPrivateKey())return ve("Skipping non-private key");e={type:r,username:t,key:n};break}case"hostbased":{const{localHostname:n,localUsername:o}=e,s=I(e.key,e.passphrase);if(s instanceof Error||"string"!=typeof n||"string"!=typeof o)return ve("Skipping invalid hostbased auth attempt");if(!s.isPrivateKey())return ve("Skipping non-private key");e={type:r,username:t,key:s,localHostname:n,localUsername:o};break}case"agent":{let n=e.agent;if("string"==typeof n&&n.length)n=D(n);else if(!x(n))return ve(`Skipping invalid agent: ${e.agent}`);e={type:r,username:t,agentCtx:new B(n)};break}case"keyboard-interactive":{const{prompt:n}=e;if("function"!=typeof n)return ve("Skipping invalid keyboard-interactive auth attempt");e={type:r,username:t,prompt:n};break}case"none":e={type:r,username:t};break;default:return ve(`Skipping unsupported authentication method: ${e}`)}}}de=e;try{const e=de.username;switch(de.type){case"password":te.authPassword(e,de.password);break;case"publickey":te.authPK(e,de.key);break;case"hostbased":te.authHostbased(e,de.key,de.localHostname,de.localUsername,((e,t)=>{const r=de.key.sign(e);if(r instanceof Error)return r.message=`Error while signing with key: ${r.message}`,r.level="client-authentication",this.emit("error",r),_e();t(r)}));break;case"agent":de.agentCtx.init((e=>{if(e)return e.level="agent",this.emit("error",e),_e();be()}));break;case"keyboard-interactive":te.authKeyboard(e);break;case"none":te.authNone(e)}}finally{me=!1}}};function ve(e){s&&s(e),process.nextTick(_e)}function _e(){me=!1;const e=o(fe,pe,ye);me||void 0===e||ye(e)}const be=()=>{if("agent"===de.type){const e=de.agentCtx.nextKey();if(!1===e)s&&s("Agent: No more keys left to try"),s&&s("Client: agent auth failed"),_e();else{const t=de.agentCtx.pos();s&&s(`Agent: Trying key #${t+1}`),te.authPK(de.username,e)}}},Se=()=>{this.config.readyTimeout>0&&(this._readyTimeout=setTimeout((()=>{const e=new Error("Timed out while waiting for handshake");e.level="client-timeout",this.emit("error",e),P.destroy()}),this.config.readyTimeout))};if(e.sock)Se(),"boolean"==typeof P.connecting&&P.connecting||ue();else{let t=this.config.host;const r=this.config.forceIPv4,n=this.config.forceIPv6;s&&s(`Client: Trying ${t} on port ${this.config.port} ...`);const o=()=>{Se(),P.connect({host:t,port:this.config.port,localAddress:this.config.localAddress,localPort:this.config.localPort}),P.setNoDelay(!0),P.setMaxListeners(0),P.setTimeout("number"==typeof e.timeout?e.timeout:0)};!r&&!n||r&&n?o():a(t,r?4:6,((e,n,s)=>{if(e){const n=new Error(`Error while looking up ${r?"IPv4":"IPv6"} address for '${t}': ${e}`);return clearTimeout(this._readyTimeout),n.level="client-dns",this.emit("error",n),void this.emit("close")}t=n,o()}))}return this}end(){return this._sock&&G(this._sock)&&(this._protocol.disconnect(v.BY_APPLICATION),this._sock.end()),this}destroy(){return this._sock&&G(this._sock)&&this._sock.destroy(),this}exec(e,t,r){if(!this._sock||!G(this._sock))throw new Error("Not connected");return"function"==typeof t&&(r=t,t={}),X(this,"session",{allowHalfOpen:!1!==t.allowHalfOpen},((n,o)=>{if(n)return void r(n);const s=[];function i(e){if(e)return o.close(),void r(e);s.length&&s.shift()()}(!0===this.config.allowAgentFwd||t&&!0===t.agentForward&&void 0!==this._agent)&&s.push((()=>te(o,i))),"object"==typeof t&&null!==t&&("object"==typeof t.env&&null!==t.env&&re(o,t.env),("object"==typeof t.pty&&null!==t.pty||!0===t.pty)&&s.push((()=>ee(o,t.pty,i))),("object"==typeof t.x11&&null!==t.x11||"number"===t.x11||!0===t.x11)&&s.push((()=>Z(o,t.x11,i)))),s.push((()=>function(e,t,r,n){"open"===e.outgoing.state?(e._callbacks.push((t=>{t?n(!0!==t?t:new Error("Unable to exec")):(e.subtype="exec",e.allowHalfOpen=!1!==r.allowHalfOpen,n(void 0,e))})),e._client._protocol.exec(e.outgoing.id,t,!0)):n(new Error("Channel is not open"))}(o,e,t,r))),s.shift()()})),this}shell(e,t,r){if(!this._sock||!G(this._sock))throw new Error("Not connected");return"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),!e||void 0===e.x11&&void 0===e.env||(t=e,e=void 0),X(this,"session",((n,o)=>{if(n)return void r(n);const s=[];function i(e){if(e)return o.close(),void r(e);s.length&&s.shift()()}(!0===this.config.allowAgentFwd||t&&!0===t.agentForward&&void 0!==this._agent)&&s.push((()=>te(o,i))),!1!==e&&s.push((()=>ee(o,e,i))),"object"==typeof t&&null!==t&&("object"==typeof t.env&&null!==t.env&&re(o,t.env),("object"==typeof t.x11&&null!==t.x11||"number"===t.x11||!0===t.x11)&&s.push((()=>Z(o,t.x11,i)))),s.push((()=>function(e,t){"open"===e.outgoing.state?(e._callbacks.push((r=>{r?t(!0!==r?r:new Error("Unable to open shell")):(e.subtype="shell",t(void 0,e))})),e._client._protocol.shell(e.outgoing.id,!0)):t(new Error("Channel is not open"))}(o,r))),s.shift()()})),this}subsys(e,t){if(!this._sock||!G(this._sock))throw new Error("Not connected");return X(this,"session",((r,n)=>{r?t(r):ne(n,e,((e,r)=>{e?t(e):t(void 0,r)}))})),this}forwardIn(e,t,r){if(!this._sock||!G(this._sock))throw new Error("Not connected");const n="function"==typeof r;return n&&this._callbacks.push(((n,o)=>{if(n)return void r(!0!==n?n:new Error(`Unable to bind to ${e}:${t}`));let s=t;0===t&&o&&o.length>=4&&(s=P(o,0),this._protocol._compatFlags&u.DYN_RPORT_BUG||(t=s)),this._forwarding[`${e}:${t}`]=s,r(void 0,s)})),this._protocol.tcpipForward(e,t,n),this}unforwardIn(e,t,r){if(!this._sock||!G(this._sock))throw new Error("Not connected");const n="function"==typeof r;return n&&this._callbacks.push((n=>{n?r(!0!==n?n:new Error(`Unable to unbind from ${e}:${t}`)):(delete this._forwarding[`${e}:${t}`],r())})),this._protocol.cancelTcpipForward(e,t,n),this}forwardOut(e,t,r,n,o){if(!this._sock||!G(this._sock))throw new Error("Not connected");return"function"!=typeof o&&(o=Y),X(this,"direct-tcpip",{srcIP:e,srcPort:t,dstIP:r,dstPort:n},o),this}openssh_noMoreSessions(e){if(!this._sock||!G(this._sock))throw new Error("Not connected");const t="function"==typeof e;return!this.config.strictVendor||this.config.strictVendor&&Q.test(this._remoteVer)?(t&&this._callbacks.push((t=>{t?e(!0!==t?t:new Error("Unable to disable future sessions")):e()})),this._protocol.openssh_noMoreSessions(t),this):t?(process.nextTick(e,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this):this}openssh_forwardInStreamLocal(e,t){if(!this._sock||!G(this._sock))throw new Error("Not connected");const r="function"==typeof t;return!this.config.strictVendor||this.config.strictVendor&&Q.test(this._remoteVer)?(r&&this._callbacks.push((r=>{r?t(!0!==r?r:new Error(`Unable to bind to ${e}`)):(this._forwardingUnix[e]=!0,t())})),this._protocol.openssh_streamLocalForward(e,r),this):r?(process.nextTick(t,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this):this}openssh_unforwardInStreamLocal(e,t){if(!this._sock||!G(this._sock))throw new Error("Not connected");const r="function"==typeof t;return!this.config.strictVendor||this.config.strictVendor&&Q.test(this._remoteVer)?(r&&this._callbacks.push((r=>{r?t(!0!==r?r:new Error(`Unable to unbind from ${e}`)):(delete this._forwardingUnix[e],t())})),this._protocol.openssh_cancelStreamLocalForward(e,r),this):r?(process.nextTick(t,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this):this}openssh_forwardOutStreamLocal(e,t){if(!this._sock||!G(this._sock))throw new Error("Not connected");return"function"!=typeof t&&(t=Y),!this.config.strictVendor||this.config.strictVendor&&Q.test(this._remoteVer)?(X(this,"direct-streamlocal@openssh.com",{socketPath:e},t),this):(process.nextTick(t,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this)}sftp(e){if(!this._sock||!G(this._sock))throw new Error("Not connected");return X(this,"sftp",((t,r)=>{t?e(t):ne(r,"sftp",((t,n)=>{function o(){r.removeListener("ready",s),r.removeListener("error",i),r.removeListener("exit",a),r.removeListener("close",a)}function s(){o(),e(void 0,r)}function i(t){o(),e(t)}function a(t,r){let n;o(),n="number"==typeof t?`Received exit code ${t} while establishing SFTP session`:void 0!==r?`Received signal ${r} while establishing SFTP session`:"Received unexpected SFTP session termination";const s=new Error(n);s.code=t,s.signal=r,e(s)}t?e(t):(r.on("ready",s).on("error",i).on("exit",a).on("close",a),r._init())}))})),this}}},13657:(e,t,r)=>{"use strict";const{Agent:n}=r(13685),{Agent:o}=r(95687),{connect:s}=r(24404);let i;for(const e of[n,o]){class o extends e{constructor(e,t){super(t),this._connectCfg=e,this._defaultSrcIP=t&&t.srcIP||"localhost"}createConnection(t,n){const o=t&&t.localAddress||this._defaultSrcIP,s=t&&t.localPort||0,a=t.host,l=t.port;void 0===i&&(i=r(92353));const u=new i;let d=!1;u.on("ready",(()=>{u.forwardOut(o,s,a,l,((r,o)=>{if(d=!0,r)return u.end(),n(r);o.once("close",(()=>u.end())),n(null,c(o,e,t))}))})).on("error",n).on("close",(()=>{d||n(new Error("Unexpected connection close"))})).connect(this._connectCfg)}}t[e===n?"SSHTTPAgent":"SSHTTPSAgent"]=o}function a(){}function c(e,t,r){if(t===n)return e.setKeepAlive=a,e.setNoDelay=a,e.setTimeout=a,e.ref=a,e.unref=a,e.destroySoon=e.destroy,e;r.socket=e;const o=s(r),i=(()=>{let t=!1;return()=>{t||(t=!0,e.isPaused()&&e.resume())}})();return o.on("end",i).on("close",i),o}},29005:(e,t,r)=>{"use strict";const{AgentProtocol:n,BaseAgent:o,createAgent:s,CygwinAgent:i,OpenSSHAgent:a,PageantAgent:c}=r(81119),{SSHTTPAgent:l,SSHTTPSAgent:u}=r(13657),{parseKey:d}=r(13781),{flagsToString:h,OPEN_MODE:p,STATUS_CODE:f,stringToFlags:g}=r(64061);e.exports={AgentProtocol:n,BaseAgent:o,createAgent:s,Client:r(92353),CygwinAgent:i,HTTPAgent:l,HTTPSAgent:u,OpenSSHAgent:a,PageantAgent:c,Server:r(37465),utils:{parseKey:d,sftp:{flagsToString:h,OPEN_MODE:p,STATUS_CODE:f,stringToFlags:g}}}},53603:(e,t,r)=>{"use strict";const{inspect:n}=r(73837),{bindingAvailable:o,NullCipher:s,NullDecipher:i}=r(38545),{COMPAT_CHECKS:a,DISCONNECT_REASON:c,MESSAGE:l,SIGNALS:u,TERMINAL_MODE:d}=r(3190),{DEFAULT_KEXINIT:h,KexInit:p,kexinit:f,onKEXPayload:g}=r(65260),{parseKey:m}=r(13781),y=r(92908),{bufferCopy:v,bufferFill:_,bufferSlice:b,convertSignature:S,sendPacket:E,writeUInt32BE:w}=r(39205),{PacketReader:A,PacketWriter:T,ZlibPacketReader:C,ZlibPacketWriter:I}=r(36993),R=r(66674).i8,O=new Map(Object.values(c).map((e=>[e,1]))),k=Buffer.from(`SSH-2.0-ssh2js${R}`),N=Buffer.from(`${k}\r\n`),P=Buffer.from([l.GLOBAL_REQUEST,0,0,0,21,107,101,101,112,97,108,105,118,101,64,111,112,101,110,115,115,104,46,99,111,109,1]),M=Buffer.from([d.TTY_OP_END]);function L(){}const B=/^SSH-(2\.0|1\.99)-([^ ]+)(?: (.*))?$/;function D(e,t,r){let o,s;this._buffer?(o=Buffer.allocUnsafe(this._buffer.length+(r-t)),o.set(this._buffer,0),0===t?o.set(e,this._buffer.length):o.set(new Uint8Array(e.buffer,e.byteOffset+t,r-t),this._buffer.length),s=this._buffer.length,t=0):(o=e,s=0);const a=t;let c=t,l=t,u=!1,d=0,h=0;for(;t<o.length;++t){const e=o[t];if(13!==e){if(10===e){if(l>c&&l-c>4&&83===o[c]&&83===o[c+1]&&72===o[c+2]&&45===o[c+3]){const e=o.latin1Slice(a,l+1),u=c===a?e:e.slice(c-a),d=B.exec(u);if(!d)throw new Error("Invalid identification string");const h={greeting:c===a?"":e.slice(0,c-a),identRaw:u,versions:{protocol:d[1],software:d[2]},comments:d[3]};return this._remoteIdentRaw=Buffer.from(u),this._debug&&this._debug(`Remote ident: ${n(u)}`),this._compatFlags=j(h),this._buffer=void 0,this._decipher=new i(0,g.bind(this,{firstPacket:!0})),this._parse=x,this._onHeader(h),this._destruct?(f(this),t+1-s):r}if(this._server)throw new Error("Greetings from clients not permitted");if(++h>1024)throw new Error("Max greeting lines exceeded");u=!1,c=t+1,d=0}else{if(u)throw new Error("Invalid header: expected newline");if(++d>=8192)throw new Error("Header line too long")}l=t}else u=!0}return this._buffer||(this._buffer=b(o,a)),t-s}function x(e,t,r){return this._decipher.decrypt(e,t,r)}function U(e){if(this._onPacket(),0===e.length)return void(this._debug&&this._debug("Inbound: Skipping empty packet payload"));const t=(e=this._packetRW.read.read(e))[0];t!==l.USERAUTH_SUCCESS||this._server||this._authenticated||(this._authenticated=!0,"zlib@openssh.com"===this._kex.negotiated.cs.compress&&(this._packetRW.write=new I(this)),"zlib@openssh.com"===this._kex.negotiated.sc.compress&&(this._packetRW.read=new C));const r=y[t];if(void 0!==r)return r(this,e);this._debug&&this._debug(`Inbound: Unsupported message type: ${t}`)}function j(e){const t=e.versions.software;let r=0;for(const e of a)"string"==typeof e[0]?t===e[0]&&(r|=e[1]):e[0].test(t)&&(r|=e[1]);return r}e.exports=class{constructor(e){const t=e.onWrite;if("function"!=typeof t)throw new Error("Missing onWrite function");this._onWrite=e=>{t(e)};const r=e.onError;if("function"!=typeof r)throw new Error("Missing onError function");this._onError=e=>{r(e)};const i=e.debug;this._debug="function"==typeof i?e=>{i(e)}:void 0;const a=e.onHeader;this._onHeader="function"==typeof a?(...e)=>{a(...e)}:L;const c=e.onPacket;this._onPacket="function"==typeof c?()=>{c()}:L;let l=e.onHandshakeComplete;"function"!=typeof l&&(l=L),this._onHandshakeComplete=(...e)=>{this._debug&&this._debug("Handshake completed");const t=this._queue;if(t){this._queue=void 0,this._debug&&this._debug(`Draining outbound queue (${t.length}) ...`);for(let e=0;e<t.length;++e){const r=t[e];let n=this._packetRW.write.finalize(r);if(n===r){const e=this._cipher.allocPacket(r.length);e.set(r,5),n=e}E(this,n)}this._debug&&this._debug("... finished draining outbound queue")}l(...e)},this._queue=void 0;const u=e.messageHandlers;let d;if(this._handlers="object"==typeof u&&null!==u?u:{},this._onPayload=U.bind(this),this._server=!!e.server,this._banner=void 0,this._server){if("object"!=typeof e.hostKeys||null===e.hostKeys)throw new Error("Missing server host key(s)");this._hostKeys=e.hostKeys,"string"==typeof e.greeting&&e.greeting.length&&(d="\r\n"===e.greeting.slice(-2)?e.greeting:`${e.greeting}\r\n`),"string"==typeof e.banner&&e.banner.length&&(this._banner="\r\n"===e.banner.slice(-2)?e.banner:`${e.banner}\r\n`)}else this._hostKeys=void 0;let f,g=e.offer;if("object"!=typeof g||null===g?g=h:g.constructor!==p&&(g=new p(g)),this._kex=void 0,this._kexinit=void 0,this._offer=g,this._cipher=new s(0,this._onWrite),this._decipher=void 0,this._skipNextInboundPacket=!1,this._packetRW={read:new A,write:new T(this)},this._hostVerifier=this._server||"function"!=typeof e.hostVerifier?void 0:e.hostVerifier,this._parse=D,this._buffer=void 0,this._authsQueue=[],this._authenticated=!1,this._remoteIdentRaw=void 0,"string"==typeof e.ident)this._identRaw=Buffer.from(`SSH-2.0-${e.ident}`),f=Buffer.allocUnsafe(this._identRaw.length+2),f.set(this._identRaw,0),f[f.length-2]=13,f[f.length-1]=10;else if(Buffer.isBuffer(e.ident)){const t=Buffer.allocUnsafe(8+e.ident.length);t.latin1Write("SSH-2.0-",0,8),t.set(e.ident,8),this._identRaw=t,f=Buffer.allocUnsafe(t.length+2),f.set(t,0),f[f.length-2]=13,f[f.length-1]=10}else this._identRaw=k,f=N;this._compatFlags=0,this._debug&&(o?this._debug("Custom crypto binding available"):this._debug("Custom crypto binding not available")),this._debug&&this._debug(`Local ident: ${n(this._identRaw.toString())}`),this.start=()=>{this.start=void 0,d&&this._onWrite(d),this._onWrite(f)}}_destruct(e){this._packetRW.read.cleanup(),this._packetRW.write.cleanup(),this._cipher&&this._cipher.free(),this._decipher&&this._decipher.free(),"string"==typeof e&&0!==e.length||(e="fatal error"),this.parse=()=>{throw new Error(`Instance unusable after ${e}`)},this._onWrite=()=>{throw new Error(`Instance unusable after ${e}`)},this._destruct=void 0}cleanup(){this._destruct&&this._destruct()}parse(e,t,r){for(;t<r;)t=this._parse(e,t,r)}disconnect(e){let t=this._packetRW.write.allocStartKEX;const r=this._packetRW.write.alloc(13,!0),n=t+13;O.has(e)||(e=c.PROTOCOL_ERROR),r[t]=l.DISCONNECT,w(r,e,++t),r.fill(0,t+=4,n),this._debug&&this._debug(`Outbound: Sending DISCONNECT (${e})`),E(this,this._packetRW.write.finalize(r,!0),!0)}ping(){const e=this._packetRW.write.allocStart,t=this._packetRW.write.alloc(P.length);t.set(P,e),this._debug&&this._debug("Outbound: Sending ping (GLOBAL_REQUEST: keepalive@openssh.com)"),E(this,this._packetRW.write.finalize(t))}rekey(){void 0===this._kexinit?(this._debug&&this._debug("Outbound: Initiated explicit rekey"),this._queue=[],f(this)):this._debug&&this._debug("Outbound: Ignoring rekey during handshake")}requestSuccess(e){let t,r=this._packetRW.write.allocStart;Buffer.isBuffer(e)?(t=this._packetRW.write.alloc(1+e.length),t[r]=l.REQUEST_SUCCESS,t.set(e,++r)):(t=this._packetRW.write.alloc(1),t[r]=l.REQUEST_SUCCESS),this._debug&&this._debug("Outbound: Sending REQUEST_SUCCESS"),E(this,this._packetRW.write.finalize(t))}requestFailure(){const e=this._packetRW.write.allocStart,t=this._packetRW.write.alloc(1);t[e]=l.REQUEST_FAILURE,this._debug&&this._debug("Outbound: Sending REQUEST_FAILURE"),E(this,this._packetRW.write.finalize(t))}channelSuccess(e){let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(5);r[t]=l.CHANNEL_SUCCESS,w(r,e,++t),this._debug&&this._debug(`Outbound: Sending CHANNEL_SUCCESS (r:${e})`),E(this,this._packetRW.write.finalize(r))}channelFailure(e){let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(5);r[t]=l.CHANNEL_FAILURE,w(r,e,++t),this._debug&&this._debug(`Outbound: Sending CHANNEL_FAILURE (r:${e})`),E(this,this._packetRW.write.finalize(r))}channelEOF(e){let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(5);r[t]=l.CHANNEL_EOF,w(r,e,++t),this._debug&&this._debug(`Outbound: Sending CHANNEL_EOF (r:${e})`),E(this,this._packetRW.write.finalize(r))}channelClose(e){let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(5);r[t]=l.CHANNEL_CLOSE,w(r,e,++t),this._debug&&this._debug(`Outbound: Sending CHANNEL_CLOSE (r:${e})`),E(this,this._packetRW.write.finalize(r))}channelWindowAdjust(e,t){let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(9);n[r]=l.CHANNEL_WINDOW_ADJUST,w(n,e,++r),w(n,t,r+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_WINDOW_ADJUST (r:${e}, ${t})`),E(this,this._packetRW.write.finalize(n))}channelData(e,t){const r=Buffer.isBuffer(t),n=r?t.length:Buffer.byteLength(t);let o=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(9+n);s[o]=l.CHANNEL_DATA,w(s,e,++o),w(s,n,o+=4),r?s.set(t,o+=4):s.utf8Write(t,o+=4,n),this._debug&&this._debug(`Outbound: Sending CHANNEL_DATA (r:${e}, ${n})`),E(this,this._packetRW.write.finalize(s))}channelExtData(e,t,r){const n=Buffer.isBuffer(t),o=n?t.length:Buffer.byteLength(t);let s=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(13+o);i[s]=l.CHANNEL_EXTENDED_DATA,w(i,e,++s),w(i,r,s+=4),w(i,o,s+=4),n?i.set(t,s+=4):i.utf8Write(t,s+=4,o),this._debug&&this._debug(`Outbound: Sending CHANNEL_EXTENDED_DATA (r:${e})`),E(this,this._packetRW.write.finalize(i))}channelOpenConfirm(e,t,r,n){let o=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(17);s[o]=l.CHANNEL_OPEN_CONFIRMATION,w(s,e,++o),w(s,t,o+=4),w(s,r,o+=4),w(s,n,o+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN_CONFIRMATION (r:${e}, l:${t})`),E(this,this._packetRW.write.finalize(s))}channelOpenFail(e,t,r){"string"!=typeof r&&(r="");const n=Buffer.byteLength(r);let o=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(13+n+4);s[o]=l.CHANNEL_OPEN_FAILURE,w(s,e,++o),w(s,t,o+=4),w(s,n,o+=4),o+=4,n&&(s.utf8Write(r,o,n),o+=n),w(s,0,o),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN_FAILURE (r:${e})`),E(this,this._packetRW.write.finalize(s))}service(e){if(this._server)throw new Error("Client-only method called in server mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+t);n[r]=l.SERVICE_REQUEST,w(n,t,++r),n.utf8Write(e,r+=4,t),this._debug&&this._debug(`Outbound: Sending SERVICE_REQUEST (${e})`),E(this,this._packetRW.write.finalize(n))}authPassword(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e),o=Buffer.byteLength(t),s=r?Buffer.byteLength(r):0;let i=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(5+n+4+14+4+8+1+4+o+(r?4+s:0));a[i]=l.USERAUTH_REQUEST,w(a,n,++i),a.utf8Write(e,i+=4,n),w(a,14,i+=n),a.utf8Write("ssh-connection",i+=4,14),w(a,8,i+=14),a.utf8Write("password",i+=4,8),a[i+=8]=r?1:0,w(a,o,++i),Buffer.isBuffer(t)?v(t,a,0,o,i+=4):a.utf8Write(t,i+=4,o),r?(w(a,s,i+=o),Buffer.isBuffer(r)?v(r,a,0,s,i+=4):a.utf8Write(r,i+=4,s),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (changed password)")):this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (password)"),this._authsQueue.push("password"),E(this,this._packetRW.write.finalize(a))}authPK(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");if((t=m(t))instanceof Error)throw new Error("Invalid key");const n=t.type;t=t.getPublicSSH();const o=Buffer.byteLength(e),s=Buffer.byteLength(n),i=t.length,a=this._kex.sessionID,c=a.length,u=(r?4+c:0)+1+4+o+4+14+4+9+1+4+s+4+i;let d,h;if(r?(d=Buffer.allocUnsafe(u),h=0,w(d,c,h),d.set(a,h+=4),h+=c):(d=this._packetRW.write.alloc(u),h=this._packetRW.write.allocStart),d[h]=l.USERAUTH_REQUEST,w(d,o,++h),d.utf8Write(e,h+=4,o),w(d,14,h+=o),d.utf8Write("ssh-connection",h+=4,14),w(d,9,h+=14),d.utf8Write("publickey",h+=4,9),d[h+=9]=r?1:0,w(d,s,++h),d.utf8Write(n,h+=4,s),w(d,i,h+=s),d.set(t,h+=4),!r)return this._authsQueue.push("publickey"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (publickey -- check)"),void E(this,this._packetRW.write.finalize(d));r(d,(r=>{if(!1===(r=S(r,n)))throw new Error("Error while converting handshake signature");const a=r.length;h=this._packetRW.write.allocStart,d=this._packetRW.write.alloc(5+o+4+14+4+9+1+4+s+4+i+4+4+s+4+a),d[h]=l.USERAUTH_REQUEST,w(d,o,++h),d.utf8Write(e,h+=4,o),w(d,14,h+=o),d.utf8Write("ssh-connection",h+=4,14),w(d,9,h+=14),d.utf8Write("publickey",h+=4,9),d[h+=9]=1,w(d,s,++h),d.utf8Write(n,h+=4,s),w(d,i,h+=s),d.set(t,h+=4),w(d,4+s+4+a,h+=i),w(d,s,h+=4),d.utf8Write(n,h+=4,s),w(d,a,h+=s),d.set(r,h+=4),this._authsQueue.push("publickey"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (publickey)"),E(this,this._packetRW.write.finalize(d))}))}authHostbased(e,t,r,n,o){if(this._server)throw new Error("Client-only method called in server mode");if((t=m(t))instanceof Error)throw new Error("Invalid key");const s=t.type;t=t.getPublicSSH();const i=Buffer.byteLength(e),a=Buffer.byteLength(s),c=t.length,u=this._kex.sessionID,d=u.length,h=Buffer.byteLength(r),p=Buffer.byteLength(n),f=Buffer.allocUnsafe(4+d+1+4+i+4+14+4+9+4+a+4+c+4+h+4+p);let g=0;w(f,d,g),f.set(u,g+=4),f[g+=d]=l.USERAUTH_REQUEST,w(f,i,++g),f.utf8Write(e,g+=4,i),w(f,14,g+=i),f.utf8Write("ssh-connection",g+=4,14),w(f,9,g+=14),f.utf8Write("hostbased",g+=4,9),w(f,a,g+=9),f.utf8Write(s,g+=4,a),w(f,c,g+=a),f.set(t,g+=4),w(f,h,g+=c),f.utf8Write(r,g+=4,h),w(f,p,g+=h),f.utf8Write(n,g+=4,p),o(f,(e=>{if(!(e=S(e,s)))throw new Error("Error while converting handshake signature");const t=e.length,r=f.length-d-4;g=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(r+4+4+a+4+t);v(f,n,4+d,f.length,g),w(n,4+a+4+t,g+=r),w(n,a,g+=4),n.utf8Write(s,g+=4,a),w(n,t,g+=a),n.set(e,g+=4),this._authsQueue.push("hostbased"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (hostbased)"),E(this,this._packetRW.write.finalize(n))}))}authKeyboard(e){if(this._server)throw new Error("Client-only method called in server mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+t+4+14+4+20+4+4);n[r]=l.USERAUTH_REQUEST,w(n,t,++r),n.utf8Write(e,r+=4,t),w(n,14,r+=t),n.utf8Write("ssh-connection",r+=4,14),w(n,20,r+=14),n.utf8Write("keyboard-interactive",r+=4,20),w(n,0,r+=20),w(n,0,r+=4),this._authsQueue.push("keyboard-interactive"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (keyboard-interactive)"),E(this,this._packetRW.write.finalize(n))}authNone(e){if(this._server)throw new Error("Client-only method called in server mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+t+4+14+4+4);n[r]=l.USERAUTH_REQUEST,w(n,t,++r),n.utf8Write(e,r+=4,t),w(n,14,r+=t),n.utf8Write("ssh-connection",r+=4,14),w(n,4,r+=14),n.utf8Write("none",r+=4,4),this._authsQueue.push("none"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (none)"),E(this,this._packetRW.write.finalize(n))}authInfoRes(e){if(this._server)throw new Error("Client-only method called in server mode");let t,r=0;if(e){t=new Array(e.length);for(let n=0;n<e.length;++n){const o=Buffer.byteLength(e[n]);t[n]=o,r+=4+o}}let n=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(5+r);if(o[n]=l.USERAUTH_INFO_RESPONSE,e){w(o,e.length,++n),n+=4;for(let r=0;r<e.length;++r){const s=t[r];w(o,s,n),n+=4,s&&(o.utf8Write(e[r],n,s),n+=s)}}else w(o,0,++n);this._debug&&this._debug("Outbound: Sending USERAUTH_INFO_RESPONSE"),E(this,this._packetRW.write.finalize(o))}tcpipForward(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e);let o=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(23+n+4);s[o]=l.GLOBAL_REQUEST,w(s,13,++o),s.utf8Write("tcpip-forward",o+=4,13),s[o+=13]=void 0===r||!0===r?1:0,w(s,n,++o),s.utf8Write(e,o+=4,n),w(s,t,o+=n),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (tcpip-forward)"),E(this,this._packetRW.write.finalize(s))}cancelTcpipForward(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e);let o=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(30+n+4);s[o]=l.GLOBAL_REQUEST,w(s,20,++o),s.utf8Write("cancel-tcpip-forward",o+=4,20),s[o+=20]=void 0===r||!0===r?1:0,w(s,n,++o),s.utf8Write(e,o+=4,n),w(s,t,o+=n),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (cancel-tcpip-forward)"),E(this,this._packetRW.write.finalize(s))}openssh_streamLocalForward(e,t){if(this._server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(41+r);o[n]=l.GLOBAL_REQUEST,w(o,31,++n),o.utf8Write("streamlocal-forward@openssh.com",n+=4,31),o[n+=31]=void 0===t||!0===t?1:0,w(o,r,++n),o.utf8Write(e,n+=4,r),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (streamlocal-forward@openssh.com)"),E(this,this._packetRW.write.finalize(o))}openssh_cancelStreamLocalForward(e,t){if(this._server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(48+r);o[n]=l.GLOBAL_REQUEST,w(o,38,++n),o.utf8Write("cancel-streamlocal-forward@openssh.com",n+=4,38),o[n+=38]=void 0===t||!0===t?1:0,w(o,r,++n),o.utf8Write(e,n+=4,r),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (cancel-streamlocal-forward@openssh.com)"),E(this,this._packetRW.write.finalize(o))}directTcpip(e,t,r,n){if(this._server)throw new Error("Client-only method called in server mode");const o=Buffer.byteLength(n.srcIP),s=Buffer.byteLength(n.dstIP);let i=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(33+o+4+4+s+4);a[i]=l.CHANNEL_OPEN,w(a,12,++i),a.utf8Write("direct-tcpip",i+=4,12),w(a,e,i+=12),w(a,t,i+=4),w(a,r,i+=4),w(a,s,i+=4),a.utf8Write(n.dstIP,i+=4,s),w(a,n.dstPort,i+=s),w(a,o,i+=4),a.utf8Write(n.srcIP,i+=4,o),w(a,n.srcPort,i+=o),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, direct-tcpip)`),E(this,this._packetRW.write.finalize(a))}openssh_directStreamLocal(e,t,r,n){if(this._server)throw new Error("Client-only method called in server mode");const o=Buffer.byteLength(n.socketPath);let s=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(51+o+4+4);i[s]=l.CHANNEL_OPEN,w(i,30,++s),i.utf8Write("direct-streamlocal@openssh.com",s+=4,30),w(i,e,s+=30),w(i,t,s+=4),w(i,r,s+=4),w(i,o,s+=4),i.utf8Write(n.socketPath,s+=4,o),_(i,0,s+=o,s+8),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, direct-streamlocal@openssh.com)`),E(this,this._packetRW.write.finalize(i))}openssh_noMoreSessions(e){if(this._server)throw new Error("Client-only method called in server mode");let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(34);r[t]=l.GLOBAL_REQUEST,w(r,28,++t),r.utf8Write("no-more-sessions@openssh.com",t+=4,28),r[t+=28]=void 0===e||!0===e?1:0,this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (no-more-sessions@openssh.com)"),E(this,this._packetRW.write.finalize(r))}session(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");let n=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(24);o[n]=l.CHANNEL_OPEN,w(o,7,++n),o.utf8Write("session",n+=4,7),w(o,e,n+=7),w(o,t,n+=4),w(o,r,n+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, session)`),E(this,this._packetRW.write.finalize(o))}windowChange(e,t,r,n,o){if(this._server)throw new Error("Client-only method called in server mode");let s=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(39);i[s]=l.CHANNEL_REQUEST,w(i,e,++s),w(i,13,s+=4),i.utf8Write("window-change",s+=4,13),i[s+=13]=0,w(i,r,++s),w(i,t,s+=4),w(i,o,s+=4),w(i,n,s+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, window-change)`),E(this,this._packetRW.write.finalize(i))}pty(e,t,r,n,o,s,i,a){if(this._server)throw new Error("Client-only method called in server mode");s&&s.length||(s="vt100"),!i||Buffer.isBuffer(i)||Array.isArray(i)||"object"!=typeof i||null===i||(i=function(e){const t=Object.keys(e),r=Buffer.allocUnsafe(5*t.length+1);let n=0;for(let o=0;o<t.length;++o){const s=t[o];if("TTY_OP_END"===s)continue;const i=d[s];if(void 0===i)continue;const a=e[s];"number"==typeof a&&isFinite(a)&&(r[n++]=i,r[n++]=a>>>24,r[n++]=a>>>16,r[n++]=a>>>8,r[n++]=a)}return r[n++]=d.TTY_OP_END,n<r.length?b(r,0,n):r}(i)),i&&i.length||(i=M);const c=s.length,u=i.length;let h=this._packetRW.write.allocStart;const p=this._packetRW.write.alloc(21+c+4+4+4+4+4+u);if(p[h]=l.CHANNEL_REQUEST,w(p,e,++h),w(p,7,h+=4),p.utf8Write("pty-req",h+=4,7),p[h+=7]=void 0===a||!0===a?1:0,w(p,c,++h),p.utf8Write(s,h+=4,c),w(p,r,h+=c),w(p,t,h+=4),w(p,o,h+=4),w(p,n,h+=4),w(p,u,h+=4),h+=4,Array.isArray(i))for(let e=0;e<u;++e)p[h++]=i[e];else Buffer.isBuffer(i)&&p.set(i,h);this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, pty-req)`),E(this,this._packetRW.write.finalize(p))}shell(e,t){if(this._server)throw new Error("Client-only method called in server mode");let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(15);n[r]=l.CHANNEL_REQUEST,w(n,e,++r),w(n,5,r+=4),n.utf8Write("shell",r+=4,5),n[r+=5]=void 0===t||!0===t?1:0,this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, shell)`),E(this,this._packetRW.write.finalize(n))}exec(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.isBuffer(t),o=n?t.length:Buffer.byteLength(t);let s=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(18+o);i[s]=l.CHANNEL_REQUEST,w(i,e,++s),w(i,4,s+=4),i.utf8Write("exec",s+=4,4),i[s+=4]=void 0===r||!0===r?1:0,w(i,o,++s),n?i.set(t,s+=4):i.utf8Write(t,s+=4,o),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, exec: ${t})`),E(this,this._packetRW.write.finalize(i))}signal(e,t){if(this._server)throw new Error("Client-only method called in server mode");const r=t;if("SIG"===(t=t.toUpperCase()).slice(0,3)&&(t=t.slice(3)),1!==u[t])throw new Error(`Invalid signal: ${r}`);const n=t.length;let o=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(20+n);s[o]=l.CHANNEL_REQUEST,w(s,e,++o),w(s,6,o+=4),s.utf8Write("signal",o+=4,6),s[o+=6]=0,w(s,n,++o),s.utf8Write(t,o+=4,n),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, signal: ${t})`),E(this,this._packetRW.write.finalize(s))}env(e,t,r,n){if(this._server)throw new Error("Client-only method called in server mode");const o=Buffer.byteLength(t),s=Buffer.isBuffer(r),i=s?r.length:Buffer.byteLength(r);let a=this._packetRW.write.allocStart;const c=this._packetRW.write.alloc(17+o+4+i);c[a]=l.CHANNEL_REQUEST,w(c,e,++a),w(c,3,a+=4),c.utf8Write("env",a+=4,3),c[a+=3]=void 0===n||!0===n?1:0,w(c,o,++a),c.utf8Write(t,a+=4,o),w(c,i,a+=o),s?c.set(r,a+=4):c.utf8Write(r,a+=4,i),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, env: ${t}=${r})`),E(this,this._packetRW.write.finalize(c))}x11Forward(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const n=t.protocol,o=t.cookie,s=Buffer.isBuffer(n),i=s?n.length:Buffer.byteLength(n),a=Buffer.isBuffer(o),c=a?o.length:Buffer.byteLength(o);let u=this._packetRW.write.allocStart;const d=this._packetRW.write.alloc(22+i+4+c+4);d[u]=l.CHANNEL_REQUEST,w(d,e,++u),w(d,7,u+=4),d.utf8Write("x11-req",u+=4,7),d[u+=7]=void 0===r||!0===r?1:0,d[++u]=t.single?1:0,w(d,i,++u),s?d.set(n,u+=4):d.utf8Write(n,u+=4,i),w(d,c,u+=i),a?d.set(o,u+=4):d.latin1Write(o,u+=4,c),w(d,t.screen||0,u+=c),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, x11-req)`),E(this,this._packetRW.write.finalize(d))}subsystem(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(t);let o=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(23+n);s[o]=l.CHANNEL_REQUEST,w(s,e,++o),w(s,9,o+=4),s.utf8Write("subsystem",o+=4,9),s[o+=9]=void 0===r||!0===r?1:0,w(s,n,++o),s.utf8Write(t,o+=4,n),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, subsystem: ${t})`),E(this,this._packetRW.write.finalize(s))}openssh_agentForward(e,t){if(this._server)throw new Error("Client-only method called in server mode");let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(36);n[r]=l.CHANNEL_REQUEST,w(n,e,++r),w(n,26,r+=4),n.utf8Write("auth-agent-req@openssh.com",r+=4,26),n[r+=26]=void 0===t||!0===t?1:0,this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, auth-agent-req@openssh.com)`),E(this,this._packetRW.write.finalize(n))}openssh_hostKeysProve(e){if(this._server)throw new Error("Client-only method called in server mode");let t=0;const r=[];for(const n of e){const e=n.getPublicSSH();t+=4+e.length,r.push(e)}let n=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(35+t);o[n]=l.GLOBAL_REQUEST,w(o,29,++n),o.utf8Write("hostkeys-prove-00@openssh.com",n+=4,29),o[n+=29]=1,++n;for(const e of r)w(o,e.length,n),v(e,o,0,e.length,n+=4),n+=e.length;this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (hostkeys-prove-00@openssh.com)"),E(this,this._packetRW.write.finalize(o))}serviceAccept(e){if(!this._server)throw new Error("Server-only method called in client mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+t);if(n[r]=l.SERVICE_ACCEPT,w(n,t,++r),n.utf8Write(e,r+=4,t),this._debug&&this._debug(`Outbound: Sending SERVICE_ACCEPT (${e})`),E(this,this._packetRW.write.finalize(n)),this._server&&this._banner&&"ssh-userauth"===e){const e=this._banner;this._banner=void 0;const t=Buffer.byteLength(e);r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+t+4);n[r]=l.USERAUTH_BANNER,w(n,t,++r),n.utf8Write(e,r+=4,t),w(n,0,r+=t),this._debug&&this._debug("Outbound: Sending USERAUTH_BANNER"),E(this,this._packetRW.write.finalize(n))}}forwardedTcpip(e,t,r,n){if(!this._server)throw new Error("Server-only method called in client mode");const o=Buffer.byteLength(n.boundAddr),s=Buffer.byteLength(n.remoteAddr);let i=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(36+o+4+4+s+4);a[i]=l.CHANNEL_OPEN,w(a,15,++i),a.utf8Write("forwarded-tcpip",i+=4,15),w(a,e,i+=15),w(a,t,i+=4),w(a,r,i+=4),w(a,o,i+=4),a.utf8Write(n.boundAddr,i+=4,o),w(a,n.boundPort,i+=o),w(a,s,i+=4),a.utf8Write(n.remoteAddr,i+=4,s),w(a,n.remotePort,i+=s),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, forwarded-tcpip)`),E(this,this._packetRW.write.finalize(a))}x11(e,t,r,n){if(!this._server)throw new Error("Server-only method called in client mode");const o=Buffer.byteLength(n.originAddr);let s=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(24+o+4);i[s]=l.CHANNEL_OPEN,w(i,3,++s),i.utf8Write("x11",s+=4,3),w(i,e,s+=3),w(i,t,s+=4),w(i,r,s+=4),w(i,o,s+=4),i.utf8Write(n.originAddr,s+=4,o),w(i,n.originPort,s+=o),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, x11)`),E(this,this._packetRW.write.finalize(i))}openssh_authAgent(e,t,r){if(!this._server)throw new Error("Server-only method called in client mode");let n=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(39);o[n]=l.CHANNEL_OPEN,w(o,22,++n),o.utf8Write("auth-agent@openssh.com",n+=4,22),w(o,e,n+=22),w(o,t,n+=4),w(o,r,n+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, auth-agent@openssh.com)`),E(this,this._packetRW.write.finalize(o))}openssh_forwardedStreamLocal(e,t,r,n){if(!this._server)throw new Error("Server-only method called in client mode");const o=Buffer.byteLength(n.socketPath);let s=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(54+o+4);i[s]=l.CHANNEL_OPEN,w(i,33,++s),i.utf8Write("forwarded-streamlocal@openssh.com",s+=4,33),w(i,e,s+=33),w(i,t,s+=4),w(i,r,s+=4),w(i,o,s+=4),i.utf8Write(n.socketPath,s+=4,o),w(i,0,s+=o),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, forwarded-streamlocal@openssh.com)`),E(this,this._packetRW.write.finalize(i))}exitStatus(e,t){if(!this._server)throw new Error("Server-only method called in client mode");let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(25);n[r]=l.CHANNEL_REQUEST,w(n,e,++r),w(n,11,r+=4),n.utf8Write("exit-status",r+=4,11),n[r+=11]=0,w(n,t,++r),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, exit-status: ${t})`),E(this,this._packetRW.write.finalize(n))}exitSignal(e,t,r,n){if(!this._server)throw new Error("Server-only method called in client mode");const o=t;if("string"!=typeof o||!o)throw new Error(`Invalid signal: ${o}`);let s=t.toUpperCase();if("SIG"===s.slice(0,3)&&(s=s.slice(3)),1!==u[s])throw new Error(`Invalid signal: ${o}`);const i=Buffer.byteLength(s),a=n?Buffer.byteLength(n):0;let c=this._packetRW.write.allocStart;const d=this._packetRW.write.alloc(25+i+1+4+a+4);d[c]=l.CHANNEL_REQUEST,w(d,e,++c),w(d,11,c+=4),d.utf8Write("exit-signal",c+=4,11),d[c+=11]=0,w(d,i,++c),d.utf8Write(s,c+=4,i),d[c+=i]=r?1:0,w(d,a,++c),c+=4,a&&(d.utf8Write(n,c,a),c+=a),w(d,0,c),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, exit-signal: ${t})`),E(this,this._packetRW.write.finalize(d))}authFailure(e,t){if(!this._server)throw new Error("Server-only method called in client mode");if(0===this._authsQueue.length)throw new Error("No auth in progress");let r;if("boolean"==typeof e&&(t=e,e=void 0),e){r=[];for(let t=0;t<e.length;++t)"none"!==e[t].toLowerCase()&&r.push(e[t]);r=r.join(",")}else r="";const n=r.length;let o=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(5+n+1);s[o]=l.USERAUTH_FAILURE,w(s,n,++o),s.utf8Write(r,o+=4,n),s[o+=n]=!0===t?1:0,this._authsQueue.shift(),this._debug&&this._debug("Outbound: Sending USERAUTH_FAILURE"),E(this,this._packetRW.write.finalize(s))}authSuccess(){if(!this._server)throw new Error("Server-only method called in client mode");if(0===this._authsQueue.length)throw new Error("No auth in progress");const e=this._packetRW.write.allocStart,t=this._packetRW.write.alloc(1);t[e]=l.USERAUTH_SUCCESS,this._authsQueue.shift(),this._authenticated=!0,this._debug&&this._debug("Outbound: Sending USERAUTH_SUCCESS"),E(this,this._packetRW.write.finalize(t)),"zlib@openssh.com"===this._kex.negotiated.cs.compress&&(this._packetRW.read=new C),"zlib@openssh.com"===this._kex.negotiated.sc.compress&&(this._packetRW.write=new I(this))}authPKOK(e,t){if(!this._server)throw new Error("Server-only method called in client mode");if(0===this._authsQueue.length||"publickey"!==this._authsQueue[0])throw new Error('"publickey" auth not in progress');const r=Buffer.byteLength(e),n=t.length;let o=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(5+r+4+n);s[o]=l.USERAUTH_PK_OK,w(s,r,++o),s.utf8Write(e,o+=4,r),w(s,n,o+=r),s.set(t,o+=4),this._authsQueue.shift(),this._debug&&this._debug("Outbound: Sending USERAUTH_PK_OK"),E(this,this._packetRW.write.finalize(s))}authPasswdChg(e){if(!this._server)throw new Error("Server-only method called in client mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+t+4);n[r]=l.USERAUTH_PASSWD_CHANGEREQ,w(n,t,++r),n.utf8Write(e,r+=4,t),w(n,0,r+=t),this._debug&&this._debug("Outbound: Sending USERAUTH_PASSWD_CHANGEREQ"),E(this,this._packetRW.write.finalize(n))}authInfoReq(e,t,r){if(!this._server)throw new Error("Server-only method called in client mode");let n=0;const o=e?Buffer.byteLength(e):0,s=t?Buffer.byteLength(t):0;for(let e=0;e<r.length;++e)n+=4+Buffer.byteLength(r[e].prompt)+1;let i=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(5+o+4+s+4+4+n);a[i]=l.USERAUTH_INFO_REQUEST,w(a,o,++i),i+=4,e&&(a.utf8Write(e,i,o),i+=o),w(a,s,i),i+=4,t&&(a.utf8Write(t,i,s),i+=s),w(a,0,i),w(a,r.length,i+=4),i+=4;for(let e=0;e<r.length;++e){const t=r[e],n=Buffer.byteLength(t.prompt);w(a,n,i),i+=4,n&&(a.utf8Write(t.prompt,i,n),i+=n),a[i++]=t.echo?1:0}this._debug&&this._debug("Outbound: Sending USERAUTH_INFO_REQUEST"),E(this,this._packetRW.write.finalize(a))}}},64061:(e,t,r)=>{"use strict";const n=r(82361),o=r(57147),{constants:s}=o,{Readable:i,Writable:a}=r(12781),{inherits:c,isDate:l}=r(73837),u=Buffer[Symbol.species],{bufferCopy:d,bufferSlice:h,makeBufferParser:p,writeUInt32BE:f}=r(39205),g=Buffer.alloc(28),m={OK:0,EOF:1,NO_SUCH_FILE:2,PERMISSION_DENIED:3,FAILURE:4,BAD_MESSAGE:5,NO_CONNECTION:6,CONNECTION_LOST:7,OP_UNSUPPORTED:8},y=new Map(Object.values(m).map((e=>[e,1]))),v={[m.OK]:"No error",[m.EOF]:"End of file",[m.NO_SUCH_FILE]:"No such file or directory",[m.PERMISSION_DENIED]:"Permission denied",[m.FAILURE]:"Failure",[m.BAD_MESSAGE]:"Bad message",[m.NO_CONNECTION]:"No connection",[m.CONNECTION_LOST]:"Connection lost",[m.OP_UNSUPPORTED]:"Operation unsupported"},_=200,b={READ:1,WRITE:2,APPEND:4,CREAT:8,TRUNC:16,EXCL:32},S=2**32-1,E=Buffer.from([0,0,0,5,1,0,0,0,3]),w=Buffer.from([0,0,0,5,2,0,0,0,3]),A=/^SSH-2.0-(?:OpenSSH|dropbear)/,T=262144,C=p(),I={readable:!1,writable:!1,push:e=>{},once:()=>{},on:()=>{},emit:()=>{},end:()=>{}};function R(){}function O(e,t,r,n,o,s,i,a){const c=e._maxReadLen,l=Math.max(o-c,0);l&&(o=c);const u=t.length;let d=9,p=s;const g=Buffer.allocUnsafe(13+u+8+4);f(g,g.length-4,0),g[4]=5;const y=e._writeReqid=e._writeReqid+1&S;f(g,y,5),f(g,u,d),g.set(t,d+=4),d+=u;for(let e=7;e>=0;--e)g[d+e]=255&p,p/=256;f(g,o,d+=8),"function"!=typeof i&&(i=R);const v=a||{nb:0,position:s,off:n,origOff:n,len:void 0,overflow:void 0,cb:(n,o,s)=>{const a=v.len,c=v.overflow;if(n){if(i._wantEOFError||n.code!==m.EOF)return i(n)}else{if(s>a)return i(new Error("Received more data than requested"));if(s===a&&c)return v.nb+=s,v.position+=s,v.off+=s,void O(e,t,r,v.off,c,v.position,i,v)}s=s||0,o=0===v.origOff&&r.length===v.nb?r:h(r,v.origOff,v.origOff+v.nb+s),i(void 0,v.nb+s,o,v.position)},buffer:void 0};v.len=o,v.overflow=l,v.buffer=h(r,n,n+o),e._requests[y]=v;const _=F(e,g);e._debug&&e._debug(`SFTP: Outbound: ${_?"Buffered":"Sending"} READ`)}function k(e,t,r,n,s,i){let a,c,l,u,d=64,h=32768;"function"==typeof s?i=s:"object"==typeof s&&null!==s&&("number"==typeof s.concurrency&&s.concurrency>0&&!isNaN(s.concurrency)&&(d=s.concurrency),"number"==typeof s.chunkSize&&s.chunkSize>0&&!isNaN(s.chunkSize)&&(h=s.chunkSize),"number"==typeof s.fileSize&&s.fileSize>0&&!isNaN(s.fileSize)&&(l=s.fileSize),"function"==typeof s.step&&(a=s.step),"string"!=typeof s.mode&&"number"!=typeof s.mode||(c=B(s.mode)));let p,f,g,m=0,y=0,v=!1,_=h*d;function b(r){if(v)return;v=!0;let n,s=0;p||f?(n=()=>{0==--s&&i(r)},!p||e!==o&&"open"!==e.outgoing.state||++s,!f||t!==o&&"open"!==t.outgoing.state||++s,!p||e!==o&&"open"!==e.outgoing.state||e.close(p,n),!f||t!==o&&"open"!==t.outgoing.state||t.close(f,n)):i(r)}e.open(r,"r",((s,v)=>{if(s)return b(s);function S(s,l){if(s)return e!==o?void e.stat(r,((e,t)=>{if(e)return b(s);S(null,t)})):b(s);u=l.size,t.open(n,"w",((r,o)=>{if(r)return b(r);if(f=o,u<=0)return b();for(;_>u;){if(1===d){_=u;break}_-=h,--d}if(g=function(e){try{return Buffer.allocUnsafe(e)}catch(e){return e}}(_),g instanceof Error)return b(g);function s(r,n,o,s,c,d){if(r)return b(r);c=c||0,t.write(f,g,c,n,s,(function(r){if(r)return b(r);if(y+=n,a&&a(y,n,u),n<d)return l(c,s+n,d-n);if(y===u)return void t.close(f,(t=>{if(f=void 0,t)return b(t);e.close(p,(e=>{if(p=void 0,e)return b(e);i()}))}));if(m>=u)return;const o=m+h>u?u-m:h;l(c,m,o),m+=o}))}function l(t,r,n){e.read(p,g,t,n,r,function(e,t,r){return(n,o,i)=>{s(n,o,0,t,e,r)}}(t,r,n))}function v(){let e=0,t=0;for(;m<u&&e<d;){const r=m+h>u?u-m:h;l(t,m,r),t+=r,m+=r,++e}}void 0!==c?t.fchmod(f,c,(function e(r){r?t.chmod(n,c,(t=>e())):v()})):v()}))}p=v,void 0===l?e.fstat(p,S):S(null,{size:l})}))}function N(e,t,r,n,o,s,i){const a="function"==typeof i?i:void 0;e.write(t,r,n,o,s,((i,c)=>{if(i)return e.close(t,(()=>{a&&a(i)}));c===o?e.close(t,a):N(e,t,r,n+=c,o-=c,s+=c,a)}))}class P{constructor(e){this.mode=e&&e.mode,this.uid=e&&e.uid,this.gid=e&&e.gid,this.size=e&&e.size,this.atime=e&&e.atime,this.mtime=e&&e.mtime,this.extended=e&&e.extended}isDirectory(){return(this.mode&s.S_IFMT)===s.S_IFDIR}isFile(){return(this.mode&s.S_IFMT)===s.S_IFREG}isBlockDevice(){return(this.mode&s.S_IFMT)===s.S_IFBLK}isCharacterDevice(){return(this.mode&s.S_IFMT)===s.S_IFCHR}isSymbolicLink(){return(this.mode&s.S_IFMT)===s.S_IFLNK}isFIFO(){return(this.mode&s.S_IFMT)===s.S_IFIFO}isSocket(){return(this.mode&s.S_IFMT)===s.S_IFSOCK}}function M(e){let t=0,r=0;if("object"==typeof e&&null!==e){if("number"==typeof e.size){t|=1;const n=e.size;g[r++]=n/72057594037927940,g[r++]=n/281474976710656,g[r++]=n/1099511627776,g[r++]=n/4294967296,g[r++]=n/16777216,g[r++]=n/65536,g[r++]=n/256,g[r++]=n}if("number"==typeof e.uid&&"number"==typeof e.gid){t|=2;const n=e.uid,o=e.gid;g[r++]=n>>>24,g[r++]=n>>>16,g[r++]=n>>>8,g[r++]=n,g[r++]=o>>>24,g[r++]=o>>>16,g[r++]=o>>>8,g[r++]=o}if("number"==typeof e.mode||"string"==typeof e.mode){const n=B(e.mode);t|=4,g[r++]=n>>>24,g[r++]=n>>>16,g[r++]=n>>>8,g[r++]=n}if(("number"==typeof e.atime||l(e.atime))&&("number"==typeof e.mtime||l(e.mtime))){const n=L(e.atime),o=L(e.mtime);t|=8,g[r++]=n>>>24,g[r++]=n>>>16,g[r++]=n>>>8,g[r++]=n,g[r++]=o>>>24,g[r++]=o>>>16,g[r++]=o>>>8,g[r++]=o}}return{flags:t,nb:r}}function L(e){if("number"==typeof e&&e==e)return e;if(l(e))return parseInt(e.getTime()/1e3,10);throw new Error(`Cannot parse time: ${e}`)}function B(e){if("number"==typeof e&&e==e)return e;if("string"==typeof e)return B(parseInt(e,8));throw new Error(`Cannot parse mode: ${e}`)}const D={r:b.READ,"r+":b.READ|b.WRITE,w:b.TRUNC|b.CREAT|b.WRITE,wx:b.TRUNC|b.CREAT|b.WRITE|b.EXCL,xw:b.TRUNC|b.CREAT|b.WRITE|b.EXCL,"w+":b.TRUNC|b.CREAT|b.READ|b.WRITE,"wx+":b.TRUNC|b.CREAT|b.READ|b.WRITE|b.EXCL,"xw+":b.TRUNC|b.CREAT|b.READ|b.WRITE|b.EXCL,a:b.APPEND|b.CREAT|b.WRITE,ax:b.APPEND|b.CREAT|b.WRITE|b.EXCL,xa:b.APPEND|b.CREAT|b.WRITE|b.EXCL,"a+":b.APPEND|b.CREAT|b.READ|b.WRITE,"ax+":b.APPEND|b.CREAT|b.READ|b.WRITE|b.EXCL,"xa+":b.APPEND|b.CREAT|b.READ|b.WRITE|b.EXCL};function x(e){const t=D[e];return void 0!==t?t:null}const U=(()=>{const e=Object.keys(D);return t=>{for(let r=0;r<e.length;++r){const n=e[r];if(D[n]===t)return n}return null}})();function j(e){const t=C.readUInt32BE();if(void 0===t)return;const r=new P;if(1&t){const t=C.readUInt64BE(e);if(void 0===t)return;r.size=t}if(2&t){const e=C.readUInt32BE(),t=C.readUInt32BE();if(void 0===t)return;r.uid=e,r.gid=t}if(4&t){const e=C.readUInt32BE();if(void 0===e)return;r.mode=e}if(8&t){const e=C.readUInt32BE(),t=C.readUInt32BE();if(void 0===t)return;r.atime=e,r.mtime=t}if(2147483648&t){const e=C.readUInt32BE();if(void 0===e)return;const t={};for(let r=0;r<e;++r){const e=C.readString(!0),r=C.readString();if(void 0===r)return;t[e]=r}r.extended=t}return r}function F(e,t){const r=H(e,t);return void 0===r||(e._buffer.push(r),!1)}function H(e,t){const r=e.outgoing;if("open"!==r.state)return;if(0===r.window)return e._waitWindow=!0,e._chunkcb=W,t;let n;const o=t.length;let s=0;for(;o-s>0&&r.window>0;){const n=Math.min(o-s,r.window,r.packetSize);r.window-=n,0===r.window&&(e._waitWindow=!0,e._chunkcb=W),0===s&&n===o?e._protocol.channelData(e.outgoing.id,t):e._protocol.channelData(e.outgoing.id,h(t,s,s+n)),s+=n}return o-s>0&&(n=s>0?h(t,s,o):t),n}function W(){this._chunkcb=void 0;const e=this._buffer;let t=0;for(;t<e.length;){const r=e[t],n=H(this,r);if(void 0!==n)return n!==r&&(e[t]=n),void(t>0&&(this._buffer=e.slice(t)));++t}t>0&&(this._buffer=[])}function q(e,t,r){const n=new Error(t);return n.level="sftp-protocol",!r&&e._debug&&e._debug(`SFTP: Inbound: ${t}`),e.emit("error",n),e.destroy(),z(e),!1}function z(e){const t=Object.keys(e._requests);if(0===t.length)return;const r=e._requests;e._requests={};const n=new Error("No response from server");for(let e=0;e<t.length;++e){const o=r[t[e]];"function"==typeof o.cb&&o.cb(n)}}const G={2:(e,t)=>{if(-1!==e._version)return q(e,"Duplicate VERSION packet");const r={};C.init(t,1);let n=C.readUInt32BE();for(;C.avail();){const e=C.readString(!0),t=C.readString(!0);if(void 0===t){n=void 0;break}r[e]=t}if(C.clear(),void 0===n)return q(e,"Malformed VERSION packet");if(e._debug){const t=Object.keys(r);t.length?e._debug(`SFTP: Inbound: Received VERSION (v${n}, exts:${t})`):e._debug(`SFTP: Inbound: Received VERSION (v${n})`)}if(e._version=n,e._extensions=r,"1"===r["limits@openssh.com"])return function(e,t){let r=9;const n=Buffer.allocUnsafe(31);f(n,n.length-4,0),n[4]=_;const o=e._writeReqid=e._writeReqid+1&S;f(n,o,5),f(n,18,r),n.utf8Write("limits@openssh.com",r+=4,18),e._requests[o]={extended:"limits@openssh.com",cb:t};const s=F(e,n);if(e._debug){const t=s?"Buffered":"Sending";e._debug(`SFTP: Outbound: ${t} limits@openssh.com`)}}(e,((t,r)=>{t||(r.maxPktLen>0&&(e._maxOutPktLen=r.maxPktLen),r.maxReadLen>0&&(e._maxReadLen=r.maxReadLen),r.maxWriteLen>0&&(e._maxWriteLen=r.maxWriteLen),e.maxOpenHandles=r.maxOpenHandles>0?r.maxOpenHandles:1/0),e.emit("ready")}));e.emit("ready")},101:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readUInt32BE(),o=C.readString(!0);if(C.clear(),e._debug){const t=JSON.stringify(o);e._debug(`SFTP: Inbound: Received STATUS (id:${r}, ${n}, ${t})`)}const s=e._requests[r];if(delete e._requests[r],s&&"function"==typeof s.cb){if(n===m.OK)return void s.cb();const e=new Error(o||v[n]||"Unknown status");e.code=n,s.cb(e)}},102:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString();if(C.clear(),void 0===n)return void 0!==r&&delete e._requests[r],q(e,"Malformed HANDLE packet");e._debug&&e._debug(`SFTP: Inbound: Received HANDLE (id:${r})`);const o=e._requests[r];delete e._requests[r],o&&"function"==typeof o.cb&&o.cb(void 0,n)},103:(e,t)=>{C.init(t,1);const r=C.readUInt32BE();let n;if(void 0!==r&&(n=e._requests[r],delete e._requests[r]),n&&"function"==typeof n.cb)if(n.buffer){const t=C.readString(n.buffer);if(C.clear(),void 0!==t)return e._debug&&e._debug(`SFTP: Inbound: Received DATA (id:${r}, ${t})`),void n.cb(void 0,n.buffer,t)}else{const t=C.readString();if(C.clear(),void 0!==t)return e._debug&&e._debug(`SFTP: Inbound: Received DATA (id:${r}, ${t.length})`),void n.cb(void 0,t)}else{const t=C.skipString();if(C.clear(),void 0!==t)return void(e._debug&&e._debug(`SFTP: Inbound: Received DATA (id:${r}, ${t})`))}return q(e,"Malformed DATA packet")},104:(e,t)=>{C.init(t,1);const r=C.readUInt32BE();let n;void 0!==r&&(n=e._requests[r],delete e._requests[r]);const o=C.readUInt32BE();if(void 0!==o){let t=[];for(let r=0;r<o;++r){const r=C.readString(!0),n=C.readString(!0),o=j(e._biOpt);if(void 0===o){t=void 0;break}t.push({filename:r,longname:n,attrs:o})}if(void 0!==t)return e._debug&&e._debug(`SFTP: Inbound: Received NAME (id:${r}, ${t.length})`),C.clear(),void(n&&"function"==typeof n.cb&&n.cb(void 0,t))}return C.clear(),q(e,"Malformed NAME packet")},105:(e,t)=>{C.init(t,1);const r=C.readUInt32BE();let n;void 0!==r&&(n=e._requests[r],delete e._requests[r]);const o=j(e._biOpt);return C.clear(),void 0!==o?(e._debug&&e._debug(`SFTP: Inbound: Received ATTRS (id:${r})`),void(n&&"function"==typeof n.cb&&n.cb(void 0,o))):q(e,"Malformed ATTRS packet")},201:(e,t)=>{C.init(t,1);const r=C.readUInt32BE();if(void 0!==r){const t=e._requests[r];if(!t)return e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ???)`),void C.clear();switch(delete e._requests[r],t.extended){case"statvfs@openssh.com":case"fstatvfs@openssh.com":{const n=e._biOpt,o={f_bsize:C.readUInt64BE(n),f_frsize:C.readUInt64BE(n),f_blocks:C.readUInt64BE(n),f_bfree:C.readUInt64BE(n),f_bavail:C.readUInt64BE(n),f_files:C.readUInt64BE(n),f_ffree:C.readUInt64BE(n),f_favail:C.readUInt64BE(n),f_sid:C.readUInt64BE(n),f_flag:C.readUInt64BE(n),f_namemax:C.readUInt64BE(n)};if(void 0===o.f_namemax)break;return e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ${t.extended})`),C.clear(),void("function"==typeof t.cb&&t.cb(void 0,o))}case"limits@openssh.com":{const n={maxPktLen:C.readUInt64BE(),maxReadLen:C.readUInt64BE(),maxWriteLen:C.readUInt64BE(),maxOpenHandles:C.readUInt64BE()};if(void 0===n.maxOpenHandles)break;return e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ${t.extended})`),C.clear(),void("function"==typeof t.cb&&t.cb(void 0,n))}default:return e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ???)`),C.clear(),void("function"==typeof t.cb&&t.cb())}}return C.clear(),q(e,"Malformed EXTENDED_REPLY packet")}},$={1:(e,t)=>{if(-1!==e._version)return q(e,"Duplicate INIT packet");const r={};C.init(t,1);let n=C.readUInt32BE();for(;C.avail();){const e=C.readString(!0),t=C.readString(!0);if(void 0===t){n=void 0;break}r[e]=t}if(C.clear(),void 0===n)return q(e,"Malformed INIT packet");if(e._debug){const t=Object.keys(r);t.length?e._debug(`SFTP: Inbound: Received INIT (v${n}, exts:${t})`):e._debug(`SFTP: Inbound: Received INIT (v${n})`)}F(e,w),e._version=n,e._extensions=r,e.emit("ready")},3:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString(!0),o=C.readUInt32BE(),s=j(e._biOpt);if(C.clear(),void 0===s)return q(e,"Malformed OPEN packet");e._debug&&e._debug(`SFTP: Inbound: Received OPEN (id:${r})`),e.emit("OPEN",r,n,o,s)||e.status(r,m.OP_UNSUPPORTED)},4:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString();if(C.clear(),void 0===n||n.length>256)return q(e,"Malformed CLOSE packet");e._debug&&e._debug(`SFTP: Inbound: Received CLOSE (id:${r})`),e.emit("CLOSE",r,n)||e.status(r,m.OP_UNSUPPORTED)},5:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString(),o=C.readUInt64BE(e._biOpt),s=C.readUInt32BE();if(C.clear(),void 0===s||n.length>256)return q(e,"Malformed READ packet");e._debug&&e._debug(`SFTP: Inbound: Received READ (id:${r})`),e.emit("READ",r,n,o,s)||e.status(r,m.OP_UNSUPPORTED)},6:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString(),o=C.readUInt64BE(e._biOpt),s=C.readString();if(C.clear(),void 0===s||n.length>256)return q(e,"Malformed WRITE packet");e._debug&&e._debug(`SFTP: Inbound: Received WRITE (id:${r})`),e.emit("WRITE",r,n,o,s)||e.status(r,m.OP_UNSUPPORTED)},7:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString(!0);if(C.clear(),void 0===n)return q(e,"Malformed LSTAT packet");e._debug&&e._debug(`SFTP: Inbound: Received LSTAT (id:${r})`),e.emit("LSTAT",r,n)||e.status(r,m.OP_UNSUPPORTED)},8:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString();if(C.clear(),void 0===n||n.length>256)return q(e,"Malformed FSTAT packet");e._debug&&e._debug(`SFTP: Inbound: Received FSTAT (id:${r})`),e.emit("FSTAT",r,n)||e.status(r,m.OP_UNSUPPORTED)},9:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString(!0),o=j(e._biOpt);if(C.clear(),void 0===o)return q(e,"Malformed SETSTAT packet");e._debug&&e._debug(`SFTP: Inbound: Received SETSTAT (id:${r})`),e.emit("SETSTAT",r,n,o)||e.status(r,m.OP_UNSUPPORTED)},10:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString(),o=j(e._biOpt);if(C.clear(),void 0===o||n.length>256)return q(e,"Malformed FSETSTAT packet");e._debug&&e._debug(`SFTP: Inbound: Received FSETSTAT (id:${r})`),e.emit("FSETSTAT",r,n,o)||e.status(r,m.OP_UNSUPPORTED)},11:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString(!0);if(C.clear(),void 0===n)return q(e,"Malformed OPENDIR packet");e._debug&&e._debug(`SFTP: Inbound: Received OPENDIR (id:${r})`),e.emit("OPENDIR",r,n)||e.status(r,m.OP_UNSUPPORTED)},12:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString();if(C.clear(),void 0===n||n.length>256)return q(e,"Malformed READDIR packet");e._debug&&e._debug(`SFTP: Inbound: Received READDIR (id:${r})`),e.emit("READDIR",r,n)||e.status(r,m.OP_UNSUPPORTED)},13:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString(!0);if(C.clear(),void 0===n)return q(e,"Malformed REMOVE packet");e._debug&&e._debug(`SFTP: Inbound: Received REMOVE (id:${r})`),e.emit("REMOVE",r,n)||e.status(r,m.OP_UNSUPPORTED)},14:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString(!0),o=j(e._biOpt);if(C.clear(),void 0===o)return q(e,"Malformed MKDIR packet");e._debug&&e._debug(`SFTP: Inbound: Received MKDIR (id:${r})`),e.emit("MKDIR",r,n,o)||e.status(r,m.OP_UNSUPPORTED)},15:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString(!0);if(C.clear(),void 0===n)return q(e,"Malformed RMDIR packet");e._debug&&e._debug(`SFTP: Inbound: Received RMDIR (id:${r})`),e.emit("RMDIR",r,n)||e.status(r,m.OP_UNSUPPORTED)},16:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString(!0);if(C.clear(),void 0===n)return q(e,"Malformed REALPATH packet");e._debug&&e._debug(`SFTP: Inbound: Received REALPATH (id:${r})`),e.emit("REALPATH",r,n)||e.status(r,m.OP_UNSUPPORTED)},17:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString(!0);if(C.clear(),void 0===n)return q(e,"Malformed STAT packet");e._debug&&e._debug(`SFTP: Inbound: Received STAT (id:${r})`),e.emit("STAT",r,n)||e.status(r,m.OP_UNSUPPORTED)},18:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString(!0),o=C.readString(!0);if(C.clear(),void 0===o)return q(e,"Malformed RENAME packet");e._debug&&e._debug(`SFTP: Inbound: Received RENAME (id:${r})`),e.emit("RENAME",r,n,o)||e.status(r,m.OP_UNSUPPORTED)},19:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString(!0);if(C.clear(),void 0===n)return q(e,"Malformed READLINK packet");e._debug&&e._debug(`SFTP: Inbound: Received READLINK (id:${r})`),e.emit("READLINK",r,n)||e.status(r,m.OP_UNSUPPORTED)},20:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString(!0),o=C.readString(!0);if(C.clear(),void 0===o)return q(e,"Malformed SYMLINK packet");let s;e._debug&&e._debug(`SFTP: Inbound: Received SYMLINK (id:${r})`),s=e._isOpenSSH?e.emit("SYMLINK",r,o,n):e.emit("SYMLINK",r,n,o),s||e.status(r,m.OP_UNSUPPORTED)},[_]:(e,t)=>{C.init(t,1);const r=C.readUInt32BE(),n=C.readString(!0);if(void 0===n)return C.clear(),q(e,"Malformed EXTENDED packet");let o;C.avail()&&(o=C.readRaw()),C.clear(),e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED (id:${r})`),e.emit("EXTENDED",r,n,o)||e.status(r,m.OP_UNSUPPORTED)}},{ERR_INVALID_ARG_TYPE:V,ERR_OUT_OF_RANGE:J,validateNumber:K}=r(85607);let Q;const Y=[];function X(e,t){if(!Number.isSafeInteger(e)){if(K(e,t),!Number.isInteger(e))throw new J(t,"an integer",e);throw new J(t,">= 0 and <= 2 ** 53 - 1",e)}if(e<0)throw new J(t,">= 0 and <= 2 ** 53 - 1",e)}function Z(e){return e+7&-8}function ee(e,t,r){if(void 0===r)r={};else if("string"==typeof r)r={encoding:r};else{if(null===r||"object"!=typeof r)throw new TypeError('"options" argument must be a string or an object');r=Object.create(r)}if(void 0===r.highWaterMark&&(r.highWaterMark=65536),r.emitClose=!1,r.autoDestroy=!1,i.call(this,r),this.path=t,this.flags=void 0===r.flags?"r":r.flags,this.mode=void 0===r.mode?438:r.mode,this.start=r.start,this.end=r.end,this.autoClose=void 0===r.autoClose||r.autoClose,this.pos=0,this.bytesRead=0,this.isClosed=!1,this.handle=void 0===r.handle?null:r.handle,this.sftp=e,this._opening=!1,void 0!==this.start&&(X(this.start,"start"),this.pos=this.start),void 0===this.end)this.end=1/0;else if(this.end!==1/0&&(X(this.end,"end"),void 0!==this.start&&this.start>this.end))throw new J("start",`<= "end" (here: ${this.end})`,this.start);this.on("end",(function(){this.autoClose&&this.destroy()})),Buffer.isBuffer(this.handle)||this.open()}function te(e,t,r){if(!e.handle)return n();function n(n){t(n=n||r),e.isClosed=!0,n||e.emit("close")}e.sftp.close(e.handle,n)}function re(e,t,r){if(void 0===r)r={};else if("string"==typeof r)r={encoding:r};else{if(null===r||"object"!=typeof r)throw new TypeError('"options" argument must be a string or an object');r=Object.create(r)}r.emitClose=!1,r.autoDestroy=!1,a.call(this,r),this.path=t,this.flags=void 0===r.flags?"w":r.flags,this.mode=void 0===r.mode?438:r.mode,this.start=r.start,this.autoClose=void 0===r.autoClose||r.autoClose,this.pos=0,this.bytesWritten=0,this.isClosed=!1,this.handle=void 0===r.handle?null:r.handle,this.sftp=e,this._opening=!1,void 0!==this.start&&(X(this.start,"start"),this.pos=this.start),r.encoding&&this.setDefaultEncoding(r.encoding),this.on("finish",(function(){this._writableState.finalCalled||this.autoClose&&this.destroy()})),Buffer.isBuffer(this.handle)||this.open()}c(ee,i),ee.prototype.open=function(){this._opening||(this._opening=!0,this.sftp.open(this.path,this.flags,this.mode,((e,t)=>{if(this._opening=!1,e)return this.emit("error",e),void(this.autoClose&&this.destroy());this.handle=t,this.emit("open",t),this.emit("ready"),this.read()})))},ee.prototype._read=function(e){if(!Buffer.isBuffer(this.handle))return this.once("open",(()=>this._read(e)));if(this.destroyed)return;var t;(!Q||Q.length-Q.used<128)&&(t=this.readableHighWaterMark||this._readableState.highWaterMark,Q=Y.length>0?Y.pop():Buffer.allocUnsafe(t),Q.used=0);const r=Q;let n=Math.min(Q.length-Q.used,e);const o=Q.used;if(void 0!==this.end&&(n=Math.min(this.end-this.pos+1,n)),n<=0)return this.push(null);this.sftp.read(this.handle,Q,Q.used,n,this.pos,((e,t)=>{if(e)return this.emit("error",e),void(this.autoClose&&this.destroy());let s=null;if(o+n===r.used&&r===Q)r.used=Z(r.used+t-n);else{const e=o+n&-8,s=Z(o+t);e-s>=128&&Y.push(r.slice(s,e))}t>0&&(this.bytesRead+=t,s=r.slice(o,o+t)),this.pos+=t,this.push(s)})),Q.used=Z(Q.used+n)},ee.prototype._destroy=function(e,t){!this._opening||Buffer.isBuffer(this.handle)?(te(this,t,e),this.handle=null,this._opening=!1):this.once("open",te.bind(null,this,t,e))},ee.prototype.close=function(e){this.destroy(null,e)},Object.defineProperty(ee.prototype,"pending",{get(){return null===this.handle},configurable:!0}),c(re,a),re.prototype._final=function(e){this.autoClose&&this.destroy(),e()},re.prototype.open=function(){this._opening||(this._opening=!0,this.sftp.open(this.path,this.flags,this.mode,((e,t)=>{if(this._opening=!1,e)return this.emit("error",e),void(this.autoClose&&this.destroy());this.handle=t;const r=e=>{if(e)this.sftp.chmod(this.path,this.mode,(e=>r()));else if("a"!==this.flags[0])this.emit("open",t),this.emit("ready");else{const e=(r,n)=>{r?this.sftp.stat(this.path,((t,n)=>{if(t)return this.destroy(),void this.emit("error",r);e(null,n)})):(this.pos=n.size,this.emit("open",t),this.emit("ready"))};this.sftp.fstat(t,e)}};this.sftp.fchmod(t,this.mode,r)})))},re.prototype._write=function(e,t,r){if(!Buffer.isBuffer(e)){const t=new V("data","Buffer",e);return this.emit("error",t)}if(!Buffer.isBuffer(this.handle))return this.once("open",(function(){this._write(e,t,r)}));this.sftp.write(this.handle,e,0,e.length,this.pos,((e,t)=>{if(e)return this.autoClose&&this.destroy(),r(e);this.bytesWritten+=t,r()})),this.pos+=e.length},re.prototype._writev=function(e,t){if(!Buffer.isBuffer(this.handle))return this.once("open",(function(){this._writev(e,t)}));const r=this.sftp,n=this.handle;let o=e.length;const s=(e,r)=>{if(e)return this.destroy(),t(e);this.bytesWritten+=r,0==--o&&t()};for(let t=0;t<e.length;++t){const o=e[t].chunk;r.write(n,o,0,o.length,this.pos,s),this.pos+=o.length}},"function"!=typeof a.prototype.destroy&&(re.prototype.destroy=ee.prototype.destroy),re.prototype._destroy=ee.prototype._destroy,re.prototype.close=function(e){if(e){if(this.isClosed)return void process.nextTick(e);this.on("close",e)}this.autoClose||this.on("finish",this.destroy.bind(this)),this.end()},re.prototype.destroySoon=re.prototype.end,Object.defineProperty(re.prototype,"pending",{get(){return null===this.handle},configurable:!0}),e.exports={flagsToString:U,OPEN_MODE:b,SFTP:class extends n{constructor(e,t,r){super(),"object"==typeof r&&r||(r={});const n=e._protocol._remoteIdentRaw;this.server=!!r.server,this._debug="function"==typeof r.debug?r.debug:void 0,this._isOpenSSH=n&&A.test(n),this._version=-1,this._extensions={},this._biOpt=r.biOpt,this._pktLenBytes=0,this._pktLen=0,this._pktPos=0,this._pktType=0,this._pktData=void 0,this._writeReqid=-1,this._requests={},this._maxInPktLen=T,this._maxOutPktLen=34e3,this._maxReadLen=(this._isOpenSSH?T:34e3)-2048,this._maxWriteLen=(this._isOpenSSH?T:34e3)-2048,this.maxOpenHandles=void 0,this._client=e,this._protocol=e._protocol,this._callbacks=[],this._hasX11=!1,this._exit={code:void 0,signal:void 0,dump:void 0,desc:void 0},this._waitWindow=!1,this._chunkcb=void 0,this._buffer=[],this.type=t.type,this.subtype=void 0,this.incoming=t.incoming,this.outgoing=t.outgoing,this.stderr=I,this.readable=!0}push(e){if(null===e){if(z(this),!this.readable)return;return this.readable=!1,void this.emit("end")}let t=0;for(;t<e.length;){if(this._pktLenBytes<4){let r=Math.min(4-this._pktLenBytes,e.length-t);for(this._pktLenBytes+=r;r--;)this._pktLen=(this._pktLen<<8)+e[t++];if(this._pktLenBytes<4)return;if(0===this._pktLen)return q(this,"Invalid packet length");if(this._pktLen>this._maxInPktLen){const e=this._maxInPktLen;return q(this,`Packet length ${this._pktLen} exceeds max length of ${e}`)}if(t>=e.length)return}if(this._pktPos<this._pktLen){const r=Math.min(this._pktLen-this._pktPos,e.length-t);if(0!==t||r!==e.length?r===this._pktLen?this._pkt=new u(e.buffer,e.byteOffset+t,r):(this._pkt||(this._pkt=Buffer.allocUnsafe(this._pktLen)),this._pkt.set(new Uint8Array(e.buffer,e.byteOffset+t,r),this._pktPos)):r===this._pktLen?this._pkt=e:(this._pkt||(this._pkt=Buffer.allocUnsafe(this._pktLen)),this._pkt.set(e,this._pktPos)),t+=r,this._pktPos+=r,this._pktPos<this._pktLen)return}const r=this._pkt[0],n=this._pkt;this._pktLen=0,this._pktLenBytes=0,this._pkt=void 0,this._pktPos=0;const o=this.server?$[r]:G[r];if(!o)return q(this,`Unknown packet type ${r}`);if(-1===this._version)if(this.server){if(1!==r)return q(this,`Expected INIT packet, got ${r}`)}else if(2!==r)return q(this,`Expected VERSION packet, got ${r}`);if(!1===o(this,n))return}}end(){this.destroy()}destroy(){"open"!==this.outgoing.state&&"eof"!==this.outgoing.state||(this.outgoing.state="closing",this._protocol.channelClose(this.outgoing.id))}_init(){this._init=R,this.server||F(this,E)}createReadStream(e,t){if(this.server)throw new Error("Client-only method called in server mode");return new ee(this,e,t)}createWriteStream(e,t){if(this.server)throw new Error("Client-only method called in server mode");return new re(this,e,t)}open(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");"function"==typeof r&&(n=r,r=void 0);const o="number"==typeof t?t:x(t);if(null===o)throw new Error(`Unknown flags string: ${t}`);let s=0,i=0;"string"!=typeof r&&"number"!=typeof r||(r={mode:r}),"object"==typeof r&&null!==r&&(s=(r=M(r)).flags,i=r.nb);const a=Buffer.byteLength(e);let c=9;const l=Buffer.allocUnsafe(13+a+4+4+i);f(l,l.length-4,0),l[4]=3;const u=this._writeReqid=this._writeReqid+1&S;f(l,u,5),f(l,a,c),l.utf8Write(e,c+=4,a),f(l,o,c+=a),f(l,s,c+=4),i&&(c+=4,i===g.length?l.set(g,c):d(g,l,0,i,c),c+=i),this._requests[u]={cb:n};const h=F(this,l);this._debug&&this._debug(`SFTP: Outbound: ${h?"Buffered":"Sending"} OPEN`)}close(e,t){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const r=e.length;let n=9;const o=Buffer.allocUnsafe(13+r);f(o,o.length-4,0),o[4]=4;const s=this._writeReqid=this._writeReqid+1&S;f(o,s,5),f(o,r,n),o.set(e,n+=4),this._requests[s]={cb:t};const i=F(this,o);this._debug&&this._debug(`SFTP: Outbound: ${i?"Buffered":"Sending"} CLOSE`)}read(e,t,r,n,o,s){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");if(!Buffer.isBuffer(t))throw new Error("buffer is not a Buffer");if(r>=t.length)throw new Error("offset is out of bounds");if(r+n>t.length)throw new Error("length extends beyond buffer");if(null===o)throw new Error("null position currently unsupported");O(this,e,t,r,n,o,s)}readData(e,t,r,n,o,s){this.read(e,t,r,n,o,s)}write(e,t,r,n,o,s){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");if(!Buffer.isBuffer(t))throw new Error("buffer is not a Buffer");if(r>t.length)throw new Error("offset is out of bounds");if(r+n>t.length)throw new Error("length extends beyond buffer");if(null===o)throw new Error("null position currently unsupported");if(!n)return void(s&&process.nextTick(s,void 0,0));const i=this._maxWriteLen,a=Math.max(n-i,0),c=o;a&&(n=i);const l=e.length;let u=9;const h=Buffer.allocUnsafe(13+l+8+4+n);f(h,h.length-4,0),h[4]=6;const p=this._writeReqid=this._writeReqid+1&S;f(h,p,5),f(h,l,u),h.set(e,u+=4),u+=l;for(let e=7;e>=0;--e)h[u+e]=255&o,o/=256;f(h,n,u+=8),d(t,h,r,r+n,u+=4),this._requests[p]={cb:o=>{o?"function"==typeof s&&s(o):a?this.write(e,t,r+n,a,c+n,s):"function"==typeof s&&s(void 0,r+n)}};const g=F(this,h);if(this._debug){const e=g?"Sent":"Buffered";this._debug(`SFTP: Outbound: ${e} WRITE (id:${p})`)}}writeData(e,t,r,n,o,s){this.write(e,t,r,n,o,s)}fastGet(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");k(this,o,e,t,r,n)}fastPut(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");k(o,this,e,t,r,n)}readFile(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");let n;if("function"==typeof r?n=r:"function"==typeof t&&(n=t,t=void 0),"string"==typeof t)t={encoding:t,flag:"r"};else if(t){if("object"!=typeof t)throw new TypeError("Bad arguments")}else t={encoding:null,flag:"r"};const o=t.encoding;if(o&&!Buffer.isEncoding(o))throw new Error(`Unknown encoding: ${o}`);let s,i,a,c,l=0,u=0;const d=t.flag||"r",p=()=>{0===s?(i=Buffer.allocUnsafe(8192),this.read(c,i,0,8192,u,f)):this.read(c,i,l,s-l,u,f)},f=(e,t)=>{let r;if(e){if(r=e.code===m.EOF,!r)return this.close(c,(()=>n&&n(e)))}else r=!1;if(r||0===s&&0===t)return g();u+=t,l+=t,0!==s?l===s?g():p():(a.push(h(i,0,t)),p())};f._wantEOFError=!0;const g=()=>{this.close(c,(e=>(0===s?i=Buffer.concat(a,l):l<s&&(i=h(i,0,l)),o&&(i=i.toString(o)),n&&n(e,i))))};this.open(e,d,438,((t,r)=>{if(t)return n&&n(t);c=r;const o=(t,r)=>{if(t)this.stat(e,((e,r)=>{if(e)return this.close(c,(()=>{n&&n(t)}));o(null,r)}));else{if(s=r.size||0,0===s)return a=[],p();i=Buffer.allocUnsafe(s),p()}};this.fstat(c,o)}))}writeFile(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");let o;if("function"==typeof n?o=n:"function"==typeof r&&(o=r,r=void 0),"string"==typeof r)r={encoding:r,mode:438,flag:"w"};else if(r){if("object"!=typeof r)throw new TypeError("Bad arguments")}else r={encoding:"utf8",mode:438,flag:"w"};if(r.encoding&&!Buffer.isEncoding(r.encoding))throw new Error(`Unknown encoding: ${r.encoding}`);const s=r.flag||"w";this.open(e,s,r.mode,((n,i)=>{if(n)o&&o(n);else{const n=Buffer.isBuffer(t)?t:Buffer.from(""+t,r.encoding||"utf8"),a=/a/.test(s)?null:0;if(null===a){const t=(r,s)=>{r?this.stat(e,((e,n)=>{if(e)return this.close(i,(()=>{o&&o(r)}));t(null,n)})):N(this,i,n,0,n.length,s.size,o)};return void this.fstat(i,t)}N(this,i,n,0,n.length,a,o)}}))}appendFile(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");let o;if("function"==typeof n?o=n:"function"==typeof r&&(o=r,r=void 0),"string"==typeof r)r={encoding:r,mode:438,flag:"a"};else if(r){if("object"!=typeof r)throw new TypeError("Bad arguments")}else r={encoding:"utf8",mode:438,flag:"a"};r.flag||(r=Object.assign({flag:"a"},r)),this.writeFile(e,t,r,o)}exists(e,t){if(this.server)throw new Error("Client-only method called in server mode");this.stat(e,(e=>{t&&t(!e)}))}unlink(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const o=Buffer.allocUnsafe(13+r);f(o,o.length-4,0),o[4]=13;const s=this._writeReqid=this._writeReqid+1&S;f(o,s,5),f(o,r,n),o.utf8Write(e,n+=4,r),this._requests[s]={cb:t};const i=F(this,o);this._debug&&this._debug(`SFTP: Outbound: ${i?"Buffered":"Sending"} REMOVE`)}rename(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e),o=Buffer.byteLength(t);let s=9;const i=Buffer.allocUnsafe(13+n+4+o);f(i,i.length-4,0),i[4]=18;const a=this._writeReqid=this._writeReqid+1&S;f(i,a,5),f(i,n,s),i.utf8Write(e,s+=4,n),f(i,o,s+=n),i.utf8Write(t,s+=4,o),this._requests[a]={cb:r};const c=F(this,i);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} RENAME`)}mkdir(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");let n=0,o=0;"function"==typeof t&&(r=t,t=void 0),"object"==typeof t&&null!==t&&(n=(t=M(t)).flags,o=t.nb);const s=Buffer.byteLength(e);let i=9;const a=Buffer.allocUnsafe(13+s+4+o);f(a,a.length-4,0),a[4]=14;const c=this._writeReqid=this._writeReqid+1&S;f(a,c,5),f(a,s,i),a.utf8Write(e,i+=4,s),f(a,n,i+=s),o&&(i+=4,o===g.length?a.set(g,i):d(g,a,0,o,i),i+=o),this._requests[c]={cb:r};const l=F(this,a);this._debug&&this._debug(`SFTP: Outbound: ${l?"Buffered":"Sending"} MKDIR`)}rmdir(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const o=Buffer.allocUnsafe(13+r);f(o,o.length-4,0),o[4]=15;const s=this._writeReqid=this._writeReqid+1&S;f(o,s,5),f(o,r,n),o.utf8Write(e,n+=4,r),this._requests[s]={cb:t};const i=F(this,o);this._debug&&this._debug(`SFTP: Outbound: ${i?"Buffered":"Sending"} RMDIR`)}readdir(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");"function"==typeof t&&(r=t,t={}),"object"==typeof t&&null!==t||(t={});const n=!t||!t.full;if(!Buffer.isBuffer(e)&&"string"!=typeof e)throw new Error("missing directory handle or path");if("string"==typeof e){const n=[];let o=0;const s=(e,i)=>{if(e)return r(e);this.readdir(i,t,((e,t)=>{const a=e&&e.code===m.EOF;if(e&&!a)return this.close(i,(()=>r(e)));if(a)return this.close(i,(e=>{if(e)return r(e);r(void 0,n)}));for(let e=0;e<t.length;++e,++o)n[o]=t[e];s(void 0,i)}))};return this.opendir(e,s)}const o=e.length;let s=9;const i=Buffer.allocUnsafe(13+o);f(i,i.length-4,0),i[4]=12;const a=this._writeReqid=this._writeReqid+1&S;f(i,a,5),f(i,o,s),i.set(e,s+=4),this._requests[a]={cb:n?(e,t)=>{if("function"==typeof r){if(e)return r(e);for(let e=t.length-1;e>=0;--e)"."!==t[e].filename&&".."!==t[e].filename||t.splice(e,1);r(void 0,t)}}:r};const c=F(this,i);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} READDIR`)}fstat(e,t){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const r=e.length;let n=9;const o=Buffer.allocUnsafe(13+r);f(o,o.length-4,0),o[4]=8;const s=this._writeReqid=this._writeReqid+1&S;f(o,s,5),f(o,r,n),o.set(e,n+=4),this._requests[s]={cb:t};const i=F(this,o);this._debug&&this._debug(`SFTP: Outbound: ${i?"Buffered":"Sending"} FSTAT`)}stat(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const o=Buffer.allocUnsafe(13+r);f(o,o.length-4,0),o[4]=17;const s=this._writeReqid=this._writeReqid+1&S;f(o,s,5),f(o,r,n),o.utf8Write(e,n+=4,r),this._requests[s]={cb:t};const i=F(this,o);this._debug&&this._debug(`SFTP: Outbound: ${i?"Buffered":"Sending"} STAT`)}lstat(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const o=Buffer.allocUnsafe(13+r);f(o,o.length-4,0),o[4]=7;const s=this._writeReqid=this._writeReqid+1&S;f(o,s,5),f(o,r,n),o.utf8Write(e,n+=4,r),this._requests[s]={cb:t};const i=F(this,o);this._debug&&this._debug(`SFTP: Outbound: ${i?"Buffered":"Sending"} LSTAT`)}opendir(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const o=Buffer.allocUnsafe(13+r);f(o,o.length-4,0),o[4]=11;const s=this._writeReqid=this._writeReqid+1&S;f(o,s,5),f(o,r,n),o.utf8Write(e,n+=4,r),this._requests[s]={cb:t};const i=F(this,o);this._debug&&this._debug(`SFTP: Outbound: ${i?"Buffered":"Sending"} OPENDIR`)}setstat(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");let n=0,o=0;"object"==typeof t&&null!==t?(n=(t=M(t)).flags,o=t.nb):"function"==typeof t&&(r=t);const s=Buffer.byteLength(e);let i=9;const a=Buffer.allocUnsafe(13+s+4+o);f(a,a.length-4,0),a[4]=9;const c=this._writeReqid=this._writeReqid+1&S;f(a,c,5),f(a,s,i),a.utf8Write(e,i+=4,s),f(a,n,i+=s),o&&(i+=4,o===g.length?a.set(g,i):d(g,a,0,o,i),i+=o),this._requests[c]={cb:r};const l=F(this,a);this._debug&&this._debug(`SFTP: Outbound: ${l?"Buffered":"Sending"} SETSTAT`)}fsetstat(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");let n=0,o=0;"object"==typeof t&&null!==t?(n=(t=M(t)).flags,o=t.nb):"function"==typeof t&&(r=t);const s=e.length;let i=9;const a=Buffer.allocUnsafe(13+s+4+o);f(a,a.length-4,0),a[4]=10;const c=this._writeReqid=this._writeReqid+1&S;f(a,c,5),f(a,s,i),a.set(e,i+=4),f(a,n,i+=s),o&&(i+=4,o===g.length?a.set(g,i):d(g,a,0,o,i),i+=o),this._requests[c]={cb:r};const l=F(this,a);this._debug&&this._debug(`SFTP: Outbound: ${l?"Buffered":"Sending"} FSETSTAT`)}futimes(e,t,r,n){return this.fsetstat(e,{atime:L(t),mtime:L(r)},n)}utimes(e,t,r,n){return this.setstat(e,{atime:L(t),mtime:L(r)},n)}fchown(e,t,r,n){return this.fsetstat(e,{uid:t,gid:r},n)}chown(e,t,r,n){return this.setstat(e,{uid:t,gid:r},n)}fchmod(e,t,r){return this.fsetstat(e,{mode:t},r)}chmod(e,t,r){return this.setstat(e,{mode:t},r)}readlink(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const o=Buffer.allocUnsafe(13+r);f(o,o.length-4,0),o[4]=19;const s=this._writeReqid=this._writeReqid+1&S;f(o,s,5),f(o,r,n),o.utf8Write(e,n+=4,r),this._requests[s]={cb:(e,r)=>{if("function"==typeof t)return e?t(e):r&&r.length?void t(void 0,r[0].filename):t(new Error("Response missing link info"))}};const i=F(this,o);this._debug&&this._debug(`SFTP: Outbound: ${i?"Buffered":"Sending"} READLINK`)}symlink(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(t),o=Buffer.byteLength(e);let s=9;const i=Buffer.allocUnsafe(13+n+4+o);f(i,i.length-4,0),i[4]=20;const a=this._writeReqid=this._writeReqid+1&S;f(i,a,5),this._isOpenSSH?(f(i,o,s),i.utf8Write(e,s+=4,o),f(i,n,s+=o),i.utf8Write(t,s+=4,n)):(f(i,n,s),i.utf8Write(t,s+=4,n),f(i,o,s+=n),i.utf8Write(e,s+=4,o)),this._requests[a]={cb:r};const c=F(this,i);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} SYMLINK`)}realpath(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const o=Buffer.allocUnsafe(13+r);f(o,o.length-4,0),o[4]=16;const s=this._writeReqid=this._writeReqid+1&S;f(o,s,5),f(o,r,n),o.utf8Write(e,n+=4,r),this._requests[s]={cb:(e,r)=>{if("function"==typeof t)return e?t(e):r&&r.length?void t(void 0,r[0].filename):t(new Error("Response missing path info"))}};const i=F(this,o);this._debug&&this._debug(`SFTP: Outbound: ${i?"Buffered":"Sending"} REALPATH`)}ext_openssh_rename(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");const n=this._extensions["posix-rename@openssh.com"];if(!n||"1"!==n)throw new Error("Server does not support this extended request");const o=Buffer.byteLength(e),s=Buffer.byteLength(t);let i=9;const a=Buffer.allocUnsafe(41+o+4+s);f(a,a.length-4,0),a[4]=_;const c=this._writeReqid=this._writeReqid+1&S;f(a,c,5),f(a,24,i),a.utf8Write("posix-rename@openssh.com",i+=4,24),f(a,o,i+=24),a.utf8Write(e,i+=4,o),f(a,s,i+=o),a.utf8Write(t,i+=4,s),this._requests[c]={cb:r};const l=F(this,a);if(this._debug){const e=l?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} posix-rename@openssh.com`)}}ext_openssh_statvfs(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=this._extensions["statvfs@openssh.com"];if(!r||"2"!==r)throw new Error("Server does not support this extended request");const n=Buffer.byteLength(e);let o=9;const s=Buffer.allocUnsafe(36+n);f(s,s.length-4,0),s[4]=_;const i=this._writeReqid=this._writeReqid+1&S;f(s,i,5),f(s,19,o),s.utf8Write("statvfs@openssh.com",o+=4,19),f(s,n,o+=19),s.utf8Write(e,o+=4,n),this._requests[i]={extended:"statvfs@openssh.com",cb:t};const a=F(this,s);if(this._debug){const e=a?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} statvfs@openssh.com`)}}ext_openssh_fstatvfs(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=this._extensions["fstatvfs@openssh.com"];if(!r||"2"!==r)throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const n=e.length;let o=9;const s=Buffer.allocUnsafe(37+n);f(s,s.length-4,0),s[4]=_;const i=this._writeReqid=this._writeReqid+1&S;f(s,i,5),f(s,20,o),s.utf8Write("fstatvfs@openssh.com",o+=4,20),f(s,n,o+=20),s.set(e,o+=4),this._requests[i]={extended:"fstatvfs@openssh.com",cb:t};const a=F(this,s);if(this._debug){const e=a?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} fstatvfs@openssh.com`)}}ext_openssh_hardlink(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["hardlink@openssh.com"])throw new Error("Server does not support this extended request");const n=Buffer.byteLength(e),o=Buffer.byteLength(t);let s=9;const i=Buffer.allocUnsafe(37+n+4+o);f(i,i.length-4,0),i[4]=_;const a=this._writeReqid=this._writeReqid+1&S;f(i,a,5),f(i,20,s),i.utf8Write("hardlink@openssh.com",s+=4,20),f(i,n,s+=20),i.utf8Write(e,s+=4,n),f(i,o,s+=n),i.utf8Write(t,s+=4,o),this._requests[a]={cb:r};const c=F(this,i);if(this._debug){const e=c?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} hardlink@openssh.com`)}}ext_openssh_fsync(e,t){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["fsync@openssh.com"])throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const r=e.length;let n=9;const o=Buffer.allocUnsafe(34+r);f(o,o.length-4,0),o[4]=_;const s=this._writeReqid=this._writeReqid+1&S;f(o,s,5),f(o,17,n),o.utf8Write("fsync@openssh.com",n+=4,17),f(o,r,n+=17),o.set(e,n+=4),this._requests[s]={cb:t};const i=F(this,o);this._debug&&this._debug(`SFTP: Outbound: ${i?"Buffered":"Sending"} fsync@openssh.com`)}ext_openssh_lsetstat(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["lsetstat@openssh.com"])throw new Error("Server does not support this extended request");let n=0,o=0;"object"==typeof t&&null!==t?(n=(t=M(t)).flags,o=t.nb):"function"==typeof t&&(r=t);const s=Buffer.byteLength(e);let i=9;const a=Buffer.allocUnsafe(37+s+4+o);f(a,a.length-4,0),a[4]=_;const c=this._writeReqid=this._writeReqid+1&S;f(a,c,5),f(a,20,i),a.utf8Write("lsetstat@openssh.com",i+=4,20),f(a,s,i+=20),a.utf8Write(e,i+=4,s),f(a,n,i+=s),o&&(i+=4,o===g.length?a.set(g,i):d(g,a,0,o,i),i+=o),this._requests[c]={cb:r};const l=F(this,a);if(this._debug){const e=l?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} lsetstat@openssh.com`)}}ext_openssh_expandPath(e,t){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["expand-path@openssh.com"])throw new Error("Server does not support this extended request");const r=Buffer.byteLength(e);let n=9;const o=Buffer.allocUnsafe(40+r);f(o,o.length-4,0),o[4]=_;const s=this._writeReqid=this._writeReqid+1&S;f(o,s,5),f(o,23,n),o.utf8Write("expand-path@openssh.com",n+=4,23),f(o,r,n+=20),o.utf8Write(e,n+=4,r),this._requests[s]={cb:t};const i=F(this,o);if(this._debug){const e=i?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} expand-path@openssh.com`)}}ext_copy_data(e,t,r,n,o,s){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["copy-data"])throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("Source handle is not a Buffer");if(!Buffer.isBuffer(n))throw new Error("Destination handle is not a Buffer");let i=0;const a=Buffer.allocUnsafe(26+e.length+8+8+4+n.length+8);f(a,a.length-4,i),i+=4,a[i]=_,++i;const c=this._writeReqid=this._writeReqid+1&S;f(a,c,i),i+=4,f(a,9,i),i+=4,a.utf8Write("copy-data",i,9),i+=9,f(a,e.length,i),i+=4,a.set(e,i),i+=e.length;for(let e=7;e>=0;--e)a[i+e]=255&t,t/=256;i+=8;for(let e=7;e>=0;--e)a[i+e]=255&r,r/=256;i+=8,f(a,n.length,i),i+=4,a.set(n,i),i+=n.length;for(let e=7;e>=0;--e)a[i+e]=255&o,o/=256;this._requests[c]={cb:s};const l=F(this,a);if(this._debug){const e=l?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} copy-data`)}}handle(e,t){if(!this.server)throw new Error("Server-only method called in client mode");if(!Buffer.isBuffer(t))throw new Error("handle is not a Buffer");const r=t.length;if(r>256)throw new Error("handle too large (> 256 bytes)");let n=9;const o=Buffer.allocUnsafe(13+r);f(o,o.length-4,0),o[4]=102,f(o,e,5),f(o,r,n),r&&o.set(t,n+=4);const s=F(this,o);this._debug&&this._debug(`SFTP: Outbound: ${s?"Buffered":"Sending"} HANDLE`)}status(e,t,r){if(!this.server)throw new Error("Server-only method called in client mode");if(!y.has(t))throw new Error(`Bad status code: ${t}`);r||(r="");const n=Buffer.byteLength(r);let o=9;const s=Buffer.allocUnsafe(17+n+4);f(s,s.length-4,0),s[4]=101,f(s,e,5),f(s,t,o),f(s,n,o+=4),o+=4,n&&(s.utf8Write(r,o,n),o+=n),f(s,0,o);const i=F(this,s);this._debug&&this._debug(`SFTP: Outbound: ${i?"Buffered":"Sending"} STATUS`)}data(e,t,r){if(!this.server)throw new Error("Server-only method called in client mode");const n=Buffer.isBuffer(t);if(!n&&"string"!=typeof t)throw new Error("data is not a Buffer or string");let o;n||r||(r=void 0,o=!0);const s=n?t.length:Buffer.byteLength(t,r);let i=9;const a=Buffer.allocUnsafe(13+s);f(a,a.length-4,0),a[4]=103,f(a,e,5),f(a,s,i),s&&(n?a.set(t,i+=4):o?a.utf8Write(t,i+=4,s):a.write(t,i+=4,s,r));const c=F(this,a);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} DATA`)}name(e,t){if(!this.server)throw new Error("Server-only method called in client mode");if(!Array.isArray(t)){if("object"!=typeof t||null===t)throw new Error("names is not an object or array");t=[t]}const r=t.length;let n,o=0;const s=[];for(let e=0;e<r;++e){const r=t[e],i=r&&r.filename&&"string"==typeof r.filename?r.filename:"";o+=4+Buffer.byteLength(i);const a=r&&r.longname&&"string"==typeof r.longname?r.longname:"";if(o+=4+Buffer.byteLength(a),"object"==typeof r.attrs&&null!==r.attrs){if(n=M(r.attrs),o+=4+n.nb,n.nb){let e;n.nb===g.length?e=new Uint8Array(g):(e=new Uint8Array(n.nb),d(g,e,0,n.nb,0)),n.bytes=e}s.push(n)}else o+=4,s.push(null)}let i=9;const a=Buffer.allocUnsafe(13+o);f(a,a.length-4,0),a[4]=104,f(a,e,5),f(a,r,i),i+=4;for(let e=0;e<r;++e){const r=t[e];{const e=r&&r.filename&&"string"==typeof r.filename?r.filename:"",t=Buffer.byteLength(e);f(a,t,i),i+=4,t&&(a.utf8Write(e,i,t),i+=t)}{const e=r&&r.longname&&"string"==typeof r.longname?r.longname:"",t=Buffer.byteLength(e);f(a,t,i),i+=4,t&&(a.utf8Write(e,i,t),i+=t)}const n=s[e];n?(f(a,n.flags,i),i+=4,n.flags&&n.bytes&&(a.set(n.bytes,i),i+=n.nb)):(f(a,0,i),i+=4)}const c=F(this,a);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} NAME`)}attrs(e,t){if(!this.server)throw new Error("Server-only method called in client mode");if("object"!=typeof t||null===t)throw new Error("attrs is not an object");const r=(t=M(t)).flags,n=t.nb;let o=9;const s=Buffer.allocUnsafe(13+n);f(s,s.length-4,0),s[4]=105,f(s,e,5),f(s,r,o),n&&(o+=4,n===g.length?s.set(g,o):d(g,s,0,n,o),o+=n);const i=F(this,s);this._debug&&this._debug(`SFTP: Outbound: ${i?"Buffered":"Sending"} ATTRS`)}},Stats:P,STATUS_CODE:m,stringToFlags:x}},3190:(e,t,r)=>{"use strict";const n=r(6113);let o;try{o=r(Object(function(){var e=new Error("Cannot find module 'cpu-features'");throw e.code="MODULE_NOT_FOUND",e}()))()}catch{}const{bindingAvailable:s,CIPHER_INFO:i,MAC_INFO:a}=r(38545),c=(()=>{if("function"==typeof n.sign&&"function"==typeof n.verify){const e="-----BEGIN PRIVATE KEY-----\r\nMC4CAQAwBQYDK2VwBCIEIHKj+sVa9WcD/q2DJUJaf43Kptc8xYuUQA4bOFj9vC8T\r\n-----END PRIVATE KEY-----",t=Buffer.from("a");let r,o;try{r=n.sign(null,t,e),o=n.verify(null,t,e,r)}catch{}return Buffer.isBuffer(r)&&64===r.length&&!0===o}return!1})(),l="function"==typeof n.diffieHellman&&"function"==typeof n.generateKeyPairSync&&"function"==typeof n.createPublicKey,u=["ecdh-sha2-nistp256","ecdh-sha2-nistp384","ecdh-sha2-nistp521","diffie-hellman-group-exchange-sha256","diffie-hellman-group14-sha256","diffie-hellman-group15-sha512","diffie-hellman-group16-sha512","diffie-hellman-group17-sha512","diffie-hellman-group18-sha512"];l&&(u.unshift("curve25519-sha256"),u.unshift("curve25519-sha256@libssh.org"));const d=u.concat(["diffie-hellman-group-exchange-sha1","diffie-hellman-group14-sha1","diffie-hellman-group1-sha1"]),h=["ecdsa-sha2-nistp256","ecdsa-sha2-nistp384","ecdsa-sha2-nistp521","rsa-sha2-512","rsa-sha2-256","ssh-rsa"];c&&h.unshift("ssh-ed25519");const p=h.concat(["ssh-dss"]),f=(()=>{const e=n.getCiphers();return t=>e.includes(i[t].sslName)})();let g=["aes128-gcm@openssh.com","aes256-gcm@openssh.com","aes128-ctr","aes192-ctr","aes256-ctr"];o&&o.flags&&!o.flags.aes?s?g.unshift("chacha20-poly1305@openssh.com"):g.push("chacha20-poly1305@openssh.com"):s&&o&&"x86"===o.arch?g.splice(4,0,"chacha20-poly1305@openssh.com"):g.push("chacha20-poly1305@openssh.com"),g=g.filter(f);const m=g.concat(["aes256-cbc","aes192-cbc","aes128-cbc","blowfish-cbc","3des-cbc","aes128-gcm","aes256-gcm","arcfour256","arcfour128","cast128-cbc","arcfour"].filter(f)),y=(()=>{const e=n.getHashes();return t=>e.includes(a[t].sslName)})(),v=["hmac-sha2-256-etm@openssh.com","hmac-sha2-512-etm@openssh.com","hmac-sha1-etm@openssh.com","hmac-sha2-256","hmac-sha2-512","hmac-sha1"].filter(y),_=v.concat(["hmac-md5","hmac-sha2-256-96","hmac-sha2-512-96","hmac-ripemd160","hmac-sha1-96","hmac-md5-96"].filter(y)),b=["none","zlib@openssh.com","zlib"],S=b.concat([]),E={BAD_DHGEX:1,OLD_EXIT:2,DYN_RPORT_BUG:4,BUG_DHGEX_LARGE:8};e.exports={MESSAGE:{DISCONNECT:1,IGNORE:2,UNIMPLEMENTED:3,DEBUG:4,SERVICE_REQUEST:5,SERVICE_ACCEPT:6,KEXINIT:20,NEWKEYS:21,KEXDH_INIT:30,KEXDH_REPLY:31,KEXDH_GEX_GROUP:31,KEXDH_GEX_INIT:32,KEXDH_GEX_REPLY:33,KEXDH_GEX_REQUEST:34,KEXECDH_INIT:30,KEXECDH_REPLY:31,USERAUTH_REQUEST:50,USERAUTH_FAILURE:51,USERAUTH_SUCCESS:52,USERAUTH_BANNER:53,USERAUTH_PASSWD_CHANGEREQ:60,USERAUTH_PK_OK:60,USERAUTH_INFO_REQUEST:60,USERAUTH_INFO_RESPONSE:61,GLOBAL_REQUEST:80,REQUEST_SUCCESS:81,REQUEST_FAILURE:82,CHANNEL_OPEN:90,CHANNEL_OPEN_CONFIRMATION:91,CHANNEL_OPEN_FAILURE:92,CHANNEL_WINDOW_ADJUST:93,CHANNEL_DATA:94,CHANNEL_EXTENDED_DATA:95,CHANNEL_EOF:96,CHANNEL_CLOSE:97,CHANNEL_REQUEST:98,CHANNEL_SUCCESS:99,CHANNEL_FAILURE:100},DISCONNECT_REASON:{HOST_NOT_ALLOWED_TO_CONNECT:1,PROTOCOL_ERROR:2,KEY_EXCHANGE_FAILED:3,RESERVED:4,MAC_ERROR:5,COMPRESSION_ERROR:6,SERVICE_NOT_AVAILABLE:7,PROTOCOL_VERSION_NOT_SUPPORTED:8,HOST_KEY_NOT_VERIFIABLE:9,CONNECTION_LOST:10,BY_APPLICATION:11,TOO_MANY_CONNECTIONS:12,AUTH_CANCELED_BY_USER:13,NO_MORE_AUTH_METHODS_AVAILABLE:14,ILLEGAL_USER_NAME:15},DISCONNECT_REASON_STR:void 0,CHANNEL_OPEN_FAILURE:{ADMINISTRATIVELY_PROHIBITED:1,CONNECT_FAILED:2,UNKNOWN_CHANNEL_TYPE:3,RESOURCE_SHORTAGE:4},TERMINAL_MODE:{TTY_OP_END:0,VINTR:1,VQUIT:2,VERASE:3,VKILL:4,VEOF:5,VEOL:6,VEOL2:7,VSTART:8,VSTOP:9,VSUSP:10,VDSUSP:11,VREPRINT:12,VWERASE:13,VLNEXT:14,VFLUSH:15,VSWTCH:16,VSTATUS:17,VDISCARD:18,IGNPAR:30,PARMRK:31,INPCK:32,ISTRIP:33,INLCR:34,IGNCR:35,ICRNL:36,IUCLC:37,IXON:38,IXANY:39,IXOFF:40,IMAXBEL:41,ISIG:50,ICANON:51,XCASE:52,ECHO:53,ECHOE:54,ECHOK:55,ECHONL:56,NOFLSH:57,TOSTOP:58,IEXTEN:59,ECHOCTL:60,ECHOKE:61,PENDIN:62,OPOST:70,OLCUC:71,ONLCR:72,OCRNL:73,ONOCR:74,ONLRET:75,CS7:90,CS8:91,PARENB:92,PARODD:93,TTY_OP_ISPEED:128,TTY_OP_OSPEED:129},CHANNEL_EXTENDED_DATATYPE:{STDERR:1},SIGNALS:["ABRT","ALRM","FPE","HUP","ILL","INT","QUIT","SEGV","TERM","USR1","USR2","KILL","PIPE"].reduce(((e,t)=>({...e,[t]:1})),{}),COMPAT:E,COMPAT_CHECKS:[["Cisco-1.25",E.BAD_DHGEX],[/^Cisco-1\./,E.BUG_DHGEX_LARGE],[/^[0-9.]+$/,E.OLD_EXIT],[/^OpenSSH_5\.\d+/,E.DYN_RPORT_BUG]],DEFAULT_KEX:u,SUPPORTED_KEX:d,DEFAULT_SERVER_HOST_KEY:h,SUPPORTED_SERVER_HOST_KEY:p,DEFAULT_CIPHER:g,SUPPORTED_CIPHER:m,DEFAULT_MAC:v,SUPPORTED_MAC:_,DEFAULT_COMPRESSION:b,SUPPORTED_COMPRESSION:S,curve25519Supported:l,eddsaSupported:c},e.exports.DISCONNECT_REASON_BY_VALUE=Array.from(Object.entries(e.exports.DISCONNECT_REASON)).reduce(((e,[t,r])=>({...e,[r]:t})),{})},38545:(e,t,r)=>{"use strict";const{createCipheriv:n,createDecipheriv:o,createHmac:s,randomFillSync:i,timingSafeEqual:a}=r(6113),{readUInt32BE:c,writeUInt32BE:l}=r(39205),u=Buffer[Symbol.species],d=2**32-1,h=Buffer.alloc(0),p=Buffer.alloc(4),f=new Map,g=35e3;let m,y,v,_,b,S,E;try{m=r(Object(function(){var e=new Error("Cannot find module './crypto/build/Release/sshcrypto.node'");throw e.code="MODULE_NOT_FOUND",e}())),({AESGCMCipher:y,ChaChaPolyCipher:v,GenericCipher:_,AESGCMDecipher:b,ChaChaPolyDecipher:S,GenericDecipher:E}=m)}catch{}const w=(()=>{function e(e,t,r,n,o,s,i){return{sslName:e,blockLen:t,keyLen:r,ivLen:0!==n||1&i?n:t,authLen:o,discardLen:s,stream:!!(1&i)}}return{"chacha20-poly1305@openssh.com":e("chacha20",8,64,0,16,0,1),"aes128-gcm":e("aes-128-gcm",16,16,12,16,0,1),"aes256-gcm":e("aes-256-gcm",16,32,12,16,0,1),"aes128-gcm@openssh.com":e("aes-128-gcm",16,16,12,16,0,1),"aes256-gcm@openssh.com":e("aes-256-gcm",16,32,12,16,0,1),"aes128-cbc":e("aes-128-cbc",16,16,0,0,0,0),"aes192-cbc":e("aes-192-cbc",16,24,0,0,0,0),"aes256-cbc":e("aes-256-cbc",16,32,0,0,0,0),"rijndael-cbc@lysator.liu.se":e("aes-256-cbc",16,32,0,0,0,0),"3des-cbc":e("des-ede3-cbc",8,24,0,0,0,0),"blowfish-cbc":e("bf-cbc",8,16,0,0,0,0),"idea-cbc":e("idea-cbc",8,16,0,0,0,0),"cast128-cbc":e("cast-cbc",8,16,0,0,0,0),"aes128-ctr":e("aes-128-ctr",16,16,16,0,0,1),"aes192-ctr":e("aes-192-ctr",16,24,16,0,0,1),"aes256-ctr":e("aes-256-ctr",16,32,16,0,0,1),"3des-ctr":e("des-ede3",8,24,8,0,0,1),"blowfish-ctr":e("bf-ecb",8,16,8,0,0,1),"cast128-ctr":e("cast5-ecb",8,16,8,0,0,1),arcfour:e("rc4",8,16,0,0,1536,1),arcfour128:e("rc4",8,16,0,0,1536,1),arcfour256:e("rc4",8,32,0,0,1536,1),arcfour512:e("rc4",8,64,0,0,1536,1)}})(),A=(()=>{function e(e,t,r,n){return{sslName:e,len:t,actualLen:r,isETM:n}}return{"hmac-md5":e("md5",16,16,!1),"hmac-md5-96":e("md5",16,12,!1),"hmac-ripemd160":e("ripemd160",20,20,!1),"hmac-sha1":e("sha1",20,20,!1),"hmac-sha1-etm@openssh.com":e("sha1",20,20,!0),"hmac-sha1-96":e("sha1",20,12,!1),"hmac-sha2-256":e("sha256",32,32,!1),"hmac-sha2-256-etm@openssh.com":e("sha256",32,32,!0),"hmac-sha2-256-96":e("sha256",32,12,!1),"hmac-sha2-512":e("sha512",64,64,!1),"hmac-sha2-512-etm@openssh.com":e("sha512",64,64,!0),"hmac-sha2-512-96":e("sha512",64,12,!1)}})(),T=Buffer.alloc(32),C=Buffer.alloc(16);let I,R,O;class k{constructor(e){const t=e.outbound;this.outSeqno=t.seqno,this._onWrite=t.onWrite,this._encKeyMain=t.cipherKey.slice(0,32),this._encKeyPktLen=t.cipherKey.slice(32),this._dead=!1}free(){this._dead=!0}allocPacket(e){let t=5+e,r=8-(t-4&7);r<4&&(r+=8),t+=r;const n=Buffer.allocUnsafe(t);return l(n,t-4,0),n[4]=r,i(n,5+e,r),n}encrypt(e){if(this._dead)return;C[0]=0,l(C,this.outSeqno,12);const t=n("chacha20",this._encKeyMain,C).update(T),r=n("chacha20",this._encKeyPktLen,C).update(e.slice(0,4));this._onWrite(r),C[0]=1;const o=n("chacha20",this._encKeyMain,C).update(e.slice(4));this._onWrite(o),O(R,r,r.length,o,o.length,t);const s=Buffer.allocUnsafe(16);s.set(new Uint8Array(I.HEAPU8.buffer,R,16),0),this._onWrite(s),this.outSeqno=this.outSeqno+1>>>0}}class N{constructor(e){const t=e.outbound;this.outSeqno=t.seqno,this._onWrite=t.onWrite,this._instance=new v(t.cipherKey),this._dead=!1}free(){this._dead=!0,this._instance.free()}allocPacket(e){let t=5+e,r=8-(t-4&7);r<4&&(r+=8),t+=r;const n=Buffer.allocUnsafe(t+16);return l(n,t-4,0),n[4]=r,i(n,5+e,r),n}encrypt(e){this._dead||(this._instance.encrypt(e,this.outSeqno),this._onWrite(e),this.outSeqno=this.outSeqno+1>>>0)}}class P{constructor(e){const t=e.outbound;this.outSeqno=t.seqno,this._onWrite=t.onWrite,this._encSSLName=t.cipherInfo.sslName,this._encKey=t.cipherKey,this._encIV=t.cipherIV,this._dead=!1}free(){this._dead=!0}allocPacket(e){let t=5+e,r=16-(t-4&15);r<4&&(r+=16),t+=r;const n=Buffer.allocUnsafe(t);return l(n,t-4,0),n[4]=r,i(n,5+e,r),n}encrypt(e){if(this._dead)return;const t=n(this._encSSLName,this._encKey,this._encIV);t.setAutoPadding(!1);const r=e.slice(0,4);t.setAAD(r),this._onWrite(r);const o=t.update(e.slice(4));this._onWrite(o);const s=t.final();s.length&&this._onWrite(s);const i=t.getAuthTag();this._onWrite(i),W(this._encIV),this.outSeqno=this.outSeqno+1>>>0}}class M{constructor(e){const t=e.outbound;this.outSeqno=t.seqno,this._onWrite=t.onWrite,this._instance=new y(t.cipherInfo.sslName,t.cipherKey,t.cipherIV),this._dead=!1}free(){this._dead=!0,this._instance.free()}allocPacket(e){let t=5+e,r=16-(t-4&15);r<4&&(r+=16),t+=r;const n=Buffer.allocUnsafe(t+16);return l(n,t-4,0),n[4]=r,i(n,5+e,r),n}encrypt(e){this._dead||(this._instance.encrypt(e),this._onWrite(e),this.outSeqno=this.outSeqno+1>>>0)}}class L{constructor(e){const t=e.outbound;this.outSeqno=t.seqno,this._onWrite=t.onWrite,this._encBlockLen=t.cipherInfo.blockLen,this._cipherInstance=n(t.cipherInfo.sslName,t.cipherKey,t.cipherIV),this._macSSLName=t.macInfo.sslName,this._macKey=t.macKey,this._macActualLen=t.macInfo.actualLen,this._macETM=t.macInfo.isETM,this._aadLen=this._macETM?4:0,this._dead=!1;const r=t.cipherInfo.discardLen;if(r){let e=f.get(r);void 0===e&&(e=Buffer.alloc(r),f.set(r,e)),this._cipherInstance.update(e)}}free(){this._dead=!0}allocPacket(e){const t=this._encBlockLen;let r=5+e,n=t-(r-this._aadLen&t-1);n<4&&(n+=t),r+=n;const o=Buffer.allocUnsafe(r);return l(o,r-4,0),o[4]=n,i(o,5+e,n),o}encrypt(e){if(this._dead)return;let t;if(this._macETM){const r=new Uint8Array(e.buffer,e.byteOffset,4),n=this._cipherInstance.update(new Uint8Array(e.buffer,e.byteOffset+4,e.length-4));this._onWrite(r),this._onWrite(n),t=s(this._macSSLName,this._macKey),l(p,this.outSeqno,0),t.update(p),t.update(r),t.update(n)}else{const r=this._cipherInstance.update(e);this._onWrite(r),t=s(this._macSSLName,this._macKey),l(p,this.outSeqno,0),t.update(p),t.update(e)}let r=t.digest();r.length>this._macActualLen&&(r=r.slice(0,this._macActualLen)),this._onWrite(r),this.outSeqno=this.outSeqno+1>>>0}}class B{constructor(e){const t=e.outbound;this.outSeqno=t.seqno,this._onWrite=t.onWrite,this._encBlockLen=t.cipherInfo.blockLen,this._macLen=t.macInfo.len,this._macActualLen=t.macInfo.actualLen,this._aadLen=t.macInfo.isETM?4:0,this._instance=new _(t.cipherInfo.sslName,t.cipherKey,t.cipherIV,t.macInfo.sslName,t.macKey,t.macInfo.isETM),this._dead=!1}free(){this._dead=!0,this._instance.free()}allocPacket(e){const t=this._encBlockLen;let r=5+e,n=t-(r-this._aadLen&t-1);n<4&&(n+=t),r+=n;const o=Buffer.allocUnsafe(r+this._macLen);return l(o,r-4,0),o[4]=n,i(o,5+e,n),o}encrypt(e){this._dead||(this._instance.encrypt(e,this.outSeqno),this._macActualLen<this._macLen&&(e=new u(e.buffer,e.byteOffset,e.length-(this._macLen-this._macActualLen))),this._onWrite(e),this.outSeqno=this.outSeqno+1>>>0)}}class D{constructor(e){const t=e.inbound;this.inSeqno=t.seqno,this._onPayload=t.onPayload,this._decKeyMain=t.decipherKey.slice(0,32),this._decKeyPktLen=t.decipherKey.slice(32),this._len=0,this._lenBuf=Buffer.alloc(4),this._lenPos=0,this._packet=null,this._pktLen=0,this._mac=Buffer.allocUnsafe(16),this._calcMac=Buffer.allocUnsafe(16),this._macPos=0}free(){}decrypt(e,t,r){for(;t<r;){if(this._lenPos<4){let n=Math.min(4-this._lenPos,r-t);for(;n--;)this._lenBuf[this._lenPos++]=e[t++];if(this._lenPos<4)return;C[0]=0,l(C,this.inSeqno,12);const s=o("chacha20",this._decKeyPktLen,C).update(this._lenBuf);if(this._len=c(s,0),this._len>g||this._len<8||0!=(7&this._len))throw new Error("Bad packet length")}if(this._pktLen<this._len){if(t>=r)return;const n=Math.min(this._len-this._pktLen,r-t);let o;if(o=0!==t||n!==r?new Uint8Array(e.buffer,e.byteOffset+t,n):e,n===this._len?this._packet=o:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(o,this._pktLen)),t+=n,this._pktLen+=n,this._pktLen<this._len||t>=r)return}{const n=Math.min(16-this._macPos,r-t);if(0!==t||n!==r?this._mac.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._macPos):this._mac.set(e,this._macPos),t+=n,this._macPos+=n,this._macPos<16)return}C[0]=0,l(C,this.inSeqno,12);const s=n("chacha20",this._decKeyMain,C).update(T);if(O(R,this._lenBuf,4,this._packet,this._packet.length,s),this._calcMac.set(new Uint8Array(I.HEAPU8.buffer,R,16),0),!a(this._calcMac,this._mac))throw new Error("Invalid MAC");C[0]=1;const i=o("chacha20",this._decKeyMain,C).update(this._packet),d=new u(i.buffer,i.byteOffset+1,i.length-i[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenPos=0,this._packet=null,this._pktLen=0,this._macPos=0;{const e=this._onPayload(d);if(void 0!==e)return!1===e?t:e}}}}class x{constructor(e){const t=e.inbound;this.inSeqno=t.seqno,this._onPayload=t.onPayload,this._instance=new S(t.decipherKey),this._len=0,this._lenBuf=Buffer.alloc(4),this._lenPos=0,this._packet=null,this._pktLen=0,this._mac=Buffer.allocUnsafe(16),this._macPos=0}free(){this._instance.free()}decrypt(e,t,r){for(;t<r;){if(this._lenPos<4){let n=Math.min(4-this._lenPos,r-t);for(;n--;)this._lenBuf[this._lenPos++]=e[t++];if(this._lenPos<4)return;if(this._len=this._instance.decryptLen(this._lenBuf,this.inSeqno),this._len>g||this._len<8||0!=(7&this._len))throw new Error("Bad packet length");if(t>=r)return}if(this._pktLen<this._len){const n=Math.min(this._len-this._pktLen,r-t);let o;if(o=0!==t||n!==r?new Uint8Array(e.buffer,e.byteOffset+t,n):e,n===this._len?this._packet=o:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(o,this._pktLen)),t+=n,this._pktLen+=n,this._pktLen<this._len||t>=r)return}{const n=Math.min(16-this._macPos,r-t);if(0!==t||n!==r?this._mac.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._macPos):this._mac.set(e,this._macPos),t+=n,this._macPos+=n,this._macPos<16)return}this._instance.decrypt(this._packet,this._mac,this.inSeqno);const n=new u(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenPos=0,this._packet=null,this._pktLen=0,this._macPos=0;{const e=this._onPayload(n);if(void 0!==e)return!1===e?t:e}}}}class U{constructor(e){const t=e.inbound;this.inSeqno=t.seqno,this._onPayload=t.onPayload,this._decipherInstance=null,this._decipherSSLName=t.decipherInfo.sslName,this._decipherKey=t.decipherKey,this._decipherIV=t.decipherIV,this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._tag=Buffer.allocUnsafe(16),this._tagPos=0}free(){}decrypt(e,t,r){for(;t<r;){if(this._lenBytes<4){let n=Math.min(4-this._lenBytes,r-t);for(this._lenBytes+=n;n--;)this._len=(this._len<<8)+e[t++];if(this._lenBytes<4)return;if(this._len+20>g||this._len<16||0!=(15&this._len))throw new Error("Bad packet length");this._decipherInstance=o(this._decipherSSLName,this._decipherKey,this._decipherIV),this._decipherInstance.setAutoPadding(!1),this._decipherInstance.setAAD(q(this._len))}if(this._pktLen<this._len){if(t>=r)return;const n=Math.min(this._len-this._pktLen,r-t);let o;if(o=0!==t||n!==r?this._decipherInstance.update(new Uint8Array(e.buffer,e.byteOffset+t,n)):this._decipherInstance.update(e),o.length&&(n===this._len?this._packet=o:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(o,this._packetPos)),this._packetPos+=o.length),t+=n,this._pktLen+=n,this._pktLen<this._len||t>=r)return}{const n=Math.min(16-this._tagPos,r-t);if(0!==t||n!==r?this._tag.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._tagPos):this._tag.set(e,this._tagPos),t+=n,this._tagPos+=n,this._tagPos<16)return}{this._decipherInstance.setAuthTag(this._tag);const e=this._decipherInstance.final();e.length&&(this._packet?this._packet.set(e,this._packetPos):this._packet=e)}const n=this._packet?new u(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1):h;this.inSeqno=this.inSeqno+1>>>0,W(this._decipherIV),this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._tagPos=0;{const e=this._onPayload(n);if(void 0!==e)return!1===e?t:e}}}}class j{constructor(e){const t=e.inbound;this.inSeqno=t.seqno,this._onPayload=t.onPayload,this._instance=new b(t.decipherInfo.sslName,t.decipherKey,t.decipherIV),this._len=0,this._lenBytes=0,this._packet=null,this._pktLen=0,this._tag=Buffer.allocUnsafe(16),this._tagPos=0}free(){}decrypt(e,t,r){for(;t<r;){if(this._lenBytes<4){let n=Math.min(4-this._lenBytes,r-t);for(this._lenBytes+=n;n--;)this._len=(this._len<<8)+e[t++];if(this._lenBytes<4)return;if(this._len+20>g||this._len<16||0!=(15&this._len))throw new Error(`Bad packet length: ${this._len}`)}if(this._pktLen<this._len){if(t>=r)return;const n=Math.min(this._len-this._pktLen,r-t);let o;if(o=0!==t||n!==r?new Uint8Array(e.buffer,e.byteOffset+t,n):e,n===this._len?this._packet=o:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(o,this._pktLen)),t+=n,this._pktLen+=n,this._pktLen<this._len||t>=r)return}{const n=Math.min(16-this._tagPos,r-t);if(0!==t||n!==r?this._tag.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._tagPos):this._tag.set(e,this._tagPos),t+=n,this._tagPos+=n,this._tagPos<16)return}this._instance.decrypt(this._packet,this._len,this._tag);const n=new u(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenBytes=0,this._packet=null,this._pktLen=0,this._tagPos=0;{const e=this._onPayload(n);if(void 0!==e)return!1===e?t:e}}}}class F{constructor(e){const t=e.inbound;this.inSeqno=t.seqno,this._onPayload=t.onPayload,this._decipherInstance=o(t.decipherInfo.sslName,t.decipherKey,t.decipherIV),this._decipherInstance.setAutoPadding(!1),this._block=Buffer.allocUnsafe(t.macInfo.isETM?4:t.decipherInfo.blockLen),this._blockSize=t.decipherInfo.blockLen,this._blockPos=0,this._len=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._mac=Buffer.allocUnsafe(t.macInfo.actualLen),this._macPos=0,this._macSSLName=t.macInfo.sslName,this._macKey=t.macKey,this._macActualLen=t.macInfo.actualLen,this._macETM=t.macInfo.isETM,this._macInstance=null;const r=t.decipherInfo.discardLen;if(r){let e=f.get(r);void 0===e&&(e=Buffer.alloc(r),f.set(r,e)),this._decipherInstance.update(e)}}free(){}decrypt(e,t,r){for(;t<r;){if(this._blockPos<this._block.length){const n=Math.min(this._block.length-this._blockPos,r-t);if(0!==t||n!==r||n<e.length?this._block.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._blockPos):this._block.set(e,this._blockPos),t+=n,this._blockPos+=n,this._blockPos<this._block.length)return;let o,i;if(this._macETM?this._len=i=c(this._block,0):(o=this._decipherInstance.update(this._block),this._len=c(o,0),i=4+this._len-this._blockSize),this._len>g||this._len<5||0!=(i&this._blockSize-1))throw new Error("Bad packet length");if(this._macInstance=s(this._macSSLName,this._macKey),l(p,this.inSeqno,0),this._macInstance.update(p),this._macETM?this._macInstance.update(this._block):(this._macInstance.update(new Uint8Array(o.buffer,o.byteOffset,4)),this._pktLen=o.length-4,this._packetPos=this._pktLen,this._packet=Buffer.allocUnsafe(this._len),this._packet.set(new Uint8Array(o.buffer,o.byteOffset+4,this._packetPos),0)),t>=r)return}if(this._pktLen<this._len){const n=Math.min(this._len-this._pktLen,r-t);let o;o=0!==t||n!==r?new Uint8Array(e.buffer,e.byteOffset+t,n):e,this._macETM&&this._macInstance.update(o);const s=this._decipherInstance.update(o);if(s.length&&(n===this._len?this._packet=s:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(s,this._packetPos)),this._packetPos+=s.length),t+=n,this._pktLen+=n,this._pktLen<this._len||t>=r)return}{const n=Math.min(this._macActualLen-this._macPos,r-t);if(0!==t||n!==r?this._mac.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._macPos):this._mac.set(e,this._macPos),t+=n,this._macPos+=n,this._macPos<this._macActualLen)return}this._macETM||this._macInstance.update(this._packet);let i=this._macInstance.digest();if(this._macActualLen<i.length&&(i=new Uint8Array(i.buffer,i.byteOffset,this._macActualLen)),n=i,o=this._mac,!(n.length!==o.length?(a(n,n),0):a(n,o)))throw new Error("Invalid MAC");const d=new u(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._blockPos=0,this._len=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._macPos=0,this._macInstance=null;{const e=this._onPayload(d);if(void 0!==e)return!1===e?t:e}}var n,o}}class H{constructor(e){const t=e.inbound;this.inSeqno=t.seqno,this._onPayload=t.onPayload,this._instance=new E(t.decipherInfo.sslName,t.decipherKey,t.decipherIV,t.macInfo.sslName,t.macKey,t.macInfo.isETM,t.macInfo.actualLen),this._block=Buffer.allocUnsafe(t.macInfo.isETM||t.decipherInfo.stream?4:t.decipherInfo.blockLen),this._blockPos=0,this._len=0,this._packet=null,this._pktLen=0,this._mac=Buffer.allocUnsafe(t.macInfo.actualLen),this._macPos=0,this._macActualLen=t.macInfo.actualLen,this._macETM=t.macInfo.isETM}free(){this._instance.free()}decrypt(e,t,r){for(;t<r;){if(this._blockPos<this._block.length){const n=Math.min(this._block.length-this._blockPos,r-t);if(0!==t||n!==r||n<e.length?this._block.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._blockPos):this._block.set(e,this._blockPos),t+=n,this._blockPos+=n,this._blockPos<this._block.length)return;let o;if(this._macETM?this._len=o=c(this._block,0):(this._instance.decryptBlock(this._block),this._len=c(this._block,0),o=4+this._len-this._block.length),this._len>g||this._len<5||0!=(o&this._block.length-1))throw new Error("Bad packet length");if(this._macETM||(this._pktLen=this._block.length-4,this._pktLen&&(this._packet=Buffer.allocUnsafe(this._len),this._packet.set(new Uint8Array(this._block.buffer,this._block.byteOffset+4,this._pktLen),0))),t>=r)return}if(this._pktLen<this._len){const n=Math.min(this._len-this._pktLen,r-t);let o;if(o=0!==t||n!==r?new Uint8Array(e.buffer,e.byteOffset+t,n):e,n===this._len?this._packet=o:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(o,this._pktLen)),t+=n,this._pktLen+=n,this._pktLen<this._len||t>=r)return}{const n=Math.min(this._macActualLen-this._macPos,r-t);if(0!==t||n!==r?this._mac.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._macPos):this._mac.set(e,this._macPos),t+=n,this._macPos+=n,this._macPos<this._macActualLen)return}this._instance.decrypt(this._packet,this.inSeqno,this._block,this._mac);const n=new u(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._blockPos=0,this._len=0,this._packet=null,this._pktLen=0,this._macPos=0,this._macInstance=null;{const e=this._onPayload(n);if(void 0!==e)return!1===e?t:e}}}}function W(e){++e[11]>>>8&&++e[10]>>>8&&++e[9]>>>8&&++e[8]>>>8&&++e[7]>>>8&&++e[6]>>>8&&++e[5]>>>8&&++e[4]}const q=(()=>{const e=Buffer.alloc(4);return t=>(e[0]=t>>>24,e[1]=t>>>16,e[2]=t>>>8,e[3]=t,e)})();e.exports={CIPHER_INFO:w,MAC_INFO:A,bindingAvailable:!!m,init:new Promise((async(e,t)=>{try{I=await r(69449)(),R=I._malloc(16),O=I.cwrap("poly1305_auth",null,["number","array","number","array","number","array"])}catch(e){return t(e)}e()})),NullCipher:class{constructor(e,t){this.outSeqno=e,this._onWrite=t,this._dead=!1}free(){this._dead=!0}allocPacket(e){let t=5+e,r=8-(7&t);r<4&&(r+=8),t+=r;const n=Buffer.allocUnsafe(t);return l(n,t-4,0),n[4]=r,i(n,5+e,r),n}encrypt(e){this._dead||(this._onWrite(e),this.outSeqno=this.outSeqno+1>>>0)}},createCipher:function(e){if("object"!=typeof e||null===e)throw new Error("Invalid config");if("object"!=typeof e.outbound||null===e.outbound)throw new Error("Invalid outbound");const t=e.outbound;if("function"!=typeof t.onWrite)throw new Error("Invalid outbound.onWrite");if("object"!=typeof t.cipherInfo||null===t.cipherInfo)throw new Error("Invalid outbound.cipherInfo");if(!Buffer.isBuffer(t.cipherKey)||t.cipherKey.length!==t.cipherInfo.keyLen)throw new Error("Invalid outbound.cipherKey");if(t.cipherInfo.ivLen&&(!Buffer.isBuffer(t.cipherIV)||t.cipherIV.length!==t.cipherInfo.ivLen))throw new Error("Invalid outbound.cipherIV");if("number"!=typeof t.seqno||t.seqno<0||t.seqno>d)throw new Error("Invalid outbound.seqno");const r=!!t.forceNative;switch(t.cipherInfo.sslName){case"aes-128-gcm":case"aes-256-gcm":return y&&!r?new M(e):new P(e);case"chacha20":return v&&!r?new N(e):new k(e);default:if("object"!=typeof t.macInfo||null===t.macInfo)throw new Error("Invalid outbound.macInfo");if(!Buffer.isBuffer(t.macKey)||t.macKey.length!==t.macInfo.len)throw new Error("Invalid outbound.macKey");return _&&!r?new B(e):new L(e)}},NullDecipher:class{constructor(e,t){this.inSeqno=e,this._onPayload=t,this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0}free(){}decrypt(e,t,r){for(;t<r;){if(this._lenBytes<4){let n=Math.min(4-this._lenBytes,r-t);for(this._lenBytes+=n;n--;)this._len=(this._len<<8)+e[t++];if(this._lenBytes<4)return;if(this._len>g||this._len<8||0!=(4+this._len&7))throw new Error("Bad packet length");if(t>=r)return}if(this._packetPos<this._len){const n=Math.min(this._len-this._packetPos,r-t);let o;if(o=0!==t||n!==r?new Uint8Array(e.buffer,e.byteOffset+t,n):e,n===this._len?this._packet=o:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(o,this._packetPos)),t+=n,this._packetPos+=n,this._packetPos<this._len)return}const n=this._packet?new u(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1):h;this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0;{const e=this._onPayload(n);if(void 0!==e)return!1===e?t:e}}}},createDecipher:function(e){if("object"!=typeof e||null===e)throw new Error("Invalid config");if("object"!=typeof e.inbound||null===e.inbound)throw new Error("Invalid inbound");const t=e.inbound;if("function"!=typeof t.onPayload)throw new Error("Invalid inbound.onPayload");if("object"!=typeof t.decipherInfo||null===t.decipherInfo)throw new Error("Invalid inbound.decipherInfo");if(!Buffer.isBuffer(t.decipherKey)||t.decipherKey.length!==t.decipherInfo.keyLen)throw new Error("Invalid inbound.decipherKey");if(t.decipherInfo.ivLen&&(!Buffer.isBuffer(t.decipherIV)||t.decipherIV.length!==t.decipherInfo.ivLen))throw new Error("Invalid inbound.decipherIV");if("number"!=typeof t.seqno||t.seqno<0||t.seqno>d)throw new Error("Invalid inbound.seqno");const r=!!t.forceNative;switch(t.decipherInfo.sslName){case"aes-128-gcm":case"aes-256-gcm":return b&&!r?new j(e):new U(e);case"chacha20":return S&&!r?new x(e):new D(e);default:if("object"!=typeof t.macInfo||null===t.macInfo)throw new Error("Invalid inbound.macInfo");if(!Buffer.isBuffer(t.macKey)||t.macKey.length!==t.macInfo.len)throw new Error("Invalid inbound.macKey");return E&&!r?new H(e):new F(e)}}}},69449:(e,t,r)=>{var n,o=(n=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||__filename,function(e){var t,o,s;e=e||{},t||(t=void 0!==e?e:{}),t.ready=new Promise((function(e,t){o=e,s=t}));var i,a={};for(i in t)t.hasOwnProperty(i)&&(a[i]=t[i]);var c,l,u,d,h,p="object"==typeof window,f="function"==typeof importScripts,g="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";g?(m=f?r(71017).dirname(m)+"/":__dirname+"/",c=function(e,t){var n=G(e);return n?t?n:n.toString():(d||(d=r(57147)),h||(h=r(71017)),e=h.normalize(e),d.readFileSync(e,t?null:"utf8"))},u=function(e){return(e=c(e,!0)).buffer||(e=new Uint8Array(e)),S(e.buffer),e},l=function(e,t,n){var o=G(e);o&&t(o),d||(d=r(57147)),h||(h=r(71017)),e=h.normalize(e),d.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),t.inspect=function(){return"[Emscripten Module object]"}):(p||f)&&(f?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),n&&(m=n),m=0!==m.indexOf("blob:")?m.substr(0,m.lastIndexOf("/")+1):"",c=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}catch(o){if(e=G(e)){t=[];for(var r=0;r<e.length;r++){var n=e[r];255<n&&(q&&S(!1,"Character code "+n+" ("+String.fromCharCode(n)+")  at offset "+r+" not in 0x00-0xFF."),n&=255),t.push(String.fromCharCode(n))}return t.join("")}throw o}},f&&(u=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}catch(t){if(e=G(e))return e;throw t}}),l=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){if(200==n.status||0==n.status&&n.response)t(n.response);else{var o=G(e);o?t(o.buffer):r()}},n.onerror=r,n.send(null)}),t.print||console.log.bind(console);var y,v=t.printErr||console.warn.bind(console);for(i in a)a.hasOwnProperty(i)&&(t[i]=a[i]);a=null,t.wasmBinary&&(y=t.wasmBinary),t.noExitRuntime,"object"!=typeof WebAssembly&&x("no native wasm support detected");var _,b=!1;function S(e,t){e||x("Assertion failed: "+t)}function E(e){var r=t["_"+e];return S(r,"Cannot call unknown function "+e+", make sure it is exported"),r}function w(e,t,r,n){var o={string:function(e){var t=0;if(null!=e&&0!==e){var r=1+(e.length<<2),n=t=Q(r),o=C;if(0<r){r=n+r-1;for(var s=0;s<e.length;++s){var i=e.charCodeAt(s);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++s)),127>=i){if(n>=r)break;o[n++]=i}else{if(2047>=i){if(n+1>=r)break;o[n++]=192|i>>6}else{if(65535>=i){if(n+2>=r)break;o[n++]=224|i>>12}else{if(n+3>=r)break;o[n++]=240|i>>18,o[n++]=128|i>>12&63}o[n++]=128|i>>6&63}o[n++]=128|63&i}}o[n]=0}}return t},array:function(e){var t=Q(e.length);return T.set(e,t),t}},s=E(e),i=[];if(e=0,n)for(var a=0;a<n.length;a++){var c=o[r[a]];c?(0===e&&(e=J()),i[a]=c(n[a])):i[a]=n[a]}return r=function(e){if("string"===t)if(e){for(var r=C,n=e+NaN,o=e;r[o]&&!(o>=n);)++o;if(16<o-e&&r.subarray&&I)e=I.decode(r.subarray(e,o));else{for(n="";e<o;){var s=r[e++];if(128&s){var i=63&r[e++];if(192==(224&s))n+=String.fromCharCode((31&s)<<6|i);else{var a=63&r[e++];65536>(s=224==(240&s)?(15&s)<<12|i<<6|a:(7&s)<<18|i<<12|a<<6|63&r[e++])?n+=String.fromCharCode(s):(s-=65536,n+=String.fromCharCode(55296|s>>10,56320|1023&s))}}else n+=String.fromCharCode(s)}e=n}}else e="";else e="boolean"===t?!!e:e;return e}(r=s.apply(null,i)),0!==e&&K(e),r}var A,T,C,I="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(){var e=_.buffer;A=e,t.HEAP8=T=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAP32=new Int32Array(e),t.HEAPU8=C=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}var O,k=[],N=[],P=[];function M(){var e=t.preRun.shift();k.unshift(e)}var L=0,B=null,D=null;function x(e){throw t.onAbort&&t.onAbort(e),v(e),b=!0,e=new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info."),s(e),e}t.preloadedImages={},t.preloadedAudios={};var U,j="data:application/octet-stream;base64,";if(!(U="data:application/octet-stream;base64,AGFzbQEAAAABIAZgAX8Bf2ADf39/AGABfwBgAABgAAF/YAZ/f39/f38AAgcBAWEBYQAAAwsKAAEDAQAAAgQFAgQFAXABAQEFBwEBgAKAgAIGCQF/AUGAjMACCwclCQFiAgABYwADAWQACQFlAAgBZgAHAWcABgFoAAUBaQAKAWoBAAqGTQpPAQJ/QYAIKAIAIgEgAEEDakF8cSICaiEAAkAgAkEAIAAgAU0bDQAgAD8AQRB0SwRAIAAQAEUNAQtBgAggADYCACABDwtBhAhBMDYCAEF/C4wFAg5+Cn8gACgCJCEUIAAoAiAhFSAAKAIcIREgACgCGCESIAAoAhQhEyACQRBPBEAgAC0ATEVBGHQhFyAAKAIEIhZBBWytIQ8gACgCCCIYQQVsrSENIAAoAgwiGUEFbK0hCyAAKAIQIhpBBWytIQkgADUCACEIIBqtIRAgGa0hDiAYrSEMIBatIQoDQCASIAEtAAMiEiABLQAEQQh0ciABLQAFQRB0ciABLQAGIhZBGHRyQQJ2Qf///x9xaq0iAyAOfiABLwAAIAEtAAJBEHRyIBNqIBJBGHRBgICAGHFqrSIEIBB+fCARIAEtAAdBCHQgFnIgAS0ACEEQdHIgAS0ACSIRQRh0ckEEdkH///8fcWqtIgUgDH58IAEtAApBCHQgEXIgAS0AC0EQdHIgAS0ADEEYdHJBBnYgFWqtIgYgCn58IBQgF2ogAS8ADSABLQAPQRB0cmqtIgcgCH58IAMgDH4gBCAOfnwgBSAKfnwgBiAIfnwgByAJfnwgAyAKfiAEIAx+fCAFIAh+fCAGIAl+fCAHIAt+fCADIAh+IAQgCn58IAUgCX58IAYgC358IAcgDX58IAMgCX4gBCAIfnwgBSALfnwgBiANfnwgByAPfnwiA0IaiEL/////D4N8IgRCGohC/////w+DfCIFQhqIQv////8Pg3wiBkIaiEL/////D4N8IgdCGoinQQVsIAOnQf///x9xaiITQRp2IASnQf///x9xaiESIAWnQf///x9xIREgBqdB////H3EhFSAHp0H///8fcSEUIBNB////H3EhEyABQRBqIQEgAkEQayICQQ9LDQALCyAAIBQ2AiQgACAVNgIgIAAgETYCHCAAIBI2AhggACATNgIUCwMAAQu2BAEGfwJAIAAoAjgiBARAIABBPGohBQJAIAJBECAEayIDIAIgA0kbIgZFDQAgBkEDcSEHAkAgBkEBa0EDSQRAQQAhAwwBCyAGQXxxIQhBACEDA0AgBSADIARqaiABIANqLQAAOgAAIAUgA0EBciIEIAAoAjhqaiABIARqLQAAOgAAIAUgA0ECciIEIAAoAjhqaiABIARqLQAAOgAAIAUgA0EDciIEIAAoAjhqaiABIARqLQAAOgAAIANBBGohAyAAKAI4IQQgCEEEayIIDQALCyAHRQ0AA0AgBSADIARqaiABIANqLQAAOgAAIANBAWohAyAAKAI4IQQgB0EBayIHDQALCyAAIAQgBmoiAzYCOCADQRBJDQEgACAFQRAQAiAAQQA2AjggAiAGayECIAEgBmohAQsgAkEQTwRAIAAgASACQXBxIgMQAiACQQ9xIQIgASADaiEBCyACRQ0AIAJBA3EhBCAAQTxqIQVBACEDIAJBAWtBA08EQCACQXxxIQcDQCAFIAAoAjggA2pqIAEgA2otAAA6AAAgBSADQQFyIgYgACgCOGpqIAEgBmotAAA6AAAgBSADQQJyIgYgACgCOGpqIAEgBmotAAA6AAAgBSADQQNyIgYgACgCOGpqIAEgBmotAAA6AAAgA0EEaiEDIAdBBGsiBw0ACwsgBARAA0AgBSAAKAI4IANqaiABIANqLQAAOgAAIANBAWohAyAEQQFrIgQNAAsLIAAgACgCOCACajYCOAsLoS0BDH8jAEEQayIMJAACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAEH0AU0EQEGICCgCACIFQRAgAEELakF4cSAAQQtJGyIIQQN2IgJ2IgFBA3EEQCABQX9zQQFxIAJqIgNBA3QiAUG4CGooAgAiBEEIaiEAAkAgBCgCCCICIAFBsAhqIgFGBEBBiAggBUF+IAN3cTYCAAwBCyACIAE2AgwgASACNgIICyAEIANBA3QiAUEDcjYCBCABIARqIgEgASgCBEEBcjYCBAwNCyAIQZAIKAIAIgpNDQEgAQRAAkBBAiACdCIAQQAgAGtyIAEgAnRxIgBBACAAa3FBAWsiACAAQQx2QRBxIgJ2IgFBBXZBCHEiACACciABIAB2IgFBAnZBBHEiAHIgASAAdiIBQQF2QQJxIgByIAEgAHYiAUEBdkEBcSIAciABIAB2aiIDQQN0IgBBuAhqKAIAIgQoAggiASAAQbAIaiIARgRAQYgIIAVBfiADd3EiBTYCAAwBCyABIAA2AgwgACABNgIICyAEQQhqIQAgBCAIQQNyNgIEIAQgCGoiAiADQQN0IgEgCGsiA0EBcjYCBCABIARqIAM2AgAgCgRAIApBA3YiAUEDdEGwCGohB0GcCCgCACEEAn8gBUEBIAF0IgFxRQRAQYgIIAEgBXI2AgAgBwwBCyAHKAIICyEBIAcgBDYCCCABIAQ2AgwgBCAHNgIMIAQgATYCCAtBnAggAjYCAEGQCCADNgIADA0LQYwIKAIAIgZFDQEgBkEAIAZrcUEBayIAIABBDHZBEHEiAnYiAUEFdkEIcSIAIAJyIAEgAHYiAUECdkEEcSIAciABIAB2IgFBAXZBAnEiAHIgASAAdiIBQQF2QQFxIgByIAEgAHZqQQJ0QbgKaigCACIBKAIEQXhxIAhrIQMgASECA0ACQCACKAIQIgBFBEAgAigCFCIARQ0BCyAAKAIEQXhxIAhrIgIgAyACIANJIgIbIQMgACABIAIbIQEgACECDAELCyABIAhqIgkgAU0NAiABKAIYIQsgASABKAIMIgRHBEAgASgCCCIAQZgIKAIASRogACAENgIMIAQgADYCCAwMCyABQRRqIgIoAgAiAEUEQCABKAIQIgBFDQQgAUEQaiECCwNAIAIhByAAIgRBFGoiAigCACIADQAgBEEQaiECIAQoAhAiAA0ACyAHQQA2AgAMCwtBfyEIIABBv39LDQAgAEELaiIAQXhxIQhBjAgoAgAiCUUNAEEAIAhrIQMCQAJAAkACf0EAIAhBgAJJDQAaQR8gCEH///8HSw0AGiAAQQh2IgAgAEGA/j9qQRB2QQhxIgJ0IgAgAEGA4B9qQRB2QQRxIgF0IgAgAEGAgA9qQRB2QQJxIgB0QQ92IAEgAnIgAHJrIgBBAXQgCCAAQRVqdkEBcXJBHGoLIgVBAnRBuApqKAIAIgJFBEBBACEADAELQQAhACAIQQBBGSAFQQF2ayAFQR9GG3QhAQNAAkAgAigCBEF4cSAIayIHIANPDQAgAiEEIAciAw0AQQAhAyACIQAMAwsgACACKAIUIgcgByACIAFBHXZBBHFqKAIQIgJGGyAAIAcbIQAgAUEBdCEBIAINAAsLIAAgBHJFBEBBACEEQQIgBXQiAEEAIABrciAJcSIARQ0DIABBACAAa3FBAWsiACAAQQx2QRBxIgJ2IgFBBXZBCHEiACACciABIAB2IgFBAnZBBHEiAHIgASAAdiIBQQF2QQJxIgByIAEgAHYiAUEBdkEBcSIAciABIAB2akECdEG4CmooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIAhrIgEgA0khAiABIAMgAhshAyAAIAQgAhshBCAAKAIQIgEEfyABBSAAKAIUCyIADQALCyAERQ0AIANBkAgoAgAgCGtPDQAgBCAIaiIGIARNDQEgBCgCGCEFIAQgBCgCDCIBRwRAIAQoAggiAEGYCCgCAEkaIAAgATYCDCABIAA2AggMCgsgBEEUaiICKAIAIgBFBEAgBCgCECIARQ0EIARBEGohAgsDQCACIQcgACIBQRRqIgIoAgAiAA0AIAFBEGohAiABKAIQIgANAAsgB0EANgIADAkLIAhBkAgoAgAiAk0EQEGcCCgCACEDAkAgAiAIayIBQRBPBEBBkAggATYCAEGcCCADIAhqIgA2AgAgACABQQFyNgIEIAIgA2ogATYCACADIAhBA3I2AgQMAQtBnAhBADYCAEGQCEEANgIAIAMgAkEDcjYCBCACIANqIgAgACgCBEEBcjYCBAsgA0EIaiEADAsLIAhBlAgoAgAiBkkEQEGUCCAGIAhrIgE2AgBBoAhBoAgoAgAiAiAIaiIANgIAIAAgAUEBcjYCBCACIAhBA3I2AgQgAkEIaiEADAsLQQAhACAIQS9qIgkCf0HgCygCAARAQegLKAIADAELQewLQn83AgBB5AtCgKCAgICABDcCAEHgCyAMQQxqQXBxQdiq1aoFczYCAEH0C0EANgIAQcQLQQA2AgBBgCALIgFqIgVBACABayIHcSICIAhNDQpBwAsoAgAiBARAQbgLKAIAIgMgAmoiASADTQ0LIAEgBEsNCwtBxAstAABBBHENBQJAAkBBoAgoAgAiAwRAQcgLIQADQCADIAAoAgAiAU8EQCABIAAoAgRqIANLDQMLIAAoAggiAA0ACwtBABABIgFBf0YNBiACIQVB5AsoAgAiA0EBayIAIAFxBEAgAiABayAAIAFqQQAgA2txaiEFCyAFIAhNDQYgBUH+////B0sNBkHACygCACIEBEBBuAsoAgAiAyAFaiIAIANNDQcgACAESw0HCyAFEAEiACABRw0BDAgLIAUgBmsgB3EiBUH+////B0sNBSAFEAEiASAAKAIAIAAoAgRqRg0EIAEhAAsCQCAAQX9GDQAgCEEwaiAFTQ0AQegLKAIAIgEgCSAFa2pBACABa3EiAUH+////B0sEQCAAIQEMCAsgARABQX9HBEAgASAFaiEFIAAhAQwIC0EAIAVrEAEaDAULIAAiAUF/Rw0GDAQLAAtBACEEDAcLQQAhAQwFCyABQX9HDQILQcQLQcQLKAIAQQRyNgIACyACQf7///8HSw0BIAIQASEBQQAQASEAIAFBf0YNASAAQX9GDQEgACABTQ0BIAAgAWsiBSAIQShqTQ0BC0G4C0G4CygCACAFaiIANgIAQbwLKAIAIABJBEBBvAsgADYCAAsCQAJAAkBBoAgoAgAiBwRAQcgLIQADQCABIAAoAgAiAyAAKAIEIgJqRg0CIAAoAggiAA0ACwwCC0GYCCgCACIAQQAgACABTRtFBEBBmAggATYCAAtBACEAQcwLIAU2AgBByAsgATYCAEGoCEF/NgIAQawIQeALKAIANgIAQdQLQQA2AgADQCAAQQN0IgNBuAhqIANBsAhqIgI2AgAgA0G8CGogAjYCACAAQQFqIgBBIEcNAAtBlAggBUEoayIDQXggAWtBB3FBACABQQhqQQdxGyIAayICNgIAQaAIIAAgAWoiADYCACAAIAJBAXI2AgQgASADakEoNgIEQaQIQfALKAIANgIADAILIAAtAAxBCHENACADIAdLDQAgASAHTQ0AIAAgAiAFajYCBEGgCCAHQXggB2tBB3FBACAHQQhqQQdxGyIAaiICNgIAQZQIQZQIKAIAIAVqIgEgAGsiADYCACACIABBAXI2AgQgASAHakEoNgIEQaQIQfALKAIANgIADAELQZgIKAIAIAFLBEBBmAggATYCAAsgASAFaiECQcgLIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQcgLIQADQCAHIAAoAgAiAk8EQCACIAAoAgRqIgQgB0sNAwsgACgCCCEADAALAAsgACABNgIAIAAgACgCBCAFajYCBCABQXggAWtBB3FBACABQQhqQQdxG2oiCSAIQQNyNgIEIAJBeCACa0EHcUEAIAJBCGpBB3EbaiIFIAggCWoiBmshAiAFIAdGBEBBoAggBjYCAEGUCEGUCCgCACACaiIANgIAIAYgAEEBcjYCBAwDCyAFQZwIKAIARgRAQZwIIAY2AgBBkAhBkAgoAgAgAmoiADYCACAGIABBAXI2AgQgACAGaiAANgIADAMLIAUoAgQiAEEDcUEBRgRAIABBeHEhBwJAIABB/wFNBEAgBSgCCCIDIABBA3YiAEEDdEGwCGpGGiADIAUoAgwiAUYEQEGICEGICCgCAEF+IAB3cTYCAAwCCyADIAE2AgwgASADNgIIDAELIAUoAhghCAJAIAUgBSgCDCIBRwRAIAUoAggiACABNgIMIAEgADYCCAwBCwJAIAVBFGoiACgCACIDDQAgBUEQaiIAKAIAIgMNAEEAIQEMAQsDQCAAIQQgAyIBQRRqIgAoAgAiAw0AIAFBEGohACABKAIQIgMNAAsgBEEANgIACyAIRQ0AAkAgBSAFKAIcIgNBAnRBuApqIgAoAgBGBEAgACABNgIAIAENAUGMCEGMCCgCAEF+IAN3cTYCAAwCCyAIQRBBFCAIKAIQIAVGG2ogATYCACABRQ0BCyABIAg2AhggBSgCECIABEAgASAANgIQIAAgATYCGAsgBSgCFCIARQ0AIAEgADYCFCAAIAE2AhgLIAUgB2ohBSACIAdqIQILIAUgBSgCBEF+cTYCBCAGIAJBAXI2AgQgAiAGaiACNgIAIAJB/wFNBEAgAkEDdiIAQQN0QbAIaiECAn9BiAgoAgAiAUEBIAB0IgBxRQRAQYgIIAAgAXI2AgAgAgwBCyACKAIICyEAIAIgBjYCCCAAIAY2AgwgBiACNgIMIAYgADYCCAwDC0EfIQAgAkH///8HTQRAIAJBCHYiACAAQYD+P2pBEHZBCHEiA3QiACAAQYDgH2pBEHZBBHEiAXQiACAAQYCAD2pBEHZBAnEiAHRBD3YgASADciAAcmsiAEEBdCACIABBFWp2QQFxckEcaiEACyAGIAA2AhwgBkIANwIQIABBAnRBuApqIQQCQEGMCCgCACIDQQEgAHQiAXFFBEBBjAggASADcjYCACAEIAY2AgAgBiAENgIYDAELIAJBAEEZIABBAXZrIABBH0YbdCEAIAQoAgAhAQNAIAEiAygCBEF4cSACRg0DIABBHXYhASAAQQF0IQAgAyABQQRxaiIEKAIQIgENAAsgBCAGNgIQIAYgAzYCGAsgBiAGNgIMIAYgBjYCCAwCC0GUCCAFQShrIgNBeCABa0EHcUEAIAFBCGpBB3EbIgBrIgI2AgBBoAggACABaiIANgIAIAAgAkEBcjYCBCABIANqQSg2AgRBpAhB8AsoAgA2AgAgByAEQScgBGtBB3FBACAEQSdrQQdxG2pBL2siACAAIAdBEGpJGyICQRs2AgQgAkHQCykCADcCECACQcgLKQIANwIIQdALIAJBCGo2AgBBzAsgBTYCAEHICyABNgIAQdQLQQA2AgAgAkEYaiEAA0AgAEEHNgIEIABBCGohASAAQQRqIQAgASAESQ0ACyACIAdGDQMgAiACKAIEQX5xNgIEIAcgAiAHayIEQQFyNgIEIAIgBDYCACAEQf8BTQRAIARBA3YiAEEDdEGwCGohAgJ/QYgIKAIAIgFBASAAdCIAcUUEQEGICCAAIAFyNgIAIAIMAQsgAigCCAshACACIAc2AgggACAHNgIMIAcgAjYCDCAHIAA2AggMBAtBHyEAIAdCADcCECAEQf///wdNBEAgBEEIdiIAIABBgP4/akEQdkEIcSICdCIAIABBgOAfakEQdkEEcSIBdCIAIABBgIAPakEQdkECcSIAdEEPdiABIAJyIAByayIAQQF0IAQgAEEVanZBAXFyQRxqIQALIAcgADYCHCAAQQJ0QbgKaiEDAkBBjAgoAgAiAkEBIAB0IgFxRQRAQYwIIAEgAnI2AgAgAyAHNgIAIAcgAzYCGAwBCyAEQQBBGSAAQQF2ayAAQR9GG3QhACADKAIAIQEDQCABIgIoAgRBeHEgBEYNBCAAQR12IQEgAEEBdCEAIAIgAUEEcWoiAygCECIBDQALIAMgBzYCECAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAwsgAygCCCIAIAY2AgwgAyAGNgIIIAZBADYCGCAGIAM2AgwgBiAANgIICyAJQQhqIQAMBQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIIC0GUCCgCACIAIAhNDQBBlAggACAIayIBNgIAQaAIQaAIKAIAIgIgCGoiADYCACAAIAFBAXI2AgQgAiAIQQNyNgIEIAJBCGohAAwDC0GECEEwNgIAQQAhAAwCCwJAIAVFDQACQCAEKAIcIgJBAnRBuApqIgAoAgAgBEYEQCAAIAE2AgAgAQ0BQYwIIAlBfiACd3EiCTYCAAwCCyAFQRBBFCAFKAIQIARGG2ogATYCACABRQ0BCyABIAU2AhggBCgCECIABEAgASAANgIQIAAgATYCGAsgBCgCFCIARQ0AIAEgADYCFCAAIAE2AhgLAkAgA0EPTQRAIAQgAyAIaiIAQQNyNgIEIAAgBGoiACAAKAIEQQFyNgIEDAELIAQgCEEDcjYCBCAGIANBAXI2AgQgAyAGaiADNgIAIANB/wFNBEAgA0EDdiIAQQN0QbAIaiECAn9BiAgoAgAiAUEBIAB0IgBxRQRAQYgIIAAgAXI2AgAgAgwBCyACKAIICyEAIAIgBjYCCCAAIAY2AgwgBiACNgIMIAYgADYCCAwBC0EfIQAgA0H///8HTQRAIANBCHYiACAAQYD+P2pBEHZBCHEiAnQiACAAQYDgH2pBEHZBBHEiAXQiACAAQYCAD2pBEHZBAnEiAHRBD3YgASACciAAcmsiAEEBdCADIABBFWp2QQFxckEcaiEACyAGIAA2AhwgBkIANwIQIABBAnRBuApqIQICQAJAIAlBASAAdCIBcUUEQEGMCCABIAlyNgIAIAIgBjYCACAGIAI2AhgMAQsgA0EAQRkgAEEBdmsgAEEfRht0IQAgAigCACEIA0AgCCIBKAIEQXhxIANGDQIgAEEddiECIABBAXQhACABIAJBBHFqIgIoAhAiCA0ACyACIAY2AhAgBiABNgIYCyAGIAY2AgwgBiAGNgIIDAELIAEoAggiACAGNgIMIAEgBjYCCCAGQQA2AhggBiABNgIMIAYgADYCCAsgBEEIaiEADAELAkAgC0UNAAJAIAEoAhwiAkECdEG4CmoiACgCACABRgRAIAAgBDYCACAEDQFBjAggBkF+IAJ3cTYCAAwCCyALQRBBFCALKAIQIAFGG2ogBDYCACAERQ0BCyAEIAs2AhggASgCECIABEAgBCAANgIQIAAgBDYCGAsgASgCFCIARQ0AIAQgADYCFCAAIAQ2AhgLAkAgA0EPTQRAIAEgAyAIaiIAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIEDAELIAEgCEEDcjYCBCAJIANBAXI2AgQgAyAJaiADNgIAIAoEQCAKQQN2IgBBA3RBsAhqIQRBnAgoAgAhAgJ/QQEgAHQiACAFcUUEQEGICCAAIAVyNgIAIAQMAQsgBCgCCAshACAEIAI2AgggACACNgIMIAIgBDYCDCACIAA2AggLQZwIIAk2AgBBkAggAzYCAAsgAUEIaiEACyAMQRBqJAAgAAsQACMAIABrQXBxIgAkACAACwYAIAAkAAsEACMAC4AJAgh/BH4jAEGQAWsiBiQAIAYgBS0AA0EYdEGAgIAYcSAFLwAAIAUtAAJBEHRycjYCACAGIAUoAANBAnZBg/7/H3E2AgQgBiAFKAAGQQR2Qf+B/x9xNgIIIAYgBSgACUEGdkH//8AfcTYCDCAFLwANIQggBS0ADyEJIAZCADcCFCAGQgA3AhwgBkEANgIkIAYgCCAJQRB0QYCAPHFyNgIQIAYgBSgAEDYCKCAGIAUoABQ2AiwgBiAFKAAYNgIwIAUoABwhBSAGQQA6AEwgBkEANgI4IAYgBTYCNCAGIAEgAhAEIAQEQCAGIAMgBBAECyAGKAI4IgEEQCAGQTxqIgIgAWpBAToAACABQQFqQQ9NBEAgASAGakE9aiEEAkBBDyABayIDRQ0AIAMgBGoiAUEBa0EAOgAAIARBADoAACADQQNJDQAgAUECa0EAOgAAIARBADoAASABQQNrQQA6AAAgBEEAOgACIANBB0kNACABQQRrQQA6AAAgBEEAOgADIANBCUkNACAEQQAgBGtBA3EiAWoiBEEANgIAIAQgAyABa0F8cSIBaiIDQQRrQQA2AgAgAUEJSQ0AIARBADYCCCAEQQA2AgQgA0EIa0EANgIAIANBDGtBADYCACABQRlJDQAgBEEANgIYIARBADYCFCAEQQA2AhAgBEEANgIMIANBEGtBADYCACADQRRrQQA2AgAgA0EYa0EANgIAIANBHGtBADYCACABIARBBHFBGHIiAWsiA0EgSQ0AIAEgBGohAQNAIAFCADcDGCABQgA3AxAgAUIANwMIIAFCADcDACABQSBqIQEgA0EgayIDQR9LDQALCwsgBkEBOgBMIAYgAkEQEAILIAY1AjQhECAGNQIwIREgBjUCLCEOIAAgBjUCKCAGKAIkIAYoAiAgBigCHCAGKAIYIgNBGnZqIgJBGnZqIgFBGnZqIgtBgICAYHIgAUH///8fcSINIAJB////H3EiCCAGKAIUIAtBGnZBBWxqIgFB////H3EiCUEFaiIFQRp2IANB////H3EgAUEadmoiA2oiAUEadmoiAkEadmoiBEEadmoiDEEfdSIHIANxIAEgDEEfdkEBayIDQf///x9xIgpxciIBQRp0IAUgCnEgByAJcXJyrXwiDzwAACAAIA9CGIg8AAMgACAPQhCIPAACIAAgD0IIiDwAASAAIA4gByAIcSACIApxciICQRR0IAFBBnZyrXwgD0IgiHwiDjwABCAAIA5CGIg8AAcgACAOQhCIPAAGIAAgDkIIiDwABSAAIBEgByANcSAEIApxciIBQQ50IAJBDHZyrXwgDkIgiHwiDjwACCAAIA5CGIg8AAsgACAOQhCIPAAKIAAgDkIIiDwACSAAIBAgAyAMcSAHIAtxckEIdCABQRJ2cq18IA5CIIh8Ig48AAwgACAOQhiIPAAPIAAgDkIQiDwADiAAIA5CCIg8AA0gBkIANwIwIAZCADcCKCAGQgA3AiAgBkIANwIYIAZCADcCECAGQgA3AgggBkIANwIAIAZBkAFqJAALpwwBB38CQCAARQ0AIABBCGsiAyAAQQRrKAIAIgFBeHEiAGohBQJAIAFBAXENACABQQNxRQ0BIAMgAygCACIBayIDQZgIKAIASQ0BIAAgAWohACADQZwIKAIARwRAIAFB/wFNBEAgAygCCCICIAFBA3YiBEEDdEGwCGpGGiACIAMoAgwiAUYEQEGICEGICCgCAEF+IAR3cTYCAAwDCyACIAE2AgwgASACNgIIDAILIAMoAhghBgJAIAMgAygCDCIBRwRAIAMoAggiAiABNgIMIAEgAjYCCAwBCwJAIANBFGoiAigCACIEDQAgA0EQaiICKAIAIgQNAEEAIQEMAQsDQCACIQcgBCIBQRRqIgIoAgAiBA0AIAFBEGohAiABKAIQIgQNAAsgB0EANgIACyAGRQ0BAkAgAyADKAIcIgJBAnRBuApqIgQoAgBGBEAgBCABNgIAIAENAUGMCEGMCCgCAEF+IAJ3cTYCAAwDCyAGQRBBFCAGKAIQIANGG2ogATYCACABRQ0CCyABIAY2AhggAygCECICBEAgASACNgIQIAIgATYCGAsgAygCFCICRQ0BIAEgAjYCFCACIAE2AhgMAQsgBSgCBCIBQQNxQQNHDQBBkAggADYCACAFIAFBfnE2AgQgAyAAQQFyNgIEIAAgA2ogADYCAA8LIAMgBU8NACAFKAIEIgFBAXFFDQACQCABQQJxRQRAIAVBoAgoAgBGBEBBoAggAzYCAEGUCEGUCCgCACAAaiIANgIAIAMgAEEBcjYCBCADQZwIKAIARw0DQZAIQQA2AgBBnAhBADYCAA8LIAVBnAgoAgBGBEBBnAggAzYCAEGQCEGQCCgCACAAaiIANgIAIAMgAEEBcjYCBCAAIANqIAA2AgAPCyABQXhxIABqIQACQCABQf8BTQRAIAUoAggiAiABQQN2IgRBA3RBsAhqRhogAiAFKAIMIgFGBEBBiAhBiAgoAgBBfiAEd3E2AgAMAgsgAiABNgIMIAEgAjYCCAwBCyAFKAIYIQYCQCAFIAUoAgwiAUcEQCAFKAIIIgJBmAgoAgBJGiACIAE2AgwgASACNgIIDAELAkAgBUEUaiICKAIAIgQNACAFQRBqIgIoAgAiBA0AQQAhAQwBCwNAIAIhByAEIgFBFGoiAigCACIEDQAgAUEQaiECIAEoAhAiBA0ACyAHQQA2AgALIAZFDQACQCAFIAUoAhwiAkECdEG4CmoiBCgCAEYEQCAEIAE2AgAgAQ0BQYwIQYwIKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiABNgIAIAFFDQELIAEgBjYCGCAFKAIQIgIEQCABIAI2AhAgAiABNgIYCyAFKAIUIgJFDQAgASACNgIUIAIgATYCGAsgAyAAQQFyNgIEIAAgA2ogADYCACADQZwIKAIARw0BQZAIIAA2AgAPCyAFIAFBfnE2AgQgAyAAQQFyNgIEIAAgA2ogADYCAAsgAEH/AU0EQCAAQQN2IgFBA3RBsAhqIQACf0GICCgCACICQQEgAXQiAXFFBEBBiAggASACcjYCACAADAELIAAoAggLIQIgACADNgIIIAIgAzYCDCADIAA2AgwgAyACNgIIDwtBHyECIANCADcCECAAQf///wdNBEAgAEEIdiIBIAFBgP4/akEQdkEIcSIBdCICIAJBgOAfakEQdkEEcSICdCIEIARBgIAPakEQdkECcSIEdEEPdiABIAJyIARyayIBQQF0IAAgAUEVanZBAXFyQRxqIQILIAMgAjYCHCACQQJ0QbgKaiEBAkACQAJAQYwIKAIAIgRBASACdCIHcUUEQEGMCCAEIAdyNgIAIAEgAzYCACADIAE2AhgMAQsgAEEAQRkgAkEBdmsgAkEfRht0IQIgASgCACEBA0AgASIEKAIEQXhxIABGDQIgAkEddiEBIAJBAXQhAiAEIAFBBHFqIgdBEGooAgAiAQ0ACyAHIAM2AhAgAyAENgIYCyADIAM2AgwgAyADNgIIDAELIAQoAggiACADNgIMIAQgAzYCCCADQQA2AhggAyAENgIMIAMgADYCCAtBqAhBqAgoAgBBAWsiAEF/IAAbNgIACwsLCQEAQYEICwIGUA==").startsWith(j)){var F=U;U=t.locateFile?t.locateFile(F,m):m+F}function H(){var e=U;try{if(e==U&&y)return new Uint8Array(y);var t=G(e);if(t)return t;if(u)return u(e);throw"both async and sync fetching of the wasm failed"}catch(e){x(e)}}function W(e){for(;0<e.length;){var r=e.shift();if("function"==typeof r)r(t);else{var n=r.m;"number"==typeof n?void 0===r.l?O.get(n)():O.get(n)(r.l):n(void 0===r.l?null:r.l)}}}var q=!1,z="function"==typeof atob?atob:function(e){var t="",r=0;e=e.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++)),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++)),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++));n=n<<2|o>>4,o=(15&o)<<4|s>>2;var a=(3&s)<<6|i;t+=String.fromCharCode(n),64!==s&&(t+=String.fromCharCode(o)),64!==i&&(t+=String.fromCharCode(a))}while(r<e.length);return t};function G(e){if(e.startsWith(j)){if(e=e.slice(j.length),"boolean"==typeof g&&g){var t=Buffer.from(e,"base64");t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}else try{var r=z(e),n=new Uint8Array(r.length);for(e=0;e<r.length;++e)n[e]=r.charCodeAt(e);t=n}catch(e){throw Error("Converting base64 string to bytes failed.")}return t}}var $={a:function(e){var t=C.length;if(2147483648<(e>>>=0))return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296),0<(n=Math.max(e,n))%65536&&(n+=65536-n%65536);e:{try{_.grow(Math.min(2147483648,n)-A.byteLength+65535>>>16),R();var o=1;break e}catch(e){}o=void 0}if(o)return!0}return!1}};!function(){function e(e){t.asm=e.exports,_=t.asm.b,R(),O=t.asm.j,N.unshift(t.asm.c),L--,t.monitorRunDependencies&&t.monitorRunDependencies(L),0==L&&(null!==B&&(clearInterval(B),B=null),D&&(e=D,D=null,e()))}function r(t){e(t.instance)}function n(e){return function(){if(!y&&(p||f)){if("function"==typeof fetch&&!U.startsWith("file://"))return fetch(U,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+U+"'";return e.arrayBuffer()})).catch((function(){return H()}));if(l)return new Promise((function(e,t){l(U,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return H()}))}().then((function(e){return WebAssembly.instantiate(e,o)})).then(e,(function(e){v("failed to asynchronously prepare wasm: "+e),x(e)}))}var o={a:$};if(L++,t.monitorRunDependencies&&t.monitorRunDependencies(L),t.instantiateWasm)try{return t.instantiateWasm(o,e)}catch(e){return v("Module.instantiateWasm callback failed with error: "+e),!1}(y||"function"!=typeof WebAssembly.instantiateStreaming||U.startsWith(j)||U.startsWith("file://")||"function"!=typeof fetch?n(r):fetch(U,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,o).then(r,(function(e){return v("wasm streaming compile failed: "+e),v("falling back to ArrayBuffer instantiation"),n(r)}))}))).catch(s)}(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.c).apply(null,arguments)},t._poly1305_auth=function(){return(t._poly1305_auth=t.asm.d).apply(null,arguments)};var V,J=t.stackSave=function(){return(J=t.stackSave=t.asm.e).apply(null,arguments)},K=t.stackRestore=function(){return(K=t.stackRestore=t.asm.f).apply(null,arguments)},Q=t.stackAlloc=function(){return(Q=t.stackAlloc=t.asm.g).apply(null,arguments)};function Y(){function e(){if(!V&&(V=!0,t.calledRun=!0,!b)){if(W(N),o(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();P.unshift(e)}W(P)}}if(!(0<L)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)M();W(k),0<L||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e())}}if(t._malloc=function(){return(t._malloc=t.asm.h).apply(null,arguments)},t._free=function(){return(t._free=t.asm.i).apply(null,arguments)},t.cwrap=function(e,t,r,n){var o=(r=r||[]).every((function(e){return"number"===e}));return"string"!==t&&o&&!n?E(e):function(){return w(e,t,r,arguments)}},D=function e(){V||Y(),V||(D=e)},t.run=Y,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return Y(),e.ready});e.exports=o},92908:(e,t,r)=>{"use strict";const n=new Array(256);[r(65260).HANDLERS,r(56728)].forEach((e=>{for(let[t,r]of Object.entries(e))t=+t,isFinite(t)&&t>=0&&t<n.length&&(n[t]=r)})),e.exports=n},56728:(e,t,r)=>{"use strict";const{bufferSlice:n,bufferParser:o,doFatalError:s,sigSSHToASN1:i,writeUInt32BE:a}=r(39205),{CHANNEL_OPEN_FAILURE:c,COMPAT:l,MESSAGE:u,TERMINAL_MODE:d}=r(3190),{parseKey:h}=r(13781),p=Array.from(Object.entries(d)).reduce(((e,[t,r])=>({...e,[t]:r})),{});e.exports={[u.DISCONNECT]:(e,t)=>{o.init(t,1);const r=o.readUInt32BE(),n=o.readString(!0),i=o.readString();if(o.clear(),void 0===i)return s(e,"Inbound: Malformed DISCONNECT packet");e._debug&&e._debug(`Inbound: Received DISCONNECT (${r}, "${n}")`);const a=e._handlers.DISCONNECT;a&&a(e,r,n)},[u.IGNORE]:(e,t)=>{e._debug&&e._debug("Inbound: Received IGNORE")},[u.UNIMPLEMENTED]:(e,t)=>{o.init(t,1);const r=o.readUInt32BE();if(o.clear(),void 0===r)return s(e,"Inbound: Malformed UNIMPLEMENTED packet");e._debug&&e._debug(`Inbound: Received UNIMPLEMENTED (seqno ${r})`)},[u.DEBUG]:(e,t)=>{o.init(t,1);const r=o.readBool(),n=o.readString(!0),i=o.readString();if(o.clear(),void 0===i)return s(e,"Inbound: Malformed DEBUG packet");e._debug&&e._debug("Inbound: Received DEBUG");const a=e._handlers.DEBUG;a&&a(e,r,n)},[u.SERVICE_REQUEST]:(e,t)=>{o.init(t,1);const r=o.readString(!0);if(o.clear(),void 0===r)return s(e,"Inbound: Malformed SERVICE_REQUEST packet");e._debug&&e._debug(`Inbound: Received SERVICE_REQUEST (${r})`);const n=e._handlers.SERVICE_REQUEST;n&&n(e,r)},[u.SERVICE_ACCEPT]:(e,t)=>{o.init(t,1);const r=o.readString(!0);if(o.clear(),void 0===r)return s(e,"Inbound: Malformed SERVICE_ACCEPT packet");e._debug&&e._debug(`Inbound: Received SERVICE_ACCEPT (${r})`);const n=e._handlers.SERVICE_ACCEPT;n&&n(e,r)},[u.USERAUTH_REQUEST]:(e,t)=>{o.init(t,1);const r=o.readString(!0),c=o.readString(!0),l=o.readString(!0);let u,d;switch(l){case"none":u=null;break;case"password":{const e=o.readBool();if(void 0!==e&&(u=o.readString(!0),void 0!==u&&e)){const e=o.readString(!0);u=void 0!==e?{oldPassword:u,newPassword:e}:void 0}break}case"publickey":{const r=o.readBool();if(void 0!==r){const s=o.readString(!0),c=o.readString();if(r){const r=o.pos();let l=o.readString();if(void 0!==l&&(l.length>4+s.length+4&&l.utf8Slice(4,4+s.length)===s&&(l=n(l,4+s.length+4)),l=i(l,s),l)){const n=e._kex.sessionID,o=Buffer.allocUnsafe(4+n.length+r);a(o,n.length,0),o.set(n,4),o.set(new Uint8Array(t.buffer,t.byteOffset,r),4+n.length),u={keyAlgo:s,key:c,signature:l,blob:o}}}else u={keyAlgo:s,key:c},d="publickey -- check"}break}case"hostbased":{const r=o.readString(!0),s=o.readString(),c=o.readString(!0),l=o.readString(!0),d=o.pos();let h=o.readString();if(void 0!==h&&(h.length>4+r.length+4&&h.utf8Slice(4,4+r.length)===r&&(h=n(h,4+r.length+4)),h=i(h,r),void 0!==h)){const n=e._kex.sessionID,o=Buffer.allocUnsafe(4+n.length+d);a(o,n.length,0),o.set(n,4),o.set(new Uint8Array(t.buffer,t.byteOffset,d),4+n.length),u={keyAlgo:r,key:s,signature:h,blob:o,localHostname:c,localUsername:l}}break}case"keyboard-interactive":o.skipString(),u=o.readList();break;default:void 0!==l&&(u=o.readRaw())}if(o.clear(),void 0===u)return s(e,"Inbound: Malformed USERAUTH_REQUEST packet");void 0===d&&(d=l),e._authsQueue.push(l),e._debug&&e._debug(`Inbound: Received USERAUTH_REQUEST (${d})`);const h=e._handlers.USERAUTH_REQUEST;h&&h(e,r,c,l,u)},[u.USERAUTH_FAILURE]:(e,t)=>{o.init(t,1);const r=o.readList(),n=o.readBool();if(o.clear(),void 0===n)return s(e,"Inbound: Malformed USERAUTH_FAILURE packet");e._debug&&e._debug(`Inbound: Received USERAUTH_FAILURE (${r})`),e._authsQueue.shift();const i=e._handlers.USERAUTH_FAILURE;i&&i(e,r,n)},[u.USERAUTH_SUCCESS]:(e,t)=>{e._debug&&e._debug("Inbound: Received USERAUTH_SUCCESS"),e._authsQueue.shift();const r=e._handlers.USERAUTH_SUCCESS;r&&r(e)},[u.USERAUTH_BANNER]:(e,t)=>{o.init(t,1);const r=o.readString(!0),n=o.readString();if(o.clear(),void 0===n)return s(e,"Inbound: Malformed USERAUTH_BANNER packet");e._debug&&e._debug("Inbound: Received USERAUTH_BANNER");const i=e._handlers.USERAUTH_BANNER;i&&i(e,r)},60:(e,t)=>{if(e._authsQueue.length)switch(e._authsQueue[0]){case"password":{o.init(t,1);const r=o.readString(!0),n=o.readString();if(o.clear(),void 0===n)return s(e,"Inbound: Malformed USERAUTH_PASSWD_CHANGEREQ packet");e._debug&&e._debug("Inbound: Received USERAUTH_PASSWD_CHANGEREQ");const i=e._handlers.USERAUTH_PASSWD_CHANGEREQ;i&&i(e,r);break}case"publickey":{o.init(t,1);const r=o.readString(!0),n=o.readString();if(o.clear(),void 0===n)return s(e,"Inbound: Malformed USERAUTH_PK_OK packet");e._debug&&e._debug("Inbound: Received USERAUTH_PK_OK"),e._authsQueue.shift();const i=e._handlers.USERAUTH_PK_OK;i&&i(e,r,n);break}case"keyboard-interactive":{o.init(t,1);const r=o.readString(!0),n=o.readString(!0);o.readString();const i=o.readUInt32BE();let a;if(void 0!==i){let e;for(a=new Array(i),e=0;e<i;++e){const t=o.readString(!0),r=o.readBool();if(void 0===r)break;a[e]={prompt:t,echo:r}}e!==i&&(a=void 0)}if(o.clear(),void 0===a)return s(e,"Inbound: Malformed USERAUTH_INFO_REQUEST packet");e._debug&&e._debug("Inbound: Received USERAUTH_INFO_REQUEST");const c=e._handlers.USERAUTH_INFO_REQUEST;c&&c(e,r,n,a);break}default:e._debug&&e._debug("Inbound: Received unexpected payload type 60")}else e._debug&&e._debug("Inbound: Received payload type 60 without auth")},61:(e,t)=>{if(!e._authsQueue.length)return void(e._debug&&e._debug("Inbound: Received payload type 61 without auth"));if("keyboard-interactive"!==e._authsQueue[0])return s(e,"Inbound: Received unexpected payload type 61");o.init(t,1);const r=o.readUInt32BE();let n;if(void 0!==r){let e;for(n=new Array(r),e=0;e<r;++e){const t=o.readString(!0);if(void 0===t)break;n[e]=t}e!==r&&(n=void 0)}if(o.clear(),void 0===n)return s(e,"Inbound: Malformed USERAUTH_INFO_RESPONSE packet");e._debug&&e._debug("Inbound: Received USERAUTH_INFO_RESPONSE");const i=e._handlers.USERAUTH_INFO_RESPONSE;i&&i(e,n)},[u.GLOBAL_REQUEST]:(e,t)=>{o.init(t,1);const r=o.readString(!0),n=o.readBool();let i;if(void 0!==n)switch(r){case"tcpip-forward":case"cancel-tcpip-forward":{const e=o.readString(!0),t=o.readUInt32BE();void 0!==t&&(i={bindAddr:e,bindPort:t});break}case"streamlocal-forward@openssh.com":case"cancel-streamlocal-forward@openssh.com":{const e=o.readString(!0);void 0!==e&&(i={socketPath:e});break}case"no-more-sessions@openssh.com":i=null;break;case"hostkeys-00@openssh.com":for(i=[];o.avail()>0;){const e=o.readString();if(void 0===e){i=void 0;break}const t=h(e);t instanceof Error||i.push(t)}break;default:i=o.readRaw()}if(o.clear(),void 0===i)return s(e,"Inbound: Malformed GLOBAL_REQUEST packet");e._debug&&e._debug(`Inbound: GLOBAL_REQUEST (${r})`);const a=e._handlers.GLOBAL_REQUEST;a?a(e,r,n,i):e.requestFailure()},[u.REQUEST_SUCCESS]:(e,t)=>{const r=t.length>1?n(t,1):null;e._debug&&e._debug("Inbound: REQUEST_SUCCESS");const o=e._handlers.REQUEST_SUCCESS;o&&o(e,r)},[u.REQUEST_FAILURE]:(e,t)=>{e._debug&&e._debug("Inbound: Received REQUEST_FAILURE");const r=e._handlers.REQUEST_FAILURE;r&&r(e)},[u.CHANNEL_OPEN]:(e,t)=>{o.init(t,1);const r=o.readString(!0),n=o.readUInt32BE(),i=o.readUInt32BE(),a=o.readUInt32BE();let l;switch(r){case"forwarded-tcpip":case"direct-tcpip":{const e=o.readString(!0),t=o.readUInt32BE(),s=o.readString(!0),c=o.readUInt32BE();void 0!==c&&(l={type:r,sender:n,window:i,packetSize:a,data:{destIP:e,destPort:t,srcIP:s,srcPort:c}});break}case"forwarded-streamlocal@openssh.com":case"direct-streamlocal@openssh.com":{const e=o.readString(!0);void 0!==e&&(l={type:r,sender:n,window:i,packetSize:a,data:{socketPath:e}});break}case"x11":{const e=o.readString(!0),t=o.readUInt32BE();void 0!==t&&(l={type:r,sender:n,window:i,packetSize:a,data:{srcIP:e,srcPort:t}});break}default:l={type:r,sender:n,window:i,packetSize:a,data:{}}}if(o.clear(),void 0===l)return s(e,"Inbound: Malformed CHANNEL_OPEN packet");e._debug&&e._debug(`Inbound: CHANNEL_OPEN (s:${n}, ${r})`);const u=e._handlers.CHANNEL_OPEN;u?u(e,l):e.channelOpenFail(l.sender,c.ADMINISTRATIVELY_PROHIBITED,"","")},[u.CHANNEL_OPEN_CONFIRMATION]:(e,t)=>{o.init(t,1);const r=o.readUInt32BE(),n=o.readUInt32BE(),i=o.readUInt32BE(),a=o.readUInt32BE(),c=o.avail()?o.readRaw():void 0;if(o.clear(),void 0===a)return s(e,"Inbound: Malformed CHANNEL_OPEN_CONFIRMATION packet");e._debug&&e._debug(`Inbound: CHANNEL_OPEN_CONFIRMATION (r:${r}, s:${n})`);const l=e._handlers.CHANNEL_OPEN_CONFIRMATION;l&&l(e,{recipient:r,sender:n,window:i,packetSize:a,data:c})},[u.CHANNEL_OPEN_FAILURE]:(e,t)=>{o.init(t,1);const r=o.readUInt32BE(),n=o.readUInt32BE(),i=o.readString(!0),a=o.readString();if(o.clear(),void 0===a)return s(e,"Inbound: Malformed CHANNEL_OPEN_FAILURE packet");e._debug&&e._debug(`Inbound: CHANNEL_OPEN_FAILURE (r:${r})`);const c=e._handlers.CHANNEL_OPEN_FAILURE;c&&c(e,r,n,i)},[u.CHANNEL_WINDOW_ADJUST]:(e,t)=>{o.init(t,1);const r=o.readUInt32BE(),n=o.readUInt32BE();if(o.clear(),void 0===n)return s(e,"Inbound: Malformed CHANNEL_WINDOW_ADJUST packet");e._debug&&e._debug(`Inbound: CHANNEL_WINDOW_ADJUST (r:${r}, ${n})`);const i=e._handlers.CHANNEL_WINDOW_ADJUST;i&&i(e,r,n)},[u.CHANNEL_DATA]:(e,t)=>{o.init(t,1);const r=o.readUInt32BE(),n=o.readString();if(o.clear(),void 0===n)return s(e,"Inbound: Malformed CHANNEL_DATA packet");e._debug&&e._debug(`Inbound: CHANNEL_DATA (r:${r}, ${n.length})`);const i=e._handlers.CHANNEL_DATA;i&&i(e,r,n)},[u.CHANNEL_EXTENDED_DATA]:(e,t)=>{o.init(t,1);const r=o.readUInt32BE(),n=o.readUInt32BE(),i=o.readString();if(o.clear(),void 0===i)return s(e,"Inbound: Malformed CHANNEL_EXTENDED_DATA packet");e._debug&&e._debug(`Inbound: CHANNEL_EXTENDED_DATA (r:${r}, ${i.length})`);const a=e._handlers.CHANNEL_EXTENDED_DATA;a&&a(e,r,i,n)},[u.CHANNEL_EOF]:(e,t)=>{o.init(t,1);const r=o.readUInt32BE();if(o.clear(),void 0===r)return s(e,"Inbound: Malformed CHANNEL_EOF packet");e._debug&&e._debug(`Inbound: CHANNEL_EOF (r:${r})`);const n=e._handlers.CHANNEL_EOF;n&&n(e,r)},[u.CHANNEL_CLOSE]:(e,t)=>{o.init(t,1);const r=o.readUInt32BE();if(o.clear(),void 0===r)return s(e,"Inbound: Malformed CHANNEL_CLOSE packet");e._debug&&e._debug(`Inbound: CHANNEL_CLOSE (r:${r})`);const n=e._handlers.CHANNEL_CLOSE;n&&n(e,r)},[u.CHANNEL_REQUEST]:(e,t)=>{o.init(t,1);const r=o.readUInt32BE(),n=o.readString(!0),i=o.readBool();let a;if(void 0!==i)switch(n){case"exit-status":a=o.readUInt32BE(),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${a})`);break;case"exit-signal":{let t,s;if(e._compatFlags&l.OLD_EXIT){const e=o.readUInt32BE();switch(e){case 1:t="HUP";break;case 2:t="INT";break;case 3:t="QUIT";break;case 6:t="ABRT";break;case 9:t="KILL";break;case 14:t="ALRM";break;case 15:t="TERM";break;default:void 0!==e&&(t=`UNKNOWN (${e})`)}s=!1}else t=o.readString(!0),s=o.readBool(),void 0===s&&(t=void 0);const i=o.readString(!0);void 0!==o.skipString()&&(a={signal:t,coreDumped:s,errorMessage:i}),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${t})`);break}case"pty-req":{const t=o.readString(!0),s=o.readUInt32BE(),i=o.readUInt32BE(),c=o.readUInt32BE(),l=o.readUInt32BE(),u=o.readString();if(void 0!==u){o.init(u,1);let e={};for(;o.avail();){const t=o.readByte();if(t===d.TTY_OP_END)break;const r=p[t],n=o.readUInt32BE();if(void 0===t||void 0===r||void 0===n){e=void 0;break}e[r]=n}void 0!==e&&(a={term:t,cols:s,rows:i,width:c,height:l,modes:e})}e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break}case"window-change":{const t=o.readUInt32BE(),s=o.readUInt32BE(),i=o.readUInt32BE(),c=o.readUInt32BE();void 0!==c&&(a={cols:t,rows:s,width:i,height:c}),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break}case"x11-req":{const t=o.readBool(),s=o.readString(!0),i=o.readString(),c=o.readUInt32BE();void 0!==c&&(a={single:t,protocol:s,cookie:i,screen:c}),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break}case"env":{const t=o.readString(!0),s=o.readString(!0);void 0!==s&&(a={name:t,value:s}),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${t}=${s})`);break}case"shell":case"auth-agent-req@openssh.com":a=null,e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break;case"exec":case"subsystem":case"signal":a=o.readString(!0),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${a})`);break;case"xon-xoff":a=o.readBool(),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${a})`);break;default:a=o.avail()?o.readRaw():null,e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`)}if(o.clear(),void 0===a)return s(e,"Inbound: Malformed CHANNEL_REQUEST packet");const c=e._handlers.CHANNEL_REQUEST;c&&c(e,r,n,i,a)},[u.CHANNEL_SUCCESS]:(e,t)=>{o.init(t,1);const r=o.readUInt32BE();if(o.clear(),void 0===r)return s(e,"Inbound: Malformed CHANNEL_SUCCESS packet");e._debug&&e._debug(`Inbound: CHANNEL_SUCCESS (r:${r})`);const n=e._handlers.CHANNEL_SUCCESS;n&&n(e,r)},[u.CHANNEL_FAILURE]:(e,t)=>{o.init(t,1);const r=o.readUInt32BE();if(o.clear(),void 0===r)return s(e,"Inbound: Malformed CHANNEL_FAILURE packet");e._debug&&e._debug(`Inbound: CHANNEL_FAILURE (r:${r})`);const n=e._handlers.CHANNEL_FAILURE;n&&n(e,r)}}},65260:(e,t,r)=>{"use strict";const{createDiffieHellman:n,createDiffieHellmanGroup:o,createECDH:s,createHash:i,createPublicKey:a,diffieHellman:c,generateKeyPairSync:l,randomFillSync:u}=r(6113),{Ber:d}=r(90476),{COMPAT:h,curve25519Supported:p,DEFAULT_KEX:f,DEFAULT_SERVER_HOST_KEY:g,DEFAULT_CIPHER:m,DEFAULT_MAC:y,DEFAULT_COMPRESSION:v,DISCONNECT_REASON:_,MESSAGE:b}=r(3190),{CIPHER_INFO:S,createCipher:E,createDecipher:w,MAC_INFO:A}=r(38545),{parseDERKey:T}=r(13781),{bufferFill:C,bufferParser:I,convertSignature:R,doFatalError:O,FastBuffer:k,sigSSHToASN1:N,writeUInt32BE:P}=r(39205),{PacketReader:M,PacketWriter:L,ZlibPacketReader:B,ZlibPacketWriter:D}=r(36993);let x;const U=Buffer.alloc(0);function j(e){let t;if(e._compatFlags&h.BAD_DHGEX){const r=e._offer.lists.kex;let n=r.array,o=!1;for(let e=0;e<n.length;++e)n[e].includes("group-exchange")&&(o||(o=!0,n=n.slice()),n.splice(e--,1));if(o){let o=17+e._offer.totalSize+1+4;const s=Buffer.from(n.join(","));o-=r.buffer.length-s.length;const i=e._offer.lists.all,a=new Uint8Array(i.buffer,i.byteOffset+4+r.buffer.length,i.length-(4+r.buffer.length));t=Buffer.allocUnsafe(o),P(t,s.length,17),t.set(s,21),t.set(a,21+s.length)}}void 0===t&&(t=Buffer.allocUnsafe(17+e._offer.totalSize+1+4),e._offer.copyAllTo(t,17)),e._debug&&e._debug("Outbound: Sending KEXINIT"),t[0]=b.KEXINIT,u(t,1,16),C(t,0,t.length-5),e._kexinit=t,e._packetRW.write.allocStart=0;{const r=e._packetRW.write.allocStartKEX,n=e._packetRW.write.alloc(t.length,!0);n.set(t,r),e._cipher.encrypt(e._packetRW.write.finalize(n,!0))}}function F(e,t){const r={kex:void 0,serverHostKey:void 0,cs:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0},sc:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0}};if(I.init(t,17),void 0===(r.kex=I.readList())||void 0===(r.serverHostKey=I.readList())||void 0===(r.cs.cipher=I.readList())||void 0===(r.sc.cipher=I.readList())||void 0===(r.cs.mac=I.readList())||void 0===(r.sc.mac=I.readList())||void 0===(r.cs.compress=I.readList())||void 0===(r.sc.compress=I.readList())||void 0===(r.cs.lang=I.readList())||void 0===(r.sc.lang=I.readList()))return I.clear(),O(e,"Received malformed KEXINIT","handshake",_.KEY_EXCHANGE_FAILED);const n=I.pos(),o=n<t.length&&1===t[n];I.clear();const s=e._offer,i=r;let a,c,l,u=s.lists.kex.array;if(e._compatFlags&h.BAD_DHGEX){let e=!1;for(let t=0;t<u.length;++t)-1!==u[t].indexOf("group-exchange")&&(e||(e=!0,u=u.slice()),u.splice(t--,1))}const d=e._debug;for(d&&d("Inbound: Handshake in progress"),d&&d(`Handshake: (local) KEX method: ${u}`),d&&d(`Handshake: (remote) KEX method: ${i.kex}`),e._server?(c=u,a=i.kex):(c=i.kex,a=u),l=0;l<a.length&&-1===c.indexOf(a[l]);++l);if(l===a.length)return d&&d("Handshake: No matching key exchange algorithm"),O(e,"Handshake failed: no matching key exchange algorithm","handshake",_.KEY_EXCHANGE_FAILED);r.kex=a[l],d&&d(`Handshake: KEX algorithm: ${a[l]}`),!o||i.kex.length&&a[l]===i.kex[0]||(e._skipNextInboundPacket=!0);const p=s.lists.serverHostKey.array;for(d&&d(`Handshake: (local) Host key format: ${p}`),d&&d(`Handshake: (remote) Host key format: ${i.serverHostKey}`),e._server?(c=p,a=i.serverHostKey):(c=i.serverHostKey,a=p),l=0;l<a.length&&-1===c.indexOf(a[l]);++l);if(l===a.length)return d&&d("Handshake: No matching host key format"),O(e,"Handshake failed: no matching host key format","handshake",_.KEY_EXCHANGE_FAILED);r.serverHostKey=a[l],d&&d(`Handshake: Host key format: ${a[l]}`);const f=s.lists.cs.cipher.array;for(d&&d(`Handshake: (local) C->S cipher: ${f}`),d&&d(`Handshake: (remote) C->S cipher: ${i.cs.cipher}`),e._server?(c=f,a=i.cs.cipher):(c=i.cs.cipher,a=f),l=0;l<a.length&&-1===c.indexOf(a[l]);++l);if(l===a.length)return d&&d("Handshake: No matching C->S cipher"),O(e,"Handshake failed: no matching C->S cipher","handshake",_.KEY_EXCHANGE_FAILED);r.cs.cipher=a[l],d&&d(`Handshake: C->S Cipher: ${a[l]}`);const g=s.lists.sc.cipher.array;for(d&&d(`Handshake: (local) S->C cipher: ${g}`),d&&d(`Handshake: (remote) S->C cipher: ${i.sc.cipher}`),e._server?(c=g,a=i.sc.cipher):(c=i.sc.cipher,a=g),l=0;l<a.length&&-1===c.indexOf(a[l]);++l);if(l===a.length)return d&&d("Handshake: No matching S->C cipher"),O(e,"Handshake failed: no matching S->C cipher","handshake",_.KEY_EXCHANGE_FAILED);r.sc.cipher=a[l],d&&d(`Handshake: S->C cipher: ${a[l]}`);const m=s.lists.cs.mac.array;if(d&&d(`Handshake: (local) C->S MAC: ${m}`),d&&d(`Handshake: (remote) C->S MAC: ${i.cs.mac}`),S[r.cs.cipher].authLen>0)r.cs.mac="",d&&d("Handshake: C->S MAC: <implicit>");else{for(e._server?(c=m,a=i.cs.mac):(c=i.cs.mac,a=m),l=0;l<a.length&&-1===c.indexOf(a[l]);++l);if(l===a.length)return d&&d("Handshake: No matching C->S MAC"),O(e,"Handshake failed: no matching C->S MAC","handshake",_.KEY_EXCHANGE_FAILED);r.cs.mac=a[l],d&&d(`Handshake: C->S MAC: ${a[l]}`)}const y=s.lists.sc.mac.array;if(d&&d(`Handshake: (local) S->C MAC: ${y}`),d&&d(`Handshake: (remote) S->C MAC: ${i.sc.mac}`),S[r.sc.cipher].authLen>0)r.sc.mac="",d&&d("Handshake: S->C MAC: <implicit>");else{for(e._server?(c=y,a=i.sc.mac):(c=i.sc.mac,a=y),l=0;l<a.length&&-1===c.indexOf(a[l]);++l);if(l===a.length)return d&&d("Handshake: No matching S->C MAC"),O(e,"Handshake failed: no matching S->C MAC","handshake",_.KEY_EXCHANGE_FAILED);r.sc.mac=a[l],d&&d(`Handshake: S->C MAC: ${a[l]}`)}const v=s.lists.cs.compress.array;for(d&&d(`Handshake: (local) C->S compression: ${v}`),d&&d(`Handshake: (remote) C->S compression: ${i.cs.compress}`),e._server?(c=v,a=i.cs.compress):(c=i.cs.compress,a=v),l=0;l<a.length&&-1===c.indexOf(a[l]);++l);if(l===a.length)return d&&d("Handshake: No matching C->S compression"),O(e,"Handshake failed: no matching C->S compression","handshake",_.KEY_EXCHANGE_FAILED);r.cs.compress=a[l],d&&d(`Handshake: C->S compression: ${a[l]}`);const b=s.lists.sc.compress.array;for(d&&d(`Handshake: (local) S->C compression: ${b}`),d&&d(`Handshake: (remote) S->C compression: ${i.sc.compress}`),e._server?(c=b,a=i.sc.compress):(c=i.sc.compress,a=b),l=0;l<a.length&&-1===c.indexOf(a[l]);++l);if(l===a.length)return d&&d("Handshake: No matching S->C compression"),O(e,"Handshake failed: no matching S->C compression","handshake",_.KEY_EXCHANGE_FAILED);r.sc.compress=a[l],d&&d(`Handshake: S->C compression: ${a[l]}`),r.cs.lang="",r.sc.lang="",e._kex&&(e._kexinit||j(e),e._decipher._onPayload=G.bind(e,{firstPacket:!1})),e._kex=H(r,e,t),e._kex.start()}const H=(()=>{function e(e){let t,r=0,n=e.length;for(;0===e[r];)++r,--n;return 128&e[r]?(t=Buffer.allocUnsafe(1+n),t[0]=0,e.copy(t,1,r),e=t):n!==e.length&&(t=Buffer.allocUnsafe(n),e.copy(t,0,r),e=t),e}class t{constructor(e,t,r){this._protocol=t,this.sessionID=t._kex?t._kex.sessionID:void 0,this.negotiated=e,this._step=1,this._public=null,this._dh=null,this._sentNEWKEYS=!1,this._receivedNEWKEYS=!1,this._finished=!1,this._hostVerified=!1,this._kexinit=t._kexinit,this._remoteKexinit=r,this._identRaw=t._identRaw,this._remoteIdentRaw=t._remoteIdentRaw,this._hostKey=void 0,this._dhData=void 0,this._sig=void 0}finish(){if(this._finished)return!1;this._finished=!0;const e=this._protocol._server,t=this.negotiated,r=this.convertPublicKey(this._dhData);let n=this.computeSecret(this._dhData);if(n instanceof Error)return n.message=`Error while computing DH secret (${this.type}): ${n.message}`,n.level="handshake",O(this._protocol,n,_.KEY_EXCHANGE_FAILED);const o=i(this.hashName);q(o,e?this._remoteIdentRaw:this._identRaw),q(o,e?this._identRaw:this._remoteIdentRaw),q(o,e?this._remoteKexinit:this._kexinit),q(o,e?this._kexinit:this._remoteKexinit);const s=e?this._hostKey.getPublicSSH():this._hostKey;if(q(o,s),"groupex"===this.type){const e=this.getDHParams(),t=Buffer.allocUnsafe(4);P(t,this._minBits,0),o.update(t),P(t,this._prefBits,0),o.update(t),P(t,this._maxBits,0),o.update(t),q(o,e.prime),q(o,e.generator)}q(o,e?r:this.getPublicKey());const a=e?this.getPublicKey():r;q(o,a),q(o,n);const c=o.digest();if(e){let e;switch(this.negotiated.serverHostKey){case"rsa-sha2-256":e="sha256";break;case"rsa-sha2-512":e="sha512"}this._protocol._debug&&this._protocol._debug("Generating signature ...");let t=this._hostKey.sign(c,e);if(t instanceof Error)return O(this._protocol,`Handshake failed: signature generation failed for ${this._hostKey.type} host key: ${t.message}`,"handshake",_.KEY_EXCHANGE_FAILED);if(t=R(t,this._hostKey.type),!1===t)return O(this._protocol,`Handshake failed: signature conversion failed for ${this._hostKey.type} host key`,"handshake",_.KEY_EXCHANGE_FAILED);const r=this.negotiated.serverHostKey,n=Buffer.byteLength(r),o=4+n+4+t.length;let i=this._protocol._packetRW.write.allocStartKEX;const l=this._protocol._packetRW.write.alloc(5+s.length+4+a.length+4+o,!0);if(l[i]=b.KEXDH_REPLY,P(l,s.length,++i),l.set(s,i+=4),P(l,a.length,i+=s.length),l.set(a,i+=4),P(l,o,i+=a.length),P(l,n,i+=4),l.utf8Write(r,i+=4,n),P(l,t.length,i+=n),l.set(t,i+=4),this._protocol._debug){let e;switch(this.type){case"group":e="KEXDH_REPLY";break;case"groupex":e="KEXDH_GEX_REPLY";break;default:e="KEXECDH_REPLY"}this._protocol._debug(`Outbound: Sending ${e}`)}this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(l,!0))}else{I.init(this._sig,0);const e=I.readString(!0);if(!e)return O(this._protocol,"Malformed packet while reading signature","handshake",_.KEY_EXCHANGE_FAILED);if(e!==t.serverHostKey)return O(this._protocol,`Wrong signature type: ${e}, expected: ${t.serverHostKey}`,"handshake",_.KEY_EXCHANGE_FAILED);let r,n,o=I.readString();if(I.clear(),void 0===o)return O(this._protocol,"Malformed packet while reading signature","handshake",_.KEY_EXCHANGE_FAILED);if(!(o=N(o,e)))return O(this._protocol,"Malformed signature","handshake",_.KEY_EXCHANGE_FAILED);{I.init(this._hostKey,0);const e=I.readString(!0),t=this._hostKey.slice(I.pos());if(I.clear(),r=T(t,e),r instanceof Error)return r.level="handshake",O(this._protocol,r,_.KEY_EXCHANGE_FAILED)}switch(this.negotiated.serverHostKey){case"rsa-sha2-256":n="sha256";break;case"rsa-sha2-512":n="sha512"}this._protocol._debug&&this._protocol._debug("Verifying signature ...");const s=r.verify(c,o,n);if(!0!==s)return s instanceof Error?this._protocol._debug&&this._protocol._debug(`Signature verification failed: ${s.stack}`):this._protocol._debug&&this._protocol._debug("Signature verification failed"),O(this._protocol,"Handshake failed: signature verification failed","handshake",_.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Verified signature")}$(this);const l=()=>{this.sessionID||(this.sessionID=c);{const e=Buffer.allocUnsafe(4+n.length);P(e,n.length,0),e.set(n,4),n=e}const r=S[t.cs.cipher],o=S[t.sc.cipher],s=z(r.ivLen,this.hashName,n,c,this.sessionID,"A"),i=z(o.ivLen,this.hashName,n,c,this.sessionID,"B"),a=z(r.keyLen,this.hashName,n,c,this.sessionID,"C"),l=z(o.keyLen,this.hashName,n,c,this.sessionID,"D");let u,d,h,p;r.authLen||(u=A[t.cs.mac],d=z(u.len,this.hashName,n,c,this.sessionID,"E")),o.authLen||(h=A[t.sc.mac],p=z(h.len,this.hashName,n,c,this.sessionID,"F"));const f={inbound:{onPayload:this._protocol._onPayload,seqno:this._protocol._decipher.inSeqno,decipherInfo:e?r:o,decipherIV:e?s:i,decipherKey:e?a:l,macInfo:e?u:h,macKey:e?d:p},outbound:{onWrite:this._protocol._onWrite,seqno:this._protocol._cipher.outSeqno,cipherInfo:e?o:r,cipherIV:e?i:s,cipherKey:e?l:a,macInfo:e?h:u,macKey:e?p:d}};this._protocol._cipher&&this._protocol._cipher.free(),this._protocol._decipher&&this._protocol._decipher.free(),this._protocol._cipher=E(f),this._protocol._decipher=w(f);const g={read:void 0,write:void 0};switch(t.cs.compress){case"zlib":e?g.read=new B:g.write=new D(this._protocol);break;case"zlib@openssh.com":if(this._protocol._authenticated){e?g.read=new B:g.write=new D(this._protocol);break}default:e?g.read=new M:g.write=new L(this._protocol)}switch(t.sc.compress){case"zlib":e?g.write=new D(this._protocol):g.read=new B;break;case"zlib@openssh.com":if(this._protocol._authenticated){e?g.write=new D(this._protocol):g.read=new B;break}default:e?g.write=new L(this._protocol):g.read=new M}return this._protocol._packetRW.read.cleanup(),this._protocol._packetRW.write.cleanup(),this._protocol._packetRW=g,this._public=null,this._dh=null,this._kexinit=this._protocol._kexinit=void 0,this._remoteKexinit=void 0,this._identRaw=void 0,this._remoteIdentRaw=void 0,this._hostKey=void 0,this._dhData=void 0,this._sig=void 0,this._protocol._onHandshakeComplete(t),!1};if(!e)return l();this.finish=l}start(){if(!this._protocol._server){if(this._protocol._debug){let e;e="group"===this.type?"KEXDH_INIT":"KEXECDH_INIT",this._protocol._debug(`Outbound: Sending ${e}`)}const e=this.getPublicKey();let t=this._protocol._packetRW.write.allocStartKEX;const r=this._protocol._packetRW.write.alloc(5+e.length,!0);r[t]=b.KEXDH_INIT,P(r,e.length,++t),r.set(e,t+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(r,!0))}}getPublicKey(){this.generateKeys();const e=this._public;if(e)return this.convertPublicKey(e)}convertPublicKey(e){let t,r=0,n=e.length;for(;0===e[r];)++r,--n;return 128&e[r]?(t=Buffer.allocUnsafe(1+n),t[0]=0,e.copy(t,1,r),t):(n!==e.length&&(t=Buffer.allocUnsafe(n),e.copy(t,0,r),e=t),e)}computeSecret(t){this.generateKeys();try{return e(this._dh.computeSecret(t))}catch(e){return e}}parse(e){const t=e[0];switch(this._step){case 1:if(this._protocol._server){if(t!==b.KEXDH_INIT)return O(this._protocol,`Received packet ${t} instead of ${b.KEXDH_INIT}`,"handshake",_.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Received DH Init"),I.init(e,1);const r=I.readString();if(I.clear(),void 0===r)return O(this._protocol,"Received malformed KEX*_INIT","handshake",_.KEY_EXCHANGE_FAILED);this._dhData=r;let n=this._protocol._hostKeys[this.negotiated.serverHostKey];Array.isArray(n)&&(n=n[0]),this._hostKey=n,this.finish()}else{if(t!==b.KEXDH_REPLY)return O(this._protocol,`Received packet ${t} instead of ${b.KEXDH_REPLY}`,"handshake",_.KEY_EXCHANGE_FAILED);let r,n,o;if(this._protocol._debug&&this._protocol._debug("Received DH Reply"),I.init(e,1),void 0===(r=I.readString())||void 0===(n=I.readString())||void 0===(o=I.readString()))return I.clear(),O(this._protocol,"Received malformed KEX*_REPLY","handshake",_.KEY_EXCHANGE_FAILED);I.clear(),I.init(r,0);const s=I.readString(!0);if(I.clear(),void 0===s)return O(this._protocol,"Received malformed host public key","handshake",_.KEY_EXCHANGE_FAILED);if(s!==this.negotiated.serverHostKey)switch(this.negotiated.serverHostKey){case"rsa-sha2-256":case"rsa-sha2-512":if("ssh-rsa"===s)break;default:return O(this._protocol,"Host key does not match negotiated type","handshake",_.KEY_EXCHANGE_FAILED)}this._hostKey=r,this._dhData=n,this._sig=o;let i,a=!1;if(void 0===this._protocol._hostVerifier?(i=!0,this._protocol._debug&&this._protocol._debug("Host accepted by default (no verification)")):i=this._protocol._hostVerifier(r,(e=>{if(!a){if(a=!0,!1===e)return this._protocol._debug&&this._protocol._debug("Host denied (verification failed)"),O(this._protocol,"Host denied (verification failed)","handshake",_.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Host accepted (verified)"),this._hostVerified=!0,this._receivedNEWKEYS?this.finish():$(this)}})),void 0===i)return void++this._step;if(a=!0,!1===i)return this._protocol._debug&&this._protocol._debug("Host denied (verification failed)"),O(this._protocol,"Host denied (verification failed)","handshake",_.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Host accepted (verified)"),this._hostVerified=!0,$(this)}++this._step;break;case 2:return t!==b.NEWKEYS?O(this._protocol,`Received packet ${t} instead of ${b.NEWKEYS}`,"handshake",_.KEY_EXCHANGE_FAILED):(this._protocol._debug&&this._protocol._debug("Inbound: NEWKEYS"),this._receivedNEWKEYS=!0,++this._step,!(!this._protocol._server&&!this._hostVerified)&&this.finish());default:return O(this._protocol,`Received unexpected packet ${t} after NEWKEYS`,"handshake",_.KEY_EXCHANGE_FAILED)}}}class r extends t{constructor(e,...t){super(...t),this.type="25519",this.hashName=e,this._keys=null}generateKeys(){this._keys||(this._keys=l("x25519"))}getPublicKey(){return this.generateKeys(),this._keys.publicKey.export({type:"spki",format:"der"}).slice(-32)}convertPublicKey(e){let t,r=0,n=e.length;for(;0===e[r];)++r,--n;return 32===e.length||n!==e.length&&(t=Buffer.allocUnsafe(n),e.copy(t,0,r),e=t),e}computeSecret(t){this.generateKeys();try{const r=new d.Writer;return r.startSequence(),r.startSequence(),r.writeOID("1.3.101.110"),r.endSequence(),r.startSequence(d.BitString),r.writeByte(0),r._ensure(t.length),t.copy(r._buf,r._offset,0,t.length),r._offset+=t.length,r.endSequence(),r.endSequence(),e(c({privateKey:this._keys.privateKey,publicKey:a({key:r.buffer,type:"spki",format:"der"})}))}catch(e){return e}}}class u extends t{constructor(e,t,...r){super(...r),this.type="ecdh",this.curveName=e,this.hashName=t}generateKeys(){this._dh||(this._dh=s(this.curveName),this._public=this._dh.generateKeys())}}class f extends t{constructor(e,...t){super(...t),this.type="groupex",this.hashName=e,this._prime=null,this._generator=null,this._minBits=2048,this._prefBits=function(e){const t=S[e.cs.cipher],r=S[e.sc.cipher],n=8*Math.max(0,"des-ede3-cbc"===t.sslName?14:t.keyLen,t.blockLen,t.ivLen,"des-ede3-cbc"===r.sslName?14:r.keyLen,r.blockLen,r.ivLen);return n<=112?2048:n<=128?3072:n<=192?7680:8192}(this.negotiated),this._protocol._compatFlags&h.BUG_DHGEX_LARGE&&(this._prefBits=Math.min(this._prefBits,4096)),this._maxBits=8192}start(){if(this._protocol._server)return;this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_GEX_REQUEST");let e=this._protocol._packetRW.write.allocStartKEX;const t=this._protocol._packetRW.write.alloc(13,!0);t[e]=b.KEXDH_GEX_REQUEST,P(t,this._minBits,++e),P(t,this._prefBits,e+=4),P(t,this._maxBits,e+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(t,!0))}generateKeys(){!this._dh&&this._prime&&this._generator&&(this._dh=n(this._prime,this._generator),this._public=this._dh.generateKeys())}setDHParams(e,t){if(!Buffer.isBuffer(e))throw new Error("Invalid prime value");if(!Buffer.isBuffer(t))throw new Error("Invalid generator value");this._prime=e,this._generator=t}getDHParams(){if(this._dh)return{prime:e(this._dh.getPrime()),generator:e(this._dh.getGenerator())}}parse(e){const r=e[0];switch(this._step){case 1:if(this._protocol._server)return r!==b.KEXDH_GEX_REQUEST?O(this._protocol,`Received packet ${r} instead of `+b.KEXDH_GEX_REQUEST,"handshake",_.KEY_EXCHANGE_FAILED):O(this._protocol,"Group exchange not implemented for server","handshake",_.KEY_EXCHANGE_FAILED);if(r!==b.KEXDH_GEX_GROUP)return O(this._protocol,`Received packet ${r} instead of ${b.KEXDH_GEX_GROUP}`,"handshake",_.KEY_EXCHANGE_FAILED);let n,o;if(this._protocol._debug&&this._protocol._debug("Received DH GEX Group"),I.init(e,1),void 0===(n=I.readString())||void 0===(o=I.readString()))return I.clear(),O(this._protocol,"Received malformed KEXDH_GEX_GROUP","handshake",_.KEY_EXCHANGE_FAILED);I.clear(),this.setDHParams(n,o),this.generateKeys();const s=this.getPublicKey();this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_GEX_INIT");let i=this._protocol._packetRW.write.allocStartKEX;const a=this._protocol._packetRW.write.alloc(5+s.length,!0);a[i]=b.KEXDH_GEX_INIT,P(a,s.length,++i),a.set(s,i+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(a,!0)),++this._step;break;case 2:if(this._protocol._server)return r!==b.KEXDH_GEX_INIT?O(this._protocol,`Received packet ${r} instead of ${b.KEXDH_GEX_INIT}`,"handshake",_.KEY_EXCHANGE_FAILED):(this._protocol._debug&&this._protocol._debug("Received DH GEX Init"),O(this._protocol,"Group exchange not implemented for server","handshake",_.KEY_EXCHANGE_FAILED));if(r!==b.KEXDH_GEX_REPLY)return O(this._protocol,`Received packet ${r} instead of ${b.KEXDH_GEX_REPLY}`,"handshake",_.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Received DH GEX Reply"),this._step=1,e[0]=b.KEXDH_REPLY,this.parse=t.prototype.parse,this.parse(e)}}}class g extends t{constructor(e,t,...r){super(...r),this.type="group",this.groupName=e,this.hashName=t}start(){if(!this._protocol._server){this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_INIT");const e=this.getPublicKey();let t=this._protocol._packetRW.write.allocStartKEX;const r=this._protocol._packetRW.write.alloc(5+e.length,!0);r[t]=b.KEXDH_INIT,P(r,e.length,++t),r.set(e,t+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(r,!0))}}generateKeys(){this._dh||(this._dh=o(this.groupName),this._public=this._dh.generateKeys())}getDHParams(){if(this._dh)return{prime:e(this._dh.getPrime()),generator:e(this._dh.getGenerator())}}}return(e,...t)=>{if("object"!=typeof e||null===e)throw new Error("Invalid negotiated argument");const n=e.kex;if("string"==typeof n){switch(t=[e,...t],n){case"curve25519-sha256":case"curve25519-sha256@libssh.org":if(!p)break;return new r("sha256",...t);case"ecdh-sha2-nistp256":return new u("prime256v1","sha256",...t);case"ecdh-sha2-nistp384":return new u("secp384r1","sha384",...t);case"ecdh-sha2-nistp521":return new u("secp521r1","sha512",...t);case"diffie-hellman-group1-sha1":return new g("modp2","sha1",...t);case"diffie-hellman-group14-sha1":return new g("modp14","sha1",...t);case"diffie-hellman-group14-sha256":return new g("modp14","sha256",...t);case"diffie-hellman-group15-sha512":return new g("modp15","sha512",...t);case"diffie-hellman-group16-sha512":return new g("modp16","sha512",...t);case"diffie-hellman-group17-sha512":return new g("modp17","sha512",...t);case"diffie-hellman-group18-sha512":return new g("modp18","sha512",...t);case"diffie-hellman-group-exchange-sha1":return new f("sha1",...t);case"diffie-hellman-group-exchange-sha256":return new f("sha256",...t)}throw new Error(`Unsupported key exchange algorithm: ${n}`)}throw new Error(`Invalid key exchange type: ${n}`)}})(),W=(()=>{const e=["kex","serverHostKey",["cs","cipher"],["sc","cipher"],["cs","mac"],["sc","mac"],["cs","compress"],["sc","compress"],["cs","lang"],["sc","lang"]];return class{constructor(t){if("object"!=typeof t||null===t)throw new TypeError("Argument must be an object");const r={kex:void 0,serverHostKey:void 0,cs:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0},sc:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0},all:void 0};let n=0;for(const o of e){let e,s,i,a;if("string"==typeof o)e=r,s=t[o],i=a=o;else{const n=o[0];e=r[n],a=o[1],s=t[n][a],i=`${n}.${a}`}const c={array:void 0,buffer:void 0};if(Buffer.isBuffer(s))c.array=(""+s).split(","),c.buffer=s,n+=4+s.length;else{if("string"==typeof s&&(s=s.split(",")),!Array.isArray(s))throw new TypeError(`Invalid \`${i}\` type: ${typeof s}`);c.array=s,c.buffer=Buffer.from(s.join(",")),n+=4+c.buffer.length}e[a]=c}const o=Buffer.allocUnsafe(n);r.all=o;let s=0;for(const t of e){let e;e="string"==typeof t?r[t].buffer:r[t[0]][t[1]].buffer,s=P(o,e.length,s),o.set(e,s),s+=e.length}this.totalSize=n,this.lists=r}copyAllTo(e,t){const r=this.lists.all;if("number"!=typeof t)throw new TypeError("Invalid offset value: "+typeof t);if(e.length-t<r.length)throw new Error("Insufficient space to copy list");return e.set(r,t),r.length}}})(),q=(()=>{const e=Buffer.allocUnsafe(4);return(t,r)=>{P(e,r.length,0),t.update(e),t.update(r)}})();function z(e,t,r,n,o,s){let a;if(e){let c=i(t).update(r).update(n).update(s).update(o).digest();for(;c.length<e;){const e=i(t).update(r).update(n).update(c).digest(),o=Buffer.allocUnsafe(c.length+e.length);o.set(c,0),o.set(e,c.length),c=o}a=c.length===e?c:new k(c.buffer,c.byteOffset,e)}else a=U;return a}function G(e,t){if(0===t.length)return void(this._debug&&this._debug("Inbound: Skipping empty packet payload"));if(this._skipNextInboundPacket)return void(this._skipNextInboundPacket=!1);const n=(t=this._packetRW.read.read(t))[0];switch(n){case b.DISCONNECT:case b.IGNORE:case b.UNIMPLEMENTED:case b.DEBUG:return x||(x=r(92908)),x[n](this,t);case b.KEXINIT:return e.firstPacket?(e.firstPacket=!1,F(this,t)):O(this,"Received extra KEXINIT during handshake","handshake",_.KEY_EXCHANGE_FAILED);default:if(n<20||n>49)return O(this,`Received unexpected packet type ${n}`,"handshake",_.KEY_EXCHANGE_FAILED)}return this._kex.parse(t)}function $(e){if(!e._sentNEWKEYS){e._protocol._debug&&e._protocol._debug("Outbound: Sending NEWKEYS");const t=e._protocol._packetRW.write.allocStartKEX,r=e._protocol._packetRW.write.alloc(1,!0);r[t]=b.NEWKEYS,e._protocol._cipher.encrypt(e._protocol._packetRW.write.finalize(r,!0)),e._sentNEWKEYS=!0}}e.exports={KexInit:W,kexinit:j,onKEXPayload:G,DEFAULT_KEXINIT:new W({kex:f,serverHostKey:g,cs:{cipher:m,mac:y,compress:v,lang:[]},sc:{cipher:m,mac:y,compress:v,lang:[]}}),HANDLERS:{[b.KEXINIT]:F}}},13781:(e,t,r)=>{"use strict";const{createDecipheriv:n,createECDH:o,createHash:s,createHmac:i,createSign:a,createVerify:c,getCiphers:l,sign:u,verify:d}=r(6113),h=l(),{Ber:p}=r(90476),f=r(62703).pbkdf,{CIPHER_INFO:g}=r(38545),{eddsaSupported:m,SUPPORTED_CIPHER:y}=r(3190),{bufferSlice:v,makeBufferParser:_,readString:b,readUInt32BE:S,writeUInt32BE:E}=r(39205),w=Symbol("Hash Algorithm"),A=Symbol("Private key PEM"),T=Symbol("Public key PEM"),C=Symbol("Public key SSH"),I=Symbol("Decrypted Key"),R=Object.create(null);{const te=Object.keys(g);for(let re=0;re<te.length;++re){const ne=g[te[re]].sslName;ne&&!R[ne]&&(R[ne]=g[te[re]])}}const O=_();function k(e,t){let r=(t=t.base64Slice(0,t.length)).replace(/.{64}/g,"$&\n");return 63&t.length&&(r+="\n"),`-----BEGIN ${e} KEY-----\n${r}-----END ${e} KEY-----`}function N(e,t){const r=Buffer.allocUnsafe(e.length+t.length);return r.set(e,0),r.set(t,e.length),r}function P(e,t){const r=e.length;let n=e._pos||0;for(let o=0;o<t;++o){const t=r-n;if(n>=r||t<4)return!1;const o=S(e,n);if(t<4+o)return!1;n+=4+o}return e._pos=n,!0}function M(e,t){const r=new p.Writer;return r.startSequence(),r.startSequence(),r.writeOID("1.2.840.113549.1.1.1"),r.writeNull(),r.endSequence(),r.startSequence(p.BitString),r.writeByte(0),r.startSequence(),r.writeBuffer(e,p.Integer),r.writeBuffer(t,p.Integer),r.endSequence(),r.endSequence(),r.endSequence(),k("PUBLIC",r.buffer)}function L(e,t){const r=Buffer.allocUnsafe(15+t.length+4+e.length);E(r,7,0),r.utf8Write("ssh-rsa",4,7);let n=11;return E(r,t.length,n),r.set(t,n+=4),E(r,e.length,n+=t.length),r.set(e,n+4),r}const B=(()=>{function e(e){return BigInt(`0x${e.hexSlice(0,e.length)}`)}function t(e){let t=e.toString(16);if(0!=(1&t.length))t=`0${t}`;else{const e=t.charCodeAt(0);(56===e||57===e||e>=97&&e<=102)&&(t=`00${t}`)}return Buffer.from(t,"hex")}return function(r,n,o,s,i,a){const c=e(o);return k("RSA PRIVATE",function(e,t,r,n,o,s,i,a){const c=new p.Writer;return c.startSequence(),c.writeInt(0,p.Integer),c.writeBuffer(e,p.Integer),c.writeBuffer(t,p.Integer),c.writeBuffer(r,p.Integer),c.writeBuffer(n,p.Integer),c.writeBuffer(o,p.Integer),c.writeBuffer(s,p.Integer),c.writeBuffer(i,p.Integer),c.writeBuffer(a,p.Integer),c.endSequence(),c.buffer}(r,n,o,i,a,t(c%(e(i)-1n)),t(c%(e(a)-1n)),s))}})();function D(e,t,r,n){const o=new p.Writer;return o.startSequence(),o.startSequence(),o.writeOID("1.2.840.10040.4.1"),o.startSequence(),o.writeBuffer(e,p.Integer),o.writeBuffer(t,p.Integer),o.writeBuffer(r,p.Integer),o.endSequence(),o.endSequence(),o.startSequence(p.BitString),o.writeByte(0),o.writeBuffer(n,p.Integer),o.endSequence(),o.endSequence(),k("PUBLIC",o.buffer)}function x(e,t,r,n){const o=Buffer.allocUnsafe(15+e.length+4+t.length+4+r.length+4+n.length);E(o,7,0),o.utf8Write("ssh-dss",4,7);let s=11;return E(o,e.length,s),o.set(e,s+=4),E(o,t.length,s+=e.length),o.set(t,s+=4),E(o,r.length,s+=t.length),o.set(r,s+=4),E(o,n.length,s+=r.length),o.set(n,s+4),o}function U(e,t,r,n,o){const s=new p.Writer;return s.startSequence(),s.writeInt(0,p.Integer),s.writeBuffer(e,p.Integer),s.writeBuffer(t,p.Integer),s.writeBuffer(r,p.Integer),s.writeBuffer(n,p.Integer),s.writeBuffer(o,p.Integer),s.endSequence(),k("DSA PRIVATE",s.buffer)}function j(e){const t=new p.Writer;return t.startSequence(),t.startSequence(),t.writeOID("1.3.101.112"),t.endSequence(),t.startSequence(p.BitString),t.writeByte(0),t._ensure(e.length),t._buf.set(e,t._offset),t._offset+=e.length,t.endSequence(),t.endSequence(),k("PUBLIC",t.buffer)}function F(e){const t=Buffer.allocUnsafe(19+e.length);return E(t,11,0),t.utf8Write("ssh-ed25519",4,11),E(t,e.length,15),t.set(e,19),t}function H(e){const t=new p.Writer;return t.startSequence(),t.writeInt(0,p.Integer),t.startSequence(),t.writeOID("1.3.101.112"),t.endSequence(),t.startSequence(p.OctetString),t.writeBuffer(e,p.OctetString),t.endSequence(),t.endSequence(),k("PRIVATE",t.buffer)}function W(e,t){const r=new p.Writer;return r.startSequence(),r.startSequence(),r.writeOID("1.2.840.10045.2.1"),r.writeOID(e),r.endSequence(),r.startSequence(p.BitString),r.writeByte(0),r._ensure(t.length),r._buf.set(t,r._offset),r._offset+=t.length,r.endSequence(),r.endSequence(),k("PUBLIC",r.buffer)}function q(e,t){let r;switch(e){case"1.2.840.10045.3.1.7":r="nistp256";break;case"1.3.132.0.34":r="nistp384";break;case"1.3.132.0.35":r="nistp521";break;default:return}const n=Buffer.allocUnsafe(39+t.length);return E(n,19,0),n.utf8Write(`ecdsa-sha2-${r}`,4,19),E(n,8,23),n.utf8Write(r,27,8),E(n,t.length,35),n.set(t,39),n}function z(e,t,r){const n=new p.Writer;return n.startSequence(),n.writeInt(1,p.Integer),n.writeBuffer(r,p.OctetString),n.startSequence(160),n.writeOID(e),n.endSequence(),n.startSequence(161),n.startSequence(p.BitString),n.writeByte(0),n._ensure(t.length),n._buf.set(t,n._offset),n._offset+=t.length,n.endSequence(),n.endSequence(),n.endSequence(),k("EC PRIVATE",n.buffer)}const G={sign:"function"==typeof u?function(e,t){const r=this[A];if(null===r)return new Error("No private key available");t&&"string"==typeof t||(t=this[w]);try{return u(t,e,r)}catch(e){return e}}:function(e,t){const r=this[A];if(null===r)return new Error("No private key available");t&&"string"==typeof t||(t=this[w]);const n=a(t);n.update(e);try{return n.sign(r)}catch(e){return e}},verify:"function"==typeof d?function(e,t,r){const n=this[T];if(null===n)return new Error("No public key available");r&&"string"==typeof r||(r=this[w]);try{return d(r,e,n,t)}catch(e){return e}}:function(e,t,r){const n=this[T];if(null===n)return new Error("No public key available");r&&"string"==typeof r||(r=this[w]);const o=c(r);o.update(e);try{return o.verify(n,t)}catch(e){return e}},isPrivateKey:function(){return null!==this[A]},getPrivatePEM:function(){return this[A]},getPublicPEM:function(){return this[T]},getPublicSSH:function(){return this[C]},equals:function(e){const t=ee(e);return!(t instanceof Error)&&this.type===t.type&&this[A]===t[A]&&this[T]===t[T]&&this[C]===t[C]}};function $(e,t,r,n,o,s,i){this.type=e,this.comment=t,this[A]=r,this[T]=n,this[C]=o,this[w]=s,this[I]=i}$.prototype=G;{const oe=/^-----BEGIN OPENSSH PRIVATE KEY-----(?:\r\n|\n)([\s\S]+)(?:\r\n|\n)-----END OPENSSH PRIVATE KEY-----$/;function se(e,t,r){const n=[];if(e.length<8)return new Error("Malformed OpenSSH private key");if(S(e,0)!==S(e,4))return r?new Error("OpenSSH key integrity check failed -- bad passphrase?"):new Error("OpenSSH key integrity check failed");let o,s;for(e._pos=8,o=0;o<t;++o){let t,o,i,a;const c=b(e,e._pos,!0);if(void 0===c)return new Error("Malformed OpenSSH private key");switch(c){case"ssh-rsa":{const r=b(e,e._pos);if(void 0===r)return new Error("Malformed OpenSSH private key");const n=b(e,e._pos);if(void 0===n)return new Error("Malformed OpenSSH private key");const s=b(e,e._pos);if(void 0===s)return new Error("Malformed OpenSSH private key");const c=b(e,e._pos);if(void 0===c)return new Error("Malformed OpenSSH private key");const l=b(e,e._pos);if(void 0===l)return new Error("Malformed OpenSSH private key");const u=b(e,e._pos);if(void 0===u)return new Error("Malformed OpenSSH private key");i=M(r,n),a=L(r,n),o=B(r,n,s,c,l,u),t="sha1";break}case"ssh-dss":{const r=b(e,e._pos);if(void 0===r)return new Error("Malformed OpenSSH private key");const n=b(e,e._pos);if(void 0===n)return new Error("Malformed OpenSSH private key");const s=b(e,e._pos);if(void 0===s)return new Error("Malformed OpenSSH private key");const c=b(e,e._pos);if(void 0===c)return new Error("Malformed OpenSSH private key");const l=b(e,e._pos);if(void 0===l)return new Error("Malformed OpenSSH private key");i=D(r,n,s,c),a=x(r,n,s,c),o=U(r,n,s,c,l),t="sha1";break}case"ssh-ed25519":{if(!m)return new Error(`Unsupported OpenSSH private key type: ${c}`);const r=b(e,e._pos);if(void 0===r||32!==r.length)return new Error("Malformed OpenSSH private key");const n=b(e,e._pos);if(void 0===n||64!==n.length)return new Error("Malformed OpenSSH private key");i=j(r),a=F(r),o=H(v(n,0,32)),t=null;break}case"ecdsa-sha2-nistp256":t="sha256",s="1.2.840.10045.3.1.7";case"ecdsa-sha2-nistp384":void 0===t&&(t="sha384",s="1.3.132.0.34");case"ecdsa-sha2-nistp521":{if(void 0===t&&(t="sha512",s="1.3.132.0.35"),!P(e,1))return new Error("Malformed OpenSSH private key");const r=b(e,e._pos);if(void 0===r)return new Error("Malformed OpenSSH private key");const n=b(e,e._pos);if(void 0===n)return new Error("Malformed OpenSSH private key");i=W(s,r),a=q(s,r),o=z(s,r,n);break}default:return new Error(`Unsupported OpenSSH private key type: ${c}`)}const l=b(e,e._pos,!0);if(void 0===l)return new Error("Malformed OpenSSH private key");n.push(new $(c,l,o,i,a,t,r))}let i=0;for(o=e._pos;o<e.length;++o)if(e[o]!==++i%255)return new Error("Malformed OpenSSH private key");return n}$.parse=(e,t)=>{const r=oe.exec(e);if(null===r)return null;let o;const s=Buffer.from(r[1],"base64");if(s.length<31)return new Error("Malformed OpenSSH private key");const i=s.utf8Slice(0,15);if("openssh-key-v1\0"!==i)return new Error(`Unsupported OpenSSH key magic: ${i}`);const a=b(s,15,!0);if(void 0===a)return new Error("Malformed OpenSSH private key");if("none"!==a&&-1===y.indexOf(a))return new Error(`Unsupported cipher for OpenSSH key: ${a}`);const c=b(s,s._pos,!0);if(void 0===c)return new Error("Malformed OpenSSH private key");if("none"!==c){if("none"===a)return new Error("Malformed OpenSSH private key");if("bcrypt"!==c)return new Error(`Unsupported kdf name for OpenSSH key: ${c}`);if(!t)return new Error("Encrypted private OpenSSH key detected, but no passphrase given")}else if("none"!==a)return new Error("Malformed OpenSSH private key");let l,u,d;"none"!==a&&(l=g[a]);const h=b(s,s._pos);if(void 0===h)return new Error("Malformed OpenSSH private key");if(h.length)switch(c){case"none":return new Error("Malformed OpenSSH private key");case"bcrypt":const e=b(h,0);if(void 0===e||h._pos+4>h.length)return new Error("Malformed OpenSSH private key");const r=S(h,h._pos),n=Buffer.allocUnsafe(l.keyLen+l.ivLen);if(0!==f(t,t.length,e,e.length,n,n.length,r))return new Error("Failed to generate information to decrypt key");u=v(n,0,l.keyLen),d=v(n,l.keyLen,n.length)}else if("none"!==c)return new Error("Malformed OpenSSH private key");if(s._pos+3>=s.length)return new Error("Malformed OpenSSH private key");const p=S(s,s._pos);if(s._pos+=4,p>0){for(let e=0;e<p;++e){const e=b(s,s._pos);if(void 0===e)return new Error("Malformed OpenSSH private key");if(void 0===b(e,0,!0))return new Error("Malformed OpenSSH private key")}let e=b(s,s._pos);if(void 0===e)return new Error("Malformed OpenSSH private key");if(void 0!==u){if(e.length<l.blockLen||e.length%l.blockLen!=0)return new Error("Malformed OpenSSH private key");try{const t={authTagLength:l.authLen},r=n(l.sslName,u,d,t);if(l.authLen>0){if(s.length-s._pos<l.authLen)return new Error("Malformed OpenSSH private key");r.setAuthTag(v(s,s._pos,s._pos+=l.authLen))}e=N(r.update(e),r.final())}catch(e){return e}}if(s._pos!==s.length)return new Error("Malformed OpenSSH private key");o=se(e,p,void 0!==u)}else o=[];return o instanceof Error?o:o[0]}}function V(e,t,r,n,o,s,i){this.type=e,this.comment=t,this[A]=r,this[T]=n,this[C]=o,this[w]=s,this[I]=i}V.prototype=G;{const ie=/^-----BEGIN (RSA|DSA|EC) PRIVATE KEY-----(?:\r\n|\n)((?:[^:]+:\s*[\S].*(?:\r\n|\n))*)([\s\S]+)(?:\r\n|\n)-----END (RSA|DSA|EC) PRIVATE KEY-----$/;V.parse=(e,t)=>{const r=ie.exec(e);if(null===r)return null;let i,a,c,l,u,d,f=Buffer.from(r[3],"base64"),g=r[2],m=!1;if(void 0!==g){g=g.split(/\r\n|\n/g);for(let e=0;e<g.length;++e){const r=g[e];let o=r.indexOf(":");if("DEK-Info"===r.slice(0,o)){const e=r.slice(o+2);if(o=e.indexOf(","),-1===o)continue;const i=e.slice(0,o).toLowerCase();if(-1===h.indexOf(i))return new Error(`Cipher (${i}) not supported for encrypted OpenSSH private key`);const a=R[i];if(!a)return new Error(`Cipher (${i}) not supported for encrypted OpenSSH private key`);const c=Buffer.from(e.slice(o+1),"hex");if(c.length!==a.ivLen)return new Error("Malformed encrypted OpenSSH private key");if(!t)return new Error("Encrypted OpenSSH private key detected, but no passphrase given");const l=v(c,0,8);let u=s("md5").update(t).update(l).digest();for(;u.length<a.keyLen;)u=N(u,s("md5").update(u).update(t).update(l).digest());u.length>a.keyLen&&(u=v(u,0,a.keyLen));try{const e=n(i,u,c);e.setAutoPadding(!1),f=N(e.update(f),e.final()),m=!0}catch(e){return e}}}}let y="Malformed OpenSSH private key";switch(m&&(y+=". Bad passphrase?"),r[1]){case"RSA":i="ssh-rsa",a=k("RSA PRIVATE",f);try{d=new p.Reader(f),d.readSequence(),d.readInt();const e=d.readString(p.Integer,!0);if(null===e)return new Error(y);const t=d.readString(p.Integer,!0);if(null===t)return new Error(y);c=M(e,t),l=L(e,t)}catch{return new Error(y)}u="sha1";break;case"DSA":i="ssh-dss",a=k("DSA PRIVATE",f);try{d=new p.Reader(f),d.readSequence(),d.readInt();const e=d.readString(p.Integer,!0);if(null===e)return new Error(y);const t=d.readString(p.Integer,!0);if(null===t)return new Error(y);const r=d.readString(p.Integer,!0);if(null===r)return new Error(y);const n=d.readString(p.Integer,!0);if(null===n)return new Error(y);c=D(e,t,r,n),l=x(e,t,r,n)}catch{return new Error(y)}u="sha1";break;case"EC":let e,t,r;try{d=new p.Reader(f),d.readSequence(),d.readInt(),t=d.readString(p.OctetString,!0),d.readByte();const n=d.readLength();if(null===n)return new Error(y);if(d._offset=n,r=d.readOID(),null===r)return new Error(y);switch(r){case"1.2.840.10045.3.1.7":e="prime256v1",i="ecdsa-sha2-nistp256",u="sha256";break;case"1.3.132.0.34":e="secp384r1",i="ecdsa-sha2-nistp384",u="sha384";break;case"1.3.132.0.35":e="secp521r1",i="ecdsa-sha2-nistp521",u="sha512";break;default:return new Error(`Unsupported private key EC OID: ${r}`)}}catch{return new Error(y)}a=k("EC PRIVATE",f);const n=function(e,t){const r=o(e);return r.setPrivateKey(t),r.getPublicKey()}(e,t);c=W(r,n),l=q(r,n)}return new V(i,"",a,c,l,u,m)}}function J(e,t,r,n,o,s,i){this.type=e,this.comment=t,this[A]=r,this[T]=n,this[C]=o,this[w]=s,this[I]=i}J.prototype=G;{const ae=Buffer.alloc(0),ce=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),le=Buffer.from([0,0,0,0]),ue=Buffer.from([0,0,0,1]),de=/^PuTTY-User-Key-File-2: (ssh-(?:rsa|dss))\r?\nEncryption: (aes256-cbc|none)\r?\nComment: ([^\r\n]*)\r?\nPublic-Lines: \d+\r?\n([\s\S]+?)\r?\nPrivate-Lines: \d+\r?\n([\s\S]+?)\r?\nPrivate-MAC: ([^\r\n]+)/;J.parse=(e,t)=>{const r=de.exec(e);if(null===r)return null;const o=r[2],a="none"!==o;if(a&&!t)return new Error("Encrypted PPK private key detected, but no passphrase given");let c=Buffer.from(r[5],"base64");if(a){const e=g[o];let r=N(s("sha1").update(le).update(t).digest(),s("sha1").update(ue).update(t).digest());r.length>e.keyLen&&(r=v(r,0,e.keyLen));try{const t=n(e.sslName,r,ce);t.setAutoPadding(!1),c=N(t.update(c),t.final())}catch(e){return e}}const l=r[1],u=r[3],d=Buffer.from(r[4],"base64"),h=r[6],p=l.length,f=o.length,m=Buffer.byteLength(u),y=d.length,_=c.length,S=Buffer.allocUnsafe(4+p+4+f+4+m+4+y+4+_);let w,A,T,C=0;if(E(S,p,C),S.utf8Write(l,C+=4,p),E(S,f,C+=p),S.utf8Write(o,C+=4,f),E(S,m,C+=f),S.utf8Write(u,C+=4,m),E(S,y,C+=m),S.set(d,C+=4),E(S,_,C+=y),S.set(c,C+4),t||(t=ae),i("sha1",s("sha1").update("putty-private-key-file-mac-key").update(t).digest()).update(S).digest("hex")!==h)return a?new Error("PPK private key integrity check failed -- bad passphrase?"):new Error("PPK private key integrity check failed");switch(d._pos=0,P(d,1),l){case"ssh-rsa":{const e=b(d,d._pos);if(void 0===e)return new Error("Malformed PPK public key");const t=b(d,d._pos);if(void 0===t)return new Error("Malformed PPK public key");const r=b(c,0);if(void 0===r)return new Error("Malformed PPK private key");const n=b(c,c._pos);if(void 0===n)return new Error("Malformed PPK private key");const o=b(c,c._pos);if(void 0===o)return new Error("Malformed PPK private key");const s=b(c,c._pos);if(void 0===s)return new Error("Malformed PPK private key");w=M(t,e),A=L(t,e),T=B(t,e,r,s,n,o);break}case"ssh-dss":{const e=b(d,d._pos);if(void 0===e)return new Error("Malformed PPK public key");const t=b(d,d._pos);if(void 0===t)return new Error("Malformed PPK public key");const r=b(d,d._pos);if(void 0===r)return new Error("Malformed PPK public key");const n=b(d,d._pos);if(void 0===n)return new Error("Malformed PPK public key");const o=b(c,0);if(void 0===o)return new Error("Malformed PPK private key");w=D(e,t,r,n),A=x(e,t,r,n),T=U(e,t,r,n,o);break}}return new J(l,u,T,w,A,"sha1",a)}}function K(e,t,r,n,o){this.type=e,this.comment=t,this[A]=null,this[T]=r,this[C]=n,this[w]=o,this[I]=!1}K.prototype=G;{let he;he=m?/^(((?:ssh-(?:rsa|dss|ed25519))|ecdsa-sha2-nistp(?:256|384|521))(?:-cert-v0[01]@openssh.com)?) ([A-Z0-9a-z/+=]+)(?:$|\s+([\S].*)?)$/:/^(((?:ssh-(?:rsa|dss))|ecdsa-sha2-nistp(?:256|384|521))(?:-cert-v0[01]@openssh.com)?) ([A-Z0-9a-z/+=]+)(?:$|\s+([\S].*)?)$/,K.parse=e=>{const t=he.exec(e);if(null===t)return null;const r=t[1],n=t[2],o=Buffer.from(t[3],"base64"),s=t[4]||"",i=b(o,o._pos,!0);return void 0===i||0!==i.indexOf(n)?new Error("Malformed OpenSSH public key"):Y(o,n,s,r)}}function Q(e,t,r,n,o){this.type=e,this.comment=t,this[A]=null,this[T]=r,this[C]=n,this[w]=o,this[I]=!1}Q.prototype=G;{const pe=/^---- BEGIN SSH2 PUBLIC KEY ----(?:\r?\n)((?:.{0,72}\r?\n)+)---- END SSH2 PUBLIC KEY ----$/,fe=/^[A-Z0-9a-z/+=\r\n]+$/,ge=/^([\x21-\x39\x3B-\x7E]{1,64}): ((?:[^\\]*\\\r?\n)*[^\r\n]+)\r?\n/gm,me=/\\\r?\n/g;Q.parse=e=>{let t=pe.exec(e);if(null===t)return null;const r=t[1];let n=0,o="";for(;t=ge.exec(r);){const e=t[1],r=t[2].replace(me,"");if(r.length>1024)return ge.lastIndex=0,new Error("Malformed RFC4716 public key");n=ge.lastIndex,"comment"===e.toLowerCase()&&(o=r,o.length>1&&34===o.charCodeAt(0)&&34===o.charCodeAt(o.length-1)&&(o=o.slice(1,-1)))}let s=r.slice(n);if(!fe.test(s))return new Error("Malformed RFC4716 public key");s=Buffer.from(s,"base64");const i=b(s,0,!0);if(void 0===i)return new Error("Malformed RFC4716 public key");let a=null,c=null;switch(i){case"ssh-rsa":{const e=b(s,s._pos);if(void 0===e)return new Error("Malformed RFC4716 public key");const t=b(s,s._pos);if(void 0===t)return new Error("Malformed RFC4716 public key");a=M(t,e),c=L(t,e);break}case"ssh-dss":{const e=b(s,s._pos);if(void 0===e)return new Error("Malformed RFC4716 public key");const t=b(s,s._pos);if(void 0===t)return new Error("Malformed RFC4716 public key");const r=b(s,s._pos);if(void 0===r)return new Error("Malformed RFC4716 public key");const n=b(s,s._pos);if(void 0===n)return new Error("Malformed RFC4716 public key");a=D(e,t,r,n),c=x(e,t,r,n);break}default:return new Error("Malformed RFC4716 public key")}return new Q(i,o,a,c,"sha1")}}function Y(e,t,r,n){if(!X(t))return new Error(`Unsupported OpenSSH public key type: ${t}`);let o,s,i=null,a=null;switch(t){case"ssh-rsa":{const t=b(e,e._pos||0);if(void 0===t)return new Error("Malformed OpenSSH public key");const r=b(e,e._pos);if(void 0===r)return new Error("Malformed OpenSSH public key");i=M(r,t),a=L(r,t),o="sha1";break}case"ssh-dss":{const t=b(e,e._pos||0);if(void 0===t)return new Error("Malformed OpenSSH public key");const r=b(e,e._pos);if(void 0===r)return new Error("Malformed OpenSSH public key");const n=b(e,e._pos);if(void 0===n)return new Error("Malformed OpenSSH public key");const s=b(e,e._pos);if(void 0===s)return new Error("Malformed OpenSSH public key");i=D(t,r,n,s),a=x(t,r,n,s),o="sha1";break}case"ssh-ed25519":{const t=b(e,e._pos||0);if(void 0===t||32!==t.length)return new Error("Malformed OpenSSH public key");i=j(t),a=F(t),o=null;break}case"ecdsa-sha2-nistp256":o="sha256",s="1.2.840.10045.3.1.7";case"ecdsa-sha2-nistp384":void 0===o&&(o="sha384",s="1.3.132.0.34");case"ecdsa-sha2-nistp521":{if(void 0===o&&(o="sha512",s="1.3.132.0.35"),!P(e,1))return new Error("Malformed OpenSSH public key");const t=b(e,e._pos||0);if(void 0===t)return new Error("Malformed OpenSSH public key");i=W(s,t),a=q(s,t);break}default:return new Error(`Unsupported OpenSSH public key type: ${t}`)}return new K(n,r,i,a,o)}function X(e){switch(e){case"ssh-rsa":case"ssh-dss":case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":return!0;case"ssh-ed25519":if(m)return!0;default:return!1}}function Z(e){return!!e&&"boolean"==typeof e[I]}function ee(e,t){if(Z(e))return e;let r,n;if(Buffer.isBuffer(e))r=e,e=e.utf8Slice(0,e.length).trim();else{if("string"!=typeof e)return new Error("Key data must be a Buffer or string");e=e.trim()}if(null!=t)if("string"==typeof t)t=Buffer.from(t);else if(!Buffer.isBuffer(t))return new Error("Passphrase must be a string or Buffer when supplied");if(null!==(n=$.parse(e,t)))return n;if(null!==(n=V.parse(e,t)))return n;if(null!==(n=J.parse(e,t)))return n;if(null!==(n=K.parse(e)))return n;if(null!==(n=Q.parse(e)))return n;if(r){O.init(r,0);const t=O.readString(!0);void 0!==t&&void 0!==(e=O.readRaw())&&(n=Y(e,t,"",t),n instanceof Error&&(n=null)),O.clear()}return n||new Error("Unsupported key format")}e.exports={isParsedKey:Z,isSupportedKeyType:X,parseDERKey:(e,t)=>Y(e,t,"",t),parseKey:ee}},85607:(e,t,r)=>{"use strict";const n=r(39491),{inspect:o}=r(73837);function s(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function i(e,t){if(n("string"==typeof t,"`thing` has to be of type string"),Array.isArray(e)){const r=e.length;return n(r>0,"At least one expected value needs to be specified"),e=e.map((e=>String(e))),r>2?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}t.ERR_INTERNAL_ASSERTION=class e extends Error{constructor(t){super(),Error.captureStackTrace(this,e);const r="This is caused by either a bug in ssh2 or incorrect usage of ssh2 internals.\nPlease open an issue with this stack trace at https://github.com/mscdex/ssh2/issues\n";this.message=void 0===t?r:`${t}\n${r}`}};const a=(()=>{try{return new Function("return 2n ** 32n")()}catch{}})();t.ERR_OUT_OF_RANGE=class e extends RangeError{constructor(t,r,i,c){super(),Error.captureStackTrace(this,e),n(r,'Missing "range" argument');let l,u=c?t:`The value of "${t}" is out of range.`;Number.isInteger(i)&&Math.abs(i)>4294967296?l=s(String(i)):"bigint"==typeof i?(l=String(i),(i>a||i<-a)&&(l=s(l)),l+="n"):l=o(i),u+=` It must be ${r}. Received ${l}`,this.message=u}};class c extends TypeError{constructor(e,t,r){let o,s;if(super(),Error.captureStackTrace(this,c),n("string"==typeof e,"'name' must be a string"),"string"==typeof t&&t.startsWith("not ")?(o="must not be",t=t.replace(/^not /,"")):o="must be",e.endsWith(" argument"))s=`The ${e} ${o} ${i(t,"type")}`;else{const r=e.includes(".")?"property":"argument";s=`The "${e}" ${r} ${o} ${i(t,"type")}`}s+=". Received type "+typeof r,this.message=s}}t.ERR_INVALID_ARG_TYPE=c,t.validateNumber=function(e,t){if("number"!=typeof e)throw new c(t,"number",e)}},39205:(e,t,r)=>{"use strict";const n=r(90476).Ber;let o;const s=Buffer[Symbol.species],i=Object.getPrototypeOf(Uint8Array.prototype).fill;function a(e,t){return 16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t]}function c(e,t,r,n,o){o||(o=0),n>e.length&&(n=e.length);let s=n-r;const i=t.length-o;return s>i&&(s=i),t.set(new Uint8Array(e.buffer,e.byteOffset+r,s),o),s}function l(e,t,r){return void 0===r&&(r=e.length),new s(e.buffer,e.byteOffset+t,r-t)}function u(){let e,t=0;const r={init:(r,n)=>{e=r,t="number"==typeof n?n:0},pos:()=>t,length:()=>e?e.length:0,avail:()=>e&&t<e.length?e.length-t:0,clear:()=>{e=void 0},readUInt32BE:()=>{if(e&&!(t+3>=e.length))return 16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t++]},readUInt64BE:r=>{if(e&&!(t+7>=e.length))switch(r){case"always":return BigInt(`0x${e.hexSlice(t,t+=8)}`);case"maybe":if(e[t]>31)return BigInt(`0x${e.hexSlice(t,t+=8)}`);default:return 72057594037927940*e[t++]+281474976710656*e[t++]+1099511627776*e[t++]+4294967296*e[t++]+16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t++]}},skip:r=>{e&&r>0&&(t+=r)},skipString:()=>{const n=r.readUInt32BE();if(void 0!==n)return t+=n,t<=e.length?n:void 0},readByte:()=>{if(e&&t<e.length)return e[t++]},readBool:()=>{if(e&&t<e.length)return!!e[t++]},readList:()=>{const e=r.readString(!0);if(void 0!==e)return e?e.split(","):[]},readString:(n,o)=>{"number"==typeof n&&(o=n,n=void 0);const s=r.readUInt32BE();if(void 0!==s&&!(e.length-t<s||"number"==typeof o&&s>o))return n?Buffer.isBuffer(n)?c(e,n,t,t+=s):e.utf8Slice(t,t+=s):l(e,t,t+=s)},readRaw:r=>{if(e)return"number"!=typeof r?l(e,t,t+=e.length-t):e.length-t>=r?l(e,t,t+=r):void 0}};return r}function d(e,t,r){const n=new Error(e);return"boolean"==typeof t?(r=t,n.level="protocol"):n.level=t||"protocol",n.fatal=!!r,n}function h(e,t,r){return e[r++]=t>>>24,e[r++]=t>>>16,e[r++]=t>>>8,e[r++]=t,r}const p=u();e.exports={bufferCopy:c,bufferSlice:l,FastBuffer:s,bufferFill:(e,t,r,n)=>i.call(e,t,r,n),makeError:d,doFatalError:(e,t,n,s)=>{let i;return void 0===o&&({DISCONNECT_REASON:o}=r(3190)),t instanceof Error?(i=t,s="number"!=typeof n?o.PROTOCOL_ERROR:n):i=d(t,n,!0),"number"!=typeof s&&(s=o.PROTOCOL_ERROR),e.disconnect(s),e._destruct(),e._onError(i),1/0},readUInt32BE:a,writeUInt32BE:h,writeUInt32LE:(e,t,r)=>(e[r++]=t,e[r++]=t>>>8,e[r++]=t>>>16,e[r++]=t>>>24,r),makeBufferParser:u,bufferParser:u(),readString:(e,t,r,n)=>{"number"==typeof r&&(n=r,r=void 0),void 0===t&&(t=0);const o=e.length-t;if(t<0||t>=e.length||o<4)return;const s=a(e,t);if(o<4+s||"number"==typeof n&&s>n)return;const i=(t+=4)+s;return e._pos=i,r?Buffer.isBuffer(r)?c(e,r,t,i):e.utf8Slice(t,i):l(e,t,i)},sigSSHToASN1:(e,t)=>{switch(t){case"ssh-dss":{if(e.length>40)return e;const t=new n.Writer;t.startSequence();let r=e.slice(0,20),o=e.slice(20);if(128&r[0]){const e=Buffer.allocUnsafe(21);e[0]=0,r.copy(e,1),r=e}else 0!==r[0]||128&r[1]||(r=r.slice(1));if(128&o[0]){const e=Buffer.allocUnsafe(21);e[0]=0,o.copy(e,1),o=e}else 0!==o[0]||128&o[1]||(o=o.slice(1));return t.writeBuffer(r,n.Integer),t.writeBuffer(o,n.Integer),t.endSequence(),t.buffer}case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":{p.init(e,0);const t=p.readString(),r=p.readString();if(p.clear(),void 0===t||void 0===r)return;const o=new n.Writer;return o.startSequence(),o.writeBuffer(t,n.Integer),o.writeBuffer(r,n.Integer),o.endSequence(),o.buffer}default:return e}},convertSignature:(e,t)=>{switch(t){case"ssh-dss":{if(e.length<=40)return e;const t=new n.Reader(e);t.readSequence();let r=t.readString(n.Integer,!0),o=t.readString(n.Integer,!0),s=0,i=0;if(r.length<20){const e=Buffer.allocUnsafe(20);e.set(r,1),r=e,r[0]=0}if(o.length<20){const e=Buffer.allocUnsafe(20);e.set(o,1),o=e,o[0]=0}r.length>20&&0===r[0]&&(s=1),o.length>20&&0===o[0]&&(i=1);const a=Buffer.allocUnsafe(r.length-s+(o.length-i));return c(r,a,s,r.length,0),c(o,a,i,o.length,r.length-s),a}case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":{if(0===e[0])return e;const t=new n.Reader(e);t.readSequence();const r=t.readString(n.Integer,!0),o=t.readString(n.Integer,!0);if(null===r||null===o)return;const s=Buffer.allocUnsafe(4+r.length+4+o.length);return h(s,r.length,0),s.set(r,4),h(s,o.length,4+r.length),s.set(o,8+r.length),s}}return e},sendPacket:(e,t,r)=>r||void 0===e._kexinit?(e._cipher.encrypt(t),!0):(void 0===e._queue&&(e._queue=[]),e._queue.push(t),e._debug&&e._debug("Outbound: ... packet queued"),!1)}},36993:(e,t,r)=>{"use strict";const{kMaxLength:n}=r(14300),{createInflate:o,constants:{DEFLATE:s,INFLATE:i,Z_DEFAULT_CHUNK:a,Z_DEFAULT_COMPRESSION:c,Z_DEFAULT_MEMLEVEL:l,Z_DEFAULT_STRATEGY:u,Z_DEFAULT_WINDOWBITS:d,Z_PARTIAL_FLUSH:h}}=r(59796),p=o()._handle.constructor;function f(){throw new Error("Should not get here")}function g(e,t,r){const n=this._owner,o=new Error(e);o.errno=t,o.code=r,n._err=o}function m(e){e._handle&&(e._handle.close(),e._handle=null)}class y{constructor(e){const t=d,r=c,o=l,s=u;this._err=void 0,this._writeState=new Uint32Array(2),this._chunkSize=a,this._maxOutputLength=n,this._outBuffer=Buffer.allocUnsafe(this._chunkSize),this._outOffset=0,this._handle=new p(e),this._handle._owner=this,this._handle.onerror=g,this._handle.init(t,r,o,s,this._writeState,f,void 0)}writeSync(e,t){const r=this._handle;if(!r)throw new Error("Invalid Zlib instance");let n,o,s,i=e.length,a=this._chunkSize-this._outOffset,c=0,l=0;const u=this._writeState;let d=this._outBuffer,p=this._outOffset;const f=this._chunkSize;for(;;){if(r.writeSync(h,e,c,i,d,p,a),this._err)throw this._err;n=u[0],o=u[1];const t=i-o,g=a-n;if(g>0){const e=0===p&&g===d.length?d:d.slice(p,p+g);if(p+=g,s?void 0===s.push?s=[s,e]:s.push(e):s=e,l+=e.byteLength,l>this._maxOutputLength)throw m(this),new Error(`Output length exceeded maximum of ${this._maxOutputLength}`)}else if(0!==g)throw new Error("have should not go down");if((0===n||p>=f)&&(a=f,p=0,d=Buffer.allocUnsafe(f)),0!==n)break;c+=t,i=o}if(this._outBuffer=d,this._outOffset=p,0===l&&(s=Buffer.alloc(0)),t)return s.totalLen=l,s;if(void 0===s.push)return s;const g=Buffer.allocUnsafe(l);for(let e=0,t=0;e<s.length;++e){const r=s[e];g.set(r,t),t+=r.length}return g}}e.exports={PacketReader:class{cleanup(){}read(e){return e}},PacketWriter:class{constructor(e){this.allocStart=5,this.allocStartKEX=5,this._protocol=e}cleanup(){}alloc(e,t){return void 0===this._protocol._kexinit||t?this._protocol._cipher.allocPacket(e):Buffer.allocUnsafe(e)}finalize(e,t){return e}},ZlibPacketReader:class{constructor(){this._zlib=new y(i)}cleanup(){this._zlib&&m(this._zlib)}read(e){return this._zlib.writeSync(e,!1)}},ZlibPacketWriter:class{constructor(e){this.allocStart=0,this.allocStartKEX=0,this._protocol=e,this._zlib=new y(s)}cleanup(){this._zlib&&m(this._zlib)}alloc(e,t){return Buffer.allocUnsafe(e)}finalize(e,t){if(void 0===this._protocol._kexinit||t){const t=this._zlib.writeSync(e,!0),r=this._protocol._cipher.allocPacket(t.totalLen);if(void 0===t.push)r.set(t,5);else for(let e=0,n=5;e<t.length;++e){const o=t[e];r.set(o,n),n+=o.length}return r}return e}}}},37465:(e,t,r)=>{"use strict";const{Server:n}=r(41808),o=r(82361),{listenerCount:s}=o,{CHANNEL_OPEN_FAILURE:i,DEFAULT_CIPHER:a,DEFAULT_COMPRESSION:c,DEFAULT_KEX:l,DEFAULT_MAC:u,DEFAULT_SERVER_HOST_KEY:d,DISCONNECT_REASON:h,DISCONNECT_REASON_BY_VALUE:p,SUPPORTED_CIPHER:f,SUPPORTED_COMPRESSION:g,SUPPORTED_KEX:m,SUPPORTED_MAC:y,SUPPORTED_SERVER_HOST_KEY:v}=r(3190),{init:_}=r(38545),{KexInit:b}=r(65260),{parseKey:S}=r(13781),E=r(53603),{SFTP:w}=r(64061),{writeUInt32BE:A}=r(39205),{Channel:T,MAX_WINDOW:C,PACKET_SIZE:I,windowAdjust:R,WINDOW_THRESHOLD:O}=r(50491),{ChannelManager:k,generateAlgorithmList:N,isWritable:P,onChannelOpenFailure:M,onCHANNEL_CLOSE:L}=r(17236);class B extends o{constructor(e,t,r,n,o){super(),this.username=this.user=t,this.service=r,this.method=n,this._initialResponse=!1,this._finalResponse=!1,this._multistep=!1,this._cbfinal=(e,t,r)=>{this._finalResponse||(this._finalResponse=!0,o(this,e,t,r))},this._protocol=e}accept(){this._cleanup&&this._cleanup(),this._initialResponse=!0,this._cbfinal(!0)}reject(e,t){this._cleanup&&this._cleanup(),this._initialResponse=!0,this._cbfinal(!1,e,t)}}class D extends B{constructor(e,t,r,n,o,s){super(e,t,r,n,s),this._multistep=!0,this._cb=void 0,this._onInfoResponse=e=>{const t=this._cb;t&&(this._cb=void 0,t(e))},this.submethods=o,this.on("abort",(()=>{this._cb&&this._cb(new Error("Authentication request aborted"))}))}prompt(e,t,r,n){Array.isArray(e)||(e=[e]),"function"==typeof t?(n=t,t=r=void 0):"function"==typeof r?(n=r,r=void 0):"function"!=typeof n&&(n=void 0);for(let t=0;t<e.length;++t)"string"==typeof e[t]&&(e[t]={prompt:e[t],echo:!0});this._cb=n,this._initialResponse=!0,this._protocol.authInfoReq(t,r,e)}}class x extends B{constructor(e,t,r,n,o,s){super(e,t,r,n,s),this.key={algo:o.keyAlgo,data:o.key},this.signature=o.signature,this.blob=o.blob}accept(){this.signature?B.prototype.accept.call(this):(this._initialResponse=!0,this._protocol.authPKOK(this.key.algo,this.key.data))}}class U extends B{constructor(e,t,r,n,o,s){super(e,t,r,n,s),this.key={algo:o.keyAlgo,data:o.key},this.signature=o.signature,this.blob=o.blob,this.localHostname=o.localHostname,this.localUsername=o.localUsername}}class j extends B{constructor(e,t,r,n,o,s){super(e,t,r,n,s),this.password=o,this._changeCb=void 0}requestChange(e,t){if(this._changeCb)throw new Error("Change request already in progress");if("string"!=typeof e)throw new Error("prompt argument must be a string");if("function"!=typeof t)throw new Error("Callback argument must be a function");this._changeCb=t,this._protocol.authPasswdChg(e)}}class F extends o{constructor(e,t,r){super(),this.type="session",this.subtype=void 0,this.server=!0,this._ending=!1,this._channel=void 0,this._chanInfo={type:"session",incoming:{id:r,window:C,packetSize:I,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}}}}class H extends o{constructor(e,t){if(super(),"object"!=typeof e||null===e)throw new Error("Missing configuration object");const r=Object.create(null),o=[],s=e.hostKeys;if(!Array.isArray(s))throw new Error("hostKeys must be an array");const i="object"==typeof e.algorithms&&null!==e.algorithms?e.algorithms:{},h=N(i.serverHostKey,d,v);for(let e=0;e<s.length;++e){let t;if(t=Buffer.isBuffer(s[e])||"string"==typeof s[e]?S(s[e]):S(s[e].key,s[e].passphrase),t instanceof Error)throw new Error(`Cannot parse privateKey: ${t.message}`);if(Array.isArray(t)&&(t=t[0]),null===t.getPrivatePEM())throw new Error("privateKey value contains an invalid private key");if(!o.includes(t.type))if("ssh-rsa"===t.type){let e=h.indexOf("ssh-rsa");const n=h.indexOf("rsa-sha2-256"),s=h.indexOf("rsa-sha2-512");-1===e&&(e=1/0),[e,n,s].sort(z).forEach((i=>{if(-1===i)return;let a;switch(i){case e:a="ssh-rsa";break;case n:a="rsa-sha2-256";break;case s:a="rsa-sha2-512";break;default:return}r[a]=t,o.push(a)}))}else r[t.type]=t,o.push(t.type)}const p={kex:N(i.kex,l,m),serverHostKey:o,cs:{cipher:N(i.cipher,a,f),mac:N(i.hmac,u,y),compress:N(i.compress,c,g),lang:[]},sc:void 0};p.sc=p.cs,"function"==typeof t&&this.on("connection",t);const _="function"==typeof e.debug?e.debug:void 0,E=e.ident?Buffer.from(e.ident):void 0,w=new b(p);this._srv=new n((t=>{if(this._connections>=this.maxConnections)return void t.destroy();let n;if(++this._connections,t.once("close",(()=>{--this._connections})),_){const e=`[${process.hrtime().join(".")}] `;n=t=>{_(`${e}${t}`)}}new W(t,r,E,w,n,this,e)})).on("error",(e=>{this.emit("error",e)})).on("listening",(()=>{this.emit("listening")})).on("close",(()=>{this.emit("close")})),this._connections=0,this.maxConnections=1/0}injectSocket(e){this._srv.emit("connection",e)}listen(...e){return this._srv.listen(...e),this}address(){return this._srv.address()}getConnections(e){return this._srv.getConnections(e),this}close(e){return this._srv.close(e),this}ref(){return this._srv.ref(),this}unref(){return this._srv.unref(),this}}H.KEEPALIVE_CLIENT_INTERVAL=15e3,H.KEEPALIVE_CLIENT_COUNT_MAX=3;class W extends o{constructor(e,t,r,n,o,a,c){super();let l,u,d,f=0,g=!1,m=[];const y=[];function v(e){}this._sock=e,this._chanMgr=new k(this),this._debug=o,this.noMoreSessions=!1,this.authenticated=!1,this.on("error",v);const b=o?(e,t,r)=>{o(`Debug output from client: ${JSON.stringify(r)}`)}:void 0,S="number"==typeof c.keepaliveInterval&&isFinite(c.keepaliveInterval)&&c.keepaliveInterval>0?c.keepaliveInterval:"number"==typeof H.KEEPALIVE_CLIENT_INTERVAL&&isFinite(H.KEEPALIVE_CLIENT_INTERVAL)&&H.KEEPALIVE_CLIENT_INTERVAL>0?H.KEEPALIVE_CLIENT_INTERVAL:-1,N="number"==typeof c.keepaliveCountMax&&isFinite(c.keepaliveCountMax)&&c.keepaliveCountMax>=0?c.keepaliveCountMax:"number"==typeof H.KEEPALIVE_CLIENT_COUNT_MAX&&isFinite(H.KEEPALIVE_CLIENT_COUNT_MAX)&&H.KEEPALIVE_CLIENT_COUNT_MAX>=0?H.KEEPALIVE_CLIENT_COUNT_MAX:-1;let W=0;-1!==S&&-1!==N&&(this.once("ready",(()=>{const e=()=>{clearInterval(u)};this.on("close",e).on("end",e),u=setInterval((()=>{if(++W>N){clearInterval(u);const e=new Error("Keepalive timeout");e.level="client-timeout",this.emit("error",e),this.end()}else q.ping()}),S)})),d=()=>{u&&u.refresh(),W=0});const q=this._protocol=new E({server:!0,hostKeys:t,ident:r,offer:n,onPacket:d,greeting:c.greeting,banner:c.banner,onWrite:t=>{P(e)&&e.write(t)},onError:t=>{q._destruct||e.removeAllListeners("data"),this.emit("error",t);try{e.end()}catch{}},onHeader:t=>{this.removeListener("error",v);const r={ip:e.remoteAddress,family:e.remoteFamily,port:e.remotePort,header:t};if(!a.emit("connection",this,r))return q.disconnect(h.BY_APPLICATION),void e.end();t.greeting&&this.emit("greeting",t.greeting)},onHandshakeComplete:e=>{++f>1&&this.emit("rekey"),this.emit("handshake",e)},debug:o,messageHandlers:{DEBUG:b,DISCONNECT:(t,r,n)=>{if(r!==h.BY_APPLICATION){n||void 0===(n=p[r])&&(n=`Unexpected disconnection reason: ${r}`);const e=new Error(n);e.code=r,this.emit("error",e)}e.end()},CHANNEL_OPEN:(e,t)=>{if("session"===t.type&&this.noMoreSessions||!this.authenticated){const e=i.ADMINISTRATIVELY_PROHIBITED;return q.channelOpenFail(t.sender,e)}let r,n,a=-1,c=!1;const l=()=>{c||(c=!0,void 0===r&&(r=-1===a?i.RESOURCE_SHORTAGE:i.CONNECT_FAILED),-1!==a&&this._chanMgr.remove(a),q.channelOpenFail(t.sender,r,""))},u=()=>(a=this._chanMgr.add(),-1===a&&(r=i.RESOURCE_SHORTAGE,o&&o("Automatic rejection of incoming channel open: no channels available")),-1!==a),d=t.data;switch(t.type){case"session":if(s(this,"session")&&u())return n=()=>{if(c)return;c=!0;const e=new F(this,t,a);return this._chanMgr.update(a,e),q.channelOpenConfirm(t.sender,a,C,I),e},void this.emit("session",n,l);break;case"direct-tcpip":if(s(this,"tcpip")&&u())return n=()=>{if(c)return;c=!0;const e={type:void 0,incoming:{id:a,window:C,packetSize:I,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}},r=new T(this,e,{server:!0});return this._chanMgr.update(a,r),q.channelOpenConfirm(t.sender,a,C,I),r},void this.emit("tcpip",n,l,d);break;case"direct-streamlocal@openssh.com":if(s(this,"openssh.streamlocal")&&u())return n=()=>{if(c)return;c=!0;const e={type:void 0,incoming:{id:a,window:C,packetSize:I,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}},r=new T(this,e,{server:!0});return this._chanMgr.update(a,r),q.channelOpenConfirm(t.sender,a,C,I),r},void this.emit("openssh.streamlocal",n,l,d);break;default:r=i.UNKNOWN_CHANNEL_TYPE,o&&o(`Automatic rejection of unsupported incoming channel open type: ${t.type}`)}void 0===r&&(r=i.ADMINISTRATIVELY_PROHIBITED,o&&o(`Automatic rejection of unexpected incoming channel open for: ${t.type}`)),l()},CHANNEL_OPEN_CONFIRMATION:(e,t)=>{const r=this._chanMgr.get(t.recipient);if("function"!=typeof r)return;const n={type:r.type,incoming:{id:t.recipient,window:C,packetSize:I,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}},o=new T(this,n,{server:!0});this._chanMgr.update(t.recipient,o),r(void 0,o)},CHANNEL_OPEN_FAILURE:(e,t,r,n)=>{const o=this._chanMgr.get(t);"function"==typeof o&&M(this,t,{reason:r,description:n},o)},CHANNEL_DATA:(e,t,r)=>{let n=this._chanMgr.get(t);"object"==typeof n&&null!==n&&(n.constructor!==F||(n=n._channel,n))&&0!==n.incoming.window&&(n.incoming.window-=r.length,!1!==n.push(r)?n.incoming.window<=O&&R(n):n._waitChanDrain=!0)},CHANNEL_EXTENDED_DATA:(e,t,r,n)=>{},CHANNEL_WINDOW_ADJUST:(e,t,r)=>{let n=this._chanMgr.get(t);"object"==typeof n&&null!==n&&(n.constructor!==F||(n=n._channel,n))&&(n.outgoing.window+=r,n._waitWindow&&(n._waitWindow=!1,n._chunk?n._write(n._chunk,null,n._chunkcb):n._chunkcb?n._chunkcb():n._chunkErr?n.stderr._write(n._chunkErr,null,n._chunkcbErr):n._chunkcbErr&&n._chunkcbErr()))},CHANNEL_SUCCESS:(e,t)=>{let r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&(r.constructor!==F||(r=r._channel,r))&&r._callbacks.length&&r._callbacks.shift()(!1)},CHANNEL_FAILURE:(e,t)=>{let r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&(r.constructor!==F||(r=r._channel,r))&&r._callbacks.length&&r._callbacks.shift()(!0)},CHANNEL_REQUEST:(e,t,r,n,i)=>{const a=this._chanMgr.get(t);if("object"!=typeof a||null===a)return;let c,l,u=!1;if(a.constructor===F)if(n&&("shell"!==r&&"exec"!==r&&"subsystem"!==r&&(c=()=>{u||a._ending||a._channel||(u=!0,q.channelSuccess(a._chanInfo.outgoing.id))}),l=()=>{u||a._ending||a._channel||(u=!0,q.channelFailure(a._chanInfo.outgoing.id))}),a._ending)l&&l();else{switch(r){case"env":if(s(a,"env"))return void a.emit("env",c,l,{key:i.name,val:i.value});break;case"pty-req":if(s(a,"pty"))return void a.emit("pty",c,l,i);break;case"window-change":s(a,"window-change")?a.emit("window-change",c,l,i):l&&l();break;case"x11-req":if(s(a,"x11"))return void a.emit("x11",c,l,i);break;case"signal":if(s(a,"signal"))return void a.emit("signal",c,l,{name:i});break;case"auth-agent-req@openssh.com":if(s(a,"auth-agent"))return void a.emit("auth-agent",c,l);break;case"shell":if(s(a,"shell"))return c=()=>{if(u||a._ending||a._channel)return;u=!0,n&&q.channelSuccess(a._chanInfo.outgoing.id);const e=new T(this,a._chanInfo,{server:!0});return e.subtype=a.subtype=r,a._channel=e,e},void a.emit("shell",c,l);break;case"exec":if(s(a,"exec"))return c=()=>{if(u||a._ending||a._channel)return;u=!0,n&&q.channelSuccess(a._chanInfo.outgoing.id);const e=new T(this,a._chanInfo,{server:!0});return e.subtype=a.subtype=r,a._channel=e,e},void a.emit("exec",c,l,{command:i});break;case"subsystem":{let e="sftp"===i;if(c=()=>{if(u||a._ending||a._channel)return;let t;return u=!0,n&&q.channelSuccess(a._chanInfo.outgoing.id),e?t=new w(this,a._chanInfo,{server:!0,debug:o}):(t=new T(this,a._chanInfo,{server:!0}),t.subtype=a.subtype=`${r}:${i}`),a._channel=t,t},"sftp"===i){if(s(a,"sftp"))return void a.emit("sftp",c,l);e=!1}if(s(a,"subsystem"))return void a.emit("subsystem",c,l,{name:i});break}}o&&o(`Automatic rejection of incoming channel request: ${r}`),l&&l()}else n&&q.channelFailure(a.outgoing.id)},CHANNEL_EOF:(e,t)=>{let r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&(r.constructor!==F||(r._ending||(r._ending=!0,r.emit("eof"),r.emit("end")),r=r._channel,r))&&"open"===r.incoming.state&&(r.incoming.state="eof",r.readable&&r.push(null))},CHANNEL_CLOSE:(e,t)=>{let r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&(r.constructor!==F||(r._ending=!0,r.emit("close"),r=r._channel,r))&&L(this,t,r)},SERVICE_REQUEST:(t,r)=>{if(0===f||g||this.authenticated||"ssh-userauth"!==r)return q.disconnect(h.SERVICE_NOT_AVAILABLE),void e.end();g=!0,q.serviceAccept(r)},USERAUTH_REQUEST:(t,r,n,o,i)=>{if(0===f||this.authenticated||l&&(l.username!==r||l.service!==n)||"password"!==o&&"publickey"!==o&&"hostbased"!==o&&"keyboard-interactive"!==o&&"none"!==o||10===m.length)return q.disconnect(h.PROTOCOL_ERROR),void e.end();if("ssh-connection"!==n)return q.disconnect(h.SERVICE_NOT_AVAILABLE),void e.end();let a;switch(o){case"keyboard-interactive":a=new D(q,r,n,o,i,z);break;case"publickey":a=new x(q,r,n,o,i,z);break;case"hostbased":a=new U(q,r,n,o,i,z);break;case"password":if(l&&l instanceof j&&l._changeCb){const e=l._changeCb;return l._changeCb=void 0,void e(i.newPassword)}a=new j(q,r,n,o,i,z);break;case"none":a=new B(q,r,n,o,z)}if(l){if(!l._initialResponse)return m.push(a);l._multistep&&!l._finalResponse&&(l._cleanup&&l._cleanup(),l.emit("abort"))}l=a,s(this,"authentication")?this.emit("authentication",l):l.reject()},USERAUTH_INFO_RESPONSE:(e,t)=>{l&&l instanceof D&&l._onInfoResponse(t)},GLOBAL_REQUEST:(e,t,r,n)=>{const o={type:null,buf:null};function i(e,t){o.type=e,o.buf=t,function(){for(;y.length>0&&y[0].type;){const e=y.shift();"SUCCESS"===e.type&&q.requestSuccess(e.buf),"FAILURE"===e.type&&q.requestFailure()}}()}if(r&&y.push(o),("tcpip-forward"===t||"cancel-tcpip-forward"===t||"no-more-sessions@openssh.com"===t||"streamlocal-forward@openssh.com"===t||"cancel-streamlocal-forward@openssh.com"===t)&&s(this,"request")&&this.authenticated){let e,o;if(r){let r=!1;e=e=>{if(r)return;let o;r=!0,"tcpip-forward"===t&&0===n.bindPort&&"number"==typeof e&&(o=Buffer.allocUnsafe(4),A(o,e,0)),i("SUCCESS",o)},o=()=>{r||(r=!0,i("FAILURE"))}}if("no-more-sessions@openssh.com"===t)return this.noMoreSessions=!0,void(e&&e());this.emit("request",e,o,t,n)}else r&&i("FAILURE")}}});e.pause(),_.then((()=>{q.start(),e.on("data",(t=>{try{q.parse(t,0,t.length)}catch(t){this.emit("error",t);try{P(e)&&e.end()}catch{}}})),e.resume()})).catch((t=>{this.emit("error",t);try{P(e)&&e.end()}catch{}})),e.on("error",(e=>{e.level="socket",this.emit("error",e)})).once("end",(()=>{o&&o("Socket ended"),q.cleanup(),this.emit("end")})).once("close",(()=>{o&&o("Socket closed"),q.cleanup(),this.emit("close");const e=new Error("No response from server");this._chanMgr.cleanup(e)}));const z=(e,t,r,n)=>{l!==e||this.authenticated||(t?(l=void 0,this.authenticated=!0,q.authSuccess(),m=[],this.emit("ready")):(q.authFailure(r,n),m.length&&(l=m.pop(),s(this,"authentication")?this.emit("authentication",l):l.reject())))}}end(){return this._sock&&P(this._sock)&&(this._protocol.disconnect(h.BY_APPLICATION),this._sock.end()),this}x11(e,t,r){return q(this,"x11",{originAddr:e,originPort:t},r),this}forwardOut(e,t,r,n,o){return q(this,"forwarded-tcpip",{boundAddr:e,boundPort:t,remoteAddr:r,remotePort:n},o),this}openssh_forwardOutStreamLocal(e,t){return q(this,"forwarded-streamlocal@openssh.com",{socketPath:e},t),this}rekey(e){let t;try{this._protocol.rekey()}catch(e){t=e}"function"==typeof e&&(t?process.nextTick(e,t):this.once("rekey",e))}}function q(e,t,r,n){const o=C,s=I;"function"==typeof r&&(n=r,r={});const i=(e,t)=>{n(e,t)};i.type=t;const a=e._chanMgr.add(i);if(-1!==a)switch(t){case"forwarded-tcpip":e._protocol.forwardedTcpip(a,o,s,r);break;case"x11":e._protocol.x11(a,o,s,r);break;case"forwarded-streamlocal@openssh.com":e._protocol.openssh_forwardedStreamLocal(a,o,s,r);break;default:throw new Error(`Unsupported channel type: ${t}`)}else n(new Error("No free channels available"))}function z(e,t){return e-t}e.exports=H,e.exports.IncomingClient=W},17236:(e,t,r)=>{"use strict";const{SFTP:n}=r(64061),o=2**32-1;function s(e,t,r,n){if(e._chanMgr.remove(t),"function"!=typeof n)return;let o;r instanceof Error?o=r:"object"==typeof r&&null!==r?(o=new Error(`(SSH) Channel open failure: ${r.description}`),o.reason=r.reason):(o=new Error("(SSH) Channel open failure: server closed channel unexpectedly"),o.reason=""),n(o)}function i(e,t,r,o,i){if("function"==typeof r)return void s(e,t,o,r);if("object"!=typeof r||null===r)return;if(r.incoming&&"closed"===r.incoming.state)return;if(e._chanMgr.remove(t),r.server&&"Session"===r.constructor.name)return;r.incoming.state="closed",r.readable&&r.push(null),r.server?r.stderr.writable&&r.stderr.end():r.stderr.readable&&r.stderr.push(null),r.constructor===n||"open"!==r.outgoing.state&&"eof"!==r.outgoing.state||i||r.close(),"closing"===r.outgoing.state&&(r.outgoing.state="closed");const a=r._readableState,c=r._writableState;!c||c.ending||c.finished||i||r.end();const l=r._callbacks;r._callbacks=[];for(let e=0;e<l.length;++e)l[e](!0);if(r.server)!r.readable||r.destroyed||a&&a.endEmitted?r.emit("close"):r.once("end",(()=>r.emit("close")));else{let e;switch(r.type){case"direct-streamlocal@openssh.com":case"direct-tcpip":e=()=>r.emit("close");break;default:{const t=r._exit;e=()=>{null===t.code?r.emit("close",t.code,t.signal,t.dump,t.desc):r.emit("close",t.code)}}}!r.readable||r.destroyed||a&&a.endEmitted?e():r.once("end",e);const t=r.stderr._readableState;!r.stderr.readable||r.stderr.destroyed||t&&t.endEmitted?r.stderr.emit("close"):r.stderr.once("end",(()=>r.stderr.emit("close")))}}const a=(()=>{const e=Object.prototype.toString;return t=>"[object RegExp]"===e.call(t)})();e.exports={ChannelManager:class{constructor(e){this._client=e,this._channels={},this._cur=-1,this._count=0}add(e){let t;if(this._cur<o)t=++this._cur;else if(0===this._count)this._cur=0,t=0;else{const e=this._channels;for(let r=0;r<o;++r)if(void 0===e[r]){t=r;break}}return void 0===t?-1:(this._channels[t]=e||!0,++this._count,t)}update(e,t){if("number"!=typeof e||e<0||e>=o||!isFinite(e))throw new Error(`Invalid channel id: ${e}`);t&&this._channels[e]&&(this._channels[e]=t)}get(e){if("number"!=typeof e||e<0||e>=o||!isFinite(e))throw new Error(`Invalid channel id: ${e}`);return this._channels[e]}remove(e){if("number"!=typeof e||e<0||e>=o||!isFinite(e))throw new Error(`Invalid channel id: ${e}`);this._channels[e]&&(delete this._channels[e],this._count&&--this._count)}cleanup(e){const t=this._channels;this._channels={},this._cur=-1,this._count=0;const r=Object.keys(t),n=this._client;for(let o=0;o<r.length;++o){const s=+r[o],a=t[s];i(n,s,a._channel||a,e,!0)}}},generateAlgorithmList:function(e,t,r){if(Array.isArray(e)&&e.length>0){for(let t=0;t<e.length;++t)if(-1===r.indexOf(e[t]))throw new Error(`Unsupported algorithm: ${e[t]}`);return e}if("object"==typeof e&&null!==e){const n=Object.keys(e);let o=t;for(let s=0;s<n.length;++s){const i=n[s];let c=e[i];switch(i){case"append":if(Array.isArray(c)||(c=[c]),Array.isArray(c))for(let e=0;e<c.length;++e){const n=c[e];if("string"==typeof n){if(!n||-1!==o.indexOf(n))continue;if(-1===r.indexOf(n))throw new Error(`Unsupported algorithm: ${n}`);o===t&&(o=o.slice()),o.push(n)}else if(a(n))for(let e=0;e<r.length;++e){const s=r[e];if(n.test(s)){if(-1!==o.indexOf(s))continue;o===t&&(o=o.slice()),o.push(s)}}}break;case"prepend":if(Array.isArray(c)||(c=[c]),Array.isArray(c))for(let e=c.length;e>=0;--e){const n=c[e];if("string"==typeof n){if(!n||-1!==o.indexOf(n))continue;if(-1===r.indexOf(n))throw new Error(`Unsupported algorithm: ${n}`);o===t&&(o=o.slice()),o.unshift(n)}else if(a(n))for(let e=r.length;e>=0;--e){const s=r[e];if(n.test(s)){if(-1!==o.indexOf(s))continue;o===t&&(o=o.slice()),o.unshift(s)}}}break;case"remove":if(Array.isArray(c)||(c=[c]),Array.isArray(c))for(let e=0;e<c.length;++e){const r=c[e];if("string"==typeof r){if(!r)continue;const e=o.indexOf(r);if(-1===e)continue;o===t&&(o=o.slice()),o.splice(e,1)}else if(a(r))for(let e=0;e<o.length;++e)r.test(o[e])&&(o===t&&(o=o.slice()),o.splice(e,1),--e)}}}return o}return t},onChannelOpenFailure:s,onCHANNEL_CLOSE:i,isWritable:e=>e&&e.writable&&e._readableState&&!1===e._readableState.ended}},14378:(e,t,r)=>{var n=r(77424).RBTree;function o(e,t,r){this.discrete=!1===e,this.delta=e||.01,this.K=void 0===t?25:t,this.CX=void 0===r?1.1:r,this.centroids=new n(s),this.nreset=0,this.reset()}function s(e,t){return e.mean>t.mean?1:e.mean<t.mean?-1:0}function i(e,t){return e.mean_cumn-t.mean_cumn}function a(e){this.config=e||{},this.mode=this.config.mode||"auto",o.call(this,"cont"===this.mode&&e.delta),this.digest_ratio=this.config.ratio||.9,this.digest_thresh=this.config.thresh||1e3,this.n_unique=0}o.prototype.reset=function(){this.centroids.clear(),this.n=0,this.nreset+=1,this.last_cumulate=0},o.prototype.size=function(){return this.centroids.size},o.prototype.toArray=function(e){var t=[];return e?(this._cumulate(!0),this.centroids.each((function(e){t.push(e)}))):this.centroids.each((function(e){t.push({mean:e.mean,n:e.n})})),t},o.prototype.summary=function(){return[(this.discrete?"exact ":"approximating ")+this.n+" samples using "+this.size()+" centroids","min = "+this.percentile(0),"Q1  = "+this.percentile(.25),"Q2  = "+this.percentile(.5),"Q3  = "+this.percentile(.75),"max = "+this.percentile(1)].join("\n")},o.prototype.push=function(e,t){t=t||1,e=Array.isArray(e)?e:[e];for(var r=0;r<e.length;r++)this._digest(e[r],t)},o.prototype.push_centroid=function(e){e=Array.isArray(e)?e:[e];for(var t=0;t<e.length;t++)this._digest(e[t].mean,e[t].n)},o.prototype._cumulate=function(e){if(!(this.n===this.last_cumulate||!e&&this.CX&&this.CX>this.n/this.last_cumulate)){var t=0;this.centroids.each((function(e){e.mean_cumn=t+e.n/2,t=e.cumn=t+e.n})),this.n=this.last_cumulate=t}},o.prototype.find_nearest=function(e){if(0===this.size())return null;var t=this.centroids.lowerBound({mean:e}),r=null===t.data()?t.prev():t.data();if(r.mean===e||this.discrete)return r;var n=t.prev();return n&&Math.abs(n.mean-e)<Math.abs(r.mean-e)?n:r},o.prototype._new_centroid=function(e,t,r){var n={mean:e,n:t,cumn:r};return this.centroids.insert(n),this.n+=t,n},o.prototype._addweight=function(e,t,r){t!==e.mean&&(e.mean+=r*(t-e.mean)/(e.n+r)),e.cumn+=r,e.mean_cumn+=r/2,e.n+=r,this.n+=r},o.prototype._digest=function(e,t){var r=this.centroids.min(),n=this.centroids.max(),o=this.find_nearest(e);if(o&&o.mean===e)this._addweight(o,e,t);else if(o===r)this._new_centroid(e,t,0);else if(o===n)this._new_centroid(e,t,this.n);else if(this.discrete)this._new_centroid(e,t,o.cumn);else{var s=o.mean_cumn/this.n;Math.floor(4*this.n*this.delta*s*(1-s))-o.n>=t?this._addweight(o,e,t):this._new_centroid(e,t,o.cumn)}this._cumulate(!1),!this.discrete&&this.K&&this.size()>this.K/this.delta&&this.compress()},o.prototype.bound_mean=function(e){var t=this.centroids.upperBound({mean:e}),r=t.prev();return[r,r.mean===e?r:t.next()]},o.prototype.p_rank=function(e){var t=(Array.isArray(e)?e:[e]).map(this._p_rank,this);return Array.isArray(e)?t:t[0]},o.prototype._p_rank=function(e){if(0!==this.size()){if(e<this.centroids.min().mean)return 0;if(e>this.centroids.max().mean)return 1;this._cumulate(!0);var t=this.bound_mean(e),r=t[0],n=t[1];if(this.discrete)return r.cumn/this.n;var o=r.mean_cumn;return r!==n&&(o+=(e-r.mean)*(n.mean_cumn-r.mean_cumn)/(n.mean-r.mean)),o/this.n}},o.prototype.bound_mean_cumn=function(e){this.centroids._comparator=i;var t=this.centroids.upperBound({mean_cumn:e});this.centroids._comparator=s;var r=t.prev();return[r,r&&r.mean_cumn===e?r:t.next()]},o.prototype.percentile=function(e){var t=(Array.isArray(e)?e:[e]).map(this._percentile,this);return Array.isArray(e)?t:t[0]},o.prototype._percentile=function(e){if(0!==this.size()){this._cumulate(!0);var t=this.n*e,r=this.bound_mean_cumn(t),n=r[0],o=r[1];return o===n||null===n||null===o?(n||o).mean:this.discrete?t<=n.cumn?n.mean:o.mean:n.mean+(t-n.mean_cumn)*(o.mean-n.mean)/(o.mean_cumn-n.mean_cumn)}},o.prototype.compress=function(){if(!this.compressing){var e,t,r=this.toArray();for(this.reset(),this.compressing=!0;r.length>0;)this.push_centroid((e=r,void 0,t=Math.floor(Math.random()*e.length),e.splice(t,1)[0]));this._cumulate(!0),this.compressing=!1}},a.prototype=Object.create(o.prototype),a.prototype.constructor=a,a.prototype.push=function(e){o.prototype.push.call(this,e),this.check_continuous()},a.prototype._new_centroid=function(e,t,r){this.n_unique+=1,o.prototype._new_centroid.call(this,e,t,r)},a.prototype._addweight=function(e,t,r){1===e.n&&(this.n_unique-=1),o.prototype._addweight.call(this,e,t,r)},a.prototype.check_continuous=function(){return!("auto"!==this.mode||this.size()<this.digest_thresh)&&this.n_unique/this.size()>this.digest_ratio&&(this.mode="cont",this.discrete=!1,this.delta=this.config.delta||.01,this.compress(),!0)},e.exports={TDigest:o,Digest:a}},36276:(e,t,r)=>{const n=r(57147),o=r(22037),s=r(71017),i=r(6113),a={fs:n.constants,os:o.constants},c=r(50984),l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",u=/XXXXXX/,d=(a.O_CREAT||a.fs.O_CREAT)|(a.O_EXCL||a.fs.O_EXCL)|(a.O_RDWR||a.fs.O_RDWR),h="win32"===o.platform(),p=a.EBADF||a.os.errno.EBADF,f=a.ENOENT||a.os.errno.ENOENT,g=[],m=n.rmdirSync.bind(n),y=c.sync;let v=!1;function _(e,t){const r=O(e,t),o=r[0],s=r[1];try{N(o)}catch(e){return s(e)}let i=o.tries;!function e(){try{const t=k(o);n.stat(t,(function(r){if(!r)return i-- >0?e():s(new Error("Could not get a unique tmp filename, max tries reached "+t));s(null,t)}))}catch(e){s(e)}}()}function b(e){const t=O(e)[0];N(t);let r=t.tries;do{const e=k(t);try{n.statSync(e)}catch(t){return e}}while(r-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function S(e,t){const r=function(e){if(e&&!B(e))return t(e);t()};0<=e[0]?n.close(e[0],(function(){n.unlink(e[1],r)})):n.unlink(e[1],r)}function E(e){let t=null;try{0<=e[0]&&n.closeSync(e[0])}catch(e){if(!D(e,-p,"EBADF")&&!B(e))throw e}finally{try{n.unlinkSync(e[1])}catch(e){B(e)||(t=e)}}if(null!==t)throw t}function w(e,t,r,n){const o=T(E,[t,e],n),s=T(S,[t,e],n,o);return r.keep||g.unshift(o),n?o:s}function A(e,t,r){const o=t.unsafeCleanup?c:n.rmdir.bind(n),s=T(t.unsafeCleanup?y:m,e,r),i=T(o,e,r,s);return t.keep||g.unshift(s),r?s:i}function T(e,t,r,n){let o=!1;return function s(i){if(!o){const a=n||s,c=g.indexOf(a);return c>=0&&g.splice(c,1),o=!0,r||e===m||e===y?e(t):e(t,i||function(){})}}}function C(e){let t=[],r=null;try{r=i.randomBytes(e)}catch(t){r=i.pseudoRandomBytes(e)}for(var n=0;n<e;n++)t.push(l[r[n]%l.length]);return t.join("")}function I(e){return null===e||R(e)||!e.trim()}function R(e){return void 0===e}function O(e,t){if("function"==typeof e)return[{},e];if(R(e))return[{},t];const r={};for(const t of Object.getOwnPropertyNames(e))r[t]=e[t];return[r,t]}function k(e){const t=e.tmpdir;if(!R(e.name))return s.join(t,e.dir,e.name);if(!R(e.template))return s.join(t,e.dir,e.template).replace(u,C(6));const r=[e.prefix?e.prefix:"tmp","-",process.pid,"-",C(12),e.postfix?"-"+e.postfix:""].join("");return s.join(t,e.dir,r)}function N(e){e.tmpdir=x(e);const t=e.tmpdir;if(R(e.name)||L(e.name,"name",t),R(e.dir)||L(e.dir,"dir",t),!R(e.template)&&(L(e.template,"template",t),!e.template.match(u)))throw new Error(`Invalid template, found "${e.template}".`);if(!R(e.tries)&&isNaN(e.tries)||e.tries<0)throw new Error(`Invalid tries, found "${e.tries}".`);e.tries=R(e.name)?e.tries||3:1,e.keep=!!e.keep,e.detachDescriptor=!!e.detachDescriptor,e.discardDescriptor=!!e.discardDescriptor,e.unsafeCleanup=!!e.unsafeCleanup,e.dir=R(e.dir)?"":s.relative(t,P(e.dir,t)),e.template=R(e.template)?void 0:s.relative(t,P(e.template,t)),e.template=I(e.template)?void 0:s.relative(e.dir,e.template),e.name=R(e.name)?void 0:M(e.name),e.prefix=R(e.prefix)?"":e.prefix,e.postfix=R(e.postfix)?"":e.postfix}function P(e,t){const r=M(e);return r.startsWith(t)?s.resolve(r):s.resolve(s.join(t,r))}function M(e){return I(e)?e:e.replace(/["']/g,"")}function L(e,t,r){if("name"===t){if(s.isAbsolute(e))throw new Error(`${t} option must not contain an absolute path, found "${e}".`);let r=s.basename(e);if(".."===r||"."===r||r!==e)throw new Error(`${t} option must not contain a path, found "${e}".`)}else{if(s.isAbsolute(e)&&!e.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${e}".`);let n=P(e,r);if(!n.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${n}".`)}}function B(e){return D(e,-f,"ENOENT")}function D(e,t,r){return h?e.code===r:e.code===r&&e.errno===t}function x(e){return s.resolve(M(e&&e.tmpdir||o.tmpdir()))}process.addListener("exit",(function(){if(v)for(;g.length;)try{g[0]()}catch(e){}})),Object.defineProperty(e.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return x()}}),e.exports.dir=function(e,t){const r=O(e,t),o=r[0],s=r[1];_(o,(function(e,t){if(e)return s(e);n.mkdir(t,o.mode||448,(function(e){if(e)return s(e);s(null,t,A(t,o,!1))}))}))},e.exports.dirSync=function(e){const t=O(e)[0],r=b(t);return n.mkdirSync(r,t.mode||448),{name:r,removeCallback:A(r,t,!0)}},e.exports.file=function(e,t){const r=O(e,t),o=r[0],s=r[1];_(o,(function(e,t){if(e)return s(e);n.open(t,d,o.mode||384,(function(e,r){if(e)return s(e);if(o.discardDescriptor)return n.close(r,(function(e){return s(e,t,void 0,w(t,-1,o,!1))}));{const e=o.discardDescriptor||o.detachDescriptor;s(null,t,r,w(t,e?-1:r,o,!1))}}))}))},e.exports.fileSync=function(e){const t=O(e)[0],r=t.discardDescriptor||t.detachDescriptor,o=b(t);var s=n.openSync(o,d,t.mode||384);return t.discardDescriptor&&(n.closeSync(s),s=void 0),{name:o,fd:s,removeCallback:w(o,r?-1:s,t,!0)}},e.exports.tmpName=_,e.exports.tmpNameSync=b,e.exports.setGracefulCleanup=function(){v=!0}},85659:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ExtendableError:()=>n,default:()=>o});class n extends Error{constructor(...e){super(...e);var t=e.length>0&&"string"==typeof e[0]?e[0]:"";void 0!==this.name&&"Error"!==this.name||Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:this.constructor.name,writable:!0}),Object.defineProperty(this,"message",{configurable:!0,enumerable:!1,value:t,writable:!0}),Object.defineProperty(this,"stack",{configurable:!0,enumerable:!1,value:"",writable:!0}),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):""===this.stack&&(this.stack=new Error(t).stack)}}const o=n},79693:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(r(89496)),c=r(17593),l=i(r(57013)),u=i(r(21582)),d=r(72571),h=r(57460),p=r(37892);class f extends h.Disposable{constructor(e,t,r,n){super(),this.context=e,this.logService=t,this.telemetryService=r,this.notificationService=n,this._sessionChangeEmitter=new a.EventEmitter,this.flow={flow:"auth"},this.reconcile(),this._register(a.workspace.onDidChangeConfiguration((e=>{e.affectsConfiguration("gitpod.host")&&(this.reconcile(),this.checkForUpdates())}))),this._sessionsPromise=this.readSessions(),this._register(a.authentication.registerAuthenticationProvider("gitpod","Gitpod",this,{supportsMultipleAccounts:!1})),this._register(this.context.secrets.onDidChange((()=>this.checkForUpdates())))}reconcile(){const e=p.Configuration.getGitpodHost(),t=new URL(e);this._serviceUrl=t.toString().replace(/\/$/,""),Object.assign(this.flow,{gitpodHost:this._serviceUrl}),this._gitpodServer?.dispose(),this._gitpodServer=new u.default(this._serviceUrl,this.logService,this.notificationService),this._keychain=new l.default(this.context,`gitpod.auth.${t.hostname}`,this.logService),this.logService.info(`Started authentication provider for ${e}`)}get onDidChangeSessions(){return this._sessionChangeEmitter.event}async getSessions(e){const t=e?.sort()||[],r=await this.fetchValidScopes(),n=t.filter((e=>!r||r.includes(e)));this.logService.info(`Getting sessions for ${t.length?t.join(","):"all scopes"}${t.length!==n.length?`, but valid scopes are ${n.join(",")}`:""}...`),t.length!==n.length&&this.logService.warn(`But valid scopes are ${n.join(",")}, returning session with only valid scopes...`);const o=await this._sessionsPromise,s=n.length?o.filter((e=>(0,d.arrayEquals)([...e.scopes].sort(),n))):o;return this.logService.info(`Got ${s.length} sessions for ${n?.join(",")??"all scopes"}...`),s}async fetchValidScopes(){if(this._validScopes)return this._validScopes;const e=`${this._serviceUrl}/api/oauth/inspect?client=${a.env.uriScheme}-gitpod`;try{const t=new AbortController;setTimeout((()=>t.abort()),1500);const r=await fetch(e,{signal:t.signal});if(r.ok)return this._validScopes=await r.json(),this._validScopes}catch(t){this.logService.error(`Error fetching endpoint ${e}`,t)}}async checkForUpdates(){const e=await this._sessionsPromise;this._sessionsPromise=this.readSessions();const t=await this._sessionsPromise,r=[],n=[];t.forEach((t=>{e.some((e=>e.id===t.id))||(this.logService.info("Adding session found in keychain"),r.push(t))})),e.forEach((e=>{t.some((t=>t.id===e.id))||(this.logService.info("Removing session no longer found in keychain"),n.push(e))})),(r.length||n.length)&&this._sessionChangeEmitter.fire({added:r,removed:n,changed:[]})}async readSessions(){let e;try{this.logService.info("Reading sessions from keychain...");const t=await this._keychain.getToken();if(!t)return[];this.logService.info("Got stored sessions!");try{e=JSON.parse(t)}catch(e){throw await this._keychain.deleteToken(),e}}catch(e){return this.logService.error(`Error reading token: ${e}`),[]}const t=e.map((async e=>{const t=e.scopes.sort(),r=t.join(" ");let n;try{n=await this._gitpodServer.getUserInfo(e.accessToken),this.logService.info(`Verified session with the following scopes: ${r}`)}catch(e){if("Unexpected server response: 401"===e.message)return;this.logService.error(`Error while verifying session with the following scopes: ${r}`,e)}return this.logService.trace(`Read the following session from the keychain with the following scopes: ${r}`),{id:e.id,account:{label:e.account?e.account.label??e.account.displayName??"<unknown>":n?.accountName??"<unknown>",id:e.account?.id??n?.id??"<unknown>"},scopes:t,accessToken:e.accessToken}})),r=(await Promise.allSettled(t)).filter((e=>"fulfilled"===e.status)).map((e=>e.value)).filter((e=>Boolean(e)));return this.logService.info(`Got ${r.length} verified sessions.`),r.length!==e.length&&await this.storeSessions(r),r}async storeSessions(e){this.logService.info(`Storing ${e.length} sessions...`),this._sessionsPromise=Promise.resolve(e),await this._keychain.setToken(JSON.stringify(e)),this.logService.info(`Stored ${e.length} sessions!`)}async createSession(e){const t={...this.flow};try{const r=e.sort(),n=await this.fetchValidScopes(),o=r.filter((e=>!n||n.includes(e)));r.length!==o.length&&this.logService.warn(`Creating session with only valid scopes ${o.join(",")}, original scopes were ${r.join(",")}`),t.scopes=JSON.stringify(o),this.telemetryService.sendUserFlowStatus("login",t);const s=o.join(" "),i=await this._gitpodServer.login(s,t),a=await this.tokenToSession(i,o);t.userId=a.account.id;const c=await this._sessionsPromise,l=c.findIndex((e=>e.id===a.id||(0,d.arrayEquals)([...e.scopes].sort(),o)));return l>-1?c.splice(l,1,a):c.push(a),await this.storeSessions(c),this._sessionChangeEmitter.fire({added:[a],removed:[],changed:[]}),this.logService.info("Login success!"),this.telemetryService.sendUserFlowStatus("login_successful",t),a}catch(e){if("Cancelled"===e||"Cancelled"===e.message)throw this.telemetryService.sendUserFlowStatus("login_cancelled",t),e;throw this.notificationService.showErrorMessage(`Sign in failed: ${e}`,{flow:t,id:"login_failed"}),this.logService.error(e),e}}async tokenToSession(e,t){const r=await this._gitpodServer.getUserInfo(e);return{id:(0,c.v4)(),accessToken:e,account:{label:r.accountName,id:r.id},scopes:t}}async removeSession(e){const t={...this.flow};try{this.telemetryService.sendUserFlowStatus("logout",t),this.logService.info(`Logging out of ${e}`);const r=await this._sessionsPromise,n=r.findIndex((t=>t.id===e));if(n>-1){const e=r[n];t.userId=e.account.id,r.splice(n,1),await this.storeSessions(r),this._sessionChangeEmitter.fire({added:[],removed:[e],changed:[]})}else this.logService.error("Session not found");this.telemetryService.sendUserFlowStatus("logout_successful",t)}catch(e){throw this.notificationService.showErrorMessage(`Sign out failed: ${e}`,{flow:t,id:"logout_failed"}),this.logService.error(e),e}}handleUri(e){this._gitpodServer.handleUri(e)}dispose(){super.dispose(),this._gitpodServer.dispose()}}t.default=f},21582:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(r(89496)),c=r(72571),l=r(19430),u=i(r(78448)),d=r(17593),h=r(57460);class p extends h.Disposable{constructor(e,t,r){super(),this.logService=t,this.notificationService=r,this._pendingStates=new Map,this._pendingVerifiers=new Map,this._codeExchangePromises=new Map,this._uriEmitter=this._register(new a.EventEmitter),this.exchangeCodeForToken=(e,t)=>async(r,n,o)=>{const s=new URLSearchParams(r.query),i=s.get("code"),c=s.get("state");if(!i)return void this.logService.error("No code in response.");if(!c)return void this.logService.error("No state in response.");if(!(this._pendingStates.get(e)||[]).includes(c))return void this.logService.info("Nonce not found in accepted nonces. Skipping this execution...");const l=this._pendingVerifiers.get(c);if(!l)return void this.logService.error("Code verifier not found in memory.");this.logService.info("Exchanging code for token...");const u=await a.env.asExternalUri(a.Uri.parse(`${a.env.uriScheme}://gitpod.gitpod-desktop${p.AUTH_COMPLETE_PATH}`));try{const e=await fetch(`${this._serviceUrl}/api/oauth/token`,{method:"POST",body:new URLSearchParams({code:i,grant_type:"authorization_code",client_id:`${a.env.uriScheme}-gitpod`,redirect_uri:u.toString(!0),code_verifier:l})});if(!e.ok)return this.notificationService.showErrorMessage(`Couldn't connect (token exchange): ${e.statusText}, ${await e.text()}`,{flow:t,id:"failed_to_exchange"}),void o(e.statusText);const r=(await e.json()).access_token;n(JSON.parse(Buffer.from(r.split(".")[1],"base64").toString()).jti)}catch(e){this.notificationService.showErrorMessage(`Couldn't connect (token exchange): ${e}`,{flow:t,id:"failed_to_exchange"}),o(e)}},this._serviceUrl=e.replace(/\/$/,"")}async login(e,t){this.logService.info(`Logging in for the following scopes: ${e}`);const r=await a.env.asExternalUri(a.Uri.parse(`${a.env.uriScheme}://gitpod.gitpod-desktop/complete-gitpod-auth`)),{code_verifier:n,code_challenge:o}=(0,u.default)(128),s=(0,d.v4)(),i=new URLSearchParams([["response_type","code"],["client_id",`${a.env.uriScheme}-gitpod`],["redirect_uri",r.toString(!0)],["scope",e],["state",s],["code_challenge",o],["code_challenge_method","S256"]]),l=`${this._serviceUrl}/api/oauth/authorize?${i.toString()}`,h=this._pendingStates.get(e)||[];return this._pendingStates.set(e,[...h,s]),this._pendingVerifiers.set(s,n),a.window.withProgress({location:a.ProgressLocation.Window,title:`Signing in to ${this._serviceUrl}...`},(async()=>{await a.env.openExternal(l);let r=this._codeExchangePromises.get(e);return r||(r=(0,c.promiseFromEvent)(this._uriEmitter.event,this.exchangeCodeForToken(e,t)),this._codeExchangePromises.set(e,r)),Promise.race([r.promise,new Promise(((e,t)=>setTimeout((()=>t("Cancelled")),6e4)))]).finally((()=>{const t=this._pendingStates.get(e);t&&t.forEach((e=>this._pendingVerifiers.delete(e))),this._pendingStates.delete(e),r?.cancel.fire(),this._codeExchangePromises.delete(e)}))}))}getUserInfo(e){return async function(e,t,r){const n=await(0,l.withServerApi)(e,t,(e=>e.server.getLoggedInUser()),r);return{id:n.id,accountName:n.name??n.fullName??"<unknown>"}}(e,this._serviceUrl,this.logService)}handleUri(e){this._uriEmitter.fire(e)}dispose(){super.dispose();for(const[,{cancel:e}]of this._codeExchangePromises)e.fire()}}t.default=p,p.AUTH_COMPLETE_PATH="/complete-gitpod-auth"},44802:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandManager=void 0;const i=s(r(89496));t.CommandManager=class{constructor(){this.commands=new Map}register(e){return this.commands.has(e.id)||this.commands.set(e.id,i.commands.registerCommand(e.id,e.execute,e)),e}dispose(){for(const e of this.commands.values())e.dispose();this.commands.clear()}}},53424:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignInCommand=void 0,t.SignInCommand=class{constructor(e){this.sessionService=e,this.id="gitpod.signIn"}async execute(){await this.sessionService.signIn()}}},92436:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportLogsCommand=void 0;const i=s(r(71017)),a=s(r(2958)),c=s(r(57147)),l=s(r(22037)),u=s(r(89496));async function d(e,t,r){if(r.isCancellationRequested)return;const n=await u.workspace.fs.readDirectory(e);for(const[o,s]of n){if(r.isCancellationRequested)return;if(s===u.FileType.File){const r=i.posix.join(e.path,o),n=await u.workspace.fs.readFile(e.with({path:r}));n.byteLength>0&&t.push({path:r,contents:Buffer.from(n)})}else if(s===u.FileType.Directory){const n=i.posix.join(e.path,o);await d(e.with({path:n}),t,r)}}}t.ExportLogsCommand=class{constructor(e,t,r,n,o){this.extLocalLogsUri=e,this.notificationService=t,this.telemetryService=r,this.logService=n,this.hostService=o,this.id="gitpod.exportLogs"}async execute(){const e={gitpodHost:this.hostService.gitpodHost,flow:"export_logs"};this.telemetryService.sendUserFlowStatus("exporting",e);try{await this.exportLogs(),this.telemetryService.sendUserFlowStatus("exported",e)}catch(t){const r=`Error exporting logs: ${t}`;this.notificationService.showErrorMessage(r,{id:"failed",flow:e}),this.logService.error(r)}}async exportLogs(){const e=await u.window.showSaveDialog({title:"Choose save location ...",defaultUri:u.Uri.file(i.posix.join(l.homedir(),`vscode-desktop-logs-${(new Date).toISOString().replace(/-|:|\.\d+Z$/g,"")}.zip`))});if(!e)return;let t;try{t=await u.commands.executeCommand("__gitpod.getGitpodRemoteLogsUri")}catch{}const r=t?.with({path:i.posix.dirname(i.posix.dirname(t.path))}),n=this.extLocalLogsUri.with({path:i.posix.dirname(i.posix.dirname(this.extLocalLogsUri.path))});return u.window.withProgress({location:u.ProgressLocation.Notification,title:"Exporting logs to zip file ...",cancellable:!0},(async(t,o)=>{const s=[];if(r&&(await d(r,s,o),s.forEach((e=>e.path=i.posix.join("./remote",i.posix.relative(r.path,e.path)))),o.isCancellationRequested))return;const l=[];var u,h;return await d(n,l,o),l.forEach((e=>e.path=i.posix.join("./local",i.posix.relative(n.path,e.path)))),o.isCancellationRequested?void 0:(u=e.fsPath,h=s.concat(l),new Promise(((e,t)=>{const r=new a.ZipFile;h.forEach((e=>{e.contents&&r.addBuffer("string"==typeof e.contents?Buffer.from(e.contents,"utf8"):e.contents,e.path)})),r.end();const n=c.createWriteStream(u);r.outputStream.pipe(n),r.outputStream.once("error",t),n.once("error",t),n.once("finish",(()=>e(u)))})))}))}}},7888:(e,t)=>{"use strict";function r(e){return new Promise((t=>setTimeout(t,e)))}Object.defineProperty(t,"__esModule",{value:!0}),t.retryWithStop=t.retry=t.timeout=void 0,t.timeout=r,t.retry=async function(e,t,n){let o;for(let s=0;s<n;s++)try{return await e()}catch(e){o=e,await r(t)}throw o},t.retryWithStop=async function(e,t,n){let o,s=!1;const i=()=>{s=!0};for(let a=0;a<n;a++)try{return await e(i)}catch(e){if(o=e,s)break;await r(t)}throw o}},57460:(e,t)=>{"use strict";function r(e){for(;e.length;){const t=e.pop();t&&t.dispose()}}Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=t.disposeAll=void 0,t.disposeAll=r,t.Disposable=class{constructor(){this._isDisposed=!1,this._disposables=[]}dispose(){this._isDisposed||(this._isDisposed=!0,r(this._disposables))}_register(e){return this._isDisposed?e.dispose():this._disposables.push(e),e}get isDisposed(){return this._isDisposed}}},85244:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.untildify=t.isFile=t.exists=void 0;const i=s(r(57147)),a=s(r(22037)).homedir();t.exists=async function(e){try{return await i.promises.access(e),!0}catch{return!1}},t.isFile=async function(e){try{return(await i.promises.stat(e)).isFile()}catch{return!1}},t.untildify=function(e){return e.replace(/^~(?=$|\/|\\)/,a)}},57013:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,r){this.context=e,this.serviceId=t,this.logger=r}async setToken(e){try{return await this.context.secrets.store(this.serviceId,e)}catch(e){this.logger.error(`Setting token failed: ${e}`)}}async getToken(){try{const e=await this.context.secrets.get(this.serviceId);return e&&"[]"!==e&&this.logger.trace("Token acquired from secret storage."),e}catch(e){return this.logger.error(`Getting token failed: ${e}`),Promise.resolve(void 0)}}async deleteToken(){try{return await this.context.secrets.delete(this.serviceId)}catch(e){return this.logger.error(`Deleting token failed: ${e}`),Promise.resolve(void 0)}}}},97400:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLinux=t.isMacintosh=t.isWindows=void 0,t.isWindows="win32"===process.platform,t.isMacintosh="darwin"===process.platform,t.isLinux="linux"===process.platform},26809:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetryReporter=t.BaseTelemetryAppender=void 0;const i=s(r(89496)),a=r(57460);function c(){return void 0!==i.env.isTelemetryEnabled?i.env.isTelemetryEnabled?"on":"off":i.workspace.getConfiguration("telemetry").get("enableTelemetry")?"on":"off"}class l{constructor(e){this._isInstantiated=!1,this._eventQueue=[],this._exceptionQueue=[],this.isInstantiating=!1,this._clientFactory=e,"off"!==c()&&this.instantiateAppender()}logEvent(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):this._isInstantiated||"on"!==c()||this._eventQueue.push({eventName:e,data:t})}logException(e,t){this._telemetryClient?this._telemetryClient.logException(e,t):this._isInstantiated||"off"===c()||this._exceptionQueue.push({exception:e,data:t})}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach((({eventName:e,data:t})=>this.logEvent(e,t))),this._eventQueue=[],this._exceptionQueue.forEach((({exception:e,data:t})=>this.logException(e,t))),this._exceptionQueue=[]}instantiateAppender(){this.isInstantiating||this._isInstantiated||(this.isInstantiating=!0,this._clientFactory().then((e=>{this._telemetryClient=e,this._isInstantiated=!0,this._flushQueues()})).catch((e=>{console.error(e)})).finally((()=>{this.isInstantiating=!1})))}}t.BaseTelemetryAppender=l;class u extends a.Disposable{constructor(e,t,r,n){super(),this.extensionId=e,this.extensionVersion=t,this.osShim=r,this.clientFactory=n,this.userOptIn=!1,this.errorOptIn=!1,this.appenders=new Map,this.updateUserOptStatus(),void 0!==i.env.onDidChangeTelemetryEnabled?(this._register(i.env.onDidChangeTelemetryEnabled((()=>this.updateUserOptStatus()))),this._register(i.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))):this._register(i.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))}updateUserOptStatus(){const e=c();this.userOptIn="on"===e,this.errorOptIn="error"===e||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.appenders.forEach((e=>e.instantiateAppender()))}get extension(){return void 0===this._extension&&(this._extension=i.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(null===e||"object"!=typeof e)return e;if("function"!=typeof t)return e;const r={};for(const n in e)r[n]=t(n,e[n]);return r}getCommonProperties(){const e=Object.create(null);if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,i&&i.env)switch(e["common.vscodemachineid"]=i.env.machineId,e["common.vscodesessionid"]=i.env.sessionId,e["common.vscodeversion"]=i.version,e["common.product"]=i.env.appHost,i.env.uiKind){case i.UIKind.Web:e["common.uikind"]="web";break;case i.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}return e}anonymizeFilePaths(e,t){let r;if(null==e)return"";const n=[];""!==i.env.appRoot&&n.push(new RegExp(i.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let o=e?.toString()??"";if(t){const t=[];for(const o of n)for(;(r=o.exec(e))&&r;)t.push([r.index,o.lastIndex]);const s=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,i=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g;let a=0;for(o="";(r=i.exec(e))&&r;)r[0]&&!s.test(r[0])&&t.every((([e,t])=>r.index<e||r.index>=t))&&(o+=e.substring(a,r.index)+"<REDACTED: user-file-path>",a=i.lastIndex);a<e.length&&(o+=e.substr(a))}for(const e of n)o=o.replace(e,"");return o}removePropertiesWithPossibleUserInfo(e){if("object"!=typeof e)return;const t=Object.create(null);for(const r of Object.keys(e)){const n=e[r];if(!n)continue;const o=/@[a-zA-Z0-9-.]+/,s=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/.test(n.toLowerCase())?t[r]="<REDACTED: secret>":o.test(n)?t[r]="<REDACTED: email>":s.test(n)?t[r]="<REDACTED: token>":t[r]=n}return t}get telemetryLevel(){switch(c()){case"on":return"all";case"error":return"error";case"off":return"off"}}sendTelemetryEvent(e,t,r){if(this.userOptIn&&""!==t){r={...r,...this.getCommonProperties()};const n=this.cloneAndChange(r,((e,t)=>this.anonymizeFilePaths(t,!1)));this.getAppender(e).logEvent(`${t}`,{properties:this.removePropertiesWithPossibleUserInfo(n)})}}sendRawTelemetryEvent(e,t,r){this.userOptIn&&""!==t&&(r={...r,...this.getCommonProperties()},this.getAppender(e).logEvent(`${t}`,{properties:r}))}sendTelemetryErrorEvent(e,t,r){if(this.errorOptIn&&""!==t){r={...r,...this.getCommonProperties()};const n=this.cloneAndChange(r,((e,t)=>this.anonymizeFilePaths(t,!1)));this.getAppender(e).logEvent(`${t}`,{properties:this.removePropertiesWithPossibleUserInfo(n)})}}sendTelemetryException(e,t,r){if(this.errorOptIn&&t){r={...r,...this.getCommonProperties()};const n=this.cloneAndChange(r,((e,t)=>this.anonymizeFilePaths(t,!1)));t.stack&&(t.stack=this.anonymizeFilePaths(t.stack,!1)),this.getAppender(e).logException(t,{properties:this.removePropertiesWithPossibleUserInfo(n)})}}getAppender(e){const t=new URL(e).toString().replace(/\/$/,"").toLowerCase();let r=this.appenders.get(t);return r||(r=new l((()=>this.clientFactory(t))),this.appenders.set(t,r)),r}async dispose(){super.dispose(),await Promise.allSettled([...this.appenders.values()].map((e=>e.flush())))}}t.BaseTelemetryReporter=u},72571:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getServiceURL=t.arrayEquals=t.eventToPromise=t.promiseFromEvent=t.onceEvent=t.filterEvent=void 0;const n=r(89496);function o(e){return(t,r=null,n)=>{let o,s=!1;return o=e((e=>{if(!s)return o?o.dispose():s=!0,t.call(r,e)}),null,n),s&&o.dispose(),o}}t.filterEvent=function(e,t){return(r,n=null,o)=>e((e=>t(e)&&r.call(n,e)),null,o)},t.onceEvent=o;const s=(e,t)=>t(e);t.promiseFromEvent=function(e,t=s){let r,o=new n.EventEmitter;return{promise:new Promise(((n,s)=>{o.event((e=>s("Cancelled"))),r=e((e=>{try{Promise.resolve(t(e,n,s)).catch(s)}catch(e){s(e)}}))})).then((e=>(r.dispose(),e)),(e=>{throw r.dispose(),e})),cancel:o}},t.eventToPromise=function(e){return new Promise((t=>o(e)(t)))},t.arrayEquals=function(e,t,r=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(let n=0,o=e.length;n<o;n++)if(!r(e[n],t[n]))return!1;return!0},t.getServiceURL=function(e){return new URL(e).toString().replace(/\/$/,"")}},37892:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0;const i=s(r(89496));t.Configuration={getGitpodHost:function(){return i.workspace.getConfiguration("gitpod").get("host","https://gitpod.io/")},getUseLocalApp:function(e){return!e&&i.workspace.getConfiguration("gitpod").get("remote.useLocalApp",!1)},getLocalSshExtensionIpcPort:function(){let e=43025;return i.env.appName.includes("Insiders")&&(e=43026),i.workspace.getConfiguration("gitpod").get("lsshExtensionIpcPort",e)||e}}},24311:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isUserOverrideSetting=t.ExperimentalSettings=void 0;const i=s(r(89496)),a=s(r(45932)),c=s(r(37603)),l=s(r(81249)),u=["gitpod.remote.useLocalApp"];t.ExperimentalSettings=class{constructor(e,t,r,n,o){this.sessionService=r,this.context=n,this.logger=o,this.configcatClient=a.createClientWithLazyLoad(e,{baseUrl:new URL("/configcat",this.context.extensionMode===i.ExtensionMode.Production?"https://gitpod.io":"https://gitpod-staging.com").href,logger:{debug(){},log(){},info(){},warn(e){o.warn(`ConfigCat: ${e}`)},error(e){o.error(`ConfigCat: ${e}`)}},requestTimeoutMs:1500,cacheTimeToLiveSeconds:60}),this.extensionVersion=new l.SemVer(t)}async getRaw(e,t){const r=this.sessionService.isSignedIn()?new c.User(this.sessionService.getUserId(),void 0,void 0,t):void 0;return await this.configcatClient.getValueAsync(e,void 0,r)}async get(e,t,r){const n=i.workspace.getConfiguration("gitpod").inspect(e.substring("gitpod.".length));if(!n||!u.includes(e))return this.logger.error(`Cannot get invalid experimental setting '${e}'`),n?.globalValue??n?.defaultValue;if(this.isPreRelease())return n.globalValue??n.defaultValue;if(void 0!==n.globalValue)return n.globalValue;const o=this.sessionService.isSignedIn()?new c.User(this.sessionService.getUserId(),void 0,void 0,t):void 0;return r=r??e.replace(/\./g,"_"),await this.configcatClient.getValueAsync(r,void 0,o)??n.defaultValue}async inspect(e,t,r){const n=i.workspace.getConfiguration("gitpod").inspect(e.substring("gitpod.".length));if(!n||!u.includes(e))return this.logger.error(`Cannot inspect invalid experimental setting '${e}'`),n;const o=this.sessionService.isSignedIn()?new c.User(this.sessionService.getUserId(),void 0,void 0,t):void 0;r=r??e.replace(/\./g,"_");const s=await this.configcatClient.getValueAsync(r,void 0,o);return{key:e,defaultValue:n.defaultValue,globalValue:n.globalValue,experimentValue:s}}forceRefreshAsync(){return this.configcatClient.forceRefreshAsync()}isPreRelease(){return this.extensionVersion.minor%2==1}dispose(){this.configcatClient.dispose()}async getUseLocalSSHServer(e){return await this.getRaw("gitpod_desktop_use_local_ssh_server",{gitpodHost:e})??!1}async getUsePublicAPI(e){return await this.getRaw("gitpod_experimental_publicApi",{gitpodHost:e})??!1}},t.isUserOverrideSetting=function(e){return void 0!==i.workspace.getConfiguration("gitpod").inspect(e.substring("gitpod.".length))?.globalValue}},50112:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const a=s(r(22037)),c=s(r(89496)),l=s(r(65352)),u=i(r(79693)),d=r(24311),h=i(r(21582)),p=r(51203),f=r(70264),g=r(31337),m=r(61315),y=r(75797),v=r(85747),_=r(95591),b=r(2841),S=r(44802),E=r(53424),w=r(92436),A=r(37892),T=r(11779);global.fetch||(global.fetch=l.default,global.Headers=l.Headers,global.Request=l.Request,global.Response=l.Response,global.AbortError=l.AbortError,global.FetchError=l.FetchError);const C="gitpod-desktop.firstInstall";let I,R,O,k;t.activate=async function(e){const t=e.extension.id,r=e.extension.packageJSON;let n,o=!1;try{O=c.window.createOutputChannel("Gitpod",{log:!0}),e.subscriptions.push(O);const s=e=>{O.info(`Log level: ${c.LogLevel[e]}`)};e.subscriptions.push(O.onDidChangeLogLevel(s)),s(O.logLevel),O.info(`${t}/${r.version} (${a.release()} ${a.platform()} ${a.arch()}) vscode/${c.version} (${c.env.appName})`),I=new m.TelemetryService(t,r.version,r.segmentKey,O);const i=new p.NotificationService(I),l=new S.CommandManager;e.subscriptions.push(l);const N=new u.default(e,O,I,i);e.subscriptions.push(N),k=new _.HostService(e,i,O),e.subscriptions.push(k);const P=new T.LocalSSHService(e,k,O);e.subscriptions.push(P);const M=new b.SessionService(k,O);e.subscriptions.push(M);const L=new d.ExperimentalSettings("gitpod",r.version,M,e,O);e.subscriptions.push(L);const B=new g.SettingsSync(l,O,I,i);e.subscriptions.push(B);const D=new f.RemoteConnector(e,M,k,L,O,I,i,P);e.subscriptions.push(D),e.subscriptions.push(c.window.registerUriHandler({handleUri(e){e.path===h.default.AUTH_COMPLETE_PATH?N.handleUri(e):D.handleUri(e)}})),l.register(new E.SignInCommand(M)),l.register(new w.ExportLogsCommand(e.logUri,i,I,O,k)),e.globalState.get(C,!1)||(e.globalState.update(C,!0),I.sendTelemetryEvent(k.gitpodHost,"gitpod_desktop_installation",{kind:"install"})),n=(0,v.getGitpodRemoteWindowConnectionInfo)(e),M.didFirstLoad.then((async()=>{n&&(l.register({id:"gitpod.api.autoTunnel",execute:()=>D.autoTunnelCommand}),R=new y.RemoteSession(n.remoteAuthority,n.connectionInfo,e,k,M,B,L,O,I,i),await R.initialize())})),o=!0}catch(e){throw I?.sendTelemetryException(k?.gitpodHost||A.Configuration.getGitpodHost(),e),e}finally{const e={remoteName:c.env.remoteName||"",remoteUri:c.workspace.workspaceFile||c.workspace.workspaceFolders?.[0].uri,workspaceId:n?.connectionInfo.workspaceId||"",instanceId:n?.connectionInfo.instanceId||"",gitpodHost:n?.connectionInfo.gitpodHost||"",debugWorkspace:n?String(!!n.connectionInfo.debugWorkspace):"",success:String(o)},t=e.gitpodHost||k?.gitpodHost||A.Configuration.getGitpodHost();O?.info("Activation properties:",JSON.stringify(e,void 0,2)),I?.sendTelemetryEvent(t,"vscode_desktop_activate",{...e,remoteUri:String(!!e.remoteUri)})}},t.deactivate=async function(){await(R?.dispose()),await(I?.dispose())}},29020:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ScopeFeature=t.isOauthInspectSupported=t.isFeatureSupported=t.getGitpodVersion=t.GitpodVersion=void 0;const i=s(r(89496)),a=s(r(81249)),c=r(7888);class l{constructor(e){this.raw=e,this.version=l.MIN_VERSION;const t=/(?:\.|-|^)(\d{4}\.\d{1,2}\.\d{1,2})(?:\.|-|$)/.exec(e);if(t){const[r,n,o]=t[1].split(".");e=`${parseInt(r,10)}.${parseInt(n,10)}.${parseInt(o,10)}`}a.valid(e)&&(this.version=e)}}let u;var d;t.GitpodVersion=l,l.MAX_VERSION="9999.99.99",l.MIN_VERSION="0.0.0",l.Max=new l(l.MAX_VERSION),l.Min=new l(l.MIN_VERSION),t.getGitpodVersion=async function(e,t){const r=new URL(e).toString().replace(/\/$/,""),n=await async function(e,t){if("https://gitpod.io"===e)return{host:e,version:l.Max};if(e===u?.host)return u;const r=`${e}/api/version`;let n;try{n=await(0,c.retry)((async()=>{const e=new AbortController;setTimeout((()=>e.abort()),1500);const t=await fetch(r,{signal:e.signal});if(!t.ok)throw new Error(`Responded with ${t.status} ${t.statusText}`);return t.text()}),1e3,3)}catch(e){t.error(`Error while fetching ${r}`,e)}return n?(t.info(`Got version from: ${e} version: ${n}`),u={host:e,version:new l(n)},u):(t.info(`Failed to fetch version from ${r}, some feature will be disabled`),{host:e,version:l.Min})}(r,t);return n.version},t.isFeatureSupported=function(e,t){switch(t){case"SSHPublicKeys":case"localHeartbeat":return a.gte(e.version,"2022.7.0")}},t.isOauthInspectSupported=async function(e){const t=`${new URL(e).toString().replace(/\/$/,"")}/api/oauth/inspect?client=${i.env.uriScheme}-gitpod`;try{const e=new AbortController;if(setTimeout((()=>e.abort()),1500),(await fetch(t,{signal:e.signal})).ok)return!0}catch{}return!1},(d=t.ScopeFeature||(t.ScopeFeature={})).SSHPublicKeys="function:getSSHPublicKeys",d.LocalHeartbeat="function:sendHeartBeat"},81013:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.HeartbeatManager=void 0;const i=s(r(89496)),a=r(57460),c=r(19430);class l extends a.Disposable{constructor(e,t,r,n,o){super(),this.connectionInfo=e,this.workspaceState=t,this.sessionService=r,this.logService=n,this.telemetryService=o,this.lastActivity=(new Date).getTime(),this.lastActivityEvent="init",this.isWorkspaceRunning=!0,this.eventCounterMap=new Map,this.ideHeartbeatData={successfulCount:0,totalCount:0},this._register(i.window.onDidChangeActiveTextEditor((e=>this.updateLastActivity("onDidChangeActiveTextEditor",e?.document)))),this._register(i.window.onDidChangeVisibleTextEditors((()=>this.updateLastActivity("onDidChangeVisibleTextEditors")))),this._register(i.window.onDidChangeTextEditorSelection((e=>{"output"!==e.textEditor.document.uri.scheme&&this.updateLastActivity("onDidChangeTextEditorSelection",e.textEditor.document)}))),this._register(i.window.onDidChangeTextEditorVisibleRanges((e=>{"output"!==e.textEditor.document.uri.scheme&&this.updateLastActivity("onDidChangeTextEditorVisibleRanges",e.textEditor.document)}))),this._register(i.window.onDidChangeTextEditorOptions((e=>this.updateLastActivity("onDidChangeTextEditorOptions",e.textEditor.document)))),this._register(i.window.onDidChangeTextEditorViewColumn((e=>this.updateLastActivity("onDidChangeTextEditorViewColumn",e.textEditor.document)))),this._register(i.window.onDidChangeActiveNotebookEditor((()=>this.updateLastActivity("onDidChangeActiveNotebookEditor")))),this._register(i.window.onDidChangeVisibleNotebookEditors((()=>this.updateLastActivity("onDidChangeVisibleNotebookEditors")))),this._register(i.window.onDidChangeNotebookEditorSelection((()=>this.updateLastActivity("onDidChangeNotebookEditorSelection")))),this._register(i.window.onDidChangeNotebookEditorVisibleRanges((()=>this.updateLastActivity("onDidChangeNotebookEditorVisibleRanges")))),this._register(i.window.onDidChangeActiveTerminal((()=>this.updateLastActivity("onDidChangeActiveTerminal")))),this._register(i.window.onDidOpenTerminal((()=>this.updateLastActivity("onDidOpenTerminal")))),this._register(i.window.onDidCloseTerminal((()=>this.updateLastActivity("onDidCloseTerminal")))),this._register(i.window.onDidChangeTerminalState((()=>this.updateLastActivity("onDidChangeTerminalState")))),this._register(i.window.onDidChangeWindowState((()=>this.updateLastActivity("onDidChangeWindowState")))),this._register(i.window.onDidChangeActiveColorTheme((()=>this.updateLastActivity("onDidChangeActiveColorTheme")))),this._register(i.authentication.onDidChangeSessions((()=>this.updateLastActivity("onDidChangeSessions")))),this._register(i.debug.onDidChangeActiveDebugSession((()=>this.updateLastActivity("onDidChangeActiveDebugSession")))),this._register(i.debug.onDidStartDebugSession((()=>this.updateLastActivity("onDidStartDebugSession")))),this._register(i.debug.onDidReceiveDebugSessionCustomEvent((()=>this.updateLastActivity("onDidReceiveDebugSessionCustomEvent")))),this._register(i.debug.onDidTerminateDebugSession((()=>this.updateLastActivity("onDidTerminateDebugSession")))),this._register(i.debug.onDidChangeBreakpoints((()=>this.updateLastActivity("onDidChangeBreakpoints")))),this._register(i.extensions.onDidChange((()=>this.updateLastActivity("onDidChangeExtensions")))),this._register(i.languages.onDidChangeDiagnostics((()=>this.updateLastActivity("onDidChangeDiagnostics")))),this._register(i.tasks.onDidStartTask((()=>this.updateLastActivity("onDidStartTask")))),this._register(i.tasks.onDidStartTaskProcess((()=>this.updateLastActivity("onDidStartTaskProcess")))),this._register(i.tasks.onDidEndTask((()=>this.updateLastActivity("onDidEndTask")))),this._register(i.tasks.onDidEndTaskProcess((()=>this.updateLastActivity("onDidEndTaskProcess")))),this._register(i.workspace.onDidChangeWorkspaceFolders((()=>this.updateLastActivity("onDidChangeWorkspaceFolders")))),this._register(i.workspace.onDidSaveTextDocument((e=>this.updateLastActivity("onDidSaveTextDocument",e)))),this._register(i.workspace.onDidChangeNotebookDocument((()=>this.updateLastActivity("onDidChangeNotebookDocument")))),this._register(i.workspace.onDidSaveNotebookDocument((()=>this.updateLastActivity("onDidSaveNotebookDocument")))),this._register(i.workspace.onDidOpenNotebookDocument((()=>this.updateLastActivity("onDidOpenNotebookDocument")))),this._register(i.workspace.onDidCloseNotebookDocument((()=>this.updateLastActivity("onDidCloseNotebookDocument")))),this._register(i.workspace.onWillCreateFiles((()=>this.updateLastActivity("onWillCreateFiles")))),this._register(i.workspace.onDidCreateFiles((()=>this.updateLastActivity("onDidCreateFiles")))),this._register(i.workspace.onWillDeleteFiles((()=>this.updateLastActivity("onWillDeleteFiles")))),this._register(i.workspace.onDidDeleteFiles((()=>this.updateLastActivity("onDidDeleteFiles")))),this._register(i.workspace.onWillRenameFiles((()=>this.updateLastActivity("onWillRenameFiles")))),this._register(i.workspace.onDidRenameFiles((()=>this.updateLastActivity("onDidRenameFiles")))),this._register(i.languages.registerHoverProvider("*",{provideHover:()=>(this.updateLastActivity("registerHoverProvider"),null)})),this.logService.info(`Heartbeat manager for workspace ${this.connectionInfo.workspaceId} (${this.connectionInfo.instanceId}) - ${this.connectionInfo.gitpodHost} started`),this.sendHeartBeat(),this.heartBeatHandle=setInterval((()=>{const e=Math.floor(10001*Math.random())+5e3;this.lastActivity+l.HEARTBEAT_INTERVAL+e<(new Date).getTime()||this.sendHeartBeat()}),l.HEARTBEAT_INTERVAL),this.ideHeartbeatTelemetryHandle=setInterval((()=>this.sendIDEHeartbeatTelemetry()),l.IDE_HEARTBEAT_INTERVAL),this.workspaceState&&this._register(this.workspaceState.onWorkspaceStopped((()=>{this.logService.trace("Stopping heartbeat as workspace is not running"),this.stopHeartbeat(),this.stopIDEHeartbeatTelemetry(),this.sendIDEHeartbeatTelemetry()})))}updateLastActivity(e,t){this.lastActivity=(new Date).getTime(),this.lastActivityEvent=e;const r=t?`${e}:${t.uri.scheme}`:e;let n=this.eventCounterMap.get(r)||0;this.eventCounterMap.set(r,++n)}async sendHeartBeat(e){let t=!1;try{this.workspaceState?this.workspaceState.isWorkspaceRunning()&&(e?(await this.sessionService.getAPI().sendDidClose(this.connectionInfo.workspaceId),this.telemetryService.sendTelemetryEvent(this.connectionInfo.gitpodHost,"ide_close_signal",{workspaceId:this.connectionInfo.workspaceId,instanceId:this.connectionInfo.instanceId,gitpodHost:this.connectionInfo.gitpodHost,clientKind:"vscode",debugWorkspace:String(!!this.connectionInfo.debugWorkspace)}),this.logService.trace("Send closed heartbeat")):(await this.sessionService.getAPI().sendHeartbeat(this.connectionInfo.workspaceId),this.logService.trace(`Send heartbeat, triggered by ${this.lastActivityEvent} event`)),t=!0):await(0,c.withServerApi)(this.sessionService.getGitpodToken(),this.connectionInfo.gitpodHost,(async r=>{const n=await r.server.getWorkspace(this.connectionInfo.workspaceId);this.isWorkspaceRunning="running"===n.latestInstance?.status?.phase&&n.latestInstance?.id===this.connectionInfo.instanceId,this.isWorkspaceRunning?(await r.server.sendHeartBeat({instanceId:this.connectionInfo.instanceId,wasClosed:e}),e?(this.telemetryService.sendTelemetryEvent(this.connectionInfo.gitpodHost,"ide_close_signal",{workspaceId:this.connectionInfo.workspaceId,instanceId:this.connectionInfo.instanceId,gitpodHost:this.connectionInfo.gitpodHost,clientKind:"vscode",debugWorkspace:String(!!this.connectionInfo.debugWorkspace)}),this.logService.trace("Send closed heartbeat")):this.logService.trace(`Send heartbeat, triggered by ${this.lastActivityEvent} event`),t=!0):(this.logService.trace("Stopping heartbeat as workspace is not running"),this.stopHeartbeat(),this.stopIDEHeartbeatTelemetry(),this.sendIDEHeartbeatTelemetry())}),this.logService)}catch(t){const r=e?"closed heartbeat":"heartbeat",n=t.message;t.message=`Failed to send ${r}, triggered by event: ${this.lastActivityEvent}: ${n}`,this.logService.error(t),t.message=`Failed to send ${r}: ${n}`,this.telemetryService.sendTelemetryException(this.connectionInfo.gitpodHost,t,{workspaceId:this.connectionInfo.workspaceId,instanceId:this.connectionInfo.instanceId})}finally{t&&this.ideHeartbeatData.successfulCount++,this.ideHeartbeatData.totalCount++}}stopHeartbeat(){this.heartBeatHandle&&(clearInterval(this.heartBeatHandle),this.heartBeatHandle=void 0)}stopIDEHeartbeatTelemetry(){this.ideHeartbeatTelemetryHandle&&(clearInterval(this.ideHeartbeatTelemetryHandle),this.ideHeartbeatTelemetryHandle=void 0)}sendIDEHeartbeatTelemetry(){this.telemetryService.sendRawTelemetryEvent(this.connectionInfo.gitpodHost,"ide_heartbeat",{...this.ideHeartbeatData,workspaceId:this.connectionInfo.workspaceId,instanceId:this.connectionInfo.instanceId,gitpodHost:this.connectionInfo.gitpodHost,clientKind:"vscode-desktop",debugWorkspace:String(!!this.connectionInfo.debugWorkspace),delta:Object.fromEntries(this.eventCounterMap)}),this.eventCounterMap.clear(),this.ideHeartbeatData.successfulCount=0,this.ideHeartbeatData.totalCount=0}async dispose(){super.dispose(),this.stopIDEHeartbeatTelemetry(),this.stopHeartbeat(),(this.workspaceState?.isWorkspaceRunning()??this.isWorkspaceRunning)&&(this.sendIDEHeartbeatTelemetry(),await this.sendHeartBeat(!0))}}t.HeartbeatManager=l,l.HEARTBEAT_INTERVAL=3e4,l.IDE_HEARTBEAT_INTERVAL=9e5},19430:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.withServerApi=t.unauthorizedErr=void 0;const a=r(13421),c=r(19689),l=r(19614),u=i(r(8777)),d=i(r(22003)),h=s(r(89496));t.unauthorizedErr="unauthorized";class p extends h.Disposable{constructor(e,t,r){super((()=>this.internalDispose())),this.logger=r,this.onErrorEmitter=new h.EventEmitter,this.onError=this.onErrorEmitter.event,t=t.replace(/\/$/,"");const n=new c.JsonRpcProxyFactory;this.service=new a.GitpodServiceImpl(n.createProxy());const o=new d.default(`${t.replace("https","wss")}/api/v1`,void 0,{maxReconnectionDelay:1e4,minReconnectionDelay:1e3,reconnectionDelayGrowFactor:1.5,connectionTimeout:1e4,maxRetries:3,debug:!1,startClosed:!1,WebSocket:class extends u.default{constructor(r,n){super(r,n,{headers:{Origin:new URL(t).origin,Authorization:`Bearer ${e}`,"User-Agent":h.env.appName,"X-Client-Version":h.version}})}}});o.onerror=e=>{o.retryCount>=3&&this.onErrorEmitter.fire(e.error)},(0,l.listen)({webSocket:o,logger:{error(e){r.error(e)},warn(e){r.warn(e)},info(e){r.info(e)},log(e){r.info(e)}},onConnection:e=>n.listen(e)}),this.webSocket=o}internalDispose(){this.webSocket.close(),this.onErrorEmitter.dispose()}}t.withServerApi=function(e,t,r,n){const o=new p(e,t,n);return Promise.race([r(o.service),new Promise(((e,t)=>o.onError((e=>{t(e)}))))]).finally((()=>o.dispose()))}},1780:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Pagination=t.protobufPackage=void 0;const o=n(r(62100));function s(e){return null!=e}t.protobufPackage="gitpod.experimental.v1",t.Pagination={encode:(e,t=o.default.Writer.create())=>(0!==e.pageSize&&t.uint32(8).int32(e.pageSize),0!==e.page&&t.uint32(16).int32(e.page),t),decode(e,t){const r=e instanceof o.default.Reader?e:new o.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const s={pageSize:0,page:0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:s.pageSize=r.int32();break;case 2:s.page=r.int32();break;default:r.skipType(7&e)}}return s},fromJSON:e=>({pageSize:s(e.pageSize)?Number(e.pageSize):0,page:s(e.page)?Number(e.page):0}),toJSON(e){const t={};return void 0!==e.pageSize&&(t.pageSize=Math.round(e.pageSize)),void 0!==e.page&&(t.page=Math.round(e.page)),t},fromPartial(e){const t={pageSize:0,page:0};return t.pageSize=e.pageSize??0,t.page=e.page??0,t}}},22444:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspacesServiceClient=t.WorkspacesServiceService=t.UpdatePortResponse=t.UpdatePortRequest=t.PortSpec=t.StartWorkspaceSpec=t.Port=t.WorkspaceInstanceStatus_Conditions=t.WorkspaceInstanceStatus=t.WorkspaceInstance=t.WorkspaceContext_Snapshot=t.WorkspaceContext_Prebuild=t.WorkspaceContext_Git=t.WorkspaceContext=t.WorkspaceStatus=t.Workspace=t.DeleteWorkspaceResponse=t.DeleteWorkspaceRequest=t.StopWorkspaceResponse=t.StopWorkspaceRequest=t.StartWorkspaceResponse=t.StartWorkspaceRequest=t.CreateAndStartWorkspaceResponse=t.CreateAndStartWorkspaceRequest=t.GetOwnerTokenResponse=t.GetOwnerTokenRequest=t.StreamWorkspaceStatusResponse=t.StreamWorkspaceStatusRequest=t.GetWorkspaceResponse=t.GetWorkspaceRequest=t.ListWorkspacesResponse=t.ListWorkspacesRequest=t.workspaceInstanceStatus_PhaseToNumber=t.workspaceInstanceStatus_PhaseToJSON=t.workspaceInstanceStatus_PhaseFromJSON=t.WorkspaceInstanceStatus_Phase=t.admissionLevelToNumber=t.admissionLevelToJSON=t.admissionLevelFromJSON=t.AdmissionLevel=t.portPolicyToNumber=t.portPolicyToJSON=t.portPolicyFromJSON=t.PortPolicy=t.protobufPackage=void 0;const o=r(66636),s=n(r(41583)),i=n(r(62100)),a=r(86840),c=r(65624),l=r(1780);var u,d,h;function p(e){switch(e){case 0:case"PORT_POLICY_UNSPECIFIED":return u.PORT_POLICY_UNSPECIFIED;case 1:case"PORT_POLICY_PRIVATE":return u.PORT_POLICY_PRIVATE;case 2:case"PORT_POLICY_PUBLIC":return u.PORT_POLICY_PUBLIC;default:return u.UNRECOGNIZED}}function f(e){switch(e){case u.PORT_POLICY_UNSPECIFIED:return"PORT_POLICY_UNSPECIFIED";case u.PORT_POLICY_PRIVATE:return"PORT_POLICY_PRIVATE";case u.PORT_POLICY_PUBLIC:return"PORT_POLICY_PUBLIC";case u.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function g(e){switch(e){case u.PORT_POLICY_UNSPECIFIED:return 0;case u.PORT_POLICY_PRIVATE:return 1;case u.PORT_POLICY_PUBLIC:return 2;case u.UNRECOGNIZED:default:return-1}}function m(e){switch(e){case 0:case"ADMISSION_LEVEL_UNSPECIFIED":return d.ADMISSION_LEVEL_UNSPECIFIED;case 1:case"ADMISSION_LEVEL_OWNER_ONLY":return d.ADMISSION_LEVEL_OWNER_ONLY;case 2:case"ADMISSION_LEVEL_EVERYONE":return d.ADMISSION_LEVEL_EVERYONE;default:return d.UNRECOGNIZED}}function y(e){switch(e){case d.ADMISSION_LEVEL_UNSPECIFIED:return"ADMISSION_LEVEL_UNSPECIFIED";case d.ADMISSION_LEVEL_OWNER_ONLY:return"ADMISSION_LEVEL_OWNER_ONLY";case d.ADMISSION_LEVEL_EVERYONE:return"ADMISSION_LEVEL_EVERYONE";case d.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function v(e){switch(e){case d.ADMISSION_LEVEL_UNSPECIFIED:return 0;case d.ADMISSION_LEVEL_OWNER_ONLY:return 1;case d.ADMISSION_LEVEL_EVERYONE:return 2;case d.UNRECOGNIZED:default:return-1}}function _(e){switch(e){case 0:case"PHASE_UNSPECIFIED":return h.PHASE_UNSPECIFIED;case 1:case"PHASE_PREPARING":return h.PHASE_PREPARING;case 2:case"PHASE_IMAGEBUILD":return h.PHASE_IMAGEBUILD;case 3:case"PHASE_PENDING":return h.PHASE_PENDING;case 4:case"PHASE_CREATING":return h.PHASE_CREATING;case 5:case"PHASE_INITIALIZING":return h.PHASE_INITIALIZING;case 6:case"PHASE_RUNNING":return h.PHASE_RUNNING;case 7:case"PHASE_INTERRUPTED":return h.PHASE_INTERRUPTED;case 8:case"PHASE_STOPPING":return h.PHASE_STOPPING;case 9:case"PHASE_STOPPED":return h.PHASE_STOPPED;default:return h.UNRECOGNIZED}}function b(e){switch(e){case h.PHASE_UNSPECIFIED:return"PHASE_UNSPECIFIED";case h.PHASE_PREPARING:return"PHASE_PREPARING";case h.PHASE_IMAGEBUILD:return"PHASE_IMAGEBUILD";case h.PHASE_PENDING:return"PHASE_PENDING";case h.PHASE_CREATING:return"PHASE_CREATING";case h.PHASE_INITIALIZING:return"PHASE_INITIALIZING";case h.PHASE_RUNNING:return"PHASE_RUNNING";case h.PHASE_INTERRUPTED:return"PHASE_INTERRUPTED";case h.PHASE_STOPPING:return"PHASE_STOPPING";case h.PHASE_STOPPED:return"PHASE_STOPPED";case h.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function S(e){switch(e){case h.PHASE_UNSPECIFIED:return 0;case h.PHASE_PREPARING:return 1;case h.PHASE_IMAGEBUILD:return 2;case h.PHASE_PENDING:return 3;case h.PHASE_CREATING:return 4;case h.PHASE_INITIALIZING:return 5;case h.PHASE_RUNNING:return 6;case h.PHASE_INTERRUPTED:return 7;case h.PHASE_STOPPING:return 8;case h.PHASE_STOPPED:return 9;case h.UNRECOGNIZED:default:return-1}}function E(){return{statusVersion:0,phase:h.PHASE_UNSPECIFIED,conditions:void 0,message:"",url:"",admission:d.ADMISSION_LEVEL_UNSPECIFIED,ports:[]}}function w(){return{port:0,policy:u.PORT_POLICY_UNSPECIFIED,url:""}}function A(){return{port:0,policy:u.PORT_POLICY_UNSPECIFIED}}t.protobufPackage="gitpod.experimental.v1",function(e){e.PORT_POLICY_UNSPECIFIED="PORT_POLICY_UNSPECIFIED",e.PORT_POLICY_PRIVATE="PORT_POLICY_PRIVATE",e.PORT_POLICY_PUBLIC="PORT_POLICY_PUBLIC",e.UNRECOGNIZED="UNRECOGNIZED"}(u=t.PortPolicy||(t.PortPolicy={})),t.portPolicyFromJSON=p,t.portPolicyToJSON=f,t.portPolicyToNumber=g,function(e){e.ADMISSION_LEVEL_UNSPECIFIED="ADMISSION_LEVEL_UNSPECIFIED",e.ADMISSION_LEVEL_OWNER_ONLY="ADMISSION_LEVEL_OWNER_ONLY",e.ADMISSION_LEVEL_EVERYONE="ADMISSION_LEVEL_EVERYONE",e.UNRECOGNIZED="UNRECOGNIZED"}(d=t.AdmissionLevel||(t.AdmissionLevel={})),t.admissionLevelFromJSON=m,t.admissionLevelToJSON=y,t.admissionLevelToNumber=v,function(e){e.PHASE_UNSPECIFIED="PHASE_UNSPECIFIED",e.PHASE_PREPARING="PHASE_PREPARING",e.PHASE_IMAGEBUILD="PHASE_IMAGEBUILD",e.PHASE_PENDING="PHASE_PENDING",e.PHASE_CREATING="PHASE_CREATING",e.PHASE_INITIALIZING="PHASE_INITIALIZING",e.PHASE_RUNNING="PHASE_RUNNING",e.PHASE_INTERRUPTED="PHASE_INTERRUPTED",e.PHASE_STOPPING="PHASE_STOPPING",e.PHASE_STOPPED="PHASE_STOPPED",e.UNRECOGNIZED="UNRECOGNIZED"}(h=t.WorkspaceInstanceStatus_Phase||(t.WorkspaceInstanceStatus_Phase={})),t.workspaceInstanceStatus_PhaseFromJSON=_,t.workspaceInstanceStatus_PhaseToJSON=b,t.workspaceInstanceStatus_PhaseToNumber=S,t.ListWorkspacesRequest={encode:(e,t=i.default.Writer.create())=>(void 0!==e.pagination&&l.Pagination.encode(e.pagination,t.uint32(10).fork()).ldelim(),void 0!==e.fieldMask&&a.FieldMask.encode(a.FieldMask.wrap(e.fieldMask),t.uint32(18).fork()).ldelim(),t),decode(e,t){const r=e instanceof i.default.Reader?e:new i.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={pagination:void 0,fieldMask:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.pagination=l.Pagination.decode(r,r.uint32());break;case 2:o.fieldMask=a.FieldMask.unwrap(a.FieldMask.decode(r,r.uint32()));break;default:r.skipType(7&e)}}return o},fromJSON:e=>({pagination:k(e.pagination)?l.Pagination.fromJSON(e.pagination):void 0,fieldMask:k(e.fieldMask)?a.FieldMask.unwrap(a.FieldMask.fromJSON(e.fieldMask)):void 0}),toJSON(e){const t={};return void 0!==e.pagination&&(t.pagination=e.pagination?l.Pagination.toJSON(e.pagination):void 0),void 0!==e.fieldMask&&(t.fieldMask=a.FieldMask.toJSON(a.FieldMask.wrap(e.fieldMask))),t},fromPartial(e){const t={pagination:void 0,fieldMask:void 0};return t.pagination=void 0!==e.pagination&&null!==e.pagination?l.Pagination.fromPartial(e.pagination):void 0,t.fieldMask=e.fieldMask??void 0,t}},t.ListWorkspacesResponse={encode(e,r=i.default.Writer.create()){""!==e.nextPageToken&&r.uint32(10).string(e.nextPageToken);for(const n of e.result)t.Workspace.encode(n,r.uint32(18).fork()).ldelim();return r},decode(e,r){const n=e instanceof i.default.Reader?e:new i.default.Reader(e);let o=void 0===r?n.len:n.pos+r;const s={nextPageToken:"",result:[]};for(;n.pos<o;){const e=n.uint32();switch(e>>>3){case 1:s.nextPageToken=n.string();break;case 2:s.result.push(t.Workspace.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return s},fromJSON:e=>({nextPageToken:k(e.nextPageToken)?String(e.nextPageToken):"",result:Array.isArray(e?.result)?e.result.map((e=>t.Workspace.fromJSON(e))):[]}),toJSON(e){const r={};return void 0!==e.nextPageToken&&(r.nextPageToken=e.nextPageToken),e.result?r.result=e.result.map((e=>e?t.Workspace.toJSON(e):void 0)):r.result=[],r},fromPartial(e){const r={nextPageToken:"",result:[]};return r.nextPageToken=e.nextPageToken??"",r.result=e.result?.map((e=>t.Workspace.fromPartial(e)))||[],r}},t.GetWorkspaceRequest={encode:(e,t=i.default.Writer.create())=>(""!==e.workspaceId&&t.uint32(10).string(e.workspaceId),t),decode(e,t){const r=e instanceof i.default.Reader?e:new i.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={workspaceId:""};for(;r.pos<n;){const e=r.uint32();e>>>3==1?o.workspaceId=r.string():r.skipType(7&e)}return o},fromJSON:e=>({workspaceId:k(e.workspaceId)?String(e.workspaceId):""}),toJSON(e){const t={};return void 0!==e.workspaceId&&(t.workspaceId=e.workspaceId),t},fromPartial(e){const t={workspaceId:""};return t.workspaceId=e.workspaceId??"",t}},t.GetWorkspaceResponse={encode:(e,r=i.default.Writer.create())=>(void 0!==e.result&&t.Workspace.encode(e.result,r.uint32(10).fork()).ldelim(),r),decode(e,r){const n=e instanceof i.default.Reader?e:new i.default.Reader(e);let o=void 0===r?n.len:n.pos+r;const s={result:void 0};for(;n.pos<o;){const e=n.uint32();e>>>3==1?s.result=t.Workspace.decode(n,n.uint32()):n.skipType(7&e)}return s},fromJSON:e=>({result:k(e.result)?t.Workspace.fromJSON(e.result):void 0}),toJSON(e){const r={};return void 0!==e.result&&(r.result=e.result?t.Workspace.toJSON(e.result):void 0),r},fromPartial(e){const r={result:void 0};return r.result=void 0!==e.result&&null!==e.result?t.Workspace.fromPartial(e.result):void 0,r}},t.StreamWorkspaceStatusRequest={encode:(e,t=i.default.Writer.create())=>(""!==e.workspaceId&&t.uint32(10).string(e.workspaceId),t),decode(e,t){const r=e instanceof i.default.Reader?e:new i.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={workspaceId:""};for(;r.pos<n;){const e=r.uint32();e>>>3==1?o.workspaceId=r.string():r.skipType(7&e)}return o},fromJSON:e=>({workspaceId:k(e.workspaceId)?String(e.workspaceId):""}),toJSON(e){const t={};return void 0!==e.workspaceId&&(t.workspaceId=e.workspaceId),t},fromPartial(e){const t={workspaceId:""};return t.workspaceId=e.workspaceId??"",t}},t.StreamWorkspaceStatusResponse={encode:(e,r=i.default.Writer.create())=>(void 0!==e.result&&t.WorkspaceStatus.encode(e.result,r.uint32(10).fork()).ldelim(),r),decode(e,r){const n=e instanceof i.default.Reader?e:new i.default.Reader(e);let o=void 0===r?n.len:n.pos+r;const s={result:void 0};for(;n.pos<o;){const e=n.uint32();e>>>3==1?s.result=t.WorkspaceStatus.decode(n,n.uint32()):n.skipType(7&e)}return s},fromJSON:e=>({result:k(e.result)?t.WorkspaceStatus.fromJSON(e.result):void 0}),toJSON(e){const r={};return void 0!==e.result&&(r.result=e.result?t.WorkspaceStatus.toJSON(e.result):void 0),r},fromPartial(e){const r={result:void 0};return r.result=void 0!==e.result&&null!==e.result?t.WorkspaceStatus.fromPartial(e.result):void 0,r}},t.GetOwnerTokenRequest={encode:(e,t=i.default.Writer.create())=>(""!==e.workspaceId&&t.uint32(10).string(e.workspaceId),t),decode(e,t){const r=e instanceof i.default.Reader?e:new i.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={workspaceId:""};for(;r.pos<n;){const e=r.uint32();e>>>3==1?o.workspaceId=r.string():r.skipType(7&e)}return o},fromJSON:e=>({workspaceId:k(e.workspaceId)?String(e.workspaceId):""}),toJSON(e){const t={};return void 0!==e.workspaceId&&(t.workspaceId=e.workspaceId),t},fromPartial(e){const t={workspaceId:""};return t.workspaceId=e.workspaceId??"",t}},t.GetOwnerTokenResponse={encode:(e,t=i.default.Writer.create())=>(""!==e.token&&t.uint32(10).string(e.token),t),decode(e,t){const r=e instanceof i.default.Reader?e:new i.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={token:""};for(;r.pos<n;){const e=r.uint32();e>>>3==1?o.token=r.string():r.skipType(7&e)}return o},fromJSON:e=>({token:k(e.token)?String(e.token):""}),toJSON(e){const t={};return void 0!==e.token&&(t.token=e.token),t},fromPartial(e){const t={token:""};return t.token=e.token??"",t}},t.CreateAndStartWorkspaceRequest={encode:(e,r=i.default.Writer.create())=>(""!==e.idempotencyToken&&r.uint32(10).string(e.idempotencyToken),void 0!==e.contextUrl&&r.uint32(18).string(e.contextUrl),void 0!==e.prebuildId&&r.uint32(26).string(e.prebuildId),void 0!==e.startSpec&&t.StartWorkspaceSpec.encode(e.startSpec,r.uint32(42).fork()).ldelim(),r),decode(e,r){const n=e instanceof i.default.Reader?e:new i.default.Reader(e);let o=void 0===r?n.len:n.pos+r;const s={idempotencyToken:"",contextUrl:void 0,prebuildId:void 0,startSpec:void 0};for(;n.pos<o;){const e=n.uint32();switch(e>>>3){case 1:s.idempotencyToken=n.string();break;case 2:s.contextUrl=n.string();break;case 3:s.prebuildId=n.string();break;case 5:s.startSpec=t.StartWorkspaceSpec.decode(n,n.uint32());break;default:n.skipType(7&e)}}return s},fromJSON:e=>({idempotencyToken:k(e.idempotencyToken)?String(e.idempotencyToken):"",contextUrl:k(e.contextUrl)?String(e.contextUrl):void 0,prebuildId:k(e.prebuildId)?String(e.prebuildId):void 0,startSpec:k(e.startSpec)?t.StartWorkspaceSpec.fromJSON(e.startSpec):void 0}),toJSON(e){const r={};return void 0!==e.idempotencyToken&&(r.idempotencyToken=e.idempotencyToken),void 0!==e.contextUrl&&(r.contextUrl=e.contextUrl),void 0!==e.prebuildId&&(r.prebuildId=e.prebuildId),void 0!==e.startSpec&&(r.startSpec=e.startSpec?t.StartWorkspaceSpec.toJSON(e.startSpec):void 0),r},fromPartial(e){const r={idempotencyToken:"",contextUrl:void 0,prebuildId:void 0,startSpec:void 0};return r.idempotencyToken=e.idempotencyToken??"",r.contextUrl=e.contextUrl??void 0,r.prebuildId=e.prebuildId??void 0,r.startSpec=void 0!==e.startSpec&&null!==e.startSpec?t.StartWorkspaceSpec.fromPartial(e.startSpec):void 0,r}},t.CreateAndStartWorkspaceResponse={encode:(e,t=i.default.Writer.create())=>(""!==e.workspaceId&&t.uint32(10).string(e.workspaceId),t),decode(e,t){const r=e instanceof i.default.Reader?e:new i.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={workspaceId:""};for(;r.pos<n;){const e=r.uint32();e>>>3==1?o.workspaceId=r.string():r.skipType(7&e)}return o},fromJSON:e=>({workspaceId:k(e.workspaceId)?String(e.workspaceId):""}),toJSON(e){const t={};return void 0!==e.workspaceId&&(t.workspaceId=e.workspaceId),t},fromPartial(e){const t={workspaceId:""};return t.workspaceId=e.workspaceId??"",t}},t.StartWorkspaceRequest={encode:(e,r=i.default.Writer.create())=>(""!==e.idempotencyToken&&r.uint32(10).string(e.idempotencyToken),""!==e.workspaceId&&r.uint32(18).string(e.workspaceId),void 0!==e.spec&&t.StartWorkspaceSpec.encode(e.spec,r.uint32(26).fork()).ldelim(),r),decode(e,r){const n=e instanceof i.default.Reader?e:new i.default.Reader(e);let o=void 0===r?n.len:n.pos+r;const s={idempotencyToken:"",workspaceId:"",spec:void 0};for(;n.pos<o;){const e=n.uint32();switch(e>>>3){case 1:s.idempotencyToken=n.string();break;case 2:s.workspaceId=n.string();break;case 3:s.spec=t.StartWorkspaceSpec.decode(n,n.uint32());break;default:n.skipType(7&e)}}return s},fromJSON:e=>({idempotencyToken:k(e.idempotencyToken)?String(e.idempotencyToken):"",workspaceId:k(e.workspaceId)?String(e.workspaceId):"",spec:k(e.spec)?t.StartWorkspaceSpec.fromJSON(e.spec):void 0}),toJSON(e){const r={};return void 0!==e.idempotencyToken&&(r.idempotencyToken=e.idempotencyToken),void 0!==e.workspaceId&&(r.workspaceId=e.workspaceId),void 0!==e.spec&&(r.spec=e.spec?t.StartWorkspaceSpec.toJSON(e.spec):void 0),r},fromPartial(e){const r={idempotencyToken:"",workspaceId:"",spec:void 0};return r.idempotencyToken=e.idempotencyToken??"",r.workspaceId=e.workspaceId??"",r.spec=void 0!==e.spec&&null!==e.spec?t.StartWorkspaceSpec.fromPartial(e.spec):void 0,r}},t.StartWorkspaceResponse={encode:(e,t=i.default.Writer.create())=>(""!==e.instanceId&&t.uint32(10).string(e.instanceId),""!==e.workspaceUrl&&t.uint32(18).string(e.workspaceUrl),t),decode(e,t){const r=e instanceof i.default.Reader?e:new i.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={instanceId:"",workspaceUrl:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.instanceId=r.string();break;case 2:o.workspaceUrl=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({instanceId:k(e.instanceId)?String(e.instanceId):"",workspaceUrl:k(e.workspaceUrl)?String(e.workspaceUrl):""}),toJSON(e){const t={};return void 0!==e.instanceId&&(t.instanceId=e.instanceId),void 0!==e.workspaceUrl&&(t.workspaceUrl=e.workspaceUrl),t},fromPartial(e){const t={instanceId:"",workspaceUrl:""};return t.instanceId=e.instanceId??"",t.workspaceUrl=e.workspaceUrl??"",t}},t.StopWorkspaceRequest={encode:(e,t=i.default.Writer.create())=>(""!==e.workspaceId&&t.uint32(10).string(e.workspaceId),t),decode(e,t){const r=e instanceof i.default.Reader?e:new i.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={workspaceId:""};for(;r.pos<n;){const e=r.uint32();e>>>3==1?o.workspaceId=r.string():r.skipType(7&e)}return o},fromJSON:e=>({workspaceId:k(e.workspaceId)?String(e.workspaceId):""}),toJSON(e){const t={};return void 0!==e.workspaceId&&(t.workspaceId=e.workspaceId),t},fromPartial(e){const t={workspaceId:""};return t.workspaceId=e.workspaceId??"",t}},t.StopWorkspaceResponse={encode:(e,t=i.default.Writer.create())=>t,decode(e,t){const r=e instanceof i.default.Reader?e:new i.default.Reader(e);let n=void 0===t?r.len:r.pos+t;for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.DeleteWorkspaceRequest={encode:(e,t=i.default.Writer.create())=>(""!==e.workspaceId&&t.uint32(10).string(e.workspaceId),t),decode(e,t){const r=e instanceof i.default.Reader?e:new i.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={workspaceId:""};for(;r.pos<n;){const e=r.uint32();e>>>3==1?o.workspaceId=r.string():r.skipType(7&e)}return o},fromJSON:e=>({workspaceId:k(e.workspaceId)?String(e.workspaceId):""}),toJSON(e){const t={};return void 0!==e.workspaceId&&(t.workspaceId=e.workspaceId),t},fromPartial(e){const t={workspaceId:""};return t.workspaceId=e.workspaceId??"",t}},t.DeleteWorkspaceResponse={encode:(e,t=i.default.Writer.create())=>t,decode(e,t){const r=e instanceof i.default.Reader?e:new i.default.Reader(e);let n=void 0===t?r.len:r.pos+t;for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.Workspace={encode:(e,r=i.default.Writer.create())=>(""!==e.workspaceId&&r.uint32(10).string(e.workspaceId),""!==e.ownerId&&r.uint32(18).string(e.ownerId),""!==e.projectId&&r.uint32(26).string(e.projectId),void 0!==e.context&&t.WorkspaceContext.encode(e.context,r.uint32(34).fork()).ldelim(),""!==e.description&&r.uint32(42).string(e.description),void 0!==e.status&&t.WorkspaceStatus.encode(e.status,r.uint32(50).fork()).ldelim(),r),decode(e,r){const n=e instanceof i.default.Reader?e:new i.default.Reader(e);let o=void 0===r?n.len:n.pos+r;const s={workspaceId:"",ownerId:"",projectId:"",context:void 0,description:"",status:void 0};for(;n.pos<o;){const e=n.uint32();switch(e>>>3){case 1:s.workspaceId=n.string();break;case 2:s.ownerId=n.string();break;case 3:s.projectId=n.string();break;case 4:s.context=t.WorkspaceContext.decode(n,n.uint32());break;case 5:s.description=n.string();break;case 6:s.status=t.WorkspaceStatus.decode(n,n.uint32());break;default:n.skipType(7&e)}}return s},fromJSON:e=>({workspaceId:k(e.workspaceId)?String(e.workspaceId):"",ownerId:k(e.ownerId)?String(e.ownerId):"",projectId:k(e.projectId)?String(e.projectId):"",context:k(e.context)?t.WorkspaceContext.fromJSON(e.context):void 0,description:k(e.description)?String(e.description):"",status:k(e.status)?t.WorkspaceStatus.fromJSON(e.status):void 0}),toJSON(e){const r={};return void 0!==e.workspaceId&&(r.workspaceId=e.workspaceId),void 0!==e.ownerId&&(r.ownerId=e.ownerId),void 0!==e.projectId&&(r.projectId=e.projectId),void 0!==e.context&&(r.context=e.context?t.WorkspaceContext.toJSON(e.context):void 0),void 0!==e.description&&(r.description=e.description),void 0!==e.status&&(r.status=e.status?t.WorkspaceStatus.toJSON(e.status):void 0),r},fromPartial(e){const r={workspaceId:"",ownerId:"",projectId:"",context:void 0,description:"",status:void 0};return r.workspaceId=e.workspaceId??"",r.ownerId=e.ownerId??"",r.projectId=e.projectId??"",r.context=void 0!==e.context&&null!==e.context?t.WorkspaceContext.fromPartial(e.context):void 0,r.description=e.description??"",r.status=void 0!==e.status&&null!==e.status?t.WorkspaceStatus.fromPartial(e.status):void 0,r}},t.WorkspaceStatus={encode:(e,r=i.default.Writer.create())=>(void 0!==e.instance&&t.WorkspaceInstance.encode(e.instance,r.uint32(10).fork()).ldelim(),r),decode(e,r){const n=e instanceof i.default.Reader?e:new i.default.Reader(e);let o=void 0===r?n.len:n.pos+r;const s={instance:void 0};for(;n.pos<o;){const e=n.uint32();e>>>3==1?s.instance=t.WorkspaceInstance.decode(n,n.uint32()):n.skipType(7&e)}return s},fromJSON:e=>({instance:k(e.instance)?t.WorkspaceInstance.fromJSON(e.instance):void 0}),toJSON(e){const r={};return void 0!==e.instance&&(r.instance=e.instance?t.WorkspaceInstance.toJSON(e.instance):void 0),r},fromPartial(e){const r={instance:void 0};return r.instance=void 0!==e.instance&&null!==e.instance?t.WorkspaceInstance.fromPartial(e.instance):void 0,r}},t.WorkspaceContext={encode:(e,r=i.default.Writer.create())=>(""!==e.contextUrl&&r.uint32(10).string(e.contextUrl),void 0!==e.git&&t.WorkspaceContext_Git.encode(e.git,r.uint32(18).fork()).ldelim(),void 0!==e.prebuild&&t.WorkspaceContext_Prebuild.encode(e.prebuild,r.uint32(26).fork()).ldelim(),void 0!==e.snapshot&&t.WorkspaceContext_Snapshot.encode(e.snapshot,r.uint32(34).fork()).ldelim(),r),decode(e,r){const n=e instanceof i.default.Reader?e:new i.default.Reader(e);let o=void 0===r?n.len:n.pos+r;const s={contextUrl:"",git:void 0,prebuild:void 0,snapshot:void 0};for(;n.pos<o;){const e=n.uint32();switch(e>>>3){case 1:s.contextUrl=n.string();break;case 2:s.git=t.WorkspaceContext_Git.decode(n,n.uint32());break;case 3:s.prebuild=t.WorkspaceContext_Prebuild.decode(n,n.uint32());break;case 4:s.snapshot=t.WorkspaceContext_Snapshot.decode(n,n.uint32());break;default:n.skipType(7&e)}}return s},fromJSON:e=>({contextUrl:k(e.contextUrl)?String(e.contextUrl):"",git:k(e.git)?t.WorkspaceContext_Git.fromJSON(e.git):void 0,prebuild:k(e.prebuild)?t.WorkspaceContext_Prebuild.fromJSON(e.prebuild):void 0,snapshot:k(e.snapshot)?t.WorkspaceContext_Snapshot.fromJSON(e.snapshot):void 0}),toJSON(e){const r={};return void 0!==e.contextUrl&&(r.contextUrl=e.contextUrl),void 0!==e.git&&(r.git=e.git?t.WorkspaceContext_Git.toJSON(e.git):void 0),void 0!==e.prebuild&&(r.prebuild=e.prebuild?t.WorkspaceContext_Prebuild.toJSON(e.prebuild):void 0),void 0!==e.snapshot&&(r.snapshot=e.snapshot?t.WorkspaceContext_Snapshot.toJSON(e.snapshot):void 0),r},fromPartial(e){const r={contextUrl:"",git:void 0,prebuild:void 0,snapshot:void 0};return r.contextUrl=e.contextUrl??"",r.git=void 0!==e.git&&null!==e.git?t.WorkspaceContext_Git.fromPartial(e.git):void 0,r.prebuild=void 0!==e.prebuild&&null!==e.prebuild?t.WorkspaceContext_Prebuild.fromPartial(e.prebuild):void 0,r.snapshot=void 0!==e.snapshot&&null!==e.snapshot?t.WorkspaceContext_Snapshot.fromPartial(e.snapshot):void 0,r}},t.WorkspaceContext_Git={encode:(e,t=i.default.Writer.create())=>(""!==e.normalizedContextUrl&&t.uint32(10).string(e.normalizedContextUrl),""!==e.commit&&t.uint32(18).string(e.commit),t),decode(e,t){const r=e instanceof i.default.Reader?e:new i.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={normalizedContextUrl:"",commit:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.normalizedContextUrl=r.string();break;case 2:o.commit=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({normalizedContextUrl:k(e.normalizedContextUrl)?String(e.normalizedContextUrl):"",commit:k(e.commit)?String(e.commit):""}),toJSON(e){const t={};return void 0!==e.normalizedContextUrl&&(t.normalizedContextUrl=e.normalizedContextUrl),void 0!==e.commit&&(t.commit=e.commit),t},fromPartial(e){const t={normalizedContextUrl:"",commit:""};return t.normalizedContextUrl=e.normalizedContextUrl??"",t.commit=e.commit??"",t}},t.WorkspaceContext_Prebuild={encode:(e,r=i.default.Writer.create())=>(void 0!==e.originalContext&&t.WorkspaceContext_Git.encode(e.originalContext,r.uint32(10).fork()).ldelim(),""!==e.prebuildId&&r.uint32(18).string(e.prebuildId),r),decode(e,r){const n=e instanceof i.default.Reader?e:new i.default.Reader(e);let o=void 0===r?n.len:n.pos+r;const s={originalContext:void 0,prebuildId:""};for(;n.pos<o;){const e=n.uint32();switch(e>>>3){case 1:s.originalContext=t.WorkspaceContext_Git.decode(n,n.uint32());break;case 2:s.prebuildId=n.string();break;default:n.skipType(7&e)}}return s},fromJSON:e=>({originalContext:k(e.originalContext)?t.WorkspaceContext_Git.fromJSON(e.originalContext):void 0,prebuildId:k(e.prebuildId)?String(e.prebuildId):""}),toJSON(e){const r={};return void 0!==e.originalContext&&(r.originalContext=e.originalContext?t.WorkspaceContext_Git.toJSON(e.originalContext):void 0),void 0!==e.prebuildId&&(r.prebuildId=e.prebuildId),r},fromPartial(e){const r={originalContext:void 0,prebuildId:""};return r.originalContext=void 0!==e.originalContext&&null!==e.originalContext?t.WorkspaceContext_Git.fromPartial(e.originalContext):void 0,r.prebuildId=e.prebuildId??"",r}},t.WorkspaceContext_Snapshot={encode:(e,t=i.default.Writer.create())=>(""!==e.snapshotId&&t.uint32(10).string(e.snapshotId),t),decode(e,t){const r=e instanceof i.default.Reader?e:new i.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={snapshotId:""};for(;r.pos<n;){const e=r.uint32();e>>>3==1?o.snapshotId=r.string():r.skipType(7&e)}return o},fromJSON:e=>({snapshotId:k(e.snapshotId)?String(e.snapshotId):""}),toJSON(e){const t={};return void 0!==e.snapshotId&&(t.snapshotId=e.snapshotId),t},fromPartial(e){const t={snapshotId:""};return t.snapshotId=e.snapshotId??"",t}},t.WorkspaceInstance={encode:(e,r=i.default.Writer.create())=>(""!==e.instanceId&&r.uint32(10).string(e.instanceId),""!==e.workspaceId&&r.uint32(18).string(e.workspaceId),void 0!==e.createdAt&&c.Timestamp.encode(C(e.createdAt),r.uint32(26).fork()).ldelim(),void 0!==e.status&&t.WorkspaceInstanceStatus.encode(e.status,r.uint32(34).fork()).ldelim(),r),decode(e,r){const n=e instanceof i.default.Reader?e:new i.default.Reader(e);let o=void 0===r?n.len:n.pos+r;const s={instanceId:"",workspaceId:"",createdAt:void 0,status:void 0};for(;n.pos<o;){const e=n.uint32();switch(e>>>3){case 1:s.instanceId=n.string();break;case 2:s.workspaceId=n.string();break;case 3:s.createdAt=I(c.Timestamp.decode(n,n.uint32()));break;case 4:s.status=t.WorkspaceInstanceStatus.decode(n,n.uint32());break;default:n.skipType(7&e)}}return s},fromJSON:e=>({instanceId:k(e.instanceId)?String(e.instanceId):"",workspaceId:k(e.workspaceId)?String(e.workspaceId):"",createdAt:k(e.createdAt)?R(e.createdAt):void 0,status:k(e.status)?t.WorkspaceInstanceStatus.fromJSON(e.status):void 0}),toJSON(e){const r={};return void 0!==e.instanceId&&(r.instanceId=e.instanceId),void 0!==e.workspaceId&&(r.workspaceId=e.workspaceId),void 0!==e.createdAt&&(r.createdAt=e.createdAt.toISOString()),void 0!==e.status&&(r.status=e.status?t.WorkspaceInstanceStatus.toJSON(e.status):void 0),r},fromPartial(e){const r={instanceId:"",workspaceId:"",createdAt:void 0,status:void 0};return r.instanceId=e.instanceId??"",r.workspaceId=e.workspaceId??"",r.createdAt=e.createdAt??void 0,r.status=void 0!==e.status&&null!==e.status?t.WorkspaceInstanceStatus.fromPartial(e.status):void 0,r}},t.WorkspaceInstanceStatus={encode(e,r=i.default.Writer.create()){0!==e.statusVersion&&r.uint32(8).uint64(e.statusVersion),e.phase!==h.PHASE_UNSPECIFIED&&r.uint32(16).int32(S(e.phase)),void 0!==e.conditions&&t.WorkspaceInstanceStatus_Conditions.encode(e.conditions,r.uint32(26).fork()).ldelim(),""!==e.message&&r.uint32(34).string(e.message),""!==e.url&&r.uint32(42).string(e.url),e.admission!==d.ADMISSION_LEVEL_UNSPECIFIED&&r.uint32(48).int32(v(e.admission));for(const n of e.ports)t.Port.encode(n,r.uint32(58).fork()).ldelim();return r},decode(e,r){const n=e instanceof i.default.Reader?e:new i.default.Reader(e);let o=void 0===r?n.len:n.pos+r;const s=E();for(;n.pos<o;){const e=n.uint32();switch(e>>>3){case 1:s.statusVersion=O(n.uint64());break;case 2:s.phase=_(n.int32());break;case 3:s.conditions=t.WorkspaceInstanceStatus_Conditions.decode(n,n.uint32());break;case 4:s.message=n.string();break;case 5:s.url=n.string();break;case 6:s.admission=m(n.int32());break;case 7:s.ports.push(t.Port.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return s},fromJSON:e=>({statusVersion:k(e.statusVersion)?Number(e.statusVersion):0,phase:k(e.phase)?_(e.phase):h.PHASE_UNSPECIFIED,conditions:k(e.conditions)?t.WorkspaceInstanceStatus_Conditions.fromJSON(e.conditions):void 0,message:k(e.message)?String(e.message):"",url:k(e.url)?String(e.url):"",admission:k(e.admission)?m(e.admission):d.ADMISSION_LEVEL_UNSPECIFIED,ports:Array.isArray(e?.ports)?e.ports.map((e=>t.Port.fromJSON(e))):[]}),toJSON(e){const r={};return void 0!==e.statusVersion&&(r.statusVersion=Math.round(e.statusVersion)),void 0!==e.phase&&(r.phase=b(e.phase)),void 0!==e.conditions&&(r.conditions=e.conditions?t.WorkspaceInstanceStatus_Conditions.toJSON(e.conditions):void 0),void 0!==e.message&&(r.message=e.message),void 0!==e.url&&(r.url=e.url),void 0!==e.admission&&(r.admission=y(e.admission)),e.ports?r.ports=e.ports.map((e=>e?t.Port.toJSON(e):void 0)):r.ports=[],r},fromPartial(e){const r=E();return r.statusVersion=e.statusVersion??0,r.phase=e.phase??h.PHASE_UNSPECIFIED,r.conditions=void 0!==e.conditions&&null!==e.conditions?t.WorkspaceInstanceStatus_Conditions.fromPartial(e.conditions):void 0,r.message=e.message??"",r.url=e.url??"",r.admission=e.admission??d.ADMISSION_LEVEL_UNSPECIFIED,r.ports=e.ports?.map((e=>t.Port.fromPartial(e)))||[],r}},t.WorkspaceInstanceStatus_Conditions={encode:(e,t=i.default.Writer.create())=>(""!==e.failed&&t.uint32(10).string(e.failed),""!==e.timeout&&t.uint32(18).string(e.timeout),void 0!==e.firstUserActivity&&c.Timestamp.encode(C(e.firstUserActivity),t.uint32(74).fork()).ldelim(),void 0!==e.stoppedByRequest&&t.uint32(88).bool(e.stoppedByRequest),t),decode(e,t){const r=e instanceof i.default.Reader?e:new i.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={failed:"",timeout:"",firstUserActivity:void 0,stoppedByRequest:void 0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.failed=r.string();break;case 2:o.timeout=r.string();break;case 9:o.firstUserActivity=I(c.Timestamp.decode(r,r.uint32()));break;case 11:o.stoppedByRequest=r.bool();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({failed:k(e.failed)?String(e.failed):"",timeout:k(e.timeout)?String(e.timeout):"",firstUserActivity:k(e.firstUserActivity)?R(e.firstUserActivity):void 0,stoppedByRequest:k(e.stoppedByRequest)?Boolean(e.stoppedByRequest):void 0}),toJSON(e){const t={};return void 0!==e.failed&&(t.failed=e.failed),void 0!==e.timeout&&(t.timeout=e.timeout),void 0!==e.firstUserActivity&&(t.firstUserActivity=e.firstUserActivity.toISOString()),void 0!==e.stoppedByRequest&&(t.stoppedByRequest=e.stoppedByRequest),t},fromPartial(e){const t={failed:"",timeout:"",firstUserActivity:void 0,stoppedByRequest:void 0};return t.failed=e.failed??"",t.timeout=e.timeout??"",t.firstUserActivity=e.firstUserActivity??void 0,t.stoppedByRequest=e.stoppedByRequest??void 0,t}},t.Port={encode:(e,t=i.default.Writer.create())=>(0!==e.port&&t.uint32(8).uint64(e.port),e.policy!==u.PORT_POLICY_UNSPECIFIED&&t.uint32(16).int32(g(e.policy)),""!==e.url&&t.uint32(26).string(e.url),t),decode(e,t){const r=e instanceof i.default.Reader?e:new i.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const o=w();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.port=O(r.uint64());break;case 2:o.policy=p(r.int32());break;case 3:o.url=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({port:k(e.port)?Number(e.port):0,policy:k(e.policy)?p(e.policy):u.PORT_POLICY_UNSPECIFIED,url:k(e.url)?String(e.url):""}),toJSON(e){const t={};return void 0!==e.port&&(t.port=Math.round(e.port)),void 0!==e.policy&&(t.policy=f(e.policy)),void 0!==e.url&&(t.url=e.url),t},fromPartial(e){const t=w();return t.port=e.port??0,t.policy=e.policy??u.PORT_POLICY_UNSPECIFIED,t.url=e.url??"",t}},t.StartWorkspaceSpec={encode:(e,t=i.default.Writer.create())=>t,decode(e,t){const r=e instanceof i.default.Reader?e:new i.default.Reader(e);let n=void 0===t?r.len:r.pos+t;for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.PortSpec={encode:(e,t=i.default.Writer.create())=>(0!==e.port&&t.uint32(8).uint64(e.port),e.policy!==u.PORT_POLICY_UNSPECIFIED&&t.uint32(16).int32(g(e.policy)),t),decode(e,t){const r=e instanceof i.default.Reader?e:new i.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const o=A();for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.port=O(r.uint64());break;case 2:o.policy=p(r.int32());break;default:r.skipType(7&e)}}return o},fromJSON:e=>({port:k(e.port)?Number(e.port):0,policy:k(e.policy)?p(e.policy):u.PORT_POLICY_UNSPECIFIED}),toJSON(e){const t={};return void 0!==e.port&&(t.port=Math.round(e.port)),void 0!==e.policy&&(t.policy=f(e.policy)),t},fromPartial(e){const t=A();return t.port=e.port??0,t.policy=e.policy??u.PORT_POLICY_UNSPECIFIED,t}},t.UpdatePortRequest={encode:(e,r=i.default.Writer.create())=>(""!==e.workspaceId&&r.uint32(10).string(e.workspaceId),void 0!==e.port&&t.PortSpec.encode(e.port,r.uint32(18).fork()).ldelim(),r),decode(e,r){const n=e instanceof i.default.Reader?e:new i.default.Reader(e);let o=void 0===r?n.len:n.pos+r;const s={workspaceId:"",port:void 0};for(;n.pos<o;){const e=n.uint32();switch(e>>>3){case 1:s.workspaceId=n.string();break;case 2:s.port=t.PortSpec.decode(n,n.uint32());break;default:n.skipType(7&e)}}return s},fromJSON:e=>({workspaceId:k(e.workspaceId)?String(e.workspaceId):"",port:k(e.port)?t.PortSpec.fromJSON(e.port):void 0}),toJSON(e){const r={};return void 0!==e.workspaceId&&(r.workspaceId=e.workspaceId),void 0!==e.port&&(r.port=e.port?t.PortSpec.toJSON(e.port):void 0),r},fromPartial(e){const r={workspaceId:"",port:void 0};return r.workspaceId=e.workspaceId??"",r.port=void 0!==e.port&&null!==e.port?t.PortSpec.fromPartial(e.port):void 0,r}},t.UpdatePortResponse={encode:(e,t=i.default.Writer.create())=>t,decode(e,t){const r=e instanceof i.default.Reader?e:new i.default.Reader(e);let n=void 0===t?r.len:r.pos+t;for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.WorkspacesServiceService={listWorkspaces:{path:"/gitpod.experimental.v1.WorkspacesService/ListWorkspaces",requestStream:!1,responseStream:!1,requestSerialize:e=>Buffer.from(t.ListWorkspacesRequest.encode(e).finish()),requestDeserialize:e=>t.ListWorkspacesRequest.decode(e),responseSerialize:e=>Buffer.from(t.ListWorkspacesResponse.encode(e).finish()),responseDeserialize:e=>t.ListWorkspacesResponse.decode(e)},getWorkspace:{path:"/gitpod.experimental.v1.WorkspacesService/GetWorkspace",requestStream:!1,responseStream:!1,requestSerialize:e=>Buffer.from(t.GetWorkspaceRequest.encode(e).finish()),requestDeserialize:e=>t.GetWorkspaceRequest.decode(e),responseSerialize:e=>Buffer.from(t.GetWorkspaceResponse.encode(e).finish()),responseDeserialize:e=>t.GetWorkspaceResponse.decode(e)},streamWorkspaceStatus:{path:"/gitpod.experimental.v1.WorkspacesService/StreamWorkspaceStatus",requestStream:!1,responseStream:!0,requestSerialize:e=>Buffer.from(t.StreamWorkspaceStatusRequest.encode(e).finish()),requestDeserialize:e=>t.StreamWorkspaceStatusRequest.decode(e),responseSerialize:e=>Buffer.from(t.StreamWorkspaceStatusResponse.encode(e).finish()),responseDeserialize:e=>t.StreamWorkspaceStatusResponse.decode(e)},getOwnerToken:{path:"/gitpod.experimental.v1.WorkspacesService/GetOwnerToken",requestStream:!1,responseStream:!1,requestSerialize:e=>Buffer.from(t.GetOwnerTokenRequest.encode(e).finish()),requestDeserialize:e=>t.GetOwnerTokenRequest.decode(e),responseSerialize:e=>Buffer.from(t.GetOwnerTokenResponse.encode(e).finish()),responseDeserialize:e=>t.GetOwnerTokenResponse.decode(e)},createAndStartWorkspace:{path:"/gitpod.experimental.v1.WorkspacesService/CreateAndStartWorkspace",requestStream:!1,responseStream:!1,requestSerialize:e=>Buffer.from(t.CreateAndStartWorkspaceRequest.encode(e).finish()),requestDeserialize:e=>t.CreateAndStartWorkspaceRequest.decode(e),responseSerialize:e=>Buffer.from(t.CreateAndStartWorkspaceResponse.encode(e).finish()),responseDeserialize:e=>t.CreateAndStartWorkspaceResponse.decode(e)},stopWorkspace:{path:"/gitpod.experimental.v1.WorkspacesService/StopWorkspace",requestStream:!1,responseStream:!1,requestSerialize:e=>Buffer.from(t.StopWorkspaceRequest.encode(e).finish()),requestDeserialize:e=>t.StopWorkspaceRequest.decode(e),responseSerialize:e=>Buffer.from(t.StopWorkspaceResponse.encode(e).finish()),responseDeserialize:e=>t.StopWorkspaceResponse.decode(e)},deleteWorkspace:{path:"/gitpod.experimental.v1.WorkspacesService/DeleteWorkspace",requestStream:!1,responseStream:!1,requestSerialize:e=>Buffer.from(t.DeleteWorkspaceRequest.encode(e).finish()),requestDeserialize:e=>t.DeleteWorkspaceRequest.decode(e),responseSerialize:e=>Buffer.from(t.DeleteWorkspaceResponse.encode(e).finish()),responseDeserialize:e=>t.DeleteWorkspaceResponse.decode(e)},updatePort:{path:"/gitpod.experimental.v1.WorkspacesService/UpdatePort",requestStream:!1,responseStream:!1,requestSerialize:e=>Buffer.from(t.UpdatePortRequest.encode(e).finish()),requestDeserialize:e=>t.UpdatePortRequest.decode(e),responseSerialize:e=>Buffer.from(t.UpdatePortResponse.encode(e).finish()),responseDeserialize:e=>t.UpdatePortResponse.decode(e)}},t.WorkspacesServiceClient=(0,o.makeGenericClientConstructor)(t.WorkspacesServiceService,"gitpod.experimental.v1.WorkspacesService");var T=(()=>{if(void 0!==T)return T;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})();function C(e){return{seconds:e.getTime()/1e3,nanos:e.getTime()%1e3*1e6}}function I(e){let t=1e3*e.seconds;return t+=e.nanos/1e6,new Date(t)}function R(e){return e instanceof Date?e:"string"==typeof e?new Date(e):I(c.Timestamp.fromJSON(e))}function O(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new T.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}function k(e){return null!=e}i.default.util.Long!==s.default&&(i.default.util.Long=s.default,i.default.configure())},86840:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FieldMask=t.protobufPackage=void 0;const o=n(r(62100));t.protobufPackage="google.protobuf",t.FieldMask={encode(e,t=o.default.Writer.create()){for(const r of e.paths)t.uint32(10).string(r);return t},decode(e,t){const r=e instanceof o.default.Reader?e:new o.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const s={paths:[]};for(;r.pos<n;){const e=r.uint32();e>>>3==1?s.paths.push(r.string()):r.skipType(7&e)}return s},fromJSON:e=>({paths:"string"==typeof e?e.split(",").filter(Boolean):Array.isArray(e?.paths)?e.paths.map(String):[]}),toJSON:e=>e.paths.join(","),fromPartial(e){const t={paths:[]};return t.paths=e.paths?.map((e=>e))||[],t},wrap(e){const t={paths:[]};return t.paths=e,t},unwrap:e=>e.paths}},65624:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Timestamp=t.protobufPackage=void 0;const o=n(r(41583)),s=n(r(62100));t.protobufPackage="google.protobuf",t.Timestamp={encode:(e,t=s.default.Writer.create())=>(0!==e.seconds&&t.uint32(8).int64(e.seconds),0!==e.nanos&&t.uint32(16).int32(e.nanos),t),decode(e,t){const r=e instanceof s.default.Reader?e:new s.default.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={seconds:0,nanos:0};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.seconds=a(r.int64());break;case 2:o.nanos=r.int32();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({seconds:c(e.seconds)?Number(e.seconds):0,nanos:c(e.nanos)?Number(e.nanos):0}),toJSON(e){const t={};return void 0!==e.seconds&&(t.seconds=Math.round(e.seconds)),void 0!==e.nanos&&(t.nanos=Math.round(e.nanos)),t},fromPartial(e){const t={seconds:0,nanos:0};return t.seconds=e.seconds??0,t.nanos=e.nanos??0,t}};var i=(()=>{if(void 0!==i)return i;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})();function a(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new i.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}function c(e){return null!=e}s.default.util.Long!==o.default&&(s.default.util.Long=o.default,s.default.configure())},18882:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionServiceServer=t.ExtensionServiceDefinition=void 0;const i=r(14508),a=r(57460);var c=r(14508);Object.defineProperty(t,"ExtensionServiceDefinition",{enumerable:!0,get:function(){return c.ExtensionServiceDefinition}});const l=r(19430),u=r(69121),d=r(9612),h=r(99710),p=r(37892),f=r(7888),g=r(72418),m=r(90120),y=r(81143),v=r(6543),_=s(r(29005)),b={[u.WorkspaceInstanceStatus_Phase.CREATING]:"pending",[u.WorkspaceInstanceStatus_Phase.IMAGEBUILD]:"building",[u.WorkspaceInstanceStatus_Phase.INITIALIZING]:"initializing",[u.WorkspaceInstanceStatus_Phase.INTERRUPTED]:"running",[u.WorkspaceInstanceStatus_Phase.PENDING]:"stopping",[u.WorkspaceInstanceStatus_Phase.PREPARING]:"stopped",[u.WorkspaceInstanceStatus_Phase.RUNNING]:"running",[u.WorkspaceInstanceStatus_Phase.STOPPED]:"stopped",[u.WorkspaceInstanceStatus_Phase.STOPPING]:"stopping",[u.WorkspaceInstanceStatus_Phase.UNSPECIFIED]:void 0};class S{constructor(e,t,r,n,o){this.logService=e,this.sessionService=t,this.hostService=r,this.experiments=n,this.telemetryService=o}async getWorkspaceSSHKey(e,t,r){const n=`https://${t}.${r}`,o=new g.BrowserHeaders;o.append("x-gitpod-owner-token",e);const s=new m.ControlServiceClient(`${n}/_supervisor/v1`,{transport:(0,y.NodeHttpTransport)()}),i=await new Promise(((e,t)=>{s.createSSHKeyPair(new v.CreateSSHKeyPairRequest,o,((r,n)=>{if(r)return t(r);e(n.toObject().privateKey)}))})),a=_.utils.parseKey(i);if(a instanceof Error||!a)throw new Error("Error while parsing workspace SSH private key");return a.getPrivatePEM()}async getWorkspaceAuthInfo(e,t){try{const t=this.sessionService.getGitpodToken();if(!t)throw new d.ServerError(d.Status.INTERNAL,"no access token found");const r=this.sessionService.getUserId(),n=e.workspaceId,o=this.hostService.gitpodHost,s=await this.experiments.getUsePublicAPI(o),[i,a]=await(0,l.withServerApi)(t,o,(e=>Promise.all([s?this.sessionService.getAPI().getWorkspace(n):e.server.getWorkspace(n),s?this.sessionService.getAPI().getOwnerToken(n):e.server.getOwnerToken(n)])),this.logService),c=s?b[i.status?.instance?.status?.phase??u.WorkspaceInstanceStatus_Phase.UNSPECIFIED]:i.latestInstance?.status.phase;if("running"!==c)throw new d.ServerError(d.Status.UNAVAILABLE,"workspace is not running, current phase: "+c);const h=s?i.status?.instance?.status?.url:i.latestInstance?.ideUrl;if(!h)throw new d.ServerError(d.Status.DATA_LOSS,"no ide url found");const p=new URL(h),f=p.host.substring(p.host.indexOf(".")+1),g=s?i.status?.instance?.instanceId:i.latestInstance?.id,m=await this.getWorkspaceSSHKey(a,n,f);return{gitpodHost:o,userId:r,workspaceId:n,instanceId:g,workspaceHost:f,ownerToken:a,sshkey:m}}catch(e){throw this.logService.error(e,"failed to get workspace auth info"),e}}async sendLocalSSHUserFlowStatus(e,t){const r={flow:"ssh",kind:"local-ssh",connType:e.connType===i.SendLocalSSHUserFlowStatusRequest_ConnType.CONN_TYPE_SSH?"ssh":"tunnel",workspaceId:e.workspaceId,instanceId:e.instanceId,daemonVersion:e.daemonVersion,userId:e.userId,gitpodHost:e.gitpodHost};e.status!==i.SendLocalSSHUserFlowStatusRequest_Status.STATUS_SUCCESS&&e.failureCode!==i.SendLocalSSHUserFlowStatusRequest_Code.CODE_UNSPECIFIED&&(r.reasonCode=i.SendLocalSSHUserFlowStatusRequest_Code[e.failureCode]);const n=e.status===i.SendLocalSSHUserFlowStatusRequest_Status.STATUS_SUCCESS?"local-ssh-success":"local-ssh-failure";return this.telemetryService.sendUserFlowStatus(n,r),{}}async sendErrorReport(e,t){const r=new Error(e.errorMessage);r.name=`${e.errorName}[local-ssh]`,r.stack=e.errorStack;const n={workspaceId:e.workspaceId,instanceId:e.instanceId,daemonVersion:e.daemonVersion,extensionVersion:e.extensionVersion,userId:e.userId};return this.telemetryService.sendTelemetryException(e.gitpodHost,r,n),{}}}class E extends a.Disposable{constructor(e,t,r,n,o){super(),this.logService=e,this.sessionService=t,this.hostService=r,this.telemetryService=n,this.experiments=o,this.server=this.getServer(),this.tryActive()}getServer(){const e=(0,h.createServer)(),t=new S(this.logService,this.sessionService,this.hostService,this.experiments,this.telemetryService);return e.add(i.ExtensionServiceDefinition,t),e}async tryActive(){const e=p.Configuration.getLocalSshExtensionIpcPort();this.server.listen("127.0.0.1:"+e).then((()=>{this.logService.info("extension ipc service server started to listen")})).catch((e=>{(0,f.timeout)(1e3).then((()=>{this.tryActive()}))}))}dispose(){this.server.forceShutdown()}}t.ExtensionServiceServer=E,E.MAX_LOCAL_SSH_PING_RETRY_COUNT=10,E.MAX_EXTENSION_ACTIVE_RETRY_COUNT=10},52716:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsReporter=t.getGrpcMetricsInterceptor=t.getConnectMetricsInterceptor=void 0;const i=s(r(66636)),a=r(38076),c=r(49408),l=r(43342),u=new a.Registry,d=new class{constructor(){this.startedCounter=new a.Counter({name:"grpc_client_started_total",help:"Total number of RPCs started on the client.",labelNames:["grpc_service","grpc_method","grpc_type"],registers:[u]}),this.sentCounter=new a.Counter({name:"grpc_client_msg_sent_total",help:" Total number of gRPC stream messages sent by the client.",labelNames:["grpc_service","grpc_method","grpc_type"],registers:[u]}),this.receivedCounter=new a.Counter({name:"grpc_client_msg_received_total",help:"Total number of RPC stream messages received by the client.",labelNames:["grpc_service","grpc_method","grpc_type"],registers:[u]}),this.handledCounter=new a.Counter({name:"grpc_client_handled_total",help:"Total number of RPCs completed by the client, regardless of success or failure.",labelNames:["grpc_service","grpc_method","grpc_type","grpc_code"],registers:[u]}),this.handledSecondsHistogram=new a.Histogram({name:"grpc_client_handling_seconds",help:"Histogram of response latency (seconds) of the gRPC until it is finished by the application.",labelNames:["grpc_service","grpc_method","grpc_type","grpc_code"],buckets:[.1,.2,.5,1,2,5,10],registers:[u]})}started(e){this.startedCounter.inc({grpc_service:e.service,grpc_method:e.method,grpc_type:e.type})}sent(e){this.sentCounter.inc({grpc_service:e.service,grpc_method:e.method,grpc_type:e.type})}received(e){this.receivedCounter.inc({grpc_service:e.service,grpc_method:e.method,grpc_type:e.type})}handled(e){this.handledCounter.inc({grpc_service:e.service,grpc_method:e.method,grpc_type:e.type,grpc_code:e.code})}startHandleTimer(e){return this.handledSecondsHistogram.startTimer({grpc_service:e.service,grpc_method:e.method,grpc_type:e.type})}};t.getConnectMetricsInterceptor=function(){return e=>async t=>{async function*r(e,t,r){let s;try{for await(const r of e)t(),yield r}catch(e){throw s=(0,l.connectErrorFromReason)(e,l.Code.Internal).code,e}finally{r&&!i&&(o({grpc_code:s?l.Code[s]:"OK"}),d.handled({...n,code:s?l.Code[s]:"OK"}))}}const n=(e=>{let t;switch(e.method.kind){case c.MethodKind.Unary:t="unary";break;case c.MethodKind.ServerStreaming:t="server_stream";break;case c.MethodKind.ClientStreaming:t="client_stream";break;case c.MethodKind.BiDiStreaming:t="bidi_stream"}return{type:t,service:e.service.typeName,method:e.method.name}})(t);d.started(n);const o=d.startHandleTimer(n);let s,i=!1;try{let a;a=t.stream?{...t,message:r(t.message,d.sent.bind(d,n),!1)}:t;const c=await e(a);let u;return c.stream?u={...c,message:r(c.message,d.received.bind(d,n),!0)}:(u=c,i=!0),u}catch(e){i=!0;const t=(0,l.connectErrorFromReason)(e,l.Code.Internal);throw s=t.code,t}finally{i&&(o({grpc_code:s?l.Code[s]:"OK"}),d.handled({...n,code:s?l.Code[s]:"OK"}))}}},t.getGrpcMetricsInterceptor=function(){const e=e=>"OK"===e.toUpperCase()?e.toUpperCase():e[0].toUpperCase()+e.substring(1).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));return(t,r)=>{const n=t.method_definition,o=((e,t,r)=>{const n=e.substring(e.lastIndexOf("/")+1);let o;return o=t?r?"bidi_stream":"client_stream":r?"server_stream":"unary",{type:o,service:e.substring(1,e.length-n.length-1),method:n}})(n.path,n.requestStream,n.responseStream),s=(new i.RequesterBuilder).withStart(((t,r,n)=>{const s=(new i.ListenerBuilder).withOnReceiveStatus(((t,r)=>{d.handled({...o,code:e(i.status[t.code])}),a({grpc_code:e(i.status[t.code])}),r(t)})).withOnReceiveMessage(((e,t)=>{d.received(o),t(e)})).build();d.started(o);const a=d.startHandleTimer(o);n(t,s)})).withSendMessage(((e,t)=>{d.sent(o),t(e)})).build();return new i.InterceptingCall(r(t),s)}};class h{constructor(e,t){this.logger=t;const r=new URL(e);this.metricsHost=`ide.${r.hostname}`}startReporting(){this.intervalHandler||(this.intervalHandler=setInterval((()=>this.report().catch((e=>this.logger.error("Error while reporting metrics",e)))),h.REPORT_INTERVAL))}async report(){const e=await u.getMetricsAsJSON();u.resetMetrics();for(const t of e){if("grpc_client_msg_sent_total"===t.name||"grpc_client_msg_received_total"===t.name)continue;const e=t.type;"counter"===e?await this.reportCounter(t):"histogram"===e&&await this.reportHistogram(t)}}async reportCounter(e){const t=e;for(const{value:e,labels:r}of t.values)e>0&&await this.doAddCounter(t.name,r,e)}async reportHistogram(e){const t=e;let r=0,n=[];for(const{value:e,labels:o,metricName:s}of t.values)s.endsWith("_bucket")?"+Inf"!==o.le&&n.push(e):s.endsWith("_sum")?r=e:s.endsWith("_count")&&(e>0&&await this.doAddHistogram(t.name,o,e,r,n),r=0,n=[])}async doAddCounter(e,t,r){const n={name:e,labels:t,value:r},o=await fetch(`https://${this.metricsHost}/metrics-api/metrics/counter/add/${e}`,{method:"POST",headers:{"Content-Type":"application/json","X-Client":"vscode-desktop-extension"},body:JSON.stringify(n)});if(!o.ok)throw new Error(`Metrics endpoint responded with ${o.status} ${o.statusText}`)}async doAddHistogram(e,t,r,n,o){const s={name:e,labels:t,count:r,sum:n,buckets:o},i=await fetch(`https://${this.metricsHost}/metrics-api/metrics/histogram/add/${e}`,{method:"POST",headers:{"Content-Type":"application/json","X-Client":"vscode-desktop-extension"},body:JSON.stringify(s)});if(!i.ok)throw new Error(`Metrics endpoint responded with ${i.status} ${i.statusText}`)}stopReporting(){this.intervalHandler&&clearInterval(this.intervalHandler)}}t.MetricsReporter=h,h.REPORT_INTERVAL=6e4},14508:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionServiceDefinition=t.GetWorkspaceAuthInfoResponse=t.GetWorkspaceAuthInfoRequest=t.SendLocalSSHUserFlowStatusResponse=t.SendLocalSSHUserFlowStatusRequest=t.SendErrorReportResponse=t.SendErrorReportRequest=t.sendLocalSSHUserFlowStatusRequest_CodeToJSON=t.sendLocalSSHUserFlowStatusRequest_CodeFromJSON=t.SendLocalSSHUserFlowStatusRequest_Code=t.sendLocalSSHUserFlowStatusRequest_StatusToJSON=t.sendLocalSSHUserFlowStatusRequest_StatusFromJSON=t.SendLocalSSHUserFlowStatusRequest_Status=t.sendLocalSSHUserFlowStatusRequest_ConnTypeToJSON=t.sendLocalSSHUserFlowStatusRequest_ConnTypeFromJSON=t.SendLocalSSHUserFlowStatusRequest_ConnType=t.protobufPackage=void 0;const i=s(r(62100));var a,c,l;function u(e){switch(e){case 0:case"CONN_TYPE_UNSPECIFIED":return a.CONN_TYPE_UNSPECIFIED;case 1:case"CONN_TYPE_SSH":return a.CONN_TYPE_SSH;case 2:case"CONN_TYPE_TUNNEL":return a.CONN_TYPE_TUNNEL;default:return a.UNRECOGNIZED}}function d(e){switch(e){case a.CONN_TYPE_UNSPECIFIED:return"CONN_TYPE_UNSPECIFIED";case a.CONN_TYPE_SSH:return"CONN_TYPE_SSH";case a.CONN_TYPE_TUNNEL:return"CONN_TYPE_TUNNEL";case a.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function h(e){switch(e){case 0:case"STATUS_UNSPECIFIED":return c.STATUS_UNSPECIFIED;case 1:case"STATUS_SUCCESS":return c.STATUS_SUCCESS;case 2:case"STATUS_FAILURE":return c.STATUS_FAILURE;default:return c.UNRECOGNIZED}}function p(e){switch(e){case c.STATUS_UNSPECIFIED:return"STATUS_UNSPECIFIED";case c.STATUS_SUCCESS:return"STATUS_SUCCESS";case c.STATUS_FAILURE:return"STATUS_FAILURE";case c.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function f(e){switch(e){case 0:case"CODE_UNSPECIFIED":return l.CODE_UNSPECIFIED;case 1:case"CODE_NO_WORKSPACE_AUTO_INFO":return l.CODE_NO_WORKSPACE_AUTO_INFO;case 2:case"CODE_TUNNEL_CANNOT_CREATE_WEBSOCKET":return l.CODE_TUNNEL_CANNOT_CREATE_WEBSOCKET;case 3:case"CODE_TUNNEL_FAILED_FORWARD_SSH_PORT":return l.CODE_TUNNEL_FAILED_FORWARD_SSH_PORT;case 4:case"CODE_TUNNEL_NO_PRIVATEKEY":return l.CODE_TUNNEL_NO_PRIVATEKEY;case 5:case"CODE_TUNNEL_NO_ESTABLISHED_CONNECTION":return l.CODE_TUNNEL_NO_ESTABLISHED_CONNECTION;case 6:case"CODE_SSH_CANNOT_CONNECT":return l.CODE_SSH_CANNOT_CONNECT;default:return l.UNRECOGNIZED}}function g(e){switch(e){case l.CODE_UNSPECIFIED:return"CODE_UNSPECIFIED";case l.CODE_NO_WORKSPACE_AUTO_INFO:return"CODE_NO_WORKSPACE_AUTO_INFO";case l.CODE_TUNNEL_CANNOT_CREATE_WEBSOCKET:return"CODE_TUNNEL_CANNOT_CREATE_WEBSOCKET";case l.CODE_TUNNEL_FAILED_FORWARD_SSH_PORT:return"CODE_TUNNEL_FAILED_FORWARD_SSH_PORT";case l.CODE_TUNNEL_NO_PRIVATEKEY:return"CODE_TUNNEL_NO_PRIVATEKEY";case l.CODE_TUNNEL_NO_ESTABLISHED_CONNECTION:return"CODE_TUNNEL_NO_ESTABLISHED_CONNECTION";case l.CODE_SSH_CANNOT_CONNECT:return"CODE_SSH_CANNOT_CONNECT";case l.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function m(e){return null!=e}t.protobufPackage="ipc.v1",function(e){e[e.CONN_TYPE_UNSPECIFIED=0]="CONN_TYPE_UNSPECIFIED",e[e.CONN_TYPE_SSH=1]="CONN_TYPE_SSH",e[e.CONN_TYPE_TUNNEL=2]="CONN_TYPE_TUNNEL",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(a=t.SendLocalSSHUserFlowStatusRequest_ConnType||(t.SendLocalSSHUserFlowStatusRequest_ConnType={})),t.sendLocalSSHUserFlowStatusRequest_ConnTypeFromJSON=u,t.sendLocalSSHUserFlowStatusRequest_ConnTypeToJSON=d,function(e){e[e.STATUS_UNSPECIFIED=0]="STATUS_UNSPECIFIED",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_FAILURE=2]="STATUS_FAILURE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(c=t.SendLocalSSHUserFlowStatusRequest_Status||(t.SendLocalSSHUserFlowStatusRequest_Status={})),t.sendLocalSSHUserFlowStatusRequest_StatusFromJSON=h,t.sendLocalSSHUserFlowStatusRequest_StatusToJSON=p,function(e){e[e.CODE_UNSPECIFIED=0]="CODE_UNSPECIFIED",e[e.CODE_NO_WORKSPACE_AUTO_INFO=1]="CODE_NO_WORKSPACE_AUTO_INFO",e[e.CODE_TUNNEL_CANNOT_CREATE_WEBSOCKET=2]="CODE_TUNNEL_CANNOT_CREATE_WEBSOCKET",e[e.CODE_TUNNEL_FAILED_FORWARD_SSH_PORT=3]="CODE_TUNNEL_FAILED_FORWARD_SSH_PORT",e[e.CODE_TUNNEL_NO_PRIVATEKEY=4]="CODE_TUNNEL_NO_PRIVATEKEY",e[e.CODE_TUNNEL_NO_ESTABLISHED_CONNECTION=5]="CODE_TUNNEL_NO_ESTABLISHED_CONNECTION",e[e.CODE_SSH_CANNOT_CONNECT=6]="CODE_SSH_CANNOT_CONNECT",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(l=t.SendLocalSSHUserFlowStatusRequest_Code||(t.SendLocalSSHUserFlowStatusRequest_Code={})),t.sendLocalSSHUserFlowStatusRequest_CodeFromJSON=f,t.sendLocalSSHUserFlowStatusRequest_CodeToJSON=g,t.SendErrorReportRequest={encode:(e,t=i.Writer.create())=>(""!==e.workspaceId&&t.uint32(10).string(e.workspaceId),""!==e.instanceId&&t.uint32(18).string(e.instanceId),""!==e.errorName&&t.uint32(26).string(e.errorName),""!==e.errorMessage&&t.uint32(34).string(e.errorMessage),""!==e.errorStack&&t.uint32(42).string(e.errorStack),""!==e.daemonVersion&&t.uint32(50).string(e.daemonVersion),""!==e.extensionVersion&&t.uint32(58).string(e.extensionVersion),""!==e.gitpodHost&&t.uint32(66).string(e.gitpodHost),""!==e.userId&&t.uint32(74).string(e.userId),t),decode(e,t){const r=e instanceof i.Reader?e:new i.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={workspaceId:"",instanceId:"",errorName:"",errorMessage:"",errorStack:"",daemonVersion:"",extensionVersion:"",gitpodHost:"",userId:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.workspaceId=r.string();break;case 2:o.instanceId=r.string();break;case 3:o.errorName=r.string();break;case 4:o.errorMessage=r.string();break;case 5:o.errorStack=r.string();break;case 6:o.daemonVersion=r.string();break;case 7:o.extensionVersion=r.string();break;case 8:o.gitpodHost=r.string();break;case 9:o.userId=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({workspaceId:m(e.workspaceId)?String(e.workspaceId):"",instanceId:m(e.instanceId)?String(e.instanceId):"",errorName:m(e.errorName)?String(e.errorName):"",errorMessage:m(e.errorMessage)?String(e.errorMessage):"",errorStack:m(e.errorStack)?String(e.errorStack):"",daemonVersion:m(e.daemonVersion)?String(e.daemonVersion):"",extensionVersion:m(e.extensionVersion)?String(e.extensionVersion):"",gitpodHost:m(e.gitpodHost)?String(e.gitpodHost):"",userId:m(e.userId)?String(e.userId):""}),toJSON(e){const t={};return void 0!==e.workspaceId&&(t.workspaceId=e.workspaceId),void 0!==e.instanceId&&(t.instanceId=e.instanceId),void 0!==e.errorName&&(t.errorName=e.errorName),void 0!==e.errorMessage&&(t.errorMessage=e.errorMessage),void 0!==e.errorStack&&(t.errorStack=e.errorStack),void 0!==e.daemonVersion&&(t.daemonVersion=e.daemonVersion),void 0!==e.extensionVersion&&(t.extensionVersion=e.extensionVersion),void 0!==e.gitpodHost&&(t.gitpodHost=e.gitpodHost),void 0!==e.userId&&(t.userId=e.userId),t},create:e=>t.SendErrorReportRequest.fromPartial(e??{}),fromPartial(e){const t={workspaceId:"",instanceId:"",errorName:"",errorMessage:"",errorStack:"",daemonVersion:"",extensionVersion:"",gitpodHost:"",userId:""};return t.workspaceId=e.workspaceId??"",t.instanceId=e.instanceId??"",t.errorName=e.errorName??"",t.errorMessage=e.errorMessage??"",t.errorStack=e.errorStack??"",t.daemonVersion=e.daemonVersion??"",t.extensionVersion=e.extensionVersion??"",t.gitpodHost=e.gitpodHost??"",t.userId=e.userId??"",t}},t.SendErrorReportResponse={encode:(e,t=i.Writer.create())=>t,decode(e,t){const r=e instanceof i.Reader?e:new i.Reader(e);let n=void 0===t?r.len:r.pos+t;for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),create:e=>t.SendErrorReportResponse.fromPartial(e??{}),fromPartial:e=>({})},t.SendLocalSSHUserFlowStatusRequest={encode:(e,t=i.Writer.create())=>(0!==e.status&&t.uint32(8).int32(e.status),""!==e.workspaceId&&t.uint32(18).string(e.workspaceId),""!==e.instanceId&&t.uint32(26).string(e.instanceId),0!==e.failureCode&&t.uint32(40).int32(e.failureCode),""!==e.daemonVersion&&t.uint32(58).string(e.daemonVersion),0!==e.connType&&t.uint32(72).int32(e.connType),""!==e.gitpodHost&&t.uint32(82).string(e.gitpodHost),""!==e.userId&&t.uint32(90).string(e.userId),t),decode(e,t){const r=e instanceof i.Reader?e:new i.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={status:0,workspaceId:"",instanceId:"",failureCode:0,daemonVersion:"",connType:0,gitpodHost:"",userId:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.status=r.int32();break;case 2:o.workspaceId=r.string();break;case 3:o.instanceId=r.string();break;case 5:o.failureCode=r.int32();break;case 7:o.daemonVersion=r.string();break;case 9:o.connType=r.int32();break;case 10:o.gitpodHost=r.string();break;case 11:o.userId=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({status:m(e.status)?h(e.status):0,workspaceId:m(e.workspaceId)?String(e.workspaceId):"",instanceId:m(e.instanceId)?String(e.instanceId):"",failureCode:m(e.failureCode)?f(e.failureCode):0,daemonVersion:m(e.daemonVersion)?String(e.daemonVersion):"",connType:m(e.connType)?u(e.connType):0,gitpodHost:m(e.gitpodHost)?String(e.gitpodHost):"",userId:m(e.userId)?String(e.userId):""}),toJSON(e){const t={};return void 0!==e.status&&(t.status=p(e.status)),void 0!==e.workspaceId&&(t.workspaceId=e.workspaceId),void 0!==e.instanceId&&(t.instanceId=e.instanceId),void 0!==e.failureCode&&(t.failureCode=g(e.failureCode)),void 0!==e.daemonVersion&&(t.daemonVersion=e.daemonVersion),void 0!==e.connType&&(t.connType=d(e.connType)),void 0!==e.gitpodHost&&(t.gitpodHost=e.gitpodHost),void 0!==e.userId&&(t.userId=e.userId),t},create:e=>t.SendLocalSSHUserFlowStatusRequest.fromPartial(e??{}),fromPartial(e){const t={status:0,workspaceId:"",instanceId:"",failureCode:0,daemonVersion:"",connType:0,gitpodHost:"",userId:""};return t.status=e.status??0,t.workspaceId=e.workspaceId??"",t.instanceId=e.instanceId??"",t.failureCode=e.failureCode??0,t.daemonVersion=e.daemonVersion??"",t.connType=e.connType??0,t.gitpodHost=e.gitpodHost??"",t.userId=e.userId??"",t}},t.SendLocalSSHUserFlowStatusResponse={encode:(e,t=i.Writer.create())=>t,decode(e,t){const r=e instanceof i.Reader?e:new i.Reader(e);let n=void 0===t?r.len:r.pos+t;for(;r.pos<n;){const e=r.uint32();r.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),create:e=>t.SendLocalSSHUserFlowStatusResponse.fromPartial(e??{}),fromPartial:e=>({})},t.GetWorkspaceAuthInfoRequest={encode:(e,t=i.Writer.create())=>(""!==e.workspaceId&&t.uint32(10).string(e.workspaceId),""!==e.gitpodHost&&t.uint32(18).string(e.gitpodHost),t),decode(e,t){const r=e instanceof i.Reader?e:new i.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={workspaceId:"",gitpodHost:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.workspaceId=r.string();break;case 2:o.gitpodHost=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({workspaceId:m(e.workspaceId)?String(e.workspaceId):"",gitpodHost:m(e.gitpodHost)?String(e.gitpodHost):""}),toJSON(e){const t={};return void 0!==e.workspaceId&&(t.workspaceId=e.workspaceId),void 0!==e.gitpodHost&&(t.gitpodHost=e.gitpodHost),t},create:e=>t.GetWorkspaceAuthInfoRequest.fromPartial(e??{}),fromPartial(e){const t={workspaceId:"",gitpodHost:""};return t.workspaceId=e.workspaceId??"",t.gitpodHost=e.gitpodHost??"",t}},t.GetWorkspaceAuthInfoResponse={encode:(e,t=i.Writer.create())=>(""!==e.workspaceId&&t.uint32(10).string(e.workspaceId),""!==e.instanceId&&t.uint32(18).string(e.instanceId),""!==e.workspaceHost&&t.uint32(26).string(e.workspaceHost),""!==e.ownerToken&&t.uint32(34).string(e.ownerToken),""!==e.gitpodHost&&t.uint32(42).string(e.gitpodHost),""!==e.userId&&t.uint32(50).string(e.userId),""!==e.sshkey&&t.uint32(58).string(e.sshkey),t),decode(e,t){const r=e instanceof i.Reader?e:new i.Reader(e);let n=void 0===t?r.len:r.pos+t;const o={workspaceId:"",instanceId:"",workspaceHost:"",ownerToken:"",gitpodHost:"",userId:"",sshkey:""};for(;r.pos<n;){const e=r.uint32();switch(e>>>3){case 1:o.workspaceId=r.string();break;case 2:o.instanceId=r.string();break;case 3:o.workspaceHost=r.string();break;case 4:o.ownerToken=r.string();break;case 5:o.gitpodHost=r.string();break;case 6:o.userId=r.string();break;case 7:o.sshkey=r.string();break;default:r.skipType(7&e)}}return o},fromJSON:e=>({workspaceId:m(e.workspaceId)?String(e.workspaceId):"",instanceId:m(e.instanceId)?String(e.instanceId):"",workspaceHost:m(e.workspaceHost)?String(e.workspaceHost):"",ownerToken:m(e.ownerToken)?String(e.ownerToken):"",gitpodHost:m(e.gitpodHost)?String(e.gitpodHost):"",userId:m(e.userId)?String(e.userId):"",sshkey:m(e.sshkey)?String(e.sshkey):""}),toJSON(e){const t={};return void 0!==e.workspaceId&&(t.workspaceId=e.workspaceId),void 0!==e.instanceId&&(t.instanceId=e.instanceId),void 0!==e.workspaceHost&&(t.workspaceHost=e.workspaceHost),void 0!==e.ownerToken&&(t.ownerToken=e.ownerToken),void 0!==e.gitpodHost&&(t.gitpodHost=e.gitpodHost),void 0!==e.userId&&(t.userId=e.userId),void 0!==e.sshkey&&(t.sshkey=e.sshkey),t},create:e=>t.GetWorkspaceAuthInfoResponse.fromPartial(e??{}),fromPartial(e){const t={workspaceId:"",instanceId:"",workspaceHost:"",ownerToken:"",gitpodHost:"",userId:"",sshkey:""};return t.workspaceId=e.workspaceId??"",t.instanceId=e.instanceId??"",t.workspaceHost=e.workspaceHost??"",t.ownerToken=e.ownerToken??"",t.gitpodHost=e.gitpodHost??"",t.userId=e.userId??"",t.sshkey=e.sshkey??"",t}},t.ExtensionServiceDefinition={name:"ExtensionService",fullName:"ipc.v1.ExtensionService",methods:{getWorkspaceAuthInfo:{name:"GetWorkspaceAuthInfo",requestType:t.GetWorkspaceAuthInfoRequest,requestStream:!1,responseType:t.GetWorkspaceAuthInfoResponse,responseStream:!1,options:{}},sendLocalSSHUserFlowStatus:{name:"SendLocalSSHUserFlowStatus",requestType:t.SendLocalSSHUserFlowStatusRequest,requestStream:!1,responseType:t.SendLocalSSHUserFlowStatusResponse,responseStream:!1,options:{}},sendErrorReport:{name:"SendErrorReport",requestType:t.SendErrorReportRequest,requestStream:!1,responseType:t.SendErrorReportResponse,responseStream:!1,options:{}}}}},36591:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GitpodPublicApi=void 0;const i=r(62940),a=r(43342),c=r(17823),l=r(86711),u=r(19001),d=s(r(89496)),h=r(57460),p=r(22444),f=s(r(66636)),g=r(7888),m=r(52716);class y extends h.Disposable{constructor(e,t,r){super(),this.logger=r,this.workspaceStatusStreamMap=new Map;const n=new URL(t);n.hostname=`api.${n.hostname}`;const o=(0,m.getConnectMetricsInterceptor)(),s=(0,i.createConnectTransport)({baseUrl:n.toString(),httpVersion:"2",interceptors:[t=>async r=>(r.header.set("Authorization",`Bearer ${e}`),await t(r)),o],useBinaryFormat:!0});this.workspaceService=(0,a.createPromiseClient)(c.WorkspacesService,s),this.userService=(0,a.createPromiseClient)(u.UserService,s),this.ideClientService=(0,a.createPromiseClient)(l.IDEClientService,s),this.grpcWorkspaceClient=new p.WorkspacesServiceClient(`${n.hostname}:443`,f.credentials.createSsl(),{"grpc.keepalive_time_ms":12e4,interceptors:[(0,m.getGrpcMetricsInterceptor)()]}),this.grpcMetadata=new f.Metadata,this.grpcMetadata.add("Authorization",`Bearer ${e}`),this.metricsReporter=new m.MetricsReporter(t,r),(void 0!==d.env.isTelemetryEnabled?d.env.isTelemetryEnabled:d.workspace.getConfiguration("telemetry").get("enableTelemetry"))&&this.metricsReporter.startReporting()}async getWorkspace(e){return(await this.workspaceService.getWorkspace({workspaceId:e})).result}async getOwnerToken(e){return(await this.workspaceService.getOwnerToken({workspaceId:e})).token}async getSSHKeys(){return(await this.userService.listSSHKeys({})).keys}async sendHeartbeat(e){await this.ideClientService.sendHeartbeat({workspaceId:e})}async sendDidClose(e){await this.ideClientService.sendDidClose({workspaceId:e})}async getAuthenticatedUser(){return(await this.userService.getAuthenticatedUser({})).user}workspaceStatusStreaming(e){if(!this.workspaceStatusStreamMap.has(e)){const t=new d.EventEmitter;let r=0,n=!1;const o=async()=>{n||(clearTimeout(i),await(0,g.timeout)(1e3),n||([s,i]=this._streamWorkspaceStatus(e,t,o)))};let[s,i]=this._streamWorkspaceStatus(e,t,o);this.workspaceStatusStreamMap.set(e,{onStatusChanged:t.event,dispose:(o=!1)=>{n||!o&&--r>0||(n=!0,t.dispose(),clearTimeout(i),s.cancel(),this.workspaceStatusStreamMap.delete(e))},increment:()=>{++r}})}const{increment:t,...r}=this.workspaceStatusStreamMap.get(e);return t(),r}_streamWorkspaceStatus(e,t,r){const n=this.grpcWorkspaceClient.streamWorkspaceStatus({workspaceId:e},this.grpcMetadata);n.on("data",(e=>{t.fire(e.result)})),n.on("end",(()=>{this.logger.trace(`End streamWorkspaceStatus for ${e}`),r()})),n.on("error",(t=>{this.logger.trace(`Error in streamWorkspaceStatus for ${e}`,t)}));let o=setTimeout((()=>{this.logger.trace("streamWorkspaceStatus forcing cancel after 7 minutes"),n.cancel()}),42e4);return[n,o]}dispose(){super.dispose();for(const{dispose:e}of this.workspaceStatusStreamMap.values())e(!0);this.workspaceStatusStreamMap.clear(),this.metricsReporter.stopReporting()}}t.GitpodPublicApi=y},85747:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalSSHDomain=t.showWsNotRunningDialog=t.getGitpodRemoteWindowConnectionInfo=t.SSH_DEST_KEY=t.NoSSHGatewayError=t.NoRunningInstanceError=void 0;const i=s(r(89496));class a extends Error{constructor(e,t){super(`Failed to connect to ${e} Gitpod workspace, workspace not running: ${t}`),this.workspaceId=e,this.phase=t}}t.NoRunningInstanceError=a;class c extends Error{constructor(e){super(`SSH gateway not configured for this Gitpod Host ${e}`),this.host=e}}t.NoSSHGatewayError=c,t.SSH_DEST_KEY="ssh-dest:",t.getGitpodRemoteWindowConnectionInfo=function(e){const r=i.workspace.workspaceFile||i.workspace.workspaceFolders?.[0].uri;if("ssh-remote"===i.env.remoteName&&e.extension.extensionKind===i.ExtensionKind.UI&&r){const[,n]=r.authority.split("+"),o=e.globalState.get(`${t.SSH_DEST_KEY}${n}`);if(o)return{remoteAuthority:r.authority,connectionInfo:o}}},t.showWsNotRunningDialog=async function(e,t,r,n,o){const s=`Workspace ${e} is not running. Please restart the workspace.`;o.error(s);const a=new URL(t);a.pathname="/start",a.hash=e;const c="Restart workspace";await n.showErrorMessage(s,{id:"ws_not_running",flow:r,modal:!0},c)===c&&await i.env.openExternal(i.Uri.parse(a.toString()))&&i.commands.executeCommand("workbench.action.closeWindow")},t.getLocalSSHDomain=function(e){return(i.env.appName.includes("Insiders")?"vsi":"vss")+"."+new URL(e).hostname}},70264:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteConnector=void 0;const a=r(98994),c=r(65516),l=r(81143),u=r(44109),d=r(32036),h=s(r(32081)),p=s(r(57147)),f=s(r(13685)),g=s(r(6113)),m=r(29005),y=s(r(36276)),v=s(r(71017)),_=s(r(89496)),b=r(57460),S=r(19430),E=r(18191),w=r(29020),A=i(r(47083)),T=r(24311),C=r(79691),I=r(61039),R=r(19368),O=r(97400),k=i(r(8846)),N=r(85747),P=r(37892),M=r(72571);function L(e){if(e?.isCancellationRequested)throw new Error("cancelled")}const B="lock/";function D(e){return!!e&&"object"==typeof e}function x(e){try{return process.kill(e,0),!0}catch(e){return e}}class U extends Error{constructor(e,t){super(),this.logPath=t,this.name=e.name,this.message=e.message,this.stack=e.stack}}class j extends b.Disposable{constructor(e,t,r,n,o,s,i,a){super(),this.context=e,this.sessionService=t,this.hostService=r,this.experiments=n,this.logService=o,this.telemetryService=s,this.notificationService=i,this.localSSHService=a,this.usePublicApi=!1,this.releaseStaleLocks()}releaseStaleLocks(){const e=()=>{for(const e of this.context.globalState.keys())if(e.startsWith(B)){const t=this.context.globalState.get(e);if(!D(t)||Date.now()>=t.deadline||"number"==typeof t.pid&&!0!==x(t.pid)){const t=e.slice(0,B.length);this.logService.info(`cancel stale lock: ${t}`),this.context.globalState.update(e,void 0)}}};e();const t=setInterval(e,3e4);this._register(new _.Disposable((()=>clearInterval(t))))}async withLock(e,t,r,n){this.logService.info(`acquiring lock: ${e}`);const o=B+e,s=_.env.sessionId+"/"+j.LOCK_COUNT++;let i,a;for(;i?.value!==s;)i=this.context.globalState.get(o),i||(a=Date.now()+r+300,await this.context.globalState.update(o,{value:s,deadline:a,pid:process.pid})),await new Promise((e=>setTimeout(e,150))),i=this.context.globalState.get(o);this.logService.info(`acquired lock: ${e}`);const c=new _.CancellationTokenSource;n?.onCancellationRequested((()=>c.cancel()));let l=setInterval((()=>{i=this.context.globalState.get(o),i?.value!==s&&c.cancel()}),150);try{return await t(c.token)}finally{l&&clearTimeout(l),this.logService.info(`released lock: ${e}`),await this.context.globalState.update(o,void 0)}}downloadLocalApp(e){let t=_.Uri.parse(e),r="";return"arm64"===process.arch&&(r="-arm64"),"x32"===process.arch&&"win32"===process.platform&&(r="-386"),t="win32"===process.platform?t.with({path:`/static/bin/gitpod-local-companion-windows${r}.exe`}):"darwin"===process.platform?t.with({path:`/static/bin/gitpod-local-companion-darwin${r}`}):t.with({path:`/static/bin/gitpod-local-companion-linux${r}`}),this.logService.info(`fetching the local app from ${t.toString()}`),fetch(t.toString())}async installLocalApp(e,t){try{const r="win32"===process.platform?".exe":void 0,n=await new Promise(((e,t)=>y.file({prefix:"gitpod-local-companion",postfix:r,keep:!0,discardDescriptor:!0},((r,n)=>r?t(r):e(n)))));L(t),this.logService.info(`installing the local app to ${n}`);const o=p.createWriteStream(n),s=t.onCancellationRequested((()=>o.destroy(new Error("cancelled"))));await new Promise(((t,r)=>{e.body.pipe(o).on("error",r).on("finish",t)})).finally((()=>{s.dispose(),o.destroy()})),L(t),"win32"!==process.platform&&(await p.promises.chmod(n,"755"),L(t));const i={path:n,etag:e.headers.get("etag")};return this.logService.info(`installing the local app: ${JSON.stringify(i,void 0,2)}`),i}catch(e){throw this.logService.error(`failed to install the local app: ${e}`),e}}async startLocalApp(e,t,r){try{const[n,o]=await Promise.all([new Promise(((e,t)=>y.file({prefix:"gitpod_ssh_config",keep:!0,discardDescriptor:!0},((r,n)=>r?t(r):e(n))))),new Promise((e=>{const t=f.createServer();t.listen(0,"localhost",(()=>{e(t.address().port),t.close()}))}))]);L(r),this.logService.info(`starting the local app with the config: ${JSON.stringify({gitpodHost:e,configFile:_.Uri.file(n).toString(),apiPort:o},void 0,2)}`);const s=v.parse(t.path),i=v.join(s.dir,s.name)+".log",a=p.createWriteStream(i),c=r.onCancellationRequested((()=>a.destroy(new Error("cancelled"))));await new Promise(((e,t)=>{a.on("error",t),a.on("open",e)})).finally((()=>{c.dispose()}));const l=h.spawn(t.path,{detached:!0,stdio:["ignore",a,a],env:{...process.env,GITPOD_HOST:e,GITPOD_LCA_SSH_CONFIG:n,GITPOD_LCA_API_PORT:String(o),GITPOD_LCA_AUTO_TUNNEL:String(!1),GITPOD_LCA_AUTH_REDIRECT_URL:`${_.env.uriScheme}://${this.context.extension.id}${j.AUTH_COMPLETE_PATH}`,GITPOD_LCA_VERBOSE:String(_.workspace.getConfiguration("gitpod").get("verbose",!1)),GITPOD_LCA_TIMEOUT:String(_.workspace.getConfiguration("gitpod").get("timeout","3h"))}});l.unref();const u=r.onCancellationRequested((()=>l.kill())),d=await new Promise(((e,t)=>{l.on("error",t),l.on("exit",(e=>t(new Error("unexpectedly exit with code: "+e)))),l.on("spawn",(()=>e(l.pid)))})).finally((()=>{u.dispose()}));return this.logService.info(`the local app has been stared: ${JSON.stringify({pid:d,log:_.Uri.file(i).toString()},void 0,2)}`),{gitpodHost:e,configFile:n,apiPort:o,pid:d,logPath:i}}catch(e){throw this.logService.error(`failed to start the local app: ${e}`),e}}async ensureLocalApp(e,t,r,n){let o=this.context.globalState.get(t),s=this.context.globalState.get(r);o&&!0!==x(o?.pid)&&(o=void 0);const i=_.workspace.getConfiguration("gitpod").get("installationPath");if(i){if(s&&s.path!==i){if(this.logService.info(`the local app is different from configured, switching: ${JSON.stringify({installed:s.path,configured:i},void 0,2)}`),s=void 0,o)try{process.kill(o.pid)}catch(e){this.logService.error(`failed to kill the outdated local app (pid: ${o.pid}): ${e}`)}o=void 0}if(o)return o;await p.promises.access(i,p.constants.X_OK),L(n),s={path:i,etag:null},await this.context.globalState.update(r,s),L(n)}else{let t;try{t=await this.downloadLocalApp(e),L(n),t.ok||(t=new Error(`unexpected download response ${t.statusText} (${t.status})`))}catch(e){t=e}if(s){const e=!(t instanceof Error)&&{etag:t.headers.get("etag"),url:t.url};if(e&&e.etag&&e.etag!==s.etag){if(this.logService.info(`the local app is outdated, upgrading: ${JSON.stringify({installation:s,upgrade:e},void 0,2)}`),s=void 0,o)try{process.kill(o.pid)}catch(e){this.logService.error(`failed to kill the outdated local app (pid: ${o.pid}): ${e}`)}o=void 0}}if(o)return o;if(s){try{await p.promises.access(s.path,p.constants.X_OK)}catch{s=void 0}L(n)}if(!s){if(t instanceof Error)throw t;s=await this.installLocalApp(t,n),await this.context.globalState.update(r,s),L(n)}}return o=await this.startLocalApp(e,s,n),await this.context.globalState.update(t,o),L(n),o}async withLocalApp(e,t,r){const n=_.Uri.parse(e).authority,o="config/"+n,s="installation/"+n,i=await this.withLock(n,(t=>this.ensureLocalApp(e,o,s,t)),3e5,r);for(L(r);;){const e=new c.LocalAppClient("http://localhost:"+i.apiPort,{transport:(0,l.NodeHttpTransport)()});try{const n=await t(e,i);return L(r),n}catch(e){L(r);const t=x(i.pid);if(!0===t&&(e.code===u.grpc.Code.Unavailable||e.code===u.grpc.Code.Unknown)){this.logService.info(`the local app (pid: ${i.pid}) is running, but the api endpoint is not ready: ${e}`),this.logService.info("retying again after 1s delay..."),await new Promise((e=>setTimeout(e,1e3))),L(r);continue}throw!0!==t&&this.logService.info(`the local app (pid: ${i.pid}) is not running: ${t}`),this.logService.error(`failed to access the local app: ${e}`),e}}}async getWorkspaceSSHDestination({workspaceId:e,gitpodHost:t,debugWorkspace:r}){const n=this.sessionService.getScopes().includes(w.ScopeFeature.SSHPublicKeys),[o,s,i]=await(0,S.withServerApi)(this.sessionService.getGitpodToken(),(0,M.getServiceURL)(t),(t=>Promise.all([this.usePublicApi?this.sessionService.getAPI().getWorkspace(e):t.server.getWorkspace(e),this.usePublicApi?this.sessionService.getAPI().getOwnerToken(e):t.server.getOwnerToken(e),n?this.usePublicApi?this.sessionService.getAPI().getSSHKeys():t.server.getSSHPublicKeys():void 0])),this.logService);if(this.usePublicApi?!o?.status?.instance||o?.status?.instance?.status?.phase===d.WorkspaceInstanceStatus_Phase.STOPPING||o?.status?.instance?.status?.phase===d.WorkspaceInstanceStatus_Phase.STOPPED:!o.latestInstance||"stopping"===o.latestInstance?.status?.phase||"stopped"===o.latestInstance?.status?.phase)throw new N.NoRunningInstanceError(e,this.usePublicApi?o?.status?.instance?.status?.phase?d.WorkspaceInstanceStatus_Phase[o?.status?.instance?.status?.phase]:void 0:o.latestInstance?.status?.phase);const a=this.usePublicApi?new URL(o.status.instance.status.url):new URL(o.latestInstance.ideUrl),c=`https://${a.host}/_ssh/host_keys`,l=await fetch(c);if(!l.ok)throw new N.NoSSHGatewayError(t);const u=await l.json();let h=e,p=a.host.replace(e,`${e}.ssh`);r&&(h="debug-"+e,p=p.replace(e,h));const f=await A.default.loadFromFS(),y=await(0,I.testSSHConnection)({host:p,username:h,readyTimeout:4e4,password:s},u,f,this.logService);try{const e=m.utils.parseKey(y);if(e instanceof Error)throw e;const t=Array.isArray(e)?e[0]:e;t&&await(0,E.checkNewHostInHostkeys)(p)&&(await(0,E.addHostToHostFile)(p,y,t.type),this.logService.info(`'${p}' host added to known_hosts file`))}catch(e){this.logService.error(`Couldn't write '${p}' host to known_hosts file:`,e)}const v=f.getHostConfiguration(p),_=v.IdentityFile||[];let b=await(0,R.gatherIdentityFiles)(_,(0,I.getAgentSock)(v),!1,this.logService);if(i){const e=this.usePublicApi?i.map((e=>{const t=m.utils.parseKey(e.key);if(t instanceof Error||!t)return this.logService.error(`Error while parsing SSH public key ${e.name}:`,t),{name:e.name,fingerprint:""};const r=t;return{name:e.name,fingerprint:g.createHash("sha256").update(r.getPublicSSH()).digest("base64")}})):i.map((e=>({name:e.name,fingerprint:e.fingerprint})));this.logService.trace("Registered public keys in Gitpod account:",e.length?e.map((e=>`${e.name} SHA256:${e.fingerprint}`)).join("\n"):"None"),b=b.filter((t=>!!e.find((e=>e.fingerprint===t.fingerprint))))}else{b.length&&(h=`${h}#${s}`);const e=await this.hostService.getVersion();this.logService.warn(`Registered SSH public keys not supported in ${t}, using version ${e.raw}`)}return{destination:new k.default(p,h),password:0===b.length?s:void 0}}async getLocalSSHWorkspaceSSHDestination({workspaceId:e,gitpodHost:t,debugWorkspace:r}){const n=await(0,S.withServerApi)(this.sessionService.getGitpodToken(),(0,M.getServiceURL)(t),(async t=>this.usePublicApi?this.sessionService.getAPI().getWorkspace(e):t.server.getWorkspace(e)),this.logService);if(this.usePublicApi?!n?.status?.instance||n?.status?.instance?.status?.phase===d.WorkspaceInstanceStatus_Phase.STOPPING||n?.status?.instance?.status?.phase===d.WorkspaceInstanceStatus_Phase.STOPPED:!n.latestInstance||"stopping"===n.latestInstance?.status?.phase||"stopped"===n.latestInstance?.status?.phase)throw new N.NoRunningInstanceError(e,this.usePublicApi?n?.status?.instance?.status?.phase?d.WorkspaceInstanceStatus_Phase[n?.status?.instance?.status?.phase]:void 0:n.latestInstance?.status?.phase);const o=(0,N.getLocalSSHDomain)(t),s=`${e}.${o}`,i=r?"debug-"+e:e;return this.logService.info("connecting with local ssh destination",{domain:o}),{destination:new k.default(s,i),password:""}}async getWorkspaceLocalAppSSHDestination(e){return _.window.withProgress({location:_.ProgressLocation.Notification,cancellable:!0,title:`Connecting to ${e.workspaceId} Gitpod workspace`},(async(t,r)=>{let n;try{const t=await this.withLocalApp(e.gitpodHost,((t,r)=>{n=r.logPath;const o=new a.ResolveSSHConnectionRequest;return o.setInstanceId(e.instanceId),o.setWorkspaceId(e.workspaceId),new Promise(((e,r)=>t.resolveSSHConnection(o,((t,n)=>n?e(n):r(t)))))}),r);return{destination:new k.default(t.getHost()),localAppSSHConfigPath:t.getConfigFile()}}catch(e){if(e instanceof Error&&"cancelled"===e.message)throw e;throw new U(e,n)}}))}async updateRemoteSSHConfig(e,t){const r=_.workspace.getConfiguration("remote.SSH"),n=r.inspect("defaultExtensions")?.globalValue??[];n.includes("gitpod.gitpod-remote-ssh")||(n.unshift("gitpod.gitpod-remote-ssh"),await r.update("defaultExtensions",n,_.ConfigurationTarget.Global));const o=r.get("configFile");e?o?.includes("gitpod_ssh_config")&&await r.update("configFile",void 0,_.ConfigurationTarget.Global):(o===t&&await r.update("configFile",void 0,_.ConfigurationTarget.Global),await r.update("configFile",t,_.ConfigurationTarget.Global))}async ensureRemoteSSHExtInstalled(e){if(_.extensions.getExtension("ms-vscode-remote.remote-ssh"))return!0;const t="Cancel";return await this.notificationService.showInformationMessage('Please install "Remote - SSH" extension to connect to a Gitpod workspace.',{id:"install_remote_ssh",flow:e},"Install",t)!==t&&(this.logService.info('Installing "ms-vscode-remote.remote-ssh" extension'),await _.commands.executeCommand("extension.open","ms-vscode-remote.remote-ssh"),await _.commands.executeCommand("workbench.extensions.installExtension","ms-vscode-remote.remote-ssh"),!0)}async showSSHPasswordModal(e,t){const r="•".repeat(e.length-3)+e.substring(e.length-3),n=this.sessionService.getScopes().includes(w.ScopeFeature.SSHPublicKeys),o={title:"Copy"},s={title:"Configure SSH"},i=n?`You don't have registered any SSH public key for this machine in your Gitpod account.\nAlternatively, copy and use this temporary password until workspace restart: ${r}`:`An SSH key is required for passwordless authentication.\nAlternatively, copy and use this password: ${r}`,a=await this.notificationService.showWarningMessage(i,{flow:t,modal:!0,id:"ssh_gateway_modal"},o,s,{title:"Show logs",isCloseAffordance:!0});if(a===o)return void await _.env.clipboard.writeText(e);const c=(0,M.getServiceURL)(t.gitpodHost),l=n?`${c}/keys`:"https://www.gitpod.io/docs/configure/ssh#create-an-ssh-key";if(a===s)throw await _.env.openExternal(_.Uri.parse(l)),new Error("SSH password modal dialog, Configure SSH");const u=n?`Configure your SSH keys in ${l} and try again. Or try again and select 'Copy' to connect using a temporary password until workspace restart`:`Create an SSH key (${l}) and try again. Or try again and select 'Copy' to connect using a temporary password until workspace restart`;throw this.logService.info(u),this.logService.show(),new Error("SSH password modal dialog, Canceled")}async handleUri(e){if(e.path===j.AUTH_COMPLETE_PATH)return void this.logService.info("auth completed");const t=JSON.parse(e.query),r={...t,flow:"ssh"};if(!await this.ensureRemoteSSHExtInstalled(r))return;if(await this.sessionService.signIn(t.gitpodHost),!this.sessionService.isSignedIn())return;r.userId=this.sessionService.getUserId(),r.gitpodVersion=(await this.hostService.getVersion()).raw,this.logService.info("Opening Gitpod workspace",e.toString());const n=await _.window.withProgress({title:`Connecting to ${t.workspaceId}`,location:_.ProgressLocation.Notification},(async()=>{this.usePublicApi=await this.experiments.getUsePublicAPI(t.gitpodHost),this.logService.info(`Going to use ${this.usePublicApi?"public":"server"} API`);let e=await this.experiments.getUseLocalSSHServer(t.gitpodHost);e&&(await this.localSSHService.initialized,this.localSSHService.isSupportLocalSSH||(this.logService.error("Local SSH is not supported on this platform"),e=!1)),e&&this.logService.info("Going to use lssh");const n=P.Configuration.getUseLocalApp(e),o=String((0,T.isUserOverrideSetting)("gitpod.remote.useLocalApp"));let s;if(!n){const n={kind:e?"local-ssh":"gateway",openSSHVersion:await(0,C.getOpenSSHVersion)(),userOverride:o,...r};try{this.telemetryService.sendUserFlowStatus("connecting",n);const{destination:r,password:o}=e?await this.getLocalSSHWorkspaceSSHDestination(t):await this.getWorkspaceSSHDestination(t);s=r,Object.assign(n,{auth:o?"password":"key"}),o&&await this.showSSHPasswordModal(o,n),this.telemetryService.sendUserFlowStatus("connected",n)}catch(e){if(this.telemetryService.sendUserFlowStatus("failed",{...n,reason:e.toString()}),e instanceof N.NoSSHGatewayError){this.logService.error("No SSH gateway:",e);const t="OK";await this.notificationService.showWarningMessage(`${e.host} does not support [direct SSH access](https://github.com/gitpod-io/gitpod/blob/main/install/installer/docs/workspace-ssh-access.md), connecting via the deprecated SSH tunnel over WebSocket.`,{flow:n,id:"no_ssh_gateway"},t)}else{if(!(e instanceof I.SSHError&&"Timed out while waiting for handshake"===e.message)){if(e instanceof N.NoRunningInstanceError)return this.logService.error("No Running instance:",e),n.phase=e.phase,void this.notificationService.showErrorMessage(`Failed to connect to ${e.workspaceId} Gitpod workspace: workspace not running`,{flow:n,id:"no_running_instance"});{e instanceof I.SSHError?this.logService.error("SSH test connection error:",e):this.logService.error(`Failed to connect to ${t.workspaceId} Gitpod workspace:`,e);const r="See Logs",o="Show Troubleshooting";return void this.notificationService.showErrorMessage(`Failed to connect to ${t.workspaceId} Gitpod workspace`,{flow:n,id:"failed_to_connect"},r,o).then((e=>{e===r?this.logService.show():e===o&&_.env.openExternal(_.Uri.parse("https://www.gitpod.io/docs/ides-and-editors/vscode#connecting-to-vs-code-desktop-ssh"))}))}}{this.logService.error("SSH test connection error:",e);const t="OK";await this.notificationService.showWarningMessage("Timed out while waiting for the SSH handshake. It's possible, that SSH connections on port 22 are blocked, or your network is too slow. Connecting via the deprecated SSH tunnel over WebSocket instead.",{flow:n,id:"ssh_timeout"},t)}}}}const i=!!s;let a;if(!i&&!t.debugWorkspace){const e={kind:"local-app",userOverride:o,...r};try{this.telemetryService.sendUserFlowStatus("connecting",e);const r=await this.getWorkspaceLocalAppSSHDestination(t);s=r.destination,a=r.localAppSSHConfigPath,this.telemetryService.sendUserFlowStatus("connected",e)}catch(r){if(this.telemetryService.sendUserFlowStatus("failed",{reason:r.toString(),...e}),this.logService.error(`Failed to connect ${t.workspaceId} Gitpod workspace:`,r),r instanceof U){const n="See Logs",o="Show Troubleshooting";this.notificationService.showErrorMessage(`Failed to connect to ${t.workspaceId} Gitpod workspace`,{flow:e,id:"failed_to_connect"},n,o).then((e=>{e===n?(this.logService.show(),r.logPath&&_.workspace.openTextDocument(_.Uri.file(r.logPath)).then((e=>_.window.showTextDocument(e)))):e===o&&_.env.openExternal(_.Uri.parse("https://www.gitpod.io/docs/ides-and-editors/vscode#connecting-to-vs-code-desktop-ssh"))}))}return}}if(await this.updateRemoteSSHConfig(i,a),await this.context.globalState.update(`${N.SSH_DEST_KEY}${s.toRemoteSSHString()}`,{...t}),O.isWindows){const e=_.workspace.getConfiguration("remote.SSH").get("remotePlatform",{});e[s.hostname]||await _.workspace.getConfiguration("remote.SSH").update("remotePlatform",{...e,[s.hostname]:"linux"},_.ConfigurationTarget.Global)}return s}));if(!n)return;const o=!(this.context.extensionMode!==_.ExtensionMode.Production||!_.env.remoteName&&!_.workspace.workspaceFile&&!_.workspace.workspaceFolders&&!_.window.visibleTextEditors.length&&!_.window.visibleNotebookEditors.length);_.commands.executeCommand("vscode.openFolder",_.Uri.parse(`vscode-remote://ssh-remote+${n.toRemoteSSHString()}${e.path||"/"}`),{forceNewWindow:o})}async autoTunnelCommand(e,t,r){if(this.sessionService.isSignedIn()&&!P.Configuration.getUseLocalApp(await this.experiments.getUseLocalSSHServer(e))){const t=`config/${_.Uri.parse(e).authority}`,r=this.context.globalState.get(t);if(!r||!0!==x(r.pid))return}try{await this.withLocalApp(e,(e=>{const n=new a.AutoTunnelRequest;return n.setInstanceId(t),n.setEnabled(r),new Promise(((t,r)=>e.autoTunnel(n,((e,n)=>n?t(void 0):r(e)))))}))}catch(e){this.logService.error("Failed to disable auto tunneling:",e)}}}t.RemoteConnector=j,j.AUTH_COMPLETE_PATH="/auth-complete",j.LOCK_COUNT=0},75797:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteSession=void 0;const i=s(r(89496)),a=r(17593),c=r(85747),l=r(57460),u=r(81013),d=r(45158),h=r(31337),p=r(7888),f=r(19430),g=r(29020),m=r(18882);class y extends l.Disposable{constructor(e,t,r,n,o,s,i,a,c,l){super(),this.remoteAuthority=e,this.connectionInfo=t,this.context=r,this.hostService=n,this.sessionService=o,this.settingsSync=s,this.experiments=i,this.logService=a,this.telemetryService=c,this.notificationService=l,this.usePublicApi=!1,this._register(this.sessionService.onDidChangeSession((()=>{this.sessionService.isSignedIn()?new URL(this.hostService.gitpodHost).host!==new URL(t.gitpodHost).host&&this.showRevertGitpodHostDialog():this.showSignInDialog()})))}async initialize(){if(this.logService.info("On remote window, RemoteSession initializing"),this.sessionService.isSignedIn())try{await this.experiments.getUseLocalSSHServer(this.connectionInfo.gitpodHost)&&(this.extensionServiceServer=new m.ExtensionServiceServer(this.logService,this.sessionService,this.hostService,this.telemetryService,this.experiments)),this.usePublicApi=await this.experiments.getUsePublicAPI(this.connectionInfo.gitpodHost),this.logService.info(`Going to use ${this.usePublicApi?"public":"server"} API`);const e=await(0,f.withServerApi)(this.sessionService.getGitpodToken(),this.connectionInfo.gitpodHost,(e=>e.server.getWorkspace(this.connectionInfo.workspaceId)),this.logService);if(!e.latestInstance||"stopping"===e.latestInstance?.status?.phase||"stopped"===e.latestInstance?.status?.phase)throw new c.NoRunningInstanceError(this.connectionInfo.workspaceId,e.latestInstance?.status?.phase);e.latestInstance.id!==this.connectionInfo.instanceId&&(this.logService.info(`Updating workspace ${this.connectionInfo.workspaceId} latest instance id ${this.connectionInfo.instanceId} => ${e.latestInstance.id}`),this.connectionInfo.instanceId=e.latestInstance.id);const[,t]=this.remoteAuthority.split("+");await this.context.globalState.update(`${c.SSH_DEST_KEY}${t}`,{...this.connectionInfo});const r=await this.hostService.getVersion();this.usePublicApi&&(this.workspaceState=new d.WorkspaceState(this.connectionInfo.workspaceId,this.sessionService,this.logService),await this.workspaceState.initialize(),this._register(this.workspaceState.onWorkspaceStopped((async()=>{const e={...this.connectionInfo,userId:this.sessionService.getUserId(),flow:"remote_window",phase:"stopped"};(0,c.showWsNotRunningDialog)(this.connectionInfo.workspaceId,this.connectionInfo.gitpodHost,e,this.notificationService,this.logService)})))),this.sessionService.getScopes().includes(g.ScopeFeature.LocalHeartbeat)?this.heartbeatManager=new u.HeartbeatManager(this.connectionInfo,this.workspaceState,this.sessionService,this.logService,this.telemetryService):this.logService.error(`Local heartbeat not supported in ${this.connectionInfo.gitpodHost}, using version ${r.raw}`);const n={...this.connectionInfo,gitpodVersion:r.raw,userId:this.sessionService.getUserId(),flow:"sync_local_extensions"};this.initializeRemoteExtensions({...n,quiet:!0,flowId:(0,a.v4)()}),this.context.subscriptions.push(i.commands.registerCommand("gitpod.installLocalExtensions",(()=>{this.initializeRemoteExtensions({...n,quiet:!1,flowId:(0,a.v4)()})}))),i.commands.executeCommand("setContext","gitpod.inWorkspace",!0)}catch(e){const t={...this.connectionInfo,userId:this.sessionService.getUserId(),flow:"remote_window"};if(e instanceof c.NoRunningInstanceError)return t.phase=e.phase,void(0,c.showWsNotRunningDialog)(this.connectionInfo.workspaceId,this.connectionInfo.gitpodHost,t,this.notificationService,this.logService);e.message=`Failed to resolve whole gitpod remote connection process: ${e.message}`,this.logService.error(e),this.telemetryService.sendTelemetryException(this.connectionInfo.gitpodHost,e,{workspaceId:this.connectionInfo.workspaceId,instanceId:this.connectionInfo.instanceId,userId:this.sessionService.getUserId()}),this.logService.show();const r="Retry";await this.notificationService.showErrorMessage("Failed to resolve connection to Gitpod workspace: workspace could stop unexpectedly",{flow:t,id:"unexpected_error"},r)===r&&this.initialize()}else this.showSignInDialog()}async initializeRemoteExtensions(e){let t;this.telemetryService.sendUserFlowStatus("enabled",e);try{t=await this.settingsSync.readResource("extensions")}catch(t){if(t instanceof h.NoSyncStoreError){const t="Could not install local extensions on remote workspace. Please enable [Settings Sync](https://www.gitpod.io/docs/ides-and-editors/settings-sync#enabling-settings-sync-in-vs-code-desktop) with Gitpod.";this.logService.error(t);const r="no_sync_store";if(e.quiet)this.telemetryService.sendUserFlowStatus(r,e);else{const n="Settings Sync: Enable Sign In with Gitpod";await this.notificationService.showInformationMessage(t,{flow:e,id:r},n)===n&&i.commands.executeCommand("gitpod.syncProvider.add")}}else if(t instanceof h.NoSettingsSyncSession){const t="Could not install local extensions on remote workspace. Please enable [Settings Sync](https://www.gitpod.io/docs/ides-and-editors/settings-sync#enabling-settings-sync-in-vs-code-desktop) with Gitpod.";this.logService.error(t);const r="no_settings_sync";if(e.quiet)this.telemetryService.sendUserFlowStatus(r,e);else{const n="Enable Settings Sync";await this.notificationService.showInformationMessage(t,{flow:e,id:r},n)===n&&i.commands.executeCommand("workbench.userDataSync.actions.turnOn")}}else{this.logService.error("Error while fetching settings sync extension data:",t);const r="failed_to_fetch";if(e.quiet)this.telemetryService.sendUserFlowStatus(r,e);else{const t="See Logs";await this.notificationService.showErrorMessage("Error while fetching settings sync extension data.",{flow:e,id:r},t)===t&&this.logService.show()}}return}const r=(0,h.parseSyncData)(t.content);if(!r){const t="Error while parsing settings sync extension data.";this.logService.error(t);const r="failed_to_parse_content";return void(e.quiet?this.telemetryService.sendUserFlowStatus(r,e):await this.notificationService.showErrorMessage(t,{flow:e,id:r}))}let n;try{n=JSON.parse(r.content)}catch{const t="Error while parsing settings sync extension data, malformed JSON.";this.logService.error(t);const r="failed_to_parse_json";return void(e.quiet?this.telemetryService.sendUserFlowStatus(r,e):await this.notificationService.showErrorMessage(t,{flow:e,id:r}))}if(n=n.filter((e=>e.installed)),e.extensions=n.length,n.length)try{try{this.logService.trace("Installing local extensions on remote: ",n.map((e=>e.identifier.id)).join("\n")),await(0,p.retry)((async()=>{await i.commands.executeCommand("__gitpod.initializeRemoteExtensions",n)}),3e3,15)}catch(e){throw this.logService.error("Could not execute '__gitpod.initializeRemoteExtensions' command"),e}this.telemetryService.sendUserFlowStatus("synced",e)}catch{const t="Error while installing local extensions on remote.";this.logService.error(t);const r="failed";if(e.quiet)this.telemetryService.sendUserFlowStatus(r,e);else{const n="See Logs";await this.notificationService.showErrorMessage(t,{flow:e,id:r},n)===n&&this.logService.show()}}else this.telemetryService.sendUserFlowStatus("synced",e)}async showRevertGitpodHostDialog(){const e={...this.connectionInfo,flow:"remote_session"},t="Revert change";await this.notificationService.showErrorMessage("Cannot change 'gitpod.host' setting while connected to a remote workspace",{id:"switch_gitpod_host_remote",flow:e,modal:!0},t)===t&&await this.hostService.changeHost(this.connectionInfo.gitpodHost,!0)}showSignInDialog(){this.notificationService.showErrorMessage("You are not signed in with a Gitpod account, please sign in first.",{flow:{flow:"remote_window",gitpodHost:this.connectionInfo.gitpodHost},id:"not_signed_in",modal:!0})}async dispose(){await(this.heartbeatManager?.dispose()),this.workspaceState?.dispose(),this.extensionServiceServer?.dispose(),super.dispose()}}t.RemoteSession=y},95591:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.HostService=void 0;const i=s(r(89496)),a=r(57460),c=r(29020),l=r(85747),u=r(37892);class d extends a.Disposable{constructor(e,t,r){super(),this.context=e,this.notificationService=t,this.logService=r,this._onDidChangeHost=this._register(new i.EventEmitter),this.onDidChangeHost=this._onDidChangeHost.event,this._gitpodHost=u.Configuration.getGitpodHost(),this._register(i.workspace.onDidChangeConfiguration((e=>{if(e.affectsConfiguration("gitpod.host")){const e=u.Configuration.getGitpodHost();new URL(this._gitpodHost).host!==new URL(e).host&&(this._gitpodHost=e,this._version=void 0,this._onDidChangeHost.fire())}})))}get gitpodHost(){return this._gitpodHost}async changeHost(e,t=!1){if(new URL(this._gitpodHost).host!==new URL(e).host){const r={flow:"changeHost",gitpodHost:e};if(!t&&(0,l.getGitpodRemoteWindowConnectionInfo)(this.context))return this.notificationService.showWarningMessage(`Cannot to swith to '${e}' while connected to '${this._gitpodHost}'. Please close the window first`,{id:"switch_gitpod_host_remote_window",flow:r}),!1;const n="Yes",o="Cancel";if(await this.notificationService.showInformationMessage(`Would you like to change your Gitpod host from '${this._gitpodHost}' to '${e}' and continue?`,{id:"switch_gitpod_host",flow:r},n,o)===o)return!1;await i.workspace.getConfiguration("gitpod").update("host",e,i.ConfigurationTarget.Global),this.logService.info(`Updated 'gitpod.host' setting to '${e}'`)}return!0}async getVersion(){return this._version||(this._version=await(0,c.getGitpodVersion)(this._gitpodHost,this.logService)),this._version}}t.HostService=d},11779:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LocalSSHService=void 0;const a=s(r(89496)),c=i(r(73292)),l=r(57460),u=r(37892),d=i(r(47083)),h=r(97400),p=r(85747);class f extends l.Disposable{constructor(e,t,r){super(),this.context=e,this.hostService=t,this.logService=r,this.isSupportLocalSSH=!1,this.initialized=this.initialize(),this._register(a.workspace.onDidChangeConfiguration((async e=>{if(e.affectsConfiguration("gitpod.lsshExtensionIpcPort")||e.affectsConfiguration("gitpod.host")||e.affectsConfiguration("remote.SSH.configFile")){if(e.affectsConfiguration("[javascript]")&&e.affectsConfiguration("[markdown]"))return;this.initialize()}})))}async initialize(){if(this.context.extensionMode===a.ExtensionMode.Production)try{const e=await this.copyProxyScript();await this.configureSettings(e),this.isSupportLocalSSH=!0}catch(e){this.logService.error(e,"failed to copy local ssh client.js"),this.isSupportLocalSSH=!1}else this.isSupportLocalSSH=!0}async configureSettings({proxyScript:e,launcher:t}){const r=u.Configuration.getLocalSshExtensionIpcPort(),n=this.getHostSSHConfig(this.hostService.gitpodHost,t,e,r);await d.default.ensureIncludeGitpodSSHConfig();const o=await d.default.loadGitpodSSHConfig();o.addHostConfiguration(n),await d.default.saveGitpodSSHConfig(o)}getHostSSHConfig(e,t,r,n){return{Host:"*."+(0,p.getLocalSSHDomain)(e),StrictHostKeyChecking:"no",ProxyCommand:`"${t}" "${process.execPath}" "${r}" --ms-enable-electron-run-as-node %h ${n}`}}async copyProxyScript(){const[e,t]=await Promise.all([this.copyFileToGlobalStorage("out/local-ssh/proxy.js","sshproxy/proxy.js"),h.isWindows?this.copyFileToGlobalStorage("out/local-ssh/proxylauncher.bat","sshproxy/proxylauncher.bat"):this.copyFileToGlobalStorage("out/local-ssh/proxylauncher.sh","sshproxy/proxylauncher.sh")]);return h.isWindows||await c.default.chmod(t,493),{proxyScript:e,launcher:t}}async copyFileToGlobalStorage(e,t){const r=this.context.asAbsolutePath(e),n=a.Uri.file(r),o=a.Uri.joinPath(this.context.globalStorageUri,t);return await a.workspace.fs.copy(n,o,{overwrite:!0}),o.fsPath}}t.LocalSSHService=f},51203:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationService=void 0;const i=s(r(89496));t.NotificationService=class{constructor(e){this.telemetryService=e}showInformationMessage(e,t,...r){return this.withTelemetry(t,"info",(()=>i.window.showInformationMessage(e,t,...r)))}showWarningMessage(e,t,...r){return this.withTelemetry(t,"warning",(()=>i.window.showWarningMessage(e,t,...r)))}showErrorMessage(e,t,...r){return this.withTelemetry(t,"error",(()=>i.window.showErrorMessage(e,t,...r)))}async withTelemetry(e,t,r){const n=(new Date).getTime();let o=e.id;!0===e.modal?o+="_modal":o+="_notification";const s={...e.flow,severity:t};let i;this.telemetryService.sendUserFlowStatus("show_"+o,s);try{i=await r()}finally{const e=(new Date).getTime()-n,t=void 0===i||"object"==typeof i&&!0===i.isCloseAffordance,r="string"==typeof i?i:i?.title;this.telemetryService.sendUserFlowStatus("hide_"+o,{...s,action:r,duration:e,closed:t})}return i}}},2841:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionService=t.NoSignedInError=void 0;const i=s(r(89496)),a=r(57460),c=r(29020),l=r(36591),u=r(72571);class d extends Error{constructor(){super("You are not signed in with your Gitpod account")}}t.NoSignedInError=d;class h extends a.Disposable{constructor(e,t){super(),this.hostService=e,this.logger=t,this._onDidChangeSession=this._register(new i.EventEmitter),this.onDidChangeSession=this._onDidChangeSession.event,this._register(i.authentication.onDidChangeSessions((e=>this.handleOnDidChangeSessions(e)))),this.firstLoadPromise=this.tryLoadSession(!1)}get didFirstLoad(){return this.firstLoadPromise}async handleOnDidChangeSessions(e){if("gitpod"!==e.provider.id)return;const t=this.session;this.session=void 0,await this.tryLoadSession(!1),t?.id!==this.session?.id&&(this._publicApi?.dispose(),this._publicApi=void 0,this._onDidChangeSession.fire())}isSignedIn(){return!!this.session}async signIn(e){return this.loginPromise?(this.logger.info("Existing login in progress. Waiting for completion..."),this.loginPromise):(this.loginPromise=this.doSignIn(e),this.loginPromise.finally((()=>this.loginPromise=void 0)),this.loginPromise)}async doSignIn(e){if(e&&new URL(this.hostService.gitpodHost).host!==new URL(e).host){const t=(0,u.eventToPromise)(this.onDidChangeSession);if(!await this.hostService.changeHost(e))return;await t}this.isSignedIn()||(await this.tryLoadSession(!0),this.isSignedIn()?this.logger.info("Successfully signed in"):this.logger.error("Failed to sign in"))}async tryLoadSession(e){try{if(this.session&&!e)return;const t=await this.hostService.getVersion(),r=["function:getWorkspace","function:getOwnerToken","function:getLoggedInUser","resource:default"];await(0,c.isOauthInspectSupported)(this.hostService.gitpodHost)||(0,c.isFeatureSupported)(t,"SSHPublicKeys")?r.push("function:getSSHPublicKeys","function:sendHeartBeat"):this.logger.warn(`function:getSSHPublicKeys and function:sendHeartBeat session scopes not supported in ${this.hostService.gitpodHost}, using version ${t.raw}`),this.session=await i.authentication.getSession("gitpod",r,{createIfNone:e,silent:!e})}catch(e){this.logger.error("Failed to load session:",e)}}getUserId(){if(!this.isSignedIn())throw new d;return this.session.account.id}safeGetUserId(){return this.session?.account.id}getGitpodToken(){if(!this.isSignedIn())throw new d;return this.session.accessToken}getScopes(){if(!this.isSignedIn())throw new d;return this.session.scopes}getAPI(){if(!this.isSignedIn())throw new d;return this._publicApi||(this._publicApi=new l.GitpodPublicApi(this.getGitpodToken(),this.hostService.gitpodHost,this.logger)),this._publicApi}dispose(){super.dispose(),this._publicApi?.dispose()}}t.SessionService=h},61315:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryService=void 0;const i=r(26809),a=r(30060),c=s(r(22037)),l=s(r(89496));class u extends i.BaseTelemetryReporter{constructor(e,t,r,n){super(e,t,{release:c.release(),platform:c.platform(),architecture:c.arch()},(e=>(async(e,t,r)=>{const n=new URL(e),o={writeKey:t,host:"https://api.segment.io",path:"/v1/batch"};if("untrusted-dummy-key"===t)o.host=e,o.path="/analytics"+o.path;else if("gitpod.io"!==n.host&&!n.host.endsWith(".gitpod-dev.com"))return r.warn(`No telemetry: dedicated installations should send data always to own endpoints, host: ${n.host}`),{logEvent:()=>{},logException:()=>{},flush:()=>{}};r.debug("analytics: "+new URL(o.path,o.host).href.replace(/\/$/,""));const s=`https://ide.${n.hostname}/metrics-api/reportError`,i=new a.Analytics(o);return{logEvent:(e,t)=>{try{i.track({anonymousId:l.env.machineId,event:e,properties:t?.properties},(e=>{e&&r.error("Failed to log event to app analytics:",e)}))}catch(e){r.error("Failed to log event to app analytics:",e)}},logException:(e,t)=>{const n=Object.assign({},t?.properties);n.error_name=e.name,n.error_message=e.message,n.debug_workspace=String(n.debug_workspace??!1);const o=n.workspaceId??"",i=n.instanceId??"",a=n.userId??"";delete n.workspaceId,delete n.instanceId,delete n.userId;const c={component:"vscode-desktop-extension",errorStack:e.stack||String(e),version:n["common.extversion"],workspaceId:o,instanceId:i,userId:a,properties:n};fetch(s,{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((e=>{e.ok||r.warn(`Metrics endpoint responded with ${e.status} ${e.statusText}`)})).catch((e=>{r.error("Failed to report error to metrics endpoint!",e)}))},flush:async()=>{try{await i.closeAndFlush({timeout:3e3})}catch(e){r.error("Failed to flush app analytics!",e)}}}})(e,r,n)))}sendUserFlowStatus(e,t){const r={...t,status:e};delete r.flow,delete r.gitpodHost,this.sendRawTelemetryEvent(t.gitpodHost,"vscode_desktop_"+t.flow,r)}}t.TelemetryService=u},31337:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsSync=t.parseSyncData=t.UserDataSyncStoreError=t.NoSettingsSyncSession=t.NoSyncStoreError=void 0;const i=s(r(89496)),a=r(57460),c=r(37892);class l extends Error{constructor(){super("No settings sync store url configured")}}t.NoSyncStoreError=l;class u extends Error{constructor(){super("No settings sync session available")}}t.NoSettingsSyncSession=u;class d extends Error{constructor(e){super(e)}}t.UserDataSyncStoreError=d,t.parseSyncData=function(e){try{const t=JSON.parse(e);if(function(e){if(e&&void 0!==e.version&&"number"==typeof e.version&&void 0!==e.content&&"string"==typeof e.content){if(2===Object.keys(e).length)return!0;if(3===Object.keys(e).length&&void 0!==e.machineId&&"string"==typeof e.machineId)return!0}return!1}(t))return t}catch{}};class h extends a.Disposable{constructor(e,t,r,n){super(),this.logService=t,this.telemetryService=r,this.notificationService=n,this.flow={flow:"settings_sync"},this._register(i.workspace.onDidChangeConfiguration((async e=>{if(e.affectsConfiguration("gitpod.host")||e.affectsConfiguration("configurationSync.store")){if(e.affectsConfiguration("[javascript]")&&e.affectsConfiguration("[markdown]"))return;const t=this.getServiceUrl().origin,r={...this.flow,gitpodHost:t};if(!await this.updateSyncContext()){const e="Settings Sync: Enable Sign In with Gitpod";await this.notificationService.showInformationMessage(`[Settings Sync](https://www.gitpod.io/docs/ides-and-editors/settings-sync#enabling-settings-sync-in-vs-code-desktop) with ${t} is disabled.`,{flow:r,id:"invalid"},e)===e&&i.commands.executeCommand("gitpod.syncProvider.add")}}}))),e.register({id:"gitpod.syncProvider.add",execute:()=>this.enableSettingsSync(!0)}),e.register({id:"gitpod.syncProvider.remove",execute:()=>this.enableSettingsSync(!1)}),this.updateSyncContext()}isSyncStoreConfigured(){const e=i.workspace.getConfiguration().get("configurationSync.store"),t=this.getGitpodSyncProviderConfig();return!!e&&JSON.stringify(e)===JSON.stringify(t)}async updateSyncContext(){const e=this.isSyncStoreConfigured();return await i.commands.executeCommand("setContext","gitpod.addedSyncProvider",e),e}async enableSettingsSync(e){const t=this.getServiceUrl().origin,r={...this.flow,enabled:String(e),gitpodHost:t};this.telemetryService.sendUserFlowStatus("changing_enablement",r);try{let t,n;const o=i.workspace.getConfiguration(),s=o.get("configurationSync.store"),a=o.get("settingsSync.ignoredSettings"),c=this.getGitpodSyncProviderConfig();if(e){if(JSON.stringify(s)===JSON.stringify(c))return;t=c,n=a??[],n.find((e=>"configurationSync.store"===e))||n.push("configurationSync.store")}else{if(void 0===s)return;t=void 0,n=a?.filter((e=>"configurationSync.store"!==e))}await o.update("settingsSync.ignoredSettings",n,i.ConfigurationTarget.Global),await o.update("configurationSync.store",t,i.ConfigurationTarget.Global);const l={title:"Learn More",isCloseAffordance:!0};await this.notificationService.showInformationMessage("Please entirely quit VS Code for the Settings Sync configuration to take effect.",{flow:r,modal:!0,id:"quit_to_apply"},l)===l&&i.env.openExternal(i.Uri.parse("https://www.gitpod.io/docs/ides-and-editors/settings-sync#enabling-settings-sync-in-vs-code-desktop"))}catch(e){const t=`Error setting up Settings Sync with Gitpod: ${e}`;this.notificationService.showErrorMessage(t,{flow:r,id:"failed"}),this.logService.error(t)}}getGitpodSyncProviderConfig(){const e=this.getServiceUrl().toString();return{url:e,stableUrl:e,insidersUrl:e,canSwitch:!1,authenticationProviders:{gitpod:{scopes:h.SCOPES}}}}getServiceUrl(){const e=new URL(c.Configuration.getGitpodHost());return e.pathname="/code-sync",e}async readResource(e){if(!this.isSyncStoreConfigured())throw new l;const t=`${this.getServiceUrl().toString()}/v1/resource/${e}/latest`,r=await this.request(t),n=r.headers.get("etag");if(!n)throw new d("Server did not return the ref");return{ref:n,content:await r.text()}}async tryGetSession(){return this.session||(this.session=await i.authentication.getSession("gitpod",h.SCOPES,{createIfNone:!1})),this.session}async request(e){const t=await this.tryGetSession();if(!t)throw new u;let r;try{const n=new AbortController;setTimeout((()=>n.abort()),5e3),r=await fetch(e,{method:"GET",headers:{"X-Account-Type":"gitpod",authorization:`Bearer ${t.accessToken}`},signal:n.signal})}catch(e){throw e}if(!r.ok)throw new d(`GET request '${e}' failed, server returned ${r.status}`);return r}}t.SettingsSync=h,h.SCOPES=["function:accessCodeSyncStorage","function:getLoggedInUser","resource:default"]},18191:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.addHostToHostFile=t.checkNewHostInHostkeys=void 0;const i=s(r(22037)),a=s(r(57147)),c=s(r(71017)),l=s(r(6113)),u=r(85244),d=c.join(i.homedir(),".ssh"),h=c.join(d,"known_hosts");t.checkNewHostInHostkeys=async function(e){const t=(await a.promises.readFile(h,{encoding:"utf8"})).split(/\r?\n/);for(let r of t){if(r=r.trim(),!r.startsWith("|1|"))continue;const[t]=r.split(" "),[n,o]=t.substring("|1|".length).split("|");if(l.createHmac("sha1",Buffer.from(n,"base64")).update(e).digest().toString("base64")===o)return!1}return!0},t.addHostToHostFile=async function(e,t,r){await(0,u.exists)(d)||await a.promises.mkdir(d,448);const n=l.randomBytes(20),o=l.createHmac("sha1",n).update(e).digest(),s=`|1|${n.toString("base64")}|${o.toString("base64")} ${r} ${t.toString("base64")}\n`;await a.promises.appendFile(h,s)}},19368:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.gatherIdentityFiles=void 0;const i=s(r(57147)),a=s(r(22037)),c=s(r(71017)),l=s(r(6113)),u=s(r(29005)),d=r(85244),h=a.homedir(),p=c.join(h,".ssh","/id_dsa"),f=c.join(h,".ssh","/id_ecdsa"),g=c.join(h,".ssh","/id_rsa"),m=c.join(h,".ssh","/id_ed25519"),y=c.join(h,".ssh","/id_xmss"),v=[g,f,c.join(h,".ssh","/id_ecdsa_sk"),m,c.join(h,".ssh","/id_ed25519_sk"),y,p];t.gatherIdentityFiles=async function(e,t,r,n){0===(e=e.map(d.untildify).map((e=>e.replace(/\.pub$/,"")))).length&&e.push(...v);const o=(await Promise.allSettled(e.map((async e=>(e=await(0,d.exists)(e+".pub")?e+".pub":e,i.promises.readFile(e)))))).map(((t,r)=>{if("rejected"===t.status)return;const o=u.utils.parseKey(t.value);if(o instanceof Error||!o)return void n.error(`Error while parsing SSH public key ${e[r]}:`,o);const s=Array.isArray(o)?o[0]:o,i=l.createHash("sha256").update(s.getPublicSSH()).digest("base64");return{filename:e[r],parsedKey:s,fingerprint:i}})).filter((e=>!!e));let s=[];try{if(!t)throw new Error("SSH_AUTH_SOCK environment variable not defined");s=await new Promise(((e,r)=>{new u.OpenSSHAgent(t).getIdentities(((t,n)=>{t?r(t):e(n||[])}))}))}catch(e){n.error("Couldn't get identities from OpenSSH agent",e)}const a=s.map((e=>{const t=l.createHash("sha256").update(e.getPublicSSH()).digest("base64");return{filename:e.comment,parsedKey:e,fingerprint:t,agentSupport:!0}})),c=[],h=[];for(const e of a){const t=o.findIndex((t=>e.parsedKey.type===t.parsedKey.type&&e.fingerprint===t.fingerprint));t>=0?(h.push({...o[t],agentSupport:!0}),o.splice(t,1)):r||c.push(e)}return h.push(...c),h.push(...o),n.trace("Identity keys:",h.length?h.map((e=>`${e.filename} ${e.parsedKey.type} SHA256:${e.fingerprint}`)).join("\n"):"None"),h}},47083:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getSSHConfigPath=void 0;const a=s(r(22037)),c=s(r(57147)),l=s(r(71017)),u=i(r(6200)),d=s(r(89496)),h=r(85244),p=r(97400).isWindows?l.resolve(process.env.ALLUSERSPROFILE||"C:\\ProgramData","ssh\\ssh_config"):"/etc/ssh/ssh_config",f=l.resolve(a.homedir(),".ssh/config"),g=l.resolve(a.homedir(),".ssh/gitpod/config");function m(){const e=d.workspace.getConfiguration("remote.SSH").get("configFile");return e?(0,h.untildify)(e):f}function y(e){return e.type===u.default.DIRECTIVE}function v(e){return e.type===u.default.DIRECTIVE&&"Host"===e.param&&!!e.value&&!!e.config}t.getSSHConfigPath=m;const _={host:"Host",hostname:"HostName",user:"User",port:"Port",identityagent:"IdentityAgent",identitiesonly:"IdentitiesOnly",identityfile:"IdentityFile",forwardagent:"ForwardAgent",proxyjump:"ProxyJump",proxycommand:"ProxyCommand"};function b(e){for(const r of e)y(r)&&((t=r).param=_[t.param.toLowerCase()]||t.param),v(r)&&b(r.config);var t}class S{constructor(e){this.sshConfig=e,b(e)}static async loadFromFS(){const e=m();let t="";await(0,h.isFile)(e)&&(t=(await c.promises.readFile(e,"utf8")).trim());const r=u.default.parse(t);return await(0,h.isFile)(p)&&(t=(await c.promises.readFile(p,"utf8")).trim(),r.push(...u.default.parse(t))),new S(r)}static async loadGitpodSSHConfig(){if(!await(0,h.isFile)(g))throw new Error(`Gitpod ssh config file ${g} does not exist`);let e=(await c.promises.readFile(g,"utf8")).trim();const t=u.default.parse(e);return new S(t)}static async saveGitpodSSHConfig(e){if(!await(0,h.isFile)(g))throw new Error(`Gitpod ssh config file ${g} does not exist`);try{await c.promises.writeFile(g,e.toString())}catch(e){throw new Error(`Could not write gitpod ssh config file ${g}: ${e}`)}}static async ensureIncludeGitpodSSHConfig(){const e=m();let t="";if(await(0,h.exists)(e))try{t=(await c.promises.readFile(e,"utf8")).trim()}catch(t){throw new Error(`Could not read ssh config file at ${e}: ${t}`)}if(!new RegExp('START GITPOD INTEGRATION.+Include "gitpod/config".+END GITPOD INTEGRATION',"s").test(t)){t=`## START GITPOD INTEGRATION\n## This section is managed by Gitpod. Any manual changes will be lost.\nInclude "gitpod/config"\n## END GITPOD INTEGRATION\n\n${t}`;const r=l.dirname(e);if(!await(0,h.exists)(r))try{await c.promises.mkdir(r,{recursive:!0})}catch(e){throw new Error(`Could not create ssh config folder ${r}: ${e}`)}try{await c.promises.writeFile(e,t)}catch(t){throw new Error(`Could not write ssh config file ${e}: ${t}`)}}const r=l.dirname(g);if(!await(0,h.exists)(r))try{await c.promises.mkdir(r,{recursive:!0})}catch(e){throw new Error(`Could not create gitpod ssh config folder ${r}: ${e}`)}if(!await(0,h.exists)(g))try{await c.promises.writeFile(g,"### This file is managed by Gitpod. Any manual changes will be lost.")}catch(e){throw new Error(`Could not write gitpod ssh config file ${g}: ${e}`)}}getAllConfiguredHosts(){const e=new Set;for(const t of this.sshConfig)if(v(t)){const r=Array.isArray(t.value)?t.value[0]:t.value;/^!/.test(r)||/[?*]/.test(r)||e.add(r)}return[...e.keys()]}getHostConfiguration(e){return this.sshConfig.compute(e)}addHostConfiguration(e){this.sshConfig.remove(e),this.sshConfig.append(e)}toString(){return this.sshConfig.toString()}}t.default=S},56069:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(82361),a=s(r(41808)),c=s(r(57147)),l=r(29005),u={reconnect:!1,port:22,reconnectTries:3,reconnectDelay:5e3},d="ssh",h="tunnel",p="beforeconnect",f="connect",g="beforedisconnect",m="disconnect";class y extends i.EventEmitter{constructor(e){super(),this.activeTunnels={},this.__$connectPromise=null,this.__retries=0,this.__err=null,this.sshConnection=null,this.config=Object.assign({},u,e),this.config.uniqueId=this.config.uniqueId||`${this.config.username}@${this.config.host}`}emit(e,t,r){return super.emit(e,t,this,r),super.emit(`${e}:${t}`,this,r)}shell(e={}){return this.connect().then((()=>new Promise(((t,r)=>{this.sshConnection.shell(e,((e,n)=>e?r(e):t(n)))}))))}exec(e,t,r={}){return e+=Array.isArray(t)?" "+t.join(" "):"",this.connect().then((()=>new Promise(((t,n)=>{this.sshConnection.exec(e,r,((e,r)=>{if(e)return n(e);let o="",s="";r.on("close",(function(){return t({stdout:o,stderr:s})})).on("data",(function(e){o+=e.toString()})).stderr.on("data",(function(e){s+=e.toString()}))}))}))))}forwardOut(e,t,r,n){return this.connect().then((()=>new Promise(((o,s)=>{this.sshConnection.forwardOut(e,t,r,n,((e,t)=>{if(e)return s(e);o(t)}))}))))}getSocksPort(e){return this.addTunnel({name:"__socksServer",socks:!0,localPort:e}).then((e=>e.localPort))}close(){return this.emit(d,g),this.closeTunnel().then((()=>{this.sshConnection&&(this.sshConnection.end(),this.emit(d,m))}))}connect(e){return this.config=Object.assign(this.config,e),++this.__retries,this.__$connectPromise||(this.__$connectPromise=new Promise(((e,t)=>{if(this.emit(d,p),!this.config||"function"==typeof this.config||!this.config.host&&!this.config.sock||!this.config.username)return t("Invalid SSH connection configuration host/username can't be empty"),void(this.__$connectPromise=null);this.config.identity&&(c.existsSync(this.config.identity)&&(this.config.privateKey=c.readFileSync(this.config.identity)),delete this.config.identity),this.sshConnection=new l.Client,this.sshConnection.on("ready",(r=>{if(r)return this.emit(d,m,{err:r}),this.__$connectPromise=null,t(r);this.emit(d,f),this.__retries=0,this.__err=null,e(this)})).on("error",(e=>{this.emit(d,m,{err:e}),this.__err=e})).on("close",(()=>{this.emit(d,m,{err:this.__err}),this.config.reconnect&&this.__retries<=this.config.reconnectTries&&this.__err&&"client-authentication"!==this.__err.level&&"ENOTFOUND"!==this.__err.code?setTimeout((()=>{this.__$connectPromise=null,e(this.connect())}),this.config.reconnectDelay):t(this.__err)})).connect(this.config)}))),this.__$connectPromise}getTunnel(e){return this.activeTunnels[e]}addTunnel(e){return e.name=e.name||`${e.remoteAddr}@${e.remotePort||e.remoteSocketPath}`,this.emit(h,p,{SSHTunnelConfig:e}),this.getTunnel(e.name)?(this.emit(h,f,{SSHTunnelConfig:e}),Promise.resolve(this.getTunnel(e.name))):new Promise(((t,r)=>{let n;n=a.createServer().on("connection",(t=>{this.connect().then((()=>{e.remotePort?this.sshConnection.forwardOut("127.0.0.1",0,e.remoteAddr,e.remotePort,((r,n)=>{r?this.emit(h,m,{SSHTunnelConfig:e,err:r}):(n.pipe(t),t.pipe(n))})):this.sshConnection.openssh_forwardOutStreamLocal(e.remoteSocketPath,((r,n)=>{r?this.emit(h,m,{SSHTunnelConfig:e,err:r}):(n.pipe(t),t.pipe(n))}))}))})),e.localPort=e.localPort||0,n.on("listening",(()=>{e.localPort=n.address().port,this.activeTunnels[e.name]=Object.assign({},{server:n},e),this.emit(h,f,{SSHTunnelConfig:e}),t(this.activeTunnels[e.name])})).on("error",(t=>{this.emit(h,m,{SSHTunnelConfig:e,err:t}),n.close(),r(t),delete this.activeTunnels[e.name]})).listen(e.localPort)}))}closeTunnel(e){if(e&&this.activeTunnels[e])return new Promise((t=>{const r=this.activeTunnels[e];this.emit(h,g,{SSHTunnelConfig:r}),r.server.close((()=>{this.emit(h,m,{SSHTunnelConfig:this.activeTunnels[e]}),delete this.activeTunnels[e],t()}))}));if(!e){const e=Object.keys(this.activeTunnels).map((e=>this.closeTunnel(e)));return Promise.all(e).then((()=>{}))}return Promise.resolve()}}t.default=y},8846:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t,r){this.hostname=e,this.user=t,this.port=r}static parse(e){let t;const n=e.lastIndexOf("@");let o;-1!==n&&(t=e.substring(0,n));const s=e.lastIndexOf(":");-1!==s&&(o=parseInt(e.substring(s+1),10));const i=-1!==n?n+1:0,a=-1!==s?s:e.length,c=e.substring(i,a);return new r(c,t,o)}toString(){let e=this.hostname;return this.user&&(e=`${this.user}@`+e),this.port&&(e+=`:${this.port}`),e}toRemoteSSHString(){if(!this.user&&!this.port)return this.hostname;const e={hostName:this.hostname};return this.user&&(e.user=this.user),this.port&&(e.port=this.port),Buffer.from(JSON.stringify(e),"utf8").toString("hex")}}t.default=r},79691:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getOpenSSHVersion=void 0;const i=s(r(32081)),a=s(r(73837)),c=s(r(89496)),l=a.promisify(i.exec);let u;t.getOpenSSHVersion=async function(){if(u)return u;try{const e=c.workspace.getConfiguration("remote.SSH").get("path"),{stdout:t,stderr:r}=await l(`${e||"ssh"} -V`,{timeout:3e3}),n=/\bOpenSSH[A-Za-z0-9_\-\.]+\b/.exec(r.trim()||t.trim());if(n)return u=n[0],u}catch{}}},61039:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.testSSHConnection=t.getAgentSock=t.SSHError=void 0;const a=r(29005),c=s(r(57147)),l=s(r(89496)),u=r(85244),d=r(97400),h=r(19368),p=i(r(56069)),f=i(r(8846));class g extends Error{constructor(e){super(),this.name=e.name,this.message=e.message,this.stack=e.stack}}function m(e){let t=d.isWindows?"\\\\.\\pipe\\openssh-ssh-agent":e.IdentityAgent||process.env.SSH_AUTH_SOCK;return t?(0,u.untildify)(t):void 0}function y(e,t,r,n,o){let s=3,i=3;return r=r.slice(),async(d,h,p)=>{if(null===d)return o.info("Trying no-auth authentication"),p({type:"none",username:e});if(d.includes("publickey")&&r.length){const t=r.shift();if(o.info(`Trying publickey authentication: ${t.filename} ${t.parsedKey.type} SHA256:${t.fingerprint}`),t.agentSupport)return p({type:"agent",username:e,agent:new class extends a.OpenSSHAgent{getIdentities(e){e(void 0,[t.parsedKey])}}(n)});if(t.isPrivate)return p({type:"publickey",username:e,key:t.parsedKey});if(!await(0,u.exists)(t.filename))return p(null);const s=await c.promises.readFile(t.filename);let i=a.utils.parseKey(s);if(i instanceof Error&&"Encrypted private OpenSSH key detected, but no passphrase given"===i.message){let e=3;for(;i instanceof Error&&e>0;){const r=await l.window.showInputBox({title:`Enter passphrase for ${t}`,password:!0,ignoreFocusOut:!0});if(!r)break;i=a.utils.parseKey(s,r),e--}}if(!i||i instanceof Error)return p(null);const d=Array.isArray(i)?i[0]:i;return p({type:"publickey",username:e,key:d})}if(d.includes("password")&&s>0){3===s&&o.info("Trying password authentication");const r=await l.window.showInputBox({title:`Enter password for ${e}@${t}`,password:!0,ignoreFocusOut:!0});return s--,p(!!r&&{type:"password",username:e,password:r})}if(d.includes("keyboard-interactive")&&i>0)return 3===i&&o.info("Trying keyboard-interactive authentication"),p({type:"keyboard-interactive",username:e,prompt:async(r,n,o,s,a)=>{const c=[];for(const r of s){const n=await l.window.showInputBox({title:`(${e}@${t}) ${r.prompt}`,password:!r.echo,ignoreFocusOut:!0});if(void 0===n){i=0;break}c.push(n)}i--,a(c)}});p(!1)}}t.SSHError=g,t.getAgentSock=m,t.testSSHConnection=async function(e,t,r,n){const o=r.getHostConfiguration(e.host),s=m(o),i=[];let c,l;if(o.ProxyJump){const t=o.ProxyJump.split(",").filter((e=>!!e.trim())).map((e=>{const t=f.default.parse(e);return[t,r.getHostConfiguration(t.hostname)]}));for(let r=0;r<t.length;r++){const[o,l]=t[r],u=l.HostName||o.hostname,d=l.User,f=l.Port?parseInt(l.Port,10):22,g="yes"===(l.ForwardAgent||"no").toLowerCase(),m=g&&s?new a.OpenSSHAgent(s):void 0,v=l.IdentityFile||[],_="yes"===(l.IdentitiesOnly||"no").toLowerCase(),b=y(d,u,await(0,h.gatherIdentityFiles)(v,s,_,n),s,n),S=new p.default({host:c?void 0:u,port:c?void 0:f,sock:c,username:d,readyTimeout:9e4,strictVendor:!1,agentForward:g,agent:m,authHandler:(e,t,r)=>{b(e,t,r)}});i.push(S);const E=r<t.length-1?t[r+1]:void 0,w=E?E[1].HostName||E[0].hostname:e.host,A=E&&(E[1].Port&&parseInt(l.Port,10)||E[0].port)||22;c=await S.forwardOut("127.0.0.1",0,w,A)}}const u=new p.default({host:c?void 0:e.host,sock:c,username:e.username,readyTimeout:e.readyTimeout,strictVendor:!1,authHandler:()=>({type:"password",username:e.username,password:e.password}),hostVerifier(e){l=e;const r=l.toString("base64");return t.some((e=>e.host_key===r))}});return await u.connect(),i.length?i[0].close():u?.close(),n.info(`SSH test connection to '${e.host}' host successful`),l}},45158:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceState=void 0;const i=r(22444),a=r(32036),c=s(r(89496)),l=r(57460),u=r(72571);class d extends l.Disposable{constructor(e,t,r){super(),this.workspaceId=e,this.sessionService=t,this.logger=r,this._onWorkspaceStateChanged=this._register(new c.EventEmitter),this.onWorkspaceStateChanged=this._onWorkspaceStateChanged.event,this.onWorkspaceStopped=(0,u.filterEvent)(this.onWorkspaceStateChanged,(()=>this.workspaceState?.instance?.status?.phase===a.WorkspaceInstanceStatus_Phase.STOPPING)),this.logger.trace(`WorkspaceState manager for workspace ${e} started`);const{onStatusChanged:n,dispose:o}=this.sessionService.getAPI().workspaceStatusStreaming(e);this._register(n((e=>this.checkWorkspaceState(this.toWorkspaceStatus(e))))),this._register({dispose:o})}async initialize(){const e=await this.sessionService.getAPI().getWorkspace(this.workspaceId);this.workspaceState||(this.workspaceState=e?.status)}isWorkspaceStopped(){const e=this.workspaceState?.instance?.status?.phase;return e===a.WorkspaceInstanceStatus_Phase.STOPPED||e===a.WorkspaceInstanceStatus_Phase.STOPPING}isWorkspaceRunning(){const e=this.workspaceState?.instance?.status?.phase;return e===a.WorkspaceInstanceStatus_Phase.RUNNING}workspaceUrl(){return this.workspaceState?.instance?.status?.url}async checkWorkspaceState(e){const t=e?.instance?.status?.phase,r=this.workspaceState?.instance?.status?.phase;this.workspaceState=e,t&&r&&t!==r&&this._onWorkspaceStateChanged.fire()}toWorkspaceStatus(e){return a.WorkspaceStatus.fromJson({instance:{instanceId:e.instance.instanceId,workspaceId:e.instance.workspaceId,createdAt:e.instance.createdAt?.toISOString()??null,status:{statusVersion:e.instance.status.statusVersion.toString(),phase:(0,i.workspaceInstanceStatus_PhaseToJSON)(e.instance.status.phase),conditions:null,message:"",url:e.instance.status.url,admission:(0,i.admissionLevelToJSON)(e.instance.status.admission),ports:[]}}})}}t.WorkspaceState=d},6149:(e,t,r)=>{e.exports=r(55468)},55468:(e,t,r)=>{"use strict";r(41808);var n,o=r(24404),s=r(13685),i=r(95687),a=r(82361),c=(r(39491),r(73837));function l(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||s.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",(function(e,r,n,o){for(var s=d(r,n,o),i=0,a=t.requests.length;i<a;++i){var c=t.requests[i];if(c.host===s.host&&c.port===s.port)return t.requests.splice(i,1),void c.request.onSocket(e)}e.destroy(),t.removeSocket(e)}))}function u(e,t){var r=this;l.prototype.createSocket.call(r,e,(function(n){var s=e.request.getHeader("host"),i=h({},r.options,{socket:n,servername:s?s.replace(/:.*$/,""):e.host}),a=o.connect(0,i);r.sockets[r.sockets.indexOf(n)]=a,t(a)}))}function d(e,t,r){return"string"==typeof e?{host:e,port:t,localAddress:r}:e}function h(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if("object"==typeof n)for(var o=Object.keys(n),s=0,i=o.length;s<i;++s){var a=o[s];void 0!==n[a]&&(e[a]=n[a])}}return e}t.httpOverHttp=function(e){var t=new l(e);return t.request=s.request,t},t.httpsOverHttp=function(e){var t=new l(e);return t.request=s.request,t.createSocket=u,t.defaultPort=443,t},t.httpOverHttps=function(e){var t=new l(e);return t.request=i.request,t},t.httpsOverHttps=function(e){var t=new l(e);return t.request=i.request,t.createSocket=u,t.defaultPort=443,t},c.inherits(l,a.EventEmitter),l.prototype.addRequest=function(e,t,r,n){var o=this,s=h({request:e},o.options,d(t,r,n));o.sockets.length>=this.maxSockets?o.requests.push(s):o.createSocket(s,(function(t){function r(){o.emit("free",t,s)}function n(e){o.removeSocket(t),t.removeListener("free",r),t.removeListener("close",n),t.removeListener("agentRemove",n)}t.on("free",r),t.on("close",n),t.on("agentRemove",n),e.onSocket(t)}))},l.prototype.createSocket=function(e,t){var r=this,o={};r.sockets.push(o);var s=h({},r.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1,headers:{host:e.host+":"+e.port}});e.localAddress&&(s.localAddress=e.localAddress),s.proxyAuth&&(s.headers=s.headers||{},s.headers["Proxy-Authorization"]="Basic "+new Buffer(s.proxyAuth).toString("base64")),n("making CONNECT request");var i=r.request(s);function a(s,a,c){var l;return i.removeAllListeners(),a.removeAllListeners(),200!==s.statusCode?(n("tunneling socket could not be established, statusCode=%d",s.statusCode),a.destroy(),(l=new Error("tunneling socket could not be established, statusCode="+s.statusCode)).code="ECONNRESET",e.request.emit("error",l),void r.removeSocket(o)):c.length>0?(n("got illegal response body from proxy"),a.destroy(),(l=new Error("got illegal response body from proxy")).code="ECONNRESET",e.request.emit("error",l),void r.removeSocket(o)):(n("tunneling connection has established"),r.sockets[r.sockets.indexOf(o)]=a,t(a))}i.useChunkedEncodingByDefault=!1,i.once("response",(function(e){e.upgrade=!0})),i.once("upgrade",(function(e,t,r){process.nextTick((function(){a(e,t,r)}))})),i.once("connect",a),i.once("error",(function(t){i.removeAllListeners(),n("tunneling socket could not be established, cause=%s\n",t.message,t.stack);var s=new Error("tunneling socket could not be established, cause="+t.message);s.code="ECONNRESET",e.request.emit("error",s),r.removeSocket(o)})),i.end()},l.prototype.removeSocket=function(e){var t=this.sockets.indexOf(e);if(-1!==t){this.sockets.splice(t,1);var r=this.requests.shift();r&&this.createSocket(r,(function(e){r.request.onSocket(e)}))}},n=process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments);"string"==typeof e[0]?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:function(){},t.debug=n},50780:(e,t,r)=>{!function(e){"use strict";var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},n=function(){throw new Error("no PRNG")},o=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var i=t(),a=t([1]),c=t([56129,1]),l=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function f(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function g(e,t,r,n,o){var s,i=0;for(s=0;s<o;s++)i|=e[t+s]^r[n+s];return(1&i-1>>>8)-1}function m(e,t,r,n){return g(e,t,r,n,16)}function y(e,t,r,n){return g(e,t,r,n,32)}function v(e,t,r,n){!function(e,t,r,n){for(var o,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,i=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,l=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,p=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,m=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,_=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,b=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,S=s,E=i,w=a,A=c,T=l,C=u,I=d,R=h,O=p,k=f,N=g,P=m,M=y,L=v,B=_,D=b,x=0;x<20;x+=2)S^=(o=(M^=(o=(O^=(o=(T^=(o=S+M|0)<<7|o>>>25)+S|0)<<9|o>>>23)+T|0)<<13|o>>>19)+O|0)<<18|o>>>14,C^=(o=(E^=(o=(L^=(o=(k^=(o=C+E|0)<<7|o>>>25)+C|0)<<9|o>>>23)+k|0)<<13|o>>>19)+L|0)<<18|o>>>14,N^=(o=(I^=(o=(w^=(o=(B^=(o=N+I|0)<<7|o>>>25)+N|0)<<9|o>>>23)+B|0)<<13|o>>>19)+w|0)<<18|o>>>14,D^=(o=(P^=(o=(R^=(o=(A^=(o=D+P|0)<<7|o>>>25)+D|0)<<9|o>>>23)+A|0)<<13|o>>>19)+R|0)<<18|o>>>14,S^=(o=(A^=(o=(w^=(o=(E^=(o=S+A|0)<<7|o>>>25)+S|0)<<9|o>>>23)+E|0)<<13|o>>>19)+w|0)<<18|o>>>14,C^=(o=(T^=(o=(R^=(o=(I^=(o=C+T|0)<<7|o>>>25)+C|0)<<9|o>>>23)+I|0)<<13|o>>>19)+R|0)<<18|o>>>14,N^=(o=(k^=(o=(O^=(o=(P^=(o=N+k|0)<<7|o>>>25)+N|0)<<9|o>>>23)+P|0)<<13|o>>>19)+O|0)<<18|o>>>14,D^=(o=(B^=(o=(L^=(o=(M^=(o=D+B|0)<<7|o>>>25)+D|0)<<9|o>>>23)+M|0)<<13|o>>>19)+L|0)<<18|o>>>14;S=S+s|0,E=E+i|0,w=w+a|0,A=A+c|0,T=T+l|0,C=C+u|0,I=I+d|0,R=R+h|0,O=O+p|0,k=k+f|0,N=N+g|0,P=P+m|0,M=M+y|0,L=L+v|0,B=B+_|0,D=D+b|0,e[0]=S>>>0&255,e[1]=S>>>8&255,e[2]=S>>>16&255,e[3]=S>>>24&255,e[4]=E>>>0&255,e[5]=E>>>8&255,e[6]=E>>>16&255,e[7]=E>>>24&255,e[8]=w>>>0&255,e[9]=w>>>8&255,e[10]=w>>>16&255,e[11]=w>>>24&255,e[12]=A>>>0&255,e[13]=A>>>8&255,e[14]=A>>>16&255,e[15]=A>>>24&255,e[16]=T>>>0&255,e[17]=T>>>8&255,e[18]=T>>>16&255,e[19]=T>>>24&255,e[20]=C>>>0&255,e[21]=C>>>8&255,e[22]=C>>>16&255,e[23]=C>>>24&255,e[24]=I>>>0&255,e[25]=I>>>8&255,e[26]=I>>>16&255,e[27]=I>>>24&255,e[28]=R>>>0&255,e[29]=R>>>8&255,e[30]=R>>>16&255,e[31]=R>>>24&255,e[32]=O>>>0&255,e[33]=O>>>8&255,e[34]=O>>>16&255,e[35]=O>>>24&255,e[36]=k>>>0&255,e[37]=k>>>8&255,e[38]=k>>>16&255,e[39]=k>>>24&255,e[40]=N>>>0&255,e[41]=N>>>8&255,e[42]=N>>>16&255,e[43]=N>>>24&255,e[44]=P>>>0&255,e[45]=P>>>8&255,e[46]=P>>>16&255,e[47]=P>>>24&255,e[48]=M>>>0&255,e[49]=M>>>8&255,e[50]=M>>>16&255,e[51]=M>>>24&255,e[52]=L>>>0&255,e[53]=L>>>8&255,e[54]=L>>>16&255,e[55]=L>>>24&255,e[56]=B>>>0&255,e[57]=B>>>8&255,e[58]=B>>>16&255,e[59]=B>>>24&255,e[60]=D>>>0&255,e[61]=D>>>8&255,e[62]=D>>>16&255,e[63]=D>>>24&255}(e,t,r,n)}function _(e,t,r,n){!function(e,t,r,n){for(var o,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,i=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,l=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,p=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,m=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,_=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,b=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,S=0;S<20;S+=2)s^=(o=(y^=(o=(p^=(o=(l^=(o=s+y|0)<<7|o>>>25)+s|0)<<9|o>>>23)+l|0)<<13|o>>>19)+p|0)<<18|o>>>14,u^=(o=(i^=(o=(v^=(o=(f^=(o=u+i|0)<<7|o>>>25)+u|0)<<9|o>>>23)+f|0)<<13|o>>>19)+v|0)<<18|o>>>14,g^=(o=(d^=(o=(a^=(o=(_^=(o=g+d|0)<<7|o>>>25)+g|0)<<9|o>>>23)+_|0)<<13|o>>>19)+a|0)<<18|o>>>14,b^=(o=(m^=(o=(h^=(o=(c^=(o=b+m|0)<<7|o>>>25)+b|0)<<9|o>>>23)+c|0)<<13|o>>>19)+h|0)<<18|o>>>14,s^=(o=(c^=(o=(a^=(o=(i^=(o=s+c|0)<<7|o>>>25)+s|0)<<9|o>>>23)+i|0)<<13|o>>>19)+a|0)<<18|o>>>14,u^=(o=(l^=(o=(h^=(o=(d^=(o=u+l|0)<<7|o>>>25)+u|0)<<9|o>>>23)+d|0)<<13|o>>>19)+h|0)<<18|o>>>14,g^=(o=(f^=(o=(p^=(o=(m^=(o=g+f|0)<<7|o>>>25)+g|0)<<9|o>>>23)+m|0)<<13|o>>>19)+p|0)<<18|o>>>14,b^=(o=(_^=(o=(v^=(o=(y^=(o=b+_|0)<<7|o>>>25)+b|0)<<9|o>>>23)+y|0)<<13|o>>>19)+v|0)<<18|o>>>14;e[0]=s>>>0&255,e[1]=s>>>8&255,e[2]=s>>>16&255,e[3]=s>>>24&255,e[4]=u>>>0&255,e[5]=u>>>8&255,e[6]=u>>>16&255,e[7]=u>>>24&255,e[8]=g>>>0&255,e[9]=g>>>8&255,e[10]=g>>>16&255,e[11]=g>>>24&255,e[12]=b>>>0&255,e[13]=b>>>8&255,e[14]=b>>>16&255,e[15]=b>>>24&255,e[16]=d>>>0&255,e[17]=d>>>8&255,e[18]=d>>>16&255,e[19]=d>>>24&255,e[20]=h>>>0&255,e[21]=h>>>8&255,e[22]=h>>>16&255,e[23]=h>>>24&255,e[24]=p>>>0&255,e[25]=p>>>8&255,e[26]=p>>>16&255,e[27]=p>>>24&255,e[28]=f>>>0&255,e[29]=f>>>8&255,e[30]=f>>>16&255,e[31]=f>>>24&255}(e,t,r,n)}var b=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function S(e,t,r,n,o,s,i){var a,c,l=new Uint8Array(16),u=new Uint8Array(64);for(c=0;c<16;c++)l[c]=0;for(c=0;c<8;c++)l[c]=s[c];for(;o>=64;){for(v(u,l,i,b),c=0;c<64;c++)e[t+c]=r[n+c]^u[c];for(a=1,c=8;c<16;c++)a=a+(255&l[c])|0,l[c]=255&a,a>>>=8;o-=64,t+=64,n+=64}if(o>0)for(v(u,l,i,b),c=0;c<o;c++)e[t+c]=r[n+c]^u[c];return 0}function E(e,t,r,n,o){var s,i,a=new Uint8Array(16),c=new Uint8Array(64);for(i=0;i<16;i++)a[i]=0;for(i=0;i<8;i++)a[i]=n[i];for(;r>=64;){for(v(c,a,o,b),i=0;i<64;i++)e[t+i]=c[i];for(s=1,i=8;i<16;i++)s=s+(255&a[i])|0,a[i]=255&s,s>>>=8;r-=64,t+=64}if(r>0)for(v(c,a,o,b),i=0;i<r;i++)e[t+i]=c[i];return 0}function w(e,t,r,n,o){var s=new Uint8Array(32);_(s,n,o,b);for(var i=new Uint8Array(8),a=0;a<8;a++)i[a]=n[a+16];return E(e,t,r,i,s)}function A(e,t,r,n,o,s,i){var a=new Uint8Array(32);_(a,s,i,b);for(var c=new Uint8Array(8),l=0;l<8;l++)c[l]=s[l+16];return S(e,t,r,n,o,c,a)}var T=function(e){var t,r,n,o,s,i,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),o=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|o<<9),s=255&e[8]|(255&e[9])<<8,this.r[4]=255&(o>>>4|s<<12),this.r[5]=s>>>1&8190,i=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(s>>>14|i<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(i>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function C(e,t,r,n,o,s){var i=new T(s);return i.update(r,n,o),i.finish(e,t),0}function I(e,t,r,n,o,s){var i=new Uint8Array(16);return C(i,0,r,n,o,s),m(e,t,i,0)}function R(e,t,r,n,o){var s;if(r<32)return-1;for(A(e,0,t,0,r,n,o),C(e,16,e,32,r-32,e),s=0;s<16;s++)e[s]=0;return 0}function O(e,t,r,n,o){var s,i=new Uint8Array(32);if(r<32)return-1;if(w(i,0,32,n,o),0!==I(t,16,t,32,r-32,i))return-1;for(A(e,0,t,0,r,n,o),s=0;s<32;s++)e[s]=0;return 0}function k(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function N(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function P(e,t,r){for(var n,o=~(r-1),s=0;s<16;s++)n=o&(e[s]^t[s]),e[s]^=n,t[s]^=n}function M(e,r){var n,o,s,i=t(),a=t();for(n=0;n<16;n++)a[n]=r[n];for(N(a),N(a),N(a),o=0;o<2;o++){for(i[0]=a[0]-65517,n=1;n<15;n++)i[n]=a[n]-65535-(i[n-1]>>16&1),i[n-1]&=65535;i[15]=a[15]-32767-(i[14]>>16&1),s=i[15]>>16&1,i[14]&=65535,P(a,i,1-s)}for(n=0;n<16;n++)e[2*n]=255&a[n],e[2*n+1]=a[n]>>8}function L(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return M(r,e),M(n,t),y(r,0,n,0)}function B(e){var t=new Uint8Array(32);return M(t,e),1&t[0]}function D(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function x(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function U(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function j(e,t,r){var n,o,s=0,i=0,a=0,c=0,l=0,u=0,d=0,h=0,p=0,f=0,g=0,m=0,y=0,v=0,_=0,b=0,S=0,E=0,w=0,A=0,T=0,C=0,I=0,R=0,O=0,k=0,N=0,P=0,M=0,L=0,B=0,D=r[0],x=r[1],U=r[2],j=r[3],F=r[4],H=r[5],W=r[6],q=r[7],z=r[8],G=r[9],$=r[10],V=r[11],J=r[12],K=r[13],Q=r[14],Y=r[15];s+=(n=t[0])*D,i+=n*x,a+=n*U,c+=n*j,l+=n*F,u+=n*H,d+=n*W,h+=n*q,p+=n*z,f+=n*G,g+=n*$,m+=n*V,y+=n*J,v+=n*K,_+=n*Q,b+=n*Y,i+=(n=t[1])*D,a+=n*x,c+=n*U,l+=n*j,u+=n*F,d+=n*H,h+=n*W,p+=n*q,f+=n*z,g+=n*G,m+=n*$,y+=n*V,v+=n*J,_+=n*K,b+=n*Q,S+=n*Y,a+=(n=t[2])*D,c+=n*x,l+=n*U,u+=n*j,d+=n*F,h+=n*H,p+=n*W,f+=n*q,g+=n*z,m+=n*G,y+=n*$,v+=n*V,_+=n*J,b+=n*K,S+=n*Q,E+=n*Y,c+=(n=t[3])*D,l+=n*x,u+=n*U,d+=n*j,h+=n*F,p+=n*H,f+=n*W,g+=n*q,m+=n*z,y+=n*G,v+=n*$,_+=n*V,b+=n*J,S+=n*K,E+=n*Q,w+=n*Y,l+=(n=t[4])*D,u+=n*x,d+=n*U,h+=n*j,p+=n*F,f+=n*H,g+=n*W,m+=n*q,y+=n*z,v+=n*G,_+=n*$,b+=n*V,S+=n*J,E+=n*K,w+=n*Q,A+=n*Y,u+=(n=t[5])*D,d+=n*x,h+=n*U,p+=n*j,f+=n*F,g+=n*H,m+=n*W,y+=n*q,v+=n*z,_+=n*G,b+=n*$,S+=n*V,E+=n*J,w+=n*K,A+=n*Q,T+=n*Y,d+=(n=t[6])*D,h+=n*x,p+=n*U,f+=n*j,g+=n*F,m+=n*H,y+=n*W,v+=n*q,_+=n*z,b+=n*G,S+=n*$,E+=n*V,w+=n*J,A+=n*K,T+=n*Q,C+=n*Y,h+=(n=t[7])*D,p+=n*x,f+=n*U,g+=n*j,m+=n*F,y+=n*H,v+=n*W,_+=n*q,b+=n*z,S+=n*G,E+=n*$,w+=n*V,A+=n*J,T+=n*K,C+=n*Q,I+=n*Y,p+=(n=t[8])*D,f+=n*x,g+=n*U,m+=n*j,y+=n*F,v+=n*H,_+=n*W,b+=n*q,S+=n*z,E+=n*G,w+=n*$,A+=n*V,T+=n*J,C+=n*K,I+=n*Q,R+=n*Y,f+=(n=t[9])*D,g+=n*x,m+=n*U,y+=n*j,v+=n*F,_+=n*H,b+=n*W,S+=n*q,E+=n*z,w+=n*G,A+=n*$,T+=n*V,C+=n*J,I+=n*K,R+=n*Q,O+=n*Y,g+=(n=t[10])*D,m+=n*x,y+=n*U,v+=n*j,_+=n*F,b+=n*H,S+=n*W,E+=n*q,w+=n*z,A+=n*G,T+=n*$,C+=n*V,I+=n*J,R+=n*K,O+=n*Q,k+=n*Y,m+=(n=t[11])*D,y+=n*x,v+=n*U,_+=n*j,b+=n*F,S+=n*H,E+=n*W,w+=n*q,A+=n*z,T+=n*G,C+=n*$,I+=n*V,R+=n*J,O+=n*K,k+=n*Q,N+=n*Y,y+=(n=t[12])*D,v+=n*x,_+=n*U,b+=n*j,S+=n*F,E+=n*H,w+=n*W,A+=n*q,T+=n*z,C+=n*G,I+=n*$,R+=n*V,O+=n*J,k+=n*K,N+=n*Q,P+=n*Y,v+=(n=t[13])*D,_+=n*x,b+=n*U,S+=n*j,E+=n*F,w+=n*H,A+=n*W,T+=n*q,C+=n*z,I+=n*G,R+=n*$,O+=n*V,k+=n*J,N+=n*K,P+=n*Q,M+=n*Y,_+=(n=t[14])*D,b+=n*x,S+=n*U,E+=n*j,w+=n*F,A+=n*H,T+=n*W,C+=n*q,I+=n*z,R+=n*G,O+=n*$,k+=n*V,N+=n*J,P+=n*K,M+=n*Q,L+=n*Y,b+=(n=t[15])*D,i+=38*(E+=n*U),a+=38*(w+=n*j),c+=38*(A+=n*F),l+=38*(T+=n*H),u+=38*(C+=n*W),d+=38*(I+=n*q),h+=38*(R+=n*z),p+=38*(O+=n*G),f+=38*(k+=n*$),g+=38*(N+=n*V),m+=38*(P+=n*J),y+=38*(M+=n*K),v+=38*(L+=n*Q),_+=38*(B+=n*Y),s=(n=(s+=38*(S+=n*x))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),i=(n=i+o+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),v=(n=v+o+65535)-65536*(o=Math.floor(n/65536)),_=(n=_+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),s=(n=(s+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),i=(n=i+o+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),v=(n=v+o+65535)-65536*(o=Math.floor(n/65536)),_=(n=_+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),s+=o-1+37*(o-1),e[0]=s,e[1]=i,e[2]=a,e[3]=c,e[4]=l,e[5]=u,e[6]=d,e[7]=h,e[8]=p,e[9]=f,e[10]=g,e[11]=m,e[12]=y,e[13]=v,e[14]=_,e[15]=b}function F(e,t){j(e,t,t)}function H(e,r){var n,o=t();for(n=0;n<16;n++)o[n]=r[n];for(n=253;n>=0;n--)F(o,o),2!==n&&4!==n&&j(o,o,r);for(n=0;n<16;n++)e[n]=o[n]}function W(e,r,n){var o,s,i=new Uint8Array(32),a=new Float64Array(80),l=t(),u=t(),d=t(),h=t(),p=t(),f=t();for(s=0;s<31;s++)i[s]=r[s];for(i[31]=127&r[31]|64,i[0]&=248,D(a,n),s=0;s<16;s++)u[s]=a[s],h[s]=l[s]=d[s]=0;for(l[0]=h[0]=1,s=254;s>=0;--s)P(l,u,o=i[s>>>3]>>>(7&s)&1),P(d,h,o),x(p,l,d),U(l,l,d),x(d,u,h),U(u,u,h),F(h,p),F(f,l),j(l,d,l),j(d,u,p),x(p,l,d),U(l,l,d),F(u,l),U(d,h,f),j(l,d,c),x(l,l,h),j(d,d,l),j(l,h,f),j(h,u,a),F(u,p),P(l,u,o),P(d,h,o);for(s=0;s<16;s++)a[s+16]=l[s],a[s+32]=d[s],a[s+48]=u[s],a[s+64]=h[s];var g=a.subarray(32),m=a.subarray(16);return H(g,g),j(m,m,g),M(e,m),0}function q(e,t){return W(e,t,s)}function z(e,t){return n(t,32),q(e,t)}function G(e,t,r){var n=new Uint8Array(32);return W(n,r,t),_(e,o,n,b)}T.prototype.blocks=function(e,t,r){for(var n,o,s,i,a,c,l,u,d,h,p,f,g,m,y,v,_,b,S,E=this.fin?0:2048,w=this.h[0],A=this.h[1],T=this.h[2],C=this.h[3],I=this.h[4],R=this.h[5],O=this.h[6],k=this.h[7],N=this.h[8],P=this.h[9],M=this.r[0],L=this.r[1],B=this.r[2],D=this.r[3],x=this.r[4],U=this.r[5],j=this.r[6],F=this.r[7],H=this.r[8],W=this.r[9];r>=16;)h=d=0,h+=(w+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*M,h+=(A+=8191&(n>>>13|(o=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*W),h+=(T+=8191&(o>>>10|(s=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*H),h+=(C+=8191&(s>>>7|(i=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*F),d=(h+=(I+=8191&(i>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*j))>>>13,h&=8191,h+=(R+=a>>>1&8191)*(5*U),h+=(O+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*x),h+=(k+=8191&(c>>>11|(l=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*D),h+=(N+=8191&(l>>>8|(u=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*B),p=d+=(h+=(P+=u>>>5|E)*(5*L))>>>13,p+=w*L,p+=A*M,p+=T*(5*W),p+=C*(5*H),d=(p+=I*(5*F))>>>13,p&=8191,p+=R*(5*j),p+=O*(5*U),p+=k*(5*x),p+=N*(5*D),d+=(p+=P*(5*B))>>>13,p&=8191,f=d,f+=w*B,f+=A*L,f+=T*M,f+=C*(5*W),d=(f+=I*(5*H))>>>13,f&=8191,f+=R*(5*F),f+=O*(5*j),f+=k*(5*U),f+=N*(5*x),g=d+=(f+=P*(5*D))>>>13,g+=w*D,g+=A*B,g+=T*L,g+=C*M,d=(g+=I*(5*W))>>>13,g&=8191,g+=R*(5*H),g+=O*(5*F),g+=k*(5*j),g+=N*(5*U),m=d+=(g+=P*(5*x))>>>13,m+=w*x,m+=A*D,m+=T*B,m+=C*L,d=(m+=I*M)>>>13,m&=8191,m+=R*(5*W),m+=O*(5*H),m+=k*(5*F),m+=N*(5*j),y=d+=(m+=P*(5*U))>>>13,y+=w*U,y+=A*x,y+=T*D,y+=C*B,d=(y+=I*L)>>>13,y&=8191,y+=R*M,y+=O*(5*W),y+=k*(5*H),y+=N*(5*F),v=d+=(y+=P*(5*j))>>>13,v+=w*j,v+=A*U,v+=T*x,v+=C*D,d=(v+=I*B)>>>13,v&=8191,v+=R*L,v+=O*M,v+=k*(5*W),v+=N*(5*H),_=d+=(v+=P*(5*F))>>>13,_+=w*F,_+=A*j,_+=T*U,_+=C*x,d=(_+=I*D)>>>13,_&=8191,_+=R*B,_+=O*L,_+=k*M,_+=N*(5*W),b=d+=(_+=P*(5*H))>>>13,b+=w*H,b+=A*F,b+=T*j,b+=C*U,d=(b+=I*x)>>>13,b&=8191,b+=R*D,b+=O*B,b+=k*L,b+=N*M,S=d+=(b+=P*(5*W))>>>13,S+=w*W,S+=A*H,S+=T*F,S+=C*j,d=(S+=I*U)>>>13,S&=8191,S+=R*x,S+=O*D,S+=k*B,S+=N*L,w=h=8191&(d=(d=((d+=(S+=P*M)>>>13)<<2)+d|0)+(h&=8191)|0),A=p+=d>>>=13,T=f&=8191,C=g&=8191,I=m&=8191,R=y&=8191,O=v&=8191,k=_&=8191,N=b&=8191,P=S&=8191,t+=16,r-=16;this.h[0]=w,this.h[1]=A,this.h[2]=T,this.h[3]=C,this.h[4]=I,this.h[5]=R,this.h[6]=O,this.h[7]=k,this.h[8]=N,this.h[9]=P},T.prototype.finish=function(e,t){var r,n,o,s,i=new Uint16Array(10);if(this.leftover){for(s=this.leftover,this.buffer[s++]=1;s<16;s++)this.buffer[s]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,s=2;s<10;s++)this.h[s]+=r,r=this.h[s]>>>13,this.h[s]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,i[0]=this.h[0]+5,r=i[0]>>>13,i[0]&=8191,s=1;s<10;s++)i[s]=this.h[s]+r,r=i[s]>>>13,i[s]&=8191;for(i[9]-=8192,n=(1^r)-1,s=0;s<10;s++)i[s]&=n;for(n=~n,s=0;s<10;s++)this.h[s]=this.h[s]&n|i[s];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),o=this.h[0]+this.pad[0],this.h[0]=65535&o,s=1;s<8;s++)o=(this.h[s]+this.pad[s]|0)+(o>>>16)|0,this.h[s]=65535&o;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},T.prototype.update=function(e,t,r){var n,o;if(this.leftover){for((o=16-this.leftover)>r&&(o=r),n=0;n<o;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=o,t+=o,this.leftover+=o,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(o=r-r%16,this.blocks(e,t,o),t+=o,r-=o),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var $=R,V=O,J=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function K(e,t,r,n){for(var o,s,i,a,c,l,u,d,h,p,f,g,m,y,v,_,b,S,E,w,A,T,C,I,R,O,k=new Int32Array(16),N=new Int32Array(16),P=e[0],M=e[1],L=e[2],B=e[3],D=e[4],x=e[5],U=e[6],j=e[7],F=t[0],H=t[1],W=t[2],q=t[3],z=t[4],G=t[5],$=t[6],V=t[7],K=0;n>=128;){for(E=0;E<16;E++)w=8*E+K,k[E]=r[w+0]<<24|r[w+1]<<16|r[w+2]<<8|r[w+3],N[E]=r[w+4]<<24|r[w+5]<<16|r[w+6]<<8|r[w+7];for(E=0;E<80;E++)if(o=P,s=M,i=L,a=B,c=D,l=x,u=U,h=F,p=H,f=W,g=q,m=z,y=G,v=$,C=65535&(T=V),I=T>>>16,R=65535&(A=j),O=A>>>16,C+=65535&(T=(z>>>14|D<<18)^(z>>>18|D<<14)^(D>>>9|z<<23)),I+=T>>>16,R+=65535&(A=(D>>>14|z<<18)^(D>>>18|z<<14)^(z>>>9|D<<23)),O+=A>>>16,C+=65535&(T=z&G^~z&$),I+=T>>>16,R+=65535&(A=D&x^~D&U),O+=A>>>16,C+=65535&(T=J[2*E+1]),I+=T>>>16,R+=65535&(A=J[2*E]),O+=A>>>16,A=k[E%16],I+=(T=N[E%16])>>>16,R+=65535&A,O+=A>>>16,R+=(I+=(C+=65535&T)>>>16)>>>16,C=65535&(T=S=65535&C|I<<16),I=T>>>16,R=65535&(A=b=65535&R|(O+=R>>>16)<<16),O=A>>>16,C+=65535&(T=(F>>>28|P<<4)^(P>>>2|F<<30)^(P>>>7|F<<25)),I+=T>>>16,R+=65535&(A=(P>>>28|F<<4)^(F>>>2|P<<30)^(F>>>7|P<<25)),O+=A>>>16,I+=(T=F&H^F&W^H&W)>>>16,R+=65535&(A=P&M^P&L^M&L),O+=A>>>16,d=65535&(R+=(I+=(C+=65535&T)>>>16)>>>16)|(O+=R>>>16)<<16,_=65535&C|I<<16,C=65535&(T=g),I=T>>>16,R=65535&(A=a),O=A>>>16,I+=(T=S)>>>16,R+=65535&(A=b),O+=A>>>16,M=o,L=s,B=i,D=a=65535&(R+=(I+=(C+=65535&T)>>>16)>>>16)|(O+=R>>>16)<<16,x=c,U=l,j=u,P=d,H=h,W=p,q=f,z=g=65535&C|I<<16,G=m,$=y,V=v,F=_,E%16==15)for(w=0;w<16;w++)A=k[w],C=65535&(T=N[w]),I=T>>>16,R=65535&A,O=A>>>16,A=k[(w+9)%16],C+=65535&(T=N[(w+9)%16]),I+=T>>>16,R+=65535&A,O+=A>>>16,b=k[(w+1)%16],C+=65535&(T=((S=N[(w+1)%16])>>>1|b<<31)^(S>>>8|b<<24)^(S>>>7|b<<25)),I+=T>>>16,R+=65535&(A=(b>>>1|S<<31)^(b>>>8|S<<24)^b>>>7),O+=A>>>16,b=k[(w+14)%16],I+=(T=((S=N[(w+14)%16])>>>19|b<<13)^(b>>>29|S<<3)^(S>>>6|b<<26))>>>16,R+=65535&(A=(b>>>19|S<<13)^(S>>>29|b<<3)^b>>>6),O+=A>>>16,O+=(R+=(I+=(C+=65535&T)>>>16)>>>16)>>>16,k[w]=65535&R|O<<16,N[w]=65535&C|I<<16;C=65535&(T=F),I=T>>>16,R=65535&(A=P),O=A>>>16,A=e[0],I+=(T=t[0])>>>16,R+=65535&A,O+=A>>>16,O+=(R+=(I+=(C+=65535&T)>>>16)>>>16)>>>16,e[0]=P=65535&R|O<<16,t[0]=F=65535&C|I<<16,C=65535&(T=H),I=T>>>16,R=65535&(A=M),O=A>>>16,A=e[1],I+=(T=t[1])>>>16,R+=65535&A,O+=A>>>16,O+=(R+=(I+=(C+=65535&T)>>>16)>>>16)>>>16,e[1]=M=65535&R|O<<16,t[1]=H=65535&C|I<<16,C=65535&(T=W),I=T>>>16,R=65535&(A=L),O=A>>>16,A=e[2],I+=(T=t[2])>>>16,R+=65535&A,O+=A>>>16,O+=(R+=(I+=(C+=65535&T)>>>16)>>>16)>>>16,e[2]=L=65535&R|O<<16,t[2]=W=65535&C|I<<16,C=65535&(T=q),I=T>>>16,R=65535&(A=B),O=A>>>16,A=e[3],I+=(T=t[3])>>>16,R+=65535&A,O+=A>>>16,O+=(R+=(I+=(C+=65535&T)>>>16)>>>16)>>>16,e[3]=B=65535&R|O<<16,t[3]=q=65535&C|I<<16,C=65535&(T=z),I=T>>>16,R=65535&(A=D),O=A>>>16,A=e[4],I+=(T=t[4])>>>16,R+=65535&A,O+=A>>>16,O+=(R+=(I+=(C+=65535&T)>>>16)>>>16)>>>16,e[4]=D=65535&R|O<<16,t[4]=z=65535&C|I<<16,C=65535&(T=G),I=T>>>16,R=65535&(A=x),O=A>>>16,A=e[5],I+=(T=t[5])>>>16,R+=65535&A,O+=A>>>16,O+=(R+=(I+=(C+=65535&T)>>>16)>>>16)>>>16,e[5]=x=65535&R|O<<16,t[5]=G=65535&C|I<<16,C=65535&(T=$),I=T>>>16,R=65535&(A=U),O=A>>>16,A=e[6],I+=(T=t[6])>>>16,R+=65535&A,O+=A>>>16,O+=(R+=(I+=(C+=65535&T)>>>16)>>>16)>>>16,e[6]=U=65535&R|O<<16,t[6]=$=65535&C|I<<16,C=65535&(T=V),I=T>>>16,R=65535&(A=j),O=A>>>16,A=e[7],I+=(T=t[7])>>>16,R+=65535&A,O+=A>>>16,O+=(R+=(I+=(C+=65535&T)>>>16)>>>16)>>>16,e[7]=j=65535&R|O<<16,t[7]=V=65535&C|I<<16,K+=128,n-=128}return n}function Q(e,t,r){var n,o=new Int32Array(8),s=new Int32Array(8),i=new Uint8Array(256),a=r;for(o[0]=1779033703,o[1]=3144134277,o[2]=1013904242,o[3]=2773480762,o[4]=1359893119,o[5]=2600822924,o[6]=528734635,o[7]=1541459225,s[0]=4089235720,s[1]=2227873595,s[2]=4271175723,s[3]=1595750129,s[4]=2917565137,s[5]=725511199,s[6]=4215389547,s[7]=327033209,K(o,s,t,r),r%=128,n=0;n<r;n++)i[n]=t[a-r+n];for(i[r]=128,i[(r=256-128*(r<112?1:0))-9]=0,f(i,r-8,a/536870912|0,a<<3),K(o,s,i,r),n=0;n<8;n++)f(e,8*n,o[n],s[n]);return 0}function Y(e,r){var n=t(),o=t(),s=t(),i=t(),a=t(),c=t(),l=t(),d=t(),h=t();U(n,e[1],e[0]),U(h,r[1],r[0]),j(n,n,h),x(o,e[0],e[1]),x(h,r[0],r[1]),j(o,o,h),j(s,e[3],r[3]),j(s,s,u),j(i,e[2],r[2]),x(i,i,i),U(a,o,n),U(c,i,s),x(l,i,s),x(d,o,n),j(e[0],a,c),j(e[1],d,l),j(e[2],l,c),j(e[3],a,d)}function X(e,t,r){var n;for(n=0;n<4;n++)P(e[n],t[n],r)}function Z(e,r){var n=t(),o=t(),s=t();H(s,r[2]),j(n,r[0],s),j(o,r[1],s),M(e,o),e[31]^=B(n)<<7}function ee(e,t,r){var n,o;for(k(e[0],i),k(e[1],a),k(e[2],a),k(e[3],i),o=255;o>=0;--o)X(e,t,n=r[o/8|0]>>(7&o)&1),Y(t,e),Y(e,e),X(e,t,n)}function te(e,r){var n=[t(),t(),t(),t()];k(n[0],d),k(n[1],h),k(n[2],a),j(n[3],d,h),ee(e,n,r)}function re(e,r,o){var s,i=new Uint8Array(64),a=[t(),t(),t(),t()];for(o||n(r,32),Q(i,r,32),i[0]&=248,i[31]&=127,i[31]|=64,te(a,i),Z(e,a),s=0;s<32;s++)r[s+32]=e[s];return 0}var ne=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function oe(e,t){var r,n,o,s;for(n=63;n>=32;--n){for(r=0,o=n-32,s=n-12;o<s;++o)t[o]+=r-16*t[n]*ne[o-(n-32)],r=t[o]+128>>8,t[o]-=256*r;t[o]+=r,t[n]=0}for(r=0,o=0;o<32;o++)t[o]+=r-(t[31]>>4)*ne[o],r=t[o]>>8,t[o]&=255;for(o=0;o<32;o++)t[o]-=r*ne[o];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function se(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;oe(e,r)}function ie(e,r,n,o){var s,i,a=new Uint8Array(64),c=new Uint8Array(64),l=new Uint8Array(64),u=new Float64Array(64),d=[t(),t(),t(),t()];Q(a,o,32),a[0]&=248,a[31]&=127,a[31]|=64;var h=n+64;for(s=0;s<n;s++)e[64+s]=r[s];for(s=0;s<32;s++)e[32+s]=a[32+s];for(Q(l,e.subarray(32),n+32),se(l),te(d,l),Z(e,d),s=32;s<64;s++)e[s]=o[s];for(Q(c,e,n+64),se(c),s=0;s<64;s++)u[s]=0;for(s=0;s<32;s++)u[s]=l[s];for(s=0;s<32;s++)for(i=0;i<32;i++)u[s+i]+=c[s]*a[i];return oe(e.subarray(32),u),h}function ae(e,r,n,o){var s,c=new Uint8Array(32),u=new Uint8Array(64),d=[t(),t(),t(),t()],h=[t(),t(),t(),t()];if(n<64)return-1;if(function(e,r){var n=t(),o=t(),s=t(),c=t(),u=t(),d=t(),h=t();return k(e[2],a),D(e[1],r),F(s,e[1]),j(c,s,l),U(s,s,e[2]),x(c,e[2],c),F(u,c),F(d,u),j(h,d,u),j(n,h,s),j(n,n,c),function(e,r){var n,o=t();for(n=0;n<16;n++)o[n]=r[n];for(n=250;n>=0;n--)F(o,o),1!==n&&j(o,o,r);for(n=0;n<16;n++)e[n]=o[n]}(n,n),j(n,n,s),j(n,n,c),j(n,n,c),j(e[0],n,c),F(o,e[0]),j(o,o,c),L(o,s)&&j(e[0],e[0],p),F(o,e[0]),j(o,o,c),L(o,s)?-1:(B(e[0])===r[31]>>7&&U(e[0],i,e[0]),j(e[3],e[0],e[1]),0)}(h,o))return-1;for(s=0;s<n;s++)e[s]=r[s];for(s=0;s<32;s++)e[s+32]=o[s];if(Q(u,e,n),se(u),ee(d,h,u),te(h,r.subarray(32)),Y(d,h),Z(c,d),n-=64,y(r,0,c,0)){for(s=0;s<n;s++)e[s]=0;return-1}for(s=0;s<n;s++)e[s]=r[s+64];return n}var ce,le=64,ue=32,de=64;function he(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function pe(){var e,t;for(t=0;t<arguments.length;t++)if("[object Uint8Array]"!==(e=Object.prototype.toString.call(arguments[t])))throw new TypeError("unexpected type "+e+", use Uint8Array")}function fe(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:_,crypto_stream_xor:A,crypto_stream:w,crypto_stream_salsa20_xor:S,crypto_stream_salsa20:E,crypto_onetimeauth:C,crypto_onetimeauth_verify:I,crypto_verify_16:m,crypto_verify_32:y,crypto_secretbox:R,crypto_secretbox_open:O,crypto_scalarmult:W,crypto_scalarmult_base:q,crypto_box_beforenm:G,crypto_box_afternm:$,crypto_box:function(e,t,r,n,o,s){var i=new Uint8Array(32);return G(i,o,s),$(e,t,r,n,i)},crypto_box_open:function(e,t,r,n,o,s){var i=new Uint8Array(32);return G(i,o,s),V(e,t,r,n,i)},crypto_box_keypair:z,crypto_hash:Q,crypto_sign:ie,crypto_sign_keypair:re,crypto_sign_open:ae,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:le,crypto_sign_PUBLICKEYBYTES:ue,crypto_sign_SECRETKEYBYTES:de,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64},e.util||(e.util={},e.util.decodeUTF8=e.util.encodeUTF8=e.util.encodeBase64=e.util.decodeBase64=function(){throw new Error("nacl.util moved into separate package: https://github.com/dchest/tweetnacl-util-js")}),e.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},e.secretbox=function(e,t,r){pe(e,t,r),he(r,t);for(var n=new Uint8Array(32+e.length),o=new Uint8Array(n.length),s=0;s<e.length;s++)n[s+32]=e[s];return R(o,n,n.length,t,r),o.subarray(16)},e.secretbox.open=function(e,t,r){pe(e,t,r),he(r,t);for(var n=new Uint8Array(16+e.length),o=new Uint8Array(n.length),s=0;s<e.length;s++)n[s+16]=e[s];return!(n.length<32)&&0===O(o,n,n.length,t,r)&&o.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(pe(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return W(r,e,t),r},e.scalarMult.base=function(e){if(pe(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return q(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,o){var s=e.box.before(n,o);return e.secretbox(t,r,s)},e.box.before=function(e,t){pe(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return G(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,o){var s=e.box.before(n,o);return e.secretbox.open(t,r,s)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return z(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(pe(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return q(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(pe(e,t),t.length!==de)throw new Error("bad secret key size");var r=new Uint8Array(le+e.length);return ie(r,e,e.length,t),r},e.sign.open=function(e,t){if(2!==arguments.length)throw new Error("nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?");if(pe(e,t),t.length!==ue)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=ae(r,e,e.length,t);if(n<0)return null;for(var o=new Uint8Array(n),s=0;s<o.length;s++)o[s]=r[s];return o},e.sign.detached=function(t,r){for(var n=e.sign(t,r),o=new Uint8Array(le),s=0;s<o.length;s++)o[s]=n[s];return o},e.sign.detached.verify=function(e,t,r){if(pe(e,t,r),t.length!==le)throw new Error("bad signature size");if(r.length!==ue)throw new Error("bad public key size");var n,o=new Uint8Array(le+e.length),s=new Uint8Array(le+e.length);for(n=0;n<le;n++)o[n]=t[n];for(n=0;n<e.length;n++)o[n+le]=e[n];return ae(s,o,o.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(ue),t=new Uint8Array(de);return re(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(pe(e),e.length!==de)throw new Error("bad secret key size");for(var t=new Uint8Array(ue),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(pe(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(ue),r=new Uint8Array(de),n=0;n<32;n++)r[n]=e[n];return re(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=ue,e.sign.secretKeyLength=de,e.sign.seedLength=32,e.sign.signatureLength=le,e.hash=function(e){pe(e);var t=new Uint8Array(64);return Q(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return pe(e,t),0!==e.length&&0!==t.length&&e.length===t.length&&0===g(e,0,t,0,e.length)},e.setPRNG=function(e){n=e},(ce="undefined"!=typeof self?self.crypto||self.msCrypto:null)&&ce.getRandomValues?e.setPRNG((function(e,t){var r,n=new Uint8Array(t);for(r=0;r<t;r+=65536)ce.getRandomValues(n.subarray(r,r+Math.min(t-r,65536)));for(r=0;r<t;r++)e[r]=n[r];fe(n)})):(ce=r(6113))&&ce.randomBytes&&e.setPRNG((function(e,t){var r,n=ce.randomBytes(t);for(r=0;r<t;r++)e[r]=n[r];fe(n)}))}(e.exports?e.exports:self.nacl=self.nacl||{})},90825:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).substr(1));t.default=function(e,t){const n=t||0,o=r;return(o[e[n+0]]+o[e[n+1]]+o[e[n+2]]+o[e[n+3]]+"-"+o[e[n+4]]+o[e[n+5]]+"-"+o[e[n+6]]+o[e[n+7]]+"-"+o[e[n+8]]+o[e[n+9]]+"-"+o[e[n+10]]+o[e[n+11]]+o[e[n+12]]+o[e[n+13]]+o[e[n+14]]+o[e[n+15]]).toLowerCase()}},17593:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return i.default}});var n=a(r(24922)),o=a(r(86964)),s=a(r(28509)),i=a(r(15669));function a(e){return e&&e.__esModule?e:{default:e}}},48758:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(6113))&&n.__esModule?n:{default:n};t.default=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o.default.createHash("md5").update(e).digest()}},52836:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return o.default.randomFillSync(s)};var n,o=(n=r(6113))&&n.__esModule?n:{default:n};const s=new Uint8Array(16)},40795:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(6113))&&n.__esModule?n:{default:n};t.default=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o.default.createHash("sha1").update(e).digest()}},24922:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r(52836)),o=s(r(90825));function s(e){return e&&e.__esModule?e:{default:e}}let i,a,c=0,l=0;t.default=function(e,t,r){let s=t&&r||0;const u=t||[];let d=(e=e||{}).node||i,h=void 0!==e.clockseq?e.clockseq:a;if(null==d||null==h){const t=e.random||(e.rng||n.default)();null==d&&(d=i=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==h&&(h=a=16383&(t[6]<<8|t[7]))}let p=void 0!==e.msecs?e.msecs:Date.now(),f=void 0!==e.nsecs?e.nsecs:l+1;const g=p-c+(f-l)/1e4;if(g<0&&void 0===e.clockseq&&(h=h+1&16383),(g<0||p>c)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=p,l=f,a=h,p+=122192928e5;const m=(1e4*(268435455&p)+f)%4294967296;u[s++]=m>>>24&255,u[s++]=m>>>16&255,u[s++]=m>>>8&255,u[s++]=255&m;const y=p/4294967296*1e4&268435455;u[s++]=y>>>8&255,u[s++]=255&y,u[s++]=y>>>24&15|16,u[s++]=y>>>16&255,u[s++]=h>>>8|128,u[s++]=255&h;for(let e=0;e<6;++e)u[s+e]=d[e];return t||(0,o.default)(u)}},86964:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r(79137)),o=s(r(48758));function s(e){return e&&e.__esModule?e:{default:e}}var i=(0,n.default)("v3",48,o.default);t.default=i},79137:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){function n(e,n,s,i){const a=s&&i||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=function(e){const t=[];return e.replace(/[a-fA-F0-9]{2}/g,(function(e){t.push(parseInt(e,16))})),t}(n)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(n)||16!==n.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");const c=r(n.concat(e));if(c[6]=15&c[6]|t,c[8]=63&c[8]|128,s)for(let e=0;e<16;++e)s[a+e]=c[e];return s||(0,o.default)(c)}try{n.name=e}catch(e){}return n.DNS=s,n.URL=i,n},t.URL=t.DNS=void 0;var n,o=(n=r(90825))&&n.__esModule?n:{default:n};const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=s;const i="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=i},28509:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r(52836)),o=s(r(90825));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,r){"string"==typeof e&&(t="binary"===e?new Uint8Array(16):null,e=null);const s=(e=e||{}).random||(e.rng||n.default)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){const e=r||0;for(let r=0;r<16;++r)t[e+r]=s[r];return t}return(0,o.default)(s)}},15669:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r(79137)),o=s(r(40795));function s(e){return e&&e.__esModule?e:{default:e}}var i=(0,n.default)("v5",80,o.default);t.default=i},83126:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(23680),o=r(62593);var s;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:n.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:n.Event.None}),e.is=function(t){let r=t;return r&&(r===e.None||r===e.Cancelled||o.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}}(s=t.CancellationToken||(t.CancellationToken={}));const i=Object.freeze((function(e,t){let r=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(r)}}}));class a{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?i:(this._emitter||(this._emitter=new n.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new a),this._token}cancel(){this._token?this._token.cancel():this._token=s.Cancelled}dispose(){this._token?this._token instanceof a&&this._token.dispose():this._token=s.None}}},23680:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t.Disposable||(t.Disposable={})).create=function(e){return{dispose:e}},function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class r{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(this._callbacks){for(var r=!1,n=0,o=this._callbacks.length;n<o;n++)if(this._callbacks[n]===e){if(this._contexts[n]===t)return this._callbacks.splice(n,1),void this._contexts.splice(n,1);r=!0}if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var t=[],r=this._callbacks.slice(0),n=this._contexts.slice(0),o=0,s=r.length;o<s;o++)try{t.push(r[o].apply(n[o],e))}catch(e){console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class n{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,o)=>{let s;return this._callbacks||(this._callbacks=new r),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t),s={dispose:()=>{this._callbacks.remove(e,t),s.dispose=n._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(o)&&o.push(s),s}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=n,n._noop=function(){}},62593:(e,t)=>{"use strict";function r(e){return"string"==typeof e||e instanceof String}function n(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=n,t.stringArray=function(e){return n(e)&&e.every((e=>r(e)))}},10397:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=0,e.First=1,e.Last=2}(r=t.Touch||(t.Touch={})),t.LinkedMap=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(t)return t.value}set(e,t,n=r.None){let o=this._map.get(e);if(o)o.value=t,n!==r.None&&this.touch(o,n);else{switch(o={key:e,value:t,next:void 0,previous:void 0},n){case r.None:this.addItemLast(o);break;case r.First:this.addItemFirst(o);break;case r.Last:default:this.addItemLast(o)}this._map.set(e,o),this._size++}}delete(e){const t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let r=this._head;for(;r;)t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),r=r.next}forEachReverse(e,t){let r=this._tail;for(;r;)t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),r=r.previous}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{const t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===r.First||t===r.Last)if(t===r.First){if(e===this._head)return;const t=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(t.previous=r,r.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===r.Last){if(e===this._tail)return;const t=e.next,r=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=r,r.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}},8231:(e,t,r)=>{"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});const o=r(62593),s=r(73234);t.RequestType=s.RequestType,t.RequestType0=s.RequestType0,t.RequestType1=s.RequestType1,t.RequestType2=s.RequestType2,t.RequestType3=s.RequestType3,t.RequestType4=s.RequestType4,t.RequestType5=s.RequestType5,t.RequestType6=s.RequestType6,t.RequestType7=s.RequestType7,t.RequestType8=s.RequestType8,t.RequestType9=s.RequestType9,t.ResponseError=s.ResponseError,t.ErrorCodes=s.ErrorCodes,t.NotificationType=s.NotificationType,t.NotificationType0=s.NotificationType0,t.NotificationType1=s.NotificationType1,t.NotificationType2=s.NotificationType2,t.NotificationType3=s.NotificationType3,t.NotificationType4=s.NotificationType4,t.NotificationType5=s.NotificationType5,t.NotificationType6=s.NotificationType6,t.NotificationType7=s.NotificationType7,t.NotificationType8=s.NotificationType8,t.NotificationType9=s.NotificationType9;const i=r(26386);t.MessageReader=i.MessageReader,t.StreamMessageReader=i.StreamMessageReader,t.IPCMessageReader=i.IPCMessageReader,t.SocketMessageReader=i.SocketMessageReader;const a=r(59725);t.MessageWriter=a.MessageWriter,t.StreamMessageWriter=a.StreamMessageWriter,t.IPCMessageWriter=a.IPCMessageWriter,t.SocketMessageWriter=a.SocketMessageWriter;const c=r(23680);t.Disposable=c.Disposable,t.Event=c.Event,t.Emitter=c.Emitter;const l=r(83126);t.CancellationTokenSource=l.CancellationTokenSource,t.CancellationToken=l.CancellationToken;const u=r(10397);var d,h,p,f,g,m,y,v;n(r(33377)),n(r(91609)),function(e){e.type=new s.NotificationType("$/cancelRequest")}(d||(d={})),function(e){e.type=new s.NotificationType("$/progress")}(h||(h={})),t.ProgressType=class{constructor(){}},t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(p=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){if(!o.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":default:return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(p=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(f=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new s.NotificationType("$/setTraceNotification")}(g=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new s.NotificationType("$/logTraceNotification")}(m=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(y=t.ConnectionErrors||(t.ConnectionErrors={}));class _ extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,_.prototype)}}function b(e,t,r,n){let i=0,a=0,b=0;const S="2.0";let E,w,A,T,C=Object.create(null),I=Object.create(null),R=new Map,O=new u.LinkedMap,k=Object.create(null),N=Object.create(null),P=p.Off,M=f.Text,L=v.New,B=new c.Emitter,D=new c.Emitter,x=new c.Emitter,U=new c.Emitter,j=new c.Emitter;function F(e){return"req-"+e.toString()}function H(e){}function W(){return L===v.Listening}function q(){return L===v.Closed}function z(){return L===v.Disposed}function G(){L!==v.New&&L!==v.Listening||(L=v.Closed,D.fire(void 0))}function $(){A||0===O.size||(A=setImmediate((()=>{A=void 0,function(){if(0===O.size)return;let e=O.shift();try{s.isRequestMessage(e)?function(e){if(z())return;function r(r,n,o){let i={jsonrpc:S,id:e.id};r instanceof s.ResponseError?i.error=r.toJson():i.result=void 0===r?null:r,J(i,n,o),t.write(i)}function n(r,n,o){let s={jsonrpc:S,id:e.id,error:r.toJson()};J(s,n,o),t.write(s)}!function(e){if(P!==p.Off&&T)if(M===f.Text){let t;P===p.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),T.log(`Received request '${e.method} - (${e.id})'.`,t)}else K("receive-request",e)}(e);let i,a,c=C[e.method];c&&(i=c.type,a=c.handler);let u=Date.now();if(a||E){let c=new l.CancellationTokenSource,d=String(e.id);N[d]=c;try{let l;l=void 0===e.params||void 0!==i&&0===i.numberOfParams?a?a(c.token):E(e.method,c.token):o.array(e.params)&&(void 0===i||i.numberOfParams>1)?a?a(...e.params,c.token):E(e.method,...e.params,c.token):a?a(e.params,c.token):E(e.method,e.params,c.token);let h=l;l?h.then?h.then((t=>{delete N[d],r(t,e.method,u)}),(t=>{delete N[d],t instanceof s.ResponseError?n(t,e.method,u):t&&o.string(t.message)?n(new s.ResponseError(s.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):n(new s.ResponseError(s.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)})):(delete N[d],r(l,e.method,u)):(delete N[d],function(r,n,o){void 0===r&&(r=null);let s={jsonrpc:S,id:e.id,result:r};J(s,n,o),t.write(s)}(l,e.method,u))}catch(t){delete N[d],t instanceof s.ResponseError?r(t,e.method,u):t&&o.string(t.message)?n(new s.ResponseError(s.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):n(new s.ResponseError(s.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)}}else n(new s.ResponseError(s.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,u)}(e):s.isNotificationMessage(e)?function(e){if(z())return;let t,n;if(e.method===d.type.method)n=e=>{let t=e.id,r=N[String(t)];r&&r.cancel()};else{let r=I[e.method];r&&(n=r.handler,t=r.type)}if(n||w)try{!function(e){if(P!==p.Off&&T&&e.method!==m.type.method)if(M===f.Text){let t;P===p.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),T.log(`Received notification '${e.method}'.`,t)}else K("receive-notification",e)}(e),void 0===e.params||void 0!==t&&0===t.numberOfParams?n?n():w(e.method):o.array(e.params)&&(void 0===t||t.numberOfParams>1)?n?n(...e.params):w(e.method,...e.params):n?n(e.params):w(e.method,e.params)}catch(t){t.message?r.error(`Notification handler '${e.method}' failed with message: ${t.message}`):r.error(`Notification handler '${e.method}' failed unexpectedly.`)}else x.fire(e)}(e):s.isResponseMessage(e)?function(e){if(!z())if(null===e.id)e.error?r.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):r.error("Received response message without id. No further error information provided.");else{let t=String(e.id),n=k[t];if(function(e,t){if(P!==p.Off&&T)if(M===f.Text){let r;if(P===p.Verbose&&(e.error&&e.error.data?r=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?r=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),t){let n=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";T.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${n}`,r)}else T.log(`Received response ${e.id} without active response promise.`,r)}else K("receive-response",e)}(e,n),n){delete k[t];try{if(e.error){let t=e.error;n.reject(new s.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(e){e.message?r.error(`Response handler '${n.method}' failed with message: ${e.message}`):r.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void r.error("Received empty message.");r.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(o.string(t.id)||o.number(t.id)){let e=String(t.id),r=k[e];r&&r.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{$()}}()})))}e.onClose(G),e.onError((function(e){B.fire([e,void 0,void 0])})),t.onClose(G),t.onError((function(e){B.fire(e)}));let V=e=>{try{if(s.isNotificationMessage(e)&&e.method===d.type.method){let r=F(e.params.id),o=O.get(r);if(s.isRequestMessage(o)){let s=n&&n.cancelUndispatched?n.cancelUndispatched(o,H):void 0;if(s&&(void 0!==s.error||void 0!==s.result))return O.delete(r),s.id=o.id,J(s,e.method,Date.now()),void t.write(s)}}!function(e,t){var r;s.isRequestMessage(t)?e.set(F(t.id),t):s.isResponseMessage(t)?e.set(null===(r=t.id)?"res-unknown-"+(++b).toString():"res-"+r.toString(),t):e.set("not-"+(++a).toString(),t)}(O,e)}finally{$()}};function J(e,t,r){if(P!==p.Off&&T)if(M===f.Text){let n;P===p.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),T.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-r}ms`,n)}else K("send-response",e)}function K(e,t){if(!T||P===p.Off)return;const r={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};T.log(r)}function Q(){if(q())throw new _(y.Closed,"Connection is closed.");if(z())throw new _(y.Disposed,"Connection is disposed.")}function Y(e){return void 0===e?null:e}function X(e,t){let r,n=e.numberOfParams;switch(n){case 0:r=null;break;case 1:r=Y(t[0]);break;default:r=[];for(let e=0;e<t.length&&e<n;e++)r.push(Y(t[e]));if(t.length<n)for(let e=t.length;e<n;e++)r.push(null)}return r}let Z={sendNotification:(e,...r)=>{let n,s;if(Q(),o.string(e))switch(n=e,r.length){case 0:s=null;break;case 1:s=r[0];break;default:s=r}else n=e.method,s=X(e,r);let i={jsonrpc:S,method:n,params:s};!function(e){if(P!==p.Off&&T)if(M===f.Text){let t;P===p.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),T.log(`Sending notification '${e.method}'.`,t)}else K("send-notification",e)}(i),t.write(i)},onNotification:(e,t)=>{Q(),o.func(e)?w=e:t&&(o.string(e)?I[e]={type:void 0,handler:t}:I[e.method]={type:e,handler:t})},onProgress:(e,t,r)=>{if(R.has(t))throw new Error(`Progress handler for token ${t} already registered`);return R.set(t,r),{dispose:()=>{R.delete(t)}}},sendProgress:(e,t,r)=>{Z.sendNotification(h.type,{token:t,value:r})},onUnhandledProgress:U.event,sendRequest:(e,...r)=>{let n,a,c;if(Q(),function(){if(!W())throw new Error("Call listen() first.")}(),o.string(e))switch(n=e,r.length){case 0:a=null;break;case 1:l.CancellationToken.is(r[0])?(a=null,c=r[0]):a=Y(r[0]);break;default:const e=r.length-1;l.CancellationToken.is(r[e])?(c=r[e],a=2===r.length?Y(r[0]):r.slice(0,e).map((e=>Y(e)))):a=r.map((e=>Y(e)))}else{n=e.method,a=X(e,r);let t=e.numberOfParams;c=l.CancellationToken.is(r[t])?r[t]:void 0}let u=i++,h=new Promise(((e,r)=>{let o={jsonrpc:S,id:u,method:n,params:a},i={method:n,timerStart:Date.now(),resolve:e,reject:r};!function(e){if(P!==p.Off&&T)if(M===f.Text){let t;P===p.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),T.log(`Sending request '${e.method} - (${e.id})'.`,t)}else K("send-request",e)}(o);try{t.write(o)}catch(e){i.reject(new s.ResponseError(s.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),i=null}i&&(k[String(u)]=i)}));return c&&c.onCancellationRequested((()=>{Z.sendNotification(d.type,{id:u})})),h},onRequest:(e,t)=>{Q(),o.func(e)?E=e:t&&(o.string(e)?C[e]={type:void 0,handler:t}:C[e.method]={type:e,handler:t})},trace:(e,t,r)=>{let n=!1,s=f.Text;void 0!==r&&(o.boolean(r)?n=r:(n=r.sendNotification||!1,s=r.traceFormat||f.Text)),P=e,M=s,T=P===p.Off?void 0:t,!n||q()||z()||Z.sendNotification(g.type,{value:p.toString(e)})},onError:B.event,onClose:D.event,onUnhandledNotification:x.event,onDispose:j.event,dispose:()=>{if(z())return;L=v.Disposed,j.fire(void 0);let r=new Error("Connection got disposed.");Object.keys(k).forEach((e=>{k[e].reject(r)})),k=Object.create(null),N=Object.create(null),O=new u.LinkedMap,o.func(t.dispose)&&t.dispose(),o.func(e.dispose)&&e.dispose()},listen:()=>{Q(),function(){if(W())throw new _(y.AlreadyListening,"Connection is already listening")}(),L=v.Listening,e.listen(V)},inspect:()=>{console.log("inspect")}};return Z.onNotification(m.type,(e=>{P!==p.Off&&T&&T.log(e.message,P===p.Verbose?e.verbose:void 0)})),Z.onNotification(h.type,(e=>{const t=R.get(e.token);t?t(e.value):U.fire(e)})),Z}t.ConnectionError=_,(t.ConnectionStrategy||(t.ConnectionStrategy={})).is=function(e){let t=e;return t&&o.func(t.cancelUndispatched)},function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(v||(v={})),t.createMessageConnection=function(e,r,n,o){n||(n=t.NullLogger);let s=void 0!==(c=e).listen&&void 0===c.read?e:new i.StreamMessageReader(e);var c;let l=function(e){return void 0!==e.write&&void 0===e.end}(r)?r:new a.StreamMessageWriter(r);return b(s,l,n,o)}},26386:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(23680),o=r(62593);let s=8192,i=Buffer.from("\r","ascii")[0],a=Buffer.from("\n","ascii")[0];class c{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(s)}append(e){var t=e;if("string"==typeof e){var r=e,n=Buffer.byteLength(r,this.encoding);(t=Buffer.allocUnsafe(n)).write(r,0,n,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var o=(Math.ceil((this.index+t.length)/s)+1)*s;0===this.index?(this.buffer=Buffer.allocUnsafe(o),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],o)}this.index+=t.length}tryReadHeaders(){let e,t=0;for(;t+3<this.index&&(this.buffer[t]!==i||this.buffer[t+1]!==a||this.buffer[t+2]!==i||this.buffer[t+3]!==a);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split("\r\n").forEach((t=>{let r=t.indexOf(":");if(-1===r)throw new Error("Message header must separate key and value using :");let n=t.substr(0,r),o=t.substr(r+1).trim();e[n]=o}));let r=t+4;return this.buffer=this.buffer.slice(r),this.index=this.index-r,e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),r=e;return this.buffer.copy(this.buffer,0,r),this.index=this.index-r,t}get numberOfBytes(){return this.index}}(t.MessageReader||(t.MessageReader={})).is=function(e){let t=e;return t&&o.func(t.listen)&&o.func(t.dispose)&&o.func(t.onError)&&o.func(t.onClose)&&o.func(t.onPartialMessage)};class l{constructor(){this.errorEmitter=new n.Emitter,this.closeEmitter=new n.Emitter,this.partialMessageEmitter=new n.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${o.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=l;class u extends l{constructor(e,t="utf8"){super(),this.readable=e,this.buffer=new c(t),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",(e=>{this.onData(e)})),this.readable.on("error",(e=>this.fireError(e))),this.readable.on("close",(()=>this.fireClose()))}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){let e=this.buffer.tryReadHeaders();if(!e)return;let t=e["Content-Length"];if(!t)throw new Error("Header must provide a Content-Length property.");let r=parseInt(t);if(isNaN(r))throw new Error("Content-Length value must be a number.");this.nextMessageLength=r}var t=this.buffer.tryReadContent(this.nextMessageLength);if(null===t)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var r=JSON.parse(t);this.callback(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}t.StreamMessageReader=u,t.IPCMessageReader=class extends l{constructor(e){super(),this.process=e;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose()))}listen(e){this.process.on("message",e)}},t.SocketMessageReader=class extends u{constructor(e,t="utf-8"){super(e,t)}}},59725:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(23680),o=r(62593);let s="Content-Length: ",i="\r\n";(t.MessageWriter||(t.MessageWriter={})).is=function(e){let t=e;return t&&o.func(t.dispose)&&o.func(t.onClose)&&o.func(t.onError)&&o.func(t.write)};class a{constructor(){this.errorEmitter=new n.Emitter,this.closeEmitter=new n.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${o.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=a,t.StreamMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.writable=e,this.encoding=t,this.errorCount=0,this.writable.on("error",(e=>this.fireError(e))),this.writable.on("close",(()=>this.fireClose()))}write(e){let t=JSON.stringify(e),r=Buffer.byteLength(t,this.encoding),n=[s,r.toString(),i,i];try{this.writable.write(n.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}},t.IPCMessageWriter=class extends a{constructor(e){super(),this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose))}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,(t=>{this.sending=!1,t?(this.errorCount++,this.fireError(t,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}},t.SocketMessageWriter=class extends a{constructor(e,t="utf8"){super(),this.socket=e,this.queue=[],this.sending=!1,this.encoding=t,this.errorCount=0,this.socket.on("error",(e=>this.fireError(e))),this.socket.on("close",(()=>this.fireClose()))}dispose(){super.dispose(),this.socket.destroy()}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){let t=JSON.stringify(e),r=Buffer.byteLength(t,this.encoding),n=[s,r.toString(),i,i];try{this.sending=!0,this.socket.write(n.join(""),"ascii",(r=>{r&&this.handleError(r,e);try{this.socket.write(t,this.encoding,(t=>{this.sending=!1,t?this.handleError(t,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(r){this.handleError(r,e)}}))}catch(t){this.handleError(t,e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}}},73234:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(62593);var o;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.ContentModified=-32801,e.MessageWriteError=1,e.MessageReadError=2}(o=t.ErrorCodes||(t.ErrorCodes={}));class s extends Error{constructor(e,t,r){super(t),this.code=n.number(e)?e:o.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,s.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=s;class i{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}t.AbstractMessageType=i,t.RequestType0=class extends i{constructor(e){super(e,0)}},t.RequestType=class extends i{constructor(e){super(e,1)}},t.RequestType1=class extends i{constructor(e){super(e,1)}},t.RequestType2=class extends i{constructor(e){super(e,2)}},t.RequestType3=class extends i{constructor(e){super(e,3)}},t.RequestType4=class extends i{constructor(e){super(e,4)}},t.RequestType5=class extends i{constructor(e){super(e,5)}},t.RequestType6=class extends i{constructor(e){super(e,6)}},t.RequestType7=class extends i{constructor(e){super(e,7)}},t.RequestType8=class extends i{constructor(e){super(e,8)}},t.RequestType9=class extends i{constructor(e){super(e,9)}},t.NotificationType=class extends i{constructor(e){super(e,1),this._=void 0}},t.NotificationType0=class extends i{constructor(e){super(e,0)}},t.NotificationType1=class extends i{constructor(e){super(e,1)}},t.NotificationType2=class extends i{constructor(e){super(e,2)}},t.NotificationType3=class extends i{constructor(e){super(e,3)}},t.NotificationType4=class extends i{constructor(e){super(e,4)}},t.NotificationType5=class extends i{constructor(e){super(e,5)}},t.NotificationType6=class extends i{constructor(e){super(e,6)}},t.NotificationType7=class extends i{constructor(e){super(e,7)}},t.NotificationType8=class extends i{constructor(e){super(e,8)}},t.NotificationType9=class extends i{constructor(e){super(e,9)}},t.isRequestMessage=function(e){let t=e;return t&&n.string(t.method)&&(n.string(t.id)||n.number(t.id))},t.isNotificationMessage=function(e){let t=e;return t&&n.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){let t=e;return t&&(void 0!==t.result||!!t.error)&&(n.string(t.id)||n.number(t.id)||null===t.id)}},33377:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(71017),o=r(22037),s=r(6113),i=r(41808),a=r(26386),c=r(59725);t.generateRandomPipeName=function(){const e=s.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`:n.join(o.tmpdir(),`vscode-${e}.sock`)},t.createClientPipeTransport=function(e,t="utf-8"){let r,n=new Promise(((e,t)=>{r=e}));return new Promise(((o,s)=>{let l=i.createServer((e=>{l.close(),r([new a.SocketMessageReader(e,t),new c.SocketMessageWriter(e,t)])}));l.on("error",s),l.listen(e,(()=>{l.removeListener("error",s),o({onConnected:()=>n})}))}))},t.createServerPipeTransport=function(e,t="utf-8"){const r=i.createConnection(e);return[new a.SocketMessageReader(r,t),new c.SocketMessageWriter(r,t)]}},91609:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(41808),o=r(26386),s=r(59725);t.createClientSocketTransport=function(e,t="utf-8"){let r,i=new Promise(((e,t)=>{r=e}));return new Promise(((a,c)=>{let l=n.createServer((e=>{l.close(),r([new o.SocketMessageReader(e,t),new s.SocketMessageWriter(e,t)])}));l.on("error",c),l.listen(e,"127.0.0.1",(()=>{l.removeListener("error",c),a({onConnected:()=>i})}))}))},t.createServerSocketTransport=function(e,t="utf-8"){const r=n.createConnection(e,"127.0.0.1");return[new o.SocketMessageReader(r,t),new s.SocketMessageWriter(r,t)]}},67478:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(63203),o=r(9763);function s(e){return{send:t=>e.send(t),onMessage:t=>e.onmessage=e=>t(e.data),onError:t=>e.onerror=e=>{"message"in e&&t(e.message)},onClose:t=>e.onclose=e=>t(e.code,e.reason),dispose:()=>e.close()}}t.listen=function(e){const{webSocket:t,onConnection:r}=e,i=e.logger||new o.ConsoleLogger;t.onopen=()=>{const e=s(t),o=n.createWebSocketConnection(e,i);r(o)}},t.toSocket=s},43064:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(23680);t.Disposable=n.Disposable,t.DisposableCollection=class{constructor(){this.disposables=[]}dispose(){for(;0!==this.disposables.length;)this.disposables.pop().dispose()}push(e){const t=this.disposables;return t.push(e),{dispose(){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}}}}},19614:(e,t,r)=>{"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(8231)),n(r(73234)),n(r(43064)),n(r(63203)),n(r(9763)),n(r(67478))},9763:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLogger=class{error(e){console.error(e)}warn(e){console.warn(e)}info(e){console.info(e)}log(e){console.log(e)}debug(e){console.debug(e)}}},11860:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8231),o=r(67323),s=r(41446);t.createWebSocketConnection=function(e,t){const r=new o.WebSocketMessageReader(e),i=new s.WebSocketMessageWriter(e),a=n.createMessageConnection(r,i,t);return a.onClose((()=>a.dispose())),a}},63203:(e,t,r)=>{"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(67323)),n(r(41446)),n(r(11860))},67323:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(26386);class o extends n.AbstractMessageReader{constructor(e){super(),this.socket=e,this.state="initial",this.events=[],this.socket.onMessage((e=>this.readMessage(e))),this.socket.onError((e=>this.fireError(e))),this.socket.onClose(((e,t)=>{if(1e3!==e){const r={name:""+e,message:`Error during socket reconnect: code = ${e}, reason = ${t}`};this.fireError(r)}this.fireClose()}))}listen(e){if("initial"===this.state)for(this.state="listening",this.callback=e;0!==this.events.length;){const e=this.events.pop();e.message?this.readMessage(e.message):e.error?this.fireError(e.error):this.fireClose()}}readMessage(e){if("initial"===this.state)this.events.splice(0,0,{message:e});else if("listening"===this.state){const t=JSON.parse(e);this.callback(t)}}fireError(e){"initial"===this.state?this.events.splice(0,0,{error:e}):"listening"===this.state&&super.fireError(e)}fireClose(){"initial"===this.state?this.events.splice(0,0,{}):"listening"===this.state&&super.fireClose(),this.state="closed"}}t.WebSocketMessageReader=o},41446:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(59725);class o extends n.AbstractMessageWriter{constructor(e){super(),this.socket=e,this.errorCount=0}write(e){try{const t=JSON.stringify(e);this.socket.send(t)}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}}t.WebSocketMessageWriter=o},42660:function(e,t){var r;r=function(e){"use strict";const t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:e=>`Symbol(${e})`;function r(){}const n="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0;function o(e){return"object"==typeof e&&null!==e||"function"==typeof e}const s=r,i=Promise,a=Promise.prototype.then,c=Promise.resolve.bind(i),l=Promise.reject.bind(i);function u(e){return new i(e)}function d(e){return c(e)}function h(e){return l(e)}function p(e,t,r){return a.call(e,t,r)}function f(e,t,r){p(p(e,t,r),void 0,s)}function g(e,t){f(e,t)}function m(e,t){f(e,void 0,t)}function y(e,t,r){return p(e,t,r)}function v(e){p(e,void 0,s)}const _=(()=>{const e=n&&n.queueMicrotask;if("function"==typeof e)return e;const t=d(void 0);return e=>p(t,e)})();function b(e,t,r){if("function"!=typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,r)}function S(e,t,r){try{return d(b(e,t,r))}catch(e){return h(e)}}class E{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){const t=this._back;let r=t;16383===t._elements.length&&(r={_elements:[],_next:void 0}),t._elements.push(e),r!==t&&(this._back=r,t._next=r),++this._size}shift(){const e=this._front;let t=e;const r=this._cursor;let n=r+1;const o=e._elements,s=o[r];return 16384===n&&(t=e._next,n=0),--this._size,this._cursor=n,e!==t&&(this._front=t),o[r]=void 0,s}forEach(e){let t=this._cursor,r=this._front,n=r._elements;for(;!(t===n.length&&void 0===r._next||t===n.length&&(r=r._next,n=r._elements,t=0,0===n.length));)e(n[t]),++t}peek(){const e=this._front,t=this._cursor;return e._elements[t]}}function w(e,t){e._ownerReadableStream=t,t._reader=e,"readable"===t._state?I(e):"closed"===t._state?function(e){I(e),k(e)}(e):R(e,t._storedError)}function A(e,t){return br(e._ownerReadableStream,t)}function T(e){"readable"===e._ownerReadableStream._state?O(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(e,t){R(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness"))}(e),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function C(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function I(e){e._closedPromise=u(((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r}))}function R(e,t){I(e),O(e,t)}function O(e,t){void 0!==e._closedPromise_reject&&(v(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function k(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}const N=t("[[AbortSteps]]"),P=t("[[ErrorSteps]]"),M=t("[[CancelSteps]]"),L=t("[[PullSteps]]"),B=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},D=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function x(e,t){if(void 0!==e&&"object"!=typeof(r=e)&&"function"!=typeof r)throw new TypeError(`${t} is not an object.`);var r}function U(e,t){if("function"!=typeof e)throw new TypeError(`${t} is not a function.`)}function j(e,t){if(!function(e){return"object"==typeof e&&null!==e||"function"==typeof e}(e))throw new TypeError(`${t} is not an object.`)}function F(e,t,r){if(void 0===e)throw new TypeError(`Parameter ${t} is required in '${r}'.`)}function H(e,t,r){if(void 0===e)throw new TypeError(`${t} is required in '${r}'.`)}function W(e){return Number(e)}function q(e){return 0===e?0:e}function z(e,t){const r=Number.MAX_SAFE_INTEGER;let n=Number(e);if(n=q(n),!B(n))throw new TypeError(`${t} is not a finite number`);if(n=function(e){return q(D(e))}(n),n<0||n>r)throw new TypeError(`${t} is outside the accepted range of 0 to ${r}, inclusive`);return B(n)&&0!==n?n:0}function G(e,t){if(!vr(e))throw new TypeError(`${t} is not a ReadableStream.`)}function $(e){return new Y(e)}function V(e,t){e._reader._readRequests.push(t)}function J(e,t,r){const n=e._reader._readRequests.shift();r?n._closeSteps():n._chunkSteps(t)}function K(e){return e._reader._readRequests.length}function Q(e){const t=e._reader;return void 0!==t&&!!X(t)}class Y{constructor(e){if(F(e,1,"ReadableStreamDefaultReader"),G(e,"First parameter"),_r(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");w(this,e),this._readRequests=new E}get closed(){return X(this)?this._closedPromise:h(ee("closed"))}cancel(e){return X(this)?void 0===this._ownerReadableStream?h(C("cancel")):A(this,e):h(ee("cancel"))}read(){if(!X(this))return h(ee("read"));if(void 0===this._ownerReadableStream)return h(C("read from"));let e,t;const r=u(((r,n)=>{e=r,t=n}));return Z(this,{_chunkSteps:t=>e({value:t,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:e=>t(e)}),r}releaseLock(){if(!X(this))throw ee("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");T(this)}}}function X(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof Y}function Z(e,t){const r=e._ownerReadableStream;r._disturbed=!0,"closed"===r._state?t._closeSteps():"errored"===r._state?t._errorSteps(r._storedError):r._readableStreamController[L](t)}function ee(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties(Y.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Y.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});const te=Object.getPrototypeOf(Object.getPrototypeOf((async function*(){})).prototype);class re{constructor(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}next(){const e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?y(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){const t=()=>this._returnSteps(e);return this._ongoingPromise?y(this._ongoingPromise,t,t):t()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const e=this._reader;if(void 0===e._ownerReadableStream)return h(C("iterate"));let t,r;const n=u(((e,n)=>{t=e,r=n}));return Z(e,{_chunkSteps:e=>{this._ongoingPromise=void 0,_((()=>t({value:e,done:!1})))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,T(e),t({value:void 0,done:!0})},_errorSteps:t=>{this._ongoingPromise=void 0,this._isFinished=!0,T(e),r(t)}}),n}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;const t=this._reader;if(void 0===t._ownerReadableStream)return h(C("finish iterating"));if(!this._preventCancel){const r=A(t,e);return T(t),y(r,(()=>({value:e,done:!0})))}return T(t),d({value:e,done:!0})}}const ne={next(){return oe(this)?this._asyncIteratorImpl.next():h(se("next"))},return(e){return oe(this)?this._asyncIteratorImpl.return(e):h(se("return"))}};function oe(e){if(!o(e))return!1;if(!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof re}catch(e){return!1}}function se(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}void 0!==te&&Object.setPrototypeOf(ne,te);const ie=Number.isNaN||function(e){return e!=e};function ae(e){return e.slice()}function ce(e,t,r,n,o){new Uint8Array(e).set(new Uint8Array(r,n,o),t)}function le(e,t,r){if(e.slice)return e.slice(t,r);const n=r-t,o=new ArrayBuffer(n);return ce(o,0,e,t,n),o}function ue(e){const t=le(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function de(e){const t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function he(e,t,r){if("number"!=typeof(n=r)||ie(n)||n<0||r===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var n;e._queue.push({value:t,size:r}),e._queueTotalSize+=r}function pe(e){e._queue=new E,e._queueTotalSize=0}class fe{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!ye(this))throw je("view");return this._view}respond(e){if(!ye(this))throw je("respond");if(F(e,1,"respond"),e=z(e,"First parameter"),void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");this._view.buffer,De(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!ye(this))throw je("respondWithNewView");if(F(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");e.buffer,xe(this._associatedReadableByteStreamController,e)}}Object.defineProperties(fe.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(fe.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class ge{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!me(this))throw Fe("byobRequest");return Le(this)}get desiredSize(){if(!me(this))throw Fe("desiredSize");return Be(this)}close(){if(!me(this))throw Fe("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");const e=this._controlledReadableByteStream._state;if("readable"!==e)throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);Ne(this)}enqueue(e){if(!me(this))throw Fe("enqueue");if(F(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(0===e.byteLength)throw new TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");const t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be enqueued to`);Pe(this,e)}error(e){if(!me(this))throw Fe("error");Me(this,e)}[M](e){_e(this),pe(this);const t=this._cancelAlgorithm(e);return ke(this),t}[L](e){const t=this._controlledReadableByteStream;if(this._queueTotalSize>0){const t=this._queue.shift();this._queueTotalSize-=t.byteLength,Te(this);const r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return void e._chunkSteps(r)}const r=this._autoAllocateChunkSize;if(void 0!==r){let t;try{t=new ArrayBuffer(r)}catch(t){return void e._errorSteps(t)}const n={buffer:t,bufferByteLength:r,byteOffset:0,byteLength:r,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(n)}V(t,e),ve(this)}}function me(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof ge}function ye(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof fe}function ve(e){const t=function(e){const t=e._controlledReadableByteStream;return"readable"===t._state&&!e._closeRequested&&!!e._started&&(!!(Q(t)&&K(t)>0)||!!(ze(t)&&qe(t)>0)||Be(e)>0)}(e);t&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,f(e._pullAlgorithm(),(()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,ve(e))}),(t=>{Me(e,t)}))))}function _e(e){Ce(e),e._pendingPullIntos=new E}function be(e,t){let r=!1;"closed"===e._state&&(r=!0);const n=Se(t);"default"===t.readerType?J(e,n,r):function(e,t,r){const n=e._reader._readIntoRequests.shift();r?n._closeSteps(t):n._chunkSteps(t)}(e,n,r)}function Se(e){const t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function Ee(e,t,r,n){e._queue.push({buffer:t,byteOffset:r,byteLength:n}),e._queueTotalSize+=n}function we(e,t){const r=t.elementSize,n=t.bytesFilled-t.bytesFilled%r,o=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),s=t.bytesFilled+o,i=s-s%r;let a=o,c=!1;i>n&&(a=i-t.bytesFilled,c=!0);const l=e._queue;for(;a>0;){const r=l.peek(),n=Math.min(a,r.byteLength),o=t.byteOffset+t.bytesFilled;ce(t.buffer,o,r.buffer,r.byteOffset,n),r.byteLength===n?l.shift():(r.byteOffset+=n,r.byteLength-=n),e._queueTotalSize-=n,Ae(0,n,t),a-=n}return c}function Ae(e,t,r){r.bytesFilled+=t}function Te(e){0===e._queueTotalSize&&e._closeRequested?(ke(e),Sr(e._controlledReadableByteStream)):ve(e)}function Ce(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Ie(e){for(;e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;const t=e._pendingPullIntos.peek();we(e,t)&&(Oe(e),be(e._controlledReadableByteStream,t))}}function Re(e,t){const r=e._pendingPullIntos.peek();Ce(e),"closed"===e._controlledReadableByteStream._state?function(e,t){const r=e._controlledReadableByteStream;if(ze(r))for(;qe(r)>0;)be(r,Oe(e))}(e):function(e,t,r){if(Ae(0,t,r),r.bytesFilled<r.elementSize)return;Oe(e);const n=r.bytesFilled%r.elementSize;if(n>0){const t=r.byteOffset+r.bytesFilled,o=le(r.buffer,t-n,t);Ee(e,o,0,o.byteLength)}r.bytesFilled-=n,be(e._controlledReadableByteStream,r),Ie(e)}(e,t,r),ve(e)}function Oe(e){return e._pendingPullIntos.shift()}function ke(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Ne(e){const t=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===t._state)if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){const t=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Me(e,t),t}ke(e),Sr(t)}}function Pe(e,t){const r=e._controlledReadableByteStream;if(e._closeRequested||"readable"!==r._state)return;const n=t.buffer,o=t.byteOffset,s=t.byteLength,i=n;if(e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek();t.buffer,t.buffer=t.buffer}Ce(e),Q(r)?0===K(r)?Ee(e,i,o,s):(e._pendingPullIntos.length>0&&Oe(e),J(r,new Uint8Array(i,o,s),!1)):ze(r)?(Ee(e,i,o,s),Ie(e)):Ee(e,i,o,s),ve(e)}function Me(e,t){const r=e._controlledReadableByteStream;"readable"===r._state&&(_e(e),pe(e),ke(e),Er(r,t))}function Le(e){if(null===e._byobRequest&&e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek(),r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),n=Object.create(fe.prototype);!function(e,t,r){e._associatedReadableByteStreamController=t,e._view=r}(n,e,r),e._byobRequest=n}return e._byobRequest}function Be(e){const t=e._controlledReadableByteStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function De(e,t){const r=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===t)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(r.bytesFilled+t>r.byteLength)throw new RangeError("bytesWritten out of range")}r.buffer=r.buffer,Re(e,t)}function xe(e,t){const r=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t.byteLength)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===t.byteLength)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(r.byteOffset+r.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(r.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(r.bytesFilled+t.byteLength>r.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");const n=t.byteLength;r.buffer=t.buffer,Re(e,n)}function Ue(e,t,r,n,o,s,i){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,pe(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=s,t._pullAlgorithm=n,t._cancelAlgorithm=o,t._autoAllocateChunkSize=i,t._pendingPullIntos=new E,e._readableStreamController=t,f(d(r()),(()=>{t._started=!0,ve(t)}),(e=>{Me(t,e)}))}function je(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Fe(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function He(e){return new Ge(e)}function We(e,t){e._reader._readIntoRequests.push(t)}function qe(e){return e._reader._readIntoRequests.length}function ze(e){const t=e._reader;return void 0!==t&&!!$e(t)}Object.defineProperties(ge.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(ge.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});class Ge{constructor(e){if(F(e,1,"ReadableStreamBYOBReader"),G(e,"First parameter"),_r(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!me(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");w(this,e),this._readIntoRequests=new E}get closed(){return $e(this)?this._closedPromise:h(Je("closed"))}cancel(e){return $e(this)?void 0===this._ownerReadableStream?h(C("cancel")):A(this,e):h(Je("cancel"))}read(e){if(!$e(this))return h(Je("read"));if(!ArrayBuffer.isView(e))return h(new TypeError("view must be an array buffer view"));if(0===e.byteLength)return h(new TypeError("view must have non-zero byteLength"));if(0===e.buffer.byteLength)return h(new TypeError("view's buffer must have non-zero byteLength"));if(e.buffer,void 0===this._ownerReadableStream)return h(C("read from"));let t,r;const n=u(((e,n)=>{t=e,r=n}));return Ve(this,e,{_chunkSteps:e=>t({value:e,done:!1}),_closeSteps:e=>t({value:e,done:!0}),_errorSteps:e=>r(e)}),n}releaseLock(){if(!$e(this))throw Je("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");T(this)}}}function $e(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof Ge}function Ve(e,t,r){const n=e._ownerReadableStream;n._disturbed=!0,"errored"===n._state?r._errorSteps(n._storedError):function(e,t,r){const n=e._controlledReadableByteStream;let o=1;t.constructor!==DataView&&(o=t.constructor.BYTES_PER_ELEMENT);const s=t.constructor,i=t.buffer,a={buffer:i,bufferByteLength:i.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:o,viewConstructor:s,readerType:"byob"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(a),void We(n,r);if("closed"!==n._state){if(e._queueTotalSize>0){if(we(e,a)){const t=Se(a);return Te(e),void r._chunkSteps(t)}if(e._closeRequested){const t=new TypeError("Insufficient bytes to fill elements in the given buffer");return Me(e,t),void r._errorSteps(t)}}e._pendingPullIntos.push(a),We(n,r),ve(e)}else{const e=new s(a.buffer,a.byteOffset,0);r._closeSteps(e)}}(n._readableStreamController,t,r)}function Je(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Ke(e,t){const{highWaterMark:r}=e;if(void 0===r)return t;if(ie(r)||r<0)throw new RangeError("Invalid highWaterMark");return r}function Qe(e){const{size:t}=e;return t||(()=>1)}function Ye(e,t){x(e,t);const r=null==e?void 0:e.highWaterMark,n=null==e?void 0:e.size;return{highWaterMark:void 0===r?void 0:W(r),size:void 0===n?void 0:Xe(n,`${t} has member 'size' that`)}}function Xe(e,t){return U(e,t),t=>W(e(t))}function Ze(e,t,r){return U(e,r),r=>S(e,t,[r])}function et(e,t,r){return U(e,r),()=>S(e,t,[])}function tt(e,t,r){return U(e,r),r=>b(e,t,[r])}function rt(e,t,r){return U(e,r),(r,n)=>S(e,t,[r,n])}function nt(e,t){if(!ct(e))throw new TypeError(`${t} is not a WritableStream.`)}Object.defineProperties(Ge.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Ge.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});const ot="function"==typeof AbortController;class st{constructor(e={},t={}){void 0===e?e=null:j(e,"First parameter");const r=Ye(t,"Second parameter"),n=function(e,t){x(e,t);const r=null==e?void 0:e.abort,n=null==e?void 0:e.close,o=null==e?void 0:e.start,s=null==e?void 0:e.type,i=null==e?void 0:e.write;return{abort:void 0===r?void 0:Ze(r,e,`${t} has member 'abort' that`),close:void 0===n?void 0:et(n,e,`${t} has member 'close' that`),start:void 0===o?void 0:tt(o,e,`${t} has member 'start' that`),write:void 0===i?void 0:rt(i,e,`${t} has member 'write' that`),type:s}}(e,"First parameter");if(at(this),void 0!==n.type)throw new RangeError("Invalid type is specified");const o=Qe(r);!function(e,t,r,n){const o=Object.create(Tt.prototype);let s=()=>{},i=()=>d(void 0),a=()=>d(void 0),c=()=>d(void 0);void 0!==t.start&&(s=()=>t.start(o)),void 0!==t.write&&(i=e=>t.write(e,o)),void 0!==t.close&&(a=()=>t.close()),void 0!==t.abort&&(c=e=>t.abort(e)),It(e,o,s,i,a,c,r,n)}(this,n,Ke(r,1),o)}get locked(){if(!ct(this))throw Lt("locked");return lt(this)}abort(e){return ct(this)?lt(this)?h(new TypeError("Cannot abort a stream that already has a writer")):ut(this,e):h(Lt("abort"))}close(){return ct(this)?lt(this)?h(new TypeError("Cannot close a stream that already has a writer")):gt(this)?h(new TypeError("Cannot close an already-closing stream")):dt(this):h(Lt("close"))}getWriter(){if(!ct(this))throw Lt("getWriter");return it(this)}}function it(e){return new vt(e)}function at(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new E,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function ct(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof st}function lt(e){return void 0!==e._writer}function ut(e,t){var r;if("closed"===e._state||"errored"===e._state)return d(void 0);e._writableStreamController._abortReason=t,null===(r=e._writableStreamController._abortController)||void 0===r||r.abort();const n=e._state;if("closed"===n||"errored"===n)return d(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;let o=!1;"erroring"===n&&(o=!0,t=void 0);const s=u(((r,n)=>{e._pendingAbortRequest={_promise:void 0,_resolve:r,_reject:n,_reason:t,_wasAlreadyErroring:o}}));return e._pendingAbortRequest._promise=s,o||pt(e,t),s}function dt(e){const t=e._state;if("closed"===t||"errored"===t)return h(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));const r=u(((t,r)=>{const n={_resolve:t,_reject:r};e._closeRequest=n})),n=e._writer;var o;return void 0!==n&&e._backpressure&&"writable"===t&&$t(n),he(o=e._writableStreamController,At,0),kt(o),r}function ht(e,t){"writable"!==e._state?ft(e):pt(e,t)}function pt(e,t){const r=e._writableStreamController;e._state="erroring",e._storedError=t;const n=e._writer;void 0!==n&&St(n,t),!function(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}(e)&&r._started&&ft(e)}function ft(e){e._state="errored",e._writableStreamController[P]();const t=e._storedError;if(e._writeRequests.forEach((e=>{e._reject(t)})),e._writeRequests=new E,void 0===e._pendingAbortRequest)return void mt(e);const r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring)return r._reject(t),void mt(e);f(e._writableStreamController[N](r._reason),(()=>{r._resolve(),mt(e)}),(t=>{r._reject(t),mt(e)}))}function gt(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function mt(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);const t=e._writer;void 0!==t&&Ft(t,e._storedError)}function yt(e,t){const r=e._writer;void 0!==r&&t!==e._backpressure&&(t?function(e){Wt(e)}(r):$t(r)),e._backpressure=t}Object.defineProperties(st.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(st.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});class vt{constructor(e){if(F(e,1,"WritableStreamDefaultWriter"),nt(e,"First parameter"),lt(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;const t=e._state;if("writable"===t)!gt(e)&&e._backpressure?Wt(this):zt(this),Ut(this);else if("erroring"===t)qt(this,e._storedError),Ut(this);else if("closed"===t)zt(this),Ut(this),Ht(this);else{const t=e._storedError;qt(this,t),jt(this,t)}}get closed(){return _t(this)?this._closedPromise:h(Dt("closed"))}get desiredSize(){if(!_t(this))throw Dt("desiredSize");if(void 0===this._ownerWritableStream)throw xt("desiredSize");return function(e){const t=e._ownerWritableStream,r=t._state;return"errored"===r||"erroring"===r?null:"closed"===r?0:Ot(t._writableStreamController)}(this)}get ready(){return _t(this)?this._readyPromise:h(Dt("ready"))}abort(e){return _t(this)?void 0===this._ownerWritableStream?h(xt("abort")):function(e,t){return ut(e._ownerWritableStream,t)}(this,e):h(Dt("abort"))}close(){if(!_t(this))return h(Dt("close"));const e=this._ownerWritableStream;return void 0===e?h(xt("close")):gt(e)?h(new TypeError("Cannot close an already-closing stream")):bt(this)}releaseLock(){if(!_t(this))throw Dt("releaseLock");void 0!==this._ownerWritableStream&&Et(this)}write(e){return _t(this)?void 0===this._ownerWritableStream?h(xt("write to")):wt(this,e):h(Dt("write"))}}function _t(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof vt}function bt(e){return dt(e._ownerWritableStream)}function St(e,t){"pending"===e._readyPromiseState?Gt(e,t):function(e,t){qt(e,t)}(e,t)}function Et(e){const t=e._ownerWritableStream,r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");St(e,r),function(e,t){"pending"===e._closedPromiseState?Ft(e,t):function(e,t){jt(e,t)}(e,t)}(e,r),t._writer=void 0,e._ownerWritableStream=void 0}function wt(e,t){const r=e._ownerWritableStream,n=r._writableStreamController,o=function(e,t){try{return e._strategySizeAlgorithm(t)}catch(t){return Nt(e,t),1}}(n,t);if(r!==e._ownerWritableStream)return h(xt("write to"));const s=r._state;if("errored"===s)return h(r._storedError);if(gt(r)||"closed"===s)return h(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===s)return h(r._storedError);const i=function(e){return u(((t,r)=>{const n={_resolve:t,_reject:r};e._writeRequests.push(n)}))}(r);return function(e,t,r){try{he(e,t,r)}catch(t){return void Nt(e,t)}const n=e._controlledWritableStream;gt(n)||"writable"!==n._state||yt(n,Pt(e)),kt(e)}(n,t,o),i}Object.defineProperties(vt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(vt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});const At={};class Tt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Ct(this))throw Bt("abortReason");return this._abortReason}get signal(){if(!Ct(this))throw Bt("signal");if(void 0===this._abortController)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(e){if(!Ct(this))throw Bt("error");"writable"===this._controlledWritableStream._state&&Mt(this,e)}[N](e){const t=this._abortAlgorithm(e);return Rt(this),t}[P](){pe(this)}}function Ct(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof Tt}function It(e,t,r,n,o,s,i,a){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,pe(t),t._abortReason=void 0,t._abortController=function(){if(ot)return new AbortController}(),t._started=!1,t._strategySizeAlgorithm=a,t._strategyHWM=i,t._writeAlgorithm=n,t._closeAlgorithm=o,t._abortAlgorithm=s;const c=Pt(t);yt(e,c),f(d(r()),(()=>{t._started=!0,kt(t)}),(r=>{t._started=!0,ht(e,r)}))}function Rt(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Ot(e){return e._strategyHWM-e._queueTotalSize}function kt(e){const t=e._controlledWritableStream;if(!e._started)return;if(void 0!==t._inFlightWriteRequest)return;if("erroring"===t._state)return void ft(t);if(0===e._queue.length)return;const r=e._queue.peek().value;r===At?function(e){const t=e._controlledWritableStream;(function(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0})(t),de(e);const r=e._closeAlgorithm();Rt(e),f(r,(()=>{!function(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,"erroring"===e._state&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";const t=e._writer;void 0!==t&&Ht(t)}(t)}),(e=>{!function(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),ht(e,t)}(t,e)}))}(e):function(e,t){const r=e._controlledWritableStream;!function(e){e._inFlightWriteRequest=e._writeRequests.shift()}(r),f(e._writeAlgorithm(t),(()=>{!function(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}(r);const t=r._state;if(de(e),!gt(r)&&"writable"===t){const t=Pt(e);yt(r,t)}kt(e)}),(t=>{"writable"===r._state&&Rt(e),function(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,ht(e,t)}(r,t)}))}(e,r)}function Nt(e,t){"writable"===e._controlledWritableStream._state&&Mt(e,t)}function Pt(e){return Ot(e)<=0}function Mt(e,t){const r=e._controlledWritableStream;Rt(e),pt(r,t)}function Lt(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Bt(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Dt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function xt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Ut(e){e._closedPromise=u(((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r,e._closedPromiseState="pending"}))}function jt(e,t){Ut(e),Ft(e,t)}function Ft(e,t){void 0!==e._closedPromise_reject&&(v(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Ht(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Wt(e){e._readyPromise=u(((t,r)=>{e._readyPromise_resolve=t,e._readyPromise_reject=r})),e._readyPromiseState="pending"}function qt(e,t){Wt(e),Gt(e,t)}function zt(e){Wt(e),$t(e)}function Gt(e,t){void 0!==e._readyPromise_reject&&(v(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function $t(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(Tt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Tt.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});const Vt="undefined"!=typeof DOMException?DOMException:void 0,Jt=function(e){if("function"!=typeof e&&"object"!=typeof e)return!1;try{return new e,!0}catch(e){return!1}}(Vt)?Vt:function(){const e=function(e,t){this.message=e||"",this.name=t||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}();function Kt(e,t,n,o,s,i){const a=$(e),c=it(t);e._disturbed=!0;let l=!1,y=d(void 0);return u(((_,b)=>{let S;if(void 0!==i){if(S=()=>{const r=new Jt("Aborted","AbortError"),n=[];o||n.push((()=>"writable"===t._state?ut(t,r):d(void 0))),s||n.push((()=>"readable"===e._state?br(e,r):d(void 0))),R((()=>Promise.all(n.map((e=>e())))),!0,r)},i.aborted)return void S();i.addEventListener("abort",S)}var E,w,A;if(I(e,a._closedPromise,(e=>{o?O(!0,e):R((()=>ut(t,e)),!0,e)})),I(t,c._closedPromise,(t=>{s?O(!0,t):R((()=>br(e,t)),!0,t)})),E=e,w=a._closedPromise,A=()=>{n?O():R((()=>function(e){const t=e._ownerWritableStream,r=t._state;return gt(t)||"closed"===r?d(void 0):"errored"===r?h(t._storedError):bt(e)}(c)))},"closed"===E._state?A():g(w,A),gt(t)||"closed"===t._state){const t=new TypeError("the destination writable stream closed before all data could be piped to it");s?O(!0,t):R((()=>br(e,t)),!0,t)}function C(){const e=y;return p(y,(()=>e!==y?C():void 0))}function I(e,t,r){"errored"===e._state?r(e._storedError):m(t,r)}function R(e,r,n){function o(){f(e(),(()=>k(r,n)),(e=>k(!0,e)))}l||(l=!0,"writable"!==t._state||gt(t)?o():g(C(),o))}function O(e,r){l||(l=!0,"writable"!==t._state||gt(t)?k(e,r):g(C(),(()=>k(e,r))))}function k(e,t){Et(c),T(a),void 0!==i&&i.removeEventListener("abort",S),e?b(t):_(void 0)}v(u(((e,t)=>{!function n(o){o?e():p(l?d(!0):p(c._readyPromise,(()=>u(((e,t)=>{Z(a,{_chunkSteps:t=>{y=p(wt(c,t),void 0,r),e(!1)},_closeSteps:()=>e(!0),_errorSteps:t})})))),n,t)}(!1)})))}))}class Qt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Yt(this))throw ar("desiredSize");return or(this)}close(){if(!Yt(this))throw ar("close");if(!sr(this))throw new TypeError("The stream is not in a state that permits close");tr(this)}enqueue(e){if(!Yt(this))throw ar("enqueue");if(!sr(this))throw new TypeError("The stream is not in a state that permits enqueue");return rr(this,e)}error(e){if(!Yt(this))throw ar("error");nr(this,e)}[M](e){pe(this);const t=this._cancelAlgorithm(e);return er(this),t}[L](e){const t=this._controlledReadableStream;if(this._queue.length>0){const r=de(this);this._closeRequested&&0===this._queue.length?(er(this),Sr(t)):Xt(this),e._chunkSteps(r)}else V(t,e),Xt(this)}}function Yt(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof Qt}function Xt(e){Zt(e)&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,f(e._pullAlgorithm(),(()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Xt(e))}),(t=>{nr(e,t)}))))}function Zt(e){const t=e._controlledReadableStream;return!!sr(e)&&!!e._started&&(!!(_r(t)&&K(t)>0)||or(e)>0)}function er(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function tr(e){if(!sr(e))return;const t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(er(e),Sr(t))}function rr(e,t){if(!sr(e))return;const r=e._controlledReadableStream;if(_r(r)&&K(r)>0)J(r,t,!1);else{let r;try{r=e._strategySizeAlgorithm(t)}catch(t){throw nr(e,t),t}try{he(e,t,r)}catch(t){throw nr(e,t),t}}Xt(e)}function nr(e,t){const r=e._controlledReadableStream;"readable"===r._state&&(pe(e),er(e),Er(r,t))}function or(e){const t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function sr(e){const t=e._controlledReadableStream._state;return!e._closeRequested&&"readable"===t}function ir(e,t,r,n,o,s,i){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,pe(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=i,t._strategyHWM=s,t._pullAlgorithm=n,t._cancelAlgorithm=o,e._readableStreamController=t,f(d(r()),(()=>{t._started=!0,Xt(t)}),(e=>{nr(t,e)}))}function ar(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function cr(e,t,r){return U(e,r),r=>S(e,t,[r])}function lr(e,t,r){return U(e,r),r=>S(e,t,[r])}function ur(e,t,r){return U(e,r),r=>b(e,t,[r])}function dr(e,t){if("bytes"!=(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function hr(e,t){if("byob"!=(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function pr(e,t){x(e,t);const r=null==e?void 0:e.preventAbort,n=null==e?void 0:e.preventCancel,o=null==e?void 0:e.preventClose,s=null==e?void 0:e.signal;return void 0!==s&&function(e,t){if(!function(e){if("object"!=typeof e||null===e)return!1;try{return"boolean"==typeof e.aborted}catch(e){return!1}}(e))throw new TypeError(`${t} is not an AbortSignal.`)}(s,`${t} has member 'signal' that`),{preventAbort:Boolean(r),preventCancel:Boolean(n),preventClose:Boolean(o),signal:s}}Object.defineProperties(Qt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Qt.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});class fr{constructor(e={},t={}){void 0===e?e=null:j(e,"First parameter");const r=Ye(t,"Second parameter"),n=function(e,t){x(e,t);const r=e,n=null==r?void 0:r.autoAllocateChunkSize,o=null==r?void 0:r.cancel,s=null==r?void 0:r.pull,i=null==r?void 0:r.start,a=null==r?void 0:r.type;return{autoAllocateChunkSize:void 0===n?void 0:z(n,`${t} has member 'autoAllocateChunkSize' that`),cancel:void 0===o?void 0:cr(o,r,`${t} has member 'cancel' that`),pull:void 0===s?void 0:lr(s,r,`${t} has member 'pull' that`),start:void 0===i?void 0:ur(i,r,`${t} has member 'start' that`),type:void 0===a?void 0:dr(a,`${t} has member 'type' that`)}}(e,"First parameter");if(yr(this),"bytes"===n.type){if(void 0!==r.size)throw new RangeError("The strategy for a byte stream cannot have a size function");!function(e,t,r){const n=Object.create(ge.prototype);let o=()=>{},s=()=>d(void 0),i=()=>d(void 0);void 0!==t.start&&(o=()=>t.start(n)),void 0!==t.pull&&(s=()=>t.pull(n)),void 0!==t.cancel&&(i=e=>t.cancel(e));const a=t.autoAllocateChunkSize;if(0===a)throw new TypeError("autoAllocateChunkSize must be greater than 0");Ue(e,n,o,s,i,r,a)}(this,n,Ke(r,0))}else{const e=Qe(r);!function(e,t,r,n){const o=Object.create(Qt.prototype);let s=()=>{},i=()=>d(void 0),a=()=>d(void 0);void 0!==t.start&&(s=()=>t.start(o)),void 0!==t.pull&&(i=()=>t.pull(o)),void 0!==t.cancel&&(a=e=>t.cancel(e)),ir(e,o,s,i,a,r,n)}(this,n,Ke(r,1),e)}}get locked(){if(!vr(this))throw wr("locked");return _r(this)}cancel(e){return vr(this)?_r(this)?h(new TypeError("Cannot cancel a stream that already has a reader")):br(this,e):h(wr("cancel"))}getReader(e){if(!vr(this))throw wr("getReader");return void 0===function(e,t){x(e,t);const r=null==e?void 0:e.mode;return{mode:void 0===r?void 0:hr(r,`${t} has member 'mode' that`)}}(e,"First parameter").mode?$(this):He(this)}pipeThrough(e,t={}){if(!vr(this))throw wr("pipeThrough");F(e,1,"pipeThrough");const r=function(e,t){x(e,t);const r=null==e?void 0:e.readable;H(r,"readable","ReadableWritablePair"),G(r,`${t} has member 'readable' that`);const n=null==e?void 0:e.writable;return H(n,"writable","ReadableWritablePair"),nt(n,`${t} has member 'writable' that`),{readable:r,writable:n}}(e,"First parameter"),n=pr(t,"Second parameter");if(_r(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(lt(r.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return v(Kt(this,r.writable,n.preventClose,n.preventAbort,n.preventCancel,n.signal)),r.readable}pipeTo(e,t={}){if(!vr(this))return h(wr("pipeTo"));if(void 0===e)return h("Parameter 1 is required in 'pipeTo'.");if(!ct(e))return h(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let r;try{r=pr(t,"Second parameter")}catch(e){return h(e)}return _r(this)?h(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):lt(e)?h(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Kt(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)}tee(){if(!vr(this))throw wr("tee");return ae(me((e=this)._readableStreamController)?function(e){let t,r,n,o,s,i=$(e),a=!1,c=!1,l=!1,h=!1,p=!1;const f=u((e=>{s=e}));function g(e){m(e._closedPromise,(t=>{e===i&&(Me(n._readableStreamController,t),Me(o._readableStreamController,t),h&&p||s(void 0))}))}function y(){$e(i)&&(T(i),i=$(e),g(i)),Z(i,{_chunkSteps:t=>{_((()=>{c=!1,l=!1;const r=t;let i=t;if(!h&&!p)try{i=ue(t)}catch(t){return Me(n._readableStreamController,t),Me(o._readableStreamController,t),void s(br(e,t))}h||Pe(n._readableStreamController,r),p||Pe(o._readableStreamController,i),a=!1,c?b():l&&S()}))},_closeSteps:()=>{a=!1,h||Ne(n._readableStreamController),p||Ne(o._readableStreamController),n._readableStreamController._pendingPullIntos.length>0&&De(n._readableStreamController,0),o._readableStreamController._pendingPullIntos.length>0&&De(o._readableStreamController,0),h&&p||s(void 0)},_errorSteps:()=>{a=!1}})}function v(t,r){X(i)&&(T(i),i=He(e),g(i));const u=r?o:n,d=r?n:o;Ve(i,t,{_chunkSteps:t=>{_((()=>{c=!1,l=!1;const n=r?p:h;if(r?h:p)n||xe(u._readableStreamController,t);else{let r;try{r=ue(t)}catch(t){return Me(u._readableStreamController,t),Me(d._readableStreamController,t),void s(br(e,t))}n||xe(u._readableStreamController,t),Pe(d._readableStreamController,r)}a=!1,c?b():l&&S()}))},_closeSteps:e=>{a=!1;const t=r?p:h,n=r?h:p;t||Ne(u._readableStreamController),n||Ne(d._readableStreamController),void 0!==e&&(t||xe(u._readableStreamController,e),!n&&d._readableStreamController._pendingPullIntos.length>0&&De(d._readableStreamController,0)),t&&n||s(void 0)},_errorSteps:()=>{a=!1}})}function b(){if(a)return c=!0,d(void 0);a=!0;const e=Le(n._readableStreamController);return null===e?y():v(e._view,!1),d(void 0)}function S(){if(a)return l=!0,d(void 0);a=!0;const e=Le(o._readableStreamController);return null===e?y():v(e._view,!0),d(void 0)}function E(){}return n=mr(E,b,(function(n){if(h=!0,t=n,p){const n=ae([t,r]),o=br(e,n);s(o)}return f})),o=mr(E,S,(function(n){if(p=!0,r=n,h){const n=ae([t,r]),o=br(e,n);s(o)}return f})),g(i),[n,o]}(e):function(e,t){const r=$(e);let n,o,s,i,a,c=!1,l=!1,h=!1,p=!1;const f=u((e=>{a=e}));function g(){return c?(l=!0,d(void 0)):(c=!0,Z(r,{_chunkSteps:e=>{_((()=>{l=!1;const t=e,r=e;h||rr(s._readableStreamController,t),p||rr(i._readableStreamController,r),c=!1,l&&g()}))},_closeSteps:()=>{c=!1,h||tr(s._readableStreamController),p||tr(i._readableStreamController),h&&p||a(void 0)},_errorSteps:()=>{c=!1}}),d(void 0))}function y(){}return s=gr(y,g,(function(t){if(h=!0,n=t,p){const t=ae([n,o]),r=br(e,t);a(r)}return f})),i=gr(y,g,(function(t){if(p=!0,o=t,h){const t=ae([n,o]),r=br(e,t);a(r)}return f})),m(r._closedPromise,(e=>{nr(s._readableStreamController,e),nr(i._readableStreamController,e),h&&p||a(void 0)})),[s,i]}(e));var e}values(e){if(!vr(this))throw wr("values");return function(e,t){const r=$(e),n=new re(r,t),o=Object.create(ne);return o._asyncIteratorImpl=n,o}(this,function(e,t){x(e,"First parameter");const r=null==e?void 0:e.preventCancel;return{preventCancel:Boolean(r)}}(e).preventCancel)}}function gr(e,t,r,n=1,o=(()=>1)){const s=Object.create(fr.prototype);return yr(s),ir(s,Object.create(Qt.prototype),e,t,r,n,o),s}function mr(e,t,r){const n=Object.create(fr.prototype);return yr(n),Ue(n,Object.create(ge.prototype),e,t,r,0,void 0),n}function yr(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function vr(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof fr}function _r(e){return void 0!==e._reader}function br(e,t){if(e._disturbed=!0,"closed"===e._state)return d(void 0);if("errored"===e._state)return h(e._storedError);Sr(e);const n=e._reader;return void 0!==n&&$e(n)&&(n._readIntoRequests.forEach((e=>{e._closeSteps(void 0)})),n._readIntoRequests=new E),y(e._readableStreamController[M](t),r)}function Sr(e){e._state="closed";const t=e._reader;void 0!==t&&(k(t),X(t)&&(t._readRequests.forEach((e=>{e._closeSteps()})),t._readRequests=new E))}function Er(e,t){e._state="errored",e._storedError=t;const r=e._reader;void 0!==r&&(O(r,t),X(r)?(r._readRequests.forEach((e=>{e._errorSteps(t)})),r._readRequests=new E):(r._readIntoRequests.forEach((e=>{e._errorSteps(t)})),r._readIntoRequests=new E))}function wr(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Ar(e,t){x(e,t);const r=null==e?void 0:e.highWaterMark;return H(r,"highWaterMark","QueuingStrategyInit"),{highWaterMark:W(r)}}Object.defineProperties(fr.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(fr.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"==typeof t.asyncIterator&&Object.defineProperty(fr.prototype,t.asyncIterator,{value:fr.prototype.values,writable:!0,configurable:!0});const Tr=e=>e.byteLength;try{Object.defineProperty(Tr,"name",{value:"size",configurable:!0})}catch(e){}class Cr{constructor(e){F(e,1,"ByteLengthQueuingStrategy"),e=Ar(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Rr(this))throw Ir("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Rr(this))throw Ir("size");return Tr}}function Ir(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Rr(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")&&e instanceof Cr}Object.defineProperties(Cr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Cr.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});const Or=()=>1;try{Object.defineProperty(Or,"name",{value:"size",configurable:!0})}catch(e){}class kr{constructor(e){F(e,1,"CountQueuingStrategy"),e=Ar(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Pr(this))throw Nr("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Pr(this))throw Nr("size");return Or}}function Nr(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Pr(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")&&e instanceof kr}function Mr(e,t,r){return U(e,r),r=>S(e,t,[r])}function Lr(e,t,r){return U(e,r),r=>b(e,t,[r])}function Br(e,t,r){return U(e,r),(r,n)=>S(e,t,[r,n])}Object.defineProperties(kr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(kr.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});class Dr{constructor(e={},t={},r={}){void 0===e&&(e=null);const n=Ye(t,"Second parameter"),o=Ye(r,"Third parameter"),s=function(e,t){x(e,t);const r=null==e?void 0:e.flush,n=null==e?void 0:e.readableType,o=null==e?void 0:e.start,s=null==e?void 0:e.transform,i=null==e?void 0:e.writableType;return{flush:void 0===r?void 0:Mr(r,e,`${t} has member 'flush' that`),readableType:n,start:void 0===o?void 0:Lr(o,e,`${t} has member 'start' that`),transform:void 0===s?void 0:Br(s,e,`${t} has member 'transform' that`),writableType:i}}(e,"First parameter");if(void 0!==s.readableType)throw new RangeError("Invalid readableType specified");if(void 0!==s.writableType)throw new RangeError("Invalid writableType specified");const i=Ke(o,0),a=Qe(o),c=Ke(n,1),l=Qe(n);let p;!function(e,t,r,n,o,s){function i(){return t}e._writable=function(e,t,r,n,o=1,s=(()=>1)){const i=Object.create(st.prototype);return at(i),It(i,Object.create(Tt.prototype),e,t,r,n,o,s),i}(i,(function(t){return function(e,t){const r=e._transformStreamController;return e._backpressure?y(e._backpressureChangePromise,(()=>{const n=e._writable;if("erroring"===n._state)throw n._storedError;return Gr(r,t)})):Gr(r,t)}(e,t)}),(function(){return function(e){const t=e._readable,r=e._transformStreamController,n=r._flushAlgorithm();return qr(r),y(n,(()=>{if("errored"===t._state)throw t._storedError;tr(t._readableStreamController)}),(r=>{throw Ur(e,r),t._storedError}))}(e)}),(function(t){return function(e,t){return Ur(e,t),d(void 0)}(e,t)}),r,n),e._readable=gr(i,(function(){return function(e){return Fr(e,!1),e._backpressureChangePromise}(e)}),(function(t){return jr(e,t),d(void 0)}),o,s),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Fr(e,!0),e._transformStreamController=void 0}(this,u((e=>{p=e})),c,l,i,a),function(e,t){const r=Object.create(Hr.prototype);let n=e=>{try{return zr(r,e),d(void 0)}catch(e){return h(e)}},o=()=>d(void 0);void 0!==t.transform&&(n=e=>t.transform(e,r)),void 0!==t.flush&&(o=()=>t.flush(r)),function(e,t,r,n){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=r,t._flushAlgorithm=n}(e,r,n,o)}(this,s),void 0!==s.start?p(s.start(this._transformStreamController)):p(void 0)}get readable(){if(!xr(this))throw Vr("readable");return this._readable}get writable(){if(!xr(this))throw Vr("writable");return this._writable}}function xr(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof Dr}function Ur(e,t){nr(e._readable._readableStreamController,t),jr(e,t)}function jr(e,t){qr(e._transformStreamController),Nt(e._writable._writableStreamController,t),e._backpressure&&Fr(e,!1)}function Fr(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=u((t=>{e._backpressureChangePromise_resolve=t})),e._backpressure=t}Object.defineProperties(Dr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Dr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});class Hr{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Wr(this))throw $r("desiredSize");return or(this._controlledTransformStream._readable._readableStreamController)}enqueue(e){if(!Wr(this))throw $r("enqueue");zr(this,e)}error(e){if(!Wr(this))throw $r("error");var t;t=e,Ur(this._controlledTransformStream,t)}terminate(){if(!Wr(this))throw $r("terminate");!function(e){const t=e._controlledTransformStream;tr(t._readable._readableStreamController);jr(t,new TypeError("TransformStream terminated"))}(this)}}function Wr(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof Hr}function qr(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function zr(e,t){const r=e._controlledTransformStream,n=r._readable._readableStreamController;if(!sr(n))throw new TypeError("Readable side is not in a state that permits enqueue");try{rr(n,t)}catch(e){throw jr(r,e),r._readable._storedError}const o=function(e){return!Zt(e)}(n);o!==r._backpressure&&Fr(r,!0)}function Gr(e,t){return y(e._transformAlgorithm(t),void 0,(t=>{throw Ur(e._controlledTransformStream,t),t}))}function $r(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Vr(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}Object.defineProperties(Hr.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Hr.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),e.ByteLengthQueuingStrategy=Cr,e.CountQueuingStrategy=kr,e.ReadableByteStreamController=ge,e.ReadableStream=fr,e.ReadableStreamBYOBReader=Ge,e.ReadableStreamBYOBRequest=fe,e.ReadableStreamDefaultController=Qt,e.ReadableStreamDefaultReader=Y,e.TransformStream=Dr,e.TransformStreamDefaultController=Hr,e.WritableStream=st,e.WritableStreamDefaultController=Tt,e.WritableStreamDefaultWriter=vt,Object.defineProperty(e,"__esModule",{value:!0})},r(t)},52479:e=>{e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),o=e[e.length-1];return"function"==typeof n&&n!==o&&Object.keys(o).forEach((function(e){n[e]=o[e]})),n}}},8777:(e,t,r)=>{"use strict";const n=r(88762);n.createWebSocketStream=r(30404),n.Server=r(39284),n.Receiver=r(32957),n.Sender=r(57330),n.WebSocket=n,n.WebSocketServer=n.Server,e.exports=n},30977:(e,t,r)=>{"use strict";const{EMPTY_BUFFER:n}=r(41872),o=Buffer[Symbol.species];function s(e,t,r,n,o){for(let s=0;s<o;s++)r[n+s]=e[s]^t[3&s]}function i(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}if(e.exports={concat:function(e,t){if(0===e.length)return n;if(1===e.length)return e[0];const r=Buffer.allocUnsafe(t);let s=0;for(let t=0;t<e.length;t++){const n=e[t];r.set(n,s),s+=n.length}return s<t?new o(r.buffer,r.byteOffset,s):r},mask:s,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:function e(t){if(e.readOnly=!0,Buffer.isBuffer(t))return t;let r;return t instanceof ArrayBuffer?r=new o(t):ArrayBuffer.isView(t)?r=new o(t.buffer,t.byteOffset,t.byteLength):(r=Buffer.from(t),e.readOnly=!1),r},unmask:i},!process.env.WS_NO_BUFFER_UTIL)try{const t=r(52864);e.exports.mask=function(e,r,n,o,i){i<48?s(e,r,n,o,i):t.mask(e,r,n,o,i)},e.exports.unmask=function(e,r){e.length<32?i(e,r):t.unmask(e,r)}}catch(e){}},41872:e=>{"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},10062:(e,t,r)=>{"use strict";const{kForOnEventAttribute:n,kListener:o}=r(41872),s=Symbol("kCode"),i=Symbol("kData"),a=Symbol("kError"),c=Symbol("kMessage"),l=Symbol("kReason"),u=Symbol("kTarget"),d=Symbol("kType"),h=Symbol("kWasClean");class p{constructor(e){this[u]=null,this[d]=e}get target(){return this[u]}get type(){return this[d]}}Object.defineProperty(p.prototype,"target",{enumerable:!0}),Object.defineProperty(p.prototype,"type",{enumerable:!0});class f extends p{constructor(e,t={}){super(e),this[s]=void 0===t.code?0:t.code,this[l]=void 0===t.reason?"":t.reason,this[h]=void 0!==t.wasClean&&t.wasClean}get code(){return this[s]}get reason(){return this[l]}get wasClean(){return this[h]}}Object.defineProperty(f.prototype,"code",{enumerable:!0}),Object.defineProperty(f.prototype,"reason",{enumerable:!0}),Object.defineProperty(f.prototype,"wasClean",{enumerable:!0});class g extends p{constructor(e,t={}){super(e),this[a]=void 0===t.error?null:t.error,this[c]=void 0===t.message?"":t.message}get error(){return this[a]}get message(){return this[c]}}Object.defineProperty(g.prototype,"error",{enumerable:!0}),Object.defineProperty(g.prototype,"message",{enumerable:!0});class m extends p{constructor(e,t={}){super(e),this[i]=void 0===t.data?null:t.data}get data(){return this[i]}}Object.defineProperty(m.prototype,"data",{enumerable:!0});const y={addEventListener(e,t,r={}){for(const s of this.listeners(e))if(!r[n]&&s[o]===t&&!s[n])return;let s;if("message"===e)s=function(e,r){const n=new m("message",{data:r?e:e.toString()});n[u]=this,v(t,this,n)};else if("close"===e)s=function(e,r){const n=new f("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});n[u]=this,v(t,this,n)};else if("error"===e)s=function(e){const r=new g("error",{error:e,message:e.message});r[u]=this,v(t,this,r)};else{if("open"!==e)return;s=function(){const e=new p("open");e[u]=this,v(t,this,e)}}s[n]=!!r[n],s[o]=t,r.once?this.once(e,s):this.on(e,s)},removeEventListener(e,t){for(const r of this.listeners(e))if(r[o]===t&&!r[n]){this.removeListener(e,r);break}}};function v(e,t,r){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,r):e.call(t,r)}e.exports={CloseEvent:f,ErrorEvent:g,Event:p,EventTarget:y,MessageEvent:m}},51503:(e,t,r)=>{"use strict";const{tokenChars:n}=r(6746);function o(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const t=Object.create(null);let r,s,i=Object.create(null),a=!1,c=!1,l=!1,u=-1,d=-1,h=-1,p=0;for(;p<e.length;p++)if(d=e.charCodeAt(p),void 0===r)if(-1===h&&1===n[d])-1===u&&(u=p);else if(0===p||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p);const n=e.slice(u,h);44===d?(o(t,n,i),i=Object.create(null)):r=n,u=h=-1}}else-1===h&&-1!==u&&(h=p);else if(void 0===s)if(-1===h&&1===n[d])-1===u&&(u=p);else if(32===d||9===d)-1===h&&-1!==u&&(h=p);else if(59===d||44===d){if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p),o(i,e.slice(u,h),!0),44===d&&(o(t,r,i),i=Object.create(null),r=void 0),u=h=-1}else{if(61!==d||-1===u||-1!==h)throw new SyntaxError(`Unexpected character at index ${p}`);s=e.slice(u,p),u=h=-1}else if(c){if(1!==n[d])throw new SyntaxError(`Unexpected character at index ${p}`);-1===u?u=p:a||(a=!0),c=!1}else if(l)if(1===n[d])-1===u&&(u=p);else if(34===d&&-1!==u)l=!1,h=p;else{if(92!==d)throw new SyntaxError(`Unexpected character at index ${p}`);c=!0}else if(34===d&&61===e.charCodeAt(p-1))l=!0;else if(-1===h&&1===n[d])-1===u&&(u=p);else if(-1===u||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p);let n=e.slice(u,h);a&&(n=n.replace(/\\/g,""),a=!1),o(i,s,n),44===d&&(o(t,r,i),i=Object.create(null),r=void 0),s=void 0,u=h=-1}}else-1===h&&(h=p);if(-1===u||l||32===d||9===d)throw new SyntaxError("Unexpected end of input");-1===h&&(h=p);const f=e.slice(u,h);return void 0===r?o(t,f,i):(void 0===s?o(i,f,!0):o(i,s,a?f.replace(/\\/g,""):f),o(t,r,i)),t}}},10305:e=>{"use strict";const t=Symbol("kDone"),r=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},75196:(e,t,r)=>{"use strict";const n=r(59796),o=r(30977),s=r(10305),{kStatusCode:i}=r(41872),a=Buffer[Symbol.species],c=Buffer.from([0,0,255,255]),l=Symbol("permessage-deflate"),u=Symbol("total-length"),d=Symbol("callback"),h=Symbol("buffers"),p=Symbol("error");let f;function g(e){this[h].push(e),this[u]+=e.length}function m(e){this[u]+=e.length,this[l]._maxPayload<1||this[u]<=this[l]._maxPayload?this[h].push(e):(this[p]=new RangeError("Max payload size exceeded"),this[p].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[p][i]=1009,this.removeListener("data",m),this.reset())}function y(e){this[l]._inflate=null,e[i]=1007,this[d](e)}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!f){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;f=new s(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[d];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r}))})),e}decompress(e,t,r){f.add((n=>{this._decompress(e,t,((e,t)=>{n(),r(e,t)}))}))}compress(e,t,r){f.add((n=>{this._compress(e,t,((e,t)=>{n(),r(e,t)}))}))}_decompress(e,t,r){const s=this._isServer?"client":"server";if(!this._inflate){const e=`${s}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=n.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[l]=this,this._inflate[u]=0,this._inflate[h]=[],this._inflate.on("error",y),this._inflate.on("data",m)}this._inflate[d]=r,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush((()=>{const e=this._inflate[p];if(e)return this._inflate.close(),this._inflate=null,void r(e);const n=o.concat(this._inflate[h],this._inflate[u]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[u]=0,this._inflate[h]=[],t&&this.params[`${s}_no_context_takeover`]&&this._inflate.reset()),r(null,n)}))}_compress(e,t,r){const s=this._isServer?"server":"client";if(!this._deflate){const e=`${s}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=n.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[u]=0,this._deflate[h]=[],this._deflate.on("data",g)}this._deflate[d]=r,this._deflate.write(e),this._deflate.flush(n.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=o.concat(this._deflate[h],this._deflate[u]);t&&(e=new a(e.buffer,e.byteOffset,e.length-4)),this._deflate[d]=null,this._deflate[u]=0,this._deflate[h]=[],t&&this.params[`${s}_no_context_takeover`]&&this._deflate.reset(),r(null,e)}))}}},32957:(e,t,r)=>{"use strict";const{Writable:n}=r(12781),o=r(75196),{BINARY_TYPES:s,EMPTY_BUFFER:i,kStatusCode:a,kWebSocket:c}=r(41872),{concat:l,toArrayBuffer:u,unmask:d}=r(30977),{isValidStatusCode:h,isValidUTF8:p}=r(6746),f=Buffer[Symbol.species];function g(e,t,r,n,o){const s=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(s,g),s.code=o,s[a]=n,s}e.exports=class extends n{constructor(e={}){super(),this._binaryType=e.binaryType||s[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[c]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=new f(t.buffer,t.byteOffset+e,t.length-e),new f(t.buffer,t.byteOffset,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],n=t.length-e;e>=r.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),n),this._buffers[0]=new f(r.buffer,r.byteOffset+e,r.length-e)),e-=r.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,g(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");const t=64==(64&e[0]);if(t&&!this._extensions[o.extensionName])return this._loop=!1,g(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,g(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,g(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,g(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,g(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,g(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,g(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return this._loop=!1,g(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,g(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,g(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,g(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,g(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=i;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&0!=(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])&&d(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[o.extensionName].decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(g(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(r)}const n=this.dataMessage();if(n)return t(n);this.startLoop(t)}))}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let r;r="nodebuffer"===this._binaryType?l(t,e):"arraybuffer"===this._binaryType?u(l(t,e)):t,this.emit("message",r,!0)}else{const r=l(t,e);if(!this._skipUTF8Validation&&!p(r))return this._loop=!1,g(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",r,!1)}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,i),this.end();else{const t=e.readUInt16BE(0);if(!h(t))return g(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");const r=new f(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!p(r))return g(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,r),this.end()}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}},57330:(e,t,r)=>{"use strict";r(41808),r(24404);const{randomFillSync:n}=r(6113),o=r(75196),{EMPTY_BUFFER:s}=r(41872),{isValidStatusCode:i}=r(6746),{mask:a,toBuffer:c}=r(30977),l=Symbol("kByteLength"),u=Buffer.alloc(4);class d{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let r,o,s=!1,i=2,c=!1;t.mask&&(r=t.maskBuffer||u,t.generateMask?t.generateMask(r):n(r,0,4),c=0==(r[0]|r[1]|r[2]|r[3]),i=6),"string"==typeof e?o=t.mask&&!c||void 0===t[l]?(e=Buffer.from(e)).length:t[l]:(o=e.length,s=t.mask&&t.readOnly&&!c);let d=o;o>=65536?(i+=8,d=127):o>125&&(i+=2,d=126);const h=Buffer.allocUnsafe(s?o+i:i);return h[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(h[0]|=64),h[1]=d,126===d?h.writeUInt16BE(o,2):127===d&&(h[2]=h[3]=0,h.writeUIntBE(o,4,6)),t.mask?(h[1]|=128,h[i-4]=r[0],h[i-3]=r[1],h[i-2]=r[2],h[i-1]=r[3],c?[h,e]:s?(a(e,r,h,i,o),[h]):(a(e,r,e,0,o),[h,e])):[h,e]}close(e,t,r,n){let o;if(void 0===e)o=s;else{if("number"!=typeof e||!i(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");o=Buffer.allocUnsafe(2+r),o.writeUInt16BE(e,0),"string"==typeof t?o.write(t,2):o.set(t,2)}else o=Buffer.allocUnsafe(2),o.writeUInt16BE(e,0)}const a={[l]:o.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,o,!1,a,n]):this.sendFrame(d.frame(o,a),n)}ping(e,t,r){let n,o;if("string"==typeof e?(n=Buffer.byteLength(e),o=!1):(n=(e=c(e)).length,o=c.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");const s={[l]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:o,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,s,r]):this.sendFrame(d.frame(e,s),r)}pong(e,t,r){let n,o;if("string"==typeof e?(n=Buffer.byteLength(e),o=!1):(n=(e=c(e)).length,o=c.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");const s={[l]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:o,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,s,r]):this.sendFrame(d.frame(e,s),r)}send(e,t,r){const n=this._extensions[o.extensionName];let s,i,a=t.binary?2:1,u=t.compress;if("string"==typeof e?(s=Buffer.byteLength(e),i=!1):(s=(e=c(e)).length,i=c.readOnly),this._firstFragment?(this._firstFragment=!1,u&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(u=s>=n._threshold),this._compress=u):(u=!1,a=0),t.fin&&(this._firstFragment=!0),n){const n={[l]:s,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:i,rsv1:u};this._deflating?this.enqueue([this.dispatch,e,this._compress,n,r]):this.dispatch(e,this._compress,n,r)}else this.sendFrame(d.frame(e,{[l]:s,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:i,rsv1:!1}),r)}dispatch(e,t,r,n){if(!t)return void this.sendFrame(d.frame(e,r),n);const s=this._extensions[o.extensionName];this._bufferedBytes+=r[l],this._deflating=!0,s.compress(e,r.fin,((e,t)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof n&&n(e);for(let t=0;t<this._queue.length;t++){const r=this._queue[t],n=r[r.length-1];"function"==typeof n&&n(e)}}else this._bufferedBytes-=r[l],this._deflating=!1,r.readOnly=!1,this.sendFrame(d.frame(t,r),n),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[3][l],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][l],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=d},30404:(e,t,r)=>{"use strict";const{Duplex:n}=r(12781);function o(e){e.emit("close")}function s(){!this.destroyed&&this._writableState.finished&&this.destroy()}function i(e){this.removeListener("error",i),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let r=!0;const a=new n({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t,r){const n=!r&&a._readableState.objectMode?t.toString():t;a.push(n)||e.pause()})),e.once("error",(function(e){a.destroyed||(r=!1,a.destroy(e))})),e.once("close",(function(){a.destroyed||a.push(null)})),a._destroy=function(t,n){if(e.readyState===e.CLOSED)return n(t),void process.nextTick(o,a);let s=!1;e.once("error",(function(e){s=!0,n(e)})),e.once("close",(function(){s||n(t),process.nextTick(o,a)})),r&&e.terminate()},a._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),a._readableState.endEmitted&&a.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){a._final(t)}))},a._read=function(){e.isPaused&&e.resume()},a._write=function(t,r,n){e.readyState!==e.CONNECTING?e.send(t,n):e.once("open",(function(){a._write(t,r,n)}))},a.on("end",s),a.on("error",i),a}},10640:(e,t,r)=>{"use strict";const{tokenChars:n}=r(6746);e.exports={parse:function(e){const t=new Set;let r=-1,o=-1,s=0;for(;s<e.length;s++){const i=e.charCodeAt(s);if(-1===o&&1===n[i])-1===r&&(r=s);else if(0===s||32!==i&&9!==i){if(44!==i)throw new SyntaxError(`Unexpected character at index ${s}`);{if(-1===r)throw new SyntaxError(`Unexpected character at index ${s}`);-1===o&&(o=s);const n=e.slice(r,o);if(t.has(n))throw new SyntaxError(`The "${n}" subprotocol is duplicated`);t.add(n),r=o=-1}}else-1===o&&-1!==r&&(o=s)}if(-1===r||-1!==o)throw new SyntaxError("Unexpected end of input");const i=e.slice(r,s);if(t.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);return t.add(i),t}}},6746:(e,t,r)=>{"use strict";const{isUtf8:n}=r(14300);function o(e){const t=e.length;let r=0;for(;r<t;)if(0==(128&e[r]))r++;else if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0}if(e.exports={isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:o,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},n)e.exports.isValidUTF8=function(e){return e.length<24?o(e):n(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{const t=r(2239);e.exports.isValidUTF8=function(e){return e.length<32?o(e):t(e)}}catch(e){}},39284:(e,t,r)=>{"use strict";const n=r(82361),o=r(13685),{createHash:s}=(r(95687),r(41808),r(24404),r(6113)),i=r(51503),a=r(75196),c=r(10640),l=r(88762),{GUID:u,kWebSocket:d}=r(41872),h=/^[+/0-9A-Za-z]{22}==$/;function p(e){e._state=2,e.emit("close")}function f(){this.destroy()}function g(e,t,r,n){r=r||o.STATUS_CODES[t],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${o.STATUS_CODES[t]}\r\n`+Object.keys(n).map((e=>`${e}: ${n[e]}`)).join("\r\n")+"\r\n\r\n"+r)}function m(e,t,r,n,o){if(e.listenerCount("wsClientError")){const n=new Error(o);Error.captureStackTrace(n,m),e.emit("wsClientError",n,r,t)}else g(r,n,o)}e.exports=class extends n{constructor(e,t){if(super(),null==(e={maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:l,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=o.createServer(((e,t)=>{const r=o.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,n)=>{this.handleUpgrade(t,r,n,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",(()=>{e(new Error("The server is not running"))})),void process.nextTick(p,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(p,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close((()=>{p(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,n){t.on("error",f);const o=e.headers["sec-websocket-key"],s=+e.headers["sec-websocket-version"];if("GET"!==e.method)return void m(this,e,t,405,"Invalid HTTP method");if("websocket"!==e.headers.upgrade.toLowerCase())return void m(this,e,t,400,"Invalid Upgrade header");if(!o||!h.test(o))return void m(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");if(8!==s&&13!==s)return void m(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");if(!this.shouldHandle(e))return void g(t,400);const l=e.headers["sec-websocket-protocol"];let u=new Set;if(void 0!==l)try{u=c.parse(l)}catch(r){return void m(this,e,t,400,"Invalid Sec-WebSocket-Protocol header")}const d=e.headers["sec-websocket-extensions"],p={};if(this.options.perMessageDeflate&&void 0!==d){const r=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=i.parse(d);e[a.extensionName]&&(r.accept(e[a.extensionName]),p[a.extensionName]=r)}catch(r){return void m(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){const i={origin:e.headers[8===s?"sec-websocket-origin":"origin"],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(i,((s,i,a,c)=>{if(!s)return g(t,i||401,a,c);this.completeUpgrade(p,o,u,e,t,r,n)}));if(!this.options.verifyClient(i))return g(t,401)}this.completeUpgrade(p,o,u,e,t,r,n)}completeUpgrade(e,t,r,n,o,c,l){if(!o.readable||!o.writable)return o.destroy();if(o[d])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return g(o,503);const h=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${s("sha1").update(t+u).digest("base64")}`],m=new this.options.WebSocket(null);if(r.size){const e=this.options.handleProtocols?this.options.handleProtocols(r,n):r.values().next().value;e&&(h.push(`Sec-WebSocket-Protocol: ${e}`),m._protocol=e)}if(e[a.extensionName]){const t=e[a.extensionName].params,r=i.format({[a.extensionName]:[t]});h.push(`Sec-WebSocket-Extensions: ${r}`),m._extensions=e}this.emit("headers",h,n),o.write(h.concat("\r\n").join("\r\n")),o.removeListener("error",f),m.setSocket(o,c,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(m),m.on("close",(()=>{this.clients.delete(m),this._shouldEmitClose&&!this.clients.size&&process.nextTick(p,this)}))),l(m,n)}}},88762:(e,t,r)=>{"use strict";const n=r(82361),o=r(95687),s=r(13685),i=r(41808),a=r(24404),{randomBytes:c,createHash:l}=r(6113),{Readable:u}=r(12781),{URL:d}=r(57310),h=r(75196),p=r(32957),f=r(57330),{BINARY_TYPES:g,EMPTY_BUFFER:m,GUID:y,kForOnEventAttribute:v,kListener:_,kStatusCode:b,kWebSocket:S,NOOP:E}=r(41872),{EventTarget:{addEventListener:w,removeEventListener:A}}=r(10062),{format:T,parse:C}=r(51503),{toBuffer:I}=r(30977),R=Symbol("kAborted"),O=[8,13],k=["CONNECTING","OPEN","CLOSING","CLOSED"],N=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class P extends n{constructor(e,t,r){super(),this._binaryType=g[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=m,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=P.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),M(this,e,t,r)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){g.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const n=new p({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation});this._sender=new f(e,this._extensions,r.generateMask),this._receiver=n,this._socket=e,n[S]=this,e[S]=this,n.on("conclude",j),n.on("drain",F),n.on("error",H),n.on("message",q),n.on("ping",z),n.on("pong",G),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",V),e.on("data",J),e.on("end",K),e.on("error",Q),this._readyState=P.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=P.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[h.extensionName]&&this._extensions[h.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=P.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==P.CLOSED)if(this.readyState!==P.CONNECTING)this.readyState!==P.CLOSING?(this._readyState=P.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();else{const e="WebSocket was closed before the connection was established";x(this,this._req,e)}}pause(){this.readyState!==P.CONNECTING&&this.readyState!==P.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,r){if(this.readyState===P.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===P.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||m,t,r)):U(this,e,r)}pong(e,t,r){if(this.readyState===P.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===P.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||m,t,r)):U(this,e,r)}resume(){this.readyState!==P.CONNECTING&&this.readyState!==P.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,r){if(this.readyState===P.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==P.OPEN)return void U(this,e,r);const n={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[h.extensionName]||(n.compress=!1),this._sender.send(e||m,n,r)}terminate(){if(this.readyState!==P.CLOSED)if(this.readyState!==P.CONNECTING)this._socket&&(this._readyState=P.CLOSING,this._socket.destroy());else{const e="WebSocket was closed before the connection was established";x(this,this._req,e)}}}function M(e,t,r,n){const i={protocolVersion:O[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(!O.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${O.join(", ")})`);let a;if(t instanceof d)a=t,e._url=t.href;else{try{a=new d(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}e._url=t}const u="wss:"===a.protocol,p="ws+unix:"===a.protocol;let f;if("ws:"===a.protocol||u||p?p&&!a.pathname?f="The URL's pathname is empty":a.hash&&(f="The URL contains a fragment identifier"):f='The URL\'s protocol must be one of "ws:", "wss:", or "ws+unix:"',f){const t=new SyntaxError(f);if(0===e._redirects)throw t;return void L(e,t)}const g=u?443:80,m=c(16).toString("base64"),v=u?o.request:s.request,_=new Set;let b,S;if(i.createConnection=u?D:B,i.defaultPort=i.defaultPort||g,i.port=a.port||g,i.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,i.headers={...i.headers,"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":m,Connection:"Upgrade",Upgrade:"websocket"},i.path=a.pathname+a.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(b=new h(!0!==i.perMessageDeflate?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=T({[h.extensionName]:b.offer()})),r.length){for(const e of r){if("string"!=typeof e||!N.test(e)||_.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");_.add(e)}i.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(a.username||a.password)&&(i.auth=`${a.username}:${a.password}`),p){const e=i.path.split(":");i.socketPath=e[0],i.path=e[1]}if(i.followRedirects){if(0===e._redirects){e._originalIpc=p,e._originalSecure=u,e._originalHostOrSocketPath=p?i.socketPath:a.host;const t=n&&n.headers;if(n={...n,headers:{}},t)for(const[e,r]of Object.entries(t))n.headers[e.toLowerCase()]=r}else if(0===e.listenerCount("redirect")){const t=p?!!e._originalIpc&&i.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&a.host===e._originalHostOrSocketPath;(!t||e._originalSecure&&!u)&&(delete i.headers.authorization,delete i.headers.cookie,t||delete i.headers.host,i.auth=void 0)}i.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),S=e._req=v(i),e._redirects&&e.emit("redirect",e.url,S)}else S=e._req=v(i);i.timeout&&S.on("timeout",(()=>{x(e,S,"Opening handshake has timed out")})),S.on("error",(t=>{null===S||S[R]||(S=e._req=null,L(e,t))})),S.on("response",(o=>{const s=o.headers.location,a=o.statusCode;if(s&&i.followRedirects&&a>=300&&a<400){if(++e._redirects>i.maxRedirects)return void x(e,S,"Maximum redirects exceeded");let o;S.abort();try{o=new d(s,t)}catch(t){const r=new SyntaxError(`Invalid URL: ${s}`);return void L(e,r)}M(e,o,r,n)}else e.emit("unexpected-response",S,o)||x(e,S,`Unexpected server response: ${o.statusCode}`)})),S.on("upgrade",((t,r,n)=>{if(e.emit("upgrade",t),e.readyState!==P.CONNECTING)return;if(S=e._req=null,"websocket"!==t.headers.upgrade.toLowerCase())return void x(e,r,"Invalid Upgrade header");const o=l("sha1").update(m+y).digest("base64");if(t.headers["sec-websocket-accept"]!==o)return void x(e,r,"Invalid Sec-WebSocket-Accept header");const s=t.headers["sec-websocket-protocol"];let a;if(void 0!==s?_.size?_.has(s)||(a="Server sent an invalid subprotocol"):a="Server sent a subprotocol but none was requested":_.size&&(a="Server sent no subprotocol"),a)return void x(e,r,a);s&&(e._protocol=s);const c=t.headers["sec-websocket-extensions"];if(void 0!==c){if(!b)return void x(e,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let t;try{t=C(c)}catch(t){return void x(e,r,"Invalid Sec-WebSocket-Extensions header")}const n=Object.keys(t);if(1!==n.length||n[0]!==h.extensionName)return void x(e,r,"Server indicated an extension that was not requested");try{b.accept(t[h.extensionName])}catch(t){return void x(e,r,"Invalid Sec-WebSocket-Extensions header")}e._extensions[h.extensionName]=b}e.setSocket(r,n,{generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})})),i.finishRequest?i.finishRequest(S,e):S.end()}function L(e,t){e._readyState=P.CLOSING,e.emit("error",t),e.emitClose()}function B(e){return e.path=e.socketPath,i.connect(e)}function D(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=i.isIP(e.host)?"":e.host),a.connect(e)}function x(e,t,r){e._readyState=P.CLOSING;const n=new Error(r);Error.captureStackTrace(n,x),t.setHeader?(t[R]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(L,e,n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function U(e,t,r){if(t){const r=I(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){const t=new Error(`WebSocket is not open: readyState ${e.readyState} (${k[e.readyState]})`);process.nextTick(r,t)}}function j(e,t){const r=this[S];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[S]&&(r._socket.removeListener("data",J),process.nextTick($,r._socket),1005===e?r.close():r.close(e,t))}function F(){const e=this[S];e.isPaused||e._socket.resume()}function H(e){const t=this[S];void 0!==t._socket[S]&&(t._socket.removeListener("data",J),process.nextTick($,t._socket),t.close(e[b])),t.emit("error",e)}function W(){this[S].emitClose()}function q(e,t){this[S].emit("message",e,t)}function z(e){const t=this[S];t.pong(e,!t._isServer,E),t.emit("ping",e)}function G(e){this[S].emit("pong",e)}function $(e){e.resume()}function V(){const e=this[S];let t;this.removeListener("close",V),this.removeListener("data",J),this.removeListener("end",K),e._readyState=P.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[S]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",W),e._receiver.on("finish",W))}function J(e){this[S]._receiver.write(e)||this.pause()}function K(){const e=this[S];e._readyState=P.CLOSING,e._receiver.end(),this.end()}function Q(){const e=this[S];this.removeListener("error",Q),this.on("error",E),e&&(e._readyState=P.CLOSING,this.destroy())}Object.defineProperty(P,"CONNECTING",{enumerable:!0,value:k.indexOf("CONNECTING")}),Object.defineProperty(P.prototype,"CONNECTING",{enumerable:!0,value:k.indexOf("CONNECTING")}),Object.defineProperty(P,"OPEN",{enumerable:!0,value:k.indexOf("OPEN")}),Object.defineProperty(P.prototype,"OPEN",{enumerable:!0,value:k.indexOf("OPEN")}),Object.defineProperty(P,"CLOSING",{enumerable:!0,value:k.indexOf("CLOSING")}),Object.defineProperty(P.prototype,"CLOSING",{enumerable:!0,value:k.indexOf("CLOSING")}),Object.defineProperty(P,"CLOSED",{enumerable:!0,value:k.indexOf("CLOSED")}),Object.defineProperty(P.prototype,"CLOSED",{enumerable:!0,value:k.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((e=>{Object.defineProperty(P.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(P.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[v])return t[_];return null},set(t){for(const t of this.listeners(e))if(t[v]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[v]:!0})}})})),P.prototype.addEventListener=w,P.prototype.removeEventListener=A,e.exports=P},49602:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},34411:(e,t,r)=>{"use strict";function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,o=arguments.length;r<o;r++)t.push(arguments[r]);return t}function o(e,t,r){var n=t===e.head?new a(r,null,t,e):new a(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function s(e,t){e.tail=new a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function i(e,t){e.head=new a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function a(e,t,r,n){if(!(this instanceof a))return new a(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=a,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)s(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,o=this.head;null!==o;)r.push(e.call(t,o.value,this)),o=o.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,o=this.tail;null!==o;)r.push(e.call(t,o.value,this)),o=o.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var o=0;null!==n;o++)r=e(r,n.value,o),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var o=this.length-1;null!==n;o--)r=e(r,n.value,o),n=n.prev;return r},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=0,s=this.head;null!==s&&o<e;o++)s=s.next;for(;null!==s&&o<t;o++,s=s.next)r.push(s.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=this.length,s=this.tail;null!==s&&o>t;o--)s=s.prev;for(;null!==s&&o>e;o--,s=s.prev)r.push(s.value);return r},n.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,s=this.head;null!==s&&n<e;n++)s=s.next;var i=[];for(n=0;s&&n<t;n++)i.push(s.value),s=this.removeNode(s);for(null===s&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev),n=0;n<r.length;n++)s=o(this,s,r[n]);return i},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(49602)(n)}catch(e){}},2958:(e,t,r)=>{var n=r(57147),o=r(12781).Transform,s=r(12781).PassThrough,i=r(59796),a=r(73837),c=r(82361).EventEmitter,l=r(82779);function u(){this.outputStream=new s,this.entries=[],this.outputStreamCursor=0,this.ended=!1,this.allDone=!1,this.forceZip64Eocd=!1}t.ZipFile=u,t.dateToDosDateTime=R,a.inherits(u,c),u.prototype.addFile=function(e,t,r){var o=this;t=v(t,!1),null==r&&(r={});var s=new b(t,!1,r);o.entries.push(s),n.stat(e,(function(t,i){return t?o.emit("error",t):i.isFile()?(s.uncompressedSize=i.size,null==r.mtime&&s.setLastModDate(i.mtime),null==r.mode&&s.setFileAttributesMode(i.mode),s.setFileDataPumpFunction((function(){var t=n.createReadStream(e);s.state=b.FILE_DATA_IN_PROGRESS,t.on("error",(function(e){o.emit("error",e)})),p(o,s,t)})),void f(o)):o.emit("error",new Error("not a file: "+e))}))},u.prototype.addReadStream=function(e,t,r){var n=this;null==r&&(r={});var o=new b(t=v(t,!1),!1,r);n.entries.push(o),o.setFileDataPumpFunction((function(){o.state=b.FILE_DATA_IN_PROGRESS,p(n,o,e)})),f(n)},u.prototype.addBuffer=function(e,t,r){var n=this;if(t=v(t,!1),e.length>1073741823)throw new Error("buffer too large: "+e.length+" > 1073741823");if(null==r&&(r={}),null!=r.size)throw new Error("options.size not allowed");var o=new b(t,!1,r);function s(e){o.compressedSize=e.length,o.setFileDataPumpFunction((function(){h(n,e),h(n,o.getDataDescriptor()),o.state=b.FILE_DATA_DONE,setImmediate((function(){f(n)}))})),f(n)}o.uncompressedSize=e.length,o.crc32=l.unsigned(e),o.crcAndFileSizeKnown=!0,n.entries.push(o),o.compress?i.deflateRaw(e,(function(e,t){s(t)})):s(e)},u.prototype.addEmptyDirectory=function(e,t){var r=this;if(e=v(e,!0),null==t&&(t={}),null!=t.size)throw new Error("options.size not allowed");if(null!=t.compress)throw new Error("options.compress not allowed");var n=new b(e,!0,t);r.entries.push(n),n.setFileDataPumpFunction((function(){h(r,n.getDataDescriptor()),n.state=b.FILE_DATA_DONE,f(r)})),f(r)};var d=B([80,75,5,6]);function h(e,t){e.outputStream.write(t),e.outputStreamCursor+=t.length}function p(e,t,r){var n=new N,o=new k,a=t.compress?new i.DeflateRaw:new s,c=new k;r.pipe(n).pipe(o).pipe(a).pipe(c).pipe(e.outputStream,{end:!1}),c.on("end",(function(){if(t.crc32=n.crc32,null==t.uncompressedSize)t.uncompressedSize=o.byteCount;else if(t.uncompressedSize!==o.byteCount)return e.emit("error",new Error("file data stream has unexpected number of bytes"));t.compressedSize=c.byteCount,e.outputStreamCursor+=t.compressedSize,h(e,t.getDataDescriptor()),t.state=b.FILE_DATA_DONE,f(e)}))}function f(e){if(!e.allDone){if(e.ended&&null!=e.finalSizeCallback){var t=function(e){for(var t=0,r=0,n=0;n<e.entries.length;n++){var o=e.entries[n];if(o.compress)return-1;if(o.state>=b.READY_TO_PUMP_FILE_DATA){if(null==o.uncompressedSize)return-1}else if(null==o.uncompressedSize)return null;o.relativeOffsetOfLocalHeader=t;var s=o.useZip64Format();t+=S+o.utf8FileName.length,t+=o.uncompressedSize,o.crcAndFileSizeKnown||(t+=s?T:A),r+=C+o.utf8FileName.length+o.fileComment.length,s&&(r+=I)}var i=0;return(e.forceZip64Eocd||e.entries.length>=65535||r>=65535||t>=4294967295)&&(i+=g+m),t+r+(i+=y+e.comment.length)}(e);null!=t&&(e.finalSizeCallback(t),e.finalSizeCallback=null)}var r=function(){for(var t=0;t<e.entries.length;t++){var r=e.entries[t];if(r.state<b.FILE_DATA_DONE)return r}return null}();if(null!=r){if(r.state<b.READY_TO_PUMP_FILE_DATA)return;if(r.state===b.FILE_DATA_IN_PROGRESS)return;r.relativeOffsetOfLocalHeader=e.outputStreamCursor;var n=r.getLocalFileHeader();h(e,n),r.doFileDataPump()}else e.ended&&(e.offsetOfStartOfCentralDirectory=e.outputStreamCursor,e.entries.forEach((function(t){var r=t.getCentralDirectoryRecord();h(e,r)})),h(e,function(e,t){var r=!1,n=e.entries.length;(e.forceZip64Eocd||e.entries.length>=65535)&&(n=65535,r=!0);var o=e.outputStreamCursor-e.offsetOfStartOfCentralDirectory,s=o;(e.forceZip64Eocd||o>=4294967295)&&(s=4294967295,r=!0);var i=e.offsetOfStartOfCentralDirectory;(e.forceZip64Eocd||e.offsetOfStartOfCentralDirectory>=4294967295)&&(i=4294967295,r=!0);var a=L(y+e.comment.length);if(a.writeUInt32LE(101010256,0),a.writeUInt16LE(0,4),a.writeUInt16LE(0,6),a.writeUInt16LE(n,8),a.writeUInt16LE(n,10),a.writeUInt32LE(s,12),a.writeUInt32LE(i,16),a.writeUInt16LE(e.comment.length,20),e.comment.copy(a,22),!r)return a;var c=L(g);c.writeUInt32LE(101075792,0),O(c,g-12,4),c.writeUInt16LE(w,12),c.writeUInt16LE(E,14),c.writeUInt32LE(0,16),c.writeUInt32LE(0,20),O(c,e.entries.length,24),O(c,e.entries.length,32),O(c,o,40),O(c,e.offsetOfStartOfCentralDirectory,48);var l=L(m);return l.writeUInt32LE(117853008,0),l.writeUInt32LE(0,4),O(l,e.outputStreamCursor,8),l.writeUInt32LE(1,16),Buffer.concat([c,l,a])}(e)),e.outputStream.end(),e.allDone=!0)}}u.prototype.end=function(e,t){if("function"==typeof e&&(t=e,e=null),null==e&&(e={}),!this.ended){if(this.ended=!0,this.finalSizeCallback=t,this.forceZip64Eocd=!!e.forceZip64Format,e.comment){if("string"==typeof e.comment?this.comment=function(e){if(/^[\x20-\x7e]*$/.test(e))return B(e,"utf-8");if(null==M){M={};for(var t=0;t<P.length;t++)M[P[t]]=t}var r=L(e.length);for(t=0;t<e.length;t++){var n=M[e[t]];if(null==n)throw new Error("character not encodable in CP437: "+JSON.stringify(e[t]));r[t]=n}return r}(e.comment):this.comment=e.comment,this.comment.length>65535)throw new Error("comment is too large");if(D(this.comment,d))throw new Error("comment contains end of central directory record signature")}else this.comment=_;f(this)}};var g=56,m=20,y=22;function v(e,t){if(""===e)throw new Error("empty metadataPath");if(e=e.replace(/\\/g,"/"),/^[a-zA-Z]:/.test(e)||/^\//.test(e))throw new Error("absolute path: "+e);if(-1!==e.split("/").indexOf(".."))throw new Error("invalid relative path: "+e);var r=/\/$/.test(e);if(t)r||(e+="/");else if(r)throw new Error("file path cannot end with '/': "+e);return e}var _=L(0);function b(e,t,r){if(this.utf8FileName=B(e),this.utf8FileName.length>65535)throw new Error("utf8 file name too long. "+utf8FileName.length+" > 65535");if(this.isDirectory=t,this.state=b.WAITING_FOR_METADATA,this.setLastModDate(null!=r.mtime?r.mtime:new Date),null!=r.mode?this.setFileAttributesMode(r.mode):this.setFileAttributesMode(t?16893:33204),t?(this.crcAndFileSizeKnown=!0,this.crc32=0,this.uncompressedSize=0,this.compressedSize=0):(this.crcAndFileSizeKnown=!1,this.crc32=null,this.uncompressedSize=null,this.compressedSize=null,null!=r.size&&(this.uncompressedSize=r.size)),t?this.compress=!1:(this.compress=!0,null!=r.compress&&(this.compress=!!r.compress)),this.forceZip64Format=!!r.forceZip64Format,r.fileComment){if("string"==typeof r.fileComment?this.fileComment=B(r.fileComment,"utf-8"):this.fileComment=r.fileComment,this.fileComment.length>65535)throw new Error("fileComment is too large")}else this.fileComment=_}b.WAITING_FOR_METADATA=0,b.READY_TO_PUMP_FILE_DATA=1,b.FILE_DATA_IN_PROGRESS=2,b.FILE_DATA_DONE=3,b.prototype.setLastModDate=function(e){var t=R(e);this.lastModFileTime=t.time,this.lastModFileDate=t.date},b.prototype.setFileAttributesMode=function(e){if((65535&e)!==e)throw new Error("invalid mode. expected: 0 <= "+e+" <= 65535");this.externalFileAttributes=e<<16>>>0},b.prototype.setFileDataPumpFunction=function(e){this.doFileDataPump=e,this.state=b.READY_TO_PUMP_FILE_DATA},b.prototype.useZip64Format=function(){return this.forceZip64Format||null!=this.uncompressedSize&&this.uncompressedSize>4294967294||null!=this.compressedSize&&this.compressedSize>4294967294||null!=this.relativeOffsetOfLocalHeader&&this.relativeOffsetOfLocalHeader>4294967294};var S=30,E=45,w=831;b.prototype.getLocalFileHeader=function(){var e=0,t=0,r=0;this.crcAndFileSizeKnown&&(e=this.crc32,t=this.compressedSize,r=this.uncompressedSize);var n=L(S),o=2048;return this.crcAndFileSizeKnown||(o|=8),n.writeUInt32LE(67324752,0),n.writeUInt16LE(20,4),n.writeUInt16LE(o,6),n.writeUInt16LE(this.getCompressionMethod(),8),n.writeUInt16LE(this.lastModFileTime,10),n.writeUInt16LE(this.lastModFileDate,12),n.writeUInt32LE(e,14),n.writeUInt32LE(t,18),n.writeUInt32LE(r,22),n.writeUInt16LE(this.utf8FileName.length,26),n.writeUInt16LE(0,28),Buffer.concat([n,this.utf8FileName])};var A=16,T=24;b.prototype.getDataDescriptor=function(){return this.crcAndFileSizeKnown?_:this.useZip64Format()?((e=L(T)).writeUInt32LE(134695760,0),e.writeUInt32LE(this.crc32,4),O(e,this.compressedSize,8),O(e,this.uncompressedSize,16),e):((e=L(A)).writeUInt32LE(134695760,0),e.writeUInt32LE(this.crc32,4),e.writeUInt32LE(this.compressedSize,8),e.writeUInt32LE(this.uncompressedSize,12),e);var e};var C=46,I=28;function R(e){var t=0;t|=31&e.getDate(),t|=(e.getMonth()+1&15)<<5,t|=(e.getFullYear()-1980&127)<<9;var r=0;return r|=Math.floor(e.getSeconds()/2),r|=(63&e.getMinutes())<<5,{date:t,time:r|=(31&e.getHours())<<11}}function O(e,t,r){var n=Math.floor(t/4294967296),o=t%4294967296;e.writeUInt32LE(o,r),e.writeUInt32LE(n,r+4)}function k(e){o.call(this,e),this.byteCount=0}function N(e){o.call(this,e),this.crc32=0}b.prototype.getCentralDirectoryRecord=function(){var e=L(C),t=2048;this.crcAndFileSizeKnown||(t|=8);var r,n,o=this.compressedSize,s=this.uncompressedSize,i=this.relativeOffsetOfLocalHeader;return this.useZip64Format()?(o=4294967295,s=4294967295,i=4294967295,r=E,(n=L(I)).writeUInt16LE(1,0),n.writeUInt16LE(I-4,2),O(n,this.uncompressedSize,4),O(n,this.compressedSize,12),O(n,this.relativeOffsetOfLocalHeader,20)):(r=20,n=_),e.writeUInt32LE(33639248,0),e.writeUInt16LE(w,4),e.writeUInt16LE(r,6),e.writeUInt16LE(t,8),e.writeUInt16LE(this.getCompressionMethod(),10),e.writeUInt16LE(this.lastModFileTime,12),e.writeUInt16LE(this.lastModFileDate,14),e.writeUInt32LE(this.crc32,16),e.writeUInt32LE(o,20),e.writeUInt32LE(s,24),e.writeUInt16LE(this.utf8FileName.length,28),e.writeUInt16LE(n.length,30),e.writeUInt16LE(this.fileComment.length,32),e.writeUInt16LE(0,34),e.writeUInt16LE(0,36),e.writeUInt32LE(this.externalFileAttributes,38),e.writeUInt32LE(i,42),Buffer.concat([e,this.utf8FileName,n,this.fileComment])},b.prototype.getCompressionMethod=function(){return this.compress?8:0},a.inherits(k,o),k.prototype._transform=function(e,t,r){this.byteCount+=e.length,r(null,e)},a.inherits(N,o),N.prototype._transform=function(e,t,r){this.crc32=l.unsigned(e,this.crc32),r(null,e)};var P="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ";if(256!==P.length)throw new Error("assertion failure");var M=null;function L(e){L=function(e){return Buffer.allocUnsafe(e)};try{return L(e)}catch(t){return L=function(e){return new Buffer(e)},L(e)}}function B(e,t){B=function(e,t){return Buffer.from(e,t)};try{return B(e,t)}catch(r){return B=function(e,t){return new Buffer(e,t)},B(e,t)}}function D(e,t){D=function(e,t){return e.includes(t)};try{return D(e,t)}catch(r){return D=function(e,t){for(var r=0;r<=e.length-t.length;r++)for(var n=0;;n++){if(n===t.length)return!0;if(e[r+n]!==t[n])break}return!1},D(e,t)}}},89496:e=>{"use strict";e.exports=require("vscode")},52864:e=>{"use strict";e.exports=require("bufferutil")},2239:e=>{"use strict";e.exports=require("utf-8-validate")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},35001:e=>{"use strict";e.exports=require("cluster")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},73292:e=>{"use strict";e.exports=require("fs/promises")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},97742:e=>{"use strict";e.exports=require("node:process")},72477:e=>{"use strict";e.exports=require("node:stream/web")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},77282:e=>{"use strict";e.exports=require("process")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},84655:e=>{"use strict";e.exports=require("v8")},71267:e=>{"use strict";e.exports=require("worker_threads")},59796:e=>{"use strict";e.exports=require("zlib")},58761:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compressionBrotli=t.compressionGzip=void 0;const n=r(59796),o=r(73837),s=r(43342),i=r(50852),a=(0,o.promisify)(n.gzip),c=(0,o.promisify)(n.gunzip),l=(0,o.promisify)(n.brotliCompress),u=(0,o.promisify)(n.brotliDecompress);function d(e,t){return e.catch((e=>{const{code:r}=(0,i.getNodeErrorProps)(e);switch(r){case"ERR_BUFFER_TOO_LARGE":e=new s.ConnectError(`message is larger than configured readMaxBytes ${t} after decompression`,s.Code.ResourceExhausted);break;case"Z_DATA_ERROR":case"ERR_PADDING_2":e=new s.ConnectError("decompression failed",s.Code.InvalidArgument,void 0,void 0,e);break;default:e=new s.ConnectError("decompression failed",s.Code.Internal,void 0,void 0,e)}return Promise.reject(e)}))}t.compressionGzip={name:"gzip",compress:e=>a(e,{}),decompress:(e,t)=>d(c(e,{maxOutputLength:t}),t)},t.compressionBrotli={name:"br",compress:e=>l(e,{}),decompress:(e,t)=>d(u(e,{maxOutputLength:t}),t)}},77921:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connectNodeAdapter=void 0;const n=r(43342),o=r(69168),s=r(32363),i=r(58761);t.connectNodeAdapter=function(e){var t;void 0===e.acceptCompression&&(e.acceptCompression=[i.compressionGzip,i.compressionBrotli]);const r=(0,n.createConnectRouter)(e);e.routes(r);const o=null!==(t=e.requestPathPrefix)&&void 0!==t?t:"",c=new Map;for(const e of r.handlers)c.set(o+e.requestPath,e);return function(t,r){var o,i;const l=c.get(null!==(o=t.url)&&void 0!==o?o:"");if(!l)return void(null!==(i=e.fallback)&&void 0!==i?i:a)(t,r);const u=(0,s.universalRequestFromNodeRequest)(t,void 0);l(u).then((e=>(0,s.universalResponseToNodeResponse)(e,r))).catch((e=>{(0,n.connectErrorFromReason)(e).code!=n.Code.Aborted&&console.error(`handler for rpc ${l.method.name} of ${l.service.typeName} failed`,e)}))}};const a=(e,t)=>{t.writeHead(o.uResponseNotFound.status),t.end()}},19269:function(e,t,r){"use strict";var n=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}},o=this&&this.__await||function(e){return this instanceof o?(this.v=e,this):new o(e)},s=this&&this.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=r.apply(e,t||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){s[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||c(e,t)}))})}function c(e,t){try{(r=s[e](t)).value instanceof o?Promise.resolve(r.value.v).then(l,u):d(i[0][2],r)}catch(e){d(i[0][3],e)}var r}function l(e){c("next",e)}function u(e){c("throw",e)}function d(e,t){e(t),i.shift(),i.length&&c(i[0][0],i[0][1])}};Object.defineProperty(t,"__esModule",{value:!0}),t.createConnectTransport=void 0;const i=r(69168),a=r(43342),c=r(19242),l=r(9939);t.createConnectTransport=function(e){const t=(0,l.validateNodeTransportOptions)(e);return{async unary(r,n,o,s,l,u){const d=(0,i.createMethodSerializationLookup)(n,e.binaryOptions,e.jsonOptions,t);return await(0,a.runUnary)({stream:!1,service:r,method:n,url:(0,i.createMethodUrl)(e.baseUrl,r,n),init:{},header:(0,c.requestHeaderWithCompression)(n.kind,t.useBinaryFormat,s,l,t.acceptCompression,t.sendCompression),message:u instanceof n.I?u:new n.I(u),signal:null!=o?o:(new AbortController).signal},(async e=>{let o=d.getI(t.useBinaryFormat).serialize(e.message);t.sendCompression&&o.byteLength>t.compressMinBytes?(o=await t.sendCompression.compress(o),e.header.set(c.headerUnaryEncoding,t.sendCompression.name)):e.header.delete(c.headerUnaryEncoding);const s=await t.client({url:e.url,method:"POST",header:e.header,signal:e.signal,body:(0,i.createAsyncIterable)([o])}),{compression:l,isUnaryError:u,unaryError:h}=(0,c.validateResponseWithCompression)(n.kind,t.useBinaryFormat,t.acceptCompression,s.status,s.header),[p,f]=(0,c.trailerDemux)(s.header);let g=await(0,i.pipeTo)(s.body,(0,i.sinkAllBytes)(t.readMaxBytes,s.header.get(c.headerUnaryContentLength)),{propagateDownStreamError:!1});if(l&&(g=await l.decompress(g,t.readMaxBytes)),u)throw(0,c.errorFromJsonBytes)(g,(0,a.appendHeaders)(p,f),h);return{stream:!1,service:r,method:n,header:p,message:d.getO(t.useBinaryFormat).parse(g),trailer:f}}),e.interceptors)},async stream(r,l,u,d,h,p){const f=(0,i.createMethodSerializationLookup)(l,e.binaryOptions,e.jsonOptions,t),g=(0,c.createEndStreamSerialization)(e.jsonOptions);return(0,a.runStreaming)({stream:!0,service:r,method:l,url:(0,i.createMethodUrl)(e.baseUrl,r,l),init:{method:"POST",redirect:"error",mode:"cors"},signal:null!=u?u:(new AbortController).signal,header:(0,c.requestHeaderWithCompression)(l.kind,t.useBinaryFormat,d,h,t.acceptCompression,t.sendCompression),message:(0,i.pipe)(p,(0,i.transformNormalizeMessage)(l.I),{propagateDownStreamError:!0})},(async e=>{const r=await t.client({url:e.url,method:"POST",header:e.header,signal:e.signal,body:(0,i.pipe)(e.message,(0,i.transformNormalizeMessage)(l.I),(0,i.transformSerializeEnvelope)(f.getI(t.useBinaryFormat)),(0,i.transformCompressEnvelope)(t.sendCompression,t.compressMinBytes),(0,i.transformJoinEnvelopes)(),{propagateDownStreamError:!0})}),{compression:u}=(0,c.validateResponseWithCompression)(l.kind,t.useBinaryFormat,t.acceptCompression,r.status,r.header),d=Object.assign(Object.assign({},e),{header:r.header,trailer:new Headers,message:(0,i.pipe)(r.body,(0,i.transformSplitEnvelope)(t.readMaxBytes),(0,i.transformDecompressEnvelope)(null!=u?u:null,t.readMaxBytes),(0,i.transformParseEnvelope)(f.getO(t.useBinaryFormat),c.endStreamFlag,g),(function(e){return s(this,arguments,(function*(){var t,r,s,i;let c=!1;try{for(var l,u=!0,h=n(e);!(t=(l=yield o(h.next())).done);){i=l.value,u=!1;try{const e=i;if(e.end){if(c)throw new a.ConnectError("protocol error: received extra EndStreamResponse",a.Code.InvalidArgument);if(c=!0,e.value.error)throw e.value.error;e.value.metadata.forEach(((e,t)=>d.trailer.set(t,e)));continue}if(c)throw new a.ConnectError("protocol error: received extra message after EndStreamResponse",a.Code.InvalidArgument);yield yield o(e.value)}finally{u=!0}}}catch(e){r={error:e}}finally{try{u||t||!(s=h.return)||(yield o(s.call(h)))}finally{if(r)throw r.error}}if(!c)throw new a.ConnectError("protocol error: missing EndStreamResponse",a.Code.InvalidArgument)}))}),{propagateDownStreamError:!0})});return d}),e.interceptors)}}}},83122:function(e,t,r){"use strict";var n=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}},o=this&&this.__await||function(e){return this instanceof o?(this.v=e,this):new o(e)},s=this&&this.__asyncDelegator||function(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,s){t[n]=e[n]?function(t){return(r=!r)?{value:o(e[n](t)),done:"return"===n}:s?s(t):t}:s}},i=this&&this.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=r.apply(e,t||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){s[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||c(e,t)}))})}function c(e,t){try{(r=s[e](t)).value instanceof o?Promise.resolve(r.value.v).then(l,u):d(i[0][2],r)}catch(e){d(i[0][3],e)}var r}function l(e){c("next",e)}function u(e){c("throw",e)}function d(e,t){e(t),i.shift(),i.length&&c(i[0][0],i[0][1])}};Object.defineProperty(t,"__esModule",{value:!0}),t.createGrpcTransport=void 0;const a=r(43342),c=r(69168),l=r(28983),u=r(9939);t.createGrpcTransport=function(e){const t=(0,u.validateNodeTransportOptions)(e);return{async unary(r,o,s,i,u,d){const h=(0,c.createMethodSerializationLookup)(o,e.binaryOptions,e.jsonOptions,t);return await(0,a.runUnary)({stream:!1,service:r,method:o,url:(0,c.createMethodUrl)(e.baseUrl,r,o),init:{},header:(0,l.requestHeaderWithCompression)(t.useBinaryFormat,i,u,t.acceptCompression,t.sendCompression),message:d instanceof o.I?d:new o.I(d),signal:null!=s?s:(new AbortController).signal},(async e=>{const s=await t.client({url:e.url,method:"POST",header:e.header,signal:e.signal,body:(0,c.pipe)((0,c.createAsyncIterable)([e.message]),(0,c.transformSerializeEnvelope)(h.getI(t.useBinaryFormat)),(0,c.transformCompressEnvelope)(t.sendCompression,t.compressMinBytes),(0,c.transformJoinEnvelopes)(),{propagateDownStreamError:!0})}),{compression:i}=(0,l.validateResponseWithCompression)(t.useBinaryFormat,t.acceptCompression,s.status,s.header),u=await(0,c.pipeTo)(s.body,(0,c.transformSplitEnvelope)(t.readMaxBytes),(0,c.transformDecompressEnvelope)(null!=i?i:null,t.readMaxBytes),(0,c.transformParseEnvelope)(h.getO(t.useBinaryFormat)),(async e=>{var t,r,o,s;let i;try{for(var c,l=!0,u=n(e);!(t=(c=await u.next()).done);){s=c.value,l=!1;try{const e=s;if(void 0!==i)throw new a.ConnectError("protocol error: received extra output message for unary method",a.Code.InvalidArgument);i=e}finally{l=!0}}}catch(e){r={error:e}}finally{try{l||t||!(o=u.return)||await o.call(u)}finally{if(r)throw r.error}}return i}),{propagateDownStreamError:!1});if((0,l.validateTrailer)(s.trailer),void 0===u)throw new a.ConnectError("protocol error: missing output message for unary method",a.Code.InvalidArgument);return{stream:!1,service:r,method:o,header:s.header,message:u,trailer:s.trailer}}),e.interceptors)},async stream(r,u,d,h,p,f){const g=(0,c.createMethodSerializationLookup)(u,e.binaryOptions,e.jsonOptions,t);return(0,a.runStreaming)({stream:!0,service:r,method:u,url:(0,c.createMethodUrl)(e.baseUrl,r,u),init:{},signal:null!=d?d:(new AbortController).signal,header:(0,l.requestHeaderWithCompression)(t.useBinaryFormat,h,p,t.acceptCompression,t.sendCompression),message:(0,c.pipe)(f,(0,c.transformNormalizeMessage)(u.I),{propagateDownStreamError:!0})},(async e=>{const r=await t.client({url:e.url,method:"POST",header:e.header,signal:e.signal,body:(0,c.pipe)(e.message,(0,c.transformNormalizeMessage)(u.I),(0,c.transformSerializeEnvelope)(g.getI(t.useBinaryFormat)),(0,c.transformCompressEnvelope)(t.sendCompression,t.compressMinBytes),(0,c.transformJoinEnvelopes)(),{propagateDownStreamError:!0})}),{compression:a,foundStatus:d}=(0,l.validateResponseWithCompression)(t.useBinaryFormat,t.acceptCompression,r.status,r.header),h=Object.assign(Object.assign({},e),{header:r.header,trailer:r.trailer,message:(0,c.pipe)(r.body,(0,c.transformSplitEnvelope)(t.readMaxBytes),(0,c.transformDecompressEnvelope)(null!=a?a:null,t.readMaxBytes),(0,c.transformParseEnvelope)(g.getO(t.useBinaryFormat)),(function(e){return i(this,arguments,(function*(){yield o(yield*s(n(e))),d||(0,l.validateTrailer)(r.trailer)}))}),{propagateDownStreamError:!0})});return h}),e.interceptors)}}}},60315:function(e,t,r){"use strict";var n=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}},o=this&&this.__await||function(e){return this instanceof o?(this.v=e,this):new o(e)},s=this&&this.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=r.apply(e,t||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){s[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||c(e,t)}))})}function c(e,t){try{(r=s[e](t)).value instanceof o?Promise.resolve(r.value.v).then(l,u):d(i[0][2],r)}catch(e){d(i[0][3],e)}var r}function l(e){c("next",e)}function u(e){c("throw",e)}function d(e,t){e(t),i.shift(),i.length&&c(i[0][0],i[0][1])}};Object.defineProperty(t,"__esModule",{value:!0}),t.createGrpcWebTransport=void 0;const i=r(43342),a=r(30629),c=r(69168),l=r(9939);t.createGrpcWebTransport=function(e){const t=(0,l.validateNodeTransportOptions)(e);return{async unary(r,o,s,l,u,d){const h=(0,c.createMethodSerializationLookup)(o,e.binaryOptions,e.jsonOptions,t);return await(0,i.runUnary)({stream:!1,service:r,method:o,url:(0,c.createMethodUrl)(e.baseUrl,r,o),init:{},header:(0,a.requestHeaderWithCompression)(t.useBinaryFormat,l,u,t.acceptCompression,t.sendCompression),message:d instanceof o.I?d:new o.I(d),signal:null!=s?s:(new AbortController).signal},(async e=>{const s=await t.client({url:e.url,method:"POST",header:e.header,signal:e.signal,body:(0,c.pipe)((0,c.createAsyncIterable)([e.message]),(0,c.transformSerializeEnvelope)(h.getI(t.useBinaryFormat)),(0,c.transformCompressEnvelope)(t.sendCompression,t.compressMinBytes),(0,c.transformJoinEnvelopes)(),{propagateDownStreamError:!0})}),{compression:l}=(0,a.validateResponseWithCompression)(t.useBinaryFormat,t.acceptCompression,s.status,s.header),{trailer:u,message:d}=await(0,c.pipeTo)(s.body,(0,c.transformSplitEnvelope)(t.readMaxBytes),(0,c.transformDecompressEnvelope)(null!=l?l:null,t.readMaxBytes),(0,c.transformParseEnvelope)(h.getO(t.useBinaryFormat),a.trailerFlag,(0,a.createTrailerSerialization)()),(async e=>{var t,r,o,s;let a,c;try{for(var l,u=!0,d=n(e);!(t=(l=await d.next()).done);){s=l.value,u=!1;try{const e=s;if(e.end){if(void 0!==c)throw new i.ConnectError("protocol error: received extra trailer",i.Code.InvalidArgument);c=e.value}else{if(void 0!==a)throw new i.ConnectError("protocol error: received extra output message for unary method",i.Code.InvalidArgument);a=e.value}}finally{u=!0}}}catch(e){r={error:e}}finally{try{u||t||!(o=d.return)||await o.call(d)}finally{if(r)throw r.error}}return{trailer:c,message:a}}),{propagateDownStreamError:!1});if(void 0===u)throw new i.ConnectError("protocol error: missing trailer",i.Code.InvalidArgument);if((0,a.validateTrailer)(u),void 0===d)throw new i.ConnectError("protocol error: missing output message for unary method",i.Code.InvalidArgument);return{stream:!1,service:r,method:o,header:s.header,message:d,trailer:u}}),e.interceptors)},async stream(r,l,u,d,h,p){const f=(0,c.createMethodSerializationLookup)(l,e.binaryOptions,e.jsonOptions,t);return(0,i.runStreaming)({stream:!0,service:r,method:l,url:(0,c.createMethodUrl)(e.baseUrl,r,l),init:{method:"POST",redirect:"error",mode:"cors"},signal:null!=u?u:(new AbortController).signal,header:(0,a.requestHeaderWithCompression)(t.useBinaryFormat,d,h,t.acceptCompression,t.sendCompression),message:(0,c.pipe)(p,(0,c.transformNormalizeMessage)(l.I),{propagateDownStreamError:!0})},(async e=>{const r=await t.client({url:e.url,method:"POST",header:e.header,signal:e.signal,body:(0,c.pipe)(e.message,(0,c.transformNormalizeMessage)(l.I),(0,c.transformSerializeEnvelope)(f.getI(t.useBinaryFormat)),(0,c.transformCompressEnvelope)(t.sendCompression,t.compressMinBytes),(0,c.transformJoinEnvelopes)(),{propagateDownStreamError:!0})}),{compression:u,foundStatus:d}=(0,a.validateResponseWithCompression)(t.useBinaryFormat,t.acceptCompression,r.status,r.header),h=Object.assign(Object.assign({},e),{header:r.header,trailer:new Headers,message:(0,c.pipe)(r.body,(0,c.transformSplitEnvelope)(t.readMaxBytes),(0,c.transformDecompressEnvelope)(null!=u?u:null,t.readMaxBytes),(0,c.transformParseEnvelope)(f.getO(t.useBinaryFormat),a.trailerFlag,(0,a.createTrailerSerialization)()),(function(e){return s(this,arguments,(function*(){var t,r,s,c;if(d){if(!0!==(yield o(e[Symbol.asyncIterator]().next())).done)throw new i.ConnectError("protocol error: extra data for trailers-only",i.Code.InvalidArgument);return yield o(void 0)}let l=!1;try{for(var u,p=!0,f=n(e);!(t=(u=yield o(f.next())).done);){c=u.value,p=!1;try{const e=c;if(e.end){if(l)throw new i.ConnectError("protocol error: received extra trailer",i.Code.InvalidArgument);l=!0,(0,a.validateTrailer)(e.value),e.value.forEach(((e,t)=>h.trailer.set(t,e)));continue}if(l)throw new i.ConnectError("protocol error: received extra message after trailer",i.Code.InvalidArgument);yield yield o(e.value)}finally{p=!0}}}catch(e){r={error:e}}finally{try{p||t||!(s=f.return)||(yield o(s.call(f)))}finally{if(r)throw r.error}}if(!l)throw new i.ConnectError("protocol error: missing trailer",i.Code.InvalidArgument)}))}),{propagateDownStreamError:!0})});return h}),e.interceptors)}}}},62940:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.universalResponseToNodeResponse=t.universalRequestFromNodeRequest=t.connectNodeAdapter=t.compressionGzip=t.compressionBrotli=t.createConnectTransport=t.createGrpcTransport=t.createGrpcWebTransport=void 0,r(20364);var n=r(60315);Object.defineProperty(t,"createGrpcWebTransport",{enumerable:!0,get:function(){return n.createGrpcWebTransport}});var o=r(83122);Object.defineProperty(t,"createGrpcTransport",{enumerable:!0,get:function(){return o.createGrpcTransport}});var s=r(19269);Object.defineProperty(t,"createConnectTransport",{enumerable:!0,get:function(){return s.createConnectTransport}});var i=r(58761);Object.defineProperty(t,"compressionBrotli",{enumerable:!0,get:function(){return i.compressionBrotli}}),Object.defineProperty(t,"compressionGzip",{enumerable:!0,get:function(){return i.compressionGzip}});var a=r(77921);Object.defineProperty(t,"connectNodeAdapter",{enumerable:!0,get:function(){return a.connectNodeAdapter}});var c=r(32363);Object.defineProperty(t,"universalRequestFromNodeRequest",{enumerable:!0,get:function(){return c.universalRequestFromNodeRequest}}),Object.defineProperty(t,"universalResponseToNodeResponse",{enumerable:!0,get:function(){return c.universalResponseToNodeResponse}})},50852:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeErrorProps=t.unwrapNodeErrorChain=t.connectErrorFromNodeReason=void 0;const n=r(43342);function o(e){const t=[];for(;e instanceof Error&&!t.includes(e)&&(t.push(e),"cause"in e);)e=e.cause;return t}function s(e){const t={};return e instanceof Error&&("code"in e&&"string"==typeof e.code&&(t.code=e.code),"syscall"in e&&"string"==typeof e.syscall&&(t.syscall=e.syscall)),t}t.connectErrorFromNodeReason=function(e){let t=n.Code.Internal;const r=o(e).map(s);r.some((e=>"ERR_STREAM_WRITE_AFTER_END"==e.code))||r.some((e=>"ERR_STREAM_DESTROYED"==e.code||"ERR_HTTP2_INVALID_STREAM"==e.code))?t=n.Code.Aborted:r.some((e=>"ENOTFOUND"==e.code||"EAI_AGAIN"==e.code||"ECONNREFUSED"==e.code))&&(t=n.Code.Unavailable);const i=(0,n.connectErrorFromReason)(e,t);return i!==e&&(i.cause=e),i},t.unwrapNodeErrorChain=o,t.getNodeErrorProps=s},20364:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(93602),[o]=process.versions.node.split(".").map((e=>parseInt(e,10)));o<18&&void 0===globalThis.Headers&&(globalThis.Headers=n.Headers)},82044:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createNodeHttp2Client=t.createNodeHttp1Client=void 0;const n=r(85158),o=r(13685),s=r(95687),i=r(43342),a=r(20863),c=r(50852),l=r(69168);function u(e,t){return function(r){const n=r[Symbol.asyncIterator]();return new Promise(((r,o)=>{e.catch(o),function o(){e.isRejected()||n.next().then((s=>{!0!==s.done?t.write(s.value,"binary",(function(r){if(r){if(t.writableEnded&&(0,c.unwrapNodeErrorChain)(r).map(c.getNodeErrorProps).some((e=>"ERR_STREAM_WRITE_AFTER_END"==e.code))&&void 0!==n.throw)return void n.throw(new i.ConnectError("stream closed",i.Code.Aborted)).catch((()=>{}));e.reject(r)}else o()})):t.end(r)}),(t=>{e.reject(t)}))}()}))}}function d(e,t,r){const n=t[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({async next(){const o=await e.race(n.next());return!0===o.done&&((0,a.nodeHeaderToWebHeader)(t.trailers).forEach(((e,t)=>{r.set(t,e)})),e.resolve(),await e),o},throw(t){throw e.reject(t),t}})}}function h(e){const t=new Headers;return e.on("trailers",(e=>{(0,a.nodeHeaderToWebHeader)(e).forEach(((e,r)=>{t.set(r,e)}))})),t}function p(e,t){const r=t[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({async next(){const t=await e.race(r.next());return!0===t.done&&(e.resolve(),await e),t},throw(t){throw e.reject(t),t}})}}function f(){let e,t,r=!1,n=!1;const o=new Promise(((r,n)=>{e=r,t=n})),s={resolve(){r||n||(r=!0,null==e||e())},isResolved:()=>r,reject(e){r||n||(n=!0,null==t||t((0,c.connectErrorFromNodeReason)(e)))},isRejected:()=>n,async race(e){const t=await Promise.race([e,o]);if(void 0===t&&r)throw new i.ConnectError("sentinel completed early",i.Code.Internal);return t}};return Object.assign(o,s)}t.createNodeHttp1Client=function(e){return async function(t){const r=f();return new Promise(((n,c)=>{r.catch((e=>{c(e)})),function(e,t,r,n){let a;a=new URL(t).protocol.startsWith("https")?s.request(t,r):o.request(t,r),a.on("error",e.reject),a.on("abort",(()=>e.reject(new i.ConnectError("node request aborted",i.Code.Aborted)))),a.on("socket",(function(e){"open"===e.readyState?n(a):e.on("connect",(function t(){e.off("connect",t),n(a)}))}))}(r,t.url,Object.assign(Object.assign({},e),{headers:(0,a.webHeaderToNodeHeaders)(t.header),method:t.method,signal:t.signal}),(e=>{(0,l.pipeTo)(t.body,u(r,e),{propagateDownStreamError:!0}).catch(r.reject),e.on("response",(e=>{var t;e.on("error",r.reject),e.on("abort",(()=>r.reject(new i.ConnectError("node response aborted",i.Code.Aborted)))),e.on("timeout",(()=>r.reject(new i.ConnectError("node response timed out",i.Code.Aborted))));const o=new Headers;n({status:null!==(t=e.statusCode)&&void 0!==t?t:0,header:(0,a.nodeHeaderToWebHeader)(e.headers),body:d(r,e,o),trailer:o})}))}))}))}},t.createNodeHttp2Client=function(e,t,r){const o={options:r,authority:new URL(e).origin,keepOpen:t,lastSession:void 0};return async function(e){const t=f();return new Promise(((r,s)=>{t.catch((e=>{s(e)})),function(e,t,r,o,s,a,l){const u=new URL(r);if(u.origin===t.authority){if(t.keepOpen&&void 0!==t.lastSession&&!t.lastSession.closed&&!t.lastSession.destroyed)return h(t.lastSession);n.connect(t.authority,t.options,h).on("error",d)}else{const r=`cannot make a request to ${u.origin}: the http2 session is connected to ${t.authority}`;e.reject(new i.ConnectError(r,i.Code.Internal))}function d(t){e.reject(t)}function h(r){t.lastSession=r,r.off("error",e.reject),r.off("error",d),r.on("error",e.reject),e.finally((()=>{r.off("error",e.reject),t.keepOpen||r.close()})).catch((()=>{}));const n=r.request(Object.assign(Object.assign({},s),{":method":o,":path":u.pathname}),a);n.on("error",(function(t){n.writableEnded&&(0,c.unwrapNodeErrorChain)(t).map(c.getNodeErrorProps).some((e=>"ERR_STREAM_WRITE_AFTER_END"==e.code))||e.reject(t)})),n.on("abort",(function(){e.reject(new i.ConnectError("node request aborted",i.Code.Aborted))})),l(n)}}(t,o,e.url,e.method,(0,a.webHeaderToNodeHeaders)(e.header),{signal:e.signal},(n=>{(0,l.pipeTo)(e.body,u(t,n),{propagateDownStreamError:!0}).catch(t.reject),n.on("response",(e=>{var o;const s={status:null!==(o=e[":status"])&&void 0!==o?o:0,header:(0,a.nodeHeaderToWebHeader)(e),body:p(t,n),trailer:h(n)};r(s)}))}))}))}}},32363:function(e,t,r){"use strict";var n=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}},o=this&&this.__await||function(e){return this instanceof o?(this.v=e,this):new o(e)},s=this&&this.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=r.apply(e,t||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){s[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||c(e,t)}))})}function c(e,t){try{(r=s[e](t)).value instanceof o?Promise.resolve(r.value.v).then(l,u):d(i[0][2],r)}catch(e){d(i[0][3],e)}var r}function l(e){c("next",e)}function u(e){c("throw",e)}function d(e,t){e(t),i.shift(),i.length&&c(i[0][0],i[0][1])}};Object.defineProperty(t,"__esModule",{value:!0}),t.universalResponseToNodeResponse=t.universalRequestFromNodeRequest=void 0;const i=r(43342),a=r(20863),c=r(50852);function l(e,t){return new Promise(((r,n)=>{if(e.errored)return s(e.errored);e.once("error",s),e.once("drain",i);const o=e.write(t,"binary",(function(t){t&&!o&&(s(t),e.once("error",(()=>{})))}));function s(t){e.off("error",s),e.off("drain",i),n(t)}function i(){e.off("error",s),e.off("drain",i),r()}o&&i()}))}t.universalRequestFromNodeRequest=function(e,t){var r,c;const l="encrypted"in e.socket&&e.socket.encrypted?"https":"http",u="authority"in e?e.authority:e.headers.host,d=null!==(r=e.url)&&void 0!==r?r:"";if(void 0===u)throw new i.ConnectError("unable to determine request authority from Node.js server request",i.Code.Internal);const h=void 0!==t?t:function(e){return s(this,arguments,(function*(){var t,r,s,i;try{for(var a,c=!0,l=n(e);!(t=(a=yield o(l.next())).done);){i=a.value,c=!1;try{const e=i;yield yield o(e)}finally{c=!0}}}catch(e){r={error:e}}finally{try{c||t||!(s=l.return)||(yield o(s.call(l)))}finally{if(r)throw r.error}}}))}(e);return{httpVersion:e.httpVersion,method:null!==(c=e.method)&&void 0!==c?c:"",url:new URL(d,`${l}://${u}`),header:(0,a.nodeHeaderToWebHeader)(e.headers),body:h}},t.universalResponseToNodeResponse=async function(e,t){var r,o,s,i;try{if(e.body instanceof Uint8Array)t.writeHead(e.status,(0,a.webHeaderToNodeHeaders)(e.header)),await l(t,e.body);else if(void 0!==e.body)try{for(var u,d=!0,h=n(e.body);!(r=(u=await h.next()).done);){i=u.value,d=!1;try{const r=i;t.headersSent||t.writeHead(e.status,(0,a.webHeaderToNodeHeaders)(e.header)),await l(t,r),"flush"in t&&"function"==typeof t.flush&&t.flush()}finally{d=!0}}}catch(e){o={error:e}}finally{try{d||r||!(s=h.return)||await s.call(h)}finally{if(o)throw o.error}}t.headersSent||t.writeHead(e.status,(0,a.webHeaderToNodeHeaders)(e.header)),e.trailer&&(t.addTrailers((0,a.webHeaderToNodeHeaders)(e.trailer)),e.trailer),await new Promise((e=>{t.once("end",e),t.end()}))}catch(e){throw(0,c.connectErrorFromNodeReason)(e)}}},20863:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webHeaderToNodeHeaders=t.nodeHeaderToWebHeader=void 0,t.nodeHeaderToWebHeader=function(e){const t=new Headers;for(const[r,n]of Object.entries(e))if(!r.startsWith(":")&&void 0!==n)if("string"==typeof n)t.append(r,n);else if("number"==typeof n)t.append(r,String(n));else for(const e of n)t.append(r,e);return t},t.webHeaderToNodeHeaders=function(e){if(void 0===e)return;const t=Object.create(null);if(Array.isArray(e))for(const[r,n]of e){const e=r.toLowerCase();t[e]=n}else if("forEach"in e)"function"==typeof e.forEach&&e.forEach(((e,r)=>{const n=r.toLowerCase();t[n]=e}));else for(const[r,n]of Object.entries(e)){const e=r.toLowerCase();t[e]=n}return t}},9939:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateNodeTransportOptions=void 0;const n=r(69168),o=r(58761),s=r(82044);t.validateNodeTransportOptions=function(e){var t,r,i,a;return Object.assign(Object.assign({useBinaryFormat:null===(t=e.useBinaryFormat)||void 0===t||t},(0,n.validateReadWriteMaxBytes)(e.readMaxBytes,e.writeMaxBytes,e.compressMinBytes)),{client:"2"==e.httpVersion?(0,s.createNodeHttp2Client)(e.baseUrl,null!==(r=e.keepSessionAlive)&&void 0!==r&&r,e.nodeOptions):(0,s.createNodeHttp1Client)(e.nodeOptions),sendCompression:null!==(i=e.sendCompression)&&void 0!==i?i:null,acceptCompression:null!==(a=e.acceptCompression)&&void 0!==a?a:[o.compressionGzip,o.compressionBrotli]})}},30114:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeAnyClient=void 0,t.makeAnyClient=function(e,t){const r={};for(const[n,o]of Object.entries(e.methods)){const s=t(Object.assign(Object.assign({},o),{localName:n,service:e}));null!=s&&(r[n]=s)}return r}},28633:function(e,t,r){"use strict";var n=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}};Object.defineProperty(t,"__esModule",{value:!0}),t.createCallbackClient=void 0;const o=r(49408),s=r(55726),i=r(30114),a=r(12797),c=r(69168);function l(e,t){return(null==t?void 0:t.signal)&&(t.signal.addEventListener("abort",(()=>e.abort())),t.signal.aborted&&e.abort()),Object.assign(Object.assign({},t),{signal:e.signal})}t.createCallbackClient=function(e,t){return(0,i.makeAnyClient)(e,(r=>{switch(r.kind){case o.MethodKind.Unary:return function(e,t,r){return function(n,o,i){const c=new AbortController;return i=l(c,i),e.unary(t,r,c.signal,i.timeoutMs,i.headers,n).then((e=>{var t,r;null===(t=null==i?void 0:i.onHeader)||void 0===t||t.call(i,e.header),null===(r=null==i?void 0:i.onTrailer)||void 0===r||r.call(i,e.trailer),o(void 0,e.message)}),(e=>{const t=(0,a.connectErrorFromReason)(e,s.Code.Internal);t.code===s.Code.Canceled&&c.signal.aborted||o(t,new r.O)})),()=>c.abort()}}(t,e,r);case o.MethodKind.ServerStreaming:return function(e,t,r){return function(o,i,u,d){const h=new AbortController,p=o instanceof r.I?o:new r.I(o);return async function(){var o,s,a,f,g,m;d=l(h,d);const y=await e.stream(t,r,d.signal,d.timeoutMs,d.headers,(0,c.createAsyncIterable)([p]));null===(g=d.onHeader)||void 0===g||g.call(d,y.header);try{for(var v,_=!0,b=n(y.message);!(o=(v=await b.next()).done);){f=v.value,_=!1;try{i(f)}finally{_=!0}}}catch(e){s={error:e}}finally{try{_||o||!(a=b.return)||await a.call(b)}finally{if(s)throw s.error}}null===(m=d.onTrailer)||void 0===m||m.call(d,y.trailer),u(void 0)}().catch((e=>{const t=(0,a.connectErrorFromReason)(e,s.Code.Internal);t.code===s.Code.Canceled&&h.signal.aborted?u(void 0):u(t)})),()=>h.abort()}}(t,e,r);default:return null}}))}},55726:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Code=void 0,(r=t.Code||(t.Code={}))[r.Canceled=1]="Canceled",r[r.Unknown=2]="Unknown",r[r.InvalidArgument=3]="InvalidArgument",r[r.DeadlineExceeded=4]="DeadlineExceeded",r[r.NotFound=5]="NotFound",r[r.AlreadyExists=6]="AlreadyExists",r[r.PermissionDenied=7]="PermissionDenied",r[r.ResourceExhausted=8]="ResourceExhausted",r[r.FailedPrecondition=9]="FailedPrecondition",r[r.Aborted=10]="Aborted",r[r.OutOfRange=11]="OutOfRange",r[r.Unimplemented=12]="Unimplemented",r[r.Internal=13]="Internal",r[r.Unavailable=14]="Unavailable",r[r.DataLoss=15]="DataLoss",r[r.Unauthenticated=16]="Unauthenticated"},12797:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connectErrorFromReason=t.connectErrorDetails=t.ConnectError=void 0;const n=r(55726),o=r(49408),s=r(19242);class i extends Error{constructor(e,t=n.Code.Unknown,r,o,i){super(function(e,t){return e.length?`[${(0,s.codeToString)(t)}] ${e}`:`[${(0,s.codeToString)(t)}]`}(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(null!=r?r:{}),this.details=null!=o?o:[],this.cause=i}}t.ConnectError=i,t.connectErrorDetails=function(e,t,...r){const n="typeName"in t?[t,...r]:[],s="typeName"in t?(0,o.createRegistry)(...n):t,i=[];for(const t of e.details){if(t instanceof o.Message){s.findMessage(t.getType().typeName)&&i.push(t);continue}const e=s.findMessage(t.type);if(e)try{i.push(e.fromBinary(t.value))}catch(e){}}return i},t.connectErrorFromReason=function(e,t=n.Code.Unknown){return e instanceof i?e:e instanceof Error?"AbortError"==e.name?new i(e.message,n.Code.Canceled):new i(e.message,t):new i(String(e),t)}},89222:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.cors=void 0;const i=s(r(76235)),a=s(r(21979)),c=s(r(8351));t.cors={allowedMethods:["POST","GET"],allowedHeaders:[i.headerContentType,i.headerProtocolVersion,i.headerTimeout,i.headerStreamEncoding,i.headerStreamAcceptEncoding,i.headerUnaryEncoding,i.headerUnaryAcceptEncoding,a.headerMessageType,c.headerXGrpcWeb,c.headerXUserAgent,c.headerTimeout],exposedHeaders:[c.headerGrpcStatus,c.headerGrpcMessage,c.headerStatusDetailsBin,i.headerUnaryEncoding,i.headerStreamEncoding]}},84854:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appendHeaders=t.decodeBinaryHeader=t.encodeBinaryHeader=void 0;const n=r(49408),o=r(12797),s=r(55726);t.encodeBinaryHeader=function(e){let t;return t=e instanceof n.Message?e.toBinary():"string"==typeof e?(new TextEncoder).encode(e):e instanceof Uint8Array?e:new Uint8Array(e),n.protoBase64.enc(t).replace(/=+$/,"")},t.decodeBinaryHeader=function(e,t,r){try{const o=n.protoBase64.dec(e);return t?t.fromBinary(o,r):o}catch(e){throw(0,o.connectErrorFromReason)(e,s.Code.DataLoss)}},t.appendHeaders=function(...e){const t=new Headers;for(const r of e)r.forEach(((e,r)=>{t.append(r,e)}));return t}},84127:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createServiceImplSpec=t.createMethodImplSpec=t.createHandlerContext=void 0;const n=r(12797),o=r(55726);function s(e,t,r){return{kind:t.kind,service:e,method:t,impl:r}}t.createHandlerContext=function(e,t,r,n){return{method:e.method,service:e.service,requestHeader:new Headers(t),responseHeader:new Headers(r),responseTrailer:new Headers(n)}},t.createMethodImplSpec=s,t.createServiceImplSpec=function(e,t){const r={service:e,methods:{}};for(const[i,a]of Object.entries(e.methods)){let c=t[i];if("function"==typeof c)c=c.bind(t);else{const t=`${e.typeName}.${a.name} is not implemented`;c=function(){throw new n.ConnectError(t,o.Code.Unimplemented)}}r.methods[i]=s(e,a,c)}return r}},43342:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMethodImplSpec=t.createServiceImplSpec=t.makeAnyClient=t.runStreaming=t.runUnary=t.cors=t.createConnectRouter=t.createPromiseClient=t.createCallbackClient=t.appendHeaders=t.decodeBinaryHeader=t.encodeBinaryHeader=t.Code=t.connectErrorFromReason=t.connectErrorDetails=t.ConnectError=void 0;var n=r(12797);Object.defineProperty(t,"ConnectError",{enumerable:!0,get:function(){return n.ConnectError}}),Object.defineProperty(t,"connectErrorDetails",{enumerable:!0,get:function(){return n.connectErrorDetails}}),Object.defineProperty(t,"connectErrorFromReason",{enumerable:!0,get:function(){return n.connectErrorFromReason}});var o=r(55726);Object.defineProperty(t,"Code",{enumerable:!0,get:function(){return o.Code}});var s=r(84854);Object.defineProperty(t,"encodeBinaryHeader",{enumerable:!0,get:function(){return s.encodeBinaryHeader}}),Object.defineProperty(t,"decodeBinaryHeader",{enumerable:!0,get:function(){return s.decodeBinaryHeader}}),Object.defineProperty(t,"appendHeaders",{enumerable:!0,get:function(){return s.appendHeaders}});var i=r(28633);Object.defineProperty(t,"createCallbackClient",{enumerable:!0,get:function(){return i.createCallbackClient}});var a=r(51804);Object.defineProperty(t,"createPromiseClient",{enumerable:!0,get:function(){return a.createPromiseClient}});var c=r(33135);Object.defineProperty(t,"createConnectRouter",{enumerable:!0,get:function(){return c.createConnectRouter}});var l=r(89222);Object.defineProperty(t,"cors",{enumerable:!0,get:function(){return l.cors}});var u=r(38411);Object.defineProperty(t,"runUnary",{enumerable:!0,get:function(){return u.runUnary}}),Object.defineProperty(t,"runStreaming",{enumerable:!0,get:function(){return u.runStreaming}});var d=r(30114);Object.defineProperty(t,"makeAnyClient",{enumerable:!0,get:function(){return d.makeAnyClient}});var h=r(84127);Object.defineProperty(t,"createServiceImplSpec",{enumerable:!0,get:function(){return h.createServiceImplSpec}}),Object.defineProperty(t,"createMethodImplSpec",{enumerable:!0,get:function(){return h.createMethodImplSpec}})},38411:(e,t)=>{"use strict";function r(e,t){return t.concat().reverse().reduce(((e,t)=>t(e)),e)}Object.defineProperty(t,"__esModule",{value:!0}),t.runStreaming=t.runUnary=void 0,t.runUnary=function(e,t,n){return n&&(t=r(t,n)),t(e)},t.runStreaming=function(e,t,n){return n&&(t=r(t,n)),t(e)}},51804:function(e,t,r){"use strict";var n=this&&this.__await||function(e){return this instanceof n?(this.v=e,this):new n(e)},o=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}},s=this&&this.__asyncDelegator||function(e){var t,r;return t={},o("next"),o("throw",(function(e){throw e})),o("return"),t[Symbol.iterator]=function(){return this},t;function o(o,s){t[o]=e[o]?function(t){return(r=!r)?{value:n(e[o](t)),done:"return"===o}:s?s(t):t}:s}},i=this&&this.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,s=r.apply(e,t||[]),i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(e){s[e]&&(o[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||c(e,t)}))})}function c(e,t){try{(r=s[e](t)).value instanceof n?Promise.resolve(r.value.v).then(l,u):d(i[0][2],r)}catch(e){d(i[0][3],e)}var r}function l(e){c("next",e)}function u(e){c("throw",e)}function d(e,t){e(t),i.shift(),i.length&&c(i[0][0],i[0][1])}};Object.defineProperty(t,"__esModule",{value:!0}),t.createBiDiStreamingFn=t.createClientStreamingFn=t.createServerStreamingFn=t.createPromiseClient=void 0;const a=r(49408),c=r(69168),l=r(30114),u=r(12797),d=r(55726);function h(e,t,r){return function(a,l){var u,d;return i(this,arguments,(function*(){const i=a instanceof r.I?a:new r.I(a),h=yield n(e.stream(t,r,null==l?void 0:l.signal,null==l?void 0:l.timeoutMs,null==l?void 0:l.headers,(0,c.createAsyncIterable)([i])));null===(u=null==l?void 0:l.onHeader)||void 0===u||u.call(l,h.header),yield n(yield*s(o(h.message))),null===(d=null==l?void 0:l.onTrailer)||void 0===d||d.call(l,h.trailer)}))}}function p(e,t,r){return async function(s,a){var c,l,h,p,f,g;const m=await e.stream(t,r,null==a?void 0:a.signal,null==a?void 0:a.timeoutMs,null==a?void 0:a.headers,function(){return i(this,arguments,(function*(){var e,t,i,a;try{for(var c,l=!0,u=o(s);!(e=(c=yield n(u.next())).done);){a=c.value,l=!1;try{const e=a;yield yield n(e instanceof r.I?e:new r.I(e))}finally{l=!0}}}catch(e){t={error:e}}finally{try{l||e||!(i=u.return)||(yield n(i.call(u)))}finally{if(t)throw t.error}}}))}());let y;null===(f=null==a?void 0:a.onHeader)||void 0===f||f.call(a,m.header);try{for(var v,_=!0,b=o(m.message);!(c=(v=await b.next()).done);){p=v.value,_=!1;try{y=p}finally{_=!0}}}catch(e){l={error:e}}finally{try{_||c||!(h=b.return)||await h.call(b)}finally{if(l)throw l.error}}if(!y)throw new u.ConnectError("protocol error: missing response message",d.Code.Internal);return null===(g=null==a?void 0:a.onTrailer)||void 0===g||g.call(a,m.trailer),y}}function f(e,t,r){return function(a,c){var l,u;return i(this,arguments,(function*(){const d=yield n(e.stream(t,r,null==c?void 0:c.signal,null==c?void 0:c.timeoutMs,null==c?void 0:c.headers,function(){return i(this,arguments,(function*(){var e,t,s,i;try{for(var c,l=!0,u=o(a);!(e=(c=yield n(u.next())).done);){i=c.value,l=!1;try{const e=i;yield yield n(e instanceof r.I?e:new r.I(e))}finally{l=!0}}}catch(e){t={error:e}}finally{try{l||e||!(s=u.return)||(yield n(s.call(u)))}finally{if(t)throw t.error}}}))}()));null===(l=null==c?void 0:c.onHeader)||void 0===l||l.call(c,d.header),yield n(yield*s(o(d.message))),null===(u=null==c?void 0:c.onTrailer)||void 0===u||u.call(c,d.trailer)}))}}t.createPromiseClient=function(e,t){return(0,l.makeAnyClient)(e,(r=>{switch(r.kind){case a.MethodKind.Unary:return function(e,t,r){return async function(n,o){var s,i;const a=await e.unary(t,r,null==o?void 0:o.signal,null==o?void 0:o.timeoutMs,null==o?void 0:o.headers,n);return null===(s=null==o?void 0:o.onHeader)||void 0===s||s.call(o,a.header),null===(i=null==o?void 0:o.onTrailer)||void 0===i||i.call(o,a.trailer),a.message}}(t,e,r);case a.MethodKind.ServerStreaming:return h(t,e,r);case a.MethodKind.ClientStreaming:return p(t,e,r);case a.MethodKind.BiDiStreaming:return f(t,e,r);default:return null}}))},t.createServerStreamingFn=h,t.createClientStreamingFn=p,t.createBiDiStreamingFn=f},32138:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codeFromString=t.codeToString=void 0;const n=r(55726);function o(e){const t=n.Code[e];return"string"!=typeof t?e.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,(e=>"_"+e.toLowerCase()))}let s;t.codeToString=o,t.codeFromString=function(e){if(!s){s={};for(const e of Object.values(n.Code))"string"!=typeof e&&(s[o(e)]=e)}return s[e]}},84702:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseContentType=t.contentTypeStreamJson=t.contentTypeStreamProto=t.contentTypeUnaryJson=t.contentTypeUnaryProto=t.contentTypeStreamRegExp=t.contentTypeUnaryRegExp=t.contentTypeRegExp=void 0,t.contentTypeRegExp=/^application\/(connect\+)?(?:(json)(?:; ?charset=utf-?8)?|(proto))$/i,t.contentTypeUnaryRegExp=/^application\/(?:json(?:; ?charset=utf-?8)?|proto)$/i,t.contentTypeStreamRegExp=/^application\/connect\+?(?:json(?:; ?charset=utf-?8)?|proto)$/i,t.contentTypeUnaryProto="application/proto",t.contentTypeUnaryJson="application/json",t.contentTypeStreamProto="application/connect+proto",t.contentTypeStreamJson="application/connect+json",t.parseContentType=function(e){const r=null==e?void 0:e.match(t.contentTypeRegExp);if(r)return{stream:!!r[1],binary:!!r[3]}}},93036:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createEndStreamSerialization=t.endStreamToJson=t.endStreamFromJson=t.endStreamFlag=void 0;const n=r(11877),o=r(84854),s=r(12797),i=r(55726);function a(e){const t=new s.ConnectError("invalid end stream",i.Code.InvalidArgument);let r;try{r=JSON.parse("string"==typeof e?e:(new TextDecoder).decode(e))}catch(e){throw t}if("object"!=typeof r||null==r||Array.isArray(r))throw t;const o=new Headers;if("metadata"in r){if("object"!=typeof r.metadata||null==r.metadata||Array.isArray(r.metadata))throw t;for(const[e,n]of Object.entries(r.metadata)){if(!Array.isArray(n)||n.some((e=>"string"!=typeof e)))throw t;for(const t of n)o.append(e,t)}}return{metadata:o,error:"error"in r?(0,n.errorFromJson)(r.error,o,t):void 0}}function c(e,t,r){const s={};void 0!==t&&(s.error=(0,n.errorToJson)(t,r),e=(0,o.appendHeaders)(e,t.metadata));let i=!1;const a={};return e.forEach(((e,t)=>{i=!0,a[t]=[e]})),i&&(s.metadata=a),s}t.endStreamFlag=2,t.endStreamFromJson=a,t.endStreamToJson=c,t.createEndStreamSerialization=function(e){const t=new TextEncoder;return{serialize(r){try{const n=c(r.metadata,r.error,e),o=JSON.stringify(n);return t.encode(o)}catch(e){const t=e instanceof Error?e.message:String(e);throw new s.ConnectError(`failed to serialize EndStreamResponse: ${t}`,i.Code.Internal)}},parse(e){try{return a(e)}catch(e){const t=e instanceof Error?e.message:String(e);throw new s.ConnectError(`failed to parse EndStreamResponse: ${t}`,i.Code.InvalidArgument)}}}}},11877:function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.errorToJsonBytes=t.errorToJson=t.errorFromJsonBytes=t.errorFromJson=void 0;const o=r(49408),s=r(55726),i=r(12797),a=r(32138);function c(e,t,r){if(t&&new Headers(t).forEach(((e,t)=>r.metadata.append(t,e))),"object"!=typeof e||null==e||Array.isArray(e)||!("code"in e)||"string"!=typeof e.code)throw r;const n=(0,a.codeFromString)(e.code);if(void 0===n)throw r;const s=e.message;if(null!=s&&"string"!=typeof s)throw r;const c=new i.ConnectError(null!=s?s:"",n,t);if("details"in e&&Array.isArray(e.details))for(const t of e.details){if(null===t||"object"!=typeof t||Array.isArray(t)||"string"!=typeof t.type||"string"!=typeof t.value||"debug"in t&&"object"!=typeof t.debug)throw r;try{c.details.push({type:t.type,value:o.protoBase64.dec(t.value),debug:t.debug})}catch(e){throw r}}return c}function l(e,t){const r={code:(0,a.codeToString)(e.code)};return e.rawMessage.length>0&&(r.message=e.rawMessage),e.details.length>0&&(r.details=e.details.map((e=>{if(e instanceof o.Message){const r={type:e.getType().typeName,value:e.toBinary()};try{r.debug=e.toJson(t)}catch(e){}return r}return e})).map((e=>{var{value:t}=e,r=n(e,["value"]);return Object.assign(Object.assign({},r),{value:o.protoBase64.enc(t)})}))),r}t.errorFromJson=c,t.errorFromJsonBytes=function(e,t,r){let n;try{n=JSON.parse((new TextDecoder).decode(e))}catch(e){throw r}return c(n,t,r)},t.errorToJson=l,t.errorToJsonBytes=function(e,t){const r=new TextEncoder;try{const n=l(e,t),o=JSON.stringify(n);return r.encode(o)}catch(e){const t=e instanceof Error?e.message:String(e);throw new i.ConnectError(`failed to serialize Connect Error: ${t}`,s.Code.Internal)}}},49958:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHandlerFactory=void 0;const n=r(49408),o=r(12797),s=r(55726),i=r(84127),a=r(69168),c=r(84702),l=r(93036),u=r(76235),d=r(64843),h=r(11877),p=r(62183),f=r(60514),g="connect",m="POST";t.createHandlerFactory=function(e){const t=(0,a.validateUniversalHandlerOptions)(e),r=(0,l.createEndStreamSerialization)(t.jsonOptions);function y(e){let y,v;const _=(0,a.createMethodSerializationLookup)(e.method,t.binaryOptions,t.jsonOptions,t);return e.kind===n.MethodKind.Unary?(v=c.contentTypeUnaryRegExp,y=function(e,t,r){return async function(n){const l=(0,c.parseContentType)(n.header.get(u.headerContentType));if(null==l||l.stream)return a.uResponseUnsupportedMediaType;if(n.method!==m)return a.uResponseMethodNotAllowed;const g=(0,i.createHandlerContext)(t,n.header,{[u.headerContentType]:l.binary?c.contentTypeUnaryProto:c.contentTypeUnaryJson}),y=(0,a.compressionNegotiate)(e.acceptCompression,n.header.get(u.headerUnaryEncoding),n.header.get(u.headerUnaryAcceptEncoding),u.headerUnaryAcceptEncoding);let v,_=a.uResponseOk.status;try{if(e.requireConnectProtocolHeader&&(0,f.requireProtocolVersion)(n.header),y.error)throw y.error;const i=await async function(e,t,r,n,i,c){if("object"==typeof c.body&&null!==c.body&&Symbol.asyncIterator in c.body){let e=await(0,a.readAllBytes)(c.body,n,c.header.get(u.headerUnaryContentLength));return r&&(e=await r.decompress(e,n)),t.getI(i).parse(e)}if(i)throw new o.ConnectError("received parsed JSON request body, but content-type indicates binary format",s.Code.Internal);try{return e.I.fromJson(c.body)}catch(e){throw(0,o.connectErrorFromReason)(e,s.Code.InvalidArgument)}}(t.method,r,y.request,e.readMaxBytes,l.binary,n),c=await(0,a.invokeUnaryImplementation)(t,g,i);v=r.getO(l.binary).serialize(c)}catch(t){let r;r=t instanceof o.ConnectError?t:new o.ConnectError("internal error",s.Code.Internal,void 0,void 0,t),_=(0,d.codeToHttpStatus)(r.code),g.responseHeader.set(u.headerContentType,c.contentTypeUnaryJson),r.metadata.forEach(((e,t)=>{g.responseHeader.set(t,e)})),v=(0,h.errorToJsonBytes)(r,e.jsonOptions)}y.response&&v.byteLength>=e.compressMinBytes&&(v=await y.response.compress(v),g.responseHeader.set(u.headerUnaryEncoding,y.response.name));const b=(0,p.trailerMux)(g.responseHeader,g.responseTrailer);return b.set(u.headerUnaryContentLength,v.byteLength.toString(10)),{status:_,body:v,header:b}}}(t,e,_)):(v=c.contentTypeStreamRegExp,y=function(e,t,r,n){return async function(d){(0,a.assertByteStreamRequest)(d);const h=(0,c.parseContentType)(d.header.get(u.headerContentType));if(null==h||!h.stream)return a.uResponseUnsupportedMediaType;if(d.method!==m)return a.uResponseMethodNotAllowed;const p=(0,i.createHandlerContext)(t,d.header,{[u.headerContentType]:h.binary?c.contentTypeStreamProto:c.contentTypeStreamJson}),g=(0,a.compressionNegotiate)(e.acceptCompression,d.header.get(u.headerStreamEncoding),d.header.get(u.headerStreamAcceptEncoding),u.headerStreamAcceptEncoding);g.response&&p.responseHeader.set(u.headerStreamEncoding,g.response.name);const y=(0,a.pipe)(d.body,(0,a.transformPrepend)((()=>{if(e.requireConnectProtocolHeader&&(0,f.requireProtocolVersion)(d.header),g.error)throw g.error})),(0,a.transformSplitEnvelope)(e.readMaxBytes),(0,a.transformDecompressEnvelope)(g.request,e.readMaxBytes),(0,a.transformParseEnvelope)(r.getI(h.binary),l.endStreamFlag),(0,a.transformInvokeImplementation)(t,p),(0,a.transformSerializeEnvelope)(r.getO(h.binary)),(0,a.transformCatchFinally)((e=>{const t={metadata:p.responseTrailer};return void 0!==e&&(e instanceof o.ConnectError?t.error=e:t.error=new o.ConnectError("internal error",s.Code.Internal,void 0,void 0,e)),{flags:l.endStreamFlag,data:n.serialize(t)}})),(0,a.transformCompressEnvelope)(g.response,e.compressMinBytes),(0,a.transformJoinEnvelopes)());return Object.assign(Object.assign({},a.uResponseOk),{body:y,header:p.responseHeader})}}(t,e,_,r)),Object.assign(y,{protocolNames:[g],supportedContentType:(0,a.contentTypeMatcher)(v),allowedMethods:[m],requestPath:(0,a.createMethodUrl)("/",e.service,e.method),service:e.service,method:e.method})}return y.protocolName=g,y}},76235:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.headerProtocolVersion=t.headerTimeout=t.headerStreamAcceptEncoding=t.headerUnaryAcceptEncoding=t.headerStreamEncoding=t.headerUnaryEncoding=t.headerUnaryContentLength=t.headerContentType=void 0,t.headerContentType="Content-Type",t.headerUnaryContentLength="Content-Length",t.headerUnaryEncoding="Content-Encoding",t.headerStreamEncoding="Connect-Content-Encoding",t.headerUnaryAcceptEncoding="Accept-Encoding",t.headerStreamAcceptEncoding="Connect-Accept-Encoding",t.headerTimeout="Connect-Timeout-Ms",t.headerProtocolVersion="Connect-Protocol-Version"},64843:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codeToHttpStatus=t.codeFromHttpStatus=void 0;const n=r(55726);t.codeFromHttpStatus=function(e){switch(e){case 400:return n.Code.InvalidArgument;case 401:return n.Code.Unauthenticated;case 403:return n.Code.PermissionDenied;case 404:return n.Code.Unimplemented;case 408:return n.Code.DeadlineExceeded;case 409:return n.Code.Aborted;case 412:return n.Code.FailedPrecondition;case 413:case 431:return n.Code.ResourceExhausted;case 415:return n.Code.Internal;case 429:case 502:case 503:case 504:return n.Code.Unavailable;default:return n.Code.Unknown}},t.codeToHttpStatus=function(e){switch(e){case n.Code.Canceled:return 408;case n.Code.Unknown:return 500;case n.Code.InvalidArgument:return 400;case n.Code.DeadlineExceeded:return 408;case n.Code.NotFound:return 404;case n.Code.AlreadyExists:return 409;case n.Code.PermissionDenied:return 403;case n.Code.ResourceExhausted:return 429;case n.Code.FailedPrecondition:return 412;case n.Code.Aborted:return 409;case n.Code.OutOfRange:return 400;case n.Code.Unimplemented:return 404;case n.Code.Internal:return 500;case n.Code.Unavailable:return 503;case n.Code.DataLoss:return 500;case n.Code.Unauthenticated:return 401;default:return 500}}},19242:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.createHandlerFactory=t.codeToString=t.codeFromString=t.protocolVersion=t.trailerDemux=t.trailerMux=t.validateResponseWithCompression=t.validateResponse=t.parseTimeout=t.contentTypeStreamRegExp=t.contentTypeUnaryRegExp=t.contentTypeRegExp=t.contentTypeStreamJson=t.contentTypeStreamProto=t.contentTypeUnaryJson=t.contentTypeUnaryProto=t.parseContentType=t.errorToJsonBytes=t.errorToJson=t.errorFromJsonBytes=t.errorFromJson=t.createEndStreamSerialization=t.endStreamFlag=t.endStreamFromJson=t.endStreamToJson=t.requestHeaderWithCompression=t.requestHeader=t.codeToHttpStatus=t.codeFromHttpStatus=void 0;var s=r(64843);Object.defineProperty(t,"codeFromHttpStatus",{enumerable:!0,get:function(){return s.codeFromHttpStatus}}),Object.defineProperty(t,"codeToHttpStatus",{enumerable:!0,get:function(){return s.codeToHttpStatus}});var i=r(45928);Object.defineProperty(t,"requestHeader",{enumerable:!0,get:function(){return i.requestHeader}}),Object.defineProperty(t,"requestHeaderWithCompression",{enumerable:!0,get:function(){return i.requestHeaderWithCompression}});var a=r(93036);Object.defineProperty(t,"endStreamToJson",{enumerable:!0,get:function(){return a.endStreamToJson}}),Object.defineProperty(t,"endStreamFromJson",{enumerable:!0,get:function(){return a.endStreamFromJson}}),Object.defineProperty(t,"endStreamFlag",{enumerable:!0,get:function(){return a.endStreamFlag}}),Object.defineProperty(t,"createEndStreamSerialization",{enumerable:!0,get:function(){return a.createEndStreamSerialization}});var c=r(11877);Object.defineProperty(t,"errorFromJson",{enumerable:!0,get:function(){return c.errorFromJson}}),Object.defineProperty(t,"errorFromJsonBytes",{enumerable:!0,get:function(){return c.errorFromJsonBytes}}),Object.defineProperty(t,"errorToJson",{enumerable:!0,get:function(){return c.errorToJson}}),Object.defineProperty(t,"errorToJsonBytes",{enumerable:!0,get:function(){return c.errorToJsonBytes}});var l=r(84702);Object.defineProperty(t,"parseContentType",{enumerable:!0,get:function(){return l.parseContentType}}),Object.defineProperty(t,"contentTypeUnaryProto",{enumerable:!0,get:function(){return l.contentTypeUnaryProto}}),Object.defineProperty(t,"contentTypeUnaryJson",{enumerable:!0,get:function(){return l.contentTypeUnaryJson}}),Object.defineProperty(t,"contentTypeStreamProto",{enumerable:!0,get:function(){return l.contentTypeStreamProto}}),Object.defineProperty(t,"contentTypeStreamJson",{enumerable:!0,get:function(){return l.contentTypeStreamJson}}),Object.defineProperty(t,"contentTypeRegExp",{enumerable:!0,get:function(){return l.contentTypeRegExp}}),Object.defineProperty(t,"contentTypeUnaryRegExp",{enumerable:!0,get:function(){return l.contentTypeUnaryRegExp}}),Object.defineProperty(t,"contentTypeStreamRegExp",{enumerable:!0,get:function(){return l.contentTypeStreamRegExp}});var u=r(65658);Object.defineProperty(t,"parseTimeout",{enumerable:!0,get:function(){return u.parseTimeout}});var d=r(71453);Object.defineProperty(t,"validateResponse",{enumerable:!0,get:function(){return d.validateResponse}}),Object.defineProperty(t,"validateResponseWithCompression",{enumerable:!0,get:function(){return d.validateResponseWithCompression}});var h=r(62183);Object.defineProperty(t,"trailerMux",{enumerable:!0,get:function(){return h.trailerMux}}),Object.defineProperty(t,"trailerDemux",{enumerable:!0,get:function(){return h.trailerDemux}}),o(r(76235),t);var p=r(60514);Object.defineProperty(t,"protocolVersion",{enumerable:!0,get:function(){return p.protocolVersion}});var f=r(32138);Object.defineProperty(t,"codeFromString",{enumerable:!0,get:function(){return f.codeFromString}});var g=r(32138);Object.defineProperty(t,"codeToString",{enumerable:!0,get:function(){return g.codeToString}});var m=r(49958);Object.defineProperty(t,"createHandlerFactory",{enumerable:!0,get:function(){return m.createHandlerFactory}})},65658:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTimeout=void 0;const n=r(55726),o=r(12797);t.parseTimeout=function(e){if(null===e)return;const t=/^\d{1,10}$/.exec(e);return null===t?new o.ConnectError(`protocol error: invalid connect timeout value: ${e}`,n.Code.InvalidArgument):parseInt(t[0])}},45928:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestHeaderWithCompression=t.requestHeader=void 0;const n=r(49408),o=r(76235),s=r(60514),i=r(84702);function a(e,t,r,a){const c=new Headers(null!=a?a:{});return void 0!==r&&c.set(o.headerTimeout,`${r}`),c.set(o.headerContentType,e==n.MethodKind.Unary?t?i.contentTypeUnaryProto:i.contentTypeUnaryJson:t?i.contentTypeStreamProto:i.contentTypeStreamJson),c.set(o.headerProtocolVersion,s.protocolVersion),c}t.requestHeader=a,t.requestHeaderWithCompression=function(e,t,r,s,i,c){const l=a(e,t,r,s);if(null!=c){const t=e==n.MethodKind.Unary?o.headerUnaryEncoding:o.headerStreamEncoding;l.set(t,c.name)}if(i.length>0){const t=e==n.MethodKind.Unary?o.headerUnaryAcceptEncoding:o.headerStreamAcceptEncoding;l.set(t,i.map((e=>e.name)).join(","))}return l}},62183:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trailerMux=t.trailerDemux=void 0,t.trailerDemux=function(e){const t=new Headers,r=new Headers;return e.forEach(((e,n)=>{n.toLowerCase().startsWith("trailer-")?r.set(n.substring(8),e):t.set(n,e)})),[t,r]},t.trailerMux=function(e,t){const r=new Headers(e);return t.forEach(((e,t)=>{r.set(`trailer-${t}`,e)})),r}},71453:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateResponseWithCompression=t.validateResponse=void 0;const n=r(49408),o=r(55726),s=r(84702),i=r(64843),a=r(12797),c=r(76235);function l(e,t,r,c){const l=c.get("Content-Type"),u=(0,s.parseContentType)(l);if(200!==r){const t=new a.ConnectError(`HTTP ${r}`,(0,i.codeFromHttpStatus)(r));if(e==n.MethodKind.Unary&&u&&!u.stream&&!u.binary)return{isUnaryError:!0,unaryError:t};throw t}const d=e!=n.MethodKind.Unary;if(!u||u.binary!=t||u.stream!=d)throw new a.ConnectError(`unexpected response content type "${null!=l?l:"?"}"`,o.Code.InvalidArgument);return{isUnaryError:!1}}t.validateResponse=l,t.validateResponseWithCompression=function(e,t,r,s,i){let u;const d=i.get(e==n.MethodKind.Unary?c.headerUnaryEncoding:c.headerStreamEncoding);if(null!=d&&"identity"!==d.toLowerCase()&&(u=r.find((e=>e.name===d)),!u))throw new a.ConnectError(`unsupported response encoding "${d}"`,o.Code.InvalidArgument);return Object.assign({compression:u},l(e,t,s,i))}},60514:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requireProtocolVersion=t.protocolVersion=void 0;const n=r(76235),o=r(12797),s=r(55726);t.protocolVersion="1",t.requireProtocolVersion=function(e){const r=e.get(n.headerProtocolVersion);if(null===r)throw new o.ConnectError(`missing required header: set ${n.headerProtocolVersion} to "${t.protocolVersion}"`,s.Code.InvalidArgument);if(r!==t.protocolVersion)throw new o.ConnectError(`${n.headerProtocolVersion} must be "${t.protocolVersion}": got "${r}"`,s.Code.InvalidArgument)}},70110:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseContentType=t.contentTypeJson=t.contentTypeProto=t.contentTypeRegExp=void 0,t.contentTypeRegExp=/^application\/grpc-web(-text)?(?:\+(?:(json)(?:; ?charset=utf-?8)?|proto))?$/i,t.contentTypeProto="application/grpc-web+proto",t.contentTypeJson="application/grpc-web+json",t.parseContentType=function(e){const r=null==e?void 0:e.match(t.contentTypeRegExp);if(r)return{text:!!r[1],binary:!r[2]}}},8218:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHandlerFactory=void 0;const n=r(12797),o=r(55726),s=r(84127),i=r(69168),a=r(28983),c=r(5338),l=r(8351),u=r(70110),d="grpc-web",h="POST";t.createHandlerFactory=function(e){const t=(0,i.validateUniversalHandlerOptions)(e),r=(0,c.createTrailerSerialization)();function p(e){const p=function(e,t,r){const d=(0,i.createMethodSerializationLookup)(r.method,e.binaryOptions,e.jsonOptions,e);return async function(p){(0,i.assertByteStreamRequest)(p);const f=(0,u.parseContentType)(p.header.get(l.headerContentType));if(null==f||f.text)return i.uResponseUnsupportedMediaType;if(p.method!==h)return i.uResponseMethodNotAllowed;const g=(0,s.createHandlerContext)(r,p.header,{[l.headerContentType]:f.binary?u.contentTypeProto:u.contentTypeJson},{[l.headerGrpcStatus]:a.grpcStatusOk}),m=(0,i.compressionNegotiate)(e.acceptCompression,p.header.get(l.headerEncoding),p.header.get(l.headerAcceptEncoding),l.headerAcceptEncoding);m.response&&g.responseHeader.set(l.headerEncoding,m.response.name);const y=(0,i.pipe)(p.body,(0,i.transformPrepend)((()=>{if(m.error)throw m.error})),(0,i.transformSplitEnvelope)(e.readMaxBytes),(0,i.transformDecompressEnvelope)(m.request,e.readMaxBytes),(0,i.transformParseEnvelope)(d.getI(f.binary),c.trailerFlag),(0,i.transformInvokeImplementation)(r,g),(0,i.transformSerializeEnvelope)(d.getO(f.binary)),(0,i.transformCatchFinally)((e=>{const r=g.responseTrailer;return void 0!==e&&(e instanceof n.ConnectError?(0,a.setTrailerStatus)(r,e):(0,a.setTrailerStatus)(r,new n.ConnectError("internal error",o.Code.Internal,void 0,void 0,e))),{flags:c.trailerFlag,data:t.serialize(r)}})),(0,i.transformCompressEnvelope)(m.response,e.compressMinBytes),(0,i.transformJoinEnvelopes)());return Object.assign(Object.assign({},i.uResponseOk),{body:y,header:g.responseHeader})}}(t,r,e);return Object.assign(p,{protocolNames:[d],allowedMethods:[h],supportedContentType:(0,i.contentTypeMatcher)(u.contentTypeRegExp),requestPath:(0,i.createMethodUrl)("/",e.service,e.method),service:e.service,method:e.method})}return p.protocolName=d,p}},8351:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.headerXGrpcWeb=t.headerXUserAgent=t.headerStatusDetailsBin=t.headerGrpcMessage=t.headerGrpcStatus=t.headerTimeout=t.headerAcceptEncoding=t.headerEncoding=t.headerContentType=void 0;var n=r(21979);Object.defineProperty(t,"headerContentType",{enumerable:!0,get:function(){return n.headerContentType}}),Object.defineProperty(t,"headerEncoding",{enumerable:!0,get:function(){return n.headerEncoding}}),Object.defineProperty(t,"headerAcceptEncoding",{enumerable:!0,get:function(){return n.headerAcceptEncoding}}),Object.defineProperty(t,"headerTimeout",{enumerable:!0,get:function(){return n.headerTimeout}}),Object.defineProperty(t,"headerGrpcStatus",{enumerable:!0,get:function(){return n.headerGrpcStatus}}),Object.defineProperty(t,"headerGrpcMessage",{enumerable:!0,get:function(){return n.headerGrpcMessage}}),Object.defineProperty(t,"headerStatusDetailsBin",{enumerable:!0,get:function(){return n.headerStatusDetailsBin}}),t.headerXUserAgent="X-User-Agent",t.headerXGrpcWeb="X-Grpc-Web"},30629:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.createHandlerFactory=t.grpcStatusOk=t.validateTrailer=t.setTrailerStatus=t.parseTimeout=t.createTrailerSerialization=t.trailerSerialize=t.trailerParse=t.trailerFlag=t.validateResponseWithCompression=t.validateResponse=t.contentTypeJson=t.contentTypeProto=t.contentTypeRegExp=t.parseContentType=t.requestHeaderWithCompression=t.requestHeader=void 0;var s=r(95463);Object.defineProperty(t,"requestHeader",{enumerable:!0,get:function(){return s.requestHeader}}),Object.defineProperty(t,"requestHeaderWithCompression",{enumerable:!0,get:function(){return s.requestHeaderWithCompression}});var i=r(70110);Object.defineProperty(t,"parseContentType",{enumerable:!0,get:function(){return i.parseContentType}}),Object.defineProperty(t,"contentTypeRegExp",{enumerable:!0,get:function(){return i.contentTypeRegExp}}),Object.defineProperty(t,"contentTypeProto",{enumerable:!0,get:function(){return i.contentTypeProto}}),Object.defineProperty(t,"contentTypeJson",{enumerable:!0,get:function(){return i.contentTypeJson}});var a=r(7490);Object.defineProperty(t,"validateResponse",{enumerable:!0,get:function(){return a.validateResponse}}),Object.defineProperty(t,"validateResponseWithCompression",{enumerable:!0,get:function(){return a.validateResponseWithCompression}});var c=r(5338);Object.defineProperty(t,"trailerFlag",{enumerable:!0,get:function(){return c.trailerFlag}}),Object.defineProperty(t,"trailerParse",{enumerable:!0,get:function(){return c.trailerParse}}),Object.defineProperty(t,"trailerSerialize",{enumerable:!0,get:function(){return c.trailerSerialize}}),Object.defineProperty(t,"createTrailerSerialization",{enumerable:!0,get:function(){return c.createTrailerSerialization}});var l=r(28983);Object.defineProperty(t,"parseTimeout",{enumerable:!0,get:function(){return l.parseTimeout}}),Object.defineProperty(t,"setTrailerStatus",{enumerable:!0,get:function(){return l.setTrailerStatus}}),Object.defineProperty(t,"validateTrailer",{enumerable:!0,get:function(){return l.validateTrailer}}),Object.defineProperty(t,"grpcStatusOk",{enumerable:!0,get:function(){return l.grpcStatusOk}}),o(r(8351),t);var u=r(8218);Object.defineProperty(t,"createHandlerFactory",{enumerable:!0,get:function(){return u.createHandlerFactory}})},95463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestHeaderWithCompression=t.requestHeader=void 0;const n=r(8351),o=r(70110);function s(e,t,r){const s=new Headers(null!=r?r:{});return s.set(n.headerContentType,e?o.contentTypeProto:o.contentTypeJson),s.set(n.headerXGrpcWeb,"1"),s.set(n.headerXUserAgent,"@bufbuild/connect-web"),void 0!==t&&s.set(n.headerTimeout,`${t}m`),s}t.requestHeader=s,t.requestHeaderWithCompression=function(e,t,r,o,i){const a=s(e,t,r);return null!=i&&a.set(n.headerEncoding,i.name),o.length>0&&a.set(n.headerAcceptEncoding,o.map((e=>e.name)).join(",")),a}},5338:(e,t)=>{"use strict";function r(e){const t=new Headers,r=(new TextDecoder).decode(e).split("\r\n");for(const e of r){if(""===e)continue;const r=e.indexOf(":");if(r>0){const n=e.substring(0,r).trim(),o=e.substring(r+1).trim();t.append(n,o)}}return t}function n(e){const t=[];return e.forEach(((e,r)=>{t.push(`${r}: ${e}\r\n`)})),(new TextEncoder).encode(t.join(""))}Object.defineProperty(t,"__esModule",{value:!0}),t.createTrailerSerialization=t.trailerSerialize=t.trailerParse=t.trailerFlag=void 0,t.trailerFlag=128,t.trailerParse=r,t.trailerSerialize=n,t.createTrailerSerialization=function(){return{serialize:n,parse:r}}},7490:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateResponseWithCompression=t.validateResponse=void 0;const n=r(12797),o=r(55726),s=r(70110),i=r(28983),a=r(28983),c=r(8351);function l(e,t,r){var l;const u=(0,i.codeFromHttpStatus)(t);if(null!=u)throw new n.ConnectError(decodeURIComponent(null!==(l=r.get(c.headerGrpcMessage))&&void 0!==l?l:`HTTP ${t}`),u);const d=r.get(c.headerContentType),h=(0,s.parseContentType)(d);if(!h||h.binary!=e)throw new n.ConnectError(`unexpected response content type ${null!=d?d:"?"}`,o.Code.Internal);if(h.text)throw new n.ConnectError("grpc-web-text is not supported",o.Code.InvalidArgument);const p=(0,a.findTrailerError)(r);if(p)throw p;return{foundStatus:r.has(c.headerGrpcStatus)}}t.validateResponse=l,t.validateResponseWithCompression=function(e,t,r,s){const{foundStatus:i}=l(e,r,s);let a;const u=s.get(c.headerEncoding);if(null!==u&&"identity"!==u.toLowerCase()&&(a=t.find((e=>e.name===u)),!a))throw new n.ConnectError(`unsupported response encoding "${u}"`,o.Code.InvalidArgument);return{foundStatus:i,compression:a}}},44475:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseContentType=t.contentTypeJson=t.contentTypeProto=t.contentTypeRegExp=void 0,t.contentTypeRegExp=/^application\/grpc(?:\+(?:(json)(?:; ?charset=utf-?8)?|proto))?$/i,t.contentTypeProto="application/grpc+proto",t.contentTypeJson="application/grpc+json",t.parseContentType=function(e){const r=null==e?void 0:e.match(t.contentTypeRegExp);if(r)return{binary:!r[1]}}},92683:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Status=void 0;const n=r(49408);class o extends n.Message{constructor(e){super(),this.code=0,this.message="",this.details=[],n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new o).fromBinary(e,t)}static fromJson(e,t){return(new o).fromJson(e,t)}static fromJsonString(e,t){return(new o).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(o,e,t)}}t.Status=o,o.runtime=n.proto3,o.typeName="google.rpc.Status",o.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"code",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"details",kind:"message",T:n.Any,repeated:!0}]))},47901:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHandlerFactory=void 0;const n=r(84127),o=r(12797),s=r(55726),i=r(69168),a=r(44475),c=r(21979),l=r(90860),u="grpc",d="POST";t.createHandlerFactory=function(e){const t=(0,i.validateUniversalHandlerOptions)(e);function r(e){const r=function(e,t){const r=(0,i.createMethodSerializationLookup)(t.method,e.binaryOptions,e.jsonOptions,e);return async function(u){(0,i.assertByteStreamRequest)(u);const h=(0,a.parseContentType)(u.header.get(c.headerContentType));if(null==h)return i.uResponseUnsupportedMediaType;if(u.method!==d)return i.uResponseMethodNotAllowed;const p=(0,n.createHandlerContext)(t,u.header,{[c.headerContentType]:h.binary?a.contentTypeProto:a.contentTypeJson},{[c.headerGrpcStatus]:l.grpcStatusOk}),f=(0,i.compressionNegotiate)(e.acceptCompression,u.header.get(c.headerEncoding),u.header.get(c.headerAcceptEncoding),c.headerAcceptEncoding);f.response&&p.responseHeader.set(c.headerEncoding,f.response.name);const g=(0,i.pipe)(u.body,(0,i.transformPrepend)((()=>{if(f.error)throw f.error})),(0,i.transformSplitEnvelope)(e.readMaxBytes),(0,i.transformDecompressEnvelope)(f.request,e.readMaxBytes),(0,i.transformParseEnvelope)(r.getI(h.binary)),(0,i.transformInvokeImplementation)(t,p),(0,i.transformSerializeEnvelope)(r.getO(h.binary)),(0,i.transformCompressEnvelope)(f.response,e.compressMinBytes),(0,i.transformJoinEnvelopes)(),(0,i.transformCatch)((e=>{e instanceof o.ConnectError?(0,l.setTrailerStatus)(p.responseTrailer,e):(0,l.setTrailerStatus)(p.responseTrailer,new o.ConnectError("internal error",s.Code.Internal,void 0,void 0,e))})));return Object.assign(Object.assign({},i.uResponseOk),{body:g,header:p.responseHeader,trailer:p.responseTrailer})}}(t,e);return Object.assign(r,{protocolNames:[u],allowedMethods:[d],supportedContentType:(0,i.contentTypeMatcher)(a.contentTypeRegExp),requestPath:(0,i.createMethodUrl)("/",e.service,e.method),service:e.service,method:e.method})}return r.protocolName=u,r}},21979:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.headerMessageType=t.headerUserAgent=t.headerStatusDetailsBin=t.headerGrpcMessage=t.headerGrpcStatus=t.headerTimeout=t.headerAcceptEncoding=t.headerEncoding=t.headerContentType=void 0,t.headerContentType="Content-Type",t.headerEncoding="Grpc-Encoding",t.headerAcceptEncoding="Grpc-Accept-Encoding",t.headerTimeout="Grpc-Timeout",t.headerGrpcStatus="Grpc-Status",t.headerGrpcMessage="Grpc-Message",t.headerStatusDetailsBin="Grpc-Status-Details-Bin",t.headerUserAgent="User-Agent",t.headerMessageType="Grpc-Message-Type"},14868:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codeFromHttpStatus=void 0;const n=r(55726);t.codeFromHttpStatus=function(e){switch(e){case 200:return null;case 400:return n.Code.Internal;case 401:return n.Code.Unauthenticated;case 403:return n.Code.PermissionDenied;case 404:return n.Code.Unimplemented;case 429:case 502:case 503:case 504:return n.Code.Unavailable;default:return n.Code.Unknown}}},28983:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.createHandlerFactory=t.validateTrailer=t.validateResponseWithCompression=t.validateResponse=t.grpcStatusOk=t.setTrailerStatus=t.findTrailerError=t.parseTimeout=t.contentTypeProto=t.contentTypeJson=t.contentTypeRegExp=t.parseContentType=t.requestHeaderWithCompression=t.requestHeader=t.codeFromHttpStatus=void 0;var s=r(14868);Object.defineProperty(t,"codeFromHttpStatus",{enumerable:!0,get:function(){return s.codeFromHttpStatus}});var i=r(56014);Object.defineProperty(t,"requestHeader",{enumerable:!0,get:function(){return i.requestHeader}}),Object.defineProperty(t,"requestHeaderWithCompression",{enumerable:!0,get:function(){return i.requestHeaderWithCompression}});var a=r(44475);Object.defineProperty(t,"parseContentType",{enumerable:!0,get:function(){return a.parseContentType}}),Object.defineProperty(t,"contentTypeRegExp",{enumerable:!0,get:function(){return a.contentTypeRegExp}}),Object.defineProperty(t,"contentTypeJson",{enumerable:!0,get:function(){return a.contentTypeJson}}),Object.defineProperty(t,"contentTypeProto",{enumerable:!0,get:function(){return a.contentTypeProto}});var c=r(72528);Object.defineProperty(t,"parseTimeout",{enumerable:!0,get:function(){return c.parseTimeout}});var l=r(90860);Object.defineProperty(t,"findTrailerError",{enumerable:!0,get:function(){return l.findTrailerError}}),Object.defineProperty(t,"setTrailerStatus",{enumerable:!0,get:function(){return l.setTrailerStatus}}),Object.defineProperty(t,"grpcStatusOk",{enumerable:!0,get:function(){return l.grpcStatusOk}});var u=r(75467);Object.defineProperty(t,"validateResponse",{enumerable:!0,get:function(){return u.validateResponse}}),Object.defineProperty(t,"validateResponseWithCompression",{enumerable:!0,get:function(){return u.validateResponseWithCompression}});var d=r(89075);Object.defineProperty(t,"validateTrailer",{enumerable:!0,get:function(){return d.validateTrailer}}),o(r(21979),t);var h=r(47901);Object.defineProperty(t,"createHandlerFactory",{enumerable:!0,get:function(){return h.createHandlerFactory}})},72528:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTimeout=void 0;const n=r(55726),o=r(12797);t.parseTimeout=function(e){if(null===e)return;const t=/^(\d{1,8})([HMSmun])$/.exec(e);return null===t?new o.ConnectError(`protocol error: invalid grpc timeout value: ${e}`,n.Code.InvalidArgument):{H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6}[t[2]]*parseInt(t[1])}},56014:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestHeaderWithCompression=t.requestHeader=void 0;const n=r(21979),o=r(44475);function s(e,t,r){const s=new Headers(null!=r?r:{});return s.set(n.headerContentType,e?o.contentTypeProto:o.contentTypeJson),s.set(n.headerUserAgent,"@bufbuild/connect-web"),void 0!==t&&s.set(n.headerTimeout,`${t}m`),s.set("Te","trailers"),s}t.requestHeader=s,t.requestHeaderWithCompression=function(e,t,r,o,i){const a=s(e,t,r);return null!=i&&a.set(n.headerEncoding,i.name),o.length>0&&a.set(n.headerAcceptEncoding,o.map((e=>e.name)).join(",")),a}},90860:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findTrailerError=t.setTrailerStatus=t.grpcStatusOk=void 0;const n=r(49408),o=r(92683),s=r(12797),i=r(84854),a=r(55726),c=r(21979);t.grpcStatusOk="0",t.setTrailerStatus=function(e,r){if(r){if(e.set(c.headerGrpcStatus,r.code.toString(10)),e.set(c.headerGrpcMessage,encodeURIComponent(r.rawMessage)),r.details.length>0){const t=new o.Status({code:r.code,message:r.rawMessage,details:r.details.map((e=>e instanceof n.Message?n.Any.pack(e):new n.Any({typeUrl:`type.googleapis.com/${e.type}`,value:e.value})))});e.set(c.headerStatusDetailsBin,(0,i.encodeBinaryHeader)(t))}}else e.set(c.headerGrpcStatus,t.grpcStatusOk);return e},t.findTrailerError=function(e){var r;const n=e.get(c.headerStatusDetailsBin);if(null!=n){const t=(0,i.decodeBinaryHeader)(n,o.Status);if(0==t.code)return;const r=new s.ConnectError(t.message,t.code,e);return r.details=t.details.map((e=>({type:e.typeUrl.substring(e.typeUrl.lastIndexOf("/")+1),value:e.value}))),r}const l=e.get(c.headerGrpcStatus);if(null!=l){if(l===t.grpcStatusOk)return;const n=parseInt(l,10);return n in a.Code?new s.ConnectError(decodeURIComponent(null!==(r=e.get(c.headerGrpcMessage))&&void 0!==r?r:""),n,e):new s.ConnectError(`invalid grpc-status: ${l}`,a.Code.Internal)}}},75467:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateResponseWithCompression=t.validateResponse=void 0;const n=r(14868),o=r(44475),s=r(12797),i=r(90860),a=r(55726),c=r(21979);function l(e,t,r){var l;const u=(0,n.codeFromHttpStatus)(t);if(null!=u)throw new s.ConnectError(decodeURIComponent(null!==(l=r.get(c.headerGrpcMessage))&&void 0!==l?l:`HTTP ${t}`),u);const d=r.get(c.headerContentType),h=(0,o.parseContentType)(d);if(!h||h.binary!=e)throw new s.ConnectError(`unexpected response content type ${null!=d?d:"?"}`,a.Code.Internal);const p=(0,i.findTrailerError)(r);if(p)throw p;return{foundStatus:r.has(c.headerGrpcStatus)}}t.validateResponse=l,t.validateResponseWithCompression=function(e,t,r,n){const{foundStatus:o}=l(e,r,n);let i;const u=n.get(c.headerEncoding);if(null!==u&&"identity"!==u.toLowerCase()&&(i=t.find((e=>e.name===u)),!i))throw new s.ConnectError(`unsupported response encoding "${u}"`,a.Code.InvalidArgument);return{foundStatus:o,compression:i}}},89075:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTrailer=void 0;const n=r(90860);t.validateTrailer=function(e){const t=(0,n.findTrailerError)(e);if(t)throw t}},81288:function(e,t,r){"use strict";var n=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}},o=this&&this.__await||function(e){return this instanceof o?(this.v=e,this):new o(e)},s=this&&this.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=r.apply(e,t||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){s[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||c(e,t)}))})}function c(e,t){try{(r=s[e](t)).value instanceof o?Promise.resolve(r.value.v).then(l,u):d(i[0][2],r)}catch(e){d(i[0][3],e)}var r}function l(e){c("next",e)}function u(e){c("throw",e)}function d(e,t){e(t),i.shift(),i.length&&c(i[0][0],i[0][1])}},i=this&&this.__asyncDelegator||function(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,s){t[n]=e[n]?function(t){return(r=!r)?{value:o(e[n](t)),done:"return"===n}:s?s(t):t}:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.createAsyncIterable=t.createWritableIterable=t.makeIterableAbortable=t.readAllBytes=t.transformSplitEnvelope=t.transformJoinEnvelopes=t.transformDecompressEnvelope=t.transformCompressEnvelope=t.transformParseEnvelope=t.transformSerializeEnvelope=t.transformNormalizeMessage=t.transformReadAllBytes=t.transformPrepend=t.transformAppend=t.transformCatchFinally=t.transformCatch=t.pipe=t.sinkAllBytes=t.sinkAll=t.pipeTo=void 0;const a=r(55726),c=r(12797),l=r(19545),u=r(73650);function d(e,...t){return s(this,arguments,(function*(){const[r,n]=h(t);let s,i=e;!0===(null==n?void 0:n.propagateDownStreamError)&&(i=s=f(i));for(const e of r)i=e(i);const a=i[Symbol.asyncIterator]();for(;;){const e=yield o(a.next());if(!0===e.done)break;if(s)try{yield yield o(e.value)}catch(e){throw yield o(s.abort(e)),e}else yield yield o(e.value)}}))}function h(e){let t;return"function"!=typeof e[e.length-1]&&(t=e.pop()),[e,t]}async function p(e,t,r){var o,s,i,l,d,h,p,f;const[g,m]=function(e){if(null==e)return[!1,0];const t="string"==typeof e?parseInt(e,10):e;return!Number.isSafeInteger(t)||t<0?[!1,t]:[!0,t]}(r);if(g){m>t&&(0,u.assertReadMaxBytes)(t,m,!0);const r=new Uint8Array(m);let d=0;try{for(var y,v=!0,_=n(e);!(o=(y=await _.next()).done);){l=y.value,v=!1;try{const e=l;if(d+e.byteLength>m)throw new c.ConnectError(`protocol error: promised ${m} bytes, received ${d+e.byteLength}`,a.Code.InvalidArgument);r.set(e,d),d+=e.byteLength}finally{v=!0}}}catch(e){s={error:e}}finally{try{v||o||!(i=_.return)||await i.call(_)}finally{if(s)throw s.error}}if(d<m)throw new c.ConnectError(`protocol error: promised ${m} bytes, received ${d}`,a.Code.InvalidArgument);return r}const b=[];let S=0;try{for(var E,w=!0,A=n(e);!(d=(E=await A.next()).done);){f=E.value,w=!1;try{const e=f;S+=e.byteLength,(0,u.assertReadMaxBytes)(t,S),b.push(e)}finally{w=!0}}}catch(e){h={error:e}}finally{try{w||d||!(p=A.return)||await p.call(A)}finally{if(h)throw h.error}}const T=new Uint8Array(S);let C=0;for(let e=b.shift();e;e=b.shift())T.set(e,C),C+=e.byteLength;return T}function f(e){const t=e[Symbol.asyncIterator]();if(void 0===t.throw)throw new Error("AsyncIterable does not implement throw");const r=t;let n,o,s={next:()=>(o=r.next().finally((()=>{o=void 0})),o),throw:e=>r.throw(e)};void 0===t.return&&(s=Object.assign(Object.assign({},s),{return:e=>r.return(e)}));let i=!1;return{abort(e){if(n)return n.state;const t=()=>r.throw(e).then((e=>!0===e.done?"completed":"caught"),(()=>"rethrown"));return o?(n={reason:e,state:o.then(t,t)},n.state):(n={reason:e,state:t()},n.state)},[Symbol.asyncIterator](){if(i)throw new Error("AsyncIterable cannot be re-used");return i=!0,s}}}t.pipeTo=function(e,...t){const[r,n,o]=function(e){let t;"function"!=typeof e[e.length-1]&&(t=e.pop());const r=e.pop();return[e,r,t]}(t);let s,i=e;return!0===(null==o?void 0:o.propagateDownStreamError)&&(i=s=f(i)),i=d(i,...r,{propagateDownStreamError:!1}),n(i).catch((e=>s?s.abort(e).then((()=>Promise.reject(e))):Promise.reject(e)))},t.sinkAll=function(){return async function(e){var t,r,o,s;const i=[];try{for(var a,c=!0,l=n(e);!(t=(a=await l.next()).done);){s=a.value,c=!1;try{const e=s;i.push(e)}finally{c=!0}}}catch(e){r={error:e}}finally{try{c||t||!(o=l.return)||await o.call(l)}finally{if(r)throw r.error}}return i}},t.sinkAllBytes=function(e,t){return async function(r){return await p(r,e,t)}},t.pipe=d,t.transformCatch=function(e){return function(t){return s(this,arguments,(function*(){const r=t[Symbol.asyncIterator]();for(;;){let t;try{t=yield o(r.next())}catch(t){const r=yield o(e(t));void 0!==r&&(yield yield o(r));break}if(!0===t.done)break;yield yield o(t.value)}}))}},t.transformCatchFinally=function(e){return function(t){return s(this,arguments,(function*(){let r;const n=t[Symbol.asyncIterator]();for(;;){let e;try{e=yield o(n.next())}catch(e){r=e;break}if(!0===e.done)break;yield yield o(e.value)}const s=yield o(e(r));void 0!==s&&(yield yield o(s))}))}},t.transformAppend=function(e){return function(t){return s(this,arguments,(function*(){var r,s,i,a;try{for(var c,l=!0,u=n(t);!(r=(c=yield o(u.next())).done);){a=c.value,l=!1;try{const e=a;yield yield o(e)}finally{l=!0}}}catch(e){s={error:e}}finally{try{l||r||!(i=u.return)||(yield o(i.call(u)))}finally{if(s)throw s.error}}const d=yield o(e());void 0!==d&&(yield yield o(d))}))}},t.transformPrepend=function(e){return function(t){return s(this,arguments,(function*(){var r,s,i,a;const c=yield o(e());void 0!==c&&(yield yield o(c));try{for(var l,u=!0,d=n(t);!(r=(l=yield o(d.next())).done);){a=l.value,u=!1;try{const e=a;yield yield o(e)}finally{u=!0}}}catch(e){s={error:e}}finally{try{u||r||!(i=d.return)||(yield o(i.call(d)))}finally{if(s)throw s.error}}}))}},t.transformReadAllBytes=function(e,t){return function(r){return s(this,arguments,(function*(){yield yield o(yield o(p(r,e,t)))}))}},t.transformNormalizeMessage=function(e){return function(t){return s(this,arguments,(function*(){var r,s,i,a;try{for(var c,l=!0,u=n(t);!(r=(c=yield o(u.next())).done);){a=c.value,l=!1;try{const t=a;t instanceof e?yield yield o(t):yield yield o(new e(t))}finally{l=!0}}}catch(e){s={error:e}}finally{try{l||r||!(i=u.return)||(yield o(i.call(u)))}finally{if(s)throw s.error}}}))}},t.transformSerializeEnvelope=function(e,t,r){return void 0===t||void 0===r?function(t){return s(this,arguments,(function*(){var r,s,i,a;try{for(var c,l=!0,u=n(t);!(r=(c=yield o(u.next())).done);){a=c.value,l=!1;try{const t=a,r=e.serialize(t);yield yield o({flags:0,data:r})}finally{l=!0}}}catch(e){s={error:e}}finally{try{l||r||!(i=u.return)||(yield o(i.call(u)))}finally{if(s)throw s.error}}}))}:function(i){return s(this,arguments,(function*(){var s,a,c,l;try{for(var u,d=!0,h=n(i);!(s=(u=yield o(h.next())).done);){l=u.value,d=!1;try{const n=l;let s,i=0;n.end?(i|=t,s=r.serialize(n.value)):s=e.serialize(n.value),yield yield o({flags:i,data:s})}finally{d=!0}}}catch(e){a={error:e}}finally{try{d||s||!(c=h.return)||(yield o(c.call(h)))}finally{if(a)throw a.error}}}))}},t.transformParseEnvelope=function(e,t,r){return r&&void 0!==t?function(i){return s(this,arguments,(function*(){var s,a,c,l;try{for(var u,d=!0,h=n(i);!(s=(u=yield o(h.next())).done);){l=u.value,d=!1;try{const{flags:n,data:s}=l;(n&t)===t?yield yield o({value:r.parse(s),end:!0}):yield yield o({value:e.parse(s),end:!1})}finally{d=!0}}}catch(e){a={error:e}}finally{try{d||s||!(c=h.return)||(yield o(c.call(h)))}finally{if(a)throw a.error}}}))}:function(i){return s(this,arguments,(function*(){var s,l,u,d;try{for(var h,p=!0,f=n(i);!(s=(h=yield o(f.next())).done);){d=h.value,p=!1;try{const{flags:n,data:s}=d;if(void 0!==t&&(n&t)===t){if(null===r)throw new c.ConnectError("unexpected end flag",a.Code.InvalidArgument);continue}yield yield o(e.parse(s))}finally{p=!0}}}catch(e){l={error:e}}finally{try{p||s||!(u=f.return)||(yield o(u.call(f)))}finally{if(l)throw l.error}}}))}},t.transformCompressEnvelope=function(e,t){return function(r){return s(this,arguments,(function*(){var s,i,a,c;try{for(var u,d=!0,h=n(r);!(s=(u=yield o(h.next())).done);){c=u.value,d=!1;try{const r=c;yield yield o(yield o((0,l.envelopeCompress)(r,e,t)))}finally{d=!0}}}catch(e){i={error:e}}finally{try{d||s||!(a=h.return)||(yield o(a.call(h)))}finally{if(i)throw i.error}}}))}},t.transformDecompressEnvelope=function(e,t){return function(r){return s(this,arguments,(function*(){var s,i,a,c;try{for(var u,d=!0,h=n(r);!(s=(u=yield o(h.next())).done);){c=u.value,d=!1;try{const r=c;yield yield o(yield o((0,l.envelopeDecompress)(r,e,t)))}finally{d=!0}}}catch(e){i={error:e}}finally{try{d||s||!(a=h.return)||(yield o(a.call(h)))}finally{if(i)throw i.error}}}))}},t.transformJoinEnvelopes=function(){return function(e){return s(this,arguments,(function*(){var t,r,s,i;try{for(var a,c=!0,u=n(e);!(t=(a=yield o(u.next())).done);){i=a.value,c=!1;try{const{flags:e,data:t}=i;yield yield o((0,l.encodeEnvelope)(e,t))}finally{c=!0}}}catch(e){r={error:e}}finally{try{c||t||!(s=u.return)||(yield o(s.call(u)))}finally{if(r)throw r.error}}}))}},t.transformSplitEnvelope=function(e){function t(e,t){const r=new Uint8Array(e.byteLength+t.byteLength);return r.set(e),r.set(t,e.length),r}function r(e,t){return e.byteLength<5+t.length?[void 0,e]:[{flags:t.flags,data:e.subarray(5,5+t.length)},e.subarray(5+t.length)]}function i(e){if(e.byteLength<5)return;const t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{length:t.getUint32(1),flags:t.getUint8(0)}}return function(l){return s(this,arguments,(function*(){var s,d,h,p;let f=new Uint8Array(0);try{for(var g,m=!0,y=n(l);!(s=(g=yield o(y.next())).done);){p=g.value,m=!1;try{for(f=t(f,p);;){const t=i(f);if(!t)break;let n;if((0,u.assertReadMaxBytes)(e,t.length,!0),[n,f]=r(f,t),!n)break;yield yield o(n)}}finally{m=!0}}}catch(e){d={error:e}}finally{try{m||s||!(h=y.return)||(yield o(h.call(y)))}finally{if(d)throw d.error}}if(f.byteLength>0){const e=i(f);let t="protocol error: incomplete envelope";throw e&&(t=`protocol error: promised ${e.length} bytes in enveloped message, got ${f.byteLength-5} bytes`),new c.ConnectError(t,a.Code.InvalidArgument)}}))}},t.readAllBytes=p,t.makeIterableAbortable=f,t.createWritableIterable=function(){let e,t,r=[];const n=async n=>{if(t)return Promise.reject(String(t));if(e)return e(n),e=void 0,Promise.resolve();const o={payload:n},s=new Promise(((e,t)=>{o.resolve=e,o.reject=t}));return r.push(o),s};let o=!1;return{isClosed:()=>o,async write(e){if(o)throw new c.ConnectError("cannot write, already closed");return n({value:e,done:!1})},async close(){if(o)throw new c.ConnectError("cannot close, already closed");return o=!0,n({value:void 0,done:!0})},[Symbol.asyncIterator]:()=>({next:async()=>{if(t)return Promise.reject(String(t));const n=r.shift();return n?(n.resolve&&n.resolve(),n.payload):new Promise((t=>{e=t}))},throw:async e=>{t=e;for(const t of r)t.reject&&t.reject(e);return r=[],new Promise((e=>{e({value:void 0,done:!0})}))}})}},t.createAsyncIterable=function(e){return s(this,arguments,(function*(){yield o(yield*i(n(e)))}))}},1670:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compressionNegotiate=t.compressedFlag=void 0;const n=r(12797),o=r(55726);t.compressedFlag=1,t.compressionNegotiate=function(e,t,r,s){let i,a=null,c=null;if(null!==t&&"identity"!==t){const r=e.find((e=>e.name===t));if(r)a=r;else{const r=e.map((e=>e.name)).join(",");i=new n.ConnectError(`unknown compression "${t}": supported encodings are ${r}`,o.Code.Unimplemented,{[s]:r})}}if(null===r||""===r)c=a;else{const t=r.split(",").map((e=>e.trim()));for(const r of t){const t=e.find((e=>e.name===r));if(t){c=t;break}}}return{request:a,response:c,error:i}}},21254:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentTypeMatcher=void 0,t.contentTypeMatcher=function(...e){const t=new Map,r=e.reduce(((e,t)=>e.concat("supported"in t?t.supported:t)),[]);function n(e){if(null===e||0==e.length)return!1;const n=t.get(e);if(void 0!==n)return n;const o=r.some((t=>t.test(e)));return t.size<1024&&t.set(e,o),o}return n.supported=r,n}},59240:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMethodUrl=void 0,t.createMethodUrl=function(e,t,r){const n="string"==typeof t?t:t.typeName,o="string"==typeof r?r:r.name;return e.toString().replace(/\/?$/,`/${n}/${o}`)}},19545:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeEnvelopes=t.encodeEnvelope=t.envelopeDecompress=t.envelopeCompress=t.createEnvelopeReadableStream=void 0;const n=r(12797),o=r(55726),s=r(1670);t.createEnvelopeReadableStream=function(e){let t,r=new Uint8Array(0);function s(e){const t=new Uint8Array(r.length+e.length);t.set(r),t.set(e,r.length),r=t}return new ReadableStream({start(){t=e.getReader()},async pull(e){let i;for(;;){if(void 0===i&&r.byteLength>=5){let e=0;for(let t=1;t<5;t++)e=(e<<8)+r[t];i={flags:r[0],length:e}}if(void 0!==i&&r.byteLength>=i.length+5)break;const e=await t.read();if(e.done)break;s(e.value)}if(void 0===i)return 0==r.byteLength?void e.close():void e.error(new n.ConnectError("premature end of stream",o.Code.DataLoss));const a=r.subarray(5,5+i.length);r=r.subarray(5+i.length),e.enqueue({flags:i.flags,data:a})}})},t.envelopeCompress=async function(e,t,r){let{flags:i,data:a}=e;if((i&s.compressedFlag)===s.compressedFlag)throw new n.ConnectError("invalid envelope, already compressed",o.Code.Internal);return t&&a.byteLength>=r&&(a=await t.compress(a),i|=s.compressedFlag),{data:a,flags:i}},t.envelopeDecompress=async function(e,t,r){let{flags:i,data:a}=e;if((i&s.compressedFlag)===s.compressedFlag){if(!t)throw new n.ConnectError("received compressed envelope, but do not know how to decompress",o.Code.InvalidArgument);a=await t.decompress(a,r),i^=s.compressedFlag}return{data:a,flags:i}},t.encodeEnvelope=function(e,t){const r=new Uint8Array(t.length+5);r.set(t,5);const n=new DataView(r.buffer,r.byteOffset,r.byteLength);return n.setUint8(0,e),n.setUint32(1,t.length),r},t.encodeEnvelopes=function(...e){const t=e.reduce(((e,t)=>e+t.data.length+5),0),r=new Uint8Array(t),n=new DataView(r.buffer);let o=0;for(const t of e)n.setUint8(o,t.flags),n.setUint32(o+1,t.data.length),r.set(t.data,o+5),o+=t.data.length+5;return r}},69168:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUniversalMethodHandler=t.createUniversalServiceHandlers=t.validateUniversalHandlerOptions=t.uResponseVersionNotSupported=t.uResponseMethodNotAllowed=t.uResponseUnsupportedMediaType=t.uResponseNotFound=t.uResponseOk=t.assertByteStreamRequest=t.transformInvokeImplementation=t.invokeUnaryImplementation=t.contentTypeMatcher=t.readAllBytes=t.createAsyncIterable=t.createWritableIterable=t.makeIterableAbortable=t.sinkAllBytes=t.sinkAll=t.pipeTo=t.transformParseEnvelope=t.transformSerializeEnvelope=t.transformSplitEnvelope=t.transformJoinEnvelopes=t.transformDecompressEnvelope=t.transformCompressEnvelope=t.transformNormalizeMessage=t.transformReadAllBytes=t.transformPrepend=t.transformAppend=t.transformCatchFinally=t.transformCatch=t.pipe=t.compressionNegotiate=t.compressedFlag=t.createEnvelopeReadableStream=t.envelopeCompress=t.envelopeDecompress=t.encodeEnvelopes=t.encodeEnvelope=t.validateReadWriteMaxBytes=t.limitSerialization=t.createClientMethodSerializers=t.createMethodSerializationLookup=t.createMethodUrl=void 0;var n=r(59240);Object.defineProperty(t,"createMethodUrl",{enumerable:!0,get:function(){return n.createMethodUrl}});var o=r(22690);Object.defineProperty(t,"createMethodSerializationLookup",{enumerable:!0,get:function(){return o.createMethodSerializationLookup}}),Object.defineProperty(t,"createClientMethodSerializers",{enumerable:!0,get:function(){return o.createClientMethodSerializers}}),Object.defineProperty(t,"limitSerialization",{enumerable:!0,get:function(){return o.limitSerialization}});var s=r(73650);Object.defineProperty(t,"validateReadWriteMaxBytes",{enumerable:!0,get:function(){return s.validateReadWriteMaxBytes}});var i=r(19545);Object.defineProperty(t,"encodeEnvelope",{enumerable:!0,get:function(){return i.encodeEnvelope}}),Object.defineProperty(t,"encodeEnvelopes",{enumerable:!0,get:function(){return i.encodeEnvelopes}}),Object.defineProperty(t,"envelopeDecompress",{enumerable:!0,get:function(){return i.envelopeDecompress}}),Object.defineProperty(t,"envelopeCompress",{enumerable:!0,get:function(){return i.envelopeCompress}}),Object.defineProperty(t,"createEnvelopeReadableStream",{enumerable:!0,get:function(){return i.createEnvelopeReadableStream}});var a=r(1670);Object.defineProperty(t,"compressedFlag",{enumerable:!0,get:function(){return a.compressedFlag}}),Object.defineProperty(t,"compressionNegotiate",{enumerable:!0,get:function(){return a.compressionNegotiate}});var c=r(81288);Object.defineProperty(t,"pipe",{enumerable:!0,get:function(){return c.pipe}}),Object.defineProperty(t,"transformCatch",{enumerable:!0,get:function(){return c.transformCatch}}),Object.defineProperty(t,"transformCatchFinally",{enumerable:!0,get:function(){return c.transformCatchFinally}}),Object.defineProperty(t,"transformAppend",{enumerable:!0,get:function(){return c.transformAppend}}),Object.defineProperty(t,"transformPrepend",{enumerable:!0,get:function(){return c.transformPrepend}}),Object.defineProperty(t,"transformReadAllBytes",{enumerable:!0,get:function(){return c.transformReadAllBytes}}),Object.defineProperty(t,"transformNormalizeMessage",{enumerable:!0,get:function(){return c.transformNormalizeMessage}}),Object.defineProperty(t,"transformCompressEnvelope",{enumerable:!0,get:function(){return c.transformCompressEnvelope}}),Object.defineProperty(t,"transformDecompressEnvelope",{enumerable:!0,get:function(){return c.transformDecompressEnvelope}}),Object.defineProperty(t,"transformJoinEnvelopes",{enumerable:!0,get:function(){return c.transformJoinEnvelopes}}),Object.defineProperty(t,"transformSplitEnvelope",{enumerable:!0,get:function(){return c.transformSplitEnvelope}}),Object.defineProperty(t,"transformSerializeEnvelope",{enumerable:!0,get:function(){return c.transformSerializeEnvelope}}),Object.defineProperty(t,"transformParseEnvelope",{enumerable:!0,get:function(){return c.transformParseEnvelope}}),Object.defineProperty(t,"pipeTo",{enumerable:!0,get:function(){return c.pipeTo}}),Object.defineProperty(t,"sinkAll",{enumerable:!0,get:function(){return c.sinkAll}}),Object.defineProperty(t,"sinkAllBytes",{enumerable:!0,get:function(){return c.sinkAllBytes}}),Object.defineProperty(t,"makeIterableAbortable",{enumerable:!0,get:function(){return c.makeIterableAbortable}}),Object.defineProperty(t,"createWritableIterable",{enumerable:!0,get:function(){return c.createWritableIterable}}),Object.defineProperty(t,"createAsyncIterable",{enumerable:!0,get:function(){return c.createAsyncIterable}}),Object.defineProperty(t,"readAllBytes",{enumerable:!0,get:function(){return c.readAllBytes}});var l=r(21254);Object.defineProperty(t,"contentTypeMatcher",{enumerable:!0,get:function(){return l.contentTypeMatcher}});var u=r(90073);Object.defineProperty(t,"invokeUnaryImplementation",{enumerable:!0,get:function(){return u.invokeUnaryImplementation}}),Object.defineProperty(t,"transformInvokeImplementation",{enumerable:!0,get:function(){return u.transformInvokeImplementation}});var d=r(70931);Object.defineProperty(t,"assertByteStreamRequest",{enumerable:!0,get:function(){return d.assertByteStreamRequest}}),Object.defineProperty(t,"uResponseOk",{enumerable:!0,get:function(){return d.uResponseOk}}),Object.defineProperty(t,"uResponseNotFound",{enumerable:!0,get:function(){return d.uResponseNotFound}}),Object.defineProperty(t,"uResponseUnsupportedMediaType",{enumerable:!0,get:function(){return d.uResponseUnsupportedMediaType}}),Object.defineProperty(t,"uResponseMethodNotAllowed",{enumerable:!0,get:function(){return d.uResponseMethodNotAllowed}}),Object.defineProperty(t,"uResponseVersionNotSupported",{enumerable:!0,get:function(){return d.uResponseVersionNotSupported}});var h=r(99096);Object.defineProperty(t,"validateUniversalHandlerOptions",{enumerable:!0,get:function(){return h.validateUniversalHandlerOptions}}),Object.defineProperty(t,"createUniversalServiceHandlers",{enumerable:!0,get:function(){return h.createUniversalServiceHandlers}}),Object.defineProperty(t,"createUniversalMethodHandler",{enumerable:!0,get:function(){return h.createUniversalMethodHandler}}),r(12565)},90073:function(e,t,r){"use strict";var n=this&&this.__await||function(e){return this instanceof n?(this.v=e,this):new n(e)},o=this&&this.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,s=r.apply(e,t||[]),i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(e){s[e]&&(o[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||c(e,t)}))})}function c(e,t){try{(r=s[e](t)).value instanceof n?Promise.resolve(r.value.v).then(l,u):d(i[0][2],r)}catch(e){d(i[0][3],e)}var r}function l(e){c("next",e)}function u(e){c("throw",e)}function d(e,t){e(t),i.shift(),i.length&&c(i[0][0],i[0][1])}},s=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}};Object.defineProperty(t,"__esModule",{value:!0}),t.transformInvokeImplementation=t.invokeUnaryImplementation=void 0;const i=r(49408),a=r(12797),c=r(55726);function l(e,t){if(t instanceof i.Message)return t;try{return new e.method.O(t)}catch(t){throw new a.ConnectError(`failed to normalize message ${e.method.O.typeName}`,c.Code.Internal,void 0,void 0,t)}}t.invokeUnaryImplementation=async function(e,t,r){const n=await e.impl(r,t);return l(e,n)},t.transformInvokeImplementation=function(e,t){switch(e.kind){case i.MethodKind.Unary:return function(r){return o(this,arguments,(function*(){const o=r[Symbol.asyncIterator](),s=yield n(o.next());if(!0===s.done)throw new a.ConnectError("protocol error: missing input message for unary method",c.Code.InvalidArgument);if(yield yield n(l(e,yield n(e.impl(s.value,t)))),!0!==(yield n(o.next())).done)throw new a.ConnectError("protocol error: received extra input message for unary method",c.Code.InvalidArgument)}))};case i.MethodKind.ServerStreaming:return function(r){return o(this,arguments,(function*(){var o,i,u,d;const h=r[Symbol.asyncIterator](),p=yield n(h.next());if(!0===p.done)throw new a.ConnectError("protocol error: missing input message for server-streaming method",c.Code.InvalidArgument);try{for(var f,g=!0,m=s(e.impl(p.value,t));!(o=(f=yield n(m.next())).done);){d=f.value,g=!1;try{const t=d;yield yield n(l(e,t))}finally{g=!0}}}catch(e){i={error:e}}finally{try{g||o||!(u=m.return)||(yield n(u.call(m)))}finally{if(i)throw i.error}}if(!0!==(yield n(h.next())).done)throw new a.ConnectError("protocol error: received extra input message for server-streaming method",c.Code.InvalidArgument)}))};case i.MethodKind.ClientStreaming:return function(r){return o(this,arguments,(function*(){yield yield n(l(e,yield n(e.impl(r,t))))}))};case i.MethodKind.BiDiStreaming:return function(r){return o(this,arguments,(function*(){var o,i,a,c;try{for(var u,d=!0,h=s(e.impl(r,t));!(o=(u=yield n(h.next())).done);){c=u.value,d=!1;try{const t=c;yield yield n(l(e,t))}finally{d=!0}}}catch(e){i={error:e}}finally{try{d||o||!(a=h.return)||(yield n(a.call(h)))}finally{if(i)throw i.error}}}))}}}},73650:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertReadMaxBytes=t.assertWriteMaxBytes=t.validateReadWriteMaxBytes=void 0;const n=r(12797),o=r(55726),s=4294967295,i=s;t.validateReadWriteMaxBytes=function(e,t,r){if(null!=t||(t=i),null!=e||(e=s),null!=r||(r=1024),t<1||t>i)throw new n.ConnectError(`writeMaxBytes ${t} must be >= 1 and <= 4294967295`,o.Code.Internal);if(e<1||e>s)throw new n.ConnectError(`readMaxBytes ${e} must be >= 1 and <= 4294967295`,o.Code.Internal);return{readMaxBytes:e,writeMaxBytes:t,compressMinBytes:r}},t.assertWriteMaxBytes=function(e,t){if(t>e)throw new n.ConnectError(`message size ${t} is larger than configured writeMaxBytes ${e}`,o.Code.ResourceExhausted)},t.assertReadMaxBytes=function(e,t,r=!1){if(t>e){let s=`message size is larger than configured readMaxBytes ${e}`;throw r&&(s=`message size ${t} is larger than configured readMaxBytes ${e}`),new n.ConnectError(s,o.Code.ResourceExhausted)}}},12565:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},22690:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createJsonSerialization=t.createBinarySerialization=t.limitSerialization=t.createClientMethodSerializers=t.createMethodSerializationLookup=void 0;const n=r(12797),o=r(55726),s=r(73650);function i(e,t){return{serialize(r){const n=e.serialize(r);return(0,s.assertWriteMaxBytes)(t.writeMaxBytes,n.byteLength),n},parse:r=>((0,s.assertReadMaxBytes)(t.readMaxBytes,r.byteLength,!0),e.parse(r))}}function a(e,t){return{parse(r){try{return e.fromBinary(r,t)}catch(e){const t=e instanceof Error?e.message:String(e);throw new n.ConnectError(`parse binary: ${t}`,o.Code.InvalidArgument)}},serialize(e){try{return e.toBinary(t)}catch(e){const t=e instanceof Error?e.message:String(e);throw new n.ConnectError(`serialize binary: ${t}`,o.Code.Internal)}}}}function c(e,t){var r,s;const i=null!==(r=null==t?void 0:t.textEncoder)&&void 0!==r?r:new TextEncoder,a=null!==(s=null==t?void 0:t.textDecoder)&&void 0!==s?s:new TextDecoder;return{parse(r){try{const n=a.decode(r);return e.fromJsonString(n,t)}catch(e){throw(0,n.connectErrorFromReason)(e,o.Code.InvalidArgument)}},serialize(e){try{const r=e.toJsonString(t);return i.encode(r)}catch(e){throw(0,n.connectErrorFromReason)(e,o.Code.Internal)}}}}t.createMethodSerializationLookup=function(e,t,r,n){const o=i(a(e.I,t),n),s=i(c(e.I,r),n),l=i(a(e.O,t),n),u=i(c(e.O,r),n);return{getI:e=>e?o:s,getO:e=>e?l:u}},t.createClientMethodSerializers=function(e,t,r,n){const o=t?a(e.I,n):c(e.I,r);return{normalize:function(t){return t instanceof e.I?t:new e.I(t)},parse:(t?a(e.O,n):c(e.O,r)).parse,serialize:o.serialize}},t.limitSerialization=i,t.createBinarySerialization=a,t.createJsonSerialization=c},99096:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.negotiateProtocol=t.createUniversalMethodHandler=t.createUniversalServiceHandlers=t.validateUniversalHandlerOptions=void 0;const n=r(49408),o=r(70931),s=r(21254),i=r(73650),a=r(12797),c=r(55726),l=(new AbortController).signal;function u(e,t){return d(t.map((t=>t(e))))}function d(e){if(0==e.length)throw new a.ConnectError("at least one protocol is required",c.Code.Internal);const t=e[0].service,r=e[0].method,i=e[0].requestPath;if(e.some((e=>e.service!==t||e.method!==r)))throw new a.ConnectError("cannot negotiate protocol for different RPCs",c.Code.Internal);if(e.some((e=>e.requestPath!==i)))throw new a.ConnectError("cannot negotiate protocol for different requestPaths",c.Code.Internal);return Object.assign((async function(t){var s;if(r.kind==n.MethodKind.BiDiStreaming&&t.httpVersion.startsWith("1."))return Object.assign(Object.assign({},o.uResponseVersionNotSupported),{header:new Headers({Connection:"close"})});const i=null!==(s=t.header.get("Content-Type"))&&void 0!==s?s:"",a=e.filter((e=>e.supportedContentType(i)));if(0==a.length)return o.uResponseUnsupportedMediaType;const c=a.filter((e=>e.allowedMethods.includes(t.method)));return 0==c.length?o.uResponseMethodNotAllowed:(0,c[0])(t)}),{service:t,method:r,requestPath:i,supportedContentType:(0,s.contentTypeMatcher)(...e.map((e=>e.supportedContentType))),protocolNames:e.flatMap((e=>e.protocolNames)).filter(((e,t,r)=>r.indexOf(e)===t)),allowedMethods:e.flatMap((e=>e.allowedMethods)).filter(((e,t,r)=>r.indexOf(e)===t))})}t.validateUniversalHandlerOptions=function(e){var t,r,n;null!=e||(e={});const o=e.acceptCompression?[...e.acceptCompression]:[],s=null!==(t=e.requireConnectProtocolHeader)&&void 0!==t&&t,a=null!==(r=e.shutdownSignal)&&void 0!==r?r:l,c=null!==(n=e.maxDeadlineDurationMs)&&void 0!==n?n:Number.MAX_SAFE_INTEGER;return Object.assign(Object.assign({acceptCompression:o},(0,i.validateReadWriteMaxBytes)(e.readMaxBytes,e.writeMaxBytes,e.compressMinBytes)),{jsonOptions:e.jsonOptions,binaryOptions:e.binaryOptions,maxDeadlineDurationMs:c,shutdownSignal:a,requireConnectProtocolHeader:s})},t.createUniversalServiceHandlers=function(e,t){return Object.entries(e.methods).map((([,e])=>u(e,t)))},t.createUniversalMethodHandler=u,t.negotiateProtocol=d},70931:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uResponseVersionNotSupported=t.uResponseMethodNotAllowed=t.uResponseUnsupportedMediaType=t.uResponseNotFound=t.uResponseOk=t.assertByteStreamRequest=void 0,t.assertByteStreamRequest=function(e){if("object"!=typeof e.body||null===e.body||!(Symbol.asyncIterator in e.body))throw new Error("byte stream required, but received JSON")},t.uResponseOk={status:200},t.uResponseNotFound={status:404},t.uResponseUnsupportedMediaType={status:415},t.uResponseMethodNotAllowed={status:405},t.uResponseVersionNotSupported={status:505}},33135:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConnectRouter=void 0;const n=r(12797),o=r(55726),s=r(84127),i=r(69168),a=r(8218),c=r(47901),l=r(49958);function u(e,t){if(t&&!e)return t;const r=t?Object.assign(Object.assign({},(0,i.validateUniversalHandlerOptions)(t.options)),e):Object.assign(Object.assign({},e),(0,i.validateUniversalHandlerOptions)(null!=e?e:{})),s=[];if(!1!==(null==e?void 0:e.grpc)&&s.push((0,c.createHandlerFactory)(r)),!1!==(null==e?void 0:e.grpcWeb)&&s.push((0,a.createHandlerFactory)(r)),!1!==(null==e?void 0:e.connect)&&s.push((0,l.createHandlerFactory)(r)),0===s.length)throw new n.ConnectError("cannot create handler, all protocols are disabled",o.Code.InvalidArgument);return{options:r,protocols:s}}t.createConnectRouter=function(e){const t=u(e),r=[];return{handlers:r,service(e,n,o){const{protocols:a}=u(o,t);return r.push(...(0,i.createUniversalServiceHandlers)((0,s.createServiceImplSpec)(e,n),a)),this},rpc(e,n,o,a){const{protocols:c}=u(a,t);return r.push((0,i.createUniversalMethodHandler)((0,s.createMethodImplSpec)(e,n,o),c)),this}}}},65247:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BinaryReader=t.BinaryWriter=t.WireType=void 0;const n=r(71539),o=r(63789),s=r(63424);var i;!function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(i=t.WireType||(t.WireType={})),t.BinaryWriter=class{constructor(e){this.stack=[],this.textEncoder=null!=e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;let t=new Uint8Array(e),r=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],r),r+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for((0,o.assertUInt32)(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return(0,o.assertInt32)(e),(0,n.varint32write)(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){(0,o.assertFloat32)(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){(0,o.assertUInt32)(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){(0,o.assertInt32)(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return(0,o.assertInt32)(e),e=(e<<1^e>>31)>>>0,(0,n.varint32write)(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),n=s.protoInt64.enc(e);return r.setInt32(0,n.lo,!0),r.setInt32(4,n.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),r=new DataView(t.buffer),n=s.protoInt64.uEnc(e);return r.setInt32(0,n.lo,!0),r.setInt32(4,n.hi,!0),this.raw(t)}int64(e){let t=s.protoInt64.enc(e);return(0,n.varint64write)(t.lo,t.hi,this.buf),this}sint64(e){let t=s.protoInt64.enc(e),r=t.hi>>31,o=t.lo<<1^r,i=(t.hi<<1|t.lo>>>31)^r;return(0,n.varint64write)(o,i,this.buf),this}uint64(e){let t=s.protoInt64.uEnc(e);return(0,n.varint64write)(t.lo,t.hi,this.buf),this}},t.BinaryReader=class{constructor(e,t){this.varint64=n.varint64read,this.uint32=n.varint32read,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!=t?t:new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,r=7&e;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(e){let t=this.pos;switch(e){case i.Varint:for(;128&this.buf[this.pos++];);break;case i.Bit64:this.pos+=4;case i.Bit32:this.pos+=4;break;case i.LengthDelimited:let t=this.uint32();this.pos+=t;break;case i.StartGroup:let r;for(;(r=this.tag()[1])!==i.EndGroup;)this.skip(r);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return s.protoInt64.dec(...this.varint64())}uint64(){return s.protoInt64.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),r=-(1&e);return e=(e>>>1|(1&t)<<31)^r,t=t>>>1^r,s.protoInt64.dec(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return s.protoInt64.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return s.protoInt64.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}},95876:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codegenInfo=void 0;const n=r(23548),o=r(42714),s=r(42068),i="@bufbuild/protobuf";t.codegenInfo={packageName:i,localName:n.localName,getUnwrappedFieldType:o.getUnwrappedFieldType,scalarDefaultValue:s.scalarDefaultValue,symbols:{proto2:{typeOnly:!1,privateImportPath:"./proto2.js",publicImportPath:i},proto3:{typeOnly:!1,privateImportPath:"./proto3.js",publicImportPath:i},Message:{typeOnly:!1,privateImportPath:"./message.js",publicImportPath:i},PartialMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:i},PlainMessage:{typeOnly:!0,privateImportPath:"./message.js",publicImportPath:i},FieldList:{typeOnly:!0,privateImportPath:"./field-list.js",publicImportPath:i},MessageType:{typeOnly:!0,privateImportPath:"./message-type.js",publicImportPath:i},BinaryReadOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:i},BinaryWriteOptions:{typeOnly:!0,privateImportPath:"./binary-format.js",publicImportPath:i},JsonReadOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:i},JsonWriteOptions:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:i},JsonValue:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:i},JsonObject:{typeOnly:!0,privateImportPath:"./json-format.js",publicImportPath:i},protoInt64:{typeOnly:!1,privateImportPath:"./proto-int64.js",publicImportPath:i},ScalarType:{typeOnly:!1,privateImportPath:"./field.js",publicImportPath:i},MethodKind:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:i},MethodIdempotency:{typeOnly:!1,privateImportPath:"./service-type.js",publicImportPath:i}},wktSourceFiles:["google/protobuf/compiler/plugin.proto","google/protobuf/any.proto","google/protobuf/api.proto","google/protobuf/descriptor.proto","google/protobuf/duration.proto","google/protobuf/empty.proto","google/protobuf/field_mask.proto","google/protobuf/source_context.proto","google/protobuf/struct.proto","google/protobuf/timestamp.proto","google/protobuf/type.proto","google/protobuf/wrappers.proto"]}},35531:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPackedFieldByDefault=t.createDescriptorSet=void 0;const n=r(27682),o=r(63789),s=r(97168),i=r(23621),a=r(23548),c=r(63424);function l(e,t){switch(e.kind){case"file":for(const r of e.proto.extension){const n=m(r,e,void 0,t);e.extensions.push(n),t.extensions.set(n.typeName,n)}break;case"message":for(const r of e.proto.extension){const n=m(r,e.file,e,t);e.nestedExtensions.push(n),t.extensions.set(n.typeName,n)}for(const r of e.nestedMessages)l(r,t)}}function u(e,t){const r=e.proto.oneofDecl.map((t=>function(e,t){return(0,o.assert)(e.name,"invalid OneofDescriptorProto: missing name"),{kind:"oneof",proto:e,deprecated:!1,parent:t,fields:[],name:e.name,toString(){return`oneof ${t.typeName}.${this.name}`},getComments(){const e=[...this.parent.getComments().sourcePath,A.DescriptorProto_OneofDecl,this.parent.proto.oneofDecl.indexOf(this.proto)];return w(t.file.proto.sourceCodeInfo,e)}}}(t,e))),n=new Set;for(const o of e.proto.field){const s=_(o,r),i=g(o,e.file,e,s,t);e.fields.push(i),void 0===s?e.members.push(i):(s.fields.push(i),n.has(s)||(n.add(s),e.members.push(s)))}for(const t of r.filter((e=>n.has(e))))e.oneofs.push(t);for(const r of e.nestedMessages)u(r,t)}function d(e,t,r,n){var s,i,c;(0,o.assert)(e.name,"invalid EnumDescriptorProto: missing name");const l={kind:"enum",proto:e,deprecated:null!==(i=null===(s=e.options)||void 0===s?void 0:s.deprecated)&&void 0!==i&&i,file:t,parent:r,name:e.name,typeName:y(e,r,t),values:[],sharedPrefix:(0,a.findEnumSharedPrefix)(e.name,e.value.map((e=>{var t;return null!==(t=e.name)&&void 0!==t?t:""}))),toString(){return`enum ${this.typeName}`},getComments(){const e=this.parent?[...this.parent.getComments().sourcePath,A.DescriptorProto_EnumType,this.parent.proto.enumType.indexOf(this.proto)]:[A.FileDescriptorProto_EnumType,this.file.proto.enumType.indexOf(this.proto)];return w(t.proto.sourceCodeInfo,e)}};n.enums.set(l.typeName,l),e.value.forEach((e=>{var r,n;(0,o.assert)(e.name,"invalid EnumValueDescriptorProto: missing name"),(0,o.assert)(void 0!==e.number,"invalid EnumValueDescriptorProto: missing number"),l.values.push({kind:"enum_value",proto:e,deprecated:null!==(n=null===(r=e.options)||void 0===r?void 0:r.deprecated)&&void 0!==n&&n,parent:l,name:e.name,number:e.number,toString(){return`enum value ${l.typeName}.${this.name}`},declarationString(){var e;let t=`${this.name} = ${this.number}`;return!0===(null===(e=this.proto.options)||void 0===e?void 0:e.deprecated)&&(t+=" [deprecated = true]"),t},getComments(){const e=[...this.parent.getComments().sourcePath,A.EnumDescriptorProto_Value,this.parent.proto.value.indexOf(this.proto)];return w(t.proto.sourceCodeInfo,e)}})})),(null!==(c=null==r?void 0:r.nestedEnums)&&void 0!==c?c:t.enums).push(l)}function h(e,t,r,n){var s,i,a,c;(0,o.assert)(e.name,"invalid DescriptorProto: missing name");const l={kind:"message",proto:e,deprecated:null!==(i=null===(s=e.options)||void 0===s?void 0:s.deprecated)&&void 0!==i&&i,file:t,parent:r,name:e.name,typeName:y(e,r,t),fields:[],oneofs:[],members:[],nestedEnums:[],nestedMessages:[],nestedExtensions:[],toString(){return`message ${this.typeName}`},getComments(){const e=this.parent?[...this.parent.getComments().sourcePath,A.DescriptorProto_NestedType,this.parent.proto.nestedType.indexOf(this.proto)]:[A.FileDescriptorProto_MessageType,this.file.proto.messageType.indexOf(this.proto)];return w(t.proto.sourceCodeInfo,e)}};!0===(null===(a=e.options)||void 0===a?void 0:a.mapEntry)?n.mapEntries.set(l.typeName,l):((null!==(c=null==r?void 0:r.nestedMessages)&&void 0!==c?c:t.messages).push(l),n.messages.set(l.typeName,l));for(const r of e.enumType)d(r,t,l,n);for(const r of e.nestedType)h(r,t,l,n)}function p(e,t,r){var n,s;(0,o.assert)(e.name,"invalid ServiceDescriptorProto: missing name");const i={kind:"service",proto:e,deprecated:null!==(s=null===(n=e.options)||void 0===n?void 0:n.deprecated)&&void 0!==s&&s,file:t,name:e.name,typeName:y(e,void 0,t),methods:[],toString(){return`service ${this.typeName}`},getComments(){const e=[A.FileDescriptorProto_Service,this.file.proto.service.indexOf(this.proto)];return w(t.proto.sourceCodeInfo,e)}};t.services.push(i),r.services.set(i.typeName,i);for(const t of e.method)i.methods.push(f(t,i,r))}function f(e,t,r){var s,a,c;let l,u;switch((0,o.assert)(e.name,"invalid MethodDescriptorProto: missing name"),(0,o.assert)(e.inputType,"invalid MethodDescriptorProto: missing input_type"),(0,o.assert)(e.outputType,"invalid MethodDescriptorProto: missing output_type"),l=!0===e.clientStreaming&&!0===e.serverStreaming?i.MethodKind.BiDiStreaming:!0===e.clientStreaming?i.MethodKind.ClientStreaming:!0===e.serverStreaming?i.MethodKind.ServerStreaming:i.MethodKind.Unary,null===(s=e.options)||void 0===s?void 0:s.idempotencyLevel){case n.MethodOptions_IdempotencyLevel.IDEMPOTENT:u=i.MethodIdempotency.Idempotent;break;case n.MethodOptions_IdempotencyLevel.NO_SIDE_EFFECTS:u=i.MethodIdempotency.NoSideEffects;break;case n.MethodOptions_IdempotencyLevel.IDEMPOTENCY_UNKNOWN:case void 0:u=void 0}const d=r.messages.get(v(e.inputType)),h=r.messages.get(v(e.outputType));(0,o.assert)(d,`invalid MethodDescriptorProto: input_type ${e.inputType} not found`),(0,o.assert)(h,`invalid MethodDescriptorProto: output_type ${e.inputType} not found`);const p=e.name;return{kind:"rpc",proto:e,deprecated:null!==(c=null===(a=e.options)||void 0===a?void 0:a.deprecated)&&void 0!==c&&c,parent:t,name:p,methodKind:l,input:d,output:h,idempotency:u,toString:()=>`rpc ${t.typeName}.${p}`,getComments(){const e=[...this.parent.getComments().sourcePath,A.ServiceDescriptorProto_Method,this.parent.proto.method.indexOf(this.proto)];return w(t.file.proto.sourceCodeInfo,e)}}}function g(e,t,r,i,c){var l,u,d,h;(0,o.assert)(e.name,"invalid FieldDescriptorProto: missing name"),(0,o.assert)(e.number,"invalid FieldDescriptorProto: missing number"),(0,o.assert)(e.type,"invalid FieldDescriptorProto: missing type");const p=S(e,t.syntax),f={proto:e,deprecated:null!==(u=null===(l=e.options)||void 0===l?void 0:l.deprecated)&&void 0!==u&&u,name:e.name,number:e.number,parent:r,oneof:i,optional:b(e,t.syntax),packed:null!==(h=null===(d=e.options)||void 0===d?void 0:d.packed)&&void 0!==h?h:p,packedByDefault:p,jsonName:e.jsonName===(0,a.fieldJsonName)(e.name)?void 0:e.jsonName,scalar:void 0,message:void 0,enum:void 0,mapKey:void 0,mapValue:void 0,toString(){return`field ${this.parent.typeName}.${this.name}`},declarationString:T,getComments(){const e=[...this.parent.getComments().sourcePath,A.DescriptorProto_Field,this.parent.proto.field.indexOf(this.proto)];return w(t.proto.sourceCodeInfo,e)}},g=e.label===n.FieldDescriptorProto_Label.REPEATED;switch(e.type){case n.FieldDescriptorProto_Type.MESSAGE:case n.FieldDescriptorProto_Type.GROUP:{(0,o.assert)(e.typeName,"invalid FieldDescriptorProto: missing type_name");const t=c.mapEntries.get(v(e.typeName));if(void 0!==t)return(0,o.assert)(g,"invalid FieldDescriptorProto: expected map entry to be repeated"),Object.assign(Object.assign(Object.assign({},f),{kind:"map_field",repeated:!1}),function(e){var t,r;(0,o.assert)(null===(t=e.proto.options)||void 0===t?void 0:t.mapEntry,`invalid DescriptorProto: expected ${e.toString()} to be a map entry`),(0,o.assert)(2===e.fields.length,`invalid DescriptorProto: map entry ${e.toString()} has ${e.fields.length} fields`);const n=e.fields.find((e=>1===e.proto.number));(0,o.assert)(n,`invalid DescriptorProto: map entry ${e.toString()} is missing key field`);const i=n.scalar;(0,o.assert)(void 0!==i&&i!==s.ScalarType.BYTES&&i!==s.ScalarType.FLOAT&&i!==s.ScalarType.DOUBLE,`invalid DescriptorProto: map entry ${e.toString()} has unexpected key type ${null!==(r=n.proto.type)&&void 0!==r?r:-1}`);const a=e.fields.find((e=>2===e.proto.number));switch((0,o.assert)(a,`invalid DescriptorProto: map entry ${e.toString()} is missing value field`),a.kind){case"scalar_field":return{mapKey:i,mapValue:Object.assign(Object.assign({},a),{kind:"scalar"})};case"message_field":return{mapKey:i,mapValue:Object.assign(Object.assign({},a),{kind:"message"})};case"enum_field":return{mapKey:i,mapValue:Object.assign(Object.assign({},a),{kind:"enum"})};default:throw new Error("invalid DescriptorProto: unsupported map entry value field")}}(t));const r=c.messages.get(v(e.typeName));return(0,o.assert)(void 0!==r,`invalid FieldDescriptorProto: type_name ${e.typeName} not found`),Object.assign(Object.assign({},f),{kind:"message_field",repeated:g,message:r})}case n.FieldDescriptorProto_Type.ENUM:{(0,o.assert)(e.typeName,"invalid FieldDescriptorProto: missing type_name");const t=c.enums.get(v(e.typeName));return(0,o.assert)(void 0!==t,`invalid FieldDescriptorProto: type_name ${e.typeName} not found`),Object.assign(Object.assign({},f),{kind:"enum_field",getDefaultValue:C,repeated:g,enum:t})}default:{const t=E[e.type];return(0,o.assert)(t,`invalid FieldDescriptorProto: unknown type ${e.type}`),Object.assign(Object.assign({},f),{kind:"scalar_field",getDefaultValue:C,repeated:g,scalar:t})}}}function m(e,t,r,n){(0,o.assert)(e.extendee,"invalid FieldDescriptorProto: missing extendee");const s=g(e,t,null,void 0,n),i=n.messages.get(v(e.extendee));return(0,o.assert)(i,`invalid FieldDescriptorProto: extendee ${e.extendee} not found`),Object.assign(Object.assign({},s),{typeName:y(e,r,t),parent:r,file:t,extendee:i,toString(){return`extension ${this.typeName}`},getComments(){const r=this.parent?[...this.parent.getComments().sourcePath,A.DescriptorProto_Extension,this.parent.proto.extension.indexOf(e)]:[A.FileDescriptorProto_Extension,this.file.proto.extension.indexOf(e)];return w(t.proto.sourceCodeInfo,r)}})}function y(e,t,r){let n;return(0,o.assert)(e.name,`invalid ${e.getType().typeName}: missing name`),n=t?`${t.typeName}.${e.name}`:void 0!==r.proto.package?`${r.proto.package}.${e.name}`:`${e.name}`,n}function v(e){return e.startsWith(".")?e.substring(1):e}function _(e,t){var r;const n=e.oneofIndex;if(void 0===n)return;let s;return!0!==e.proto3Optional&&(s=t[n],(0,o.assert)(s,`invalid FieldDescriptorProto: oneof #${n} for field #${null!==(r=e.number)&&void 0!==r?r:-1} not found`)),s}function b(e,t){switch(t){case"proto2":return void 0===e.oneofIndex&&e.label===n.FieldDescriptorProto_Label.OPTIONAL;case"proto3":return!0===e.proto3Optional}}function S(e,t){if((0,o.assert)(e.type,"invalid FieldDescriptorProto: missing type"),"proto3"===t)switch(e.type){case n.FieldDescriptorProto_Type.DOUBLE:case n.FieldDescriptorProto_Type.FLOAT:case n.FieldDescriptorProto_Type.INT64:case n.FieldDescriptorProto_Type.UINT64:case n.FieldDescriptorProto_Type.INT32:case n.FieldDescriptorProto_Type.FIXED64:case n.FieldDescriptorProto_Type.FIXED32:case n.FieldDescriptorProto_Type.UINT32:case n.FieldDescriptorProto_Type.SFIXED32:case n.FieldDescriptorProto_Type.SFIXED64:case n.FieldDescriptorProto_Type.SINT32:case n.FieldDescriptorProto_Type.SINT64:case n.FieldDescriptorProto_Type.BOOL:case n.FieldDescriptorProto_Type.ENUM:return!0;default:return!1}return!1}t.createDescriptorSet=function(e){const t={enums:new Map,messages:new Map,services:new Map,extensions:new Map,mapEntries:new Map},r=(e instanceof n.FileDescriptorSet?e.file:e instanceof Uint8Array?n.FileDescriptorSet.fromBinary(e).file:e).map((e=>function(e,t){var r,n,s;(0,o.assert)(e.name,"invalid FileDescriptorProto: missing name"),(0,o.assert)(void 0===e.syntax||"proto3"===e.syntax,`invalid FileDescriptorProto: unsupported syntax: ${null!==(r=e.syntax)&&void 0!==r?r:"undefined"}`);const i={kind:"file",proto:e,deprecated:null!==(s=null===(n=e.options)||void 0===n?void 0:n.deprecated)&&void 0!==s&&s,syntax:"proto3"===e.syntax?"proto3":"proto2",name:e.name.replace(/\.proto/,""),enums:[],messages:[],extensions:[],services:[],toString(){return`file ${this.proto.name}`},getSyntaxComments(){return w(this.proto.sourceCodeInfo,[A.FileDescriptorProto_Syntax])},getPackageComments(){return w(this.proto.sourceCodeInfo,[A.FileDescriptorProto_Package])}};t.mapEntries.clear();for(const r of e.enumType)d(r,i,void 0,t);for(const r of e.messageType)h(r,i,void 0,t);for(const r of e.service)p(r,i,t);l(i,t);for(const e of t.mapEntries.values())u(e,t);for(const e of i.messages)u(e,t),l(e,t);return t.mapEntries.clear(),i}(e,t)));return Object.assign({files:r},t)},t.isPackedFieldByDefault=S;const E={[n.FieldDescriptorProto_Type.DOUBLE]:s.ScalarType.DOUBLE,[n.FieldDescriptorProto_Type.FLOAT]:s.ScalarType.FLOAT,[n.FieldDescriptorProto_Type.INT64]:s.ScalarType.INT64,[n.FieldDescriptorProto_Type.UINT64]:s.ScalarType.UINT64,[n.FieldDescriptorProto_Type.INT32]:s.ScalarType.INT32,[n.FieldDescriptorProto_Type.FIXED64]:s.ScalarType.FIXED64,[n.FieldDescriptorProto_Type.FIXED32]:s.ScalarType.FIXED32,[n.FieldDescriptorProto_Type.BOOL]:s.ScalarType.BOOL,[n.FieldDescriptorProto_Type.STRING]:s.ScalarType.STRING,[n.FieldDescriptorProto_Type.GROUP]:void 0,[n.FieldDescriptorProto_Type.MESSAGE]:void 0,[n.FieldDescriptorProto_Type.BYTES]:s.ScalarType.BYTES,[n.FieldDescriptorProto_Type.UINT32]:s.ScalarType.UINT32,[n.FieldDescriptorProto_Type.ENUM]:void 0,[n.FieldDescriptorProto_Type.SFIXED32]:s.ScalarType.SFIXED32,[n.FieldDescriptorProto_Type.SFIXED64]:s.ScalarType.SFIXED64,[n.FieldDescriptorProto_Type.SINT32]:s.ScalarType.SINT32,[n.FieldDescriptorProto_Type.SINT64]:s.ScalarType.SINT64};function w(e,t){if(!e)return{leadingDetached:[],sourcePath:t};for(const r of e.location)if(r.path.length===t.length&&!r.path.some(((e,r)=>t[r]!==e)))return{leadingDetached:r.leadingDetachedComments,leading:r.leadingComments,trailing:r.trailingComments,sourcePath:t};return{leadingDetached:[],sourcePath:t}}var A;function T(){var e,t;const r=[];let o;switch(this.repeated&&r.push("repeated"),this.optional&&r.push("optional"),"proto2"==("extendee"in this?this.file:this.parent.file).syntax&&this.proto.label===n.FieldDescriptorProto_Label.REQUIRED&&r.push("required"),this.kind){case"scalar_field":o=s.ScalarType[this.scalar].toLowerCase();break;case"enum_field":o=this.enum.typeName;break;case"message_field":o=this.message.typeName;break;case"map_field":{const e=s.ScalarType[this.mapKey].toLowerCase();let t;switch(this.mapValue.kind){case"scalar":t=s.ScalarType[this.mapValue.scalar].toLowerCase();break;case"enum":t=this.mapValue.enum.typeName;break;case"message":t=this.mapValue.message.typeName}o=`map<${e}, ${t}>`;break}}r.push(`${o} ${this.name} = ${this.number}`);const i=[];void 0!==(null===(e=this.proto.options)||void 0===e?void 0:e.packed)&&i.push(`packed = ${this.proto.options.packed.toString()}`);let a=this.proto.defaultValue;return void 0!==a&&(this.proto.type!=n.FieldDescriptorProto_Type.BYTES&&this.proto.type!=n.FieldDescriptorProto_Type.STRING||(a='"'+a.replace('"','\\"')+'"'),i.push(`default = ${a}`)),void 0!==this.jsonName&&i.push(`json_name = "${this.jsonName}"`),!0===(null===(t=this.proto.options)||void 0===t?void 0:t.deprecated)&&i.push("deprecated = true"),i.length>0&&r.push("["+i.join(", ")+"]"),r.join(" ")}function C(){const e=this.proto.defaultValue;if(void 0!==e)switch(this.kind){case"enum_field":{const t=this.enum.values.find((t=>t.name===e));return(0,o.assert)(t,`cannot parse ${this.toString()} default value: ${e}`),t.number}case"scalar_field":switch(this.scalar){case s.ScalarType.STRING:return e;case s.ScalarType.BYTES:{const t=function(e){const t=[],r={tail:e,c:"",next(){return 0!=this.tail.length&&(this.c=this.tail[0],this.tail=this.tail.substring(1),!0)},take(e){if(this.tail.length>=e){const t=this.tail.substring(0,e);return this.tail=this.tail.substring(e),t}return!1}};for(;r.next();)if("\\"===r.c){if(r.next())switch(r.c){case"\\":t.push(r.c.charCodeAt(0));break;case"b":t.push(8);break;case"f":t.push(12);break;case"n":t.push(10);break;case"r":t.push(13);break;case"t":t.push(9);break;case"v":t.push(11);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{const e=r.c,n=r.take(2);if(!1===n)return!1;const o=parseInt(e+n,8);if(isNaN(o))return!1;t.push(o);break}case"x":{const e=r.c,n=r.take(2);if(!1===n)return!1;const o=parseInt(e+n,16);if(isNaN(o))return!1;t.push(o);break}case"u":{const e=r.c,n=r.take(4);if(!1===n)return!1;const o=parseInt(e+n,16);if(isNaN(o))return!1;const s=new Uint8Array(4);new DataView(s.buffer).setInt32(0,o,!0),t.push(s[0],s[1],s[2],s[3]);break}case"U":{const e=r.c,n=r.take(8);if(!1===n)return!1;const o=c.protoInt64.uEnc(e+n),s=new Uint8Array(8),i=new DataView(s.buffer);i.setInt32(0,o.lo,!0),i.setInt32(4,o.hi,!0),t.push(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7]);break}}}else t.push(r.c.charCodeAt(0));return new Uint8Array(t)}(e);if(!1===t)throw new Error(`cannot parse ${this.toString()} default value: ${e}`);return t}case s.ScalarType.INT64:case s.ScalarType.SFIXED64:case s.ScalarType.SINT64:return c.protoInt64.parse(e);case s.ScalarType.UINT64:case s.ScalarType.FIXED64:return c.protoInt64.uParse(e);case s.ScalarType.DOUBLE:case s.ScalarType.FLOAT:switch(e){case"inf":return Number.POSITIVE_INFINITY;case"-inf":return Number.NEGATIVE_INFINITY;case"nan":return Number.NaN;default:return parseFloat(e)}case s.ScalarType.BOOL:return"true"===e;case s.ScalarType.INT32:case s.ScalarType.UINT32:case s.ScalarType.SINT32:case s.ScalarType.FIXED32:case s.ScalarType.SFIXED32:return parseInt(e,10)}break;default:return}}!function(e){e[e.FileDescriptorProto_Package=2]="FileDescriptorProto_Package",e[e.FileDescriptorProto_MessageType=4]="FileDescriptorProto_MessageType",e[e.FileDescriptorProto_EnumType=5]="FileDescriptorProto_EnumType",e[e.FileDescriptorProto_Service=6]="FileDescriptorProto_Service",e[e.FileDescriptorProto_Extension=7]="FileDescriptorProto_Extension",e[e.FileDescriptorProto_Syntax=12]="FileDescriptorProto_Syntax",e[e.DescriptorProto_Field=2]="DescriptorProto_Field",e[e.DescriptorProto_NestedType=3]="DescriptorProto_NestedType",e[e.DescriptorProto_EnumType=4]="DescriptorProto_EnumType",e[e.DescriptorProto_Extension=6]="DescriptorProto_Extension",e[e.DescriptorProto_OneofDecl=8]="DescriptorProto_OneofDecl",e[e.EnumDescriptorProto_Value=2]="EnumDescriptorProto_Value",e[e.ServiceDescriptorProto_Method=2]="ServiceDescriptorProto_Method"}(A||(A={}))},17297:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRegistryFromDescriptors=void 0;const n=r(63789),o=r(52398),s=r(87569),i=r(23548),a=r(91241),c=r(12058),l=r(50841),u=r(86144),d=r(68062),h=r(37609),p=r(79120),f=r(74820),g=r(27682),m=r(35531),y=[l.Any,c.Duration,u.Empty,d.FieldMask,h.Struct,h.Value,h.ListValue,a.Timestamp,c.Duration,f.DoubleValue,f.FloatValue,f.Int64Value,f.Int32Value,f.UInt32Value,f.UInt64Value,f.BoolValue,f.StringValue,f.BytesValue],v=[(0,p.getEnumType)(h.NullValue)];function _(e,t){switch(e.kind){case"map_field":return function(e,t){const r={kind:"map",no:e.number,name:e.name,jsonName:e.jsonName,K:e.mapKey};if(e.mapValue.message){const o=t.findMessage(e.mapValue.message.typeName);return(0,n.assert)(o,`message "${e.mapValue.message.typeName}" for ${e.toString()} not found`),Object.assign(Object.assign({},r),{V:{kind:"message",T:o}})}if(e.mapValue.enum){const o=t.findEnum(e.mapValue.enum.typeName);return(0,n.assert)(o,`enum "${e.mapValue.enum.typeName}" for ${e.toString()} not found`),Object.assign(Object.assign({},r),{V:{kind:"enum",T:o}})}return Object.assign(Object.assign({},r),{V:{kind:"scalar",T:e.mapValue.scalar}})}(e,t);case"message_field":return function(e,t){const r=t.findMessage(e.message.typeName);(0,n.assert)(r,`message "${e.message.typeName}" for ${e.toString()} not found`);const o={kind:"message",no:e.number,name:e.name,jsonName:e.jsonName,T:r};return e.repeated?Object.assign(Object.assign({},o),{repeated:!0,packed:e.packed,oneof:void 0}):e.oneof?Object.assign(Object.assign({},o),{oneof:e.oneof.name}):e.optional?Object.assign(Object.assign({},o),{opt:!0}):o}(e,t);case"enum_field":{const r=function(e,t){const r=t.findEnum(e.enum.typeName);(0,n.assert)(r,`enum "${e.enum.typeName}" for ${e.toString()} not found`);const o={kind:"enum",no:e.number,name:e.name,jsonName:e.jsonName,T:r};return e.repeated?Object.assign(Object.assign({},o),{repeated:!0,packed:e.packed,oneof:void 0}):e.oneof?Object.assign(Object.assign({},o),{oneof:e.oneof.name}):e.optional?Object.assign(Object.assign({},o),{opt:!0}):o}(e,t);return r.default=e.getDefaultValue(),r}case"scalar_field":{const t=function(e){const t={kind:"scalar",no:e.number,name:e.name,jsonName:e.jsonName,T:e.scalar};return e.repeated?Object.assign(Object.assign({},t),{repeated:!0,packed:e.packed,oneof:void 0,T:e.scalar}):e.oneof?Object.assign(Object.assign({},t),{oneof:e.oneof.name}):e.optional?Object.assign(Object.assign({},t),{opt:!0}):t}(e);return t.default=e.getDefaultValue(),t}}}t.createRegistryFromDescriptors=function(e,t=!0){const r=e instanceof Uint8Array||e instanceof g.FileDescriptorSet?(0,m.createDescriptorSet)(e):e,a={},c={},l={};if(t){for(const e of y)c[e.typeName]=e;for(const e of v)a[e.typeName]=e}return{findEnum(e){const t=a[e];if(t)return t;const n=r.enums.get(e);if(!n)return;const c=("proto3"==n.file.syntax?o.proto3:s.proto2).makeEnumType(e,n.values.map((e=>({no:e.number,name:e.name,localName:(0,i.localName)(e)}))),{});return a[e]=c,c},findMessage(e){const t=c[e];if(t)return t;const n=r.messages.get(e);if(!n)return;const a="proto3"==n.file.syntax?o.proto3:s.proto2,l=[],u=a.makeMessageType(e,(()=>l),{localName:(0,i.localName)(n)});c[e]=u;for(const e of n.fields){const t=_(e,this);l.push(t)}return u},findService(e){const t=l[e];if(t)return t;const o=r.services.get(e);if(!o)return;const s={};for(const e of o.methods){const t=this.findMessage(e.input.typeName),r=this.findMessage(e.output.typeName);(0,n.assert)(t,`message "${e.input.typeName}" for ${e.toString()} not found`),(0,n.assert)(r,`output message "${e.output.typeName}" for ${e.toString()} not found`);const o={name:e.name,localName:(0,i.localName)(e),I:t,O:r,kind:e.methodKind,idempotency:e.idempotency,options:{}};s[o.localName]=o}return l[e]={typeName:o.typeName,methods:s}}}}},66155:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRegistry=void 0,t.createRegistry=function(...e){const t={},r={},n={},o={add(e){if("fields"in e){if(!this.findMessage(e.typeName)){t[e.typeName]=e;for(const t of e.fields.list())"message"==t.kind?this.add(t.T):"map"==t.kind&&"message"==t.V.kind?this.add(t.V.T):"enum"==t.kind&&this.add(t.T)}}else if("methods"in e){if(!this.findService(e.typeName)){n[e.typeName]=e;for(const t of Object.values(e.methods))this.add(t.I),this.add(t.O)}}else r[e.typeName]=e},findMessage:e=>t[e],findEnum:e=>r[e],findService:e=>n[e]};for(const t of e)o.add(t);return o}},9285:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},97168:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ScalarType=void 0,(r=t.ScalarType||(t.ScalarType={}))[r.DOUBLE=1]="DOUBLE",r[r.FLOAT=2]="FLOAT",r[r.INT64=3]="INT64",r[r.UINT64=4]="UINT64",r[r.INT32=5]="INT32",r[r.FIXED64=6]="FIXED64",r[r.FIXED32=7]="FIXED32",r[r.BOOL=8]="BOOL",r[r.STRING=9]="STRING",r[r.BYTES=12]="BYTES",r[r.UINT32=13]="UINT32",r[r.SFIXED32=15]="SFIXED32",r[r.SFIXED64=16]="SFIXED64",r[r.SINT32=17]="SINT32",r[r.SINT64=18]="SINT64"},50841:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Any=void 0;const n=r(74748),o=r(52398);class s extends n.Message{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),o.proto3.util.initPartial(e,this)}toJson(e){var t;if(""===this.typeUrl)return{};const r=this.typeUrlToName(this.typeUrl),n=null===(t=null==e?void 0:e.typeRegistry)||void 0===t?void 0:t.findMessage(r);if(!n)throw new Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let o=n.fromBinary(this.value).toJson(e);return(r.startsWith("google.protobuf.")||null===o||Array.isArray(o)||"object"!=typeof o)&&(o={value:o}),o["@type"]=this.typeUrl,o}fromJson(e,t){var r;if(null===e||Array.isArray(e)||"object"!=typeof e)throw new Error("cannot decode message google.protobuf.Any from JSON: expected object but got "+(null===e?"null":Array.isArray(e)?"array":typeof e));const n=e["@type"];if("string"!=typeof n||""==n)throw new Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');const o=this.typeUrlToName(n),s=null===(r=null==t?void 0:t.typeRegistry)||void 0===r?void 0:r.findMessage(o);if(!s)throw new Error(`cannot decode message google.protobuf.Any from JSON: ${n} is not in the type registry`);let i;if(o.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))i=s.fromJson(e.value,t);else{const r=Object.assign({},e);delete r["@type"],i=s.fromJson(r,t)}return this.packFrom(i),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return!!this.is(e.getType())&&(e.fromBinary(this.value),!0)}is(e){return this.typeUrl===this.typeNameToUrl(e.typeName)}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw new Error(`invalid type url: ${e}`);const t=e.lastIndexOf("/"),r=t>0?e.substring(t+1):e;if(!r.length)throw new Error(`invalid type url: ${e}`);return r}static pack(e){const t=new s;return t.packFrom(e),t}static fromBinary(e,t){return(new s).fromBinary(e,t)}static fromJson(e,t){return(new s).fromJson(e,t)}static fromJsonString(e,t){return(new s).fromJsonString(e,t)}static equals(e,t){return o.proto3.util.equals(s,e,t)}}t.Any=s,s.runtime=o.proto3,s.typeName="google.protobuf.Any",s.fields=o.proto3.util.newFieldList((()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]))},24676:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mixin=t.Method=t.Api=void 0;const n=r(74748),o=r(46530),s=r(89640),i=r(52398);class a extends n.Message{constructor(e){super(),this.name="",this.methods=[],this.options=[],this.version="",this.mixins=[],this.syntax=o.Syntax.PROTO2,i.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new a).fromBinary(e,t)}static fromJson(e,t){return(new a).fromJson(e,t)}static fromJsonString(e,t){return(new a).fromJsonString(e,t)}static equals(e,t){return i.proto3.util.equals(a,e,t)}}t.Api=a,a.runtime=i.proto3,a.typeName="google.protobuf.Api",a.fields=i.proto3.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"methods",kind:"message",T:c,repeated:!0},{no:3,name:"options",kind:"message",T:o.Option,repeated:!0},{no:4,name:"version",kind:"scalar",T:9},{no:5,name:"source_context",kind:"message",T:s.SourceContext},{no:6,name:"mixins",kind:"message",T:l,repeated:!0},{no:7,name:"syntax",kind:"enum",T:i.proto3.getEnumType(o.Syntax)}]));class c extends n.Message{constructor(e){super(),this.name="",this.requestTypeUrl="",this.requestStreaming=!1,this.responseTypeUrl="",this.responseStreaming=!1,this.options=[],this.syntax=o.Syntax.PROTO2,i.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new c).fromBinary(e,t)}static fromJson(e,t){return(new c).fromJson(e,t)}static fromJsonString(e,t){return(new c).fromJsonString(e,t)}static equals(e,t){return i.proto3.util.equals(c,e,t)}}t.Method=c,c.runtime=i.proto3,c.typeName="google.protobuf.Method",c.fields=i.proto3.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"request_type_url",kind:"scalar",T:9},{no:3,name:"request_streaming",kind:"scalar",T:8},{no:4,name:"response_type_url",kind:"scalar",T:9},{no:5,name:"response_streaming",kind:"scalar",T:8},{no:6,name:"options",kind:"message",T:o.Option,repeated:!0},{no:7,name:"syntax",kind:"enum",T:i.proto3.getEnumType(o.Syntax)}]));class l extends n.Message{constructor(e){super(),this.name="",this.root="",i.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new l).fromBinary(e,t)}static fromJson(e,t){return(new l).fromJson(e,t)}static fromJsonString(e,t){return(new l).fromJsonString(e,t)}static equals(e,t){return i.proto3.util.equals(l,e,t)}}t.Mixin=l,l.runtime=i.proto3,l.typeName="google.protobuf.Mixin",l.fields=i.proto3.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"root",kind:"scalar",T:9}]))},16360:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGeneratorResponse_File=t.CodeGeneratorResponse_Feature=t.CodeGeneratorResponse=t.CodeGeneratorRequest=t.Version=void 0;const n=r(74748),o=r(87569),s=r(27682);class i extends n.Message{constructor(e){super(),o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new i).fromBinary(e,t)}static fromJson(e,t){return(new i).fromJson(e,t)}static fromJsonString(e,t){return(new i).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(i,e,t)}}t.Version=i,i.runtime=o.proto2,i.typeName="google.protobuf.compiler.Version",i.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"major",kind:"scalar",T:5,opt:!0},{no:2,name:"minor",kind:"scalar",T:5,opt:!0},{no:3,name:"patch",kind:"scalar",T:5,opt:!0},{no:4,name:"suffix",kind:"scalar",T:9,opt:!0}]));class a extends n.Message{constructor(e){super(),this.fileToGenerate=[],this.protoFile=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new a).fromBinary(e,t)}static fromJson(e,t){return(new a).fromJson(e,t)}static fromJsonString(e,t){return(new a).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(a,e,t)}}t.CodeGeneratorRequest=a,a.runtime=o.proto2,a.typeName="google.protobuf.compiler.CodeGeneratorRequest",a.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"file_to_generate",kind:"scalar",T:9,repeated:!0},{no:2,name:"parameter",kind:"scalar",T:9,opt:!0},{no:15,name:"proto_file",kind:"message",T:s.FileDescriptorProto,repeated:!0},{no:3,name:"compiler_version",kind:"message",T:i,opt:!0}]));class c extends n.Message{constructor(e){super(),this.file=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new c).fromBinary(e,t)}static fromJson(e,t){return(new c).fromJson(e,t)}static fromJsonString(e,t){return(new c).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(c,e,t)}}var l;t.CodeGeneratorResponse=c,c.runtime=o.proto2,c.typeName="google.protobuf.compiler.CodeGeneratorResponse",c.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"error",kind:"scalar",T:9,opt:!0},{no:2,name:"supported_features",kind:"scalar",T:4,opt:!0},{no:15,name:"file",kind:"message",T:u,repeated:!0}])),function(e){e[e.NONE=0]="NONE",e[e.PROTO3_OPTIONAL=1]="PROTO3_OPTIONAL"}(l=t.CodeGeneratorResponse_Feature||(t.CodeGeneratorResponse_Feature={})),o.proto2.util.setEnumType(l,"google.protobuf.compiler.CodeGeneratorResponse.Feature",[{no:0,name:"FEATURE_NONE"},{no:1,name:"FEATURE_PROTO3_OPTIONAL"}]);class u extends n.Message{constructor(e){super(),o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new u).fromBinary(e,t)}static fromJson(e,t){return(new u).fromJson(e,t)}static fromJsonString(e,t){return(new u).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(u,e,t)}}t.CodeGeneratorResponse_File=u,u.runtime=o.proto2,u.typeName="google.protobuf.compiler.CodeGeneratorResponse.File",u.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"insertion_point",kind:"scalar",T:9,opt:!0},{no:15,name:"content",kind:"scalar",T:9,opt:!0},{no:16,name:"generated_code_info",kind:"message",T:s.GeneratedCodeInfo,opt:!0}]))},27682:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratedCodeInfo_Annotation=t.GeneratedCodeInfo=t.SourceCodeInfo_Location=t.SourceCodeInfo=t.UninterpretedOption_NamePart=t.UninterpretedOption=t.MethodOptions_IdempotencyLevel=t.MethodOptions=t.ServiceOptions=t.EnumValueOptions=t.EnumOptions=t.OneofOptions=t.FieldOptions_JSType=t.FieldOptions_CType=t.FieldOptions=t.MessageOptions=t.FileOptions_OptimizeMode=t.FileOptions=t.MethodDescriptorProto=t.ServiceDescriptorProto=t.EnumValueDescriptorProto=t.EnumDescriptorProto_EnumReservedRange=t.EnumDescriptorProto=t.OneofDescriptorProto=t.FieldDescriptorProto_Label=t.FieldDescriptorProto_Type=t.FieldDescriptorProto=t.ExtensionRangeOptions=t.DescriptorProto_ReservedRange=t.DescriptorProto_ExtensionRange=t.DescriptorProto=t.FileDescriptorProto=t.FileDescriptorSet=void 0;const n=r(74748),o=r(87569);class s extends n.Message{constructor(e){super(),this.file=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new s).fromBinary(e,t)}static fromJson(e,t){return(new s).fromJson(e,t)}static fromJsonString(e,t){return(new s).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(s,e,t)}}t.FileDescriptorSet=s,s.runtime=o.proto2,s.typeName="google.protobuf.FileDescriptorSet",s.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"file",kind:"message",T:i,repeated:!0}]));class i extends n.Message{constructor(e){super(),this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new i).fromBinary(e,t)}static fromJson(e,t){return(new i).fromJson(e,t)}static fromJsonString(e,t){return(new i).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(i,e,t)}}t.FileDescriptorProto=i,i.runtime=o.proto2,i.typeName="google.protobuf.FileDescriptorProto",i.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"package",kind:"scalar",T:9,opt:!0},{no:3,name:"dependency",kind:"scalar",T:9,repeated:!0},{no:10,name:"public_dependency",kind:"scalar",T:5,repeated:!0},{no:11,name:"weak_dependency",kind:"scalar",T:5,repeated:!0},{no:4,name:"message_type",kind:"message",T:a,repeated:!0},{no:5,name:"enum_type",kind:"message",T:_,repeated:!0},{no:6,name:"service",kind:"message",T:E,repeated:!0},{no:7,name:"extension",kind:"message",T:d,repeated:!0},{no:8,name:"options",kind:"message",T:A,opt:!0},{no:9,name:"source_code_info",kind:"message",T:L,opt:!0},{no:12,name:"syntax",kind:"scalar",T:9,opt:!0}]));class a extends n.Message{constructor(e){super(),this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new a).fromBinary(e,t)}static fromJson(e,t){return(new a).fromJson(e,t)}static fromJsonString(e,t){return(new a).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(a,e,t)}}t.DescriptorProto=a,a.runtime=o.proto2,a.typeName="google.protobuf.DescriptorProto",a.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"field",kind:"message",T:d,repeated:!0},{no:6,name:"extension",kind:"message",T:d,repeated:!0},{no:3,name:"nested_type",kind:"message",T:a,repeated:!0},{no:4,name:"enum_type",kind:"message",T:_,repeated:!0},{no:5,name:"extension_range",kind:"message",T:c,repeated:!0},{no:8,name:"oneof_decl",kind:"message",T:v,repeated:!0},{no:7,name:"options",kind:"message",T,opt:!0},{no:9,name:"reserved_range",kind:"message",T:l,repeated:!0},{no:10,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]));class c extends n.Message{constructor(e){super(),o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new c).fromBinary(e,t)}static fromJson(e,t){return(new c).fromJson(e,t)}static fromJsonString(e,t){return(new c).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(c,e,t)}}t.DescriptorProto_ExtensionRange=c,c.runtime=o.proto2,c.typeName="google.protobuf.DescriptorProto.ExtensionRange",c.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:u,opt:!0}]));class l extends n.Message{constructor(e){super(),o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new l).fromBinary(e,t)}static fromJson(e,t){return(new l).fromJson(e,t)}static fromJsonString(e,t){return(new l).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(l,e,t)}}t.DescriptorProto_ReservedRange=l,l.runtime=o.proto2,l.typeName="google.protobuf.DescriptorProto.ReservedRange",l.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]));class u extends n.Message{constructor(e){super(),this.uninterpretedOption=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new u).fromBinary(e,t)}static fromJson(e,t){return(new u).fromJson(e,t)}static fromJsonString(e,t){return(new u).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(u,e,t)}}t.ExtensionRangeOptions=u,u.runtime=o.proto2,u.typeName="google.protobuf.ExtensionRangeOptions",u.fields=o.proto2.util.newFieldList((()=>[{no:999,name:"uninterpreted_option",kind:"message",T:P,repeated:!0}]));class d extends n.Message{constructor(e){super(),o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new d).fromBinary(e,t)}static fromJson(e,t){return(new d).fromJson(e,t)}static fromJsonString(e,t){return(new d).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(d,e,t)}}var h,p,f,g,m,y;t.FieldDescriptorProto=d,d.runtime=o.proto2,d.typeName="google.protobuf.FieldDescriptorProto",d.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:3,name:"number",kind:"scalar",T:5,opt:!0},{no:4,name:"label",kind:"enum",T:o.proto2.getEnumType(p),opt:!0},{no:5,name:"type",kind:"enum",T:o.proto2.getEnumType(h),opt:!0},{no:6,name:"type_name",kind:"scalar",T:9,opt:!0},{no:2,name:"extendee",kind:"scalar",T:9,opt:!0},{no:7,name:"default_value",kind:"scalar",T:9,opt:!0},{no:9,name:"oneof_index",kind:"scalar",T:5,opt:!0},{no:10,name:"json_name",kind:"scalar",T:9,opt:!0},{no:8,name:"options",kind:"message",T:C,opt:!0},{no:17,name:"proto3_optional",kind:"scalar",T:8,opt:!0}])),function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.GROUP=10]="GROUP",e[e.MESSAGE=11]="MESSAGE",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.ENUM=14]="ENUM",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(h=t.FieldDescriptorProto_Type||(t.FieldDescriptorProto_Type={})),o.proto2.util.setEnumType(h,"google.protobuf.FieldDescriptorProto.Type",[{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]),function(e){e[e.OPTIONAL=1]="OPTIONAL",e[e.REQUIRED=2]="REQUIRED",e[e.REPEATED=3]="REPEATED"}(p=t.FieldDescriptorProto_Label||(t.FieldDescriptorProto_Label={})),o.proto2.util.setEnumType(p,"google.protobuf.FieldDescriptorProto.Label",[{no:1,name:"LABEL_OPTIONAL"},{no:2,name:"LABEL_REQUIRED"},{no:3,name:"LABEL_REPEATED"}]);class v extends n.Message{constructor(e){super(),o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new v).fromBinary(e,t)}static fromJson(e,t){return(new v).fromJson(e,t)}static fromJsonString(e,t){return(new v).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(v,e,t)}}t.OneofDescriptorProto=v,v.runtime=o.proto2,v.typeName="google.protobuf.OneofDescriptorProto",v.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"options",kind:"message",T:I,opt:!0}]));class _ extends n.Message{constructor(e){super(),this.value=[],this.reservedRange=[],this.reservedName=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new _).fromBinary(e,t)}static fromJson(e,t){return(new _).fromJson(e,t)}static fromJsonString(e,t){return(new _).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(_,e,t)}}t.EnumDescriptorProto=_,_.runtime=o.proto2,_.typeName="google.protobuf.EnumDescriptorProto",_.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"value",kind:"message",T:S,repeated:!0},{no:3,name:"options",kind:"message",T:R,opt:!0},{no:4,name:"reserved_range",kind:"message",T:b,repeated:!0},{no:5,name:"reserved_name",kind:"scalar",T:9,repeated:!0}]));class b extends n.Message{constructor(e){super(),o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new b).fromBinary(e,t)}static fromJson(e,t){return(new b).fromJson(e,t)}static fromJsonString(e,t){return(new b).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(b,e,t)}}t.EnumDescriptorProto_EnumReservedRange=b,b.runtime=o.proto2,b.typeName="google.protobuf.EnumDescriptorProto.EnumReservedRange",b.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"start",kind:"scalar",T:5,opt:!0},{no:2,name:"end",kind:"scalar",T:5,opt:!0}]));class S extends n.Message{constructor(e){super(),o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new S).fromBinary(e,t)}static fromJson(e,t){return(new S).fromJson(e,t)}static fromJsonString(e,t){return(new S).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(S,e,t)}}t.EnumValueDescriptorProto=S,S.runtime=o.proto2,S.typeName="google.protobuf.EnumValueDescriptorProto",S.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"number",kind:"scalar",T:5,opt:!0},{no:3,name:"options",kind:"message",T:O,opt:!0}]));class E extends n.Message{constructor(e){super(),this.method=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new E).fromBinary(e,t)}static fromJson(e,t){return(new E).fromJson(e,t)}static fromJsonString(e,t){return(new E).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(E,e,t)}}t.ServiceDescriptorProto=E,E.runtime=o.proto2,E.typeName="google.protobuf.ServiceDescriptorProto",E.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"method",kind:"message",T:w,repeated:!0},{no:3,name:"options",kind:"message",T:k,opt:!0}]));class w extends n.Message{constructor(e){super(),o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new w).fromBinary(e,t)}static fromJson(e,t){return(new w).fromJson(e,t)}static fromJsonString(e,t){return(new w).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(w,e,t)}}t.MethodDescriptorProto=w,w.runtime=o.proto2,w.typeName="google.protobuf.MethodDescriptorProto",w.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9,opt:!0},{no:2,name:"input_type",kind:"scalar",T:9,opt:!0},{no:3,name:"output_type",kind:"scalar",T:9,opt:!0},{no:4,name:"options",kind:"message",T:N,opt:!0},{no:5,name:"client_streaming",kind:"scalar",T:8,opt:!0,default:!1},{no:6,name:"server_streaming",kind:"scalar",T:8,opt:!0,default:!1}]));class A extends n.Message{constructor(e){super(),this.uninterpretedOption=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new A).fromBinary(e,t)}static fromJson(e,t){return(new A).fromJson(e,t)}static fromJsonString(e,t){return(new A).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(A,e,t)}}t.FileOptions=A,A.runtime=o.proto2,A.typeName="google.protobuf.FileOptions",A.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"java_package",kind:"scalar",T:9,opt:!0},{no:8,name:"java_outer_classname",kind:"scalar",T:9,opt:!0},{no:10,name:"java_multiple_files",kind:"scalar",T:8,opt:!0,default:!1},{no:20,name:"java_generate_equals_and_hash",kind:"scalar",T:8,opt:!0},{no:27,name:"java_string_check_utf8",kind:"scalar",T:8,opt:!0,default:!1},{no:9,name:"optimize_for",kind:"enum",T:o.proto2.getEnumType(f),opt:!0,default:f.SPEED},{no:11,name:"go_package",kind:"scalar",T:9,opt:!0},{no:16,name:"cc_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:17,name:"java_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:18,name:"py_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:42,name:"php_generic_services",kind:"scalar",T:8,opt:!0,default:!1},{no:23,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:31,name:"cc_enable_arenas",kind:"scalar",T:8,opt:!0,default:!0},{no:36,name:"objc_class_prefix",kind:"scalar",T:9,opt:!0},{no:37,name:"csharp_namespace",kind:"scalar",T:9,opt:!0},{no:39,name:"swift_prefix",kind:"scalar",T:9,opt:!0},{no:40,name:"php_class_prefix",kind:"scalar",T:9,opt:!0},{no:41,name:"php_namespace",kind:"scalar",T:9,opt:!0},{no:44,name:"php_metadata_namespace",kind:"scalar",T:9,opt:!0},{no:45,name:"ruby_package",kind:"scalar",T:9,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:P,repeated:!0}])),function(e){e[e.SPEED=1]="SPEED",e[e.CODE_SIZE=2]="CODE_SIZE",e[e.LITE_RUNTIME=3]="LITE_RUNTIME"}(f=t.FileOptions_OptimizeMode||(t.FileOptions_OptimizeMode={})),o.proto2.util.setEnumType(f,"google.protobuf.FileOptions.OptimizeMode",[{no:1,name:"SPEED"},{no:2,name:"CODE_SIZE"},{no:3,name:"LITE_RUNTIME"}]);class T extends n.Message{constructor(e){super(),this.uninterpretedOption=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new T).fromBinary(e,t)}static fromJson(e,t){return(new T).fromJson(e,t)}static fromJsonString(e,t){return(new T).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(T,e,t)}}t.MessageOptions=T,T.runtime=o.proto2,T.typeName="google.protobuf.MessageOptions",T.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"message_set_wire_format",kind:"scalar",T:8,opt:!0,default:!1},{no:2,name:"no_standard_descriptor_accessor",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:7,name:"map_entry",kind:"scalar",T:8,opt:!0},{no:999,name:"uninterpreted_option",kind:"message",T:P,repeated:!0}]));class C extends n.Message{constructor(e){super(),this.uninterpretedOption=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new C).fromBinary(e,t)}static fromJson(e,t){return(new C).fromJson(e,t)}static fromJsonString(e,t){return(new C).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(C,e,t)}}t.FieldOptions=C,C.runtime=o.proto2,C.typeName="google.protobuf.FieldOptions",C.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"ctype",kind:"enum",T:o.proto2.getEnumType(g),opt:!0,default:g.STRING},{no:2,name:"packed",kind:"scalar",T:8,opt:!0},{no:6,name:"jstype",kind:"enum",T:o.proto2.getEnumType(m),opt:!0,default:m.JS_NORMAL},{no:5,name:"lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:15,name:"unverified_lazy",kind:"scalar",T:8,opt:!0,default:!1},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:10,name:"weak",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:P,repeated:!0}])),function(e){e[e.STRING=0]="STRING",e[e.CORD=1]="CORD",e[e.STRING_PIECE=2]="STRING_PIECE"}(g=t.FieldOptions_CType||(t.FieldOptions_CType={})),o.proto2.util.setEnumType(g,"google.protobuf.FieldOptions.CType",[{no:0,name:"STRING"},{no:1,name:"CORD"},{no:2,name:"STRING_PIECE"}]),function(e){e[e.JS_NORMAL=0]="JS_NORMAL",e[e.JS_STRING=1]="JS_STRING",e[e.JS_NUMBER=2]="JS_NUMBER"}(m=t.FieldOptions_JSType||(t.FieldOptions_JSType={})),o.proto2.util.setEnumType(m,"google.protobuf.FieldOptions.JSType",[{no:0,name:"JS_NORMAL"},{no:1,name:"JS_STRING"},{no:2,name:"JS_NUMBER"}]);class I extends n.Message{constructor(e){super(),this.uninterpretedOption=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new I).fromBinary(e,t)}static fromJson(e,t){return(new I).fromJson(e,t)}static fromJsonString(e,t){return(new I).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(I,e,t)}}t.OneofOptions=I,I.runtime=o.proto2,I.typeName="google.protobuf.OneofOptions",I.fields=o.proto2.util.newFieldList((()=>[{no:999,name:"uninterpreted_option",kind:"message",T:P,repeated:!0}]));class R extends n.Message{constructor(e){super(),this.uninterpretedOption=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new R).fromBinary(e,t)}static fromJson(e,t){return(new R).fromJson(e,t)}static fromJsonString(e,t){return(new R).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(R,e,t)}}t.EnumOptions=R,R.runtime=o.proto2,R.typeName="google.protobuf.EnumOptions",R.fields=o.proto2.util.newFieldList((()=>[{no:2,name:"allow_alias",kind:"scalar",T:8,opt:!0},{no:3,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:P,repeated:!0}]));class O extends n.Message{constructor(e){super(),this.uninterpretedOption=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new O).fromBinary(e,t)}static fromJson(e,t){return(new O).fromJson(e,t)}static fromJsonString(e,t){return(new O).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(O,e,t)}}t.EnumValueOptions=O,O.runtime=o.proto2,O.typeName="google.protobuf.EnumValueOptions",O.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:P,repeated:!0}]));class k extends n.Message{constructor(e){super(),this.uninterpretedOption=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new k).fromBinary(e,t)}static fromJson(e,t){return(new k).fromJson(e,t)}static fromJsonString(e,t){return(new k).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(k,e,t)}}t.ServiceOptions=k,k.runtime=o.proto2,k.typeName="google.protobuf.ServiceOptions",k.fields=o.proto2.util.newFieldList((()=>[{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:999,name:"uninterpreted_option",kind:"message",T:P,repeated:!0}]));class N extends n.Message{constructor(e){super(),this.uninterpretedOption=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new N).fromBinary(e,t)}static fromJson(e,t){return(new N).fromJson(e,t)}static fromJsonString(e,t){return(new N).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(N,e,t)}}t.MethodOptions=N,N.runtime=o.proto2,N.typeName="google.protobuf.MethodOptions",N.fields=o.proto2.util.newFieldList((()=>[{no:33,name:"deprecated",kind:"scalar",T:8,opt:!0,default:!1},{no:34,name:"idempotency_level",kind:"enum",T:o.proto2.getEnumType(y),opt:!0,default:y.IDEMPOTENCY_UNKNOWN},{no:999,name:"uninterpreted_option",kind:"message",T:P,repeated:!0}])),function(e){e[e.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",e[e.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",e[e.IDEMPOTENT=2]="IDEMPOTENT"}(y=t.MethodOptions_IdempotencyLevel||(t.MethodOptions_IdempotencyLevel={})),o.proto2.util.setEnumType(y,"google.protobuf.MethodOptions.IdempotencyLevel",[{no:0,name:"IDEMPOTENCY_UNKNOWN"},{no:1,name:"NO_SIDE_EFFECTS"},{no:2,name:"IDEMPOTENT"}]);class P extends n.Message{constructor(e){super(),this.name=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new P).fromBinary(e,t)}static fromJson(e,t){return(new P).fromJson(e,t)}static fromJsonString(e,t){return(new P).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(P,e,t)}}t.UninterpretedOption=P,P.runtime=o.proto2,P.typeName="google.protobuf.UninterpretedOption",P.fields=o.proto2.util.newFieldList((()=>[{no:2,name:"name",kind:"message",T:M,repeated:!0},{no:3,name:"identifier_value",kind:"scalar",T:9,opt:!0},{no:4,name:"positive_int_value",kind:"scalar",T:4,opt:!0},{no:5,name:"negative_int_value",kind:"scalar",T:3,opt:!0},{no:6,name:"double_value",kind:"scalar",T:1,opt:!0},{no:7,name:"string_value",kind:"scalar",T:12,opt:!0},{no:8,name:"aggregate_value",kind:"scalar",T:9,opt:!0}]));class M extends n.Message{constructor(e){super(),o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new M).fromBinary(e,t)}static fromJson(e,t){return(new M).fromJson(e,t)}static fromJsonString(e,t){return(new M).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(M,e,t)}}t.UninterpretedOption_NamePart=M,M.runtime=o.proto2,M.typeName="google.protobuf.UninterpretedOption.NamePart",M.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"name_part",kind:"scalar",T:9},{no:2,name:"is_extension",kind:"scalar",T:8}]));class L extends n.Message{constructor(e){super(),this.location=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new L).fromBinary(e,t)}static fromJson(e,t){return(new L).fromJson(e,t)}static fromJsonString(e,t){return(new L).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(L,e,t)}}t.SourceCodeInfo=L,L.runtime=o.proto2,L.typeName="google.protobuf.SourceCodeInfo",L.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"location",kind:"message",T:B,repeated:!0}]));class B extends n.Message{constructor(e){super(),this.path=[],this.span=[],this.leadingDetachedComments=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new B).fromBinary(e,t)}static fromJson(e,t){return(new B).fromJson(e,t)}static fromJsonString(e,t){return(new B).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(B,e,t)}}t.SourceCodeInfo_Location=B,B.runtime=o.proto2,B.typeName="google.protobuf.SourceCodeInfo.Location",B.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"span",kind:"scalar",T:5,repeated:!0,packed:!0},{no:3,name:"leading_comments",kind:"scalar",T:9,opt:!0},{no:4,name:"trailing_comments",kind:"scalar",T:9,opt:!0},{no:6,name:"leading_detached_comments",kind:"scalar",T:9,repeated:!0}]));class D extends n.Message{constructor(e){super(),this.annotation=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new D).fromBinary(e,t)}static fromJson(e,t){return(new D).fromJson(e,t)}static fromJsonString(e,t){return(new D).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(D,e,t)}}t.GeneratedCodeInfo=D,D.runtime=o.proto2,D.typeName="google.protobuf.GeneratedCodeInfo",D.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"annotation",kind:"message",T:x,repeated:!0}]));class x extends n.Message{constructor(e){super(),this.path=[],o.proto2.util.initPartial(e,this)}static fromBinary(e,t){return(new x).fromBinary(e,t)}static fromJson(e,t){return(new x).fromJson(e,t)}static fromJsonString(e,t){return(new x).fromJsonString(e,t)}static equals(e,t){return o.proto2.util.equals(x,e,t)}}t.GeneratedCodeInfo_Annotation=x,x.runtime=o.proto2,x.typeName="google.protobuf.GeneratedCodeInfo.Annotation",x.fields=o.proto2.util.newFieldList((()=>[{no:1,name:"path",kind:"scalar",T:5,repeated:!0,packed:!0},{no:2,name:"source_file",kind:"scalar",T:9,opt:!0},{no:3,name:"begin",kind:"scalar",T:5,opt:!0},{no:4,name:"end",kind:"scalar",T:5,opt:!0}]))},12058:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Duration=void 0;const n=r(74748),o=r(63424),s=r(52398);class i extends n.Message{constructor(e){super(),this.seconds=o.protoInt64.zero,this.nanos=0,s.proto3.util.initPartial(e,this)}fromJson(e,t){if("string"!=typeof e)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${s.proto3.json.debug(e)}`);const r=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(null===r)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${s.proto3.json.debug(e)}`);const n=Number(r[1]);if(n>315576e6||n<-315576e6)throw new Error(`cannot decode google.protobuf.Duration from JSON: ${s.proto3.json.debug(e)}`);if(this.seconds=o.protoInt64.parse(n),"string"==typeof r[2]){const e=r[2]+"0".repeat(9-r[2].length);this.nanos=parseInt(e),n<o.protoInt64.zero&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||Number(this.seconds)<-315576e6)throw new Error("cannot encode google.protobuf.Duration to JSON: value out of range");let t=this.seconds.toString();if(0!==this.nanos){let e=Math.abs(this.nanos).toString();e="0".repeat(9-e.length)+e,"000000"===e.substring(3)?e=e.substring(0,3):"000"===e.substring(6)&&(e=e.substring(0,6)),t+="."+e}return t+"s"}static fromBinary(e,t){return(new i).fromBinary(e,t)}static fromJson(e,t){return(new i).fromJson(e,t)}static fromJsonString(e,t){return(new i).fromJsonString(e,t)}static equals(e,t){return s.proto3.util.equals(i,e,t)}}t.Duration=i,i.runtime=s.proto3,i.typeName="google.protobuf.Duration",i.fields=s.proto3.util.newFieldList((()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]))},86144:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Empty=void 0;const n=r(74748),o=r(52398);class s extends n.Message{constructor(e){super(),o.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new s).fromBinary(e,t)}static fromJson(e,t){return(new s).fromJson(e,t)}static fromJsonString(e,t){return(new s).fromJsonString(e,t)}static equals(e,t){return o.proto3.util.equals(s,e,t)}}t.Empty=s,s.runtime=o.proto3,s.typeName="google.protobuf.Empty",s.fields=o.proto3.util.newFieldList((()=>[]))},68062:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FieldMask=void 0;const n=r(74748),o=r(52398);class s extends n.Message{constructor(e){super(),this.paths=[],o.proto3.util.initPartial(e,this)}toJson(e){return this.paths.map((e=>{if(e.match(/_[0-9]?_/g)||e.match(/[A-Z]/g))throw new Error('cannot decode google.protobuf.FieldMask from JSON: lowerCamelCase of path name "'+e+'" is irreversible');return function(e){let t=!1;const r=[];for(let n=0;n<e.length;n++){let o=e.charAt(n);switch(o){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r.push(o),t=!1;break;default:t&&(t=!1,o=o.toUpperCase()),r.push(o)}}return r.join("")}(e)})).join(",")}fromJson(e,t){if("string"!=typeof e)throw new Error("cannot decode google.protobuf.FieldMask from JSON: "+o.proto3.json.debug(e));return""===e||(this.paths=e.split(",").map((function(e){if(e.includes("_"))throw new Error("cannot decode google.protobuf.FieldMask from JSON: path names must be lowerCamelCase");const t=e.replace(/[A-Z]/g,(e=>"_"+e.toLowerCase()));return"_"===t[0]?t.substring(1):t}))),this}static fromBinary(e,t){return(new s).fromBinary(e,t)}static fromJson(e,t){return(new s).fromJson(e,t)}static fromJsonString(e,t){return(new s).fromJsonString(e,t)}static equals(e,t){return o.proto3.util.equals(s,e,t)}}t.FieldMask=s,s.runtime=o.proto3,s.typeName="google.protobuf.FieldMask",s.fields=o.proto3.util.newFieldList((()=>[{no:1,name:"paths",kind:"scalar",T:9,repeated:!0}]))},89640:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceContext=void 0;const n=r(74748),o=r(52398);class s extends n.Message{constructor(e){super(),this.fileName="",o.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new s).fromBinary(e,t)}static fromJson(e,t){return(new s).fromJson(e,t)}static fromJsonString(e,t){return(new s).fromJsonString(e,t)}static equals(e,t){return o.proto3.util.equals(s,e,t)}}t.SourceContext=s,s.runtime=o.proto3,s.typeName="google.protobuf.SourceContext",s.fields=o.proto3.util.newFieldList((()=>[{no:1,name:"file_name",kind:"scalar",T:9}]))},37609:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListValue=t.Value=t.Struct=t.NullValue=void 0;const n=r(52398),o=r(74748);var s;!function(e){e[e.NULL_VALUE=0]="NULL_VALUE"}(s=t.NullValue||(t.NullValue={})),n.proto3.util.setEnumType(s,"google.protobuf.NullValue",[{no:0,name:"NULL_VALUE"}]);class i extends o.Message{constructor(e){super(),this.fields={},n.proto3.util.initPartial(e,this)}toJson(e){const t={};for(const[r,n]of Object.entries(this.fields))t[r]=n.toJson(e);return t}fromJson(e,t){if("object"!=typeof e||null==e||Array.isArray(e))throw new Error("cannot decode google.protobuf.Struct from JSON "+n.proto3.json.debug(e));for(const[t,r]of Object.entries(e))this.fields[t]=a.fromJson(r);return this}static fromBinary(e,t){return(new i).fromBinary(e,t)}static fromJson(e,t){return(new i).fromJson(e,t)}static fromJsonString(e,t){return(new i).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(i,e,t)}}t.Struct=i,i.runtime=n.proto3,i.typeName="google.protobuf.Struct",i.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"fields",kind:"map",K:9,V:{kind:"message",T:a}}]));class a extends o.Message{constructor(e){super(),this.kind={case:void 0},n.proto3.util.initPartial(e,this)}toJson(e){switch(this.kind.case){case"nullValue":return null;case"boolValue":case"numberValue":case"stringValue":return this.kind.value;case"structValue":case"listValue":return this.kind.value.toJson(Object.assign(Object.assign({},e),{emitDefaultValues:!0}))}throw new Error("google.protobuf.Value must have a value")}fromJson(e,t){switch(typeof e){case"number":this.kind={case:"numberValue",value:e};break;case"string":this.kind={case:"stringValue",value:e};break;case"boolean":this.kind={case:"boolValue",value:e};break;case"object":null===e?this.kind={case:"nullValue",value:s.NULL_VALUE}:Array.isArray(e)?this.kind={case:"listValue",value:c.fromJson(e)}:this.kind={case:"structValue",value:i.fromJson(e)};break;default:throw new Error("cannot decode google.protobuf.Value from JSON "+n.proto3.json.debug(e))}return this}static fromBinary(e,t){return(new a).fromBinary(e,t)}static fromJson(e,t){return(new a).fromJson(e,t)}static fromJsonString(e,t){return(new a).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(a,e,t)}}t.Value=a,a.runtime=n.proto3,a.typeName="google.protobuf.Value",a.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"null_value",kind:"enum",T:n.proto3.getEnumType(s),oneof:"kind"},{no:2,name:"number_value",kind:"scalar",T:1,oneof:"kind"},{no:3,name:"string_value",kind:"scalar",T:9,oneof:"kind"},{no:4,name:"bool_value",kind:"scalar",T:8,oneof:"kind"},{no:5,name:"struct_value",kind:"message",T:i,oneof:"kind"},{no:6,name:"list_value",kind:"message",T:c,oneof:"kind"}]));class c extends o.Message{constructor(e){super(),this.values=[],n.proto3.util.initPartial(e,this)}toJson(e){return this.values.map((e=>e.toJson()))}fromJson(e,t){if(!Array.isArray(e))throw new Error("cannot decode google.protobuf.ListValue from JSON "+n.proto3.json.debug(e));for(let t of e)this.values.push(a.fromJson(t));return this}static fromBinary(e,t){return(new c).fromBinary(e,t)}static fromJson(e,t){return(new c).fromJson(e,t)}static fromJsonString(e,t){return(new c).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(c,e,t)}}t.ListValue=c,c.runtime=n.proto3,c.typeName="google.protobuf.ListValue",c.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"values",kind:"message",T:a,repeated:!0}]))},91241:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timestamp=void 0;const n=r(74748),o=r(63424),s=r(52398);class i extends n.Message{constructor(e){super(),this.seconds=o.protoInt64.zero,this.nanos=0,s.proto3.util.initPartial(e,this)}fromJson(e,t){if("string"!=typeof e)throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${s.proto3.json.debug(e)}`);const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const n=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(n))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=o.protoInt64.parse(n/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const t=1e3*Number(this.seconds);if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const e=(this.nanos+1e9).toString().substring(1);r="000000"===e.substring(3)?"."+e.substring(0,3)+"Z":"000"===e.substring(6)?"."+e.substring(0,6)+"Z":"."+e+"Z"}return new Date(t).toISOString().replace(".000Z",r)}toDate(){return new Date(1e3*Number(this.seconds)+Math.ceil(this.nanos/1e6))}static now(){return i.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new i({seconds:o.protoInt64.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return(new i).fromBinary(e,t)}static fromJson(e,t){return(new i).fromJson(e,t)}static fromJsonString(e,t){return(new i).fromJsonString(e,t)}static equals(e,t){return s.proto3.util.equals(i,e,t)}}t.Timestamp=i,i.runtime=s.proto3,i.typeName="google.protobuf.Timestamp",i.fields=s.proto3.util.newFieldList((()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]))},46530:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Option=t.EnumValue=t.Enum=t.Field_Cardinality=t.Field_Kind=t.Field=t.Type=t.Syntax=void 0;const n=r(52398),o=r(74748),s=r(89640),i=r(50841);var a,c,l;!function(e){e[e.PROTO2=0]="PROTO2",e[e.PROTO3=1]="PROTO3"}(a=t.Syntax||(t.Syntax={})),n.proto3.util.setEnumType(a,"google.protobuf.Syntax",[{no:0,name:"SYNTAX_PROTO2"},{no:1,name:"SYNTAX_PROTO3"}]);class u extends o.Message{constructor(e){super(),this.name="",this.fields=[],this.oneofs=[],this.options=[],this.syntax=a.PROTO2,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new u).fromBinary(e,t)}static fromJson(e,t){return(new u).fromJson(e,t)}static fromJsonString(e,t){return(new u).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(u,e,t)}}t.Type=u,u.runtime=n.proto3,u.typeName="google.protobuf.Type",u.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"fields",kind:"message",T:d,repeated:!0},{no:3,name:"oneofs",kind:"scalar",T:9,repeated:!0},{no:4,name:"options",kind:"message",T:f,repeated:!0},{no:5,name:"source_context",kind:"message",T:s.SourceContext},{no:6,name:"syntax",kind:"enum",T:n.proto3.getEnumType(a)}]));class d extends o.Message{constructor(e){super(),this.kind=c.TYPE_UNKNOWN,this.cardinality=l.UNKNOWN,this.number=0,this.name="",this.typeUrl="",this.oneofIndex=0,this.packed=!1,this.options=[],this.jsonName="",this.defaultValue="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new d).fromBinary(e,t)}static fromJson(e,t){return(new d).fromJson(e,t)}static fromJsonString(e,t){return(new d).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(d,e,t)}}t.Field=d,d.runtime=n.proto3,d.typeName="google.protobuf.Field",d.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"kind",kind:"enum",T:n.proto3.getEnumType(c)},{no:2,name:"cardinality",kind:"enum",T:n.proto3.getEnumType(l)},{no:3,name:"number",kind:"scalar",T:5},{no:4,name:"name",kind:"scalar",T:9},{no:6,name:"type_url",kind:"scalar",T:9},{no:7,name:"oneof_index",kind:"scalar",T:5},{no:8,name:"packed",kind:"scalar",T:8},{no:9,name:"options",kind:"message",T:f,repeated:!0},{no:10,name:"json_name",kind:"scalar",T:9},{no:11,name:"default_value",kind:"scalar",T:9}])),function(e){e[e.TYPE_UNKNOWN=0]="TYPE_UNKNOWN",e[e.TYPE_DOUBLE=1]="TYPE_DOUBLE",e[e.TYPE_FLOAT=2]="TYPE_FLOAT",e[e.TYPE_INT64=3]="TYPE_INT64",e[e.TYPE_UINT64=4]="TYPE_UINT64",e[e.TYPE_INT32=5]="TYPE_INT32",e[e.TYPE_FIXED64=6]="TYPE_FIXED64",e[e.TYPE_FIXED32=7]="TYPE_FIXED32",e[e.TYPE_BOOL=8]="TYPE_BOOL",e[e.TYPE_STRING=9]="TYPE_STRING",e[e.TYPE_GROUP=10]="TYPE_GROUP",e[e.TYPE_MESSAGE=11]="TYPE_MESSAGE",e[e.TYPE_BYTES=12]="TYPE_BYTES",e[e.TYPE_UINT32=13]="TYPE_UINT32",e[e.TYPE_ENUM=14]="TYPE_ENUM",e[e.TYPE_SFIXED32=15]="TYPE_SFIXED32",e[e.TYPE_SFIXED64=16]="TYPE_SFIXED64",e[e.TYPE_SINT32=17]="TYPE_SINT32",e[e.TYPE_SINT64=18]="TYPE_SINT64"}(c=t.Field_Kind||(t.Field_Kind={})),n.proto3.util.setEnumType(c,"google.protobuf.Field.Kind",[{no:0,name:"TYPE_UNKNOWN"},{no:1,name:"TYPE_DOUBLE"},{no:2,name:"TYPE_FLOAT"},{no:3,name:"TYPE_INT64"},{no:4,name:"TYPE_UINT64"},{no:5,name:"TYPE_INT32"},{no:6,name:"TYPE_FIXED64"},{no:7,name:"TYPE_FIXED32"},{no:8,name:"TYPE_BOOL"},{no:9,name:"TYPE_STRING"},{no:10,name:"TYPE_GROUP"},{no:11,name:"TYPE_MESSAGE"},{no:12,name:"TYPE_BYTES"},{no:13,name:"TYPE_UINT32"},{no:14,name:"TYPE_ENUM"},{no:15,name:"TYPE_SFIXED32"},{no:16,name:"TYPE_SFIXED64"},{no:17,name:"TYPE_SINT32"},{no:18,name:"TYPE_SINT64"}]),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.OPTIONAL=1]="OPTIONAL",e[e.REQUIRED=2]="REQUIRED",e[e.REPEATED=3]="REPEATED"}(l=t.Field_Cardinality||(t.Field_Cardinality={})),n.proto3.util.setEnumType(l,"google.protobuf.Field.Cardinality",[{no:0,name:"CARDINALITY_UNKNOWN"},{no:1,name:"CARDINALITY_OPTIONAL"},{no:2,name:"CARDINALITY_REQUIRED"},{no:3,name:"CARDINALITY_REPEATED"}]);class h extends o.Message{constructor(e){super(),this.name="",this.enumvalue=[],this.options=[],this.syntax=a.PROTO2,n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new h).fromBinary(e,t)}static fromJson(e,t){return(new h).fromJson(e,t)}static fromJsonString(e,t){return(new h).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(h,e,t)}}t.Enum=h,h.runtime=n.proto3,h.typeName="google.protobuf.Enum",h.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"enumvalue",kind:"message",T:p,repeated:!0},{no:3,name:"options",kind:"message",T:f,repeated:!0},{no:4,name:"source_context",kind:"message",T:s.SourceContext},{no:5,name:"syntax",kind:"enum",T:n.proto3.getEnumType(a)}]));class p extends o.Message{constructor(e){super(),this.name="",this.number=0,this.options=[],n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new p).fromBinary(e,t)}static fromJson(e,t){return(new p).fromJson(e,t)}static fromJsonString(e,t){return(new p).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(p,e,t)}}t.EnumValue=p,p.runtime=n.proto3,p.typeName="google.protobuf.EnumValue",p.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"number",kind:"scalar",T:5},{no:3,name:"options",kind:"message",T:f,repeated:!0}]));class f extends o.Message{constructor(e){super(),this.name="",n.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new f).fromBinary(e,t)}static fromJson(e,t){return(new f).fromJson(e,t)}static fromJsonString(e,t){return(new f).fromJsonString(e,t)}static equals(e,t){return n.proto3.util.equals(f,e,t)}}t.Option=f,f.runtime=n.proto3,f.typeName="google.protobuf.Option",f.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"value",kind:"message",T:i.Any}]))},74820:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BytesValue=t.StringValue=t.BoolValue=t.UInt32Value=t.Int32Value=t.UInt64Value=t.Int64Value=t.FloatValue=t.DoubleValue=void 0;const n=r(74748),o=r(52398),s=r(97168),i=r(63424);class a extends n.Message{constructor(e){super(),this.value=0,o.proto3.util.initPartial(e,this)}toJson(e){return o.proto3.json.writeScalar(s.ScalarType.DOUBLE,this.value,!0)}fromJson(e,t){try{this.value=o.proto3.json.readScalar(s.ScalarType.DOUBLE,e)}catch(e){let t='cannot decode message google.protobuf.DoubleValue from JSON"';throw e instanceof Error&&e.message.length>0&&(t+=`: ${e.message}`),new Error(t)}return this}static fromBinary(e,t){return(new a).fromBinary(e,t)}static fromJson(e,t){return(new a).fromJson(e,t)}static fromJsonString(e,t){return(new a).fromJsonString(e,t)}static equals(e,t){return o.proto3.util.equals(a,e,t)}}t.DoubleValue=a,a.runtime=o.proto3,a.typeName="google.protobuf.DoubleValue",a.fields=o.proto3.util.newFieldList((()=>[{no:1,name:"value",kind:"scalar",T:1}])),a.fieldWrapper={wrapField:e=>e instanceof a?e:new a({value:e}),unwrapField:e=>e.value};class c extends n.Message{constructor(e){super(),this.value=0,o.proto3.util.initPartial(e,this)}toJson(e){return o.proto3.json.writeScalar(s.ScalarType.FLOAT,this.value,!0)}fromJson(e,t){try{this.value=o.proto3.json.readScalar(s.ScalarType.FLOAT,e)}catch(e){let t='cannot decode message google.protobuf.FloatValue from JSON"';throw e instanceof Error&&e.message.length>0&&(t+=`: ${e.message}`),new Error(t)}return this}static fromBinary(e,t){return(new c).fromBinary(e,t)}static fromJson(e,t){return(new c).fromJson(e,t)}static fromJsonString(e,t){return(new c).fromJsonString(e,t)}static equals(e,t){return o.proto3.util.equals(c,e,t)}}t.FloatValue=c,c.runtime=o.proto3,c.typeName="google.protobuf.FloatValue",c.fields=o.proto3.util.newFieldList((()=>[{no:1,name:"value",kind:"scalar",T:2}])),c.fieldWrapper={wrapField:e=>e instanceof c?e:new c({value:e}),unwrapField:e=>e.value};class l extends n.Message{constructor(e){super(),this.value=i.protoInt64.zero,o.proto3.util.initPartial(e,this)}toJson(e){return o.proto3.json.writeScalar(s.ScalarType.INT64,this.value,!0)}fromJson(e,t){try{this.value=o.proto3.json.readScalar(s.ScalarType.INT64,e)}catch(e){let t='cannot decode message google.protobuf.Int64Value from JSON"';throw e instanceof Error&&e.message.length>0&&(t+=`: ${e.message}`),new Error(t)}return this}static fromBinary(e,t){return(new l).fromBinary(e,t)}static fromJson(e,t){return(new l).fromJson(e,t)}static fromJsonString(e,t){return(new l).fromJsonString(e,t)}static equals(e,t){return o.proto3.util.equals(l,e,t)}}t.Int64Value=l,l.runtime=o.proto3,l.typeName="google.protobuf.Int64Value",l.fields=o.proto3.util.newFieldList((()=>[{no:1,name:"value",kind:"scalar",T:3}])),l.fieldWrapper={wrapField:e=>e instanceof l?e:new l({value:e}),unwrapField:e=>e.value};class u extends n.Message{constructor(e){super(),this.value=i.protoInt64.zero,o.proto3.util.initPartial(e,this)}toJson(e){return o.proto3.json.writeScalar(s.ScalarType.UINT64,this.value,!0)}fromJson(e,t){try{this.value=o.proto3.json.readScalar(s.ScalarType.UINT64,e)}catch(e){let t='cannot decode message google.protobuf.UInt64Value from JSON"';throw e instanceof Error&&e.message.length>0&&(t+=`: ${e.message}`),new Error(t)}return this}static fromBinary(e,t){return(new u).fromBinary(e,t)}static fromJson(e,t){return(new u).fromJson(e,t)}static fromJsonString(e,t){return(new u).fromJsonString(e,t)}static equals(e,t){return o.proto3.util.equals(u,e,t)}}t.UInt64Value=u,u.runtime=o.proto3,u.typeName="google.protobuf.UInt64Value",u.fields=o.proto3.util.newFieldList((()=>[{no:1,name:"value",kind:"scalar",T:4}])),u.fieldWrapper={wrapField:e=>e instanceof u?e:new u({value:e}),unwrapField:e=>e.value};class d extends n.Message{constructor(e){super(),this.value=0,o.proto3.util.initPartial(e,this)}toJson(e){return o.proto3.json.writeScalar(s.ScalarType.INT32,this.value,!0)}fromJson(e,t){try{this.value=o.proto3.json.readScalar(s.ScalarType.INT32,e)}catch(e){let t='cannot decode message google.protobuf.Int32Value from JSON"';throw e instanceof Error&&e.message.length>0&&(t+=`: ${e.message}`),new Error(t)}return this}static fromBinary(e,t){return(new d).fromBinary(e,t)}static fromJson(e,t){return(new d).fromJson(e,t)}static fromJsonString(e,t){return(new d).fromJsonString(e,t)}static equals(e,t){return o.proto3.util.equals(d,e,t)}}t.Int32Value=d,d.runtime=o.proto3,d.typeName="google.protobuf.Int32Value",d.fields=o.proto3.util.newFieldList((()=>[{no:1,name:"value",kind:"scalar",T:5}])),d.fieldWrapper={wrapField:e=>e instanceof d?e:new d({value:e}),unwrapField:e=>e.value};class h extends n.Message{constructor(e){super(),this.value=0,o.proto3.util.initPartial(e,this)}toJson(e){return o.proto3.json.writeScalar(s.ScalarType.UINT32,this.value,!0)}fromJson(e,t){try{this.value=o.proto3.json.readScalar(s.ScalarType.UINT32,e)}catch(e){let t='cannot decode message google.protobuf.UInt32Value from JSON"';throw e instanceof Error&&e.message.length>0&&(t+=`: ${e.message}`),new Error(t)}return this}static fromBinary(e,t){return(new h).fromBinary(e,t)}static fromJson(e,t){return(new h).fromJson(e,t)}static fromJsonString(e,t){return(new h).fromJsonString(e,t)}static equals(e,t){return o.proto3.util.equals(h,e,t)}}t.UInt32Value=h,h.runtime=o.proto3,h.typeName="google.protobuf.UInt32Value",h.fields=o.proto3.util.newFieldList((()=>[{no:1,name:"value",kind:"scalar",T:13}])),h.fieldWrapper={wrapField:e=>e instanceof h?e:new h({value:e}),unwrapField:e=>e.value};class p extends n.Message{constructor(e){super(),this.value=!1,o.proto3.util.initPartial(e,this)}toJson(e){return o.proto3.json.writeScalar(s.ScalarType.BOOL,this.value,!0)}fromJson(e,t){try{this.value=o.proto3.json.readScalar(s.ScalarType.BOOL,e)}catch(e){let t='cannot decode message google.protobuf.BoolValue from JSON"';throw e instanceof Error&&e.message.length>0&&(t+=`: ${e.message}`),new Error(t)}return this}static fromBinary(e,t){return(new p).fromBinary(e,t)}static fromJson(e,t){return(new p).fromJson(e,t)}static fromJsonString(e,t){return(new p).fromJsonString(e,t)}static equals(e,t){return o.proto3.util.equals(p,e,t)}}t.BoolValue=p,p.runtime=o.proto3,p.typeName="google.protobuf.BoolValue",p.fields=o.proto3.util.newFieldList((()=>[{no:1,name:"value",kind:"scalar",T:8}])),p.fieldWrapper={wrapField:e=>e instanceof p?e:new p({value:e}),unwrapField:e=>e.value};class f extends n.Message{constructor(e){super(),this.value="",o.proto3.util.initPartial(e,this)}toJson(e){return o.proto3.json.writeScalar(s.ScalarType.STRING,this.value,!0)}fromJson(e,t){try{this.value=o.proto3.json.readScalar(s.ScalarType.STRING,e)}catch(e){let t='cannot decode message google.protobuf.StringValue from JSON"';throw e instanceof Error&&e.message.length>0&&(t+=`: ${e.message}`),new Error(t)}return this}static fromBinary(e,t){return(new f).fromBinary(e,t)}static fromJson(e,t){return(new f).fromJson(e,t)}static fromJsonString(e,t){return(new f).fromJsonString(e,t)}static equals(e,t){return o.proto3.util.equals(f,e,t)}}t.StringValue=f,f.runtime=o.proto3,f.typeName="google.protobuf.StringValue",f.fields=o.proto3.util.newFieldList((()=>[{no:1,name:"value",kind:"scalar",T:9}])),f.fieldWrapper={wrapField:e=>e instanceof f?e:new f({value:e}),unwrapField:e=>e.value};class g extends n.Message{constructor(e){super(),this.value=new Uint8Array(0),o.proto3.util.initPartial(e,this)}toJson(e){return o.proto3.json.writeScalar(s.ScalarType.BYTES,this.value,!0)}fromJson(e,t){try{this.value=o.proto3.json.readScalar(s.ScalarType.BYTES,e)}catch(e){let t='cannot decode message google.protobuf.BytesValue from JSON"';throw e instanceof Error&&e.message.length>0&&(t+=`: ${e.message}`),new Error(t)}return this}static fromBinary(e,t){return(new g).fromBinary(e,t)}static fromJson(e,t){return(new g).fromJson(e,t)}static fromJsonString(e,t){return(new g).fromJsonString(e,t)}static equals(e,t){return o.proto3.util.equals(g,e,t)}}t.BytesValue=g,g.runtime=o.proto3,g.typeName="google.protobuf.BytesValue",g.fields=o.proto3.util.newFieldList((()=>[{no:1,name:"value",kind:"scalar",T:12}])),g.fieldWrapper={wrapField:e=>e instanceof g?e:new g({value:e}),unwrapField:e=>e.value}},71539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.varint32read=t.varint32write=t.uInt64ToString=t.int64ToString=t.int64FromString=t.varint64write=t.varint64read=void 0,t.varint64read=function(){let e=0,t=0;for(let r=0;r<28;r+=7){let n=this.buf[this.pos++];if(e|=(127&n)<<r,0==(128&n))return this.assertBounds(),[e,t]}let r=this.buf[this.pos++];if(e|=(15&r)<<28,t=(112&r)>>4,0==(128&r))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let n=this.buf[this.pos++];if(t|=(127&n)<<r,0==(128&n))return this.assertBounds(),[e,t]}throw new Error("invalid varint")},t.varint64write=function(e,t,r){for(let n=0;n<28;n+=7){const o=e>>>n,s=!(o>>>7==0&&0==t),i=255&(s?128|o:o);if(r.push(i),!s)return}const n=e>>>28&15|(7&t)<<4,o=!(t>>3==0);if(r.push(255&(o?128|n:n)),o){for(let e=3;e<31;e+=7){const n=t>>>e,o=!(n>>>7==0),s=255&(o?128|n:n);if(r.push(s),!o)return}r.push(t>>>31&1)}};const r=4294967296;function n(e,t){if(({lo:e,hi:t}=function(e,t){return{lo:e>>>0,hi:t>>>0}}(e,t)),t<=2097151)return String(r*t+e);const n=16777215&(e>>>24|t<<8),o=t>>16&65535;let s=(16777215&e)+6777216*n+6710656*o,a=n+8147497*o,c=2*o;const l=1e7;return s>=l&&(a+=Math.floor(s/l),s%=l),a>=l&&(c+=Math.floor(a/l),a%=l),c.toString()+i(a)+i(s)}function o(e,t){return{lo:0|e,hi:0|t}}function s(e,t){return t=~t,e?e=1+~e:t+=1,o(e,t)}t.int64FromString=function(e){const t="-"===e[0];t&&(e=e.slice(1));const n=1e6;let i=0,a=0;function c(t,o){const s=Number(e.slice(t,o));a*=n,i=i*n+s,i>=r&&(a+=i/r|0,i%=r)}return c(-24,-18),c(-18,-12),c(-12,-6),c(-6),t?s(i,a):o(i,a)},t.int64ToString=function(e,t){let r=o(e,t);const i=2147483648&r.hi;i&&(r=s(r.lo,r.hi));const a=n(r.lo,r.hi);return i?"-"+a:a},t.uInt64ToString=n;const i=e=>{const t=String(e);return"0000000".slice(t.length)+t};t.varint32write=function(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let r=0;r<9;r++)t.push(127&e|128),e>>=7;t.push(1)}},t.varint32read=function(){let e=this.buf[this.pos++],t=127&e;if(0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,0==(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let t=5;0!=(128&e)&&t<10;t++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}},49408:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.createRegistryFromDescriptors=t.createRegistry=t.createDescriptorSet=t.BinaryReader=t.BinaryWriter=t.WireType=t.MethodIdempotency=t.MethodKind=t.ScalarType=t.Message=t.codegenInfo=t.protoBase64=t.protoInt64=t.proto2=t.proto3=void 0;var s=r(52398);Object.defineProperty(t,"proto3",{enumerable:!0,get:function(){return s.proto3}});var i=r(87569);Object.defineProperty(t,"proto2",{enumerable:!0,get:function(){return i.proto2}});var a=r(63424);Object.defineProperty(t,"protoInt64",{enumerable:!0,get:function(){return a.protoInt64}});var c=r(22961);Object.defineProperty(t,"protoBase64",{enumerable:!0,get:function(){return c.protoBase64}});var l=r(95876);Object.defineProperty(t,"codegenInfo",{enumerable:!0,get:function(){return l.codegenInfo}});var u=r(74748);Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return u.Message}});var d=r(97168);Object.defineProperty(t,"ScalarType",{enumerable:!0,get:function(){return d.ScalarType}});var h=r(23621);Object.defineProperty(t,"MethodKind",{enumerable:!0,get:function(){return h.MethodKind}}),Object.defineProperty(t,"MethodIdempotency",{enumerable:!0,get:function(){return h.MethodIdempotency}});var p=r(65247);Object.defineProperty(t,"WireType",{enumerable:!0,get:function(){return p.WireType}}),Object.defineProperty(t,"BinaryWriter",{enumerable:!0,get:function(){return p.BinaryWriter}}),Object.defineProperty(t,"BinaryReader",{enumerable:!0,get:function(){return p.BinaryReader}}),r(33912),r(9285);var f=r(35531);Object.defineProperty(t,"createDescriptorSet",{enumerable:!0,get:function(){return f.createDescriptorSet}}),r(79019);var g=r(66155);Object.defineProperty(t,"createRegistry",{enumerable:!0,get:function(){return g.createRegistry}});var m=r(17297);Object.defineProperty(t,"createRegistryFromDescriptors",{enumerable:!0,get:function(){return m.createRegistryFromDescriptors}}),o(r(16360),t),o(r(24676),t),o(r(50841),t),o(r(27682),t),o(r(12058),t),o(r(86144),t),o(r(68062),t),o(r(89640),t),o(r(37609),t),o(r(91241),t),o(r(46530),t),o(r(74820),t)},33912:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},74748:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0,t.Message=class{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const r=this.getType().runtime.bin,n=r.makeReadOptions(t);return r.readMessage(this,n.readerFactory(e),e.byteLength,n),this}fromJson(e,t){const r=this.getType(),n=r.runtime.json,o=n.makeReadOptions(t);return n.readMessage(r,e,o,this),this}fromJsonString(e,t){return this.fromJson(JSON.parse(e),t)}toBinary(e){const t=this.getType().runtime.bin,r=t.makeWriteOptions(e),n=r.writerFactory();return t.writeMessage(this,n,r),n.finish()}toJson(e){const t=this.getType().runtime.json,r=t.makeWriteOptions(e);return t.writeMessage(this,r)}toJsonString(e){var t;const r=this.toJson(e);return JSON.stringify(r,null,null!==(t=null==e?void 0:e.prettySpaces)&&void 0!==t?t:0)}getType(){return Object.getPrototypeOf(this).constructor}}},63789:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertFloat32=t.assertUInt32=t.assertInt32=t.assert=void 0,t.assert=function(e,t){if(!e)throw new Error(t)},t.assertInt32=function(e){if("number"!=typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>2147483647||e<-2147483648)throw new Error("invalid int 32: "+e)},t.assertUInt32=function(e){if("number"!=typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>4294967295||e<0)throw new Error("invalid uint 32: "+e)},t.assertFloat32=function(e){if("number"!=typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>34028234663852886e22||e<-34028234663852886e22))throw new Error("invalid float 32: "+e)}},83641:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writePacked=t.writeScalar=t.writeMessageField=t.writeMapEntry=t.makeBinaryFormatCommon=void 0;const n=r(65247),o=r(97168),s=r(42714),i=r(42068),a=r(63789),c=Symbol("@bufbuild/protobuf/unknown-fields"),l={readUnknownFields:!0,readerFactory:e=>new n.BinaryReader(e)},u={writeUnknownFields:!0,writerFactory:()=>new n.BinaryWriter};function d(e){return e?Object.assign(Object.assign({},l),e):l}function h(e){return e?Object.assign(Object.assign({},u),e):u}function p(e,t,r){const n=t.uint32(),s=t.pos+n;let a,c;for(;t.pos<s;){let[n]=t.tag();switch(n){case 1:a=f(t,e.K);break;case 2:switch(e.V.kind){case"scalar":c=f(t,e.V.T);break;case"enum":c=t.int32();break;case"message":c=e.V.T.fromBinary(t.bytes(),r)}}}if(void 0===a){let t=(0,i.scalarDefaultValue)(e.K);a=e.K==o.ScalarType.BOOL?t.toString():t}if("string"!=typeof a&&"number"!=typeof a&&(a=a.toString()),void 0===c)switch(e.V.kind){case"scalar":c=(0,i.scalarDefaultValue)(e.V.T);break;case"enum":c=0;break;case"message":c=new e.V.T}return[a,c]}function f(e,t){let[,r]=(0,i.scalarTypeInfo)(t);return e[r]()}function g(e,t,r,o,i){if(void 0!==i){const a=(0,s.wrapField)(r,i);e.tag(o,n.WireType.LengthDelimited).bytes(a.toBinary(t))}}function m(e,t,r,n,o){let[s,a,c]=(0,i.scalarTypeInfo)(t,n);c&&!o||e.tag(r,s)[a](n)}t.makeBinaryFormatCommon=function(){return{makeReadOptions:d,makeWriteOptions:h,listUnknownFields(e){var t;return null!==(t=e[c])&&void 0!==t?t:[]},discardUnknownFields(e){delete e[c]},writeUnknownFields(e,t){const r=e[c];if(r)for(const e of r)t.tag(e.no,e.wireType).raw(e.data)},onUnknownField(e,t,r,n){const o=e;Array.isArray(o[c])||(o[c]=[]),o[c].push({no:t,wireType:r,data:n})},readMessage(e,t,r,i){const a=e.getType(),c=void 0===r?t.len:t.pos+r;for(;t.pos<c;){const[r,c]=t.tag(),l=a.fields.find(r);if(!l){const n=t.skip(c);i.readUnknownFields&&this.onUnknownField(e,r,c,n);continue}let u=e,d=l.repeated,h=l.localName;switch(l.oneof&&(u=u[l.oneof.localName],u.case!=h&&delete u.value,u.case=h,h="value"),l.kind){case"scalar":case"enum":const e="enum"==l.kind?o.ScalarType.INT32:l.T;if(d){let r=u[h];if(c==n.WireType.LengthDelimited&&e!=o.ScalarType.STRING&&e!=o.ScalarType.BYTES){let n=t.uint32()+t.pos;for(;t.pos<n;)r.push(f(t,e))}else r.push(f(t,e))}else u[h]=f(t,e);break;case"message":const r=l.T;d?u[h].push(r.fromBinary(t.bytes(),i)):u[h]instanceof r?u[h].fromBinary(t.bytes(),i):u[h]=(0,s.unwrapField)(r,r.fromBinary(t.bytes(),i));break;case"map":let[a,g]=p(l,t,i);u[h][a]=g}}}}},t.writeMapEntry=function(e,t,r,s,i){e.tag(r.no,n.WireType.LengthDelimited),e.fork();let c=s;switch(r.K){case o.ScalarType.INT32:case o.ScalarType.FIXED32:case o.ScalarType.UINT32:case o.ScalarType.SFIXED32:case o.ScalarType.SINT32:c=Number.parseInt(s);break;case o.ScalarType.BOOL:(0,a.assert)("true"==s||"false"==s),c="true"==s}switch(m(e,r.K,1,c,!0),r.V.kind){case"scalar":m(e,r.V.T,2,i,!0);break;case"enum":m(e,o.ScalarType.INT32,2,i,!0);break;case"message":g(e,t,r.V.T,2,i)}e.join()},t.writeMessageField=g,t.writeScalar=m,t.writePacked=function(e,t,r,o){if(!o.length)return;e.tag(r,n.WireType.LengthDelimited).fork();let[,s]=(0,i.scalarTypeInfo)(t);for(let t=0;t<o.length;t++)e[s](o[t]);e.join()}},26531:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeBinaryFormatProto2=void 0;const n=r(97168),o=r(83641);t.makeBinaryFormatProto2=function(){return Object.assign(Object.assign({},(0,o.makeBinaryFormatCommon)()),{writeMessage(e,t,r){const s=e.getType();let i;try{for(i of s.fields.byNumber()){let a,c=i.repeated,l=i.localName;if(i.oneof){const t=e[i.oneof.localName];if(t.case!==l)continue;a=t.value}else if(a=e[l],void 0===a&&!i.oneof&&!i.opt)throw new Error(`cannot encode field ${s.typeName}.${i.name} to binary: required field not set`);switch(i.kind){case"scalar":case"enum":let e="enum"==i.kind?n.ScalarType.INT32:i.T;if(c)if(i.packed)(0,o.writePacked)(t,e,i.no,a);else for(const r of a)(0,o.writeScalar)(t,e,i.no,r,!0);else void 0!==a&&(0,o.writeScalar)(t,e,i.no,a,!0);break;case"message":if(c)for(const e of a)(0,o.writeMessageField)(t,r,i.T,i.no,e);else(0,o.writeMessageField)(t,r,i.T,i.no,a);break;case"map":for(const[e,n]of Object.entries(a))(0,o.writeMapEntry)(t,r,i,e,n)}}}catch(e){let t=i?`cannot encode field ${s.typeName}.${null==i?void 0:i.name} to binary`:`cannot encode message ${s.typeName} to binary`,r=e instanceof Error?e.message:String(e);throw new Error(t+(r.length>0?`: ${r}`:""))}return r.writeUnknownFields&&this.writeUnknownFields(e,t),t}})}},67164:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeBinaryFormatProto3=void 0;const n=r(97168),o=r(83641);t.makeBinaryFormatProto3=function(){return Object.assign(Object.assign({},(0,o.makeBinaryFormatCommon)()),{writeMessage(e,t,r){const s=e.getType();for(const i of s.fields.byNumber()){let s,a=i.repeated,c=i.localName;if(i.oneof){const t=e[i.oneof.localName];if(t.case!==c)continue;s=t.value}else s=e[c];switch(i.kind){case"scalar":case"enum":let e="enum"==i.kind?n.ScalarType.INT32:i.T;if(a)if(i.packed)(0,o.writePacked)(t,e,i.no,s);else for(const r of s)(0,o.writeScalar)(t,e,i.no,r,!0);else void 0!==s&&(0,o.writeScalar)(t,e,i.no,s,!!i.oneof||i.opt);break;case"message":if(a)for(const e of s)(0,o.writeMessageField)(t,r,i.T,i.no,e);else(0,o.writeMessageField)(t,r,i.T,i.no,s);break;case"map":for(const[e,n]of Object.entries(s))(0,o.writeMapEntry)(t,r,i,e,n)}}return r.writeUnknownFields&&this.writeUnknownFields(e,t),t}})}},79120:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeEnum=t.makeEnumType=t.setEnumType=t.getEnumType=void 0;const n=r(63789),o=Symbol("@bufbuild/protobuf/enum-type");function s(e,t,r,n){e[o]=i(t,r.map((t=>({no:t.no,name:t.name,localName:e[t.no]}))))}function i(e,t,r){const n=Object.create(null),o=Object.create(null),s=[];for(const e of t){const t=a(e);s.push(t),n[e.name]=t,o[e.no]=t}return{typeName:e,values:s,findName:e=>n[e],findNumber:e=>o[e]}}function a(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}t.getEnumType=function(e){const t=e[o];return(0,n.assert)(t,"missing enum type on enum object"),t},t.setEnumType=s,t.makeEnumType=i,t.makeEnum=function(e,t,r){const n={};for(const e of t){const t=a(e);n[t.localName]=t.no,n[t.no]=t.localName}return s(n,e,t),n}},8367:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalFieldList=void 0,t.InternalFieldList=class{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const e={};for(const t of this.list())e[t.jsonName]=e[t.name]=t;this.jsonNames=e}return this.jsonNames[e]}find(e){if(!this.numbers){const e={};for(const t of this.list())e[t.no]=t;this.numbers=e}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort(((e,t)=>e.no-t.no))),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const r of this.list())r.oneof?r.oneof!==t&&(t=r.oneof,e.push(t)):e.push(r)}return this.members}}},42714:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUnwrappedFieldType=t.unwrapField=t.wrapField=void 0;const n=r(97168);t.wrapField=function(e,t){if(t instanceof e)return t;if(e.fieldWrapper)return e.fieldWrapper.wrapField(t);throw new Error(`cannot unwrap field value, ${e.typeName} does not define a field wrapper`)},t.unwrapField=function(e,t){return e.fieldWrapper?e.fieldWrapper.unwrapField(t):t},t.getUnwrappedFieldType=function(e){if("message_field"===e.kind&&!e.repeated&&null==e.oneof)return o[e.message.typeName]};const o={"google.protobuf.DoubleValue":n.ScalarType.DOUBLE,"google.protobuf.FloatValue":n.ScalarType.FLOAT,"google.protobuf.Int64Value":n.ScalarType.INT64,"google.protobuf.UInt64Value":n.ScalarType.UINT64,"google.protobuf.Int32Value":n.ScalarType.INT32,"google.protobuf.UInt32Value":n.ScalarType.UINT32,"google.protobuf.BoolValue":n.ScalarType.BOOL,"google.protobuf.StringValue":n.ScalarType.STRING,"google.protobuf.BytesValue":n.ScalarType.BYTES}},65610:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalOneofInfo=void 0;const n=r(23548),o=r(63789);t.InternalOneofInfo=class{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=(0,n.localOneofName)(e)}addField(e){(0,o.assert)(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[e]}}},98956:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeJsonFormatCommon=void 0;const n=r(42714),o=r(97168),s=r(63789),i=r(63424),a=r(22961),c={ignoreUnknownFields:!1},l={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function u(e){return e?Object.assign(Object.assign({},c),e):c}function d(e){return e?Object.assign(Object.assign({},l),e):l}function h(e){if(null===e)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":`"${e.split('"').join('\\"')}"`;default:return e.toString()}}function p(e,t){switch(e){case o.ScalarType.DOUBLE:case o.ScalarType.FLOAT:if(null===t)return 0;if("NaN"===t)return Number.NaN;if("Infinity"===t)return Number.POSITIVE_INFINITY;if("-Infinity"===t)return Number.NEGATIVE_INFINITY;if(""===t)break;if("string"==typeof t&&t.trim().length!==t.length)break;if("string"!=typeof t&&"number"!=typeof t)break;const r=Number(t);if(Number.isNaN(r))break;if(!Number.isFinite(r))break;return e==o.ScalarType.FLOAT&&(0,s.assertFloat32)(r),r;case o.ScalarType.INT32:case o.ScalarType.FIXED32:case o.ScalarType.SFIXED32:case o.ScalarType.SINT32:case o.ScalarType.UINT32:if(null===t)return 0;let n;if("number"==typeof t?n=t:"string"==typeof t&&t.length>0&&t.trim().length===t.length&&(n=Number(t)),void 0===n)break;return e==o.ScalarType.UINT32?(0,s.assertUInt32)(n):(0,s.assertInt32)(n),n;case o.ScalarType.INT64:case o.ScalarType.SFIXED64:case o.ScalarType.SINT64:if(null===t)return i.protoInt64.zero;if("number"!=typeof t&&"string"!=typeof t)break;return i.protoInt64.parse(t);case o.ScalarType.FIXED64:case o.ScalarType.UINT64:if(null===t)return i.protoInt64.zero;if("number"!=typeof t&&"string"!=typeof t)break;return i.protoInt64.uParse(t);case o.ScalarType.BOOL:if(null===t)return!1;if("boolean"!=typeof t)break;return t;case o.ScalarType.STRING:if(null===t)return"";if("string"!=typeof t)break;try{encodeURIComponent(t)}catch(e){throw new Error("invalid UTF8")}return t;case o.ScalarType.BYTES:if(null===t||""===t)return new Uint8Array(0);if("string"!=typeof t)break;return a.protoBase64.dec(t)}throw new Error}function f(e,t,r){if(null===t)return 0;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const n=e.findName(t);if(n||r)return null==n?void 0:n.no}throw new Error(`cannot decode enum ${e.typeName} from JSON: ${h(t)}`)}function g(e,t,r,n){var o;if(void 0===t)return t;if(0===t&&!r)return;if(n)return t;if("google.protobuf.NullValue"==e.typeName)return null;const s=e.findNumber(t);return null!==(o=null==s?void 0:s.name)&&void 0!==o?o:t}function m(e,t,r){if(void 0!==t)switch(e){case o.ScalarType.INT32:case o.ScalarType.SFIXED32:case o.ScalarType.SINT32:case o.ScalarType.FIXED32:case o.ScalarType.UINT32:return(0,s.assert)("number"==typeof t),0!=t||r?t:void 0;case o.ScalarType.FLOAT:case o.ScalarType.DOUBLE:return(0,s.assert)("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":0!==t||r?t:void 0;case o.ScalarType.STRING:return(0,s.assert)("string"==typeof t),t.length>0||r?t:void 0;case o.ScalarType.BOOL:return(0,s.assert)("boolean"==typeof t),t||r?t:void 0;case o.ScalarType.UINT64:case o.ScalarType.FIXED64:case o.ScalarType.INT64:case o.ScalarType.SFIXED64:case o.ScalarType.SINT64:return(0,s.assert)("bigint"==typeof t||"string"==typeof t||"number"==typeof t),r||0!=t?t.toString(10):void 0;case o.ScalarType.BYTES:return(0,s.assert)(t instanceof Uint8Array),r||t.byteLength>0?a.protoBase64.enc(t):void 0}}t.makeJsonFormatCommon=function(e){const t=e(g,m);return{makeReadOptions:u,makeWriteOptions:d,readMessage(e,t,r,s){if(null==t||Array.isArray(t)||"object"!=typeof t)throw new Error(`cannot decode message ${e.typeName} from JSON: ${this.debug(t)}`);s=null!=s?s:new e;const i={};for(const[a,c]of Object.entries(t)){const t=e.fields.findJsonName(a);if(!t){if(!r.ignoreUnknownFields)throw new Error(`cannot decode message ${e.typeName} from JSON: key "${a}" is unknown`);continue}let l=t.localName,u=s;if(t.oneof){if(null===c&&"scalar"==t.kind)continue;const r=i[t.oneof.localName];if(r)throw new Error(`cannot decode message ${e.typeName} from JSON: multiple keys for oneof "${t.oneof.name}" present: "${r}", "${a}"`);i[t.oneof.localName]=a,u=u[t.oneof.localName]={case:l},l="value"}if(t.repeated){if(null===c)continue;if(!Array.isArray(c))throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(c)}`);const n=u[l];for(const o of c){if(null===o)throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(o)}`);let s;switch(t.kind){case"message":s=t.T.fromJson(o,r);break;case"enum":if(s=f(t.T,o,r.ignoreUnknownFields),void 0===s)continue;break;case"scalar":try{s=p(t.T,o)}catch(r){let n=`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(o)}`;throw r instanceof Error&&r.message.length>0&&(n+=`: ${r.message}`),new Error(n)}}n.push(s)}}else if("map"==t.kind){if(null===c)continue;if(Array.isArray(c)||"object"!=typeof c)throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(c)}`);const n=u[l];for(const[s,i]of Object.entries(c)){if(null===i)throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: map value null`);let a;switch(t.V.kind){case"message":a=t.V.T.fromJson(i,r);break;case"enum":if(a=f(t.V.T,i,r.ignoreUnknownFields),void 0===a)continue;break;case"scalar":try{a=p(t.V.T,i)}catch(r){let n=`cannot decode map value for field ${e.typeName}.${t.name} from JSON: ${this.debug(c)}`;throw r instanceof Error&&r.message.length>0&&(n+=`: ${r.message}`),new Error(n)}}try{n[p(t.K,t.K==o.ScalarType.BOOL?"true"==s||"false"!=s&&s:s).toString()]=a}catch(r){let n=`cannot decode map key for field ${e.typeName}.${t.name} from JSON: ${this.debug(c)}`;throw r instanceof Error&&r.message.length>0&&(n+=`: ${r.message}`),new Error(n)}}}else switch(t.kind){case"message":const o=t.T;if(null===c&&"google.protobuf.Value"!=o.typeName){if(t.oneof)throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: null is invalid for oneof field "${a}"`);continue}const s=void 0===u[l]?new o:(0,n.wrapField)(o,u[l]);u[l]=(0,n.unwrapField)(o,s.fromJson(c,r));break;case"enum":const i=f(t.T,c,r.ignoreUnknownFields);void 0!==i&&(u[l]=i);break;case"scalar":try{u[l]=p(t.T,c)}catch(r){let n=`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(c)}`;throw r instanceof Error&&r.message.length>0&&(n+=`: ${r.message}`),new Error(n)}}}return s},writeMessage(e,r){const n=e.getType(),o={};let s;try{for(const i of n.fields.byMember()){let n;if("oneof"==i.kind){const o=e[i.localName];if(void 0===o.value)continue;if(s=i.findField(o.case),!s)throw"oneof case not found: "+o.case;n=t(s,o.value,r)}else s=i,n=t(s,e[s.localName],r);void 0!==n&&(o[r.useProtoFieldName?s.name:s.jsonName]=n)}}catch(e){const t=s?`cannot encode field ${n.typeName}.${s.name} to JSON`:`cannot encode message ${n.typeName} to JSON`,r=e instanceof Error?e.message:String(e);throw new Error(t+(r.length>0?`: ${r}`:""))}return o},readScalar:p,writeScalar:m,debug:h}}},37448:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeJsonFormatProto2=void 0;const n=r(42714),o=r(63789),s=r(98956);t.makeJsonFormatProto2=function(){return(0,s.makeJsonFormatCommon)(((e,t)=>function(r,s,i){if("map"==r.kind){const n={};switch(r.V.kind){case"scalar":for(const[e,i]of Object.entries(s)){const s=t(r.V.T,i,!0);(0,o.assert)(void 0!==s),n[e.toString()]=s}break;case"message":for(const[e,t]of Object.entries(s))n[e.toString()]=t.toJson(i);break;case"enum":const a=r.V.T;for(const[t,r]of Object.entries(s)){(0,o.assert)(void 0===r||"number"==typeof r);const s=e(a,r,!0,i.enumAsInteger);(0,o.assert)(void 0!==s),n[t.toString()]=s}}return i.emitDefaultValues||Object.keys(n).length>0?n:void 0}if(r.repeated){const n=[];switch(r.kind){case"scalar":for(let e=0;e<s.length;e++)n.push(t(r.T,s[e],!0));break;case"enum":for(let t=0;t<s.length;t++)n.push(e(r.T,s[t],!0,i.enumAsInteger));break;case"message":for(let e=0;e<s.length;e++)n.push(s[e].toJson(i))}return i.emitDefaultValues||n.length>0?n:void 0}if(void 0!==s)switch(r.kind){case"scalar":return t(r.T,s,!0);case"enum":return e(r.T,s,!0,i.enumAsInteger);case"message":return(0,n.wrapField)(r.T,s).toJson(i)}else if(!r.oneof&&!r.opt)throw"required field not set"}))}},92442:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeJsonFormatProto3=void 0;const n=r(42714),o=r(63789),s=r(98956);t.makeJsonFormatProto3=function(){return(0,s.makeJsonFormatCommon)(((e,t)=>function(r,s,i){if("map"==r.kind){const n={};switch(r.V.kind){case"scalar":for(const[e,i]of Object.entries(s)){const s=t(r.V.T,i,!0);(0,o.assert)(void 0!==s),n[e.toString()]=s}break;case"message":for(const[e,t]of Object.entries(s))n[e.toString()]=t.toJson(i);break;case"enum":const a=r.V.T;for(const[t,r]of Object.entries(s)){(0,o.assert)(void 0===r||"number"==typeof r);const s=e(a,r,!0,i.enumAsInteger);(0,o.assert)(void 0!==s),n[t.toString()]=s}}return i.emitDefaultValues||Object.keys(n).length>0?n:void 0}if(r.repeated){const o=[];switch(r.kind){case"scalar":for(let e=0;e<s.length;e++)o.push(t(r.T,s[e],!0));break;case"enum":for(let t=0;t<s.length;t++)o.push(e(r.T,s[t],!0,i.enumAsInteger));break;case"message":for(let e=0;e<s.length;e++)o.push((0,n.wrapField)(r.T,s[e]).toJson(i))}return i.emitDefaultValues||o.length>0?o:void 0}switch(r.kind){case"scalar":return t(r.T,s,!!r.oneof||r.opt||i.emitDefaultValues);case"enum":return e(r.T,s,!!r.oneof||r.opt||i.emitDefaultValues,i.enumAsInteger);case"message":return void 0!==s?(0,n.wrapField)(r.T,s).toJson(i):void 0}}))}},53561:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeMessageType=void 0;const n=r(74748);t.makeMessageType=function(e,t,r,o){var s;const i=null!==(s=null==o?void 0:o.localName)&&void 0!==s?s:t.substring(t.lastIndexOf(".")+1),a={[i]:function(t){e.util.initFields(this),e.util.initPartial(t,this)}}[i];return Object.setPrototypeOf(a.prototype,new n.Message),Object.assign(a,{runtime:e,typeName:t,fields:e.util.newFieldList(r),fromBinary:(e,t)=>(new a).fromBinary(e,t),fromJson:(e,t)=>(new a).fromJson(e,t),fromJsonString:(e,t)=>(new a).fromJsonString(e,t),equals:(t,r)=>e.util.equals(a,t,r)}),a}},23548:(e,t)=>{"use strict";function r(e,t){let r=o(e);return t||(i[r]||a[r])&&(r+="$"),r}function n(e){return r(e,!1)}function o(e){let t=!1;const r=[];for(let n=0;n<e.length;n++){let o=e.charAt(n);switch(o){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r.push(o),t=!1;break;default:t&&(t=!1,o=o.toUpperCase()),r.push(o)}}return r.join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.findEnumSharedPrefix=t.fieldJsonName=t.localOneofName=t.localFieldName=t.localName=void 0,t.localName=function(e){switch(e.kind){case"enum_field":case"message_field":case"map_field":case"scalar_field":return r(e.name,void 0!==e.oneof);case"oneof":return n(e.name);case"enum":case"message":case"service":{const t=e.file.proto.package,r=void 0===t?0:t.length+1,n=e.typeName.substring(r).replace(/\./g,"_");return s[n]?n+"$":n}case"enum_value":{const t=e.parent.sharedPrefix;if(void 0===t)return e.name;const r=e.name.substring(t.length);return i[r]?r+"$":r}case"rpc":{let t=e.name;return 0==t.length?t:(t=t[0].toLowerCase()+t.substring(1),i[t]?t+"$":t)}}},t.localFieldName=r,t.localOneofName=n,t.fieldJsonName=o,t.findEnumSharedPrefix=function(e,t){const r=((n=e).substring(0,1)+n.substring(1).replace(/[A-Z]/g,(e=>"_"+e))).toLowerCase()+"_";var n;for(const e of t){if(!e.toLowerCase().startsWith(r))return;const t=e.substring(r.length);if(0==t.length)return;if(/^\d/.test(t))return}return r};const s={break:!0,case:!0,catch:!0,class:!0,const:!0,continue:!0,debugger:!0,default:!0,delete:!0,do:!0,else:!0,export:!0,extends:!0,false:!0,finally:!0,for:!0,function:!0,if:!0,import:!0,in:!0,instanceof:!0,new:!0,null:!0,return:!0,super:!0,switch:!0,this:!0,throw:!0,true:!0,try:!0,typeof:!0,var:!0,void:!0,while:!0,with:!0,yield:!0,enum:!0,implements:!0,interface:!0,let:!0,package:!0,private:!0,protected:!0,public:!0,static:!0,Object:!0,bigint:!0,number:!0,boolean:!0,string:!0,object:!0,globalThis:!0,Uint8Array:!0,Partial:!0},i={constructor:!0,toString:!0,toJSON:!0,valueOf:!0},a={getType:!0,clone:!0,equals:!0,fromBinary:!0,fromJson:!0,fromJsonString:!0,toBinary:!0,toJson:!0,toJsonString:!0,toObject:!0}},62869:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeProtoRuntime=void 0;const n=r(79120),o=r(53561);t.makeProtoRuntime=function(e,t,r,s){return{syntax:e,json:t,bin:r,util:s,makeMessageType(e,t,r){return(0,o.makeMessageType)(this,e,t,r)},makeEnum:n.makeEnum,makeEnumType:n.makeEnumType,getEnumType:n.getEnumType}}},42068:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scalarTypeInfo=t.scalarDefaultValue=t.scalarEquals=void 0;const n=r(97168),o=r(65247),s=r(63424);t.scalarEquals=function(e,t,r){if(t===r)return!0;if(e==n.ScalarType.BYTES){if(!(t instanceof Uint8Array&&r instanceof Uint8Array))return!1;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==r[e])return!1;return!0}switch(e){case n.ScalarType.UINT64:case n.ScalarType.FIXED64:case n.ScalarType.INT64:case n.ScalarType.SFIXED64:case n.ScalarType.SINT64:return t==r}return!1},t.scalarDefaultValue=function(e){switch(e){case n.ScalarType.BOOL:return!1;case n.ScalarType.UINT64:case n.ScalarType.FIXED64:case n.ScalarType.INT64:case n.ScalarType.SFIXED64:case n.ScalarType.SINT64:return s.protoInt64.zero;case n.ScalarType.DOUBLE:case n.ScalarType.FLOAT:return 0;case n.ScalarType.BYTES:return new Uint8Array(0);case n.ScalarType.STRING:return"";default:return 0}},t.scalarTypeInfo=function(e,t){const r=void 0===t;let s=o.WireType.Varint,i=0===t;switch(e){case n.ScalarType.STRING:i=r||!t.length,s=o.WireType.LengthDelimited;break;case n.ScalarType.BOOL:i=!1===t;break;case n.ScalarType.DOUBLE:s=o.WireType.Bit64;break;case n.ScalarType.FLOAT:s=o.WireType.Bit32;break;case n.ScalarType.INT64:case n.ScalarType.UINT64:i=r||0==t;break;case n.ScalarType.FIXED64:i=r||0==t,s=o.WireType.Bit64;break;case n.ScalarType.BYTES:i=r||!t.byteLength,s=o.WireType.LengthDelimited;break;case n.ScalarType.FIXED32:case n.ScalarType.SFIXED32:s=o.WireType.Bit32;break;case n.ScalarType.SFIXED64:i=r||0==t,s=o.WireType.Bit64;break;case n.ScalarType.SINT64:i=r||0==t}return[s,n.ScalarType[e].toLowerCase(),r||i]}},65783:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeUtilCommon=void 0;const n=r(79120),o=r(97168),s=r(42068);function i(e,t){if(void 0===t)return t;switch(e.kind){case"enum":return t;case"scalar":if(e.T===o.ScalarType.BYTES){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t;case"message":return e.T.fieldWrapper?e.T.fieldWrapper.unwrapField(e.T.fieldWrapper.wrapField(t).clone()):t.clone()}}t.makeUtilCommon=function(){return{setEnumType:n.setEnumType,initPartial(e,t){if(void 0===e)return;const r=t.getType();for(const n of r.fields.byMember()){const r=n.localName,o=t,s=e;if(void 0!==s[r])switch(n.kind){case"oneof":const e=s[r].case;if(void 0===e)continue;const t=n.findField(e);let i=s[r].value;!t||"message"!=t.kind||i instanceof t.T||(i=new t.T(i)),o[r]={case:e,value:i};break;case"scalar":case"enum":o[r]=s[r];break;case"map":switch(n.V.kind){case"scalar":case"enum":Object.assign(o[r],s[r]);break;case"message":const e=n.V.T;for(const t of Object.keys(s[r])){let n=s[r][t];e.fieldWrapper||(n=new e(n)),o[r][t]=n}}break;case"message":const a=n.T;if(n.repeated)o[r]=s[r].map((e=>e instanceof a?e:new a(e)));else if(void 0!==s[r]){const e=s[r];a.fieldWrapper?o[r]=e:o[r]=e instanceof a?e:new a(e)}}}},equals:(e,t,r)=>t===r||!(!t||!r)&&e.fields.byMember().every((e=>{const n=t[e.localName],i=r[e.localName];if(e.repeated){if(n.length!==i.length)return!1;switch(e.kind){case"message":return n.every(((t,r)=>e.T.equals(t,i[r])));case"scalar":return n.every(((t,r)=>(0,s.scalarEquals)(e.T,t,i[r])));case"enum":return n.every(((e,t)=>(0,s.scalarEquals)(o.ScalarType.INT32,e,i[t])))}throw new Error(`repeated cannot contain ${e.kind}`)}switch(e.kind){case"message":return e.T.equals(n,i);case"enum":return(0,s.scalarEquals)(o.ScalarType.INT32,n,i);case"scalar":return(0,s.scalarEquals)(e.T,n,i);case"oneof":if(n.case!==i.case)return!1;const t=n.case,r=e.findField(t);if(void 0===r)return!0;switch(r.kind){case"message":return r.T.equals(n[t],i[t]);case"enum":return(0,s.scalarEquals)(o.ScalarType.INT32,n,i);case"scalar":return(0,s.scalarEquals)(r.T,n,i)}throw new Error(`oneof cannot contain ${r.kind}`);case"map":const a=Object.keys(n);if(a.some((e=>void 0===i[e])))return!1;switch(e.V.kind){case"message":const t=e.V.T;return a.every((e=>t.equals(n[e],i[e])));case"enum":return a.every((e=>(0,s.scalarEquals)(o.ScalarType.INT32,n[e],i[e])));case"scalar":const r=e.V.T;return a.every((e=>(0,s.scalarEquals)(r,n[e],i[e])))}}})),clone(e){const t=e.getType(),r=new t,n=r;for(const r of t.fields.byMember()){const t=e[r.localName];let o;if(r.repeated)o=t.map((e=>i(r,e)));else if("map"==r.kind){o=n[r.localName];for(const[e,n]of Object.entries(t))o[e]=i(r.V,n)}else if("oneof"==r.kind){const e=r.findField(t.case);o=e?{case:t.case,value:i(e,t.value)}:{case:void 0}}else o=i(r,t);n[r.localName]=o}return r}}}},22961:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.protoBase64=void 0;let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),n=[];for(let e=0;e<r.length;e++)n[r[e].charCodeAt(0)]=e;n["-".charCodeAt(0)]=r.indexOf("+"),n["_".charCodeAt(0)]=r.indexOf("/"),t.protoBase64={dec(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let r,o=new Uint8Array(t),s=0,i=0,a=0;for(let t=0;t<e.length;t++){if(r=n[e.charCodeAt(t)],void 0===r)switch(e[t]){case"=":i=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:a=r,i=1;break;case 1:o[s++]=a<<2|(48&r)>>4,a=r,i=2;break;case 2:o[s++]=(15&a)<<4|(60&r)>>2,a=r,i=3;break;case 3:o[s++]=(3&a)<<6|r,i=0}}if(1==i)throw Error("invalid base64 string.");return o.subarray(0,s)},enc(e){let t,n="",o=0,s=0;for(let i=0;i<e.length;i++)switch(t=e[i],o){case 0:n+=r[t>>2],s=(3&t)<<4,o=1;break;case 1:n+=r[s|t>>4],s=(15&t)<<2,o=2;break;case 2:n+=r[s|t>>6],n+=r[63&t],o=0}return o&&(n+=r[s],n+="=",1==o&&(n+="=")),n}}},63424:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.protoInt64=void 0;const n=r(63789),o=r(71539);t.protoInt64=function(){const e=new DataView(new ArrayBuffer(8));if(void 0!==globalThis.BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64&&("object"!=typeof process||"object"!=typeof process.env||"1"!==process.env.BUF_BIGINT_DISABLE)){const t=BigInt("-9223372036854775808"),r=BigInt("9223372036854775807"),n=BigInt("0"),o=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){const n="bigint"==typeof e?e:BigInt(e);if(n>r||n<t)throw new Error(`int64 invalid: ${e}`);return n},uParse(e){const t="bigint"==typeof e?e:BigInt(e);if(t>o||t<n)throw new Error(`uint64 invalid: ${e}`);return t},enc(t){return e.setBigInt64(0,this.parse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(t){return e.setBigInt64(0,this.uParse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(t,r)=>(e.setInt32(0,t,!0),e.setInt32(4,r,!0),e.getBigInt64(0,!0)),uDec:(t,r)=>(e.setInt32(0,t,!0),e.setInt32(4,r,!0),e.getBigUint64(0,!0))}}const t=e=>(0,n.assert)(/^-?[0-9]+$/.test(e),`int64 invalid: ${e}`),r=e=>(0,n.assert)(/^[0-9]+$/.test(e),`uint64 invalid: ${e}`);return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),t(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),r(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),t(e),(0,o.int64FromString)(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),r(e),(0,o.int64FromString)(e)),dec:(e,t)=>(0,o.int64ToString)(e,t),uDec:(e,t)=>(0,o.uInt64ToString)(e,t)}}()},87569:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.proto2=void 0;const n=r(62869),o=r(26531),s=r(65783),i=r(8367),a=r(65610),c=r(23548),l=r(37448);function u(e){var t,r,n;const o=[];let s;for(const i of"function"==typeof e?e():e){const e=i;if(e.localName=(0,c.localFieldName)(i.name,void 0!==i.oneof),e.jsonName=null!==(t=i.jsonName)&&void 0!==t?t:(0,c.fieldJsonName)(i.name),e.repeated=null!==(r=i.repeated)&&void 0!==r&&r,e.packed=null!==(n=i.packed)&&void 0!==n&&n,void 0!==i.oneof){const t="string"==typeof i.oneof?i.oneof:i.oneof.name;s&&s.name==t||(s=new a.InternalOneofInfo(t)),e.oneof=s,s.addField(e)}o.push(e)}return o}t.proto2=(0,n.makeProtoRuntime)("proto2",(0,l.makeJsonFormatProto2)(),(0,o.makeBinaryFormatProto2)(),Object.assign(Object.assign({},(0,s.makeUtilCommon)()),{newFieldList:e=>new i.InternalFieldList(e,u),initFields(e){for(const t of e.getType().fields.byMember()){const r=t.localName,n=e;if(t.repeated)n[r]=[];else switch(t.kind){case"oneof":n[r]={case:void 0};break;case"map":n[r]={}}}}}))},52398:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.proto3=void 0;const n=r(62869),o=r(67164),s=r(92442),i=r(65783),a=r(8367),c=r(42068),l=r(97168),u=r(65610),d=r(23548);function h(e){var t,r,n;const o=[];let s;for(const i of"function"==typeof e?e():e){const e=i;if(e.localName=(0,d.localFieldName)(i.name,void 0!==i.oneof),e.jsonName=null!==(t=i.jsonName)&&void 0!==t?t:(0,d.fieldJsonName)(i.name),e.repeated=null!==(r=i.repeated)&&void 0!==r&&r,e.packed=null!==(n=i.packed)&&void 0!==n?n:"enum"==i.kind||"scalar"==i.kind&&i.T!=l.ScalarType.BYTES&&i.T!=l.ScalarType.STRING,void 0!==i.oneof){const t="string"==typeof i.oneof?i.oneof:i.oneof.name;s&&s.name==t||(s=new u.InternalOneofInfo(t)),e.oneof=s,s.addField(e)}o.push(e)}return o}t.proto3=(0,n.makeProtoRuntime)("proto3",(0,s.makeJsonFormatProto3)(),(0,o.makeBinaryFormatProto3)(),Object.assign(Object.assign({},(0,i.makeUtilCommon)()),{newFieldList:e=>new a.InternalFieldList(e,h),initFields(e){for(const t of e.getType().fields.byMember()){if(t.opt)continue;const r=t.localName,n=e;if(t.repeated)n[r]=[];else switch(t.kind){case"oneof":n[r]={case:void 0};break;case"enum":n[r]=0;break;case"map":n[r]={};break;case"scalar":n[r]=(0,c.scalarDefaultValue)(t.T)}}}}))},23621:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.MethodIdempotency=t.MethodKind=void 0,(n=t.MethodKind||(t.MethodKind={}))[n.Unary=0]="Unary",n[n.ServerStreaming=1]="ServerStreaming",n[n.ClientStreaming=2]="ClientStreaming",n[n.BiDiStreaming=3]="BiDiStreaming",(r=t.MethodIdempotency||(t.MethodIdempotency={}))[r.NoSideEffects=1]="NoSideEffects",r[r.Idempotent=2]="Idempotent"},79019:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},41583:(e,t)=>{var r,n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}function o(e){var t=Math.clz32(e&-e);return e?31-t:t}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var s={},i={};function a(e,t){var r,n,o;return t?(o=0<=(e>>>=0)&&e<256)&&(n=i[e])?n:(r=l(e,0,!0),o&&(i[e]=r),r):(o=-128<=(e|=0)&&e<128)&&(n=s[e])?n:(r=l(e,e<0?-1:0,!1),o&&(s[e]=r),r)}function c(e,t){if(isNaN(e))return t?v:y;if(t){if(e<0)return v;if(e>=f)return w}else{if(e<=-g)return A;if(e+1>=g)return E}return e<0?c(-e,t).neg():l(e%p|0,e/p|0,t)}function l(e,t,n){return new r(e,t,n)}r.fromInt=a,r.fromNumber=c,r.fromBits=l;var u=Math.pow;function d(e,t,r){if(0===e.length)throw Error("empty string");if("number"==typeof t?(r=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?v:y;if((r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return d(e.substring(1),t,r).neg();for(var o=c(u(r,8)),s=y,i=0;i<e.length;i+=8){var a=Math.min(8,e.length-i),l=parseInt(e.substring(i,i+a),r);if(a<8){var h=c(u(r,a));s=s.mul(h).add(c(l))}else s=(s=s.mul(o)).add(c(l))}return s.unsigned=t,s}function h(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?d(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=h;var p=4294967296,f=p*p,g=f/2,m=a(1<<24),y=a(0);r.ZERO=y;var v=a(0,!0);r.UZERO=v;var _=a(1);r.ONE=_;var b=a(1,!0);r.UONE=b;var S=a(-1);r.NEG_ONE=S;var E=l(-1,2147483647,!1);r.MAX_VALUE=E;var w=l(-1,-1,!0);r.MAX_UNSIGNED_VALUE=w;var A=l(0,-2147483648,!1);r.MIN_VALUE=A;var T=r.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},T.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(A)){var t=c(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=c(u(e,6),this.unsigned),s=this,i="";;){var a=s.div(o),l=(s.sub(a.mul(o)).toInt()>>>0).toString(e);if((s=a).isZero())return l+i;for(;l.length<6;)l="0"+l;i=""+l+i}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(A)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1==(1&this.low)},T.isEven=function(){return 0==(1&this.low)},T.equals=function(e){return n(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},T.eq=T.equals,T.notEquals=function(e){return!this.eq(e)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(e){return this.comp(e)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(e){return this.comp(e)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(e){return this.comp(e)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(e){return this.comp(e)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(e){if(n(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(A)?A:this.not().add(_)},T.neg=T.negate,T.add=function(e){n(e)||(e=h(e));var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,s=65535&this.low,i=e.high>>>16,a=65535&e.high,c=e.low>>>16,u=0,d=0,p=0,f=0;return p+=(f+=s+(65535&e.low))>>>16,d+=(p+=o+c)>>>16,u+=(d+=r+a)>>>16,u+=t+i,l((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},T.subtract=function(e){return n(e)||(e=h(e)),this.add(e.neg())},T.sub=T.subtract,T.multiply=function(e){if(this.isZero())return this;if(n(e)||(e=h(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?v:y;if(this.eq(A))return e.isOdd()?A:y;if(e.eq(A))return this.isOdd()?A:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return c(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=65535&this.high,s=this.low>>>16,i=65535&this.low,a=e.high>>>16,u=65535&e.high,d=e.low>>>16,p=65535&e.low,f=0,g=0,_=0,b=0;return _+=(b+=i*p)>>>16,g+=(_+=s*p)>>>16,_&=65535,g+=(_+=i*d)>>>16,f+=(g+=o*p)>>>16,g&=65535,f+=(g+=s*d)>>>16,g&=65535,f+=(g+=i*u)>>>16,f+=r*p+o*d+s*u+i*a,l((_&=65535)<<16|(b&=65535),(f&=65535)<<16|(g&=65535),this.unsigned)},T.mul=T.multiply,T.divide=function(e){if(n(e)||(e=h(e)),e.isZero())throw Error("division by zero");var r,o,s;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return b;s=v}else{if(this.eq(A))return e.eq(_)||e.eq(S)?A:e.eq(A)?_:(r=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?_:S:(o=this.sub(e.mul(r)),s=r.add(o.div(e)));if(e.eq(A))return this.unsigned?v:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=y}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(r)/Math.LN2),a=i<=48?1:u(2,i-48),d=c(r),p=d.mul(e);p.isNegative()||p.gt(o);)p=(d=c(r-=a,this.unsigned)).mul(e);d.isZero()&&(d=_),s=s.add(d),o=o.sub(p)}return s},T.div=T.divide,T.modulo=function(e){return n(e)||(e=h(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return l(~this.low,~this.high,this.unsigned)},T.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},T.clz=T.countLeadingZeros,T.countTrailingZeros=function(){return this.low?o(this.low):o(this.high)+32},T.ctz=T.countTrailingZeros,T.and=function(e){return n(e)||(e=h(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},T.or=function(e){return n(e)||(e=h(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},T.xor=function(e){return n(e)||(e=h(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},T.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):l(32===e?this.high:this.high>>>e-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.rotateLeft=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?l(this.high,this.low,this.unsigned):e<32?(t=32-e,l(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),l(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},T.rotl=T.rotateLeft,T.rotateRight=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?l(this.high,this.low,this.unsigned):e<32?(t=32-e,l(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),l(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},T.rotr=T.rotateRight,T.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},T.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var C=r;return e.default=C,"default"in e?e.default:e}({});void 0===(r=function(){return n}.apply(t,[]))||(e.exports=r)},56569:e=>{"use strict";e.exports={i8:"1.8.9"}},26593:e=>{"use strict";e.exports={i8:"1.8.11"}},44784:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Api":{"fields":{"name":{"type":"string","id":1},"methods":{"rule":"repeated","type":"Method","id":2},"options":{"rule":"repeated","type":"Option","id":3},"version":{"type":"string","id":4},"sourceContext":{"type":"SourceContext","id":5},"mixins":{"rule":"repeated","type":"Mixin","id":6},"syntax":{"type":"Syntax","id":7}}},"Method":{"fields":{"name":{"type":"string","id":1},"requestTypeUrl":{"type":"string","id":2},"requestStreaming":{"type":"bool","id":3},"responseTypeUrl":{"type":"string","id":4},"responseStreaming":{"type":"bool","id":5},"options":{"rule":"repeated","type":"Option","id":6},"syntax":{"type":"Syntax","id":7}}},"Mixin":{"fields":{"name":{"type":"string","id":1},"root":{"type":"string","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}}}}}}}}')},43571:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}}}}}}}}')},73342:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},58783:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Type":{"fields":{"name":{"type":"string","id":1},"fields":{"rule":"repeated","type":"Field","id":2},"oneofs":{"rule":"repeated","type":"string","id":3},"options":{"rule":"repeated","type":"Option","id":4},"sourceContext":{"type":"SourceContext","id":5},"syntax":{"type":"Syntax","id":6}}},"Field":{"fields":{"kind":{"type":"Kind","id":1},"cardinality":{"type":"Cardinality","id":2},"number":{"type":"int32","id":3},"name":{"type":"string","id":4},"typeUrl":{"type":"string","id":6},"oneofIndex":{"type":"int32","id":7},"packed":{"type":"bool","id":8},"options":{"rule":"repeated","type":"Option","id":9},"jsonName":{"type":"string","id":10},"defaultValue":{"type":"string","id":11}},"nested":{"Kind":{"values":{"TYPE_UNKNOWN":0,"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Cardinality":{"values":{"CARDINALITY_UNKNOWN":0,"CARDINALITY_OPTIONAL":1,"CARDINALITY_REQUIRED":2,"CARDINALITY_REPEATED":3}}}},"Enum":{"fields":{"name":{"type":"string","id":1},"enumvalue":{"rule":"repeated","type":"EnumValue","id":2},"options":{"rule":"repeated","type":"Option","id":3},"sourceContext":{"type":"SourceContext","id":4},"syntax":{"type":"Syntax","id":5}}},"EnumValue":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"rule":"repeated","type":"Option","id":3}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},66674:e=>{"use strict";e.exports={i8:"1.11.0"}}},__webpack_module_cache__={},installedChunks;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,r)=>(__webpack_require__.f[r](e,t),t)),[])),__webpack_require__.u=e=>e+".js",__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},installedChunks={898:1},__webpack_require__.f.require=(e,t)=>{installedChunks[e]||(e=>{var t=e.modules,r=e.ids,n=e.runtime;for(var o in t)__webpack_require__.o(t,o)&&(__webpack_require__.m[o]=t[o]);n&&n(__webpack_require__);for(var s=0;s<r.length;s++)installedChunks[r[s]]=1})(require("./"+__webpack_require__.u(e)))};var __webpack_exports__=__webpack_require__(50112);module.exports=__webpack_exports__})();
//# sourceMappingURL=extension.js.map